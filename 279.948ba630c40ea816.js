(self.webpackChunkspear=self.webpackChunkspear||[]).push([[279],{4279:(Ce,O,S)=>{S.r(O);var k=S(4497),o=S(2207),x=S(702),L=S(658),j=S(9906),d=S(2508),m=S(6317),y=S(3336),R=S(6646),M=S(253);function z(t){for(let r in t){let e=t[r]||"";switch(r){case"display":t.display="flex"===e?["-webkit-flex","flex"]:"inline-flex"===e?["-webkit-inline-flex","inline-flex"]:e;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":t["-webkit-"+r]=e;break;case"flex-direction":e=e||"row",t["-webkit-flex-direction"]=e,t["flex-direction"]=e;break;case"order":t.order=t["-webkit-"+r]=isNaN(+e)?"0":e}}return t}const Y="inline",X=["row","column","row-reverse","column-reverse"];function Q(t){let[r,e,n]=W(t);return function U(t,r=null,e=!1){return{display:e?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":r||null}}(r,e,n)}function W(t){t=t?.toLowerCase()??"";let[r,e,n]=t.split(" ");return X.find(a=>a===r)||(r=X[0]),e===Y&&(e=n!==Y?n:"",n=Y),[r,le(e),!!n]}function J(t){let[r]=W(t);return r.indexOf("row")>-1}function le(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}function G(t,...r){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(let e of r)if(null!=e)for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var $=S(116),ee=S(9337);const be={provide:o.APP_BOOTSTRAP_LISTENER,useFactory:function _e(t,r){return()=>{if((0,x.isPlatformBrowser)(r)){const e=Array.from(t.querySelectorAll(`[class*=${me}]`)),n=/\bflex-layout-.+?\b/g;e.forEach(a=>{a.classList.contains(`${me}ssr`)&&a.parentNode?a.parentNode.removeChild(a):a.className.replace(n,"")})}}},deps:[x.DOCUMENT,o.PLATFORM_ID],multi:!0},me="flex-layout-";let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[be]}),t})();class T{constructor(r=!1,e="all",n="",a="",s=0){this.matches=r,this.mediaQuery=e,this.mqAlias=n,this.suffix=a,this.priority=s,this.property=""}clone(){return new T(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let _=(()=>{class t{constructor(){this.stylesheet=new Map}addStyleToElement(e,n,a){const s=this.stylesheet.get(e);s?s.set(n,a):this.stylesheet.set(e,new Map([[n,a]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(e,n){const a=this.stylesheet.get(e);let s="";if(a){const l=a.get(n);("number"==typeof l||"string"==typeof l)&&(s=l+"")}return s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const E={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},N=new o.InjectionToken("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>E}),A=new o.InjectionToken("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),ne=new o.InjectionToken("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function pe(t,r){return t=t?t.clone():new T,r&&(t.mqAlias=r.alias,t.mediaQuery=r.mediaQuery,t.suffix=r.suffix,t.priority=r.priority),t}class Le{constructor(){this.shouldCache=!0}sideEffect(r,e,n){}}let oe=(()=>{class t{constructor(e,n,a,s){this._serverStylesheet=e,this._serverModuleLoaded=n,this._platformId=a,this.layoutConfig=s}applyStyleToElement(e,n,a=null){let s={};"string"==typeof n&&(s[n]=a,n=s),s=this.layoutConfig.disableVendorPrefixes?n:z(n),this._applyMultiValueStyleToElement(s,e)}applyStyleToElements(e,n=[]){const a=this.layoutConfig.disableVendorPrefixes?e:z(e);n.forEach(s=>{this._applyMultiValueStyleToElement(a,s)})}getFlowDirection(e){const n="flex-direction";let a=this.lookupStyle(e,n);return[a||"row",this.lookupInlineStyle(e,n)||(0,x.isPlatformServer)(this._platformId)&&this._serverModuleLoaded?a:""]}hasWrap(e){return"wrap"===this.lookupStyle(e,"flex-wrap")}lookupAttributeValue(e,n){return e.getAttribute(n)??""}lookupInlineStyle(e,n){return(0,x.isPlatformBrowser)(this._platformId)?e.style.getPropertyValue(n):function $e(t,r){return Je(t)[r]??""}(e,n)}lookupStyle(e,n,a=!1){let s="";return e&&((s=this.lookupInlineStyle(e,n))||((0,x.isPlatformBrowser)(this._platformId)?a||(s=getComputedStyle(e).getPropertyValue(n)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(e,n)))),s?s.trim():""}_applyMultiValueStyleToElement(e,n){Object.keys(e).sort().forEach(a=>{const s=e[a],l=Array.isArray(s)?s:[s];l.sort();for(let c of l)c=c?c+"":"",(0,x.isPlatformBrowser)(this._platformId)||!this._serverModuleLoaded?(0,x.isPlatformBrowser)(this._platformId)?n.style.setProperty(a,c):ct(n,a,c):this._serverStylesheet.addStyleToElement(n,a,c)})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(_),o.\u0275\u0275inject(A),o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(N))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ct(t,r,e){r=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const n=Je(t);n[r]=e??"",function Ne(t,r){let e="";for(const n in r)r[n]&&(e+=`${n}:${r[n]};`);t.setAttribute("style",e)}(t,n)}function Je(t){const r={},e=t.getAttribute("style");if(e){const n=e.split(/;+/g);for(let a=0;a<n.length;a++){const s=n[a].trim();if(s.length>0){const l=s.indexOf(":");if(-1===l)throw new Error(`Invalid CSS style: ${s}`);r[s.substr(0,l).trim()]=s.substr(l+1).trim()}}}return r}function Ze(t,r){return(r&&r.priority||0)-(t&&t.priority||0)}function mt(t,r){return(t.priority||0)-(r.priority||0)}let nt=(()=>{class t{constructor(e,n,a){this._zone=e,this._platformId=n,this._document=a,this.source=new m.X(new T(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const e=[];return this.registry.forEach((n,a)=>{n.matches&&e.push(a)}),e}isActive(e){return this.registry.get(e)?.matches??this.registerQuery(e).some(a=>a.matches)}observe(e,n=!1){if(e&&e.length){const a=this._observable$.pipe((0,$.h)(l=>!n||e.indexOf(l.mediaQuery)>-1)),s=new y.y(l=>{const c=this.registerQuery(e);if(c.length){const f=c.pop();c.forEach(h=>{l.next(h)}),this.source.next(f)}l.complete()});return(0,R.T)(s,a)}return this._observable$}registerQuery(e){const n=Array.isArray(e)?e:[e],a=[];return function it(t,r){const e=t.filter(n=>!Ge[n]);if(e.length>0){const n=e.join(", ");try{const a=r.createElement("style");a.setAttribute("type","text/css"),a.styleSheet||a.appendChild(r.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${n} {.fx-query-test{ }}\n`)),r.head.appendChild(a),e.forEach(s=>Ge[s]=a)}catch(a){console.error(a)}}}(n,this._document),n.forEach(s=>{const l=f=>{this._zone.run(()=>this.source.next(new T(f.matches,s)))};let c=this.registry.get(s);c||(c=this.buildMQL(s),c.addListener(l),this.pendingRemoveListenerFns.push(()=>c.removeListener(l)),this.registry.set(s,c)),c.matches&&a.push(new T(!0,s))}),a}ngOnDestroy(){let e;for(;e=this.pendingRemoveListenerFns.pop();)e()}buildMQL(e){return function fe(t,r){return r&&window.matchMedia("all").addListener?window.matchMedia(t):{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(e,(0,x.isPlatformBrowser)(this._platformId))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(o.NgZone),o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(x.DOCUMENT))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ge={},te=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],se="(orientation: portrait) and (max-width: 599.98px)",De="(orientation: landscape) and (max-width: 959.98px)",Ve="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",de="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",ve="(orientation: portrait) and (min-width: 840px)",rt="(orientation: landscape) and (min-width: 1280px)",xe={HANDSET:`${se}, ${De}`,TABLET:`${Ve} , ${de}`,WEB:`${ve}, ${rt} `,HANDSET_PORTRAIT:`${se}`,TABLET_PORTRAIT:`${Ve} `,WEB_PORTRAIT:`${ve}`,HANDSET_LANDSCAPE:`${De}`,TABLET_LANDSCAPE:`${de}`,WEB_LANDSCAPE:`${rt}`},q=[{alias:"handset",priority:2e3,mediaQuery:xe.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:xe.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:xe.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:xe.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:xe.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:xe.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:xe.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:xe.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:xe.WEB_PORTRAIT,overlapping:!0}],D=/(\.|-|_)/g;function K(t){let r=t.length>0?t.charAt(0):"",e=t.length>1?t.slice(1):"";return r.toUpperCase()+e}const ot=new o.InjectionToken("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const t=(0,o.inject)(ne),r=(0,o.inject)(N),e=[].concat.apply([],(t||[]).map(a=>Array.isArray(a)?a:[a]));return function tt(t,r=[]){const e={};return t.forEach(n=>{e[n.alias]=n}),r.forEach(n=>{e[n.alias]?G(e[n.alias],n):e[n.alias]=n}),function je(t){return t.forEach(r=>{r.suffix||(r.suffix=function ge(t){return t.replace(D,"|").split("|").map(K).join("")}(r.alias),r.overlapping=!!r.overlapping)}),t}(Object.keys(e).map(n=>e[n]))}((r.disableDefaultBps?[]:te).concat(r.addOrientationBps?q:[]),e)}});let Ft=(()=>{class t{constructor(e){this.findByMap=new Map,this.items=[...e].sort(mt)}findByAlias(e){return e?this.findWithPredicate(e,n=>n.alias===e):null}findByQuery(e){return this.findWithPredicate(e,n=>n.mediaQuery===e)}get overlappings(){return this.items.filter(e=>e.overlapping)}get aliases(){return this.items.map(e=>e.alias)}get suffixes(){return this.items.map(e=>e?.suffix??"")}findWithPredicate(e,n){let a=this.findByMap.get(e);return a||(a=this.items.find(n)??null,this.findByMap.set(e,a)),a??null}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ot))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const kt="print",qt={alias:kt,mediaQuery:kt,priority:1e3};let tn=(()=>{class t{constructor(e,n,a){this.breakpoints=e,this.layoutConfig=n,this._document=a,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new Pe,this.deactivations=[]}withPrintQuery(e){return[...e,kt]}isPrintEvent(e){return e.mediaQuery.startsWith(kt)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(e=>this.breakpoints.findByAlias(e)).filter(e=>null!==e)}getEventBreakpoints({mediaQuery:e}){const n=this.breakpoints.findByQuery(e);return(n?[...this.printBreakPoints,n]:this.printBreakPoints).sort(Ze)}updateEvent(e){let n=this.breakpoints.findByQuery(e.mediaQuery);return this.isPrintEvent(e)&&(n=this.getEventBreakpoints(e)[0],e.mediaQuery=n?.mediaQuery??""),pe(e,n)}registerBeforeAfterPrintHooks(e){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const n=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(e,this.getEventBreakpoints(new T(!0,kt))),e.updateStyles())},a=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(e),e.updateStyles())};this._document.defaultView.addEventListener("beforeprint",n),this._document.defaultView.addEventListener("afterprint",a),this.beforePrintEventListeners.push(n),this.afterPrintEventListeners.push(a)}interceptEvents(e){return n=>{this.isPrintEvent(n)?n.matches&&!this.isPrinting?(this.startPrinting(e,this.getEventBreakpoints(n)),e.updateStyles()):!n.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(e),e.updateStyles()):this.collectActivations(e,n)}}blockPropagation(){return e=>!(this.isPrinting||this.isPrintEvent(e))}startPrinting(e,n){this.isPrinting=!0,this.formerActivations=e.activatedBreakpoints,e.activatedBreakpoints=this.queue.addPrintBreakpoints(n)}stopPrinting(e){e.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(e,n){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!n.matches){const a=this.breakpoints.findByQuery(n.mediaQuery);if(a){const s=this.formerActivations&&this.formerActivations.includes(a),l=!this.formerActivations&&e.activatedBreakpoints.includes(a);(s||l)&&(this.deactivations.push(a),this.deactivations.sort(Ze))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("beforeprint",e)),this.afterPrintEventListeners.forEach(e=>this._document.defaultView.removeEventListener("afterprint",e)))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ft),o.\u0275\u0275inject(N),o.\u0275\u0275inject(x.DOCUMENT))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Pe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(r){return r.push(qt),r.sort(Ze),r.forEach(e=>this.addBreakpoint(e)),this.printBreakpoints}addBreakpoint(r){r&&void 0===this.printBreakpoints.find(n=>n.mediaQuery===r.mediaQuery)&&(this.printBreakpoints=function ei(t){return t?.mediaQuery.startsWith(kt)??!1}(r)?[r,...this.printBreakpoints]:[...this.printBreakpoints,r])}clear(){this.printBreakpoints=[]}}let nn=(()=>{class t{constructor(e,n,a){this.matchMedia=e,this.breakpoints=n,this.hook=a,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new M.x,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(e){this._activatedBreakpoints=[...e]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(e){this._useFallbacks=e}onMediaChange(e){const n=this.findByQuery(e.mediaQuery);if(n){e=pe(e,n);const a=this.activatedBreakpoints.indexOf(n);e.matches&&-1===a?(this._activatedBreakpoints.push(n),this._activatedBreakpoints.sort(Ze),this.updateStyles()):!e.matches&&-1!==a&&(this._activatedBreakpoints.splice(a,1),this._activatedBreakpoints.sort(Ze),this.updateStyles())}}init(e,n,a,s,l=[]){Nt(this.updateMap,e,n,a),Nt(this.clearMap,e,n,s),this.buildElementKeyMap(e,n),this.watchExtraTriggers(e,n,l)}getValue(e,n,a){const s=this.elementMap.get(e);if(s){const l=void 0!==a?s.get(a):this.getActivatedValues(s,n);if(l)return l.get(n)}}hasValue(e,n){const a=this.elementMap.get(e);if(a){const s=this.getActivatedValues(a,n);if(s)return void 0!==s.get(n)||!1}return!1}setValue(e,n,a,s){let l=this.elementMap.get(e);if(l){const f=(l.get(s)??new Map).set(n,a);l.set(s,f),this.elementMap.set(e,l)}else l=(new Map).set(s,(new Map).set(n,a)),this.elementMap.set(e,l);const c=this.getValue(e,n);void 0!==c&&this.updateElement(e,n,c)}trackValue(e,n){return this.subject.asObservable().pipe((0,$.h)(a=>a.element===e&&a.key===n))}updateStyles(){this.elementMap.forEach((e,n)=>{const a=new Set(this.elementKeyMap.get(n));let s=this.getActivatedValues(e);s&&s.forEach((l,c)=>{this.updateElement(n,c,l),a.delete(c)}),a.forEach(l=>{if(s=this.getActivatedValues(e,l),s){const c=s.get(l);this.updateElement(n,l,c)}else this.clearElement(n,l)})})}clearElement(e,n){const a=this.clearMap.get(e);if(a){const s=a.get(n);s&&(s(),this.subject.next({element:e,key:n,value:""}))}}updateElement(e,n,a){const s=this.updateMap.get(e);if(s){const l=s.get(n);l&&(l(a),this.subject.next({element:e,key:n,value:a}))}}releaseElement(e){const n=this.watcherMap.get(e);n&&(n.forEach(s=>s.unsubscribe()),this.watcherMap.delete(e));const a=this.elementMap.get(e);a&&(a.forEach((s,l)=>a.delete(l)),this.elementMap.delete(e))}triggerUpdate(e,n){const a=this.elementMap.get(e);if(a){const s=this.getActivatedValues(a,n);s&&(n?this.updateElement(e,n,s.get(n)):s.forEach((l,c)=>this.updateElement(e,c,l)))}}buildElementKeyMap(e,n){let a=this.elementKeyMap.get(e);a||(a=new Set,this.elementKeyMap.set(e,a)),a.add(n)}watchExtraTriggers(e,n,a){if(a&&a.length){let s=this.watcherMap.get(e);if(s||(s=new Map,this.watcherMap.set(e,s)),!s.get(n)){const c=(0,R.T)(...a).subscribe(()=>{const f=this.getValue(e,n);this.updateElement(e,n,f)});s.set(n,c)}}}findByQuery(e){return this.breakpoints.findByQuery(e)}getActivatedValues(e,n){for(let s=0;s<this.activatedBreakpoints.length;s++){const c=e.get(this.activatedBreakpoints[s].alias);if(c&&(void 0===n||c.has(n)&&null!=c.get(n)))return c}if(!this._useFallbacks)return;const a=e.get("");return void 0===n||a&&a.has(n)?a:void 0}observeActivations(){const e=this.breakpoints.items.map(n=>n.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(e)).pipe((0,ee.b)(this.hook.interceptEvents(this)),(0,$.h)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(nt),o.\u0275\u0275inject(Ft),o.\u0275\u0275inject(tn))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Nt(t,r,e,n){if(void 0!==n){const a=t.get(r)??new Map;a.set(e,n),t.set(r,a)}}let On=(()=>{class t{constructor(e,n,a,s){this.elementRef=e,this.styleBuilder=n,this.styler=a,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new M.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(e){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,this.marshal.activatedAlias)}ngOnChanges(e){Object.keys(e).forEach(n=>{if(-1!==this.inputs.indexOf(n)){const a=n.split(".").slice(1).join(".");this.setValue(e[n].currentValue,a)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(e=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),e)}addStyles(e,n){const a=this.styleBuilder,s=a.shouldCache;let l=this.styleCache.get(e);(!l||!s)&&(l=a.buildStyles(e,n),s&&this.styleCache.set(e,l)),this.mru={...l},this.applyStyleToElement(l),a.sideEffect(e,l,n)}clearStyles(){Object.keys(this.mru).forEach(e=>{this.mru[e]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(e,n=!1){if(e){const[a,s]=this.styler.getFlowDirection(e);if(!s&&n){const l=Q(a);this.styler.applyStyleToElements(l,[e])}return a.trim()}return"row"}hasWrap(e){return this.styler.hasWrap(e)}applyStyleToElement(e,n,a=this.nativeElement){this.styler.applyStyleToElement(a,e,n)}setValue(e,n){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,e,n)}updateWithValue(e){this.currentValue!==e&&(this.addStyles(e),this.currentValue=e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(Le),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(nn))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,features:[o.\u0275\u0275NgOnChangesFeature]}),t})();function Fn(t,r="1",e="1"){let n=[r,e,t],a=t.indexOf("calc");if(a>0){n[2]=ti(t.substring(a).trim());let s=t.substr(0,a).trim().split(" ");2==s.length&&(n[0]=s[0],n[1]=s[1])}else if(0==a)n[2]=ti(t.trim());else{let s=t.split(" ");n=3===s.length?s:[r,e,t]}return n}function ti(t){return t.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}S(8971);var Wi=S(8951);let Lr=(()=>{class t extends On{constructor(e,n,a,s,l,c,f){super(e,null,n,a),this.ngClassInstance=f,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new x.NgClass(s,l,e,c)),this.init(),this.setValue("","")}set klass(e){this.ngClassInstance.klass=e,this.setValue(e,"")}updateWithValue(e){this.ngClassInstance.ngClass=e,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(nn),o.\u0275\u0275directiveInject(o.IterableDiffers),o.\u0275\u0275directiveInject(o.KeyValueDiffers),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(x.NgClass,10))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,inputs:{klass:["class","klass"]},features:[o.\u0275\u0275InheritDefinitionFeature]}),t})();const io=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let dr=(()=>{class t extends Lr{constructor(){super(...arguments),this.inputs=io}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[o.\u0275\u0275InheritDefinitionFeature]}),t})();class Nr{constructor(r,e,n=!0){this.key=r,this.value=e,this.key=n?r.replace(/['"]/g,"").trim():r.trim(),this.value=n?e.replace(/['"]/g,"").trim():e.trim(),this.value=this.value.replace(/;/,"")}}function xo(t){let r=typeof t;return"object"===r?t.constructor===Array?"array":t.constructor===Set?"set":"object":r}function zo(t){const[r,...e]=t.split(":");return new Nr(r,e.join(":"))}function Za(t,r){return r.key&&(t[r.key]=r.value),t}let hl=(()=>{class t extends On{constructor(e,n,a,s,l,c,f,h,g){super(e,null,n,a),this.sanitizer=s,this.ngStyleInstance=f,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new x.NgStyle(e,l,c)),this.init();const I=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(I),this.isServer=h&&(0,x.isPlatformServer)(g)}updateWithValue(e){const n=this.buildStyleMap(e);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...n},this.isServer&&this.applyStyleToElement(n),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(e){const n=a=>this.sanitizer.sanitize(o.SecurityContext.STYLE,a)??"";if(e)switch(xo(e)){case"string":return es(function jn(t,r=";"){return String(t).trim().split(r).map(e=>e.trim()).filter(e=>""!==e)}(e),n);case"array":return es(e,n);default:return function Fs(t,r){let e=[];return"set"===xo(t)?t.forEach(n=>e.push(n)):Object.keys(t).forEach(n=>{e.push(`${n}:${t[n]}`)}),function Ps(t,r){return t.map(zo).filter(n=>!!n).map(n=>(r&&(n.value=r(n.value)),n)).reduce(Za,{})}(e,r)}(e,n)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(nn),o.\u0275\u0275directiveInject(k.H7),o.\u0275\u0275directiveInject(o.KeyValueDiffers),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(x.NgStyle,10),o.\u0275\u0275directiveInject(A),o.\u0275\u0275directiveInject(o.PLATFORM_ID))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,features:[o.\u0275\u0275InheritDefinitionFeature]}),t})();const pl=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let aa=(()=>{class t extends hl{constructor(){super(...arguments),this.inputs=pl}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[o.\u0275\u0275InheritDefinitionFeature]}),t})();function es(t,r){return t.map(zo).filter(n=>!!n).map(n=>(r&&(n.value=r(n.value)),n)).reduce(Za,{})}let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[v]]}),t})();var b=S(2867);let F=(()=>{class t extends Le{buildStyles(e,{display:n}){const a=Q(e);return{...a,display:"none"===n?n:a.display}}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const P=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let ae=(()=>{class t extends On{constructor(e,n,a,s,l){super(e,a,n,s),this._config=l,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(e){const a=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=Te.get(a)??new Map,Te.set(a,this.styleCache),this.currentValue!==e&&(this.addStyles(e,{display:a}),this.currentValue=e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(F),o.\u0275\u0275directiveInject(nn),o.\u0275\u0275directiveInject(N))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,features:[o.\u0275\u0275InheritDefinitionFeature]}),t})(),ue=(()=>{class t extends ae{constructor(){super(...arguments),this.inputs=P}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[o.\u0275\u0275InheritDefinitionFeature]}),t})();const Te=new Map;let zt=(()=>{class t extends Le{constructor(e){super(),this.layoutConfig=e}buildStyles(e,n){let[a,s,...l]=e.split(" "),c=l.join(" ");const f=n.direction.indexOf("column")>-1?"column":"row",h=J(f)?"max-width":"max-height",g=J(f)?"min-width":"min-height",I=String(c).indexOf("calc")>-1,B=I||"auto"===c,V=String(c).indexOf("%")>-1&&!I,ce=String(c).indexOf("px")>-1||String(c).indexOf("rem")>-1||String(c).indexOf("em")>-1||String(c).indexOf("vw")>-1||String(c).indexOf("vh")>-1;let Ie=I||ce;a="0"==a?0:a,s="0"==s?0:s;const he=!a&&!s;let Se={};const Oe={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(c||""){case"":const Be=!1!==this.layoutConfig.useColumnBasisZero;c="row"===f?"0%":Be?"0.000000001px":"auto";break;case"initial":case"nogrow":a=0,c="auto";break;case"grow":c="100%";break;case"noshrink":s=0,c="auto";break;case"auto":break;case"none":a=0,s=0,c="auto";break;default:!Ie&&!V&&!isNaN(c)&&(c+="%"),"0%"===c&&(Ie=!0),"0px"===c&&(c="0%"),Se=G(Oe,I?{"flex-grow":a,"flex-shrink":s,"flex-basis":Ie?c:"100%"}:{flex:`${a} ${s} ${Ie?c:"100%"}`})}return Se.flex||Se["flex-grow"]||(Se=G(Oe,I?{"flex-grow":a,"flex-shrink":s,"flex-basis":c}:{flex:`${a} ${s} ${c}`})),"0%"!==c&&"0px"!==c&&"0.000000001px"!==c&&"auto"!==c&&(Se[g]=he||Ie&&a?c:null,Se[h]=he||!B&&s?c:null),Se[g]||Se[h]?n.hasWrap&&(Se[I?"flex-basis":"flex"]=Se[h]?I?Se[h]:`${a} ${s} ${Se[h]}`:I?Se[g]:`${a} ${s} ${Se[g]}`):Se=G(Oe,I?{"flex-grow":a,"flex-shrink":s,"flex-basis":c}:{flex:`${a} ${s} ${c}`}),G(Se,{"box-sizing":"border-box"})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(N))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const It=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let Bt=(()=>{class t extends On{constructor(e,n,a,s,l){super(e,s,n,l),this.layoutConfig=a,this.marshal=l,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(e){this.flexShrink=e||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(e){this.flexGrow=e||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe((0,Wi.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe((0,Wi.R)(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(e){const a=e.value.split(" ");this.direction=a[0],this.wrap=void 0!==a[1]&&"wrap"===a[1],this.triggerUpdate()}updateWithValue(e){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const a=this.direction,s=a.startsWith("row"),l=this.wrap;s&&l?this.styleCache=ci:s&&!l?this.styleCache=Yn:!s&&l?this.styleCache=nr:!s&&!l&&(this.styleCache=pi);const f=Fn(String(e).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(f.join(" "),{direction:a,hasWrap:l})}triggerReflow(){const e=this.activatedValue;if(void 0!==e){const n=Fn(e+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,n.join(" "))}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(N),o.\u0275\u0275directiveInject(zt),o.\u0275\u0275directiveInject(nn))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[o.\u0275\u0275InheritDefinitionFeature]}),t})(),Xt=(()=>{class t extends Bt{constructor(){super(...arguments),this.inputs=It}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[o.\u0275\u0275InheritDefinitionFeature]}),t})();const Yn=new Map,pi=new Map,ci=new Map,nr=new Map,Ea={margin:0,width:"100%",height:"100%","min-width":"100%","min-height":"100%"};let Uo=(()=>{class t extends Le{buildStyles(e){return Ea}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bn=(()=>{class t extends On{constructor(e,n,a,s){super(e,a,n,s),this.styleCache=oo,this.addStyles("")}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(Uo),o.\u0275\u0275directiveInject(nn))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","fxFill",""],["","fxFlexFill",""]],features:[o.\u0275\u0275InheritDefinitionFeature]}),t})();const oo=new Map;let sf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[v,b.vT]]}),t})(),dm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[v]]}),t})(),wl=(()=>{class t{constructor(e,n){(0,x.isPlatformServer)(n)&&!e&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(e,n=[]){return{ngModule:t,providers:e.serverLoaded?[{provide:N,useValue:{...E,...e}},{provide:ne,useValue:n,multi:!0},{provide:A,useValue:!0}]:[{provide:N,useValue:{...E,...e}},{provide:ne,useValue:n,multi:!0}]}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(A),o.\u0275\u0275inject(o.PLATFORM_ID))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[sf,C,dm],sf,C,dm]}),t})();function sy(t,r){1&t&&o.\u0275\u0275element(0,"div",9)}function Tu(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"span",10),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.description)}}function ly(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"section",11),o.\u0275\u0275element(1,"ngx-json-viewer",12),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("json",e.value)("expanded",n.expanded)("depth",n.depth)("_currentDepth",n._currentDepth)}}const cy=function(t){return["segment",t]},uy=function(t,r){return{"segment-main":!0,expandable:t,expanded:r}};function dy(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"section",2),o.\u0275\u0275elementStart(1,"section",3),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext().toggle(s)}),o.\u0275\u0275template(2,sy,1,0,"div",4),o.\u0275\u0275elementStart(3,"span",5),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"span",6),o.\u0275\u0275text(6,": "),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(7,Tu,2,1,"span",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(8,ly,2,4,"section",8),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(6,cy,"segment-type-"+e.type)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction2(8,uy,n.isExpandable(e),e.expanded)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isExpandable(e)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.key),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",!e.expanded||!n.isExpandable(e)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.expanded&&n.isExpandable(e))}}let fy=(()=>{class t{constructor(){this.expanded=!0,this.depth=-1,this._currentDepth=-1,this.segments=[]}ngOnChanges(){this.segments=[],this.json=this.decycle(this.json),this._currentDepth++,"object"==typeof this.json?Object.keys(this.json).forEach(e=>{this.segments.push(this.parseKeyValue(e,this.json[e]))}):this.segments.push(this.parseKeyValue(`(${typeof this.json})`,this.json))}isExpandable(e){return"object"===e.type||"array"===e.type}toggle(e){this.isExpandable(e)&&(e.expanded=!e.expanded)}parseKeyValue(e,n){const a={key:e,value:n,type:void 0,description:""+n,expanded:this.isExpanded()};switch(typeof a.value){case"number":a.type="number";break;case"boolean":a.type="boolean";break;case"function":a.type="function";break;case"string":a.type="string",a.description='"'+a.value+'"';break;case"undefined":a.type="undefined",a.description="undefined";break;case"object":null===a.value?(a.type="null",a.description="null"):Array.isArray(a.value)?(a.type="array",a.description="Array["+a.value.length+"] "+JSON.stringify(a.value)):a.value instanceof Date?a.type="date":(a.type="object",a.description="Object "+JSON.stringify(a.value))}return a}isExpanded(){return this.expanded&&!(this.depth>-1&&this._currentDepth>=this.depth)}decycle(e){const n=new WeakMap;return function a(s,l){let c,f;return"object"!=typeof s||null===s||s instanceof Boolean||s instanceof Date||s instanceof Number||s instanceof RegExp||s instanceof String?s:(c=n.get(s),void 0!==c?{$ref:c}:(n.set(s,l),Array.isArray(s)?(f=[],s.forEach(function(h,g){f[g]=a(h,l+"["+g+"]")})):(f={},Object.keys(s).forEach(function(h){f[h]=a(s[h],l+"["+JSON.stringify(h)+"]")})),f))}(e,"$")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-json-viewer"]],inputs:{expanded:"expanded",depth:"depth",_currentDepth:"_currentDepth",json:"json"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:1,consts:[[1,"ngx-json-viewer"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click"],["class","toggler",4,"ngIf"],[1,"segment-key"],[1,"segment-separator"],["class","segment-value",4,"ngIf"],["class","children",4,"ngIf"],[1,"toggler"],[1,"segment-value"],[1,"children"],[3,"json","expanded","depth","_currentDepth"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"section",0),o.\u0275\u0275template(1,dy,9,11,"section",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.segments))},directives:[x.NgForOf,x.NgClass,x.NgIf,t],styles:['@charset "UTF-8";.ngx-json-viewer[_ngcontent-%COMP%]{font-family:monospace;font-size:1em;height:100%;overflow:hidden;position:relative;width:100%}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{margin:1px 1px 1px 12px;padding:2px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]{word-wrap:break-word}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{color:#787878;font-size:.8em;line-height:1.2em;margin-left:-14px;margin-top:3px;position:absolute;vertical-align:middle}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]:after{content:"\u25ba";display:inline-block;transition:transform .1s ease-in}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-key[_ngcontent-%COMP%]{color:#4e187c}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-separator[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-value[_ngcontent-%COMP%]{color:#000}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-string[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#ff6b6b}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-number[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#009688}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-boolean[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#b938a4}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-date[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#05668d}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-function[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#fff}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:red}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-key[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%]{white-space:nowrap}.ngx-json-viewer[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]{cursor:pointer}']}),t})(),Au=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule]]}),t})();function fm(t,r,e,n,a,s,l){try{var c=t[s](l),f=c.value}catch(h){return void e(h)}c.done?r(f):Promise.resolve(f).then(n,a)}function ku(t){return function(){var r=this,e=arguments;return new Promise(function(n,a){var s=t.apply(r,e);function l(f){fm(s,n,a,l,c,"next",f)}function c(f){fm(s,n,a,l,c,"throw",f)}l(void 0)})}}var Pa,Et=S(9263),ye=S(635),xi=new Uint8Array(16);function Oi(){if(!Pa&&!(Pa="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pa(xi)}const os=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Vr=function Sr(t){return"string"==typeof t&&os.test(t)};for(var Ci=[],as=0;as<256;++as)Ci.push((as+256).toString(16).substr(1));const ai=function hm(t,r,e){var n=(t=t||{}).random||(t.rng||Oi)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r){e=e||0;for(var a=0;a<16;++a)r[e+a]=n[a];return r}return function Gr(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Ci[t[r+0]]+Ci[t[r+1]]+Ci[t[r+2]]+Ci[t[r+3]]+"-"+Ci[t[r+4]]+Ci[t[r+5]]+"-"+Ci[t[r+6]]+Ci[t[r+7]]+"-"+Ci[t[r+8]]+Ci[t[r+9]]+"-"+Ci[t[r+10]]+Ci[t[r+11]]+Ci[t[r+12]]+Ci[t[r+13]]+Ci[t[r+14]]+Ci[t[r+15]]).toLowerCase();if(!Vr(e))throw TypeError("Stringified UUID is invalid");return e}(n)};var zn=S(2817),ui=S(6234),xf=S(7580),Qi=S(3158),ao=S(9196),hn=S(9295),Fa=S(9525),Vo=S(538),Ra=S(3853),Go=S(5474),Re=S(745),Sl=S(4987);const{isArray:pm}=Array;var ss=S(3945);function gm(...t){return 1===(t=function mm(t){return 1===t.length&&pm(t[0])?t[0]:t}(t)).length?(0,Sl.Xf)(t[0]):new y.y(function Da(t){return r=>{let e=[];for(let n=0;e&&!r.closed&&n<t.length;n++)e.push((0,Sl.Xf)(t[n]).subscribe((0,ss.x)(r,a=>{if(e){for(let s=0;s<e.length;s++)s!==n&&e[s].unsubscribe();e=null}r.next(a)})))}}(t))}var Ls=S(6936),sn=(()=>{return(t=sn||(sn={}))[t.EntitiesOnly=0]="EntitiesOnly",t[t.Both=1]="Both",t[t.None=2]="None",sn;var t})();function vi(t){return function(e,n){const a={ids:[...n.ids],entities:{...n.entities}},s=t(e,a);return s===sn.Both?Object.assign({},n,a):s===sn.EntitiesOnly?{...n,entities:a.entities}:n}}function Er(t,r){const e=r(t);return(0,o.isDevMode)()&&void 0===e&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",r.toString()),e}function Cf(t){function r(he,Se){const Oe=Er(he,t);return Oe in Se.entities?sn.None:(Se.ids.push(Oe),Se.entities[Oe]=he,sn.Both)}function e(he,Se){let Oe=!1;for(const Be of he)Oe=r(Be,Se)!==sn.None||Oe;return Oe?sn.Both:sn.None}function a(he,Se){const Oe=Er(he,t);return Oe in Se.entities?(Se.entities[Oe]=he,sn.EntitiesOnly):(Se.ids.push(Oe),Se.entities[Oe]=he,sn.Both)}function c(he,Se){const Be=(he instanceof Array?he:Se.ids.filter(et=>he(Se.entities[et]))).filter(et=>et in Se.entities).map(et=>delete Se.entities[et]).length>0;return Be&&(Se.ids=Se.ids.filter(et=>et in Se.entities)),Be?sn.Both:sn.None}function g(he,Se){return I([he],Se)}function I(he,Se){const Oe={};return(he=he.filter(et=>et.id in Se.entities)).length>0?he.filter(at=>function h(he,Se,Oe){const et=Object.assign({},Oe.entities[Se.id],Se.changes),at=Er(et,t),ft=at!==Se.id;return ft&&(he[Se.id]=at,delete Oe.entities[Se.id]),Oe.entities[at]=et,ft}(Oe,at,Se)).length>0?(Se.ids=Se.ids.map(at=>Oe[at]||at),sn.Both):sn.EntitiesOnly:sn.None}function Ie(he,Se){const Oe=[],Be=[];for(const ft of he){const Pt=Er(ft,t);Pt in Se.entities?Be.push({id:Pt,changes:ft}):Oe.push(ft)}const et=I(Be,Se),at=e(Oe,Se);switch(!0){case at===sn.None&&et===sn.None:return sn.None;case at===sn.Both||et===sn.Both:return sn.Both;default:return sn.EntitiesOnly}}return{removeAll:function f(he){return Object.assign({},he,{ids:[],entities:{}})},addOne:vi(r),addMany:vi(e),setAll:vi(function n(he,Se){return Se.ids=[],Se.entities={},e(he,Se),sn.Both}),setOne:vi(a),setMany:vi(function s(he,Se){const Oe=he.map(Be=>a(Be,Se));switch(!0){case Oe.some(Be=>Be===sn.Both):return sn.Both;case Oe.some(Be=>Be===sn.EntitiesOnly):return sn.EntitiesOnly;default:return sn.None}}),updateOne:vi(g),updateMany:vi(I),upsertOne:vi(function ce(he,Se){return Ie([he],Se)}),upsertMany:vi(Ie),removeOne:vi(function l(he,Se){return c([he],Se)}),removeMany:vi(c),map:vi(function B(he,Se){return I(Se.ids.reduce((et,at)=>{const ft=he(Se.entities[at]);return ft!==Se.entities[at]&&et.push({id:at,changes:ft}),et},[]).filter(({id:et})=>et in Se.entities),Se)}),mapOne:vi(function V({map:he,id:Se},Oe){const Be=Oe.entities[Se];return Be?g({id:Se,changes:he(Be)},Oe):sn.None})}}function ym(t,r){const{removeOne:e,removeMany:n,removeAll:a}=Cf(t);function s(Oe,Be){return l([Oe],Be)}function l(Oe,Be){const et=Oe.filter(at=>!(Er(at,t)in Be.entities));return 0===et.length?sn.None:(Se(et,Be),sn.Both)}function f(Oe,Be){const et=Er(Oe,t);return et in Be.entities?(Be.ids=Be.ids.filter(at=>at!==et),Se([Oe],Be),sn.Both):s(Oe,Be)}function g(Oe,Be){return B([Oe],Be)}function B(Oe,Be){const et=[],at=Oe.filter(ft=>function I(Oe,Be,et){if(!(Be.id in et.entities))return!1;const ft=Object.assign({},et.entities[Be.id],Be.changes),Pt=Er(ft,t);return delete et.entities[Be.id],Oe.push(ft),Pt!==Be.id}(et,ft,Be)).length>0;if(0===et.length)return sn.None;{const ft=Be.ids,Pt=[];return Be.ids=Be.ids.filter((Rt,on)=>Rt in Be.entities||(Pt.push(on),!1)),Se(et,Be),!at&&Pt.every(Rt=>Be.ids[Rt]===ft[Rt])?sn.EntitiesOnly:sn.Both}}function he(Oe,Be){const et=[],at=[];for(const Rt of Oe){const on=Er(Rt,t);on in Be.entities?at.push({id:on,changes:Rt}):et.push(Rt)}const ft=B(at,Be),Pt=l(et,Be);switch(!0){case Pt===sn.None&&ft===sn.None:return sn.None;case Pt===sn.Both||ft===sn.Both:return sn.Both;default:return sn.EntitiesOnly}}function Se(Oe,Be){Oe.sort(r);const et=[];let at=0,ft=0;for(;at<Oe.length&&ft<Be.ids.length;){const Pt=Oe[at],Rt=Er(Pt,t),on=Be.ids[ft];r(Pt,Be.entities[on])<=0?(et.push(Rt),at++):(et.push(on),ft++)}Be.ids=et.concat(at<Oe.length?Oe.slice(at).map(t):Be.ids.slice(ft)),Oe.forEach((Pt,Rt)=>{Be.entities[t(Pt)]=Pt})}return{removeOne:e,removeMany:n,removeAll:a,addOne:vi(s),updateOne:vi(g),upsertOne:vi(function Ie(Oe,Be){return he([Oe],Be)}),setAll:vi(function c(Oe,Be){return Be.entities={},Be.ids=[],l(Oe,Be),sn.Both}),setOne:vi(f),setMany:vi(function h(Oe,Be){const et=Oe.map(at=>f(at,Be));switch(!0){case et.some(at=>at===sn.Both):return sn.Both;case et.some(at=>at===sn.EntitiesOnly):return sn.EntitiesOnly;default:return sn.None}}),addMany:vi(l),updateMany:vi(B),upsertMany:vi(he),map:vi(function V(Oe,Be){return B(Be.ids.reduce((at,ft)=>{const Pt=Oe(Be.entities[ft]);return Pt!==Be.entities[ft]&&at.push({id:ft,changes:Pt}),at},[]),Be)}),mapOne:vi(function ce({map:Oe,id:Be},et){const at=et.entities[Be];return at?g({id:Be,changes:Oe(at)},et):sn.None})}}var Pu=S(23),$o=S(591),Fu=S(2971);class $r{constructor(r,e,n){this.kind=r,this.value=e,this.error=n,this.hasValue="N"===r}observe(r){return Cc(this,r)}do(r,e,n){const{kind:a,value:s,error:l}=this;return"N"===a?null==r?void 0:r(s):"E"===a?null==e?void 0:e(l):null==n?void 0:n()}accept(r,e,n){var a;return(0,Fu.m)(null===(a=r)||void 0===a?void 0:a.next)?this.observe(r):this.do(r,e,n)}toObservable(){const{kind:r,value:e,error:n}=this,a="N"===r?(0,Re.of)(e):"E"===r?(0,Go._)(()=>n):"C"===r?$o.E:0;if(!a)throw new TypeError(`Unexpected notification kind ${r}`);return a}static createNext(r){return new $r("N",r)}static createError(r){return new $r("E",void 0,r)}static createComplete(){return $r.completeNotification}}function Cc(t,r){var e,n,a;const{kind:s,value:l,error:c}=t;if("string"!=typeof s)throw new TypeError('Invalid notification, missing "kind"');"N"===s?null===(e=r.next)||void 0===e||e.call(r,l):"E"===s?null===(n=r.error)||void 0===n||n.call(r,c):null===(a=r.complete)||void 0===a||a.call(r)}$r.completeNotification=new $r("C");var ls=S(1944);function Ef(t,r,e,n){return(0,ls.e)((a,s)=>{let l;r&&"function"!=typeof r?({duration:e,element:l,connector:n}=r):l=r;const c=new Map,f=ce=>{c.forEach(ce),ce(s)},h=ce=>f(Ie=>Ie.error(ce));let g=0,I=!1;const B=new ss.Q(s,ce=>{try{const Ie=t(ce);let he=c.get(Ie);if(!he){c.set(Ie,he=n?n():new M.x);const Se=function V(ce,Ie){const he=new y.y(Se=>{g++;const Oe=Ie.subscribe(Se);return()=>{Oe.unsubscribe(),0==--g&&I&&B.unsubscribe()}});return he.key=ce,he}(Ie,he);if(s.next(Se),e){const Oe=(0,ss.x)(he,()=>{he.complete(),null==Oe||Oe.unsubscribe()},void 0,void 0,()=>c.delete(Ie));B.add((0,Sl.Xf)(e(Se)).subscribe(Oe))}}he.next(l?l(ce):ce)}catch(Ie){h(Ie)}},()=>f(ce=>ce.complete()),h,()=>c.clear(),()=>(I=!0,0===g));a.subscribe(B)})}function Ns(t,r){return r?e=>e.pipe(Ns((n,a)=>(0,Sl.Xf)(t(n,a)).pipe((0,ye.U)((s,l)=>r(n,s,a,l))))):(0,ls.e)((e,n)=>{let a=0,s=null,l=!1;e.subscribe((0,ss.x)(n,c=>{s||(s=(0,ss.x)(n,void 0,()=>{s=null,l&&n.complete()}),(0,Sl.Xf)(t(c,a++)).subscribe(s))},()=>{l=!0,!s&&n.complete()}))})}const Oa={dispatch:!0,useEffectsErrorHandler:!0},El="__@ngrx/effects_create__";function Br(t,r){const e=t(),n={...Oa,...r};return Object.defineProperty(e,El,{value:n}),e}function cs(t){return Object.getOwnPropertyNames(t).filter(n=>!(!t[n]||!t[n].hasOwnProperty(El))&&t[n][El].hasOwnProperty("dispatch")).map(n=>({propertyName:n,...t[n][El]}))}function ca(t){return Object.getPrototypeOf(t)}const wc="__@ngrx/effects__";function _m(t){return(0,Et.qC)(Du,ca)(t)}function Du(t){return function Tl(t){return t.constructor.hasOwnProperty(wc)}(t)?t.constructor[wc]:[]}function bm(t,r,e){const n=ca(t).constructor.name,a=function Af(t){return[_m,cs].reduce((e,n)=>e.concat(n(t)),[])}(t).map(({propertyName:s,dispatch:l,useEffectsErrorHandler:c})=>{const f="function"==typeof t[s]?t[s]():t[s],h=c?e(f,r):f;return!1===l?h.pipe((0,Pu.l)()):h.pipe(function Sf(){return(0,ls.e)((t,r)=>{t.subscribe((0,ss.x)(r,e=>{r.next($r.createNext(e))},()=>{r.next($r.createComplete()),r.complete()},e=>{r.next($r.createError(e)),r.complete()}))})}()).pipe((0,ye.U)(I=>({effect:t[s],notification:I,propertyName:s,sourceName:n,sourceInstance:t})))});return(0,R.T)(...a)}function Ou(t,r,e=10){return t.pipe((0,Qi.K)(n=>(r&&r.handleError(n),e<=1?t:Ou(t,r,e-1))))}let Ho=(()=>{class t extends y.y{constructor(e){super(),e&&(this.source=e)}lift(e){const n=new t;return n.source=this,n.operator=e,n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Et.Y$))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();function so(...t){return(0,$.h)(r=>t.some(e=>"string"==typeof e?e===r.type:e.type===r.type))}function If(t){return us(t,"ngrxOnInitEffects")}function us(t,r){return t&&r in t&&"function"==typeof t[r]}const Pf=new o.InjectionToken("@ngrx/effects Internal Root Guard"),kl=new o.InjectionToken("@ngrx/effects User Provided Effects"),bi=new o.InjectionToken("@ngrx/effects Internal Root Effects"),Ac=new o.InjectionToken("@ngrx/effects Root Effects"),Lu=new o.InjectionToken("@ngrx/effects Internal Feature Effects"),kc=new o.InjectionToken("@ngrx/effects Feature Effects"),lo=new o.InjectionToken("@ngrx/effects Effects Error Handler");let qo=(()=>{class t extends M.x{constructor(e,n){super(),this.errorHandler=e,this.effectsErrorHandler=n}addEffects(e){this.next(e)}toActions(){return this.pipe(Ef(ca),(0,Fa.z)(e=>e.pipe(Ef(Ji))),(0,Fa.z)(e=>{const n=e.pipe(Ns(s=>function Tr(t,r){return e=>{const n=bm(e,t,r);return function Tc(t){return us(t,"ngrxOnRunEffects")}(e)?e.ngrxOnRunEffects(n):n}}(this.errorHandler,this.effectsErrorHandler)(s)),(0,ye.U)(s=>(function Mu(t,r){if("N"===t.notification.kind){const e=t.notification.value;!function wm(t){return"function"!=typeof t&&t&&t.type&&"string"==typeof t.type}(e)&&r.handleError(new Error(`Effect ${function Al({propertyName:t,sourceInstance:r,sourceName:e}){const n="function"==typeof r[t];return`"${e}.${String(t)}${n?"()":""}"`}(t)} dispatched an invalid action: ${function kf(t){try{return JSON.stringify(t)}catch{return t}}(e)}`))}}(s,this.errorHandler),s.notification)),(0,$.h)(s=>"N"===s.kind&&null!=s.value),function Eo(){return(0,ls.e)((t,r)=>{t.subscribe((0,ss.x)(r,e=>Cc(e,r)))})}()),a=e.pipe((0,hn.q)(1),(0,$.h)(If),(0,ye.U)(s=>s.ngrxOnInitEffects()));return(0,R.T)(n,a)}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(o.ErrorHandler),o.\u0275\u0275inject(lo))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();function Ji(t){return function ua(t){return us(t,"ngrxOnIdentifyEffects")}(t)?t.ngrxOnIdentifyEffects():""}let rr=(()=>{class t{constructor(e,n){this.effectSources=e,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(qo),o.\u0275\u0275inject(Et.yh))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Ic="@ngrx/effects/init";(0,Et.PH)(Ic);let Nu=(()=>{class t{constructor(e,n,a,s,l,c,f){this.sources=e,n.start(),s.forEach(h=>e.addEffects(h)),a.dispatch({type:Ic})}addEffects(e){this.sources.addEffects(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(qo),o.\u0275\u0275inject(rr),o.\u0275\u0275inject(Et.yh),o.\u0275\u0275inject(Ac),o.\u0275\u0275inject(Et.cr,8),o.\u0275\u0275inject(Et.CK,8),o.\u0275\u0275inject(Pf,8))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({}),t})(),Ff=(()=>{class t{constructor(e,n,a,s){n.forEach(l=>l.forEach(c=>e.addEffects(c)))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Nu),o.\u0275\u0275inject(kc),o.\u0275\u0275inject(Et.cr,8),o.\u0275\u0275inject(Et.CK,8))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({}),t})(),Xo=(()=>{class t{static forFeature(e=[]){return{ngModule:Ff,providers:[e,{provide:Lu,multi:!0,useValue:e},{provide:kl,multi:!0,useValue:[]},{provide:kc,multi:!0,useFactory:js,deps:[o.Injector,Lu,kl]}]}}static forRoot(e=[]){return{ngModule:Nu,providers:[{provide:lo,useValue:Ou},rr,qo,Ho,e,{provide:bi,useValue:[e]},{provide:Pf,useFactory:Bu,deps:[[rr,new o.Optional,new o.SkipSelf],[bi,new o.Self]]},{provide:kl,multi:!0,useValue:[]},{provide:Ac,useFactory:js,deps:[o.Injector,bi,kl]}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({}),t})();function js(t,r,e){const n=[];for(const a of r)n.push(...a);for(const a of e)n.push(...a);return function zs(t,r){return r.map(e=>t.get(e))}(t,n)}function Bu(t,r){if((1!==r.length||0!==r[0].length)&&t)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}let Ma=(()=>{class t{create(e,n,a,s){const l="string"==typeof e?{...s||{},entityName:e,entityOp:n,data:a}:e;return this.createCore(l)}createCore(e){const{entityName:n,entityOp:a,tag:s}=e;if(!n)throw new Error("Missing entity name for new action");if(null==a)throw new Error("Missing EntityOp for new action");return{type:this.formatActionType(a,s||n),payload:e}}createFromAction(e,n){return this.create({...e.payload,...n})}formatActionType(e,n){return`[${n}] ${e}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class Df{constructor(r,e){this.entityName=r,this.selectId=e}mustBeEntity(r){const e=this.extractData(r);if(!e)return this.throwError(r,"should have a single entity.");const n=this.selectId(e);return this.isNotKeyType(n)&&this.throwError(r,"has a missing or invalid entity key (id)"),e}mustBeEntities(r){const e=this.extractData(r);return Array.isArray(e)?(e.forEach((n,a)=>{const s=this.selectId(n);this.isNotKeyType(s)&&this.throwError(r,`, item ${a+1}, does not have a valid entity key (id)`)}),e):this.throwError(r,"should be an array of entities")}mustBeKey(r){const e=this.extractData(r);if(!e)throw new Error("should be a single entity key");if(this.isNotKeyType(e))throw new Error("is not a valid key (id)");return e}mustBeKeys(r){const e=this.extractData(r);return Array.isArray(e)?(e.forEach((n,a)=>{this.isNotKeyType(n)&&this.throwError(r,`${this.entityName} ', item ${a+1}, is not a valid entity key (id)`)}),e):this.throwError(r,"should be an array of entity keys (id)")}mustBeUpdate(r){const e=this.extractData(r);if(!e)return this.throwError(r,"should be a single entity update");const{id:n,changes:a}=e,s=this.selectId(a);return(this.isNotKeyType(n)||this.isNotKeyType(s))&&this.throwError(r,"has a missing or invalid entity key (id)"),e}mustBeUpdates(r){const e=this.extractData(r);return Array.isArray(e)?(e.forEach((n,a)=>{const{id:s,changes:l}=n,c=this.selectId(l);(this.isNotKeyType(s)||this.isNotKeyType(c))&&this.throwError(r,`, item ${a+1}, has a missing or invalid entity key (id)`)}),e):this.throwError(r,"should be an array of entity updates")}mustBeUpdateResponse(r){const e=this.extractData(r);if(!e)return this.throwError(r,"should be a single entity update");const{id:n,changes:a}=e,s=this.selectId(a);return(this.isNotKeyType(n)||this.isNotKeyType(s))&&this.throwError(r,"has a missing or invalid entity key (id)"),e}mustBeUpdateResponses(r){const e=this.extractData(r);return Array.isArray(e)?(e.forEach((n,a)=>{const{id:s,changes:l}=n,c=this.selectId(l);(this.isNotKeyType(s)||this.isNotKeyType(c))&&this.throwError(r,`, item ${a+1}, has a missing or invalid entity key (id)`)}),e):this.throwError(r,"should be an array of entity updates")}extractData(r){return r.payload&&r.payload.data}isNotKeyType(r){return"string"!=typeof r&&"number"!=typeof r}throwError(r,e){throw new Error(`${this.entityName} EntityAction guard for "${r.type}": payload ${e}`)}}function Us(t){return null==t?void 0:t.id}function ju(t){if(null==t)return[];if(Array.isArray(t[0])){const[r,...e]=t;t=[...r,...e]}return t}function Of(t){return t=t||Us,function(e){const n=t(e);if(null==n)throw new Error("Primary key may not be null/undefined.");return e&&{id:n,changes:e}}}function Vs(...t){const r=ju(t);switch(r.length){case 0:return(0,$.h)(n=>n.payload&&null!=n.payload.entityOp);case 1:const e=r[0];return(0,$.h)(n=>n.payload&&e===n.payload.entityOp);default:return(0,$.h)(n=>{const a=n.payload&&n.payload.entityOp;return a&&r.some(s=>s===a)})}}function Pc(...t){const r=ju(t);switch(r.length){case 0:return(0,$.h)(n=>n.payload&&null!=n.payload.entityName);case 1:const e=r[0];return(0,$.h)(n=>n.payload&&e===n.payload.entityName);default:return(0,$.h)(n=>{const a=n.payload&&n.payload.entityName;return!!a&&r.some(s=>s===a)})}}var hr=(()=>{return(t=hr||(hr={})).Add="Add",t.Delete="Delete",t.Update="Update",t.Upsert="Upsert",hr;var t})();function Mf(t){const r=(t=t&&t.changes?t:{changes:[]}).changes.filter(e=>null!=e&&e.entities&&e.entities.length>0);return{...t,changes:r}}new class Em{add(r,e){return e=Array.isArray(e)?e:e?[e]:[],{entityName:r,op:hr.Add,entities:e}}delete(r,e){const n=Array.isArray(e)?e:e?[e]:[];return{entityName:r,op:hr.Delete,entities:n}}update(r,e){return e=Array.isArray(e)?e:e?[e]:[],{entityName:r,op:hr.Update,entities:e}}upsert(r,e){return e=Array.isArray(e)?e:e?[e]:[],{entityName:r,op:hr.Upsert,entities:e}}};var yi=(()=>{return(t=yi||(yi={}))[t.IgnoreChanges=0]="IgnoreChanges",t[t.PreserveChanges=1]="PreserveChanges",t[t.OverwriteChanges=2]="OverwriteChanges",yi;var t})(),si=(()=>{return(t=si||(si={})).CLEAR_COLLECTIONS="@ngrx/data/entity-cache/clear-collections",t.LOAD_COLLECTIONS="@ngrx/data/entity-cache/load-collections",t.MERGE_QUERY_SET="@ngrx/data/entity-cache/merge-query-set",t.SET_ENTITY_CACHE="@ngrx/data/entity-cache/set-cache",t.SAVE_ENTITIES="@ngrx/data/entity-cache/save-entities",t.SAVE_ENTITIES_CANCEL="@ngrx/data/entity-cache/save-entities-cancel",t.SAVE_ENTITIES_CANCELED="@ngrx/data/entity-cache/save-entities-canceled",t.SAVE_ENTITIES_ERROR="@ngrx/data/entity-cache/save-entities-error",t.SAVE_ENTITIES_SUCCESS="@ngrx/data/entity-cache/save-entities-success",si;var t})();class Lf{constructor(r,e){this.type=si.CLEAR_COLLECTIONS,this.payload={collections:r,tag:e}}}class Am{constructor(r,e){this.type=si.LOAD_COLLECTIONS,this.payload={collections:r,tag:e}}}class zu{constructor(r,e,n){this.type=si.MERGE_QUERY_SET,this.payload={querySet:r,mergeStrategy:null===e?yi.PreserveChanges:e,tag:n}}}class py{constructor(r,e){this.cache=r,this.type=si.SET_ENTITY_CACHE,this.payload={cache:r,tag:e}}}class my{constructor(r,e,n){this.type=si.SAVE_ENTITIES,n=n||{},r&&(r.tag=r.tag||n.tag),this.payload={changeSet:r,url:e,...n,tag:r.tag}}}class gy{constructor(r,e,n,a){this.type=si.SAVE_ENTITIES_CANCEL,this.payload={correlationId:r,reason:e,entityNames:n,tag:a}}}class La{constructor(r,e,n){this.type=si.SAVE_ENTITIES_CANCELED,this.payload={correlationId:r,reason:e,tag:n}}}class ds{constructor(r,e){this.type=si.SAVE_ENTITIES_ERROR,this.payload={error:r,originalAction:e,correlationId:e.payload.correlationId}}}class Na{constructor(r,e,n){this.type=si.SAVE_ENTITIES_SUCCESS,n=n||{},r&&(r.tag=r.tag||n.tag),this.payload={changeSet:r,url:e,...n,tag:r.tag}}}var Tt=(()=>{return(t=Tt||(Tt={})).CANCEL_PERSIST="@ngrx/data/cancel-persist",t.CANCELED_PERSIST="@ngrx/data/canceled-persist",t.QUERY_ALL="@ngrx/data/query-all",t.QUERY_ALL_SUCCESS="@ngrx/data/query-all/success",t.QUERY_ALL_ERROR="@ngrx/data/query-all/error",t.QUERY_LOAD="@ngrx/data/query-load",t.QUERY_LOAD_SUCCESS="@ngrx/data/query-load/success",t.QUERY_LOAD_ERROR="@ngrx/data/query-load/error",t.QUERY_MANY="@ngrx/data/query-many",t.QUERY_MANY_SUCCESS="@ngrx/data/query-many/success",t.QUERY_MANY_ERROR="@ngrx/data/query-many/error",t.QUERY_BY_KEY="@ngrx/data/query-by-key",t.QUERY_BY_KEY_SUCCESS="@ngrx/data/query-by-key/success",t.QUERY_BY_KEY_ERROR="@ngrx/data/query-by-key/error",t.SAVE_ADD_MANY="@ngrx/data/save/add-many",t.SAVE_ADD_MANY_ERROR="@ngrx/data/save/add-many/error",t.SAVE_ADD_MANY_SUCCESS="@ngrx/data/save/add-many/success",t.SAVE_ADD_ONE="@ngrx/data/save/add-one",t.SAVE_ADD_ONE_ERROR="@ngrx/data/save/add-one/error",t.SAVE_ADD_ONE_SUCCESS="@ngrx/data/save/add-one/success",t.SAVE_DELETE_MANY="@ngrx/data/save/delete-many",t.SAVE_DELETE_MANY_SUCCESS="@ngrx/data/save/delete-many/success",t.SAVE_DELETE_MANY_ERROR="@ngrx/data/save/delete-many/error",t.SAVE_DELETE_ONE="@ngrx/data/save/delete-one",t.SAVE_DELETE_ONE_SUCCESS="@ngrx/data/save/delete-one/success",t.SAVE_DELETE_ONE_ERROR="@ngrx/data/save/delete-one/error",t.SAVE_UPDATE_MANY="@ngrx/data/save/update-many",t.SAVE_UPDATE_MANY_SUCCESS="@ngrx/data/save/update-many/success",t.SAVE_UPDATE_MANY_ERROR="@ngrx/data/save/update-many/error",t.SAVE_UPDATE_ONE="@ngrx/data/save/update-one",t.SAVE_UPDATE_ONE_SUCCESS="@ngrx/data/save/update-one/success",t.SAVE_UPDATE_ONE_ERROR="@ngrx/data/save/update-one/error",t.SAVE_UPSERT_MANY="@ngrx/data/save/upsert-many",t.SAVE_UPSERT_MANY_SUCCESS="@ngrx/data/save/upsert-many/success",t.SAVE_UPSERT_MANY_ERROR="@ngrx/data/save/upsert-many/error",t.SAVE_UPSERT_ONE="@ngrx/data/save/upsert-one",t.SAVE_UPSERT_ONE_SUCCESS="@ngrx/data/save/upsert-one/success",t.SAVE_UPSERT_ONE_ERROR="@ngrx/data/save/upsert-one/error",t.ADD_ALL="@ngrx/data/add-all",t.ADD_MANY="@ngrx/data/add-many",t.ADD_ONE="@ngrx/data/add-one",t.REMOVE_ALL="@ngrx/data/remove-all",t.REMOVE_MANY="@ngrx/data/remove-many",t.REMOVE_ONE="@ngrx/data/remove-one",t.UPDATE_MANY="@ngrx/data/update-many",t.UPDATE_ONE="@ngrx/data/update-one",t.UPSERT_MANY="@ngrx/data/upsert-many",t.UPSERT_ONE="@ngrx/data/upsert-one",t.COMMIT_ALL="@ngrx/data/commit-all",t.COMMIT_MANY="@ngrx/data/commit-many",t.COMMIT_ONE="@ngrx/data/commit-one",t.UNDO_ALL="@ngrx/data/undo-all",t.UNDO_MANY="@ngrx/data/undo-many",t.UNDO_ONE="@ngrx/data/undo-one",t.SET_CHANGE_STATE="@ngrx/data/set-change-state",t.SET_COLLECTION="@ngrx/data/set-collection",t.SET_FILTER="@ngrx/data/set-filter",t.SET_LOADED="@ngrx/data/set-loaded",t.SET_LOADING="@ngrx/data/set-loading",Tt;var t})();const Uu="/success",Fc="/error";function Rc(t){return t+Uu}class fs{constructor(r,e){this.error=r,this.requestData=e,this.message="string"==typeof r?r:function vy(t){const{error:r,body:e,message:n}=t;let a=null;return r?a="string"==typeof r?r:r.message:n?a=n:e&&(a="string"==typeof e?e:e.error),"string"==typeof a?a:a?JSON.stringify(a):null}(r)}}class jr{}class Ar{}const Vu=new o.InjectionToken("@ngrx/data Plural Names");class Il{}class Nf{}let Gu=(()=>{class t{constructor(e){this.pluralizer=e,this.knownHttpResourceUrls={}}getResourceUrls(e,n){let a=this.knownHttpResourceUrls[e];if(!a){const s=Bf(n);a={entityResourceUrl:`${s}/${e}/`.toLowerCase(),collectionResourceUrl:`${s}/${this.pluralizer.pluralize(e)}/`.toLowerCase()},this.registerHttpResourceUrls({[e]:a})}return a}entityResource(e,n){return this.getResourceUrls(e,n).entityResourceUrl}collectionResource(e,n){return this.getResourceUrls(e,n).collectionResourceUrl}registerHttpResourceUrls(e){this.knownHttpResourceUrls={...this.knownHttpResourceUrls,...e||{}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Il))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();function Bf(t){return t.replace(/^[/\s]+|[/\s]+$/g,"")}class jf{constructor(r,e,n,a){this.http=e,this.httpUrlGenerator=n,this.getDelay=0,this.saveDelay=0,this.timeout=0,this._name=`${r} DefaultDataService`,this.entityName=r;const{root:s="api",delete404OK:l=!0,getDelay:c=0,saveDelay:f=0,timeout:h=0}=a||{};this.delete404OK=l,this.entityUrl=n.entityResource(r,s),this.entitiesUrl=n.collectionResource(r,s),this.getDelay=c,this.saveDelay=f,this.timeout=h}get name(){return this._name}add(r){const e=r||new Error(`No "${this.entityName}" entity to add`);return this.execute("POST",this.entityUrl,e)}delete(r){let e;return null==r&&(e=new Error(`No "${this.entityName}" key to delete`)),this.execute("DELETE",this.entityUrl+r,e).pipe((0,ye.U)(n=>r))}getAll(){return this.execute("GET",this.entitiesUrl)}getById(r){let e;return null==r&&(e=new Error(`No "${this.entityName}" key to get`)),this.execute("GET",this.entityUrl+r,e)}getWithQuery(r){const n=new L.HttpParams("string"==typeof r?{fromString:r}:{fromObject:r});return this.execute("GET",this.entitiesUrl,void 0,{params:n})}update(r){const e=r&&r.id,n=null==e?new Error(`No "${this.entityName}" update data or id`):r.changes;return this.execute("PUT",this.entityUrl+e,n)}upsert(r){const e=r||new Error(`No "${this.entityName}" entity to upsert`);return this.execute("POST",this.entityUrl,e)}execute(r,e,n,a){const s={method:r,url:e,data:n,options:a};if(n instanceof Error)return this.handleError(s)(n);let l;switch(r){case"DELETE":l=this.http.delete(e,a),this.saveDelay&&(l=l.pipe((0,ui.g)(this.saveDelay)));break;case"GET":l=this.http.get(e,a),this.getDelay&&(l=l.pipe((0,ui.g)(this.getDelay)));break;case"POST":l=this.http.post(e,n,a),this.saveDelay&&(l=l.pipe((0,ui.g)(this.saveDelay)));break;case"PUT":l=this.http.put(e,n,a),this.saveDelay&&(l=l.pipe((0,ui.g)(this.saveDelay)));break;default:{const c=new Error("Unimplemented HTTP method, "+r);l=(0,Go._)(c)}}return this.timeout&&(l=l.pipe((0,xf.V)(this.timeout+this.saveDelay))),l.pipe((0,Qi.K)(this.handleError(s)))}handleError(r){return e=>{const n=this.handleDelete404(e,r);if(n)return n;const a=new fs(e,r);return(0,Go._)(a)}}handleDelete404(r,e){if(404===r.status&&"DELETE"===e.method&&this.delete404OK)return(0,Re.of)({})}}let zf=(()=>{class t{constructor(e,n,a){this.http=e,this.httpUrlGenerator=n,this.config=a,n.registerHttpResourceUrls((a=a||{}).entityHttpResourceUrls)}create(e){return new jf(e,this.http,this.httpUrlGenerator,this.config)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(L.HttpClient),o.\u0275\u0275inject(Nf),o.\u0275\u0275inject(jr,8))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Vf=new o.InjectionToken("@ngrx/data Entity Metadata");let pr=(()=>{class t{constructor(e){this.definitions={},e&&e.forEach(n=>this.registerMetadataMap(n))}getDefinition(e,n=!0){e=e.trim();const a=this.definitions[e];if(!a&&n)throw new Error(`No EntityDefinition for entity type "${e}".`);return a}registerMetadata(e){if(e){const n=function Uf(t){let r=t.entityName;if(!r)throw new Error("Missing required entityName");t.entityName=r=r.trim();const e=t.selectId||Us,n=t.sortComparer=t.sortComparer||!1,a=function la(t={}){const{selectId:r,sortComparer:e}={sortComparer:!1,selectId:l=>l.id,...t},n=function vm(){return{getInitialState:function t(r={}){return Object.assign({ids:[],entities:{}},r)}}}(),a=function So(){return{getSelectors:function t(r){const e=l=>l.ids,n=l=>l.entities,a=(0,Et.P1)(e,n,(l,c)=>l.map(f=>c[f])),s=(0,Et.P1)(e,l=>l.length);return r?{selectIds:(0,Et.P1)(r,e),selectEntities:(0,Et.P1)(r,n),selectAll:(0,Et.P1)(r,a),selectTotal:(0,Et.P1)(r,s)}:{selectIds:e,selectEntities:n,selectAll:a,selectTotal:s}}}}();return{selectId:r,sortComparer:e,...n,...a,...e?ym(r,e):Cf(r)}}({selectId:e,sortComparer:n}),s=t.entityDispatcherOptions||{},l=a.getInitialState({entityName:r,filter:"",loaded:!1,loading:!1,changeState:{},...t.additionalCollectionState||{}});return{entityName:r,entityAdapter:a,entityDispatcherOptions:s,initialState:l,metadata:t,noChangeTracking:!0===t.noChangeTracking,selectId:e,sortComparer:n}}(e);this.registerDefinition(n)}}registerMetadataMap(e={}){Object.keys(e||{}).forEach(n=>this.registerMetadata({entityName:n,...e[n]}))}registerDefinition(e){this.definitions[e.entityName]=e}registerDefinitions(e){Object.assign(this.definitions,e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Vf,8))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const $u=hr.Update;let Gf=(()=>{class t{constructor(e,n,a){this.entityDefinitionService=e,this.http=n,this.idSelectors={},this.saveDelay=0,this.timeout=0;const{saveDelay:s=0,timeout:l=0}=a||{};this.saveDelay=s,this.timeout=l}saveEntities(e,n){e=this.filterChangeSet(e),e=this.flattenUpdates(e);let a=this.http.post(n,e).pipe((0,ye.U)(s=>this.restoreUpdates(s)),(0,Qi.K)(this.handleError({method:"POST",url:n,data:e})));return this.timeout&&(a=a.pipe((0,xf.V)(this.timeout))),this.saveDelay&&(a=a.pipe((0,ui.g)(this.saveDelay))),a}handleError(e){return n=>{const a=new fs(n,e);return(0,Go._)(a)}}filterChangeSet(e){return Mf(e)}flattenUpdates(e){let n=e.changes;if(0===n.length)return e;let a=!1;return n=n.map(s=>s.op===$u&&s.entities.length>0?(a=!0,{...s,entities:s.entities.map(l=>l.changes)}):s),a?{...e,changes:n}:e}restoreUpdates(e){if(null==e)return e;let n=e.changes;if(0===n.length)return e;let a=!1;return n=n.map(s=>{if(s.op===$u){a=!0;const l=this.getIdSelector(s.entityName);return{...s,entities:s.entities.map(c=>({id:l(c),changes:c}))}}return s}),a?{...e,changes:n}:e}getIdSelector(e){let n=this.idSelectors[e];return n||(n=this.entityDefinitionService.getDefinition(e).selectId,this.idSelectors[e]=n),n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(pr),o.\u0275\u0275inject(L.HttpClient),o.\u0275\u0275inject(jr,8))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Hr=(()=>{class t{constructor(e){this.defaultDataServiceFactory=e,this.services={}}getService(e){e=e.trim();let n=this.services[e];return n||(n=this.defaultDataServiceFactory.create(e),this.services[e]=n),n}registerService(e,n){this.services[e.trim()]=n}registerServices(e){this.services={...this.services,...e}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(zf))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class $f{}let Hf=(()=>{class t{constructor(e,n){this.logger=e,this.entityActionFactory=n}handleSuccess(e){const n=Rc(e.payload.entityOp);return a=>this.entityActionFactory.createFromAction(e,{entityOp:n,data:a})}handleError(e){const n=function km(t){return t+Fc}(e.payload.entityOp);return a=>{const l={error:a instanceof fs?a:new fs(a,null),originalAction:e};return this.logger.error(l),this.entityActionFactory.createFromAction(e,{entityOp:n,data:l})}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ar),o.\u0275\u0275inject(Ma))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class qf{constructor(r){this.message=r,this.message=r||"Canceled by user"}}let Hu=(()=>{class t{constructor(){this.seed=0,this.prefix="CRID"}next(){return this.seed+=1,this.prefix+this.seed}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Pl=(()=>{class t{constructor(){this.optimisticAdd=!1,this.optimisticDelete=!0,this.optimisticUpdate=!1,this.optimisticUpsert=!1,this.optimisticSaveEntities=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),_y=(()=>{class t{constructor(e,n,a,s){this.correlationIdGenerator=e,this.defaultDispatcherOptions=n,this.store=s,this.reducedActions$=a.pipe((0,ao.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}dispatch(e){return this.store.dispatch(e),e}cancelSaveEntities(e,n,a,s){if(!e)throw new Error("Missing correlationId");const l=new gy(e,n,a,s);this.dispatch(l)}clearCollections(e,n){this.dispatch(new Lf(e,n))}loadCollections(e,n){this.dispatch(new Am(e,n))}mergeQuerySet(e,n,a){this.dispatch(new zu(e,n,a))}setEntityCache(e,n){this.dispatch(new py(e,n))}saveEntities(e,n,a){const s=Array.isArray(e)?{changes:e}:e,l=(a=a||{}).correlationId??this.correlationIdGenerator.next(),c=null==a.isOptimistic?this.defaultDispatcherOptions.optimisticSaveEntities||!1:!0===a.isOptimistic,f=a.tag||"Save Entities";a={...a,correlationId:l,isOptimistic:c,tag:f};const h=new my(s,n,a);return this.dispatch(h),this.getSaveEntitiesResponseData$(a.correlationId).pipe((0,ao.d)(1))}getSaveEntitiesResponseData$(e){return this.reducedActions$.pipe((0,$.h)(n=>n.type===si.SAVE_ENTITIES_SUCCESS||n.type===si.SAVE_ENTITIES_ERROR||n.type===si.SAVE_ENTITIES_CANCEL),(0,$.h)(n=>e===n.payload.correlationId),(0,hn.q)(1),(0,Fa.z)(n=>n.type===si.SAVE_ENTITIES_CANCEL?(0,Go._)(new qf(n.payload.reason)):n.type===si.SAVE_ENTITIES_SUCCESS?(0,Re.of)(n.payload.changeSet):(0,Go._)(n.payload)))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Hu),o.\u0275\u0275inject(Pl),o.\u0275\u0275inject(Et.Y$),o.\u0275\u0275inject(Et.yh))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class xy{constructor(r,e,n,a=Us,s,l,c,f){this.entityName=r,this.entityActionFactory=e,this.store=n,this.selectId=a,this.defaultDispatcherOptions=s,this.reducedActions$=l,this.correlationIdGenerator=f,this.guard=new Df(r,a),this.toUpdate=Of(a);const h=(0,Et.P1)(c,g=>g[r]);this.entityCollection$=n.select(h)}createEntityAction(r,e,n){return this.entityActionFactory.create({entityName:this.entityName,entityOp:r,data:e,...n})}createAndDispatch(r,e,n){const a=this.createEntityAction(r,e,n);return this.dispatch(a),a}dispatch(r){return this.store.dispatch(r),r}add(r,e){e=this.setSaveEntityActionOptions(e,this.defaultDispatcherOptions.optimisticAdd);const n=this.createEntityAction(Tt.SAVE_ADD_ONE,r,e);return e.isOptimistic&&this.guard.mustBeEntity(n),this.dispatch(n),this.getResponseData$(e.correlationId).pipe((0,Vo.M)(this.entityCollection$),(0,ye.U)(([a,s])=>s.entities[this.selectId(a)]),(0,ao.d)(1))}cancel(r,e,n){if(!r)throw new Error("Missing correlationId");this.createAndDispatch(Tt.CANCEL_PERSIST,e,{correlationId:r})}delete(r,e){e=this.setSaveEntityActionOptions(e,this.defaultDispatcherOptions.optimisticDelete);const n=this.getKey(r),a=this.createEntityAction(Tt.SAVE_DELETE_ONE,n,e);return this.guard.mustBeKey(a),this.dispatch(a),this.getResponseData$(e.correlationId).pipe((0,ye.U)(()=>n),(0,ao.d)(1))}getAll(r){r=this.setQueryEntityActionOptions(r);const e=this.createEntityAction(Tt.QUERY_ALL,null,r);return this.dispatch(e),this.getResponseData$(r.correlationId).pipe((0,Vo.M)(this.entityCollection$),(0,ye.U)(([n,a])=>n.reduce((s,l)=>{const c=a.entities[this.selectId(l)];return c&&s.push(c),s},[])),(0,ao.d)(1))}getByKey(r,e){e=this.setQueryEntityActionOptions(e);const n=this.createEntityAction(Tt.QUERY_BY_KEY,r,e);return this.dispatch(n),this.getResponseData$(e.correlationId).pipe((0,Vo.M)(this.entityCollection$),(0,ye.U)(([a,s])=>s.entities[this.selectId(a)]),(0,ao.d)(1))}getWithQuery(r,e){e=this.setQueryEntityActionOptions(e);const n=this.createEntityAction(Tt.QUERY_MANY,r,e);return this.dispatch(n),this.getResponseData$(e.correlationId).pipe((0,Vo.M)(this.entityCollection$),(0,ye.U)(([a,s])=>a.reduce((l,c)=>{const f=s.entities[this.selectId(c)];return f&&l.push(f),l},[])),(0,ao.d)(1))}load(r){r=this.setQueryEntityActionOptions(r);const e=this.createEntityAction(Tt.QUERY_LOAD,null,r);return this.dispatch(e),this.getResponseData$(r.correlationId).pipe((0,ao.d)(1))}update(r,e){const n=this.toUpdate(r);e=this.setSaveEntityActionOptions(e,this.defaultDispatcherOptions.optimisticUpdate);const a=this.createEntityAction(Tt.SAVE_UPDATE_ONE,n,e);return e.isOptimistic&&this.guard.mustBeUpdate(a),this.dispatch(a),this.getResponseData$(e.correlationId).pipe((0,ye.U)(s=>s.changes),(0,Vo.M)(this.entityCollection$),(0,ye.U)(([s,l])=>l.entities[this.selectId(s)]),(0,ao.d)(1))}upsert(r,e){e=this.setSaveEntityActionOptions(e,this.defaultDispatcherOptions.optimisticUpsert);const n=this.createEntityAction(Tt.SAVE_UPSERT_ONE,r,e);return e.isOptimistic&&this.guard.mustBeEntity(n),this.dispatch(n),this.getResponseData$(e.correlationId).pipe((0,Vo.M)(this.entityCollection$),(0,ye.U)(([a,s])=>s.entities[this.selectId(a)]),(0,ao.d)(1))}addAllToCache(r,e){this.createAndDispatch(Tt.ADD_ALL,r,e)}addOneToCache(r,e){this.createAndDispatch(Tt.ADD_ONE,r,e)}addManyToCache(r,e){this.createAndDispatch(Tt.ADD_MANY,r,e)}clearCache(r){this.createAndDispatch(Tt.REMOVE_ALL,void 0,r)}removeOneFromCache(r,e){this.createAndDispatch(Tt.REMOVE_ONE,this.getKey(r),e)}removeManyFromCache(r,e){if(!r||0===r.length)return;const n="object"==typeof r[0]?r.map(a=>this.getKey(a)):r;this.createAndDispatch(Tt.REMOVE_MANY,n,e)}updateOneInCache(r,e){const n=this.toUpdate(r);this.createAndDispatch(Tt.UPDATE_ONE,n,e)}updateManyInCache(r,e){if(!r||0===r.length)return;const n=r.map(a=>this.toUpdate(a));this.createAndDispatch(Tt.UPDATE_MANY,n,e)}upsertOneInCache(r,e){this.createAndDispatch(Tt.UPSERT_ONE,r,e)}upsertManyInCache(r,e){!r||0===r.length||this.createAndDispatch(Tt.UPSERT_MANY,r,e)}setFilter(r){this.createAndDispatch(Tt.SET_FILTER,r)}setLoaded(r){this.createAndDispatch(Tt.SET_LOADED,!!r)}setLoading(r){this.createAndDispatch(Tt.SET_LOADING,!!r)}getKey(r){return"object"==typeof r?this.selectId(r):r}getResponseData$(r){return this.reducedActions$.pipe((0,$.h)(e=>!!e.payload),(0,$.h)(e=>{const{correlationId:n,entityName:a,entityOp:s}=e.payload;return a===this.entityName&&n===r&&(s.endsWith(Uu)||s.endsWith(Fc)||s===Tt.CANCEL_PERSIST)}),(0,hn.q)(1),(0,Fa.z)(e=>{const{entityOp:n}=e.payload;return n===Tt.CANCEL_PERSIST?(0,Go._)(new qf(e.payload.data)):n.endsWith(Uu)?(0,Re.of)(e.payload.data):(0,Go._)(e.payload.data.error)}))}setQueryEntityActionOptions(r){const e=(r=r||{}).correlationId??this.correlationIdGenerator.next();return{...r,correlationId:e}}setSaveEntityActionOptions(r,e){const n=(r=r||{}).correlationId??this.correlationIdGenerator.next(),a=null==r.isOptimistic?e||!1:!0===r.isOptimistic;return{...r,correlationId:n,isOptimistic:a}}}const Fl="entityCache",Xf=new o.InjectionToken("@ngrx/data Entity Cache Name"),Dc=new o.InjectionToken("@ngrx/data Entity Cache Meta Reducers"),Wf=new o.InjectionToken("@ngrx/data Entity Collection Meta Reducers"),Im=new o.InjectionToken("@ngrx/data Initial Entity Cache State"),qu=new o.InjectionToken("@ngrx/data Entity Cache Selector"),Pm={provide:qu,useFactory:Kf,deps:[[new o.Optional,Xf]]};function Kf(t){return(0,Et.ZF)(t=t||Fl)}let Yf=(()=>{class t{constructor(e,n,a,s,l,c){this.entityActionFactory=e,this.store=n,this.entityDispatcherDefaultOptions=a,this.entityCacheSelector=l,this.correlationIdGenerator=c,this.reducedActions$=s.pipe((0,ao.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}create(e,n=Us,a={}){const s={...this.entityDispatcherDefaultOptions,...a};return new xy(e,this.entityActionFactory,this.store,n,s,this.reducedActions$,this.entityCacheSelector,this.correlationIdGenerator)}ngOnDestroy(){this.raSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ma),o.\u0275\u0275inject(Et.yh),o.\u0275\u0275inject(Pl),o.\u0275\u0275inject(Et.Y$),o.\u0275\u0275inject(qu),o.\u0275\u0275inject(Hu))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Qf=new o.InjectionToken("@ngrx/data Entity Effects Scheduler");let Jf=(()=>{class t{constructor(e,n,a,s,l){this.actions=e,this.dataService=n,this.entityActionFactory=a,this.logger=s,this.scheduler=l,this.responseDelay=10,this.saveEntitiesCancel$=Br(()=>this.actions.pipe(so(si.SAVE_ENTITIES_CANCEL),(0,$.h)(c=>null!=c.payload.correlationId)),{dispatch:!1}),this.saveEntities$=Br(()=>this.actions.pipe(so(si.SAVE_ENTITIES),(0,Fa.z)(c=>this.saveEntities(c))))}saveEntities(e){const n=e.payload.error;if(n)return this.handleSaveEntitiesError$(e)(n);try{const a=Mf(e.payload.changeSet),{correlationId:s,mergeStrategy:l,tag:c,url:f}=e.payload,h={correlationId:s,mergeStrategy:l,tag:c};if(0===a.changes.length)return(0,Re.of)(new Na(a,f,h));return gm(this.saveEntitiesCancel$.pipe((0,$.h)(B=>s===B.payload.correlationId),(0,ye.U)(B=>new La(s,B.payload.reason,B.payload.tag))),this.dataService.saveEntities(a,f).pipe((0,Ra.b)(B=>this.handleSaveEntitiesSuccess$(e,this.entityActionFactory)(B)),(0,Qi.K)(this.handleSaveEntitiesError$(e))))}catch(a){return this.handleSaveEntitiesError$(e)(a)}}handleSaveEntitiesError$(e){return n=>{const a=n instanceof fs?n:new fs(n,null);return(0,Re.of)(new ds(a,e)).pipe((0,ui.g)(this.responseDelay,this.scheduler||Ls.z))}}handleSaveEntitiesSuccess$(e,n){const{url:a,correlationId:s,mergeStrategy:l,tag:c}=e.payload,f={correlationId:s,mergeStrategy:l,tag:c};return h=>{if(h)return(0,Re.of)(new Na(h,a,f));if(h=e.payload.changeSet,!e.payload.isOptimistic)return(0,Re.of)(new Na(h,a,f));const g=h.changes.reduce((I,B)=>-1===I.indexOf(B.entityName)?I.concat(B.entityName):I,[]);return(0,R.T)(g.map(I=>n.create(I,Tt.SET_LOADING,!1)))}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ho),o.\u0275\u0275inject(Gf),o.\u0275\u0275inject(Ma),o.\u0275\u0275inject(Ar),o.\u0275\u0275inject(Qf,8))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Fm=[Tt.QUERY_ALL,Tt.QUERY_LOAD,Tt.QUERY_BY_KEY,Tt.QUERY_MANY,Tt.SAVE_ADD_ONE,Tt.SAVE_DELETE_ONE,Tt.SAVE_UPDATE_ONE,Tt.SAVE_UPSERT_ONE];let Zf=(()=>{class t{constructor(e,n,a,s,l){this.actions=e,this.dataService=n,this.entityActionFactory=a,this.resultHandler=s,this.scheduler=l,this.responseDelay=10,this.cancel$=Br(()=>this.actions.pipe(Vs(Tt.CANCEL_PERSIST),(0,ye.U)(c=>c.payload.correlationId),(0,$.h)(c=>null!=c)),{dispatch:!1}),this.persist$=Br(()=>this.actions.pipe(Vs(Fm),(0,Fa.z)(c=>this.persist(c))))}persist(e){if(e.payload.skip)return this.handleSkipSuccess$(e);if(e.payload.error)return this.handleError$(e)(e.payload.error);try{return gm(this.cancel$.pipe((0,$.h)(s=>e.payload.correlationId===s),(0,ye.U)(s=>this.entityActionFactory.createFromAction(e,{entityOp:Tt.CANCELED_PERSIST}))),this.callDataService(e).pipe((0,ye.U)(this.resultHandler.handleSuccess(e)),(0,Qi.K)(this.handleError$(e))))}catch(n){return this.handleError$(e)(n)}}callDataService(e){const{entityName:n,entityOp:a,data:s}=e.payload,l=this.dataService.getService(n);switch(a){case Tt.QUERY_ALL:case Tt.QUERY_LOAD:return l.getAll();case Tt.QUERY_BY_KEY:return l.getById(s);case Tt.QUERY_MANY:return l.getWithQuery(s);case Tt.SAVE_ADD_ONE:return l.add(s);case Tt.SAVE_DELETE_ONE:return l.delete(s);case Tt.SAVE_UPDATE_ONE:const{id:c,changes:f}=s;return l.update(s).pipe((0,ye.U)(h=>h&&Object.keys(h).length>0?{id:c,changes:{...f,...h},changed:!0}:{id:c,changes:f,changed:!1}));case Tt.SAVE_UPSERT_ONE:return l.upsert(s).pipe((0,ye.U)(h=>h&&Object.keys(h).length>0?h:s));default:throw new Error(`Persistence action "${a}" is not implemented.`)}}handleError$(e){return n=>(0,Re.of)(this.resultHandler.handleError(e)(n)).pipe((0,ui.g)(this.responseDelay,this.scheduler||Ls.z))}handleSkipSuccess$(e){const n=Rc(e.payload.entityOp),a=this.entityActionFactory.createFromAction(e,{entityOp:n});return(0,Re.of)(a).pipe((0,ui.g)(this.responseDelay,this.scheduler||Ls.z))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ho),o.\u0275\u0275inject(Hr),o.\u0275\u0275inject(Ma),o.\u0275\u0275inject($f),o.\u0275\u0275inject(Qf,8))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class eh{constructor(r,e){this.entityName=r,r=r.trim();const{dispatcher:n,selectors:a,selectors$:s}=e.create(r);this.entityName=r,this.dispatcher=n,this.guard=n.guard,this.selectId=n.selectId,this.toUpdate=n.toUpdate,this.selectors=a,this.selectors$=s,this.collection$=s.collection$,this.count$=s.count$,this.entities$=s.entities$,this.entityActions$=s.entityActions$,this.entityMap$=s.entityMap$,this.errors$=s.errors$,this.filter$=s.filter$,this.filteredEntities$=s.filteredEntities$,this.keys$=s.keys$,this.loaded$=s.loaded$,this.loading$=s.loading$,this.changeState$=s.changeState$}createEntityAction(r,e,n){return this.dispatcher.createEntityAction(r,e,n)}createAndDispatch(r,e,n){return this.dispatcher.createAndDispatch(r,e,n)}dispatch(r){return this.dispatcher.dispatch(r)}get store(){return this.dispatcher.store}add(r,e){return this.dispatcher.add(r,e)}cancel(r,e,n){this.dispatcher.cancel(r,e,n)}delete(r,e){return this.dispatcher.delete(r,e)}getAll(r){return this.dispatcher.getAll(r)}getByKey(r,e){return this.dispatcher.getByKey(r,e)}getWithQuery(r,e){return this.dispatcher.getWithQuery(r,e)}load(r){return this.dispatcher.load(r)}update(r,e){return this.dispatcher.update(r,e)}upsert(r,e){return this.dispatcher.upsert(r,e)}addAllToCache(r,e){this.dispatcher.addAllToCache(r,e)}addOneToCache(r,e){this.dispatcher.addOneToCache(r,e)}addManyToCache(r,e){this.dispatcher.addManyToCache(r,e)}clearCache(){this.dispatcher.clearCache()}removeOneFromCache(r,e){this.dispatcher.removeOneFromCache(r,e)}removeManyFromCache(r,e){this.dispatcher.removeManyFromCache(r,e)}updateOneInCache(r,e){this.dispatcher.updateOneInCache(r,e)}updateManyInCache(r,e){this.dispatcher.updateManyInCache(r,e)}upsertOneInCache(r,e){this.dispatcher.upsertOneInCache(r,e)}upsertManyInCache(r,e){this.dispatcher.upsertManyInCache(r,e)}setFilter(r){this.dispatcher.setFilter(r)}setLoaded(r){this.dispatcher.setLoaded(!!r)}setLoading(r){this.dispatcher.setLoading(!!r)}}let Oc=(()=>{class t{constructor(e){this.entityDefinitionService=e}create(e){const n=this.entityDefinitionService&&this.entityDefinitionService.getDefinition(e,!1);return n&&n.initialState||function th(t){return{entityName:t,ids:[],entities:{},filter:void 0,loaded:!1,loading:!1,changeState:{}}}(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(pr,8))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),nh=(()=>{class t{constructor(e,n){this.entityCollectionCreator=e||new Oc,this.selectEntityCache=n||Kf(Fl)}createCollectionSelector(e){return(0,Et.P1)(this.selectEntityCache,(a={})=>a[e]||this.entityCollectionCreator.create(e))}createCollectionSelectors(e){const n="string"==typeof e?{entityName:e}:e,a=he=>he.ids,s=he=>he.entities,l=(0,Et.P1)(a,s,(he,Se)=>he.map(Oe=>Se[Oe])),c=(0,Et.P1)(a,he=>he.length),f=he=>he.filter,h=n.filterFn,g=h?(0,Et.P1)(l,f,(he,Se)=>h(he,Se)):l,Ie={};return Object.keys(n.additionalCollectionState||{}).forEach(he=>{Ie["select"+he[0].toUpperCase()+he.slice(1)]=Se=>Se[he]}),{selectCount:c,selectEntities:l,selectEntityMap:s,selectFilter:f,selectFilteredEntities:g,selectKeys:a,selectLoaded:he=>he.loaded,selectLoading:he=>he.loading,selectChangeState:he=>he.changeState,...Ie}}create(e){const n="string"==typeof e?{entityName:e}:e,a=n.entityName,s=this.createCollectionSelector(a),l=this.createCollectionSelectors(n),c={};return Object.keys(l).forEach(f=>{c[f]=(0,Et.P1)(s,l[f])}),{entityName:a,selectCollection:s,selectEntityCache:this.selectEntityCache,...c}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Oc,8),o.\u0275\u0275inject(qu,8))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),ih=(()=>{class t{constructor(e,n,a){this.store=e,this.actions=n,this.selectEntityCache=a,this.entityCache$=this.store.select(this.selectEntityCache),this.entityActionErrors$=n.pipe((0,$.h)(s=>s.payload&&s.payload.entityOp&&s.payload.entityOp.endsWith(Fc)),(0,ao.d)(1))}create(e,n){const a={entityName:e};return Object.keys(n).forEach(s=>{if(s.startsWith("select")){const l=s[6].toLowerCase()+s.substr(7)+"$";a[l]=this.store.select(n[s])}}),a.entityActions$=this.actions.pipe(Pc(e)),a.errors$=this.entityActionErrors$.pipe(Pc(e)),a}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Et.yh),o.\u0275\u0275inject(Ho),o.\u0275\u0275inject(qu))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),rh=(()=>{class t{constructor(e,n,a,s){this.entityDispatcherFactory=e,this.entityDefinitionService=n,this.entitySelectorsFactory=a,this.entitySelectors$Factory=s}create(e){e=e.trim();const n=this.entityDefinitionService.getDefinition(e),a=this.entityDispatcherFactory.create(e,n.selectId,n.entityDispatcherOptions),s=this.entitySelectorsFactory.create(n.metadata);return{dispatcher:a,entityName:e,selectors:s,selectors$:this.entitySelectors$Factory.create(e,s)}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Yf),o.\u0275\u0275inject(pr),o.\u0275\u0275inject(nh),o.\u0275\u0275inject(ih))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),oh=(()=>{class t{constructor(e){this.entityCollectionServiceElementsFactory=e}create(e){return new eh(e,this.entityCollectionServiceElementsFactory)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(rh))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Dm=(()=>{class t{constructor(e,n,a,s){this.entityCollectionServiceFactory=e,this.store=s,this.entityActionErrors$=a.entityActionErrors$,this.entityCache$=a.entityCache$,this.reducedActions$=n.reducedActions$}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(oh),o.\u0275\u0275inject(Yf),o.\u0275\u0275inject(ih),o.\u0275\u0275inject(Et.yh))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Xu=(()=>{class t{constructor(e){this.entityServicesElements=e,this.EntityCollectionServices={}}get entityActionErrors$(){return this.entityServicesElements.entityActionErrors$}get entityCache$(){return this.entityServicesElements.entityCache$}get entityCollectionServiceFactory(){return this.entityServicesElements.entityCollectionServiceFactory}get reducedActions$(){return this.entityServicesElements.reducedActions$}get store(){return this.entityServicesElements.store}dispatch(e){this.store.dispatch(e)}createEntityCollectionService(e){return this.entityCollectionServiceFactory.create(e)}getEntityCollectionService(e){let n=this.EntityCollectionServices[e];return n||(n=this.createEntityCollectionService(e),this.EntityCollectionServices[e]=n),n}registerEntityCollectionService(e,n){this.EntityCollectionServices[n||e.entityName]=e}registerEntityCollectionServices(e){Array.isArray(e)?e.forEach(n=>this.registerEntityCollectionService(n)):Object.keys(e||{}).forEach(n=>{this.registerEntityCollectionService(e[n],n)})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Dm))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class li{}var Dn=(()=>{return(t=Dn||(Dn={}))[t.Unchanged=0]="Unchanged",t[t.Added=1]="Added",t[t.Deleted=2]="Deleted",t[t.Updated=3]="Updated",Dn;var t})();class ah{constructor(r,e){this.adapter=r,this.selectId=e,this.selectId=e||Us}commitAll(r){return 0===Object.keys(r.changeState).length?r:{...r,changeState:{}}}commitMany(r,e){if(null==r||0===r.length)return e;let n=!1;const a=r.reduce((s,l)=>{const c="object"==typeof l?this.selectId(l):l;return s[c]&&(n||(s={...s},n=!0),delete s[c]),s},e.changeState);return n?{...e,changeState:a}:e}commitOne(r,e){return null==r?e:this.commitMany([r],e)}mergeQueryResults(r,e,n){return this.mergeServerUpserts(r,e,yi.PreserveChanges,n)}mergeSaveAdds(r,e,n){return this.mergeServerUpserts(r,e,yi.OverwriteChanges,n)}mergeSaveDeletes(r,e,n){const a=r;return e=(n=n??yi.OverwriteChanges)===yi.IgnoreChanges?e:this.commitMany(a,e),this.adapter.removeMany(a,e)}mergeSaveUpdates(r,e,n,a=!1){if(null==r||0===r.length)return e;let c,s=!1,l=e.changeState;switch(n=n??yi.OverwriteChanges){case yi.IgnoreChanges:return c=f(r),this.adapter.updateMany(c,e);case yi.OverwriteChanges:return l=r.reduce((h,g)=>{const I=g.id;return h[I]&&(s||(h={...h},s=!0),delete h[I]),h},e.changeState),e=s?{...e,changeState:l}:e,c=f(r),this.adapter.updateMany(c,e);case yi.PreserveChanges:{const h=[];return l=r.reduce((g,I)=>{const B=I.id,V=g[B];if(V){s||(g={...g},s=!0);const ce=this.selectId(I.changes),Ie=V;ce!==B&&delete g[B];const he={...Ie.originalValue,...I.changes};g[ce]={...Ie,originalValue:he}}else h.push(I);return g},e.changeState),e=s?{...e,changeState:l}:e,c=f(h),this.adapter.updateMany(c,e)}}function f(h){return!0===a&&(h=h.filter(g=>!0===g.changed)),h.map(g=>({id:g.id,changes:g.changes}))}}mergeSaveUpserts(r,e,n){return this.mergeServerUpserts(r,e,yi.OverwriteChanges,n)}mergeServerUpserts(r,e,n,a){if(null==r||0===r.length)return e;let s=!1,l=e.changeState;switch(a=a??n){case yi.IgnoreChanges:return this.adapter.upsertMany(r,e);case yi.OverwriteChanges:return e=this.adapter.upsertMany(r,e),l=r.reduce((c,f)=>{const h=this.selectId(f);return c[h]&&(s||(c={...c},s=!0),delete c[h]),c},e.changeState),s?{...e,changeState:l}:e;case yi.PreserveChanges:{const c=[];return l=r.reduce((f,h)=>{const g=this.selectId(h);return f[g]?s||(f={...f,[g]:{...f[g],originalValue:h}},s=!0):c.push(h),f},e.changeState),e=this.adapter.upsertMany(c,e),s?{...e,changeState:l}:e}}}trackAddMany(r,e,n){if(n===yi.IgnoreChanges||null==r||0===r.length)return e;let a=!1;const s=r.reduce((l,c)=>{const f=this.selectId(c);if(null==f||""===f)throw new Error(`${e.entityName} entity add requires a key to be tracked`);return l[f]||(a||(a=!0,l={...l}),l[f]={changeType:Dn.Added}),l},e.changeState);return a?{...e,changeState:s}:e}trackAddOne(r,e,n){return null==r?e:this.trackAddMany([r],e,n)}trackDeleteMany(r,e,n){if(n===yi.IgnoreChanges||null==r||0===r.length)return e;let a=!1;const s=e.entities,l=r.reduce((c,f)=>{const h=s[f];if(h){const I=c[f];I?I.changeType===Dn.Added?(g(),delete c[f]):I.changeType===Dn.Updated&&(g(),c[f]={...c[f],changeType:Dn.Deleted}):(g(),c[f]={changeType:Dn.Deleted,originalValue:h})}return c;function g(){a||(a=!0,c={...c})}},e.changeState);return a?{...e,changeState:l}:e}trackDeleteOne(r,e,n){return null==r?e:this.trackDeleteMany([r],e,n)}trackUpdateMany(r,e,n){if(n===yi.IgnoreChanges||null==r||0===r.length)return e;let a=!1;const s=e.entities,l=r.reduce((c,f)=>{const{id:h}=f;if(null==h||""===h)throw new Error(`${e.entityName} entity update requires a key to be tracked`);const I=s[h];return I&&(c[h]||(a||(a=!0,c={...c}),c[h]={changeType:Dn.Updated,originalValue:I})),c},e.changeState);return a?{...e,changeState:l}:e}trackUpdateOne(r,e,n){return null==r?e:this.trackUpdateMany([r],e,n)}trackUpsertMany(r,e,n){if(n===yi.IgnoreChanges||null==r||0===r.length)return e;let a=!1;const s=e.entities,l=r.reduce((c,f)=>{const h=this.selectId(f);if(null==h||""===h)throw new Error(`${e.entityName} entity upsert requires a key to be tracked`);if(!c[h]){a||(a=!0,c={...c});const I=s[h];c[h]=null==I?{changeType:Dn.Added}:{changeType:Dn.Updated,originalValue:I}}return c},e.changeState);return a?{...e,changeState:l}:e}trackUpsertOne(r,e,n){return null==r?e:this.trackUpsertMany([r],e,n)}undoAll(r){const e=Object.keys(r.changeState),{remove:n,upsert:a}=e.reduce((s,l)=>{const c=s.chgState[l];switch(c.changeType){case Dn.Added:s.remove.push(l);break;case Dn.Deleted:const f=c.originalValue;f&&s.upsert.push(f);break;case Dn.Updated:s.upsert.push(c.originalValue)}return s},{remove:[],upsert:[],chgState:r.changeState});return r=this.adapter.removeMany(n,r),r=this.adapter.upsertMany(a,r),{...r,changeState:{}}}undoMany(r,e){if(null==r||0===r.length)return e;let n=!1;const{changeState:a,remove:s,upsert:l}=r.reduce((c,f)=>{let h=c.changeState;const g="object"==typeof f?this.selectId(f):f,I=h[g];if(I)switch(n||(h={...h},n=!0),delete h[g],c.changeState=h,I.changeType){case Dn.Added:c.remove.push(g);break;case Dn.Deleted:const B=I.originalValue;B&&c.upsert.push(B);break;case Dn.Updated:c.upsert.push(I.originalValue)}return c},{remove:[],upsert:[],changeState:e.changeState});return e=this.adapter.removeMany(s,e),e=this.adapter.upsertMany(l,e),n?{...e,changeState:a}:e}undoOne(r,e){return null==r?e:this.undoMany([r],e)}}class Wo{constructor(r,e,n){this.entityName=r,this.definition=e,this.methods={[Tt.CANCEL_PERSIST]:this.cancelPersist.bind(this),[Tt.QUERY_ALL]:this.queryAll.bind(this),[Tt.QUERY_ALL_ERROR]:this.queryAllError.bind(this),[Tt.QUERY_ALL_SUCCESS]:this.queryAllSuccess.bind(this),[Tt.QUERY_BY_KEY]:this.queryByKey.bind(this),[Tt.QUERY_BY_KEY_ERROR]:this.queryByKeyError.bind(this),[Tt.QUERY_BY_KEY_SUCCESS]:this.queryByKeySuccess.bind(this),[Tt.QUERY_LOAD]:this.queryLoad.bind(this),[Tt.QUERY_LOAD_ERROR]:this.queryLoadError.bind(this),[Tt.QUERY_LOAD_SUCCESS]:this.queryLoadSuccess.bind(this),[Tt.QUERY_MANY]:this.queryMany.bind(this),[Tt.QUERY_MANY_ERROR]:this.queryManyError.bind(this),[Tt.QUERY_MANY_SUCCESS]:this.queryManySuccess.bind(this),[Tt.SAVE_ADD_MANY]:this.saveAddMany.bind(this),[Tt.SAVE_ADD_MANY_ERROR]:this.saveAddManyError.bind(this),[Tt.SAVE_ADD_MANY_SUCCESS]:this.saveAddManySuccess.bind(this),[Tt.SAVE_ADD_ONE]:this.saveAddOne.bind(this),[Tt.SAVE_ADD_ONE_ERROR]:this.saveAddOneError.bind(this),[Tt.SAVE_ADD_ONE_SUCCESS]:this.saveAddOneSuccess.bind(this),[Tt.SAVE_DELETE_MANY]:this.saveDeleteMany.bind(this),[Tt.SAVE_DELETE_MANY_ERROR]:this.saveDeleteManyError.bind(this),[Tt.SAVE_DELETE_MANY_SUCCESS]:this.saveDeleteManySuccess.bind(this),[Tt.SAVE_DELETE_ONE]:this.saveDeleteOne.bind(this),[Tt.SAVE_DELETE_ONE_ERROR]:this.saveDeleteOneError.bind(this),[Tt.SAVE_DELETE_ONE_SUCCESS]:this.saveDeleteOneSuccess.bind(this),[Tt.SAVE_UPDATE_MANY]:this.saveUpdateMany.bind(this),[Tt.SAVE_UPDATE_MANY_ERROR]:this.saveUpdateManyError.bind(this),[Tt.SAVE_UPDATE_MANY_SUCCESS]:this.saveUpdateManySuccess.bind(this),[Tt.SAVE_UPDATE_ONE]:this.saveUpdateOne.bind(this),[Tt.SAVE_UPDATE_ONE_ERROR]:this.saveUpdateOneError.bind(this),[Tt.SAVE_UPDATE_ONE_SUCCESS]:this.saveUpdateOneSuccess.bind(this),[Tt.SAVE_UPSERT_MANY]:this.saveUpsertMany.bind(this),[Tt.SAVE_UPSERT_MANY_ERROR]:this.saveUpsertManyError.bind(this),[Tt.SAVE_UPSERT_MANY_SUCCESS]:this.saveUpsertManySuccess.bind(this),[Tt.SAVE_UPSERT_ONE]:this.saveUpsertOne.bind(this),[Tt.SAVE_UPSERT_ONE_ERROR]:this.saveUpsertOneError.bind(this),[Tt.SAVE_UPSERT_ONE_SUCCESS]:this.saveUpsertOneSuccess.bind(this),[Tt.ADD_ALL]:this.addAll.bind(this),[Tt.ADD_MANY]:this.addMany.bind(this),[Tt.ADD_ONE]:this.addOne.bind(this),[Tt.REMOVE_ALL]:this.removeAll.bind(this),[Tt.REMOVE_MANY]:this.removeMany.bind(this),[Tt.REMOVE_ONE]:this.removeOne.bind(this),[Tt.UPDATE_MANY]:this.updateMany.bind(this),[Tt.UPDATE_ONE]:this.updateOne.bind(this),[Tt.UPSERT_MANY]:this.upsertMany.bind(this),[Tt.UPSERT_ONE]:this.upsertOne.bind(this),[Tt.COMMIT_ALL]:this.commitAll.bind(this),[Tt.COMMIT_MANY]:this.commitMany.bind(this),[Tt.COMMIT_ONE]:this.commitOne.bind(this),[Tt.UNDO_ALL]:this.undoAll.bind(this),[Tt.UNDO_MANY]:this.undoMany.bind(this),[Tt.UNDO_ONE]:this.undoOne.bind(this),[Tt.SET_CHANGE_STATE]:this.setChangeState.bind(this),[Tt.SET_COLLECTION]:this.setCollection.bind(this),[Tt.SET_FILTER]:this.setFilter.bind(this),[Tt.SET_LOADED]:this.setLoaded.bind(this),[Tt.SET_LOADING]:this.setLoading.bind(this)},this.adapter=e.entityAdapter,this.isChangeTracking=!0!==e.noChangeTracking,this.selectId=e.selectId,this.guard=new Df(r,this.selectId),this.toUpdate=Of(this.selectId),this.entityChangeTracker=n||new ah(this.adapter,this.selectId)}cancelPersist(r){return this.setLoadingFalse(r)}queryAll(r){return this.setLoadingTrue(r)}queryAllError(r,e){return this.setLoadingFalse(r)}queryAllSuccess(r,e){const n=this.extractData(e),a=this.extractMergeStrategy(e);return{...this.entityChangeTracker.mergeQueryResults(n,r,a),loaded:!0,loading:!1}}queryByKey(r,e){return this.setLoadingTrue(r)}queryByKeyError(r,e){return this.setLoadingFalse(r)}queryByKeySuccess(r,e){const n=this.extractData(e),a=this.extractMergeStrategy(e);return r=null==n?r:this.entityChangeTracker.mergeQueryResults([n],r,a),this.setLoadingFalse(r)}queryLoad(r){return this.setLoadingTrue(r)}queryLoadError(r,e){return this.setLoadingFalse(r)}queryLoadSuccess(r,e){const n=this.extractData(e);return{...this.adapter.setAll(n,r),loading:!1,loaded:!0,changeState:{}}}queryMany(r,e){return this.setLoadingTrue(r)}queryManyError(r,e){return this.setLoadingFalse(r)}queryManySuccess(r,e){const n=this.extractData(e),a=this.extractMergeStrategy(e);return{...this.entityChangeTracker.mergeQueryResults(n,r,a),loaded:!0,loading:!1}}saveAddMany(r,e){if(this.isOptimistic(e)){const n=this.guard.mustBeEntities(e),a=this.extractMergeStrategy(e);r=this.entityChangeTracker.trackAddMany(n,r,a),r=this.adapter.addMany(n,r)}return this.setLoadingTrue(r)}saveAddManyError(r,e){return this.setLoadingFalse(r)}saveAddManySuccess(r,e){const n=this.guard.mustBeEntities(e),a=this.extractMergeStrategy(e);return r=this.isOptimistic(e)?this.entityChangeTracker.mergeSaveUpserts(n,r,a):this.entityChangeTracker.mergeSaveAdds(n,r,a),this.setLoadingFalse(r)}saveAddOne(r,e){if(this.isOptimistic(e)){const n=this.guard.mustBeEntity(e),a=this.extractMergeStrategy(e);r=this.entityChangeTracker.trackAddOne(n,r,a),r=this.adapter.addOne(n,r)}return this.setLoadingTrue(r)}saveAddOneError(r,e){return this.setLoadingFalse(r)}saveAddOneSuccess(r,e){const n=this.guard.mustBeEntity(e),a=this.extractMergeStrategy(e);if(this.isOptimistic(e)){const s=this.toUpdate(n);r=this.entityChangeTracker.mergeSaveUpdates([s],r,a,!1)}else r=this.entityChangeTracker.mergeSaveAdds([n],r,a);return this.setLoadingFalse(r)}saveDeleteOne(r,e){const n=this.extractData(e),a="object"==typeof n?this.selectId(n):n,s=r.changeState[a];if(s&&(s.changeType===Dn.Added?(r=this.adapter.removeOne(a,r),r=this.entityChangeTracker.commitOne(a,r),e.payload.skip=!0):r=this.entityChangeTracker.trackDeleteOne(a,r)),this.isOptimistic(e)){const l=this.extractMergeStrategy(e);r=this.entityChangeTracker.trackDeleteOne(a,r,l),r=this.adapter.removeOne(a,r)}return this.setLoadingTrue(r)}saveDeleteOneError(r,e){return this.setLoadingFalse(r)}saveDeleteOneSuccess(r,e){const n=this.extractData(e);if(this.isOptimistic(e)){const a=this.extractMergeStrategy(e);r=this.entityChangeTracker.mergeSaveDeletes([n],r,a)}else r=this.adapter.removeOne(n,r),r=this.entityChangeTracker.commitOne(n,r);return this.setLoadingFalse(r)}saveDeleteMany(r,e){const n=this.extractData(e).map(a=>"object"==typeof a?this.selectId(a):a);if(n.forEach(a=>{const s=r.changeState[a];s&&(s.changeType===Dn.Added?(r=this.adapter.removeOne(a,r),r=this.entityChangeTracker.commitOne(a,r),e.payload.skip=!0):r=this.entityChangeTracker.trackDeleteOne(a,r))}),this.isOptimistic(e)){const a=this.extractMergeStrategy(e);r=this.entityChangeTracker.trackDeleteMany(n,r,a),r=this.adapter.removeMany(n,r)}return this.setLoadingTrue(r)}saveDeleteManyError(r,e){return this.setLoadingFalse(r)}saveDeleteManySuccess(r,e){const n=this.extractData(e);if(this.isOptimistic(e)){const a=this.extractMergeStrategy(e);r=this.entityChangeTracker.mergeSaveDeletes(n,r,a)}else r=this.adapter.removeMany(n,r),r=this.entityChangeTracker.commitMany(n,r);return this.setLoadingFalse(r)}saveUpdateOne(r,e){const n=this.guard.mustBeUpdate(e);if(this.isOptimistic(e)){const a=this.extractMergeStrategy(e);r=this.entityChangeTracker.trackUpdateOne(n,r,a),r=this.adapter.updateOne(n,r)}return this.setLoadingTrue(r)}saveUpdateOneError(r,e){return this.setLoadingFalse(r)}saveUpdateOneSuccess(r,e){const n=this.guard.mustBeUpdateResponse(e),a=this.isOptimistic(e),s=this.extractMergeStrategy(e);return r=this.entityChangeTracker.mergeSaveUpdates([n],r,s,a),this.setLoadingFalse(r)}saveUpdateMany(r,e){const n=this.guard.mustBeUpdates(e);if(this.isOptimistic(e)){const a=this.extractMergeStrategy(e);r=this.entityChangeTracker.trackUpdateMany(n,r,a),r=this.adapter.updateMany(n,r)}return this.setLoadingTrue(r)}saveUpdateManyError(r,e){return this.setLoadingFalse(r)}saveUpdateManySuccess(r,e){const n=this.guard.mustBeUpdateResponses(e),s=(this.isOptimistic(e),this.extractMergeStrategy(e));return r=this.entityChangeTracker.mergeSaveUpdates(n,r,s,!1),this.setLoadingFalse(r)}saveUpsertOne(r,e){if(this.isOptimistic(e)){const n=this.guard.mustBeEntity(e),a=this.extractMergeStrategy(e);r=this.entityChangeTracker.trackUpsertOne(n,r,a),r=this.adapter.upsertOne(n,r)}return this.setLoadingTrue(r)}saveUpsertOneError(r,e){return this.setLoadingFalse(r)}saveUpsertOneSuccess(r,e){const n=this.guard.mustBeEntity(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.mergeSaveUpserts([n],r,a),this.setLoadingFalse(r)}saveUpsertMany(r,e){if(this.isOptimistic(e)){const n=this.guard.mustBeEntities(e),a=this.extractMergeStrategy(e);r=this.entityChangeTracker.trackUpsertMany(n,r,a),r=this.adapter.upsertMany(n,r)}return this.setLoadingTrue(r)}saveUpsertManyError(r,e){return this.setLoadingFalse(r)}saveUpsertManySuccess(r,e){const n=this.guard.mustBeEntities(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.mergeSaveUpserts(n,r,a),this.setLoadingFalse(r)}addAll(r,e){const n=this.guard.mustBeEntities(e);return{...this.adapter.setAll(n,r),loading:!1,loaded:!0,changeState:{}}}addMany(r,e){const n=this.guard.mustBeEntities(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.trackAddMany(n,r,a),this.adapter.addMany(n,r)}addOne(r,e){const n=this.guard.mustBeEntity(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.trackAddOne(n,r,a),this.adapter.addOne(n,r)}removeMany(r,e){const n=this.guard.mustBeKeys(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.trackDeleteMany(n,r,a),this.adapter.removeMany(n,r)}removeOne(r,e){const n=this.guard.mustBeKey(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.trackDeleteOne(n,r,a),this.adapter.removeOne(n,r)}removeAll(r,e){return{...this.adapter.removeAll(r),loaded:!1,loading:!1,changeState:{}}}updateMany(r,e){const n=this.guard.mustBeUpdates(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.trackUpdateMany(n,r,a),this.adapter.updateMany(n,r)}updateOne(r,e){const n=this.guard.mustBeUpdate(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.trackUpdateOne(n,r,a),this.adapter.updateOne(n,r)}upsertMany(r,e){const n=this.guard.mustBeEntities(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.trackUpsertMany(n,r,a),this.adapter.upsertMany(n,r)}upsertOne(r,e){const n=this.guard.mustBeEntity(e),a=this.extractMergeStrategy(e);return r=this.entityChangeTracker.trackUpsertOne(n,r,a),this.adapter.upsertOne(n,r)}commitAll(r){return this.entityChangeTracker.commitAll(r)}commitMany(r,e){return this.entityChangeTracker.commitMany(this.extractData(e),r)}commitOne(r,e){return this.entityChangeTracker.commitOne(this.extractData(e),r)}undoAll(r){return this.entityChangeTracker.undoAll(r)}undoMany(r,e){return this.entityChangeTracker.undoMany(this.extractData(e),r)}undoOne(r,e){return this.entityChangeTracker.undoOne(this.extractData(e),r)}setChangeState(r,e){const n=this.extractData(e);return r.changeState===n?r:{...r,changeState:n}}setCollection(r,e){const n=this.extractData(e);return r===n?r:n}setFilter(r,e){const n=this.extractData(e);return r.filter===n?r:{...r,filter:n}}setLoaded(r,e){const n=!0===this.extractData(e)||!1;return r.loaded===n?r:{...r,loaded:n}}setLoading(r,e){return this.setLoadingFlag(r,this.extractData(e))}setLoadingFalse(r){return this.setLoadingFlag(r,!1)}setLoadingTrue(r){return this.setLoadingFlag(r,!0)}setLoadingFlag(r,e){return r.loading===(e=!0===e)?r:{...r,loading:e}}extractData(r){return r.payload&&r.payload.data}extractMergeStrategy(r){return this.isChangeTracking?r.payload&&r.payload.mergeStrategy:yi.IgnoreChanges}isOptimistic(r){return r.payload&&!0===r.payload.isOptimistic}}let Ko=(()=>{class t{constructor(e){this.entityDefinitionService=e}create(e){const n=this.entityDefinitionService.getDefinition(e);return new Wo(e,n).methods}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(pr))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),hs=(()=>{class t{constructor(e){this.methodsFactory=e}create(e){const n=this.methodsFactory.create(e);return function(s,l){const c=n[l.payload.entityOp];return c?c(s,l):s}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ko))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Mc=(()=>{class t{constructor(e,n){this.entityCollectionReducerFactory=e,this.entityCollectionReducers={},this.entityCollectionMetaReducer=Et.qC.apply(null,n||[])}getOrCreateReducer(e){let n=this.entityCollectionReducers[e];return n||(n=this.entityCollectionReducerFactory.create(e),n=this.registerReducer(e,n),this.entityCollectionReducers[e]=n),n}registerReducer(e,n){return n=this.entityCollectionMetaReducer(n),this.entityCollectionReducers[e.trim()]=n}registerReducers(e){(e?Object.keys(e):[]).forEach(a=>this.registerReducer(a,e[a]))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(hs),o.\u0275\u0275inject(Wf,8))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),sh=(()=>{class t{constructor(e,n,a){this.entityCollectionCreator=e,this.entityCollectionReducerRegistry=n,this.logger=a}create(){return function e(n={},a){switch(a.type){case si.CLEAR_COLLECTIONS:return this.clearCollectionsReducer(n,a);case si.LOAD_COLLECTIONS:return this.loadCollectionsReducer(n,a);case si.MERGE_QUERY_SET:return this.mergeQuerySetReducer(n,a);case si.SAVE_ENTITIES:return this.saveEntitiesReducer(n,a);case si.SAVE_ENTITIES_CANCEL:return this.saveEntitiesCancelReducer(n,a);case si.SAVE_ENTITIES_ERROR:return this.saveEntitiesErrorReducer(n,a);case si.SAVE_ENTITIES_SUCCESS:return this.saveEntitiesSuccessReducer(n,a);case si.SET_ENTITY_CACHE:return a.payload.cache}const s=a.payload;return s&&s.entityName&&s.entityOp&&!s.error?this.applyCollectionReducer(n,a):n}.bind(this)}clearCollectionsReducer(e,n){let{collections:a}=n.payload;const l=Tt.REMOVE_ALL;return a||(a=Object.keys(e)),a.reduce((c,f)=>this.applyCollectionReducer(c,{type:`[${f}] ${n.type}`,payload:{entityName:f,entityOp:l}}),e)}loadCollectionsReducer(e,n){const{collections:a}=n.payload,l=Tt.ADD_ALL;return Object.keys(a).reduce((f,h)=>this.applyCollectionReducer(f,{type:`[${h}] ${n.type}`,payload:{entityName:h,entityOp:l,data:a[h]}}),e)}mergeQuerySetReducer(e,n){let{mergeStrategy:a,querySet:s}=n.payload;a=null===a?yi.PreserveChanges:a;const c=Tt.QUERY_MANY_SUCCESS;return Object.keys(s).reduce((h,g)=>this.applyCollectionReducer(h,{type:`[${g}] ${n.type}`,payload:{entityName:g,entityOp:c,data:s[g],mergeStrategy:a}}),e)}saveEntitiesReducer(e,n){const{changeSet:a,correlationId:s,isOptimistic:l,mergeStrategy:c,tag:f}=n.payload;try{a.changes.forEach(g=>{const I=g.entityName,B={entityName:I,entityOp:h(g),data:g.entities,correlationId:s,isOptimistic:l,mergeStrategy:c,tag:f},V={type:`[${I}] ${n.type}`,payload:B};if(e=this.applyCollectionReducer(e,V),V.payload.error)throw V.payload.error})}catch(g){n.payload.error=g}return e;function h(g){switch(g.op){case hr.Add:return Tt.SAVE_ADD_MANY;case hr.Delete:return Tt.SAVE_DELETE_MANY;case hr.Update:return Tt.SAVE_UPDATE_MANY;case hr.Upsert:return Tt.SAVE_UPSERT_MANY}}}saveEntitiesCancelReducer(e,n){return this.clearLoadingFlags(e,n.payload.entityNames||[])}saveEntitiesErrorReducer(e,n){const l=n.payload.originalAction.payload.changeSet.changes.map(c=>c.entityName);return this.clearLoadingFlags(e,l)}saveEntitiesSuccessReducer(e,n){const{changeSet:a,correlationId:s,isOptimistic:l,mergeStrategy:c,tag:f}=n.payload;return a.changes.forEach(g=>{const I=g.entityName,B={entityName:I,entityOp:h(g),data:g.entities,correlationId:s,isOptimistic:l,mergeStrategy:c,tag:f};e=this.applyCollectionReducer(e,{type:`[${I}] ${n.type}`,payload:B})}),e;function h(g){switch(g.op){case hr.Add:return Tt.SAVE_ADD_MANY_SUCCESS;case hr.Delete:return Tt.SAVE_DELETE_MANY_SUCCESS;case hr.Update:return Tt.SAVE_UPDATE_MANY_SUCCESS;case hr.Upsert:return Tt.SAVE_UPSERT_MANY_SUCCESS}}}applyCollectionReducer(e={},n){const a=n.payload.entityName,s=e[a],l=this.entityCollectionReducerRegistry.getOrCreateReducer(a);let c;try{c=l(s||this.entityCollectionCreator.create(a),n)}catch(f){this.logger.error(f),n.payload.error=f}return n.payload.error||s===c?e:{...e,[a]:c}}clearLoadingFlags(e,n){let a=!1;return n.forEach(s=>{const l=e[s];l.loading&&(a||(e={...e},a=!0),e[s]={...l,loading:!1})}),e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Oc),o.\u0275\u0275inject(Mc),o.\u0275\u0275inject(Ar))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Wu=(()=>{class t{error(e,n){e&&(n?console.error(e,n):console.error(e))}log(e,n){e&&(n?console.log(e,n):console.log(e))}warn(e,n){e&&(n?console.warn(e,n):console.warn(e))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Ku=["equipment","information","money","series"];let Yu=(()=>{class t{constructor(e){this.pluralNames={},e&&e.forEach(n=>this.registerPluralNames(n))}pluralize(e){return this.pluralNames[e]||(Ku.indexOf(e.toLowerCase())>=0?e:/[aeiou]y$/.test(e)?e+"s":e.endsWith("y")?e.substr(0,e.length-1)+"ies":/[s|ss|sh|ch|x|z]$/.test(e)?e+"es":e+"s")}registerPluralNames(e){this.pluralNames={...this.pluralNames,...e||{}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Vu,8))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),or=(()=>{class t{constructor(e,n,a,s,l,c){this.reducerManager=e,this.injector=a,this.entityCacheName=s,this.initialState=l,this.metaReducers=c;const f=s||Fl;l="function"==typeof l?l():l;const h=(c||[]).map(g=>g instanceof o.InjectionToken?a.get(g):g);this.entityCacheFeature={key:f,reducers:n.create(),reducerFactory:Et.UY,initialState:l||{},metaReducers:h},e.addFeature(this.entityCacheFeature)}static forRoot(e){return{ngModule:t,providers:[{provide:Dc,useValue:e.entityCacheMetaReducers?e.entityCacheMetaReducers:[]},{provide:Wf,useValue:e.entityCollectionMetaReducers?e.entityCollectionMetaReducers:[]},{provide:Vu,multi:!0,useValue:e.pluralNames?e.pluralNames:{}}]}}ngOnDestroy(){this.reducerManager.removeFeature(this.entityCacheFeature)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Et.PB),o.\u0275\u0275inject(sh),o.\u0275\u0275inject(o.Injector),o.\u0275\u0275inject(Xf,8),o.\u0275\u0275inject(Im,8),o.\u0275\u0275inject(Dc,8))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[Hu,Pl,Ma,_y,sh,Pm,Oc,hs,Ko,Mc,rh,oh,pr,Yf,nh,ih,Dm,{provide:Xf,useValue:Fl},{provide:li,useClass:Xu},{provide:Ar,useClass:Wu}],imports:[[Et.Aw]]}),t})(),Qu=(()=>{class t{constructor(e,n,a){this.effectSources=e,this.addEffects(n),this.addEffects(a)}static forRoot(e){return{ngModule:t,providers:[{provide:Vf,multi:!0,useValue:e.entityMetadata?e.entityMetadata:[]},{provide:Dc,useValue:e.entityCacheMetaReducers?e.entityCacheMetaReducers:[]},{provide:Wf,useValue:e.entityCollectionMetaReducers?e.entityCollectionMetaReducers:[]},{provide:Vu,multi:!0,useValue:e.pluralNames?e.pluralNames:{}}]}}addEffects(e){this.effectSources.addEffects(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(qo),o.\u0275\u0275inject(Jf),o.\u0275\u0275inject(Zf))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[zf,Gf,Hr,Jf,Zf,{provide:Nf,useClass:Gu},{provide:$f,useClass:Hf},{provide:Il,useClass:Yu}],imports:[[or,Xo]]}),t})();var ar=(()=>{return(t=ar||(ar={})).Login="[Auth] Login",t.Logout="[Auth] Logout",t.CompleteAuthentication="[Auth] CompleteAuthentication",t.SetUser="[Auth] SetUser",ar;var t})();class Gs{constructor(){this.type=ar.Login}}class Rl{constructor(){this.type=ar.Logout}}class $s{constructor(){this.type=ar.CompleteAuthentication}}class Dl{constructor(r){this.payload=r,this.type=ar.SetUser}}var Ol=Object.freeze({__proto__:null,get AuthActionTypes(){return ar},Login:Gs,Logout:Rl,CompleteAuthentication:$s,SetUser:Dl,fromAuthActions:{Login:Gs,Logout:Rl,CompleteAuthentication:$s,SetUser:Dl}});const Lc={user:void 0,cookies:new Map};function Ju(t=Lc,r){switch(r.type){case ar.SetUser:t={...t,user:r.payload};break;case ar.Logout:t={...t,user:void 0}}return t}const Zu=(0,Et.ZF)("auth"),ps={getUser:(0,Et.P1)(Zu,t=>t.user)};let kr=(()=>{class t{constructor(e){this.store=e,this.getUser$=this.store.pipe((0,Et.Ys)(ps.getUser)),this.token$=this.store.pipe((0,Et.Ys)(ps.getUser),(0,ye.U)(n=>n?`${n.token_type} ${n.access_token}`:void 0)),this.idToken$=this.store.pipe((0,Et.Ys)(ps.getUser),(0,ye.U)(n=>n?`${n.token_type} ${n.id_token}`:void 0))}login(){this.store.dispatch(new Gs)}logout(){this.store.dispatch(new Rl)}setUser(e){this.store.dispatch(new Dl(e))}completeAuthentication(){this.store.dispatch(new $s)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Et.yh))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const lh={PublicUserProfile:{entityName:"PublicUserProfile"}};let td=(()=>{class t{constructor(e,n,a,s){this.authFacade=e,this.router=n,this.route=a,this.platformId=s}ngOnInit(){var e=this;return ku(function*(){e.authFacade.completeAuthentication(),e.router.navigate(["/pages/create-panel-page"],{queryParams:{cacheBuster:ai()}})})()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(kr),o.\u0275\u0275directiveInject(zn.Router),o.\u0275\u0275directiveInject(zn.ActivatedRoute),o.\u0275\u0275directiveInject(o.PLATFORM_ID))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-auth-callback"]],decls:2,vars:0,template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"auth-callback works!"),o.\u0275\u0275elementEnd())},styles:[""]}),t})(),qr=(()=>{class t{constructor(e){e.registerMetadataMap(lh)}static forRoot(){return{ngModule:t,providers:[kr]}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(pr))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,Et.Aw.forFeature("auth",Ju)]]}),t})(),Xs=(()=>{class t{constructor(e,n){this.authFacade=e,this.router=n}intercept(e,n){return n.handle(e).pipe((0,ee.b)({error:a=>{}}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(kr),o.\u0275\u0275inject(zn.Router))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();var Ir=S(7478),Mm=S(464),ms=S(2578);const by=new o.InjectionToken("REQUEST");new o.InjectionToken("RESPONSE");var Ke=S(2673);class Ba{constructor(r){r&&(this.authority=r.authority,this.client_id=r.client_id,this.redirect_uri=r.redirect_uri,this.silent_redirect_uri=r.silent_redirect_uri,this.response_type=r.response_type,this.scope=r.scope,this.filterProtocolClaims=r.filterProtocolClaims,this.loadUserInfo=r.loadUserInfo,this.automaticSilentRenew=r.automaticSilentRenew,this.metadata={...r.metadata},this.userStore=r.userStore?r.userStore:void 0,this.stateStore=r.userStore?r.stateStore:void 0)}}const nd=(0,k.Cb)("auth");let id=(()=>{class t{constructor(e,n,a){this.clientSettings=e,this.platformId=n,this.transferState=a,this.data={},this.isBrowser=(0,x.isPlatformBrowser)(this.platformId),this.cookieMap={oa:"access_token",oi:"id_token",or:"refresh_token",os:"scope",oe:"expires_at",op:"profile"},this.tokenKey=`oidc.user:${this.clientSettings.authority}:${this.clientSettings.client_id}`}set request(e){this.req=e}init(){if(this.isBrowser)if(sessionStorage.getItem(this.tokenKey))this.setItem(this.tokenKey,sessionStorage.getItem(this.tokenKey));else if(this.transferState.hasKey(nd)){const e=this.transferState.get(nd,void 0);e&&this.setItem(this.tokenKey,e)}else for(let e=0;e<sessionStorage.length;e++){const n=sessionStorage.key(e);this.setItem(n,sessionStorage.getItem(n))}else{const e={token_type:"Bearer"};let n;Object.getOwnPropertyNames(this.cookieMap).forEach(a=>{let s=this.getCookie(a);s&&""!==s&&(s=this.translateFromCookieValue(a,s),"oe"===a?n=s:e[this.cookieMap[a]]=s)}),e.access_token&&(this.data[this.tokenKey]=JSON.stringify(e),this.transferState.set(nd,JSON.stringify({...e,expires_at:n})))}}getItem(e){return this.data[e]}setItem(e,n){if(e===this.tokenKey){const a=JSON.parse(n);Object.getOwnPropertyNames(this.cookieMap).forEach(s=>{this.setCookie(s,this.translateCookieValue(s,a[this.cookieMap[s]]))})}this.isBrowser&&sessionStorage.setItem(e,n),this.data[e]=n}removeItem(e){this.removeCookie(e),this.isBrowser&&sessionStorage.removeItem(e),delete this.data[e]}get length(){return Object.getOwnPropertyNames(this.data).length}key(e){return console.log("index()"),Object.getOwnPropertyNames(this.data)[e]}getCookie(e){return this.isBrowser?Ir.get(e):this.req?this.req.cookies[e]??"":void 0}setCookie(e,n){this.isBrowser&&Ir.set(e,n)}removeCookie(e){this.isBrowser&&Ir.remove(e)}translateCookieValue(e,n){switch(e){case"os":return n.split(" ").join("|");case"oe":return`${n}`;case"op":return JSON.stringify(n);default:return n}}translateFromCookieValue(e,n){switch(e){case"os":return n.split("|").join(" ");case"oe":return(0,Mm.He)(n);case"op":return JSON.parse(n);default:return n}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ba),o.\u0275\u0275inject(Object),o.\u0275\u0275inject(k.ki))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Lm=(t,r)=>new ms.UserManager(new Ba({...t,stateStore:new ms.WebStorageStateStore({store:r}),userStore:new ms.WebStorageStateStore({store:r})})),rd=(t,r,e)=>()=>new Promise(n=>{t.getUser().then(a=>{a?(r.setUser(a),setTimeout(()=>n())):n()})}),wy=(t,r,e,n)=>{const a=new id(t,r,n);if((0,x.isPlatformServer)(r))try{a.request=e.get(by)}catch{}return a.init(),a};let Sy=(()=>{class t{constructor(e,n,a){this.actions$=e,this.userManager=n,this.entityActionFactory=a,this.login$=Br(()=>this.actions$.pipe(so(Ol.AuthActionTypes.Login),(0,ee.b)(()=>{this.userManager.signinRedirect()})),{dispatch:!1}),this.logout$=Br(()=>this.actions$.pipe(so(Ol.AuthActionTypes.Logout),(0,ee.b)(()=>{this.userManager.signoutRedirect()})),{dispatch:!1}),this.completeAuthentication$=Br(()=>this.actions$.pipe(so(Ol.AuthActionTypes.CompleteAuthentication),(0,Ke.w)(()=>new y.y(s=>{this.userManager.signinRedirectCallback().then(l=>{s.next(new Ol.SetUser(l)),s.complete()})})))),this.loadCookies$=Br(()=>this.actions$.pipe(Pc("Cookie"),Vs([Tt.QUERY_ALL_SUCCESS]),(0,ee.b)(s=>console.log(s.payload.data)),(0,ee.b)(s=>{})),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ho),o.\u0275\u0275inject(ms.UserManager),o.\u0275\u0275inject(Ma))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Nm={Cookie:{entityName:"Cookie"}},od=new o.InjectionToken("ClientSettings");let dh=(()=>{class t{constructor(e){e.registerMetadataMap(Nm)}static forRoot(){return{ngModule:t,providers:[{provide:id,useFactory:wy,deps:[od,o.PLATFORM_ID,o.Injector,k.ki]},{provide:ms.UserManager,useFactory:Lm,deps:[od,id]},{provide:o.APP_INITIALIZER,useFactory:rd,multi:!0,deps:[ms.UserManager,kr,o.PLATFORM_ID]}]}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(pr))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[qr,Xo.forFeature([Sy])]]}),t})(),Ks=(()=>{class t{constructor(e){this.authFacade=e}intercept(e,n){return this.authFacade.idToken$.pipe((0,hn.q)(1),(0,Ra.b)(a=>{let s=e.headers;if(e.url.indexOf("/awproxy"),a&&-1===e.url.indexOf("github")&&-1===e.url.indexOf("cloudfront")&&-1===e.url.indexOf("cloudinary")&&-1===e.url.indexOf("carquery")&&-1===e.url.indexOf("gateway.marvel.com")&&-1===e.url.indexOf("hereapi.com")&&-1===e.url.indexOf(".es.")&&-1===e.url.indexOf(".s3.")&&-1===e.url.indexOf("/awproxy")){s=s.set("Authorization",a);const l=e.clone({headers:s});return n.handle(l)}{const l=e.clone({headers:s});return n.handle(l)}}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(kr))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();var Gt=S(5036),cn=S(1640),Ll=S(4423),Ey=S(5463);function ad(t,r){const e="object"==typeof r;return new Promise((n,a)=>{const s=new Ey.Hp({next:l=>{n(l),s.unsubscribe()},error:a,complete:()=>{e?n(r.defaultValue):a(new Ll.K)}});t.subscribe(s)})}let Ys=(()=>{class t{constructor(e,n){this.actions$=e,this.entityActionFactory=n,this.setUser=Br(()=>this.actions$.pipe(so(Ol.AuthActionTypes.SetUser),(0,ye.U)(()=>this.entityActionFactory.create("Cookie",Tt.QUERY_ALL)))),this.loadCookies$=Br(()=>this.actions$.pipe(Pc("Cookie"),Vs([Tt.QUERY_ALL_SUCCESS]),(0,ee.b)(a=>console.log(a.payload.data)),(0,ee.b)(a=>{a.payload.data.forEach(s=>Ir.set(s.name,s.value,{expires:new Date((new Date).getTime()+36e5)}))})),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ho),o.\u0275\u0275inject(Ma))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Ty=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[Xo.forFeature([Ys])]]}),t})();class Ay{constructor(r){r&&(this.identityPoolId=r.identityPoolId,this.region=r.region,this.userPoolId=r.userPoolId)}}const Nc=new o.InjectionToken("CognitoSettings");var ie=S(4929),fh=function(){function t(){this.onabort=null,this._aborted=!1,Object.defineProperty(this,"_aborted",{value:!1,writable:!0})}return Object.defineProperty(t.prototype,"aborted",{get:function(){return this._aborted},enumerable:!1,configurable:!0}),t.prototype.abort=function(){this._aborted=!0,this.onabort&&(this.onabort(this),this.onabort=null)},t}(),ky=function(){function t(){this.signal=new fh}return t.prototype.abort=function(){this.signal.abort()},t}(),Gi=function(){function t(r){this.method=r.method||"GET",this.hostname=r.hostname||"localhost",this.port=r.port,this.query=r.query||{},this.headers=r.headers||{},this.body=r.body,this.protocol=r.protocol?":"!==r.protocol.substr(-1)?r.protocol+":":r.protocol:"https:",this.path=r.path?"/"!==r.path.charAt(0)?"/"+r.path:r.path:"/"}return t.isInstance=function(r){return!!r&&("method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&"object"==typeof r.query&&"object"==typeof r.headers)},t.prototype.clone=function(){var r=new t((0,ie.pi)((0,ie.pi)({},this),{headers:(0,ie.pi)({},this.headers)}));return r.query&&(r.query=function Py(t){return Object.keys(t).reduce(function(r,e){var n,a=t[e];return(0,ie.pi)((0,ie.pi)({},r),((n={})[e]=Array.isArray(a)?(0,ie.ev)([],(0,ie.CR)(a)):a,n))},{})}(r.query)),r},t}(),Bc=function(){function t(r){this.statusCode=r.statusCode,this.headers=r.headers||{},this.body=r.body}return t.isInstance=function(r){return!!r&&("number"==typeof r.statusCode&&"object"==typeof r.headers)},t}(),vs=function(t){return"string"==typeof t&&0===t.indexOf("arn:")&&t.split(":").length>=6},ld=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,ph=/(\d+\.){3}\d+/,Um=/\.\./,cd=/\./,mh=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,Bl=/^s3(-external-1)?\.amazonaws\.com$/,gh="amazonaws.com",vh=function(t){var r=t.match(mh);return[r[4],t.replace(new RegExp("^"+r[0]),"")]},Fe=function(t,r){if(""===t)throw new Error("ARN region is empty");if(r.useFipsEndpoint){if(!r.allowFipsRegion)throw new Error("FIPS region is not supported");if(!xt(t,r.clientRegion))throw new Error("Client FIPS region "+r.clientRegion+" doesn't match region "+t+" in ARN")}if(!r.useArnRegion&&!xt(t,r.clientRegion||"")&&!xt(t,r.clientSigningRegion||""))throw new Error("Region in ARN is incompatible, got "+t+" but expected "+r.clientRegion)},We=function(t){if(["s3-external-1","aws-global"].includes(t))throw new Error("Client region "+t+" is not regional")},xt=function(t,r){return t===r},Ut=function(t,r){if(void 0===r&&(r={tlsCompatible:!0}),t.length>=64||!/^[a-z0-9][a-z0-9.-]*[a-z0-9]$/.test(t)||/(\d+\.){3}\d+/.test(t)||/[.-]{2}/.test(t)||(null==r?void 0:r.tlsCompatible)&&cd.test(t))throw new Error("Invalid DNS label "+t)},Un=function(t){if(t)throw new Error("Dualstack endpoint is not supported with Outpost or Multi-region Access Point ARN.")},pt=function(t){return function(t){if(t.isCustomEndpoint){if(t.dualstackEndpoint)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(t.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported with custom endpoint")}}(t),function(t){return"string"==typeof t.bucketName}(t)?ut(t):St(t)},ut=function(t){var r=t.accelerateEndpoint,e=void 0!==r&&r,a=t.baseHostname,s=t.bucketName,l=t.dualstackEndpoint,c=void 0!==l&&l,g=t.pathStyleEndpoint,I=void 0!==g&&g,B=t.tlsCompatible,V=void 0===B||B,ce=t.isCustomEndpoint,he=(0,ie.CR)(void 0!==ce&&ce?[t.clientRegion,a]:function(t){return Bl.test(t)?["us-east-1",gh]:vh(t)}(a),2),Se=he[0],Oe=he[1];return I||!function(t){return ld.test(t)&&!ph.test(t)&&!Um.test(t)}(s)||V&&cd.test(s)?{bucketEndpoint:!1,hostname:c?"s3.dualstack."+Se+"."+Oe:a}:(e?a="s3-accelerate"+(c?".dualstack":"")+"."+Oe:c&&(a="s3.dualstack."+Se+"."+Oe),{bucketEndpoint:!0,hostname:s+"."+a})},St=function(t){var e=t.baseHostname,n=t.clientRegion,a=t.isCustomEndpoint?e:function(t){return Bl.test(t)?[t.replace("."+gh,""),gh]:vh(t)}(e)[1],l=t.accelerateEndpoint,g=t.tlsCompatible,I=void 0===g||g,B=t.bucketName,V=t.clientPartition,ce=void 0===V?"aws":V;!function(t){if(t.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(t.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!t.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:t.pathStyleEndpoint,accelerateEndpoint:void 0!==l&&l,tlsCompatible:I});var Ie=B.service,he=B.partition,Se=B.accountId,Oe=B.region,Be=B.resource;(function(t){if("s3"!==t&&"s3-outposts"!==t&&"s3-object-lambda"!==t)throw new Error("Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component")})(Ie),function(t,r){if(t!==r.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+t+'" but expected "'+r.clientPartition+'"')}(he,{clientPartition:ce}),function(t){if(!/[0-9]{12}/.exec(t))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(Se);var et=function(t){var r=t.includes(":")?":":"/",e=(0,ie.CR)(t.split(r)),n=e[0],a=e.slice(1);if("accesspoint"===n){if(1!==a.length||""===a[0])throw new Error("Access Point ARN should have one resource accesspoint"+r+"{accesspointname}");return{accesspointName:a[0]}}if("outpost"===n){if(!a[0]||"accesspoint"!==a[1]||!a[2]||3!==a.length)throw new Error("Outpost ARN should have resource outpost"+r+"{outpostId}"+r+"accesspoint"+r+"{accesspointName}");var s=(0,ie.CR)(a,3);return{outpostId:s[0],accesspointName:s[2]}}throw new Error("ARN resource should begin with 'accesspoint"+r+"' or 'outpost"+r+"'")}(Be),at=et.accesspointName,ft=et.outpostId;return"s3-object-lambda"===Ie?Ot((0,ie.pi)((0,ie.pi)({},t),{tlsCompatible:I,bucketName:B,accesspointName:at,hostnameSuffix:a})):""===Oe?jt((0,ie.pi)((0,ie.pi)({},t),{clientRegion:n,mrapAlias:at,hostnameSuffix:a})):ft?Qt((0,ie.pi)((0,ie.pi)({},t),{clientRegion:n,outpostId:ft,accesspointName:at,hostnameSuffix:a})):un((0,ie.pi)((0,ie.pi)({},t),{clientRegion:n,accesspointName:at,hostnameSuffix:a}))},Ot=function(t){var r=t.dualstackEndpoint,e=void 0!==r&&r,n=t.fipsEndpoint,a=void 0!==n&&n,s=t.tlsCompatible,l=void 0===s||s,c=t.useArnRegion,f=t.clientRegion,h=t.clientSigningRegion,g=void 0===h?f:h,I=t.accesspointName,B=t.bucketName,V=t.hostnameSuffix,ce=B.accountId,Ie=B.region,he=B.service;We(f),Fe(Ie,{useArnRegion:c,clientRegion:f,clientSigningRegion:g,allowFipsRegion:!0,useFipsEndpoint:a}),Un(e);var Se=I+"-"+ce;return Ut(Se,{tlsCompatible:l}),{bucketEndpoint:!0,hostname:Se+"."+he+(a?"-fips":"")+"."+(c?Ie:f)+"."+V,signingRegion:c?Ie:g,signingService:he}},jt=function(t){var e=t.dualstackEndpoint,n=void 0!==e&&e,a=t.isCustomEndpoint,s=t.mrapAlias,l=t.hostnameSuffix;if(!0===t.disableMultiregionAccessPoints)throw new Error("SDK is attempting to use a MRAP ARN. Please enable to feature.");return function(t){try{t.split(".").forEach(function(r){Ut(r)})}catch{throw new Error('"'+t+'" is not a DNS compatible name.')}}(s),Un(n),{bucketEndpoint:!0,hostname:s+(a?"":".accesspoint.s3-global")+"."+l,signingRegion:"*"}},Qt=function(t){var r=t.useArnRegion,e=t.clientRegion,n=t.clientSigningRegion,a=void 0===n?e:n,s=t.bucketName,l=t.outpostId,c=t.dualstackEndpoint,f=void 0!==c&&c,h=t.fipsEndpoint,g=void 0!==h&&h,I=t.tlsCompatible,B=void 0===I||I,V=t.accesspointName,ce=t.isCustomEndpoint,Ie=t.hostnameSuffix;We(e),Fe(s.region,{useArnRegion:r,clientRegion:e,clientSigningRegion:a,useFipsEndpoint:g});var he=V+"-"+s.accountId;Ut(he,{tlsCompatible:B});var Se=r?s.region:e,Oe=r?s.region:a;return function(t){if("s3-outposts"!==t)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(s.service),Ut(l,{tlsCompatible:B}),Un(f),function(t){if(t)throw new Error("FIPS region is not supported with Outpost.")}(g),{bucketEndpoint:!0,hostname:he+"."+l+(ce?"":".s3-outposts."+Se)+"."+Ie,signingRegion:Oe,signingService:"s3-outposts"}},un=function(t){var r=t.useArnRegion,e=t.clientRegion,n=t.clientSigningRegion,a=void 0===n?e:n,s=t.bucketName,l=t.dualstackEndpoint,c=void 0!==l&&l,f=t.fipsEndpoint,h=void 0!==f&&f,g=t.tlsCompatible,I=void 0===g||g,B=t.accesspointName,V=t.isCustomEndpoint,ce=t.hostnameSuffix;We(e),Fe(s.region,{useArnRegion:r,clientRegion:e,clientSigningRegion:a,allowFipsRegion:!0,useFipsEndpoint:h});var Ie=B+"-"+s.accountId;Ut(Ie,{tlsCompatible:I});var he=r?s.region:e,Se=r?s.region:a;return function(t){if("s3"!==t)throw new Error("Expect 's3' in Accesspoint ARN service component")}(s.service),{bucketEndpoint:!0,hostname:Ie+(V?"":".s3-accesspoint"+(h?"-fips":"")+(c?".dualstack":"")+"."+he)+"."+ce,signingRegion:Se}},wi={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},bn=function(t){return{applyToStack:function(r){r.addRelativeTo(function(t){return function(r,e){return function(n){return(0,ie.mG)(void 0,void 0,void 0,function(){var a,s,l,c,f,h,g,I,B,V,ce,Ie,he,Se,Oe,Be,et,at,ft,Pt,Rt,on;return(0,ie.Jh)(this,function(an){switch(an.label){case 0:return a=n.input.Bucket,s=t.bucketEndpoint,Gi.isInstance(l=n.request)?t.bucketEndpoint?(l.hostname=a,[3,12]):[3,1]:[3,13];case 1:return vs(a)?(c=function(t){var r=t.split(":");if(r.length<6||"arn"!==r[0])throw new Error("Malformed ARN");var e=(0,ie.CR)(r);return{partition:e[1],service:e[2],region:e[3],accountId:e[4],resource:e.slice(5).join(":")}}(a),[4,t.region()]):[3,8];case 2:return Be=an.sent(),[4,t.useDualstackEndpoint()];case 3:return f=an.sent(),[4,t.useFipsEndpoint()];case 4:return h=an.sent(),[4,t.regionInfoProvider(Be,{useDualstackEndpoint:f,useFipsEndpoint:h})];case 5:return g=an.sent()||{},I=g.partition,V=void 0===(B=g.signingRegion)?Be:B,[4,t.useArnRegion()];case 6:return ce=an.sent(),Oe=pt,on={bucketName:c,baseHostname:l.hostname,accelerateEndpoint:t.useAccelerateEndpoint,dualstackEndpoint:f,fipsEndpoint:h,pathStyleEndpoint:t.forcePathStyle,tlsCompatible:"https:"===l.protocol,useArnRegion:ce,clientPartition:I,clientSigningRegion:V,clientRegion:Be,isCustomEndpoint:t.isCustomEndpoint},[4,t.disableMultiregionAccessPoints()];case 7:return Ie=Oe.apply(void 0,[(on.disableMultiregionAccessPoints=an.sent(),on)]),Pt=Ie.hostname,Rt=Ie.bucketEndpoint,Se=Ie.signingService,(he=Ie.signingRegion)&&he!==V&&(e.signing_region=he),Se&&"s3"!==Se&&(e.signing_service=Se),l.hostname=Pt,s=Rt,[3,12];case 8:return[4,t.region()];case 9:return Be=an.sent(),[4,t.useDualstackEndpoint()];case 10:return et=an.sent(),[4,t.useFipsEndpoint()];case 11:at=an.sent(),ft=pt({bucketName:a,clientRegion:Be,baseHostname:l.hostname,accelerateEndpoint:t.useAccelerateEndpoint,dualstackEndpoint:et,fipsEndpoint:at,pathStyleEndpoint:t.forcePathStyle,tlsCompatible:"https:"===l.protocol,isCustomEndpoint:t.isCustomEndpoint}),Rt=ft.bucketEndpoint,l.hostname=Pt=ft.hostname,s=Rt,an.label=12;case 12:s&&(l.path=l.path.replace(/^(\/)?[^\/]+/,""),""===l.path&&(l.path="/")),an.label=13;case 13:return[2,r((0,ie.pi)((0,ie.pi)({},n),{request:l}))]}})})}}}(t),wi)}}},Vm=function(t){return"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t)},Px=function(t){return void 0!==t&&"string"!=typeof t&&!ArrayBuffer.isView(t)&&!Vm(t)},Fx=function(t,r){var e=r.streamHasher,n=r.checksumAlgorithmFn,a=r.base64Encoder;return(0,ie.mG)(void 0,void 0,void 0,function(){var s,l;return(0,ie.Jh)(this,function(c){switch(c.label){case 0:return s=Px(t)?e(n,t):function(t,r){var e=new t;return e.update(r||""),e.digest()}(n,t),l=a,[4,s];case 1:return[2,l.apply(void 0,[c.sent()])]}})})},Pr=(()=>{return(t=Pr||(Pr={})).MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.SHA1="SHA1",t.SHA256="SHA256",Pr;var t})(),Dy=[Pr.CRC32,Pr.CRC32C,Pr.SHA1,Pr.SHA256],IA=[Pr.CRC32,Pr.CRC32C,Pr.SHA1,Pr.SHA256],Rx=function(t){return t===Pr.MD5?"content-md5":"x-amz-checksum-"+t.toLowerCase()},RA=S(2562),DA=S(5423),Dx=function(t,r){var e;return(e={},e[Pr.MD5]=r.md5,e[Pr.CRC32]=RA.AwsCrc32,e[Pr.CRC32C]=DA.AwsCrc32c,e[Pr.SHA1]=r.sha1,e[Pr.SHA256]=r.sha256,e)[t]},LA=function(t,r){return function(e){return function(n){return(0,ie.mG)(void 0,void 0,void 0,function(){var a,s,l,c,f,h,B,V,ce,Ie,he,Be,et,at,ft,Pt;return(0,ie.Jh)(this,function(Rt){switch(Rt.label){case 0:return Gi.isInstance(n.request)?(s=(a=n.request).body,l=a.headers,c=t.base64Encoder,f=t.streamHasher,B=function(t,r){var n=r.requestAlgorithmMember;if(!n||!t[n])return r.requestChecksumRequired?Pr.MD5:void 0;var a=t[n];if(!Dy.includes(a))throw new Error('The checksum algorithm "'+a+'" is not supported by the client. Select one of '+Dy+".");return a}(h=r.input,{requestChecksumRequired:r.requestChecksumRequired,requestAlgorithmMember:r.requestAlgorithmMember}),V=s,ce=l,B?(Ie=Rx(B),he=Dx(B,t),Px(s)?(V=(0,t.getAwsChunkedEncodingStream)(s,{base64Encoder:c,bodyLengthChecker:t.bodyLengthChecker,checksumLocationName:Ie,checksumAlgorithmFn:he,streamHasher:f}),delete(ce=(0,ie.pi)((0,ie.pi)({},l),{"content-encoding":"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":l["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Ie}))["content-length"],[3,3]):[3,1]):[3,3]):[2,e(n)];case 1:return function(t,r){var e,n,a=t.toLowerCase();try{for(var s=(0,ie.XA)(Object.keys(r)),l=s.next();!l.done;l=s.next())if(a===l.value.toLowerCase())return!0}catch(f){e={error:f}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return!1}(Ie,l)?[3,3]:[4,Fx(s,{streamHasher:f,checksumAlgorithmFn:he,base64Encoder:c})];case 2:Be=Rt.sent(),ce=(0,ie.pi)((0,ie.pi)({},l),((Pt={})[Ie]=Be,Pt)),Rt.label=3;case 3:return[4,e((0,ie.pi)((0,ie.pi)({},n),{request:(0,ie.pi)((0,ie.pi)({},a),{headers:ce,body:V})}))];case 4:return et=Rt.sent(),ft=r.responseAlgorithms,(at=r.requestValidationModeMember)&&"ENABLED"===h[at]&&function(t,r){var e=r.config,n=r.responseAlgorithms;(0,ie.mG)(void 0,void 0,void 0,function(){var a,s,l,c,f,h,g,I,B,Ie,he,Se,Oe;return(0,ie.Jh)(this,function(Be){switch(Be.label){case 0:a=function(t){var r,e;void 0===t&&(t=[]);var n=[];try{for(var a=(0,ie.XA)(IA),s=a.next();!s.done;s=a.next()){var l=s.value;!t.includes(l)||!Dy.includes(l)||n.push(l)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return n}(n),s=t.body,l=t.headers,Be.label=1;case 1:Be.trys.push([1,6,7,8]),c=(0,ie.XA)(a),f=c.next(),Be.label=2;case 2:return f.done?[3,5]:(g=Rx(h=f.value),(I=l[g])?(B=Dx(h,e),[4,Fx(s,{streamHasher:e.streamHasher,checksumAlgorithmFn:B,base64Encoder:e.base64Encoder})]):[3,4]);case 3:if((Ie=Be.sent())===I)return[3,5];throw new Error('Checksum mismatch: expected "'+Ie+'" but received "'+I+'" in response header "'+g+'".');case 4:return f=c.next(),[3,2];case 5:return[3,8];case 6:return he=Be.sent(),Se={error:he},[3,8];case 7:try{f&&!f.done&&(Oe=c.return)&&Oe.call(c)}finally{if(Se)throw Se.error}return[7];case 8:return[2]}})})}(et.response,{config:t,responseAlgorithms:ft}),[2,et]}})})}}},NA={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Oy=function(t,r){return{applyToStack:function(e){e.add(LA(t,r),NA)}}},zA={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},UA={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function jc(t,r,e){return{applyToStack:function(n){n.add(function(t,r){return function(e,n){return function(a){return(0,ie.mG)(void 0,void 0,void 0,function(){var s,l,c;return(0,ie.Jh)(this,function(f){switch(f.label){case 0:return[4,e(a)];case 1:s=f.sent().response,f.label=2;case 2:return f.trys.push([2,4,,5]),[4,r(s,t)];case 3:return l=f.sent(),[2,{response:s,output:l}];case 4:throw c=f.sent(),Object.assign(c,{$response:s});case 5:return[2]}})})}}}(t,e),zA),n.add(function(t,r){return function(e,n){return function(a){return(0,ie.mG)(void 0,void 0,void 0,function(){var s;return(0,ie.Jh)(this,function(l){switch(l.label){case 0:return[4,r(a.input,t)];case 1:return s=l.sent(),[2,e((0,ie.pi)((0,ie.pi)({},a),{request:s}))]}})})}}}(t,r),UA)}}}var GA={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Gm=function(t){return{applyToStack:function(r){r.add(function VA(t){var r=this;return function(e){return function(n){return(0,ie.mG)(r,void 0,void 0,function(){var a,s,l,c,f,h,g,I,B,V,ce,Ie,he,Se,Oe,Be,et;return(0,ie.Jh)(this,function(at){switch(at.label){case 0:a=(0,ie.pi)({},n.input),s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],at.label=1;case 1:at.trys.push([1,6,7,8]),l=(0,ie.XA)(s),c=l.next(),at.label=2;case 2:return c.done?[3,5]:(h=a[(f=c.value).target])?(g=ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):"string"==typeof h?t.utf8Decoder(h):new Uint8Array(h),I=t.base64Encoder(g),(B=new t.md5).update(g),V=[(0,ie.pi)({},a)],(et={})[f.target]=I,ce=f.hash,he=(Ie=t).base64Encoder,[4,B.digest()]):[3,4];case 3:a=ie.pi.apply(void 0,V.concat([(et[ce]=he.apply(Ie,[at.sent()]),et)])),at.label=4;case 4:return c=l.next(),[3,2];case 5:return[3,8];case 6:return Se=at.sent(),Oe={error:Se},[3,8];case 7:try{c&&!c.done&&(Be=l.return)&&Be.call(l)}finally{if(Oe)throw Oe.error}return[7];case 8:return[2,e((0,ie.pi)((0,ie.pi)({},n),{input:a}))]}})})}}}(t),GA)}}},$m=function(){var t=[],r=[],e=new Set,l=function(g){return t.forEach(function(I){g.add(I.middleware,(0,ie.pi)({},I))}),r.forEach(function(I){g.addRelativeTo(I.middleware,(0,ie.pi)({},I))}),g},c=function(g){var I=[];return g.before.forEach(function(B){0===B.before.length&&0===B.after.length?I.push(B):I.push.apply(I,(0,ie.ev)([],(0,ie.CR)(c(B))))}),I.push(g),g.after.reverse().forEach(function(B){0===B.before.length&&0===B.after.length?I.push(B):I.push.apply(I,(0,ie.ev)([],(0,ie.CR)(c(B))))}),I},h={add:function(g,I){void 0===I&&(I={});var B=I.name,V=I.override,ce=(0,ie.pi)({step:"initialize",priority:"normal",middleware:g},I);if(B){if(e.has(B)){if(!V)throw new Error("Duplicate middleware name '"+B+"'");var Ie=t.findIndex(function(Se){return Se.name===B}),he=t[Ie];if(he.step!==ce.step||he.priority!==ce.priority)throw new Error('"'+B+'" middleware with '+he.priority+" priority in "+he.step+" step cannot be overridden by same-name middleware with "+ce.priority+" priority in "+ce.step+" step.");t.splice(Ie,1)}e.add(B)}t.push(ce)},addRelativeTo:function(g,I){var B=I.name,V=I.override,ce=(0,ie.pi)({middleware:g},I);if(B){if(e.has(B)){if(!V)throw new Error("Duplicate middleware name '"+B+"'");var Ie=r.findIndex(function(Se){return Se.name===B}),he=r[Ie];if(he.toMiddleware!==ce.toMiddleware||he.relation!==ce.relation)throw new Error('"'+B+'" middleware '+he.relation+' "'+he.toMiddleware+'" middleware cannot be overridden by same-name middleware '+ce.relation+' "'+ce.toMiddleware+'" middleware.');r.splice(Ie,1)}e.add(B)}r.push(ce)},clone:function(){return l($m())},use:function(g){g.applyToStack(h)},remove:function(g){return"string"==typeof g?function(g){var I=!1,B=function(V){return!V.name||V.name!==g||(I=!0,e.delete(g),!1)};return t=t.filter(B),r=r.filter(B),I}(g):function(g){var I=!1,B=function(V){return V.middleware!==g||(I=!0,V.name&&e.delete(V.name),!1)};return t=t.filter(B),r=r.filter(B),I}(g)},removeByTag:function(g){var I=!1,B=function(V){var ce=V.tags,Ie=V.name;return!ce||!ce.includes(g)||(Ie&&e.delete(Ie),I=!0,!1)};return t=t.filter(B),r=r.filter(B),I},concat:function(g){var I=l($m());return I.use(g),I},applyToStack:l,resolve:function(g,I){var B,V;try{for(var ce=(0,ie.XA)(function(){var g=[],I=[],B={};t.forEach(function(ce){var Ie=(0,ie.pi)((0,ie.pi)({},ce),{before:[],after:[]});Ie.name&&(B[Ie.name]=Ie),g.push(Ie)}),r.forEach(function(ce){var Ie=(0,ie.pi)((0,ie.pi)({},ce),{before:[],after:[]});Ie.name&&(B[Ie.name]=Ie),I.push(Ie)}),I.forEach(function(ce){if(ce.toMiddleware){var Ie=B[ce.toMiddleware];if(void 0===Ie)throw new Error(ce.toMiddleware+" is not found when adding "+(ce.name||"anonymous")+" middleware "+ce.relation+" "+ce.toMiddleware);"after"===ce.relation&&Ie.after.push(ce),"before"===ce.relation&&Ie.before.push(ce)}});var V=function(g){return g.sort(function(I,B){return Ox[B.step]-Ox[I.step]||Mx[B.priority||"normal"]-Mx[I.priority||"normal"]})}(g).map(c).reduce(function(ce,Ie){return ce.push.apply(ce,(0,ie.ev)([],(0,ie.CR)(Ie))),ce},[]);return V.map(function(ce){return ce.middleware})}().reverse()),Ie=ce.next();!Ie.done;Ie=ce.next())g=(0,Ie.value)(g,I)}catch(Se){B={error:Se}}finally{try{Ie&&!Ie.done&&(V=ce.return)&&V.call(ce)}finally{if(B)throw B.error}}return g}};return h},Ox={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Mx={high:3,normal:2,low:1},Lx=function(){function t(r){this.middlewareStack=$m(),this.config=r}return t.prototype.send=function(r,e,n){var s="function"==typeof e?e:n,l=r.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof e?e:void 0);if(!s)return l(r).then(function(c){return c.output});l(r).then(function(c){return s(null,c.output)},function(c){return s(c)}).catch(function(){})},t.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},t}(),zc=function t(){this.middlewareStack=$m()},Io="***SensitiveInformation***",Hm=function(t){switch(t){case"true":return!0;case"false":return!1;default:throw new Error('Unable to parse boolean value "'+t+'"')}},yh=function(t){if(null!=t){if("number"==typeof t)return t;throw new TypeError("Expected number, got "+typeof t)}},$A=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),Ny=function(t,r){var e=function(t){if(null!=t){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError("Expected integer, got "+typeof t)}}(t);if(void 0!==e&&HA(e,r)!==e)throw new TypeError("Expected "+r+"-bit integer, got "+t);return e},HA=function(t,r){switch(r){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},qm=function(t,r){if(null==t)throw r?new TypeError("Expected a non-null value for "+r):new TypeError("Expected a non-null value");return t},By=function(t){if(null!=t){if("object"==typeof t&&!Array.isArray(t))return t;throw new TypeError("Expected object, got "+typeof t)}},Si=function(t){if(null!=t){if("string"==typeof t)return t;throw new TypeError("Expected string, got "+typeof t)}},WA=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,dd=function(t){var r=t.match(WA);if(null===r||r[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},jy=function(t){return function(t){return Ny(t,16)}("string"==typeof t?dd(t):t)},YA=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],zy=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ux(t){var r=t.getUTCFullYear(),e=t.getUTCMonth(),n=t.getUTCDay(),a=t.getUTCDate(),s=t.getUTCHours(),l=t.getUTCMinutes(),c=t.getUTCSeconds();return YA[n]+", "+(a<10?"0"+a:""+a)+" "+zy[e]+" "+r+" "+(s<10?"0"+s:""+s)+":"+(l<10?"0"+l:""+l)+":"+(c<10?"0"+c:""+c)+" GMT"}var JA=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),ZA=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),ek=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),nk=function(t){if(null!=t){var r;if("number"==typeof t)r=t;else{if("string"!=typeof t)throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");r=function(t){return yh("string"==typeof t?dd(t):t)}(t)}if(Number.isNaN(r)||r===1/0||r===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(1e3*r))}},Xm=function(t,r,e,n){var a=r-1;return sk(t,a,e),new Date(Date.UTC(t,a,e,jl(n.hours,"hour",0,23),jl(n.minutes,"minute",0,59),jl(n.seconds,"seconds",0,60),ck(n.fractionalMilliseconds)))},Uy=function(t){var r=zy.indexOf(t);if(r<0)throw new TypeError("Invalid month: "+t);return r+1},ak=[31,28,31,30,31,30,31,31,30,31,30,31],sk=function(t,r,e){var n=ak[r];if(1===r&&lk(t)&&(n=29),e>n)throw new TypeError("Invalid day for "+zy[r]+" in "+t+": "+e)},lk=function(t){return t%4==0&&(t%100!=0||t%400==0)},jl=function(t,r,e,n){var a=function(t){return function(t){return Ny(t,8)}("string"==typeof t?dd(t):t)}(_h(t));if(a<e||a>n)throw new TypeError(r+" must be between "+e+" and "+n+", inclusive");return a},ck=function(t){return null==t?0:1e3*function(t){return function(t){var r=yh(t);if(void 0!==r&&!Number.isNaN(r)&&r!==1/0&&r!==-1/0&&Math.abs(r)>$A)throw new TypeError("Expected 32-bit float, got "+t);return r}("string"==typeof t?dd(t):t)}("0."+t)},_h=function(t){for(var r=0;r<t.length-1&&"0"===t.charAt(r);)r++;return 0===r?t:t.slice(r)},Vx=function(t){switch(t){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Gx=function(t){function r(e){var n=t.call(this,e.message)||this;return Object.setPrototypeOf(n,r.prototype),n.name=e.name,n.$fault=e.$fault,n.$metadata=e.$metadata,n}return(0,ie.ZT)(r,t),r}(Error),Xr=function(t,r){return void 0===r&&(r={}),Object.entries(r).filter(function(n){return void 0!==(0,ie.CR)(n,2)[1]}).forEach(function(n){var a=(0,ie.CR)(n,2),s=a[0];(null==t[s]||""===t[s])&&(t[s]=a[1])}),t.message=t.message||t.Message||"UnknownError",delete t.Message,t};function _s(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(r){return"%"+r.charCodeAt(0).toString(16).toUpperCase()})}var $x=function(t){var r="#text";for(var e in t)t.hasOwnProperty(e)&&void 0!==t[e][r]?t[e]=t[e][r]:"object"==typeof t[e]&&null!==t[e]&&(t[e]=$x(t[e]));return t},Wm=function(){var t=Object.getPrototypeOf(this).constructor,r=Function.bind.apply(String,(0,ie.ev)([null],(0,ie.CR)(arguments))),e=new r;return Object.setPrototypeOf(e,t.prototype),e};Wm.prototype=Object.create(String.prototype,{constructor:{value:Wm,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Wm,String),function(t){function r(){return null!==t&&t.apply(this,arguments)||this}(0,ie.ZT)(r,t),r.prototype.deserializeJSON=function(){return JSON.parse(t.prototype.toString.call(this))},r.prototype.toJSON=function(){return t.prototype.toString.call(this)},r.fromObject=function(e){return e instanceof r?e:new r(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(Wm);var Po=function(t){function r(e){var n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Gx),Km=(function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"NoSuchUpload",$fault:"client"},e))||this;return n.name="NoSuchUpload",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Po),(()=>((Km||(Km={})).filterSensitiveLog=function(r){return(0,ie.pi)((0,ie.pi)({},r),r.SSEKMSKeyId&&{SSEKMSKeyId:Io})},Km))()),Ym=(()=>((Ym||(Ym={})).filterSensitiveLog=function(r){return(0,ie.pi)((0,ie.pi)({},r),r.SSECustomerKey&&{SSECustomerKey:Io})},Ym))(),Qm=(function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"ObjectNotInActiveTierError",$fault:"client"},e))||this;return n.name="ObjectNotInActiveTierError",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Po),function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"BucketAlreadyExists",$fault:"client"},e))||this;return n.name="BucketAlreadyExists",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Po),function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"BucketAlreadyOwnedByYou",$fault:"client"},e))||this;return n.name="BucketAlreadyOwnedByYou",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Po),(()=>((Qm||(Qm={})).filterSensitiveLog=function(r){return(0,ie.pi)((0,ie.pi)((0,ie.pi)({},r),r.SSEKMSKeyId&&{SSEKMSKeyId:Io}),r.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Io})},Qm))()),Jm=(()=>((Jm||(Jm={})).filterSensitiveLog=function(r){return(0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)({},r),r.SSECustomerKey&&{SSECustomerKey:Io}),r.SSEKMSKeyId&&{SSEKMSKeyId:Io}),r.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Io})},Jm))(),Zm=(function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"InvalidObjectState",$fault:"client"},e))||this;return n.name="InvalidObjectState",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n.StorageClass=e.StorageClass,n.AccessTier=e.AccessTier,n},t)}(Po),function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"NoSuchKey",$fault:"client"},e))||this;return n.name="NoSuchKey",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Po),function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"NotFound",$fault:"client"},e))||this;return n.name="NotFound",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Po),function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"NoSuchBucket",$fault:"client"},e))||this;return n.name="NoSuchBucket",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Po),(()=>((Zm||(Zm={})).filterSensitiveLog=function(r){return(0,ie.pi)((0,ie.pi)((0,ie.pi)({},r),r.SSEKMSKeyId&&{SSEKMSKeyId:Io}),r.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Io})},Zm))()),eg=(()=>((eg||(eg={})).filterSensitiveLog=function(r){return(0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)({},r),r.SSECustomerKey&&{SSECustomerKey:Io}),r.SSEKMSKeyId&&{SSEKMSKeyId:Io}),r.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Io})},eg))();function uk(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}for(var Qo=function(){function t(r,e){void 0===e&&(e=[]),this.name=r,this.children=e,this.attributes={}}return t.prototype.withName=function(r){return this.name=r,this},t.prototype.addAttribute=function(r,e){return this.attributes[r]=e,this},t.prototype.addChildNode=function(r){return this.children.push(r),this},t.prototype.removeAttribute=function(r){return delete this.attributes[r],this},t.prototype.toString=function(){var r,e,n=Boolean(this.children.length),a="<"+this.name,s=this.attributes;try{for(var l=(0,ie.XA)(Object.keys(s)),c=l.next();!c.done;c=l.next()){var f=c.value,h=s[f];null!=h&&(a+=" "+f+'="'+uk(""+h)+'"')}}catch(g){r={error:g}}finally{try{c&&!c.done&&(e=l.return)&&e.call(l)}finally{if(r)throw r.error}}return a+(n?">"+this.children.map(function(g){return g.toString()}).join("")+"</"+this.name+">":"/>")},t}(),zl=function(){function t(r){this.value=r}return t.prototype.toString=function(){return function dk(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}(""+this.value)},t}(),fk=S(1945),hk=S(9083),bk=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c;return(0,ie.Jh)(this,function(f){switch(f.label){case 0:return n=[(0,ie.pi)({},t)],c={},[4,wt(t.body,r)];case 1:throw e=ie.pi.apply(void 0,n.concat([(c.body=f.sent(),c)])),s=Mt(t,e.body),a=new Po({name:(l=e.body).code||l.Code||s,$fault:"client",$metadata:st(t)}),Xr(a,l)}})})},Sk=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s;return(0,ie.Jh)(this,function(l){switch(l.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Ek(t,r)]:(e={$metadata:st(t),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,ChecksumAlgorithm:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==t.headers["x-amz-abort-date"]&&(e.AbortDate=qm(function(t){if(null!=t){if("string"!=typeof t)throw new TypeError("RFC-7231 date-times must be expressed as strings");var r=JA.exec(t);if(r){var e=(0,ie.CR)(r,8),a=e[1],s=e[2],c=e[4],f=e[5],h=e[6],g=e[7];return Xm(jy(_h(e[3])),Uy(s),jl(a,"day",1,31),{hours:c,minutes:f,seconds:h,fractionalMilliseconds:g})}if(r=ZA.exec(t)){var I=(0,ie.CR)(r,8);return a=I[1],s=I[2],c=I[4],f=I[5],h=I[6],g=I[7],function(t){return t.getTime()-(new Date).getTime()>15768e8?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t}(Xm(function(t){var r=(new Date).getUTCFullYear(),e=100*Math.floor(r/100)+jy(_h(t));return e<r?e+100:e}(I[3]),Uy(s),jl(a,"day",1,31),{hours:c,minutes:f,seconds:h,fractionalMilliseconds:g}))}if(r=ek.exec(t)){var V=(0,ie.CR)(r,8);return s=V[1],a=V[2],c=V[3],f=V[4],h=V[5],g=V[6],Xm(jy(_h(V[7])),Uy(s),jl(a.trimLeft(),"day",1,31),{hours:c,minutes:f,seconds:h,fractionalMilliseconds:g})}throw new TypeError("Invalid RFC-7231 date-time value")}}(t.headers["x-amz-abort-date"]))),void 0!==t.headers["x-amz-abort-rule-id"]&&(e.AbortRuleId=t.headers["x-amz-abort-rule-id"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(e.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(e.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(e.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(e.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-context"]&&(e.SSEKMSEncryptionContext=t.headers["x-amz-server-side-encryption-context"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(e.BucketKeyEnabled=Hm(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==t.headers["x-amz-request-charged"]&&(e.RequestCharged=t.headers["x-amz-request-charged"]),void 0!==t.headers["x-amz-checksum-algorithm"]&&(e.ChecksumAlgorithm=t.headers["x-amz-checksum-algorithm"]),a=qm,s=By,[4,wt(t.body,r)]);case 1:return void 0!==(n=a.apply(void 0,[s.apply(void 0,[l.sent()]),"body"])).Bucket&&(e.Bucket=Si(n.Bucket)),void 0!==n.Key&&(e.Key=Si(n.Key)),void 0!==n.UploadId&&(e.UploadId=Si(n.UploadId)),[2,Promise.resolve(e)]}})})},Ek=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c;return(0,ie.Jh)(this,function(f){switch(f.label){case 0:return n=[(0,ie.pi)({},t)],c={},[4,wt(t.body,r)];case 1:throw e=ie.pi.apply(void 0,n.concat([(c.body=f.sent(),c)])),s=Mt(t,e.body),a=new Po({name:(l=e.body).code||l.Code||s,$fault:"client",$metadata:st(t)}),Xr(a,l)}})})},Y2=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c;return(0,ie.Jh)(this,function(f){switch(f.label){case 0:return n=[(0,ie.pi)({},t)],c={},[4,wt(t.body,r)];case 1:throw e=ie.pi.apply(void 0,n.concat([(c.body=f.sent(),c)])),s=Mt(t,e.body),a=new Po({name:(l=e.body).code||l.Code||s,$fault:"client",$metadata:st(t)}),Xr(a,l)}})})},nI=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c;return(0,ie.Jh)(this,function(f){switch(f.label){case 0:return n=[(0,ie.pi)({},t)],c={},[4,wt(t.body,r)];case 1:throw e=ie.pi.apply(void 0,n.concat([(c.body=f.sent(),c)])),s=Mt(t,e.body),a=new Po({name:(l=e.body).code||l.Code||s,$fault:"client",$metadata:st(t)}),Xr(a,l)}})})},sI=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c;return(0,ie.Jh)(this,function(f){switch(f.label){case 0:return n=[(0,ie.pi)({},t)],c={},[4,wt(t.body,r)];case 1:throw e=ie.pi.apply(void 0,n.concat([(c.body=f.sent(),c)])),s=Mt(t,e.body),a=new Po({name:(l=e.body).code||l.Code||s,$fault:"client",$metadata:st(t)}),Xr(a,l)}})})},Qx=function(t,r){var e=new Qo("CompletedMultipartUpload");return null!=t.Parts&&RI(t.Parts,r).map(function(a){a=a.withName("Part"),e.addChildNode(a)}),e},RI=function(t,r){return t.filter(function(e){return null!=e}).map(function(e){if(null===e)return null;var n=function(t,r){var e=new Qo("CompletedPart");if(null!=t.ETag){var n=new Qo("ETag").addChildNode(new zl(t.ETag)).withName("ETag");e.addChildNode(n)}return null!=t.ChecksumCRC32&&(n=new Qo("ChecksumCRC32").addChildNode(new zl(t.ChecksumCRC32)).withName("ChecksumCRC32"),e.addChildNode(n)),null!=t.ChecksumCRC32C&&(n=new Qo("ChecksumCRC32C").addChildNode(new zl(t.ChecksumCRC32C)).withName("ChecksumCRC32C"),e.addChildNode(n)),null!=t.ChecksumSHA1&&(n=new Qo("ChecksumSHA1").addChildNode(new zl(t.ChecksumSHA1)).withName("ChecksumSHA1"),e.addChildNode(n)),null!=t.ChecksumSHA256&&(n=new Qo("ChecksumSHA256").addChildNode(new zl(t.ChecksumSHA256)).withName("ChecksumSHA256"),e.addChildNode(n)),null!=t.PartNumber&&(n=new Qo("PartNumber").addChildNode(new zl(String(t.PartNumber))).withName("PartNumber"),e.addChildNode(n)),e}(e);return n.withName("member")})},xh=function(t,r){var e=new Qo("Tagging");if(null!=t.TagSet){var n=hd(t.TagSet,r),a=new Qo("TagSet");n.map(function(s){a.addChildNode(s)}),e.addChildNode(a)}return e},hd=function(t,r){return t.filter(function(e){return null!=e}).map(function(e){return null===e?null:function(t,r){var e=new Qo("Tag");if(null!=t.Key){var n=new Qo("ObjectKey").addChildNode(new zl(t.Key)).withName("Key");e.addChildNode(n)}return null!=t.Value&&(n=new Qo("Value").addChildNode(new zl(t.Value)).withName("Value"),e.addChildNode(n)),e}(e).withName("Tag")})},st=function(t){var r;return{httpStatusCode:t.statusCode,requestId:null!==(r=t.headers["x-amzn-requestid"])&&void 0!==r?r:t.headers["x-amzn-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}},pn=function(t,r){return void 0===t&&(t=new Uint8Array),t instanceof Uint8Array?Promise.resolve(t):r.streamCollector(t)||Promise.resolve(new Uint8Array)},Ae=function(t){return!(null==t||""===t||Object.getOwnPropertyNames(t).includes("length")&&0==t.length||Object.getOwnPropertyNames(t).includes("size")&&0==t.size)},wt=function(t,r){return function(t,r){return pn(t,r).then(function(e){return r.utf8Encoder(e)})}(t,r).then(function(e){if(e.length){var n=(0,hk.parse)(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,trimValues:!1,tagValueProcessor:function(c){return""===c.trim()&&c.includes("\n")?"":(0,fk.p1)(c)}}),a="#text",s=Object.keys(n)[0],l=n[s];return l[a]&&(l[s]=l[a],delete l[a]),$x(l)}return{}})},Mt=function(t,r){return void 0!==r.Code?r.Code:404==t.statusCode?"NotFound":""},SD=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return(0,ie.ZT)(r,t),r.prototype.resolveMiddleware=function(e,n,a){this.middlewareStack.use(jc(n,this.serialize,this.deserialize)),this.middlewareStack.use(Gm(n)),this.middlewareStack.use(bn(n)),this.middlewareStack.use(Oy(n,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));var s=e.concat(this.middlewareStack),g=n.requestHandler;return s.resolve(function(I){return g.handle(I.request,a||{})},{logger:n.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:eg.filterSensitiveLog,outputFilterSensitiveLog:Zm.filterSensitiveLog})},r.prototype.serialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c,f,h,g,B;return(0,ie.Jh)(this,function(ce){switch(ce.label){case 0:return[4,r.endpoint()];case 1:if(e=ce.sent(),n=e.hostname,s=void 0===(a=e.protocol)?"https":a,l=e.port,c=e.path,f=(0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)({"content-type":"application/octet-stream"},Ae(t.ACL)&&{"x-amz-acl":t.ACL}),Ae(t.CacheControl)&&{"cache-control":t.CacheControl}),Ae(t.ContentDisposition)&&{"content-disposition":t.ContentDisposition}),Ae(t.ContentEncoding)&&{"content-encoding":t.ContentEncoding}),Ae(t.ContentLanguage)&&{"content-language":t.ContentLanguage}),Ae(t.ContentLength)&&{"content-length":t.ContentLength.toString()}),Ae(t.ContentMD5)&&{"content-md5":t.ContentMD5}),Ae(t.ContentType)&&{"content-type":t.ContentType}),Ae(t.ChecksumAlgorithm)&&{"x-amz-sdk-checksum-algorithm":t.ChecksumAlgorithm}),Ae(t.ChecksumCRC32)&&{"x-amz-checksum-crc32":t.ChecksumCRC32}),Ae(t.ChecksumCRC32C)&&{"x-amz-checksum-crc32c":t.ChecksumCRC32C}),Ae(t.ChecksumSHA1)&&{"x-amz-checksum-sha1":t.ChecksumSHA1}),Ae(t.ChecksumSHA256)&&{"x-amz-checksum-sha256":t.ChecksumSHA256}),Ae(t.Expires)&&{expires:Ux(t.Expires).toString()}),Ae(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),Ae(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),Ae(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),Ae(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),Ae(t.ServerSideEncryption)&&{"x-amz-server-side-encryption":t.ServerSideEncryption}),Ae(t.StorageClass)&&{"x-amz-storage-class":t.StorageClass}),Ae(t.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":t.WebsiteRedirectLocation}),Ae(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),Ae(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),Ae(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),Ae(t.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":t.SSEKMSKeyId}),Ae(t.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":t.SSEKMSEncryptionContext}),Ae(t.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":t.BucketKeyEnabled.toString()}),Ae(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),Ae(t.Tagging)&&{"x-amz-tagging":t.Tagging}),Ae(t.ObjectLockMode)&&{"x-amz-object-lock-mode":t.ObjectLockMode}),Ae(t.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(t.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Ae(t.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":t.ObjectLockLegalHoldStatus}),Ae(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),void 0!==t.Metadata&&Object.keys(t.Metadata).reduce(function(Ie,he){var Se;return(0,ie.pi)((0,ie.pi)({},Ie),((Se={})["x-amz-meta-"+he.toLowerCase()]=t.Metadata[he],Se))},{})),h=((null==c?void 0:c.endsWith("/"))?c.slice(0,-1):c||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((g=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",_s(g)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((g=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",g.split("/").map(function(Ie){return _s(Ie)}).join("/")),void 0!==t.Body&&(B=t.Body),void 0!==t.Body&&(B=t.Body),[2,new Gi({protocol:s,hostname:n,port:l,method:"PUT",headers:f,path:h,query:{"x-id":"PutObject"},body:B})]}})})}(e,n)},r.prototype.deserialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e;return(0,ie.Jh)(this,function(n){switch(n.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,Y2(t,r)]:(e={$metadata:st(t),BucketKeyEnabled:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==t.headers["x-amz-expiration"]&&(e.Expiration=t.headers["x-amz-expiration"]),void 0!==t.headers.etag&&(e.ETag=t.headers.etag),void 0!==t.headers["x-amz-checksum-crc32"]&&(e.ChecksumCRC32=t.headers["x-amz-checksum-crc32"]),void 0!==t.headers["x-amz-checksum-crc32c"]&&(e.ChecksumCRC32C=t.headers["x-amz-checksum-crc32c"]),void 0!==t.headers["x-amz-checksum-sha1"]&&(e.ChecksumSHA1=t.headers["x-amz-checksum-sha1"]),void 0!==t.headers["x-amz-checksum-sha256"]&&(e.ChecksumSHA256=t.headers["x-amz-checksum-sha256"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(e.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-version-id"]&&(e.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(e.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(e.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(e.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-context"]&&(e.SSEKMSEncryptionContext=t.headers["x-amz-server-side-encryption-context"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(e.BucketKeyEnabled=Hm(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==t.headers["x-amz-request-charged"]&&(e.RequestCharged=t.headers["x-amz-request-charged"]),[4,pn(t.body,r)]);case 1:return n.sent(),[2,Promise.resolve(e)]}})})}(e,n)},r}(zc),ED=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return(0,ie.ZT)(r,t),r.prototype.resolveMiddleware=function(e,n,a){this.middlewareStack.use(jc(n,this.serialize,this.deserialize)),this.middlewareStack.use(Gm(n)),this.middlewareStack.use(bn(n));var s=e.concat(this.middlewareStack),g=n.requestHandler;return s.resolve(function(I){return g.handle(I.request,a||{})},{logger:n.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:Jm.filterSensitiveLog,outputFilterSensitiveLog:Qm.filterSensitiveLog})},r.prototype.serialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c,f,h,g;return(0,ie.Jh)(this,function(V){switch(V.label){case 0:return[4,r.endpoint()];case 1:if(e=V.sent(),n=e.hostname,s=void 0===(a=e.protocol)?"https":a,l=e.port,c=e.path,f=(0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)({},Ae(t.ACL)&&{"x-amz-acl":t.ACL}),Ae(t.CacheControl)&&{"cache-control":t.CacheControl}),Ae(t.ContentDisposition)&&{"content-disposition":t.ContentDisposition}),Ae(t.ContentEncoding)&&{"content-encoding":t.ContentEncoding}),Ae(t.ContentLanguage)&&{"content-language":t.ContentLanguage}),Ae(t.ContentType)&&{"content-type":t.ContentType}),Ae(t.Expires)&&{expires:Ux(t.Expires).toString()}),Ae(t.GrantFullControl)&&{"x-amz-grant-full-control":t.GrantFullControl}),Ae(t.GrantRead)&&{"x-amz-grant-read":t.GrantRead}),Ae(t.GrantReadACP)&&{"x-amz-grant-read-acp":t.GrantReadACP}),Ae(t.GrantWriteACP)&&{"x-amz-grant-write-acp":t.GrantWriteACP}),Ae(t.ServerSideEncryption)&&{"x-amz-server-side-encryption":t.ServerSideEncryption}),Ae(t.StorageClass)&&{"x-amz-storage-class":t.StorageClass}),Ae(t.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":t.WebsiteRedirectLocation}),Ae(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),Ae(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),Ae(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),Ae(t.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":t.SSEKMSKeyId}),Ae(t.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":t.SSEKMSEncryptionContext}),Ae(t.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":t.BucketKeyEnabled.toString()}),Ae(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),Ae(t.Tagging)&&{"x-amz-tagging":t.Tagging}),Ae(t.ObjectLockMode)&&{"x-amz-object-lock-mode":t.ObjectLockMode}),Ae(t.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(t.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Ae(t.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":t.ObjectLockLegalHoldStatus}),Ae(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),Ae(t.ChecksumAlgorithm)&&{"x-amz-checksum-algorithm":t.ChecksumAlgorithm}),void 0!==t.Metadata&&Object.keys(t.Metadata).reduce(function(ce,Ie){var he;return(0,ie.pi)((0,ie.pi)({},ce),((he={})["x-amz-meta-"+Ie.toLowerCase()]=t.Metadata[Ie],he))},{})),h=((null==c?void 0:c.endsWith("/"))?c.slice(0,-1):c||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((g=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",_s(g)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((g=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",g.split("/").map(function(ce){return _s(ce)}).join("/")),[2,new Gi({protocol:s,hostname:n,port:l,method:"POST",headers:f,path:h,query:{uploads:"","x-id":"CreateMultipartUpload"},body:void 0})]}})})}(e,n)},r.prototype.deserialize=function(e,n){return Sk(e,n)},r}(zc),rg=(()=>((rg||(rg={})).filterSensitiveLog=function(r){return(0,ie.pi)({},r)},rg))(),og=(()=>((og||(og={})).filterSensitiveLog=function(r){return(0,ie.pi)({},r)},og))(),ag=(function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"ObjectAlreadyInActiveTierError",$fault:"client"},e))||this;return n.name="ObjectAlreadyInActiveTierError",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Po),(()=>((ag||(ag={})).filterSensitiveLog=function(r){return(0,ie.pi)((0,ie.pi)({},r),r.SSEKMSKeyId&&{SSEKMSKeyId:Io})},ag))()),sg=(()=>((sg||(sg={})).filterSensitiveLog=function(r){return(0,ie.pi)((0,ie.pi)({},r),r.SSECustomerKey&&{SSECustomerKey:Io})},sg))(),TD=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return(0,ie.ZT)(r,t),r.prototype.resolveMiddleware=function(e,n,a){this.middlewareStack.use(jc(n,this.serialize,this.deserialize)),this.middlewareStack.use(Gm(n)),this.middlewareStack.use(bn(n)),this.middlewareStack.use(Oy(n,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));var s=e.concat(this.middlewareStack),g=n.requestHandler;return s.resolve(function(I){return g.handle(I.request,a||{})},{logger:n.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:sg.filterSensitiveLog,outputFilterSensitiveLog:ag.filterSensitiveLog})},r.prototype.serialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c,f,h,g,I,B;return(0,ie.Jh)(this,function(ce){switch(ce.label){case 0:return[4,r.endpoint()];case 1:if(e=ce.sent(),n=e.hostname,s=void 0===(a=e.protocol)?"https":a,l=e.port,c=e.path,f=(0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)({"content-type":"application/octet-stream"},Ae(t.ContentLength)&&{"content-length":t.ContentLength.toString()}),Ae(t.ContentMD5)&&{"content-md5":t.ContentMD5}),Ae(t.ChecksumAlgorithm)&&{"x-amz-sdk-checksum-algorithm":t.ChecksumAlgorithm}),Ae(t.ChecksumCRC32)&&{"x-amz-checksum-crc32":t.ChecksumCRC32}),Ae(t.ChecksumCRC32C)&&{"x-amz-checksum-crc32c":t.ChecksumCRC32C}),Ae(t.ChecksumSHA1)&&{"x-amz-checksum-sha1":t.ChecksumSHA1}),Ae(t.ChecksumSHA256)&&{"x-amz-checksum-sha256":t.ChecksumSHA256}),Ae(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),Ae(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),Ae(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),Ae(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),Ae(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),h=((null==c?void 0:c.endsWith("/"))?c.slice(0,-1):c||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((g=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",_s(g)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((g=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",g.split("/").map(function(Ie){return _s(Ie)}).join("/")),I=(0,ie.pi)((0,ie.pi)({"x-id":"UploadPart"},void 0!==t.PartNumber&&{partNumber:t.PartNumber.toString()}),void 0!==t.UploadId&&{uploadId:t.UploadId}),void 0!==t.Body&&(B=t.Body),void 0!==t.Body&&(B=t.Body),[2,new Gi({protocol:s,hostname:n,port:l,method:"PUT",headers:f,path:h,query:I,body:B})]}})})}(e,n)},r.prototype.deserialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e;return(0,ie.Jh)(this,function(n){switch(n.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,sI(t,r)]:(e={$metadata:st(t),BucketKeyEnabled:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==t.headers["x-amz-server-side-encryption"]&&(e.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers.etag&&(e.ETag=t.headers.etag),void 0!==t.headers["x-amz-checksum-crc32"]&&(e.ChecksumCRC32=t.headers["x-amz-checksum-crc32"]),void 0!==t.headers["x-amz-checksum-crc32c"]&&(e.ChecksumCRC32C=t.headers["x-amz-checksum-crc32c"]),void 0!==t.headers["x-amz-checksum-sha1"]&&(e.ChecksumSHA1=t.headers["x-amz-checksum-sha1"]),void 0!==t.headers["x-amz-checksum-sha256"]&&(e.ChecksumSHA256=t.headers["x-amz-checksum-sha256"]),void 0!==t.headers["x-amz-server-side-encryption-customer-algorithm"]&&(e.SSECustomerAlgorithm=t.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==t.headers["x-amz-server-side-encryption-customer-key-md5"]&&(e.SSECustomerKeyMD5=t.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(e.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(e.BucketKeyEnabled=Hm(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==t.headers["x-amz-request-charged"]&&(e.RequestCharged=t.headers["x-amz-request-charged"]),[4,pn(t.body,r)]);case 1:return n.sent(),[2,Promise.resolve(e)]}})})}(e,n)},r}(zc),Rb={},qy={},bh=0;bh<256;bh++){var Ch=bh.toString(16).toLowerCase();1===Ch.length&&(Ch="0"+Ch),Rb[bh]=Ch,qy[Ch]=bh}function da(t){for(var r="",e=0;e<t.byteLength;e++)r+=Rb[t[e]];return r}var Db="X-Amz-Date",Ob="X-Amz-Signature",Mb="X-Amz-Security-Token",Lb="authorization",Nb=Db.toLowerCase(),DD=[Lb,Nb,"date"],OD=Ob.toLowerCase(),Xy="x-amz-content-sha256",MD=Mb.toLowerCase(),LD={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},ND=/^proxy-/,BD=/^sec-/,Wy="AWS4-HMAC-SHA256",jD="AWS4-HMAC-SHA256-PAYLOAD",Bb="aws4_request",md={},lg=[],Ky=function(t,r,e){return t+"/"+r+"/"+e+"/"+Bb},jb=function(t,r,e){var n=new t(r);return n.update(e),n.digest()},zb=function(t,r,e){var n,a,s=t.headers,l={};try{for(var c=(0,ie.XA)(Object.keys(s).sort()),f=c.next();!f.done;f=c.next()){var h=f.value,g=h.toLowerCase();(g in LD||(null==r?void 0:r.has(g))||ND.test(g)||BD.test(g))&&(!e||e&&!e.has(g))||(l[g]=s[h].trim().replace(/\s+/g," "))}}catch(I){n={error:I}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return l},Vc=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,$D)},$D=function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()},Yy=function(t,r){var e=t.headers,n=t.body;return(0,ie.mG)(void 0,void 0,void 0,function(){var a,s,l,c,f,h,g;return(0,ie.Jh)(this,function(I){switch(I.label){case 0:try{for(a=(0,ie.XA)(Object.keys(e)),s=a.next();!s.done;s=a.next())if((l=s.value).toLowerCase()===Xy)return[2,e[l]]}catch(B){h={error:B}}finally{try{s&&!s.done&&(g=a.return)&&g.call(a)}finally{if(h)throw h.error}}return null!=n?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof n||ArrayBuffer.isView(n)||Vm(n)?((c=new r).update(n),f=da,[4,c.digest()]):[3,3];case 2:return[2,f.apply(void 0,[I.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})},Ub=function(t){var r=t.headers,e=t.query,n=(0,ie._T)(t,["headers","query"]);return(0,ie.pi)((0,ie.pi)({},n),{headers:(0,ie.pi)({},r),query:e?XD(e):void 0})},XD=function(t){return Object.keys(t).reduce(function(r,e){var n,a=t[e];return(0,ie.pi)((0,ie.pi)({},r),((n={})[e]=Array.isArray(a)?(0,ie.ev)([],(0,ie.CR)(a)):a,n))},{})},Vb=function(t){var r,e;t="function"==typeof t.clone?t.clone():Ub(t);try{for(var n=(0,ie.XA)(Object.keys(t.headers)),a=n.next();!a.done;a=n.next()){var s=a.value;DD.indexOf(s.toLowerCase())>-1&&delete t.headers[s]}}catch(l){r={error:l}}finally{try{a&&!a.done&&(e=n.return)&&e.call(n)}finally{if(r)throw r.error}}return t},cg=function(){function t(r){var e=r.applyChecksum,n=r.credentials,a=r.region,l=r.sha256,c=r.uriEscapePath,f=void 0===c||c;this.service=r.service,this.sha256=l,this.uriEscapePath=f,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=function(t){if("string"==typeof t){var r=Promise.resolve(t);return function(){return r}}return t}(a),this.credentialProvider=function(t){if("object"==typeof t){var r=Promise.resolve(t);return function(){return r}}return t}(n)}return t.prototype.presign=function(r,e){return void 0===e&&(e={}),(0,ie.mG)(this,void 0,void 0,function(){var n,a,s,l,c,f,h,g,I,B,V,ce,Ie,he,Se,Oe,Be,et,at,ft,Pt,Rt,on,an;return(0,ie.Jh)(this,function(Vt){switch(Vt.label){case 0:return a=void 0===(n=e.signingDate)?new Date:n,l=void 0===(s=e.expiresIn)?3600:s,c=e.unsignableHeaders,f=e.unhoistableHeaders,h=e.signableHeaders,g=e.signingRegion,I=e.signingService,[4,this.credentialProvider()];case 1:return B=Vt.sent(),null==g?[3,2]:(ce=g,[3,4]);case 2:return[4,this.regionProvider()];case 3:ce=Vt.sent(),Vt.label=4;case 4:return V=ce,Ie=ug(a),he=Ie.longDate,Se=Ie.shortDate,l>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(Oe=Ky(Se,V,I??this.service),Be=function(t,r){var e,n,a;void 0===r&&(r={});var s="function"==typeof t.clone?t.clone():Ub(t),l=s.headers,c=s.query,f=void 0===c?{}:c;try{for(var h=(0,ie.XA)(Object.keys(l)),g=h.next();!g.done;g=h.next()){var I=g.value,B=I.toLowerCase();"x-amz-"===B.substr(0,6)&&!(null===(a=r.unhoistableHeaders)||void 0===a?void 0:a.has(B))&&(f[I]=l[I],delete l[I])}}catch(V){e={error:V}}finally{try{g&&!g.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}return(0,ie.pi)((0,ie.pi)({},t),{headers:l,query:f})}(Vb(r),{unhoistableHeaders:f}),B.sessionToken&&(Be.query[Mb]=B.sessionToken),Be.query["X-Amz-Algorithm"]=Wy,Be.query["X-Amz-Credential"]=B.accessKeyId+"/"+Oe,Be.query[Db]=he,Be.query["X-Amz-Expires"]=l.toString(10),et=zb(Be,c,h),Be.query["X-Amz-SignedHeaders"]=Gb(et),at=Be.query,ft=Ob,Pt=this.getSignature,Rt=[he,Oe,this.getSigningKey(B,V,Se,I)],on=this.createCanonicalRequest,an=[Be,et],[4,Yy(r,this.sha256)]);case 5:return[4,Pt.apply(this,Rt.concat([on.apply(this,an.concat([Vt.sent()]))]))];case 6:return at[ft]=Vt.sent(),[2,Be]}})})},t.prototype.sign=function(r,e){return(0,ie.mG)(this,void 0,void 0,function(){return(0,ie.Jh)(this,function(n){return"string"==typeof r?[2,this.signString(r,e)]:r.headers&&r.payload?[2,this.signEvent(r,e)]:[2,this.signRequest(r,e)]})})},t.prototype.signEvent=function(r,e){var n=r.headers,a=r.payload,s=e.signingDate,l=void 0===s?new Date:s,c=e.priorSignature,f=e.signingRegion,h=e.signingService;return(0,ie.mG)(this,void 0,void 0,function(){var g,I,B,ce,Ie,he,Se,Oe,Be,et;return(0,ie.Jh)(this,function(at){switch(at.label){case 0:return null==f?[3,1]:(I=f,[3,3]);case 1:return[4,this.regionProvider()];case 2:I=at.sent(),at.label=3;case 3:return g=I,B=ug(l),ce=B.longDate,Ie=Ky(B.shortDate,g,h??this.service),[4,Yy({headers:{},body:a},this.sha256)];case 4:return he=at.sent(),(Se=new this.sha256).update(n),Be=da,[4,Se.digest()];case 5:return Oe=Be.apply(void 0,[at.sent()]),et=[jD,ce,Ie,c,Oe,he].join("\n"),[2,this.signString(et,{signingDate:l,signingRegion:g,signingService:h})]}})})},t.prototype.signString=function(r,e){var n=void 0===e?{}:e,a=n.signingDate,s=void 0===a?new Date:a,l=n.signingRegion,c=n.signingService;return(0,ie.mG)(this,void 0,void 0,function(){var f,h,g,I,B,V,ce,Ie;return(0,ie.Jh)(this,function(he){switch(he.label){case 0:return[4,this.credentialProvider()];case 1:return f=he.sent(),null==l?[3,2]:(g=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:g=he.sent(),he.label=4;case 4:return h=g,I=ug(s).shortDate,ce=(V=this.sha256).bind,[4,this.getSigningKey(f,h,I,c)];case 5:return(B=new(ce.apply(V,[void 0,he.sent()]))).update(r),Ie=da,[4,B.digest()];case 6:return[2,Ie.apply(void 0,[he.sent()])]}})})},t.prototype.signRequest=function(r,e){var n=void 0===e?{}:e,a=n.signingDate,s=void 0===a?new Date:a,l=n.signableHeaders,c=n.unsignableHeaders,f=n.signingRegion,h=n.signingService;return(0,ie.mG)(this,void 0,void 0,function(){var g,I,B,V,ce,Ie,he,Se,Oe,Be,et;return(0,ie.Jh)(this,function(at){switch(at.label){case 0:return[4,this.credentialProvider()];case 1:return g=at.sent(),null==f?[3,2]:(B=f,[3,4]);case 2:return[4,this.regionProvider()];case 3:B=at.sent(),at.label=4;case 4:return I=B,V=Vb(r),ce=ug(s),Ie=ce.longDate,Se=Ky(he=ce.shortDate,I,h??this.service),V.headers[Nb]=Ie,g.sessionToken&&(V.headers[MD]=g.sessionToken),[4,Yy(V,this.sha256)];case 5:return Oe=at.sent(),!function(t,r){var e,n;t=t.toLowerCase();try{for(var a=(0,ie.XA)(Object.keys(r)),s=a.next();!s.done;s=a.next())if(t===s.value.toLowerCase())return!0}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!1}(Xy,V.headers)&&this.applyChecksum&&(V.headers[Xy]=Oe),Be=zb(V,c,l),[4,this.getSignature(Ie,Se,this.getSigningKey(g,I,he,h),this.createCanonicalRequest(V,Be,Oe))];case 6:return et=at.sent(),V.headers[Lb]=Wy+" Credential="+g.accessKeyId+"/"+Se+", SignedHeaders="+Gb(Be)+", Signature="+et,[2,V]}})})},t.prototype.createCanonicalRequest=function(r,e,n){var a=Object.keys(e).sort();return r.method+"\n"+this.getCanonicalPath(r)+"\n"+function(t){var r,e,n=t.query,a=void 0===n?{}:n,s=[],l={},c=function(I){if(I.toLowerCase()===OD)return"continue";s.push(I);var B=a[I];"string"==typeof B?l[I]=Vc(I)+"="+Vc(B):Array.isArray(B)&&(l[I]=B.slice(0).sort().reduce(function(V,ce){return V.concat([Vc(I)+"="+Vc(ce)])},[]).join("&"))};try{for(var f=(0,ie.XA)(Object.keys(a).sort()),h=f.next();!h.done;h=f.next())c(h.value)}catch(I){r={error:I}}finally{try{h&&!h.done&&(e=f.return)&&e.call(f)}finally{if(r)throw r.error}}return s.map(function(I){return l[I]}).filter(function(I){return I}).join("&")}(r)+"\n"+a.map(function(s){return s+":"+e[s]}).join("\n")+"\n\n"+a.join(";")+"\n"+n},t.prototype.createStringToSign=function(r,e,n){return(0,ie.mG)(this,void 0,void 0,function(){var a,s;return(0,ie.Jh)(this,function(l){switch(l.label){case 0:return(a=new this.sha256).update(n),[4,a.digest()];case 1:return s=l.sent(),[2,Wy+"\n"+r+"\n"+e+"\n"+da(s)]}})})},t.prototype.getCanonicalPath=function(r){var e,n,a=r.path;if(this.uriEscapePath){var s=[];try{for(var l=(0,ie.XA)(a.split("/")),c=l.next();!c.done;c=l.next()){var f=c.value;0!==(null==f?void 0:f.length)&&"."!==f&&(".."===f?s.pop():s.push(f))}}catch(I){e={error:I}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}var h=((null==a?void 0:a.startsWith("/"))?"/":"")+s.join("/")+(s.length>0&&(null==a?void 0:a.endsWith("/"))?"/":"");return encodeURIComponent(h).replace(/%2F/g,"/")}return a},t.prototype.getSignature=function(r,e,n,a){return(0,ie.mG)(this,void 0,void 0,function(){var s,l,c,f,h;return(0,ie.Jh)(this,function(g){switch(g.label){case 0:return[4,this.createStringToSign(r,e,a)];case 1:return s=g.sent(),f=(c=this.sha256).bind,[4,n];case 2:return(l=new(f.apply(c,[void 0,g.sent()]))).update(s),h=da,[4,l.digest()];case 3:return[2,h.apply(void 0,[g.sent()])]}})})},t.prototype.getSigningKey=function(r,e,n,a){return function(t,r,e,n,a){return(0,ie.mG)(void 0,void 0,void 0,function(){var s,l,c,f,h,I,B,V;return(0,ie.Jh)(this,function(ce){switch(ce.label){case 0:return[4,jb(t,r.secretAccessKey,r.accessKeyId)];case 1:if(s=ce.sent(),(l=e+":"+n+":"+a+":"+da(s)+":"+r.sessionToken)in md)return[2,md[l]];for(lg.push(l);lg.length>50;)delete md[lg.shift()];c="AWS4"+r.secretAccessKey,ce.label=2;case 2:ce.trys.push([2,7,8,9]),f=(0,ie.XA)([e,n,a,Bb]),h=f.next(),ce.label=3;case 3:return h.done?[3,6]:[4,jb(t,c,h.value)];case 4:c=ce.sent(),ce.label=5;case 5:return h=f.next(),[3,3];case 6:return[3,9];case 7:return I=ce.sent(),B={error:I},[3,9];case 8:try{h&&!h.done&&(V=f.return)&&V.call(f)}finally{if(B)throw B.error}return[7];case 9:return[2,md[l]=c]}})})}(this.sha256,r,n,e,a||this.service)},t}(),ug=function(t){var r=function(t){return function(t){return"number"==typeof t?new Date(1e3*t):"string"==typeof t?Number(t)?new Date(1e3*Number(t)):new Date(t):t}(t).toISOString().replace(/\.\d{3}Z$/,"Z")}(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.substr(0,8)}},Gb=function(t){return Object.keys(t).sort().join(";")},ZD=function(){function t(r){this.sigv4Signer=new cg(r),this.signerOptions=r}return t.prototype.sign=function(r,e){return void 0===e&&(e={}),(0,ie.mG)(this,void 0,void 0,function(){return(0,ie.Jh)(this,function(n){if("*"===e.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return[2,this.getSigv4aSigner().sign(r,e)]}return[2,this.sigv4Signer.sign(r,e)]})})},t.prototype.presign=function(r,e){return void 0===e&&(e={}),(0,ie.mG)(this,void 0,void 0,function(){return(0,ie.Jh)(this,function(n){if("*"===e.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return[2,this.getSigv4aSigner().presign(r,e)]}return[2,this.sigv4Signer.presign(r,e)]})})},t.prototype.getSigv4aSigner=function(){if(!this.sigv4aSigner){var r;try{if("function"!=typeof(r=S(3743).CrtSignerV4))throw new Error}catch(e){throw e.message=e.message+'\nPlease check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. \nFor more information please go to https://github.com/aws/aws-sdk-js-v3#known-issues',e}this.sigv4aSigner=new r((0,ie.pi)((0,ie.pi)({},this.signerOptions),{signingAlgorithm:1}))}return this.sigv4aSigner},t}(),$b=function(t,r){return void 0===t&&(t=new Uint8Array),t instanceof Uint8Array?Promise.resolve(t):r.streamCollector(t)||Promise.resolve(new Uint8Array)},tO=function(t,r){return $b(t,r).then(function(e){return r.utf8Encoder(e)})},nO={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},oO={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},lO={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},uO=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return(0,ie.ZT)(r,t),r.prototype.resolveMiddleware=function(e,n,a){this.middlewareStack.use(jc(n,this.serialize,this.deserialize)),this.middlewareStack.use(function(t){return{applyToStack:function(r){r.addRelativeTo(function(t){return function(r){return function(e){return(0,ie.mG)(void 0,void 0,void 0,function(){var n,a,s,l,c,f,h;return(0,ie.Jh)(this,function(g){switch(g.label){case 0:return[4,r(e)];case 1:return n=g.sent(),Bc.isInstance(a=n.response)?(l=a.body,(s=a.statusCode)<200&&s>=300?[2,n]:[4,$b(l,t)]):[2,n];case 2:return c=g.sent(),[4,tO(c,t)];case 3:if(f=g.sent(),0===c.length)throw(h=new Error("S3 aborted request")).name="InternalError",h;return f&&f.match("<Error>")&&(a.statusCode=400),a.body=c,[2,n]}})})}}}(t),nO)}}}(n)),this.middlewareStack.use(Gm(n)),this.middlewareStack.use(bn(n));var s=e.concat(this.middlewareStack),g=n.requestHandler;return s.resolve(function(I){return g.handle(I.request,a||{})},{logger:n.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:Ym.filterSensitiveLog,outputFilterSensitiveLog:Km.filterSensitiveLog})},r.prototype.serialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c,f,h,g,I,B,V;return(0,ie.Jh)(this,function(ce){switch(ce.label){case 0:return[4,r.endpoint()];case 1:if(e=ce.sent(),n=e.hostname,s=void 0===(a=e.protocol)?"https":a,l=e.port,c=e.path,f=(0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)({"content-type":"application/xml"},Ae(t.ChecksumCRC32)&&{"x-amz-checksum-crc32":t.ChecksumCRC32}),Ae(t.ChecksumCRC32C)&&{"x-amz-checksum-crc32c":t.ChecksumCRC32C}),Ae(t.ChecksumSHA1)&&{"x-amz-checksum-sha1":t.ChecksumSHA1}),Ae(t.ChecksumSHA256)&&{"x-amz-checksum-sha256":t.ChecksumSHA256}),Ae(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),Ae(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),Ae(t.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":t.SSECustomerAlgorithm}),Ae(t.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":t.SSECustomerKey}),Ae(t.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":t.SSECustomerKeyMD5}),h=((null==c?void 0:c.endsWith("/"))?c.slice(0,-1):c||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((g=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",_s(g)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((g=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",g.split("/").map(function(Ie){return _s(Ie)}).join("/")),I=(0,ie.pi)({"x-id":"CompleteMultipartUpload"},void 0!==t.UploadId&&{uploadId:t.UploadId}),void 0!==t.MultipartUpload&&(B=Qx(t.MultipartUpload,r)),void 0!==t.MultipartUpload&&(V=(V=Qx(t.MultipartUpload,r)).withName("CompleteMultipartUpload"),B='<?xml version="1.0" encoding="UTF-8"?>',V.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),B+=V.toString()),[2,new Gi({protocol:s,hostname:n,port:l,method:"POST",headers:f,path:h,query:I,body:B})]}})})}(e,n)},r.prototype.deserialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s;return(0,ie.Jh)(this,function(l){switch(l.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,bk(t,r)]:(e={$metadata:st(t),Bucket:void 0,BucketKeyEnabled:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==t.headers["x-amz-expiration"]&&(e.Expiration=t.headers["x-amz-expiration"]),void 0!==t.headers["x-amz-server-side-encryption"]&&(e.ServerSideEncryption=t.headers["x-amz-server-side-encryption"]),void 0!==t.headers["x-amz-version-id"]&&(e.VersionId=t.headers["x-amz-version-id"]),void 0!==t.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(e.SSEKMSKeyId=t.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==t.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(e.BucketKeyEnabled=Hm(t.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==t.headers["x-amz-request-charged"]&&(e.RequestCharged=t.headers["x-amz-request-charged"]),a=qm,s=By,[4,wt(t.body,r)]);case 1:return void 0!==(n=a.apply(void 0,[s.apply(void 0,[l.sent()]),"body"])).Bucket&&(e.Bucket=Si(n.Bucket)),void 0!==n.ChecksumCRC32&&(e.ChecksumCRC32=Si(n.ChecksumCRC32)),void 0!==n.ChecksumCRC32C&&(e.ChecksumCRC32C=Si(n.ChecksumCRC32C)),void 0!==n.ChecksumSHA1&&(e.ChecksumSHA1=Si(n.ChecksumSHA1)),void 0!==n.ChecksumSHA256&&(e.ChecksumSHA256=Si(n.ChecksumSHA256)),void 0!==n.ETag&&(e.ETag=Si(n.ETag)),void 0!==n.Key&&(e.Key=Si(n.Key)),void 0!==n.Location&&(e.Location=Si(n.Location)),[2,Promise.resolve(e)]}})})}(e,n)},r}(zc),dO=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return(0,ie.ZT)(r,t),r.prototype.resolveMiddleware=function(e,n,a){this.middlewareStack.use(jc(n,this.serialize,this.deserialize)),this.middlewareStack.use(bn(n)),this.middlewareStack.use(Oy(n,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));var s=e.concat(this.middlewareStack),g=n.requestHandler;return s.resolve(function(I){return g.handle(I.request,a||{})},{logger:n.logger,clientName:"S3Client",commandName:"PutObjectTaggingCommand",inputFilterSensitiveLog:og.filterSensitiveLog,outputFilterSensitiveLog:rg.filterSensitiveLog})},r.prototype.serialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,l,c,f,h,g,I,B,V;return(0,ie.Jh)(this,function(ce){switch(ce.label){case 0:return[4,r.endpoint()];case 1:if(e=ce.sent(),n=e.hostname,s=void 0===(a=e.protocol)?"https":a,l=e.port,c=e.path,f=(0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)({"content-type":"application/xml"},Ae(t.ContentMD5)&&{"content-md5":t.ContentMD5}),Ae(t.ChecksumAlgorithm)&&{"x-amz-sdk-checksum-algorithm":t.ChecksumAlgorithm}),Ae(t.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":t.ExpectedBucketOwner}),Ae(t.RequestPayer)&&{"x-amz-request-payer":t.RequestPayer}),h=((null==c?void 0:c.endsWith("/"))?c.slice(0,-1):c||"")+"/{Bucket}/{Key+}",void 0===t.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((g=t.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",_s(g)),void 0===t.Key)throw new Error("No value provided for input HTTP label: Key.");if((g=t.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",g.split("/").map(function(Ie){return _s(Ie)}).join("/")),I=(0,ie.pi)({tagging:""},void 0!==t.VersionId&&{versionId:t.VersionId}),void 0!==t.Tagging&&(B=xh(t.Tagging,r)),void 0!==t.Tagging&&(V=xh(t.Tagging,r),B='<?xml version="1.0" encoding="UTF-8"?>',V.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),B+=V.toString()),[2,new Gi({protocol:s,hostname:n,port:l,method:"PUT",headers:f,path:h,query:I,body:B})]}})})}(e,n)},r.prototype.deserialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e;return(0,ie.Jh)(this,function(n){switch(n.label){case 0:return 200!==t.statusCode&&t.statusCode>=300?[2,nI(t,r)]:(e={$metadata:st(t),VersionId:void 0},void 0!==t.headers["x-amz-version-id"]&&(e.VersionId=t.headers["x-amz-version-id"]),[4,pn(t.body,r)]);case 1:return n.sent(),[2,Promise.resolve(e)]}})})}(e,n)},r}(zc),fO=S(3358),hO=S(6399),mO=(0,ie.pi)((0,ie.pi)({},{lstatSync:function(){}}),{runtime:"node",lstatSync:hO.lstatSync}),Qy=function(t){if(null==t)return 0;if("string"==typeof t&&(t=Buffer.from(t)),"number"==typeof t.byteLength)return t.byteLength;if("number"==typeof t.length)return t.length;if("number"==typeof t.size)return t.size;if("string"==typeof t.path)try{return mO.lstatSync(t.path).size}catch{return}},gd=S(2063),gO=S(574);function Hb(t,r){return(0,ie.FC)(this,arguments,function(){var n,a,s;return(0,ie.Jh)(this,function(l){switch(l.label){case 0:n=1,a=0,s=r,l.label=1;case 1:return s<t.byteLength?[4,(0,ie.qq)({partNumber:n,data:t.slice(a,s)})]:[3,4];case 2:return[4,l.sent()];case 3:return l.sent(),n+=1,s=(a=s)+r,[3,1];case 4:return[4,(0,ie.qq)({partNumber:n,data:t.slice(a),lastPart:!0})];case 5:return[4,l.sent()];case 6:return l.sent(),[2]}})})}function Jy(t,r,e){return(0,ie.FC)(this,arguments,function(){var a,s,l,c,f,h,g,I,B;return(0,ie.Jh)(this,function(V){switch(V.label){case 0:a=1,s={chunks:[],length:0},V.label=1;case 1:V.trys.push([1,9,10,15]),l=(0,ie.KL)(e(t)),V.label=2;case 2:return[4,(0,ie.qq)(l.next())];case 3:if((c=V.sent()).done)return[3,8];s.chunks.push(f=c.value),s.length+=f.length,V.label=4;case 4:return s.length>=r?(h=s.chunks.length>1?gd.lW.concat(s.chunks):s.chunks[0],[4,(0,ie.qq)({partNumber:a,data:h.slice(0,r)})]):[3,7];case 5:return[4,V.sent()];case 6:return V.sent(),s.chunks=[h.slice(r)],s.length=s.chunks[0].length,a+=1,[3,4];case 7:return[3,2];case 8:return[3,15];case 9:return g=V.sent(),I={error:g},[3,15];case 10:return V.trys.push([10,,13,14]),c&&!c.done&&(B=l.return)?[4,(0,ie.qq)(B.call(l))]:[3,12];case 11:V.sent(),V.label=12;case 12:return[3,14];case 13:if(I)throw I.error;return[7];case 14:return[7];case 15:return[4,(0,ie.qq)({partNumber:a,data:gd.lW.concat(s.chunks),lastPart:!0})];case 16:return[4,V.sent()];case 17:return V.sent(),[2]}})})}function vO(t){return(0,ie.FC)(this,arguments,function(){var e,n,s,l,c;return(0,ie.Jh)(this,function(f){switch(f.label){case 0:f.trys.push([0,7,8,13]),e=(0,ie.KL)(t),f.label=1;case 1:return[4,(0,ie.qq)(e.next())];case 2:return(n=f.sent()).done?[3,6]:[4,(0,ie.qq)(gd.lW.from(n.value))];case 3:return[4,f.sent()];case 4:f.sent(),f.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return s=f.sent(),l={error:s},[3,13];case 8:return f.trys.push([8,,11,12]),n&&!n.done&&(c=e.return)?[4,(0,ie.qq)(c.call(e))]:[3,10];case 9:f.sent(),f.label=10;case 10:return[3,12];case 11:if(l)throw l.error;return[7];case 12:return[7];case 13:return[2]}})})}function qb(t){return(0,ie.FC)(this,arguments,function(){var e,n,s;return(0,ie.Jh)(this,function(c){switch(c.label){case 0:e=t.getReader(),c.label=1;case 1:c.trys.push([1,9,10,11]),c.label=2;case 2:return[4,(0,ie.qq)(e.read())];case 3:return n=c.sent(),s=n.value,n.done?[4,(0,ie.qq)(void 0)]:[3,5];case 4:return[2,c.sent()];case 5:return[4,(0,ie.qq)(gd.lW.from(s))];case 6:return[4,c.sent()];case 7:return c.sent(),[3,2];case 8:return[3,11];case 9:throw c.sent();case 10:return e.releaseLock(),[7];case 11:return[2]}})})}var Zy=5242880,_O=function(t){function r(e){var n=t.call(this)||this;return n.MAX_PARTS=1e4,n.queueSize=4,n.partSize=Zy,n.leavePartsOnError=!1,n.tags=[],n.concurrentUploaders=[],n.uploadedParts=[],n.isMultiPart=!0,n.queueSize=e.queueSize||n.queueSize,n.partSize=e.partSize||n.partSize,n.leavePartsOnError=e.leavePartsOnError||n.leavePartsOnError,n.tags=e.tags||n.tags,n.client=e.client,n.params=e.params,n.__validateInput(),n.totalBytes=Qy(n.params.Body),n.bytesUploadedSoFar=0,n.abortController=new ky,n}return(0,ie.ZT)(r,t),r.prototype.abort=function(){return(0,ie.mG)(this,void 0,void 0,function(){return(0,ie.Jh)(this,function(e){return this.abortController.abort(),[2]})})},r.prototype.done=function(){return(0,ie.mG)(this,void 0,void 0,function(){return(0,ie.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.race([this.__doMultipartUpload(),this.__abortTimeout(this.abortController.signal)])];case 1:return[2,e.sent()]}})})},r.prototype.on=function(e,n){this.uploadEvent=e,t.prototype.on.call(this,e,n)},r.prototype.__uploadUsingPut=function(e){return(0,ie.mG)(this,void 0,void 0,function(){var n,a,s;return(0,ie.Jh)(this,function(l){switch(l.label){case 0:return this.isMultiPart=!1,n=(0,ie.pi)((0,ie.pi)({},this.params),{Body:e.data}),[4,this.client.send(new SD(n))];case 1:return a=l.sent(),this.putResponse=a,s=Qy(e.data),this.__notifyProgress({loaded:s,total:s,part:1,Key:this.params.Key,Bucket:this.params.Bucket}),[2]}})})},r.prototype.__createMultipartUpload=function(){return(0,ie.mG)(this,void 0,void 0,function(){var e,n;return(0,ie.Jh)(this,function(a){switch(a.label){case 0:return this.createMultiPartPromise||(e=(0,ie.pi)((0,ie.pi)({},this.params),{Body:void 0}),this.createMultiPartPromise=this.client.send(new ED(e))),[4,this.createMultiPartPromise];case 1:return n=a.sent(),this.uploadId=n.UploadId,[2]}})})},r.prototype.__doConcurrentUpload=function(e){var n,a,s,l;return(0,ie.mG)(this,void 0,void 0,function(){var c,f,h,g;return(0,ie.Jh)(this,function(I){switch(I.label){case 0:I.trys.push([0,12,13,18]),n=(0,ie.KL)(e),I.label=1;case 1:return[4,n.next()];case 2:if((a=I.sent()).done)return[3,11];if(c=a.value,this.uploadedParts.length>this.MAX_PARTS)throw new Error("Exceeded "+this.MAX_PARTS+" as part of the upload to "+this.params.Key+" and "+this.params.Bucket+".");I.label=3;case 3:return I.trys.push([3,9,,10]),this.abortController.signal.aborted?[2]:1===c.partNumber&&c.lastPart?[4,this.__uploadUsingPut(c)]:[3,5];case 4:return[2,I.sent()];case 5:return this.uploadId?[3,7]:[4,this.__createMultipartUpload()];case 6:if(I.sent(),this.abortController.signal.aborted)return[2];I.label=7;case 7:return[4,this.client.send(new TD((0,ie.pi)((0,ie.pi)({},this.params),{UploadId:this.uploadId,Body:c.data,PartNumber:c.partNumber})))];case 8:return f=I.sent(),this.abortController.signal.aborted?[2]:(this.uploadedParts.push((0,ie.pi)((0,ie.pi)((0,ie.pi)((0,ie.pi)({PartNumber:c.partNumber,ETag:f.ETag},f.ChecksumCRC32&&{ChecksumCRC32:f.ChecksumCRC32}),f.ChecksumCRC32C&&{ChecksumCRC32C:f.ChecksumCRC32C}),f.ChecksumSHA1&&{ChecksumSHA1:f.ChecksumSHA1}),f.ChecksumSHA256&&{ChecksumSHA256:f.ChecksumSHA256})),this.bytesUploadedSoFar+=Qy(c.data),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:c.partNumber,Key:this.params.Key,Bucket:this.params.Bucket}),[3,10]);case 9:if(h=I.sent(),!this.uploadId||this.leavePartsOnError)throw h;return[3,10];case 10:return[3,1];case 11:return[3,18];case 12:return g=I.sent(),s={error:g},[3,18];case 13:return I.trys.push([13,,16,17]),a&&!a.done&&(l=n.return)?[4,l.call(n)]:[3,15];case 14:I.sent(),I.label=15;case 15:return[3,17];case 16:if(s)throw s.error;return[7];case 17:return[7];case 18:return[2]}})})},r.prototype.__doMultipartUpload=function(){return(0,ie.mG)(this,void 0,void 0,function(){var e,n,a,s,l;return(0,ie.Jh)(this,function(c){switch(c.label){case 0:for(e=function(t,r){if(t instanceof gd.lW)return Hb(t,r);if(t instanceof gO.Readable)return Jy(t,r,vO);if(t instanceof String||"string"==typeof t||t instanceof Uint8Array)return Hb(gd.lW.from(t),r);if("function"==typeof t.stream)return Jy(t.stream(),r,qb);if(t instanceof ReadableStream)return Jy(t,r,qb);throw new Error("Body Data is unsupported format, expected data to be one of: string | Uint8Array | Buffer | Readable | ReadableStream | Blob;.")}(this.params.Body,this.partSize),n=0;n<this.queueSize;n++)a=this.__doConcurrentUpload(e),this.concurrentUploaders.push(a);return[4,Promise.all(this.concurrentUploaders)];case 1:if(c.sent(),this.abortController.signal.aborted)throw Object.assign(new Error("Upload aborted."),{name:"AbortError"});return this.isMultiPart?(this.uploadedParts.sort(function(f,h){return f.PartNumber-h.PartNumber}),l=(0,ie.pi)((0,ie.pi)({},this.params),{Body:void 0,UploadId:this.uploadId,MultipartUpload:{Parts:this.uploadedParts}}),[4,this.client.send(new uO(l))]):[3,3];case 2:return s=c.sent(),[3,4];case 3:s=this.putResponse,c.label=4;case 4:return this.tags.length?[4,this.client.send(new dO((0,ie.pi)((0,ie.pi)({},this.params),{Tagging:{TagSet:this.tags}})))]:[3,6];case 5:c.sent(),c.label=6;case 6:return[2,s]}})})},r.prototype.__notifyProgress=function(e){this.uploadEvent&&this.emit(this.uploadEvent,e)},r.prototype.__abortTimeout=function(e){return(0,ie.mG)(this,void 0,void 0,function(){return(0,ie.Jh)(this,function(n){return[2,new Promise(function(a,s){e.onabort=function(){var l=new Error("Upload aborted.");l.name="AbortError",s(l)}})]})})},r.prototype.__validateInput=function(){if(!this.params)throw new Error("InputError: Upload requires params to be passed to upload.");if(!this.client)throw new Error("InputError: Upload requires a AWS client to do uploads with.");if(this.partSize<Zy)throw new Error("EntityTooSmall: Your proposed upload partsize ["+this.partSize+"] is smaller than the minimum allowed size ["+Zy+"] (5MB)");if(this.queueSize<1)throw new Error("Queue size: Must have at least one uploading queue.")},r}(fO.EventEmitter),Jo=function(t){function r(e){var n=t.call(this,e)||this;return Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Gx),xO=function(t){function r(e){var n=t.call(this,(0,ie.pi)({name:"InternalErrorException",$fault:"server"},e))||this;return n.name="InternalErrorException",n.$fault="server",Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Jo),bO=function(t){function r(e){var n=t.call(this,(0,ie.pi)({name:"InvalidParameterException",$fault:"client"},e))||this;return n.name="InvalidParameterException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Jo),CO=function(t){function r(e){var n=t.call(this,(0,ie.pi)({name:"LimitExceededException",$fault:"client"},e))||this;return n.name="LimitExceededException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Jo),wO=function(t){function r(e){var n=t.call(this,(0,ie.pi)({name:"NotAuthorizedException",$fault:"client"},e))||this;return n.name="NotAuthorizedException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Jo),SO=function(t){function r(e){var n=t.call(this,(0,ie.pi)({name:"ResourceConflictException",$fault:"client"},e))||this;return n.name="ResourceConflictException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Jo),EO=function(t){function r(e){var n=t.call(this,(0,ie.pi)({name:"TooManyRequestsException",$fault:"client"},e))||this;return n.name="TooManyRequestsException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Jo),TO=function(t){function r(e){var n=t.call(this,(0,ie.pi)({name:"ResourceNotFoundException",$fault:"client"},e))||this;return n.name="ResourceNotFoundException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Jo),AO=function(t){function r(e){var n=t.call(this,(0,ie.pi)({name:"ExternalServiceException",$fault:"client"},e))||this;return n.name="ExternalServiceException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Jo),dg=(()=>((dg||(dg={})).filterSensitiveLog=function(r){return(0,ie.pi)({},r)},dg))(),fg=(()=>((fg||(fg={})).filterSensitiveLog=function(r){return(0,ie.pi)({},r)},fg))(),kO=function(t){function r(e){var n=t.call(this,(0,ie.pi)({name:"InvalidIdentityPoolConfigurationException",$fault:"client"},e))||this;return n.name="InvalidIdentityPoolConfigurationException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n}return(0,ie.ZT)(r,t),r}(Jo),hg=(()=>((hg||(hg={})).filterSensitiveLog=function(r){return(0,ie.pi)({},r)},hg))(),pg=(()=>((pg||(pg={})).filterSensitiveLog=function(r){return(0,ie.pi)({},r)},pg))(),NO=(function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"DeveloperUserAlreadyRegisteredException",$fault:"client"},e))||this;return n.name="DeveloperUserAlreadyRegisteredException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Jo),function(t){(0,ie.ZT)(function r(e){var n=t.call(this,(0,ie.pi)({name:"ConcurrentModificationException",$fault:"client"},e))||this;return n.name="ConcurrentModificationException",n.$fault="client",Object.setPrototypeOf(n,r.prototype),n},t)}(Jo),function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,c,f;return(0,ie.Jh)(this,function(h){switch(h.label){case 0:return n=[(0,ie.pi)({},t)],f={},[4,kn(t.body,r)];case 1:switch(e=ie.pi.apply(void 0,n.concat([(f.body=h.sent(),f)])),s="UnknownError",s=ji(t,e.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return[4,mg(e,r)];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:throw h.sent();case 4:return[4,Mi(e,r)];case 6:return[4,iM(e,r)];case 8:return[4,Li(e,r)];case 10:return[4,$i(e,r)];case 12:return[4,fa(e,r)];case 14:return[4,Zi(e,r)];case 16:return[4,Ni(e,r)];case 18:throw a=new Jo({name:(c=e.body).code||c.Code||s,$fault:"client",$metadata:rn(t)}),Xr(a,c)}})})}),jO=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a,s,c,f;return(0,ie.Jh)(this,function(h){switch(h.label){case 0:return n=[(0,ie.pi)({},t)],f={},[4,kn(t.body,r)];case 1:switch(e=ie.pi.apply(void 0,n.concat([(f.body=h.sent(),f)])),s="UnknownError",s=ji(t,e.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return[4,mg(e,r)];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:throw h.sent();case 4:return[4,Mi(e,r)];case 6:return[4,Li(e,r)];case 8:return[4,e_(e,r)];case 10:return[4,$i(e,r)];case 12:return[4,fa(e,r)];case 14:return[4,Zi(e,r)];case 16:return[4,Ni(e,r)];case 18:throw a=new Jo({name:(c=e.body).code||c.Code||s,$fault:"client",$metadata:rn(t)}),Xr(a,c)}})})},mg=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){return n=$M(e=t.body,r),a=new AO((0,ie.pi)({$metadata:rn(t)},n)),[2,Xr(a,e)]})})},Mi=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){return n=tL(e=t.body,r),a=new xO((0,ie.pi)({$metadata:rn(t)},n)),[2,Xr(a,e)]})})},iM=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){return n=nL(e=t.body,r),a=new kO((0,ie.pi)({$metadata:rn(t)},n)),[2,Xr(a,e)]})})},Li=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){return n=iL(e=t.body,r),a=new bO((0,ie.pi)({$metadata:rn(t)},n)),[2,Xr(a,e)]})})},e_=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){return n=rL(e=t.body,r),a=new CO((0,ie.pi)({$metadata:rn(t)},n)),[2,Xr(a,e)]})})},$i=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){return n=hL(e=t.body,r),a=new wO((0,ie.pi)({$metadata:rn(t)},n)),[2,Xr(a,e)]})})},fa=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){return n=mL(e=t.body,r),a=new SO((0,ie.pi)({$metadata:rn(t)},n)),[2,Xr(a,e)]})})},Zi=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){return n=gL(e=t.body,r),a=new TO((0,ie.pi)({$metadata:rn(t)},n)),[2,Xr(a,e)]})})},Ni=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){return n=SL(e=t.body,r),a=new EO((0,ie.pi)({$metadata:rn(t)},n)),[2,Xr(a,e)]})})},wh=function(t,r){return Object.entries(t).reduce(function(e,n){var a,s=(0,ie.CR)(n,2),l=s[0],c=s[1];return null===c?e:(0,ie.pi)((0,ie.pi)({},e),((a={})[l]=c,a))},{})},zM=function(t,r){return{AccessKeyId:Si(t.AccessKeyId),Expiration:null!=t.Expiration?qm(nk(yh(t.Expiration))):void 0,SecretKey:Si(t.SecretKey),SessionToken:Si(t.SessionToken)}},$M=function(t,r){return{message:Si(t.message)}},tL=function(t,r){return{message:Si(t.message)}},nL=function(t,r){return{message:Si(t.message)}},iL=function(t,r){return{message:Si(t.message)}},rL=function(t,r){return{message:Si(t.message)}},hL=function(t,r){return{message:Si(t.message)}},mL=function(t,r){return{message:Si(t.message)}},gL=function(t,r){return{message:Si(t.message)}},SL=function(t,r){return{message:Si(t.message)}},rn=function(t){var r;return{httpStatusCode:t.statusCode,requestId:null!==(r=t.headers["x-amzn-requestid"])&&void 0!==r?r:t.headers["x-amzn-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}},Bi=function(t,r,e,n,a){return(0,ie.mG)(void 0,void 0,void 0,function(){var s,c,g,I;return(0,ie.Jh)(this,function(B){switch(B.label){case 0:return[4,t.endpoint()];case 1:return s=B.sent(),I={protocol:void 0===(c=s.protocol)?"https":c,hostname:s.hostname,port:s.port,method:"POST",path:(g=s.path).endsWith("/")?g.slice(0,-1)+e:g+e,headers:r},void 0!==n&&(I.hostname=n),void 0!==a&&(I.body=a),[2,new Gi(I)]}})})},kn=function(t,r){return function(t,r){return function(t,r){return void 0===t&&(t=new Uint8Array),t instanceof Uint8Array?Promise.resolve(t):r.streamCollector(t)||Promise.resolve(new Uint8Array)}(t,r).then(function(e){return r.utf8Encoder(e)})}(t,r).then(function(e){return e.length?JSON.parse(e):{}})},ji=function(t,r){var n=function(s){var l=s;return l.indexOf(":")>=0&&(l=l.split(":")[0]),l.indexOf("#")>=0&&(l=l.split("#")[1]),l},a=("x-amzn-errortype",Object.keys(t.headers).find(function(c){return c.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==a?n(t.headers[a]):void 0!==r.code?n(r.code):void 0!==r.__type?n(r.__type):""},nC=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return(0,ie.ZT)(r,t),r.prototype.resolveMiddleware=function(e,n,a){this.middlewareStack.use(jc(n,this.serialize,this.deserialize));var s=e.concat(this.middlewareStack),g=n.requestHandler;return s.resolve(function(I){return g.handle(I.request,a||{})},{logger:n.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:hg.filterSensitiveLog,outputFilterSensitiveLog:pg.filterSensitiveLog})},r.prototype.serialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n;return(0,ie.Jh)(this,function(a){return e={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},n=JSON.stringify(function(t,r){return(0,ie.pi)((0,ie.pi)((0,ie.pi)({},null!=t.AccountId&&{AccountId:t.AccountId}),null!=t.IdentityPoolId&&{IdentityPoolId:t.IdentityPoolId}),null!=t.Logins&&{Logins:wh(t.Logins,r)})}(t,r)),[2,Bi(r,e,"/",void 0,n)]})})}(e,n)},r.prototype.deserialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){switch(s.label){case 0:return t.statusCode>=300?[2,jO(t,r)]:[4,kn(t.body,r)];case 1:return e=s.sent(),n=function(t,r){return{IdentityId:Si(t.IdentityId)}}(e),a=(0,ie.pi)({$metadata:rn(t)},n),[2,Promise.resolve(a)]}})})}(e,n)},r}(zc),gg=(function(t){function r(e,n){void 0===n&&(n=!0);var a=t.call(this,e)||this;return a.tryNextLink=n,a}(0,ie.ZT)(r,t),r.from=function(e,n){return void 0===n&&(n=!0),Object.defineProperty(e,"tryNextLink",{value:n,configurable:!1,enumerable:!1,writable:!1}),e}}(Error),function(t){function r(e,n){void 0===n&&(n=!0);var a=t.call(this,e)||this;return a.tryNextLink=n,a.name="CredentialsProviderError",a}return(0,ie.ZT)(r,t),r.from=function(e,n){return void 0===n&&(n=!0),Object.defineProperty(e,"tryNextLink",{value:n,configurable:!1,enumerable:!1,writable:!1}),e},r}(Error)),iC=function(t,r,e){var n,a,s,l=function(){return(0,ie.mG)(void 0,void 0,void 0,function(){return(0,ie.Jh)(this,function(f){switch(f.label){case 0:a||(a=t()),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,a];case 2:return n=f.sent(),s=!0,[3,4];case 3:return a=void 0,[7];case 4:return[2,n]}})})};if(void 0===r)return function(){return(0,ie.mG)(void 0,void 0,void 0,function(){return(0,ie.Jh)(this,function(f){switch(f.label){case 0:return s?[3,2]:[4,l()];case 1:n=f.sent(),f.label=2;case 2:return[2,n]}})})};var c=!1;return function(){return(0,ie.mG)(void 0,void 0,void 0,function(){return(0,ie.Jh)(this,function(f){switch(f.label){case 0:return s?[3,2]:[4,l()];case 1:n=f.sent(),f.label=2;case 2:return c?[2,n]:e&&!e(n)?(c=!0,[2,n]):r(n)?[4,l()]:[3,4];case 3:return f.sent(),[2,n];case 4:return[2,n]}})})}},rC=function(t){function r(e){var n=t.call(this)||this;return n.input=e,n}return(0,ie.ZT)(r,t),r.prototype.resolveMiddleware=function(e,n,a){this.middlewareStack.use(jc(n,this.serialize,this.deserialize));var s=e.concat(this.middlewareStack),g=n.requestHandler;return s.resolve(function(I){return g.handle(I.request,a||{})},{logger:n.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:dg.filterSensitiveLog,outputFilterSensitiveLog:fg.filterSensitiveLog})},r.prototype.serialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n;return(0,ie.Jh)(this,function(a){return e={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},n=JSON.stringify(function(t,r){return(0,ie.pi)((0,ie.pi)((0,ie.pi)({},null!=t.CustomRoleArn&&{CustomRoleArn:t.CustomRoleArn}),null!=t.IdentityId&&{IdentityId:t.IdentityId}),null!=t.Logins&&{Logins:wh(t.Logins,r)})}(t,r)),[2,Bi(r,e,"/",void 0,n)]})})}(e,n)},r.prototype.deserialize=function(e,n){return function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){var e,n,a;return(0,ie.Jh)(this,function(s){switch(s.label){case 0:return t.statusCode>=300?[2,NO(t,r)]:[4,kn(t.body,r)];case 1:return e=s.sent(),n=function(t,r){return{Credentials:null!=t.Credentials?zM(t.Credentials):void 0,IdentityId:Si(t.IdentityId)}}(e),a=(0,ie.pi)({$metadata:rn(t)},n),[2,Promise.resolve(a)]}})})}(e,n)},r}(zc);function oC(t){return Promise.all(Object.keys(t).reduce(function(r,e){var n=t[e];return r.push("string"==typeof n?[e,n]:n().then(function(a){return[e,a]})),r},[])).then(function(r){return r.reduce(function(e,n){var a=(0,ie.CR)(n,2);return e[a[0]]=a[1],e},{})})}function IL(t){var r=this;return function(){return(0,ie.mG)(r,void 0,void 0,function(){var e,n,a,s,l,c,f,g,I,B,V,ce;return(0,ie.Jh)(this,function(Ie){switch(Ie.label){case 0:return I=(g=t.client).send,B=rC.bind,ce={CustomRoleArn:t.customRoleArn,IdentityId:t.identityId},t.logins?[4,oC(t.logins)]:[3,2];case 1:return V=Ie.sent(),[3,3];case 2:V=void 0,Ie.label=3;case 3:return[4,I.apply(g,[new(B.apply(rC,[void 0,(ce.Logins=V,ce)]))])];case 4:return e=Ie.sent().Credentials,n=void 0===e?function FL(){throw new gg("Response from Amazon Cognito contained no credentials")}():e,s=void 0===(a=n.AccessKeyId)?function PL(){throw new gg("Response from Amazon Cognito contained no access key ID")}():a,l=n.Expiration,f=void 0===(c=n.SecretKey)?function RL(){throw new gg("Response from Amazon Cognito contained no secret key")}():c,[2,{identityId:t.identityId,accessKeyId:s,secretAccessKey:f,sessionToken:n.SessionToken,expiration:l}]}})})}}var i_="IdentityIds",DL=function(){function t(r){void 0===r&&(r="aws:cognito-identity-ids"),this.dbName=r}return t.prototype.getItem=function(r){return this.withObjectStore("readonly",function(e){var n=e.get(r);return new Promise(function(a){n.onerror=function(){return a(null)},n.onsuccess=function(){return a(n.result?n.result.value:null)}})}).catch(function(){return null})},t.prototype.removeItem=function(r){return this.withObjectStore("readwrite",function(e){var n=e.delete(r);return new Promise(function(a,s){n.onerror=function(){return s(n.error)},n.onsuccess=function(){return a()}})})},t.prototype.setItem=function(r,e){return this.withObjectStore("readwrite",function(n){var a=n.put({id:r,value:e});return new Promise(function(s,l){a.onerror=function(){return l(a.error)},a.onsuccess=function(){return s()}})})},t.prototype.getDb=function(){var r=self.indexedDB.open(this.dbName,1);return new Promise(function(e,n){r.onsuccess=function(){e(r.result)},r.onerror=function(){n(r.error)},r.onblocked=function(){n(new Error("Unable to access DB"))},r.onupgradeneeded=function(){var a=r.result;a.onerror=function(){n(new Error("Failed to create object store"))},a.createObjectStore(i_,{keyPath:"id"})}})},t.prototype.withObjectStore=function(r,e){return this.getDb().then(function(n){var a=n.transaction(i_,r);return a.oncomplete=function(){return n.close()},new Promise(function(s,l){a.onerror=function(){return l(a.error)},s(e(a.objectStore(i_)))}).catch(function(s){throw n.close(),s})})},t}(),ML=new(function(){function t(r){void 0===r&&(r={}),this.store=r}return t.prototype.getItem=function(r){return r in this.store?this.store[r]:null},t.prototype.removeItem=function(r){delete this.store[r]},t.prototype.setItem=function(r,e){this.store[r]=e},t}());function r_(t){var r=this,e=t.accountId,n=t.cache,a=void 0===n?function LL(){return"object"==typeof self&&self.indexedDB?new DL:"object"==typeof window&&window.localStorage?window.localStorage:ML}():n,s=t.client,l=t.customRoleArn,c=t.identityPoolId,f=t.logins,h=t.userIdentifier,g=void 0===h?f&&0!==Object.keys(f).length?void 0:"ANONYMOUS":h,I=g?"aws:cognito-identity-credentials:"+c+":"+g:void 0,B=function(){return(0,ie.mG)(r,void 0,void 0,function(){var V,ce,Ie,he,Se,Oe,Be,et,at;return(0,ie.Jh)(this,function(ft){switch(ft.label){case 0:return(ce=I)?[4,a.getItem(I)]:[3,2];case 1:ce=ft.sent(),ft.label=2;case 2:return(V=ce)?[3,7]:(Oe=(Se=s).send,Be=nC.bind,at={AccountId:e,IdentityPoolId:c},f?[4,oC(f)]:[3,4]);case 3:return et=ft.sent(),[3,5];case 4:et=void 0,ft.label=5;case 5:return[4,Oe.apply(Se,[new(Be.apply(nC,[void 0,(at.Logins=et,at)]))])];case 6:Ie=ft.sent().IdentityId,he=void 0===Ie?function NL(){throw new gg("Response from Amazon Cognito contained no identity ID")}():Ie,V=he,I&&Promise.resolve(a.setItem(I,V)).catch(function(){}),ft.label=7;case 7:return[2,(B=IL({client:s,customRoleArn:l,logins:f,identityId:V}))()]}})})};return function(){return B().catch(function(V){return(0,ie.mG)(r,void 0,void 0,function(){return(0,ie.Jh)(this,function(ce){throw I&&Promise.resolve(a.removeItem(I)).catch(function(){}),V})})})}}var $L=function(t){var r=t.endpoint;if("string"==typeof r){var n=Promise.resolve((0,t.urlParser)(r));return function(){return n}}if("object"==typeof r){var a=Promise.resolve(r);return function(){return a}}return r},lC=function(t){var r,e=function(t){if("boolean"==typeof t){var r=Promise.resolve(t);return function(){return r}}return t}(t.useDualstackEndpoint),n=t.endpoint,a=t.useFipsEndpoint;return(0,ie.pi)((0,ie.pi)({},t),{tls:null===(r=t.tls)||void 0===r||r,endpoint:n?$L((0,ie.pi)((0,ie.pi)({},t),{endpoint:n})):function(){return function(t){return(0,ie.mG)(void 0,void 0,void 0,function(){var r,e,n,s,l,c,f;return(0,ie.Jh)(this,function(h){switch(h.label){case 0:return e=void 0===(r=t.tls)||r,[4,t.region()];case 1:if(n=h.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,t.useDualstackEndpoint()];case 2:return s=h.sent(),[4,t.useFipsEndpoint()];case 3:return l=h.sent(),[4,t.regionInfoProvider(n,{useDualstackEndpoint:s,useFipsEndpoint:l})];case 4:if(!(c=(null!==(f=h.sent())&&void 0!==f?f:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,t.urlParser((e?"https:":"http:")+"//"+c)]}})})}((0,ie.pi)((0,ie.pi)({},t),{useDualstackEndpoint:e,useFipsEndpoint:a}))},isCustomEndpoint:!!n,useDualstackEndpoint:e})},cC=function(t){return"string"==typeof t&&(t.startsWith("fips-")||t.endsWith("-fips"))},uC=function(t){return cC(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t},dC=function(t){var r=t.region,e=t.useFipsEndpoint;if(!r)throw new Error("Region is missing");return(0,ie.pi)((0,ie.pi)({},t),{region:function(){return(0,ie.mG)(void 0,void 0,void 0,function(){var n;return(0,ie.Jh)(this,function(a){switch(a.label){case 0:return"string"==typeof r?[2,uC(r)]:[4,r()];case 1:return n=a.sent(),[2,uC(n)]}})})},useFipsEndpoint:function(){return(0,ie.mG)(void 0,void 0,void 0,function(){var a;return(0,ie.Jh)(this,function(s){switch(s.label){case 0:return"string"!=typeof r?[3,1]:(a=r,[3,3]);case 1:return[4,r()];case 2:a=s.sent(),s.label=3;case 3:return cC(a)?[2,!0]:[2,"boolean"==typeof e?Promise.resolve(e):e()]}})})}})},fC=function(t,r){var e;void 0===t&&(t=[]);var n=r.useFipsEndpoint,a=r.useDualstackEndpoint;return null===(e=t.find(function(s){var l=s.tags;return n===l.includes("fips")&&a===l.includes("dualstack")}))||void 0===e?void 0:e.hostname},hC=function(t,r){var e,n,a,s,l,c,f=r.useFipsEndpoint,h=void 0!==f&&f,g=r.useDualstackEndpoint,I=void 0!==g&&g,B=r.signingService,V=r.regionHash,ce=r.partitionHash,Ie=function(t,r){var e,n=r.partitionHash;return null!==(e=Object.keys(n||{}).find(function(a){return n[a].regions.includes(t)}))&&void 0!==e?e:"aws"}(t,{partitionHash:ce}),he=t in V?t:null!==(n=null===(e=ce[Ie])||void 0===e?void 0:e.endpoint)&&void 0!==n?n:t,Se={useFipsEndpoint:h,useDualstackEndpoint:I},et=function(t,r){var n=r.partitionHostname;return r.regionHostname||(n?n.replace("{region}",t):void 0)}(he,{regionHostname:fC(null===(a=V[he])||void 0===a?void 0:a.variants,Se),partitionHostname:fC(null===(s=ce[Ie])||void 0===s?void 0:s.variants,Se)});if(void 0===et)throw new Error("Endpoint resolution failed for: "+{resolvedRegion:he,useFipsEndpoint:h,useDualstackEndpoint:I});var at=function(t,r){var e=r.signingRegion;if(e)return e;if(r.useFipsEndpoint){var s=r.regionRegex.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),l=t.match(s);if(l)return l[0].slice(1,-1)}}(et,{signingRegion:null===(l=V[he])||void 0===l?void 0:l.signingRegion,regionRegex:ce[Ie].regionRegex,useFipsEndpoint:h});return(0,ie.pi)((0,ie.pi)({partition:Ie,signingService:B,hostname:et},at&&{signingRegion:at}),(null===(c=V[he])||void 0===c?void 0:c.signingService)&&{signingService:V[he].signingService})},pC="content-length",JL={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},mC=function(t){return{applyToStack:function(r){r.add(function QL(t){var r=this;return function(e){return function(n){return(0,ie.mG)(r,void 0,void 0,function(){var a,s,l,c,f,h;return(0,ie.Jh)(this,function(g){if(Gi.isInstance(a=n.request)&&(l=a.headers,(s=a.body)&&-1===Object.keys(l).map(function(I){return I.toLowerCase()}).indexOf(pC)))try{c=t(s),a.headers=(0,ie.pi)((0,ie.pi)({},a.headers),((f={})[pC]=String(c),f))}catch{a.headers=(0,ie.pi)((0,ie.pi)({},a.headers),((h={})["transfer-encoding"]="chunked",h))}return[2,e((0,ie.pi)((0,ie.pi)({},n),{request:a}))]})})}}}(t.bodyLengthChecker),JL)}}},e3={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},gC=function(t){return{applyToStack:function(r){r.add(function(t){return function(r){return function(e){return(0,ie.mG)(void 0,void 0,void 0,function(){var n,a;return(0,ie.Jh)(this,function(l){return Gi.isInstance(e.request)?(n=e.request,(void 0===(a=(t.requestHandler.metadata||{}).handlerProtocol)?"":a).indexOf("h2")>=0&&!n.headers[":authority"]?(delete n.headers.host,n.headers[":authority"]=""):n.headers.host||(n.headers.host=n.hostname),[2,r(e)]):[2,r(e)]})})}}}(t),e3)}}},n3={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},vC=function(t){return{applyToStack:function(r){r.add(function(t,r){return function(e){return(0,ie.mG)(void 0,void 0,void 0,function(){var n,a,s,l,c,f,h,g,I;return(0,ie.Jh)(this,function(B){switch(B.label){case 0:return n=r.clientName,a=r.commandName,s=r.inputFilterSensitiveLog,l=r.logger,c=r.outputFilterSensitiveLog,[4,t(e)];case 1:return f=B.sent(),l?("function"==typeof l.info&&(g=(h=f.output).$metadata,I=(0,ie._T)(h,["$metadata"]),l.info({clientName:n,commandName:a,input:s(e.input),output:c(I),metadata:g})),[2,f]):[2,f]}})})}},n3)}}},Gc=(()=>{return(t=Gc||(Gc={})).STANDARD="standard",t.ADAPTIVE="adaptive",Gc;var t})(),o_=Gc.STANDARD,r3=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],o3=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],a3=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],s3=[500,502,503,504],a_=function(t){var r,e;return 429===(null===(r=t.$metadata)||void 0===r?void 0:r.httpStatusCode)||o3.includes(t.name)||1==(null===(e=t.$retryable)||void 0===e?void 0:e.throttling)},d3=function(){function t(r){var e,n,a,s,l;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(e=null==r?void 0:r.beta)&&void 0!==e?e:.7,this.minCapacity=null!==(n=null==r?void 0:r.minCapacity)&&void 0!==n?n:1,this.minFillRate=null!==(a=null==r?void 0:r.minFillRate)&&void 0!==a?a:.5,this.scaleConstant=null!==(s=null==r?void 0:r.scaleConstant)&&void 0!==s?s:.4,this.smooth=null!==(l=null==r?void 0:r.smooth)&&void 0!==l?l:.8;var c=this.getCurrentTimeInSeconds();this.lastThrottleTime=c,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return t.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},t.prototype.getSendToken=function(){return(0,ie.mG)(this,void 0,void 0,function(){return(0,ie.Jh)(this,function(r){return[2,this.acquireTokenBucket(1)]})})},t.prototype.acquireTokenBucket=function(r){return(0,ie.mG)(this,void 0,void 0,function(){var e;return(0,ie.Jh)(this,function(n){switch(n.label){case 0:return this.enabled?(this.refillTokenBucket(),r>this.currentCapacity?(e=(r-this.currentCapacity)/this.fillRate*1e3,[4,new Promise(function(a){return setTimeout(a,e)})]):[3,2]):[2];case 1:n.sent(),n.label=2;case 2:return this.currentCapacity=this.currentCapacity-r,[2]}})})},t.prototype.refillTokenBucket=function(){var r=this.getCurrentTimeInSeconds();this.lastTimestamp?(this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+(r-this.lastTimestamp)*this.fillRate),this.lastTimestamp=r):this.lastTimestamp=r},t.prototype.updateClientSendingRate=function(r){var e;if(this.updateMeasuredRate(),a_(r)){var n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),e=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),e=this.cubicSuccess(this.getCurrentTimeInSeconds());var a=Math.min(e,2*this.measuredTxRate);this.updateTokenBucketRate(a)},t.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},t.prototype.cubicThrottle=function(r){return this.getPrecise(r*this.beta)},t.prototype.cubicSuccess=function(r){return this.getPrecise(this.scaleConstant*Math.pow(r-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},t.prototype.enableTokenBucket=function(){this.enabled=!0},t.prototype.updateTokenBucketRate=function(r){this.refillTokenBucket(),this.fillRate=Math.max(r,this.minFillRate),this.maxCapacity=Math.max(r,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},t.prototype.updateMeasuredRate=function(){var r=this.getCurrentTimeInSeconds(),e=Math.floor(2*r)/2;this.requestCount++,e>this.lastTxRateBucket&&(this.measuredTxRate=this.getPrecise(this.requestCount/(e-this.lastTxRateBucket)*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=e)},t.prototype.getPrecise=function(r){return parseFloat(r.toFixed(8))},t}(),C3=function(t,r){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,r)*t))},w3=function(t){return!!t&&(function(t){return void 0!==t.$retryable}(t)||function(t){return r3.includes(t.name)}(t)||a_(t)||function(t){var r;return a3.includes(t.name)||s3.includes((null===(r=t.$metadata)||void 0===r?void 0:r.httpStatusCode)||0)}(t))},yC=function(){function t(r,e){var n,a,s,l,c,f,h,g,I;this.maxAttemptsProvider=r,this.mode=Gc.STANDARD,this.retryDecider=null!==(n=null==e?void 0:e.retryDecider)&&void 0!==n?n:w3,this.delayDecider=null!==(a=null==e?void 0:e.delayDecider)&&void 0!==a?a:C3,this.retryQuota=null!==(s=null==e?void 0:e.retryQuota)&&void 0!==s?s:(l=1,c=5,f=10,h=500,g=function(ce){return"TimeoutError"===ce.name?f:c},I=function(ce){return g(ce)<=h},Object.freeze({hasRetryTokens:I,retrieveRetryTokens:function(ce){if(!I(ce))throw new Error("No retry token available");var Ie=g(ce);return h-=Ie,Ie},releaseRetryTokens:function(ce){h+=ce??l,h=Math.min(h,500)}}))}return t.prototype.shouldRetry=function(r,e,n){return e<n&&this.retryDecider(r)&&this.retryQuota.hasRetryTokens(r)},t.prototype.getMaxAttempts=function(){return(0,ie.mG)(this,void 0,void 0,function(){var r;return(0,ie.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return r=n.sent(),[3,3];case 2:return n.sent(),r=3,[3,3];case 3:return[2,r]}})})},t.prototype.retry=function(r,e,n){return(0,ie.mG)(this,void 0,void 0,function(){var a,s,l,c,f,h,g,I;return(0,ie.Jh)(this,function(B){switch(B.label){case 0:return s=0,l=0,[4,this.getMaxAttempts()];case 1:c=B.sent(),Gi.isInstance(f=e.request)&&(f.headers["amz-sdk-invocation-id"]=ai()),h=function(){var V,ce,Ie,he,Se,Oe;return(0,ie.Jh)(this,function(Be){switch(Be.label){case 0:return Be.trys.push([0,4,,7]),Gi.isInstance(f)&&(f.headers["amz-sdk-request"]="attempt="+(s+1)+"; max="+c),(null==n?void 0:n.beforeRequest)?[4,n.beforeRequest()]:[3,2];case 1:Be.sent(),Be.label=2;case 2:return[4,r(e)];case 3:return V=Be.sent(),ce=V.response,Ie=V.output,(null==n?void 0:n.afterRequest)&&n.afterRequest(ce),g.retryQuota.releaseRetryTokens(a),Ie.$metadata.attempts=s+1,Ie.$metadata.totalRetryDelay=l,[2,{value:{response:ce,output:Ie}}];case 4:return he=Be.sent(),Se=S3(he),s++,g.shouldRetry(Se,s,c)?(a=g.retryQuota.retrieveRetryTokens(Se),Oe=g.delayDecider(a_(Se)?500:100,s),l+=Oe,[4,new Promise(function(et){return setTimeout(et,Oe)})]):[3,6];case 5:return Be.sent(),[2,"continue"];case 6:throw Se.$metadata||(Se.$metadata={}),Se.$metadata.attempts=s,Se.$metadata.totalRetryDelay=l,Se;case 7:return[2]}})},g=this,B.label=2;case 2:return[5,h()];case 3:return"object"==typeof(I=B.sent())?[2,I.value]:[3,2];case 4:return[2]}})})},t}(),S3=function(t){return t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):"string"==typeof t?new Error(t):new Error("AWS SDK error wrapper for "+t)},E3=function(t){function r(e,n){var a=this,s=n??{},l=s.rateLimiter,c=(0,ie._T)(s,["rateLimiter"]);return(a=t.call(this,e,c)||this).rateLimiter=l??new d3,a.mode=Gc.ADAPTIVE,a}return(0,ie.ZT)(r,t),r.prototype.retry=function(e,n){return(0,ie.mG)(this,void 0,void 0,function(){var a=this;return(0,ie.Jh)(this,function(s){return[2,t.prototype.retry.call(this,e,n,{beforeRequest:function(){return(0,ie.mG)(a,void 0,void 0,function(){return(0,ie.Jh)(this,function(l){return[2,this.rateLimiter.getSendToken()]})})},afterRequest:function(l){a.rateLimiter.updateClientSendingRate(l)}})]})})},r}(yC),bC=function(t){var r=A3(t.maxAttempts);return(0,ie.pi)((0,ie.pi)({},t),{maxAttempts:r,retryStrategy:function(){return(0,ie.mG)(void 0,void 0,void 0,function(){return(0,ie.Jh)(this,function(n){switch(n.label){case 0:return t.retryStrategy?[2,t.retryStrategy]:[4,T3(t.retryMode)];case 1:return n.sent()===Gc.ADAPTIVE?[2,new E3(r)]:[2,new yC(r)]}})})}})},T3=function(t){return(0,ie.mG)(void 0,void 0,void 0,function(){return(0,ie.Jh)(this,function(r){switch(r.label){case 0:return"string"==typeof t?[2,t]:[4,t()];case 1:return[2,r.sent()]}})})},A3=function(t){if(void 0===t&&(t=3),"number"==typeof t){var r=Promise.resolve(t);return function(){return r}}return t},D3={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},CC=function(t){return{applyToStack:function(r){r.add(function(t){return function(r,e){return function(n){return(0,ie.mG)(void 0,void 0,void 0,function(){var a;return(0,ie.Jh)(this,function(s){switch(s.label){case 0:return[4,t.retryStrategy()];case 1:return(null==(a=s.sent())?void 0:a.mode)&&(e.userAgent=(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(e.userAgent||[])),[["cfg/retry-mode",a.mode]])),[2,a.retry(r,n)]}})})}}}(t),D3)}}},wC=function(t){var c,r=t.credentials?SC(t.credentials):t.credentialDefaultProvider(t),e=t.signingEscapePath,n=void 0===e||e,a=t.systemClockOffset,s=void 0===a?t.systemClockOffset||0:a,l=t.sha256;return c=t.signer?Th(t.signer):function(){return Th(t.region)().then(function(f){return(0,ie.mG)(void 0,void 0,void 0,function(){var h,g,I,B;return(0,ie.Jh)(this,function(V){switch(V.label){case 0:return g=(h=t).regionInfoProvider,I=[f],B={},[4,t.useFipsEndpoint()];case 1:return B.useFipsEndpoint=V.sent(),[4,t.useDualstackEndpoint()];case 2:return[4,g.apply(h,I.concat([(B.useDualstackEndpoint=V.sent(),B)]))];case 3:return[2,[V.sent()||{},f]]}})})}).then(function(f){var h=(0,ie.CR)(f,2),g=h[0],V=g.signingService;t.signingRegion=t.signingRegion||g.signingRegion||h[1],t.signingName=t.signingName||V||t.serviceId;var ce=(0,ie.pi)((0,ie.pi)({},t),{credentials:r,region:t.signingRegion,service:t.signingName,sha256:l,uriEscapePath:n});return new(t.signerConstructor||cg)(ce)})},(0,ie.pi)((0,ie.pi)({},t),{systemClockOffset:s,signingEscapePath:n,credentials:r,signer:c})},Th=function(t){if("object"==typeof t){var r=Promise.resolve(t);return function(){return r}}return t},SC=function(t){return"function"==typeof t?iC(t,function(r){return void 0!==r.expiration&&r.expiration.getTime()-Date.now()<3e5},function(r){return void 0!==r.expiration}):Th(t)},EC=function(t){return new Date(Date.now()+t)},TC=function(t,r){var e=Date.parse(t);return function(t,r){return Math.abs(EC(r).getTime()-t)>=3e5}(e,r)?e-Date.now():r},AC=function(t){var r,e,n;return Bc.isInstance(t)?null!==(e=null===(r=t.headers)||void 0===r?void 0:r.date)&&void 0!==e?e:null===(n=t.headers)||void 0===n?void 0:n.Date:void 0},N3={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};function kC(t){return(0,ie.pi)((0,ie.pi)({},t),{customUserAgent:"string"==typeof t.customUserAgent?[[t.customUserAgent]]:t.customUserAgent})}var IC="user-agent",s_="x-amz-user-agent",j3=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,l_=function(t){var r=(0,ie.CR)(t,2),e=r[0],n=r[1],a=e.indexOf("/"),s=e.substring(0,a),l=e.substring(a+1);return"api"===s&&(l=l.toLowerCase()),[s,l,n].filter(function(c){return c&&c.length>0}).map(function(c){return null==c?void 0:c.replace(j3,"_")}).join("/")},U3={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},FC=function(t){return{applyToStack:function(r){r.add(function(t){return function(r,e){return function(n){return(0,ie.mG)(void 0,void 0,void 0,function(){var a,s,l,c,f,h,g,I,B;return(0,ie.Jh)(this,function(V){switch(V.label){case 0:return Gi.isInstance(a=n.request)?(s=a.headers,l=(null===(I=null==e?void 0:e.userAgent)||void 0===I?void 0:I.map(l_))||[],[4,t.defaultUserAgentProvider()]):[2,r(n)];case 1:return c=V.sent().map(l_),f=(null===(B=null==t?void 0:t.customUserAgent)||void 0===B?void 0:B.map(l_))||[],h=(0,ie.ev)((0,ie.ev)((0,ie.ev)([],(0,ie.CR)(c)),(0,ie.CR)(l)),(0,ie.CR)(f)).join(" "),g=(0,ie.ev)((0,ie.ev)([],(0,ie.CR)(c.filter(function(ce){return ce.startsWith("aws-sdk-")}))),(0,ie.CR)(f)).join(" "),"browser"!==t.runtime?(g&&(s[s_]=s[s_]?s[IC]+" "+g:g),s[IC]=h):s[s_]=h,[2,r((0,ie.pi)((0,ie.pi)({},n),{request:a}))]}})})}}}(t),U3)}}};var G3=S(6513);function H3(t){return void 0===t&&(t=0),new Promise(function(r,e){t&&setTimeout(function(){var n=new Error("Request did not complete within "+t+" ms");n.name="TimeoutError",e(n)},t)})}for(var RC=function(){function t(r){var e=this;"function"==typeof r?this.configProvider=function(){return(0,ie.mG)(e,void 0,void 0,function(){return(0,ie.Jh)(this,function(n){switch(n.label){case 0:return[4,r()];case 1:return[2,n.sent()||{}]}})})}:this.config=r??{}}return t.prototype.destroy=function(){},t.prototype.handle=function(r,e){var a=(void 0===e?{}:e).abortSignal;return(0,ie.mG)(this,void 0,void 0,function(){var s,l,c,f,h,g,I,B,ce,Ie,he;return(0,ie.Jh)(this,function(Se){switch(Se.label){case 0:return!this.config&&this.configProvider?(s=this,[4,this.configProvider()]):[3,2];case 1:s.config=Se.sent(),Se.label=2;case 2:return l=this.config.requestTimeout,(null==a?void 0:a.aborted)?((c=new Error("Request aborted")).name="AbortError",[2,Promise.reject(c)]):(f=r.path,r.query&&(h=function $3(t){var r,e,n=[];try{for(var a=(0,ie.XA)(Object.keys(t).sort()),s=a.next();!s.done;s=a.next()){var l=s.value,c=t[l];if(l=Vc(l),Array.isArray(c))for(var f=0,h=c.length;f<h;f++)n.push(l+"="+Vc(c[f]));else{var g=l;(c||"string"==typeof c)&&(g+="="+Vc(c)),n.push(g)}}}catch(I){r={error:I}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return n.join("&")}(r.query),h&&(f+="?"+h)),B=r.protocol+"//"+r.hostname+((g=r.port)?":"+g:"")+f,ce={body:"GET"===(I=r.method)||"HEAD"===I?void 0:r.body,headers:new Headers(r.headers),method:I},"undefined"!=typeof AbortController&&(ce.signal=a),Ie=new Request(B,ce),he=[fetch(Ie).then(function(Oe){var Be,et,at=Oe.headers,ft={};try{for(var Pt=(0,ie.XA)(at.entries()),Rt=Pt.next();!Rt.done;Rt=Pt.next()){var on=Rt.value;ft[on[0]]=on[1]}}catch(Vt){Be={error:Vt}}finally{try{Rt&&!Rt.done&&(et=Pt.return)&&et.call(Pt)}finally{if(Be)throw Be.error}}return void 0!==Oe.body?{response:new Bc({headers:ft,statusCode:Oe.status,body:Oe.body})}:Oe.blob().then(function(Vt){return{response:new Bc({headers:ft,statusCode:Oe.status,body:Vt})}})}),H3(l)],a&&he.push(new Promise(function(Oe,Be){a.onabort=function(){var et=new Error("Request aborted");et.name="AbortError",Be(et)}})),[2,Promise.race(he)])}})})},t}(),Vl={},vd=new Array(64),zr=0,Ah="A".charCodeAt(0),c_="Z".charCodeAt(0);zr+Ah<=c_;zr++){var Gl=String.fromCharCode(zr+Ah);Vl[Gl]=zr,vd[zr]=Gl}for(zr=0,Ah="a".charCodeAt(0),c_="z".charCodeAt(0);zr+Ah<=c_;zr++)Gl=String.fromCharCode(zr+Ah),Vl[Gl]=kh=zr+26,vd[kh]=Gl;for(zr=0;zr<10;zr++){var kh;Vl[zr.toString(10)]=zr+52,Gl=zr.toString(10),Vl[Gl]=kh=zr+52,vd[kh]=Gl}function u_(t){var r=t.length/4*3;"=="===t.substr(-2)?r-=2:"="===t.substr(-1)&&r--;for(var e=new ArrayBuffer(r),n=new DataView(e),a=0;a<t.length;a+=4){for(var s=0,l=0,c=a,f=a+3;c<=f;c++)if("="!==t[c]){if(!(t[c]in Vl))throw new TypeError("Invalid character "+t[c]+" in base64 string.");s|=Vl[t[c]]<<6*(f-c),l+=6}else s>>=6;var h=a/4*3;s>>=l%8;for(var g=Math.floor(l/8),I=0;I<g;I++){var B=8*(g-I-1);n.setUint8(h+I,(s&255<<B)>>B)}}return new Uint8Array(e)}function DC(t){for(var r="",e=0;e<t.length;e+=3){for(var n=0,a=0,s=e,l=Math.min(e+3,t.length);s<l;s++)n|=t[s]<<8*(l-s-1),a+=8;var c=Math.ceil(a/6);n<<=6*c-a;for(var f=1;f<=c;f++){var h=6*(c-f);r+=vd[(n&63<<h)>>h]}r+="==".slice(0,4-c)}return r}Vl["+"]=62,vd[62]="+",Vl["/"]=63,vd[63]="/";var OC=function(t){return"function"==typeof Blob&&t instanceof Blob?function X3(t){return(0,ie.mG)(this,void 0,void 0,function(){var r,e;return(0,ie.Jh)(this,function(n){switch(n.label){case 0:return[4,K3(t)];case 1:return r=n.sent(),e=u_(r),[2,new Uint8Array(e)]}})})}(t):function W3(t){return(0,ie.mG)(this,void 0,void 0,function(){var r,e,n,a,s,l,c;return(0,ie.Jh)(this,function(f){switch(f.label){case 0:r=new Uint8Array(0),e=t.getReader(),n=!1,f.label=1;case 1:return n?[3,3]:[4,e.read()];case 2:return a=f.sent(),s=a.done,(l=a.value)&&(c=r,(r=new Uint8Array(c.length+l.length)).set(c),r.set(l,c.length)),n=s,[3,1];case 3:return[2,r]}})})}(t)};function K3(t){return new Promise(function(r,e){var n=new FileReader;n.onloadend=function(){var a;if(2!==n.readyState)return e(new Error("Reader aborted too early"));var s=null!==(a=n.result)&&void 0!==a?a:"",l=s.indexOf(",");r(s.substring(l>-1?l+1:s.length))},n.onabort=function(){return e(new Error("Read aborted"))},n.onerror=function(){return e(n.error)},n.readAsDataURL(t)})}var MC=function(t){return function(){return Promise.reject(t)}},LC=function(t){if("string"==typeof t){for(var r=t.length,e=r-1;e>=0;e--){var n=t.charCodeAt(e);n>127&&n<=2047?r++:n>2047&&n<=65535&&(r+=2)}return r}if("number"==typeof t.byteLength)return t.byteLength;if("number"==typeof t.size)return t.size;throw new Error("Body Length computation failed for "+t)},Y3=S(3962),NC=S.n(Y3),BC=function(t){var r=t.serviceId,e=t.clientVersion;return function(){return(0,ie.mG)(void 0,void 0,void 0,function(){var n,a,s,l,c,f,h,g,I;return(0,ie.Jh)(this,function(B){return n="undefined"!=typeof window&&(null===(s=null==window?void 0:window.navigator)||void 0===s?void 0:s.userAgent)?NC().parse(window.navigator.userAgent):void 0,a=[["aws-sdk-js",e],["os/"+((null===(l=null==n?void 0:n.os)||void 0===l?void 0:l.name)||"other"),null===(c=null==n?void 0:n.os)||void 0===c?void 0:c.version],["lang/js"],["md/browser",(null!==(h=null===(f=null==n?void 0:n.browser)||void 0===f?void 0:f.name)&&void 0!==h?h:"unknown")+"_"+(null!==(I=null===(g=null==n?void 0:n.browser)||void 0===g?void 0:g.version)&&void 0!==I?I:"unknown")]],r&&a.push(["api/"+r,e]),[2,a]})})}},Ph=S(2093),jC=function(t){var c,r=new URL(t),e=r.hostname,n=r.pathname,a=r.port,s=r.protocol,l=r.search;return l&&(c=function Q3(t){var r,e,n={};if(t=t.replace(/^\?/,""))try{for(var a=(0,ie.XA)(t.split("&")),s=a.next();!s.done;s=a.next()){var c=(0,ie.CR)(s.value.split("="),2),f=c[0],h=c[1],g=void 0===h?null:h;f=decodeURIComponent(f),g&&(g=decodeURIComponent(g)),f in n?Array.isArray(n[f])?n[f].push(g):n[f]=[n[f],g]:n[f]=g}}catch(I){r={error:I}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return n}(l)),{hostname:e,port:a?parseInt(a):void 0,protocol:s,path:n,query:c}},J3={"us-east-1":{variants:[{hostname:"cognito-identity-fips.us-east-1.amazonaws.com",tags:["fips"]}]},"us-east-2":{variants:[{hostname:"cognito-identity-fips.us-east-2.amazonaws.com",tags:["fips"]}]},"us-gov-west-1":{variants:[{hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",tags:["fips"]}]},"us-west-2":{variants:[{hostname:"cognito-identity-fips.us-west-2.amazonaws.com",tags:["fips"]}]}},Z3={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","fips-us-east-1","fips-us-east-2","fips-us-west-2","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.amazonaws.com",tags:[]},{hostname:"cognito-identity-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"cognito-identity-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"cognito-identity.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.amazonaws.com.cn",tags:[]},{hostname:"cognito-identity-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"cognito-identity-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"cognito-identity.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.c2s.ic.gov",tags:[]},{hostname:"cognito-identity-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.sc2s.sgov.gov",tags:[]},{hostname:"cognito-identity-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["fips-us-gov-west-1","us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.amazonaws.com",tags:[]},{hostname:"cognito-identity-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"cognito-identity-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"cognito-identity.{region}.api.aws",tags:["dualstack"]}]}},eN=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){return(0,ie.Jh)(this,function(e){return[2,hC(t,(0,ie.pi)((0,ie.pi)({},r),{signingService:"cognito-identity",regionHash:J3,partitionHash:Z3}))]})})},nN=["in-region","cross-region","mobile","standard","legacy"],zC=function(t){var e=(void 0===t?{}:t).defaultsMode;return iC(function(){return(0,ie.mG)(void 0,void 0,void 0,function(){var n,a;return(0,ie.Jh)(this,function(s){switch(s.label){case 0:return"function"!=typeof e?[3,2]:[4,e()];case 1:return a=s.sent(),[3,3];case 2:a=e,s.label=3;case 3:switch(null==(n=a)?void 0:n.toLowerCase()){case"auto":return[2,Promise.resolve(iN()?"mobile":"standard")];case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return[2,Promise.resolve(null==n?void 0:n.toLocaleLowerCase())];case void 0:return[2,Promise.resolve("legacy")];default:throw new Error('Invalid parameter for "defaultsMode", expect '+nN.join(", ")+", got "+n)}return[2]}})})})},iN=function(){var t,r,e="undefined"!=typeof window&&(null===(t=null==window?void 0:window.navigator)||void 0===t?void 0:t.userAgent)?NC().parse(window.navigator.userAgent):void 0,n=null===(r=null==e?void 0:e.platform)||void 0===r?void 0:r.type;return"tablet"===n||"mobile"===n},d_=function(t){function r(e){var n=this,a=function(t){var r,e,n,a,s,l,c,f,h,g,I,B,V,ce,Ie,he=zC(t),Se=function(){return he().then(Vx)},Oe=function(t){var r,e,n,a,s;return{apiVersion:"2014-06-30",disableHostPrefix:null!==(r=null==t?void 0:t.disableHostPrefix)&&void 0!==r&&r,logger:null!==(e=null==t?void 0:t.logger)&&void 0!==e?e:{},regionInfoProvider:null!==(n=null==t?void 0:t.regionInfoProvider)&&void 0!==n?n:eN,serviceId:null!==(a=null==t?void 0:t.serviceId)&&void 0!==a?a:"Cognito Identity",urlParser:null!==(s=null==t?void 0:t.urlParser)&&void 0!==s?s:jC}}(t);return(0,ie.pi)((0,ie.pi)((0,ie.pi)({},Oe),t),{runtime:"browser",defaultsMode:he,base64Decoder:null!==(r=null==t?void 0:t.base64Decoder)&&void 0!==r?r:u_,base64Encoder:null!==(e=null==t?void 0:t.base64Encoder)&&void 0!==e?e:DC,bodyLengthChecker:null!==(n=null==t?void 0:t.bodyLengthChecker)&&void 0!==n?n:LC,credentialDefaultProvider:null!==(a=null==t?void 0:t.credentialDefaultProvider)&&void 0!==a?a:function(Be){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(s=null==t?void 0:t.defaultUserAgentProvider)&&void 0!==s?s:BC({serviceId:Oe.serviceId,clientVersion:"3.54.0"}),maxAttempts:null!==(l=null==t?void 0:t.maxAttempts)&&void 0!==l?l:3,region:null!==(c=null==t?void 0:t.region)&&void 0!==c?c:MC("Region is missing"),requestHandler:null!==(f=null==t?void 0:t.requestHandler)&&void 0!==f?f:new RC(Se),retryMode:null!==(h=null==t?void 0:t.retryMode)&&void 0!==h?h:function(){return(0,ie.mG)(void 0,void 0,void 0,function(){return(0,ie.Jh)(this,function(Be){switch(Be.label){case 0:return[4,Se()];case 1:return[2,Be.sent().retryMode||o_]}})})},sha256:null!==(g=null==t?void 0:t.sha256)&&void 0!==g?g:G3.Sha256,streamCollector:null!==(I=null==t?void 0:t.streamCollector)&&void 0!==I?I:OC,useDualstackEndpoint:null!==(B=null==t?void 0:t.useDualstackEndpoint)&&void 0!==B?B:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(V=null==t?void 0:t.useFipsEndpoint)&&void 0!==V?V:function(){return Promise.resolve(!1)},utf8Decoder:null!==(ce=null==t?void 0:t.utf8Decoder)&&void 0!==ce?ce:Ph.fromUtf8,utf8Encoder:null!==(Ie=null==t?void 0:t.utf8Encoder)&&void 0!==Ie?Ie:Ph.toUtf8})}(e),s=dC(a),l=lC(s),c=bC(l),g=kC(wC(c));return(n=t.call(this,g)||this).config=g,n.middlewareStack.use(CC(n.config)),n.middlewareStack.use(mC(n.config)),n.middlewareStack.use(gC(n.config)),n.middlewareStack.use(vC()),n.middlewareStack.use(FC(n.config)),n}return(0,ie.ZT)(r,t),r.prototype.destroy=function(){t.prototype.destroy.call(this)},r}(Lx),sN={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0};var uN=S(6982),dN=S(4907),UC=S(7502),f_=function(){function t(r){if(this.bytes=r,8!==r.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return t.fromNumber=function(r){if(r>0x8000000000000000||r<-0x8000000000000000)throw new Error(r+" is too large (or, if negative, too small) to represent as an Int64");for(var e=new Uint8Array(8),n=7,a=Math.abs(Math.round(r));n>-1&&a>0;n--,a/=256)e[n]=a;return r<0&&VC(e),new t(e)},t.prototype.valueOf=function(){var r=this.bytes.slice(0),e=128&r[0];return e&&VC(r),parseInt(da(r),16)*(e?-1:1)},t.prototype.toString=function(){return String(this.valueOf())},t}();function VC(t){for(var r=0;r<8;r++)t[r]^=255;for(r=7;r>-1&&(t[r]++,0===t[r]);r--);}var fN=function(){function t(r,e){this.toUtf8=r,this.fromUtf8=e}return t.prototype.format=function(r){var e,n,a,s,l=[];try{for(var c=(0,ie.XA)(Object.keys(r)),f=c.next();!f.done;f=c.next()){var h=f.value,g=this.fromUtf8(h);l.push(Uint8Array.from([g.byteLength]),g,this.formatHeaderValue(r[h]))}}catch(he){e={error:he}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}var I=new Uint8Array(l.reduce(function(he,Se){return he+Se.byteLength},0)),B=0;try{for(var V=(0,ie.XA)(l),ce=V.next();!ce.done;ce=V.next()){var Ie=ce.value;I.set(Ie,B),B+=Ie.byteLength}}catch(he){a={error:he}}finally{try{ce&&!ce.done&&(s=V.return)&&s.call(V)}finally{if(a)throw a.error}}return I},t.prototype.formatHeaderValue=function(r){switch(r.type){case"boolean":return Uint8Array.from([r.value?0:1]);case"byte":return Uint8Array.from([2,r.value]);case"short":var e=new DataView(new ArrayBuffer(3));return e.setUint8(0,3),e.setInt16(1,r.value,!1),new Uint8Array(e.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,r.value,!1),new Uint8Array(n.buffer);case"long":var a=new Uint8Array(9);return a[0]=5,a.set(r.value.bytes,1),a;case"binary":var s=new DataView(new ArrayBuffer(3+r.value.byteLength));s.setUint8(0,6),s.setUint16(1,r.value.byteLength,!1);var l=new Uint8Array(s.buffer);return l.set(r.value,3),l;case"string":var c=this.fromUtf8(r.value),f=new DataView(new ArrayBuffer(3+c.byteLength));f.setUint8(0,7),f.setUint16(1,c.byteLength,!1);var h=new Uint8Array(f.buffer);return h.set(c,3),h;case"timestamp":var g=new Uint8Array(9);return g[0]=8,g.set(f_.fromNumber(r.value.valueOf()).bytes,1),g;case"uuid":if(!bN.test(r.value))throw new Error("Invalid UUID received: "+r.value);var I=new Uint8Array(17);return I[0]=9,I.set(function AD(t){if(t.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var r=new Uint8Array(t.length/2),e=0;e<t.length;e+=2){var n=t.substr(e,2).toLowerCase();if(!(n in qy))throw new Error("Cannot decode unrecognized sequence "+n+" as hexadecimal");r[e/2]=qy[n]}return r}(r.value.replace(/\-/g,"")),1),I}},t.prototype.parse=function(r){for(var e={},n=0;n<r.byteLength;){var a=r.getUint8(n++),s=this.toUtf8(new Uint8Array(r.buffer,r.byteOffset+n,a));switch(n+=a,r.getUint8(n++)){case 0:e[s]={type:GC,value:!0};break;case 1:e[s]={type:GC,value:!1};break;case 2:e[s]={type:hN,value:r.getInt8(n++)};break;case 3:e[s]={type:pN,value:r.getInt16(n,!1)},n+=2;break;case 4:e[s]={type:mN,value:r.getInt32(n,!1)},n+=4;break;case 5:e[s]={type:gN,value:new f_(new Uint8Array(r.buffer,r.byteOffset+n,8))},n+=8;break;case 6:var l=r.getUint16(n,!1);n+=2,e[s]={type:vN,value:new Uint8Array(r.buffer,r.byteOffset+n,l)},n+=l;break;case 7:var c=r.getUint16(n,!1);n+=2,e[s]={type:yN,value:this.toUtf8(new Uint8Array(r.buffer,r.byteOffset+n,c))},n+=c;break;case 8:e[s]={type:_N,value:new Date(new f_(new Uint8Array(r.buffer,r.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var f=new Uint8Array(r.buffer,r.byteOffset+n,16);n+=16,e[s]={type:xN,value:da(f.subarray(0,4))+"-"+da(f.subarray(4,6))+"-"+da(f.subarray(6,8))+"-"+da(f.subarray(8,10))+"-"+da(f.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return e},t}(),GC="boolean",hN="byte",pN="short",mN="integer",gN="long",vN="binary",yN="string",_N="timestamp",xN="uuid",bN=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,HC=function(){function t(r,e){this.headerMarshaller=new fN(r,e)}return t.prototype.marshall=function(r){var n=r.body,a=this.headerMarshaller.format(r.headers),s=a.byteLength+n.byteLength+16,l=new Uint8Array(s),c=new DataView(l.buffer,l.byteOffset,l.byteLength),f=new UC.Crc32;return c.setUint32(0,s,!1),c.setUint32(4,a.byteLength,!1),c.setUint32(8,f.update(l.subarray(0,8)).digest(),!1),l.set(a,12),l.set(n,a.byteLength+12),c.setUint32(s-4,f.update(l.subarray(8,s-4)).digest(),!1),l},t.prototype.unmarshall=function(r){var e=function wN(t){var r=t.byteLength,e=t.byteOffset,n=t.buffer;if(r<16)throw new Error("Provided message too short to accommodate event stream message overhead");var a=new DataView(n,e,r),s=a.getUint32(0,!1);if(r!==s)throw new Error("Reported message length does not match received message length");var l=a.getUint32(4,!1),c=a.getUint32(8,!1),f=a.getUint32(r-4,!1),h=(new UC.Crc32).update(new Uint8Array(n,e,8));if(c!==h.digest())throw new Error("The prelude checksum specified in the message ("+c+") does not match the calculated CRC32 checksum ("+h.digest()+")");if(h.update(new Uint8Array(n,e+8,r-12)),f!==h.digest())throw new Error("The message checksum ("+h.digest()+") did not match the expected value of "+f);return{headers:new DataView(n,e+8+4,l),body:new Uint8Array(n,e+8+4+l,s-l-16)}}(r),a=e.body;return{headers:this.headerMarshaller.parse(e.headers),body:a}},t.prototype.formatHeaders=function(r){return this.headerMarshaller.format(r)},t}(),TN=function(){function t(r){var e=r.utf8Encoder;this.eventMarshaller=new HC(e,r.utf8Decoder),this.utfEncoder=e}return t.prototype.deserialize=function(r,e){var n=function SN(t){var r,e=0,n=0,a=null,s=null,l=function(f){if("number"!=typeof f)throw new Error("Attempted to allocate an event message where size was not a number: "+f);e=f,n=4,a=new Uint8Array(f),new DataView(a.buffer).setUint32(0,f,!1)};return(r={})[Symbol.asyncIterator]=function(){return(0,ie.FC)(this,arguments,function(){var f,h,g,B,V,ce,Ie,he;return(0,ie.Jh)(this,function(Se){switch(Se.label){case 0:f=t[Symbol.asyncIterator](),Se.label=1;case 1:return[4,(0,ie.qq)(f.next())];case 2:return h=Se.sent(),g=h.value,h.done?e?[3,4]:[4,(0,ie.qq)(void 0)]:[3,10];case 3:return[2,Se.sent()];case 4:return e!==n?[3,7]:[4,(0,ie.qq)(a)];case 5:return[4,Se.sent()];case 6:return Se.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,(0,ie.qq)(void 0)];case 9:return[2,Se.sent()];case 10:B=g.length,V=0,Se.label=11;case 11:if(!(V<B))return[3,15];if(!a){if(ce=B-V,s||(s=new Uint8Array(4)),Ie=Math.min(4-n,ce),s.set(g.slice(V,V+Ie),n),V+=Ie,(n+=Ie)<4)return[3,15];l(new DataView(s.buffer).getUint32(0,!1)),s=null}return he=Math.min(e-n,B-V),a.set(g.slice(V,V+he),n),n+=he,V+=he,e&&e===n?[4,(0,ie.qq)(a)]:[3,14];case 12:return[4,Se.sent()];case 13:Se.sent(),a=null,e=0,n=0,Se.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},r}(r),a=function EN(t,r){var e;return(e={})[Symbol.asyncIterator]=function(){return(0,ie.FC)(this,arguments,function(){var n,a,l,c,f,h,I,B,ce,Ie,he,Se,Oe,Be;return(0,ie.Jh)(this,function(et){switch(et.label){case 0:et.trys.push([0,12,13,18]),n=(0,ie.KL)(t),et.label=1;case 1:return[4,(0,ie.qq)(n.next())];case 2:if((a=et.sent()).done)return[3,11];if(l=r.eventMarshaller.unmarshall(a.value),"error"!==(c=l.headers[":message-type"].value))return[3,3];throw(f=new Error(l.headers[":error-message"].value||"UnknownError")).name=l.headers[":error-code"].value,f;case 3:return"exception"!==c?[3,5]:((he={})[h=l.headers[":exception-type"].value]=l,[4,(0,ie.qq)(r.deserializer(he))]);case 4:throw(I=et.sent()).$unknown?((B=new Error(r.toUtf8(l.body))).name=h,B):I[h];case 5:return"event"!==c?[3,9]:((Se={})[l.headers[":event-type"].value]=l,[4,(0,ie.qq)(r.deserializer(Se))]);case 6:return(ce=et.sent()).$unknown?[3,10]:[4,(0,ie.qq)(ce)];case 7:return[4,et.sent()];case 8:return et.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+l.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return Ie=et.sent(),Oe={error:Ie},[3,18];case 13:return et.trys.push([13,,16,17]),a&&!a.done&&(Be=n.return)?[4,(0,ie.qq)(Be.call(n))]:[3,15];case 14:et.sent(),et.label=15;case 15:return[3,17];case 16:if(Oe)throw Oe.error;return[7];case 17:return[7];case 18:return[2]}})})},e}(n,{eventMarshaller:this.eventMarshaller,deserializer:e,toUtf8:this.utfEncoder});return a},t.prototype.serialize=function(r,e){var n,a=this;return(n={})[Symbol.asyncIterator]=function(){return(0,ie.FC)(this,arguments,function(){var l,c,h,g,I,B;return(0,ie.Jh)(this,function(V){switch(V.label){case 0:V.trys.push([0,7,8,13]),l=(0,ie.KL)(r),V.label=1;case 1:return[4,(0,ie.qq)(l.next())];case 2:return(c=V.sent()).done?[3,6]:(h=a.eventMarshaller.marshall(e(c.value)),[4,(0,ie.qq)(h)]);case 3:return[4,V.sent()];case 4:V.sent(),V.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return g=V.sent(),I={error:g},[3,13];case 8:return V.trys.push([8,,11,12]),c&&!c.done&&(B=l.return)?[4,(0,ie.qq)(B.call(l))]:[3,10];case 9:V.sent(),V.label=10;case 10:return[3,12];case 11:if(I)throw I.error;return[7];case 12:return[7];case 13:return[4,(0,ie.qq)(new Uint8Array(0))];case 14:return[4,V.sent()];case 15:return V.sent(),[2]}})})},n},t}(),IN=function(){function t(r){var e=r.utf8Encoder,n=r.utf8Decoder;this.eventMarshaller=new HC(e,n),this.universalMarshaller=new TN({utf8Decoder:n,utf8Encoder:e})}return t.prototype.deserialize=function(r,e){var n=PN(r)?function(t){var r;return(r={})[Symbol.asyncIterator]=function(){return(0,ie.FC)(this,arguments,function(){var e,n,s;return(0,ie.Jh)(this,function(l){switch(l.label){case 0:e=t.getReader(),l.label=1;case 1:l.trys.push([1,,9,10]),l.label=2;case 2:return[4,(0,ie.qq)(e.read())];case 3:return n=l.sent(),s=n.value,n.done?[4,(0,ie.qq)(void 0)]:[3,5];case 4:return[2,l.sent()];case 5:return[4,(0,ie.qq)(s)];case 6:return[4,l.sent()];case 7:return l.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})},r}(r):r;return this.universalMarshaller.deserialize(n,e)},t.prototype.serialize=function(r,e){var n=this.universalMarshaller.serialize(r,e);return"function"==typeof ReadableStream?function(t){var r=t[Symbol.asyncIterator]();return new ReadableStream({pull:function(e){return(0,ie.mG)(this,void 0,void 0,function(){var n,s;return(0,ie.Jh)(this,function(l){switch(l.label){case 0:return[4,r.next()];case 1:return n=l.sent(),s=n.value,n.done?[2,e.close()]:(e.enqueue(s),[2])}})})}})}(n):n},t}(),PN=function(t){return"function"==typeof ReadableStream&&t instanceof ReadableStream},FN=function(t){return new IN(t)};function RN(t,r,e){return void 0===e&&(e=1048576),new Promise(function(n,a){var s=new FileReader;s.addEventListener("error",a),s.addEventListener("abort",a);var l=t.size,c=0;function f(){c>=l?n():s.readAsArrayBuffer(t.slice(c,Math.min(l,c+e)))}s.addEventListener("load",function(h){var g=h.target.result;r(new Uint8Array(g)),c+=g.byteLength,f()}),f()})}var DN=function(r,e){return(0,ie.mG)(this,void 0,void 0,function(){var n;return(0,ie.Jh)(this,function(a){switch(a.label){case 0:return n=new r,[4,RN(e,function(s){n.update(s)})];case 1:return a.sent(),[2,n.digest()]}})})},MN=[1732584193,4023233417,2562383102,271733878],LN=function(){function t(){this.state=Uint32Array.from(MN),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(r){if(!function NN(t){return"string"==typeof t?0===t.length:0===t.byteLength}(r)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var e=function BN(t){return"string"==typeof t?(0,Ph.fromUtf8)(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}(r),n=0,a=e.byteLength;for(this.bytesHashed+=a;a>0;)this.buffer.setUint8(this.bufferLength++,e[n++]),a--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},t.prototype.digest=function(){return(0,ie.mG)(this,void 0,void 0,function(){var r,e,n,s,l,c;return(0,ie.Jh)(this,function(f){if(!this.finished){if(n=(r=this).bufferLength,s=8*r.bytesHashed,(e=r.buffer).setUint8(this.bufferLength++,128),n%64>=56){for(c=this.bufferLength;c<64;c++)e.setUint8(c,0);this.hashBuffer(),this.bufferLength=0}for(c=this.bufferLength;c<56;c++)e.setUint8(c,0);e.setUint32(56,s>>>0,!0),e.setUint32(60,Math.floor(s/4294967296),!0),this.hashBuffer(),this.finished=!0}for(l=new DataView(new ArrayBuffer(16)),c=0;c<4;c++)l.setUint32(4*c,this.state[c],!0);return[2,new Uint8Array(l.buffer,l.byteOffset,l.byteLength)]})})},t.prototype.hashBuffer=function(){var e=this.buffer,n=this.state,a=n[0],s=n[1],l=n[2],c=n[3];a=Wr(a,s,l,c,e.getUint32(0,!0),7,3614090360),c=Wr(c,a,s,l,e.getUint32(4,!0),12,3905402710),l=Wr(l,c,a,s,e.getUint32(8,!0),17,606105819),s=Wr(s,l,c,a,e.getUint32(12,!0),22,3250441966),a=Wr(a,s,l,c,e.getUint32(16,!0),7,4118548399),c=Wr(c,a,s,l,e.getUint32(20,!0),12,1200080426),l=Wr(l,c,a,s,e.getUint32(24,!0),17,2821735955),s=Wr(s,l,c,a,e.getUint32(28,!0),22,4249261313),a=Wr(a,s,l,c,e.getUint32(32,!0),7,1770035416),c=Wr(c,a,s,l,e.getUint32(36,!0),12,2336552879),l=Wr(l,c,a,s,e.getUint32(40,!0),17,4294925233),s=Wr(s,l,c,a,e.getUint32(44,!0),22,2304563134),a=Wr(a,s,l,c,e.getUint32(48,!0),7,1804603682),c=Wr(c,a,s,l,e.getUint32(52,!0),12,4254626195),l=Wr(l,c,a,s,e.getUint32(56,!0),17,2792965006),a=Kr(a,s=Wr(s,l,c,a,e.getUint32(60,!0),22,1236535329),l,c,e.getUint32(4,!0),5,4129170786),c=Kr(c,a,s,l,e.getUint32(24,!0),9,3225465664),l=Kr(l,c,a,s,e.getUint32(44,!0),14,643717713),s=Kr(s,l,c,a,e.getUint32(0,!0),20,3921069994),a=Kr(a,s,l,c,e.getUint32(20,!0),5,3593408605),c=Kr(c,a,s,l,e.getUint32(40,!0),9,38016083),l=Kr(l,c,a,s,e.getUint32(60,!0),14,3634488961),s=Kr(s,l,c,a,e.getUint32(16,!0),20,3889429448),a=Kr(a,s,l,c,e.getUint32(36,!0),5,568446438),c=Kr(c,a,s,l,e.getUint32(56,!0),9,3275163606),l=Kr(l,c,a,s,e.getUint32(12,!0),14,4107603335),s=Kr(s,l,c,a,e.getUint32(32,!0),20,1163531501),a=Kr(a,s,l,c,e.getUint32(52,!0),5,2850285829),c=Kr(c,a,s,l,e.getUint32(8,!0),9,4243563512),l=Kr(l,c,a,s,e.getUint32(28,!0),14,1735328473),a=Yr(a,s=Kr(s,l,c,a,e.getUint32(48,!0),20,2368359562),l,c,e.getUint32(20,!0),4,4294588738),c=Yr(c,a,s,l,e.getUint32(32,!0),11,2272392833),l=Yr(l,c,a,s,e.getUint32(44,!0),16,1839030562),s=Yr(s,l,c,a,e.getUint32(56,!0),23,4259657740),a=Yr(a,s,l,c,e.getUint32(4,!0),4,2763975236),c=Yr(c,a,s,l,e.getUint32(16,!0),11,1272893353),l=Yr(l,c,a,s,e.getUint32(28,!0),16,4139469664),s=Yr(s,l,c,a,e.getUint32(40,!0),23,3200236656),a=Yr(a,s,l,c,e.getUint32(52,!0),4,681279174),c=Yr(c,a,s,l,e.getUint32(0,!0),11,3936430074),l=Yr(l,c,a,s,e.getUint32(12,!0),16,3572445317),s=Yr(s,l,c,a,e.getUint32(24,!0),23,76029189),a=Yr(a,s,l,c,e.getUint32(36,!0),4,3654602809),c=Yr(c,a,s,l,e.getUint32(48,!0),11,3873151461),l=Yr(l,c,a,s,e.getUint32(60,!0),16,530742520),a=Qr(a,s=Yr(s,l,c,a,e.getUint32(8,!0),23,3299628645),l,c,e.getUint32(0,!0),6,4096336452),c=Qr(c,a,s,l,e.getUint32(28,!0),10,1126891415),l=Qr(l,c,a,s,e.getUint32(56,!0),15,2878612391),s=Qr(s,l,c,a,e.getUint32(20,!0),21,4237533241),a=Qr(a,s,l,c,e.getUint32(48,!0),6,1700485571),c=Qr(c,a,s,l,e.getUint32(12,!0),10,2399980690),l=Qr(l,c,a,s,e.getUint32(40,!0),15,4293915773),s=Qr(s,l,c,a,e.getUint32(4,!0),21,2240044497),a=Qr(a,s,l,c,e.getUint32(32,!0),6,1873313359),c=Qr(c,a,s,l,e.getUint32(60,!0),10,4264355552),l=Qr(l,c,a,s,e.getUint32(24,!0),15,2734768916),s=Qr(s,l,c,a,e.getUint32(52,!0),21,1309151649),a=Qr(a,s,l,c,e.getUint32(16,!0),6,4149444226),c=Qr(c,a,s,l,e.getUint32(44,!0),10,3174756917),l=Qr(l,c,a,s,e.getUint32(8,!0),15,718787259),s=Qr(s,l,c,a,e.getUint32(36,!0),21,3951481745),n[0]=a+n[0]&4294967295,n[1]=s+n[1]&4294967295,n[2]=l+n[2]&4294967295,n[3]=c+n[3]&4294967295},t}();function vg(t,r,e,n,a,s){return((r=(r+t&4294967295)+(n+s&4294967295)&4294967295)<<a|r>>>32-a)+e&4294967295}function Wr(t,r,e,n,a,s,l){return vg(r&e|~r&n,t,r,a,s,l)}function Kr(t,r,e,n,a,s,l){return vg(r&n|e&~n,t,r,a,s,l)}function Yr(t,r,e,n,a,s,l){return vg(r^e^n,t,r,a,s,l)}function Qr(t,r,e,n,a,s,l){return vg(e^(r|~n),t,r,a,s,l)}var jN=function(t,r){var e=r.base64Encoder,n=r.bodyLengthChecker,a=r.checksumAlgorithmFn,s=r.checksumLocationName,l=r.streamHasher,c=void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==l,f=c?l(a,t):void 0,h=t.getReader();return new ReadableStream({pull:function(g){return(0,ie.mG)(this,void 0,void 0,function(){var I,B,ce,Ie;return(0,ie.Jh)(this,function(he){switch(he.label){case 0:return[4,h.read()];case 1:return I=he.sent(),B=I.value,I.done?(g.enqueue("0\r\n"),c?(Ie=e,[4,f]):[3,3]):[3,4];case 2:ce=Ie.apply(void 0,[he.sent()]),g.enqueue(s+":"+ce+"\r\n"),g.enqueue("\r\n"),he.label=3;case 3:return g.close(),[3,5];case 4:g.enqueue((n(B)||0).toString(16)+"\r\n"+B+"\r\n"),he.label=5;case 5:return[2]}})})}})},zN={"af-south-1":{variants:[{hostname:"s3.dualstack.af-south-1.amazonaws.com",tags:["dualstack"]}]},"ap-east-1":{variants:[{hostname:"s3.dualstack.ap-east-1.amazonaws.com",tags:["dualstack"]}]},"ap-northeast-1":{variants:[{hostname:"s3.ap-northeast-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.ap-northeast-1.amazonaws.com",tags:["dualstack"]}]},"ap-northeast-2":{variants:[{hostname:"s3.dualstack.ap-northeast-2.amazonaws.com",tags:["dualstack"]}]},"ap-northeast-3":{variants:[{hostname:"s3.dualstack.ap-northeast-3.amazonaws.com",tags:["dualstack"]}]},"ap-south-1":{variants:[{hostname:"s3.dualstack.ap-south-1.amazonaws.com",tags:["dualstack"]}]},"ap-southeast-1":{variants:[{hostname:"s3.ap-southeast-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.ap-southeast-1.amazonaws.com",tags:["dualstack"]}]},"ap-southeast-2":{variants:[{hostname:"s3.ap-southeast-2.amazonaws.com",tags:[]},{hostname:"s3.dualstack.ap-southeast-2.amazonaws.com",tags:["dualstack"]}]},"ap-southeast-3":{variants:[{hostname:"s3.dualstack.ap-southeast-3.amazonaws.com",tags:["dualstack"]}]},"aws-global":{variants:[{hostname:"s3.amazonaws.com",tags:[]}],signingRegion:"us-east-1"},"ca-central-1":{variants:[{hostname:"s3-fips.ca-central-1.amazonaws.com",tags:["fips"]},{hostname:"s3-fips.dualstack.ca-central-1.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3.dualstack.ca-central-1.amazonaws.com",tags:["dualstack"]}]},"cn-north-1":{variants:[{hostname:"s3.dualstack.cn-north-1.amazonaws.com.cn",tags:["dualstack"]}]},"cn-northwest-1":{variants:[{hostname:"s3.dualstack.cn-northwest-1.amazonaws.com.cn",tags:["dualstack"]}]},"eu-central-1":{variants:[{hostname:"s3.dualstack.eu-central-1.amazonaws.com",tags:["dualstack"]}]},"eu-north-1":{variants:[{hostname:"s3.dualstack.eu-north-1.amazonaws.com",tags:["dualstack"]}]},"eu-south-1":{variants:[{hostname:"s3.dualstack.eu-south-1.amazonaws.com",tags:["dualstack"]}]},"eu-west-1":{variants:[{hostname:"s3.eu-west-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.eu-west-1.amazonaws.com",tags:["dualstack"]}]},"eu-west-2":{variants:[{hostname:"s3.dualstack.eu-west-2.amazonaws.com",tags:["dualstack"]}]},"eu-west-3":{variants:[{hostname:"s3.dualstack.eu-west-3.amazonaws.com",tags:["dualstack"]}]},"me-south-1":{variants:[{hostname:"s3.dualstack.me-south-1.amazonaws.com",tags:["dualstack"]}]},"s3-external-1":{variants:[{hostname:"s3-external-1.amazonaws.com",tags:[]}],signingRegion:"us-east-1"},"sa-east-1":{variants:[{hostname:"s3.sa-east-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.sa-east-1.amazonaws.com",tags:["dualstack"]}]},"us-east-1":{variants:[{hostname:"s3.us-east-1.amazonaws.com",tags:[]},{hostname:"s3-fips.dualstack.us-east-1.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-east-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-east-1.amazonaws.com",tags:["dualstack"]}]},"us-east-2":{variants:[{hostname:"s3-fips.dualstack.us-east-2.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-east-2.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-east-2.amazonaws.com",tags:["dualstack"]}]},"us-gov-east-1":{variants:[{hostname:"s3.us-gov-east-1.amazonaws.com",tags:[]},{hostname:"s3-fips.us-gov-east-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-gov-east-1.amazonaws.com",tags:["dualstack"]}]},"us-gov-west-1":{variants:[{hostname:"s3.us-gov-west-1.amazonaws.com",tags:[]},{hostname:"s3-fips.us-gov-west-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-gov-west-1.amazonaws.com",tags:["dualstack"]}]},"us-west-1":{variants:[{hostname:"s3.us-west-1.amazonaws.com",tags:[]},{hostname:"s3-fips.dualstack.us-west-1.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-west-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-west-1.amazonaws.com",tags:["dualstack"]}]},"us-west-2":{variants:[{hostname:"s3.us-west-2.amazonaws.com",tags:[]},{hostname:"s3-fips.dualstack.us-west-2.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-west-2.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-west-2.amazonaws.com",tags:["dualstack"]}]}},UN={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","fips-ca-central-1","fips-us-east-1","fips-us-east-2","fips-us-west-1","fips-us-west-2","me-south-1","s3-external-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.amazonaws.com",tags:[]},{hostname:"s3-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"s3-fips.dualstack.{region}.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3.dualstack.{region}.amazonaws.com",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.amazonaws.com.cn",tags:[]},{hostname:"s3-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"s3-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"s3.dualstack.{region}.amazonaws.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.c2s.ic.gov",tags:[]},{hostname:"s3-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.sc2s.sgov.gov",tags:[]},{hostname:"s3-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["fips-us-gov-east-1","fips-us-gov-west-1","us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.amazonaws.com",tags:[]},{hostname:"s3-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"s3-fips.dualstack.{region}.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3.dualstack.{region}.amazonaws.com",tags:["dualstack"]}]}},VN=function(t,r){return(0,ie.mG)(void 0,void 0,void 0,function(){return(0,ie.Jh)(this,function(e){return[2,hC(t,(0,ie.pi)((0,ie.pi)({},r),{signingService:"s3",regionHash:zN,partitionHash:UN}))]})})},HN=function(t){function r(e){var n=this,a=function(t){var r,e,n,a,s,l,c,f,h,g,I,B,V,ce,Ie,he,Se,Oe,Be,et,at=zC(t),ft=function(){return at().then(Vx)},Pt=function(t){var r,e,n,a,s,l,c,f;return{apiVersion:"2006-03-01",disableHostPrefix:null!==(r=null==t?void 0:t.disableHostPrefix)&&void 0!==r&&r,logger:null!==(e=null==t?void 0:t.logger)&&void 0!==e?e:{},regionInfoProvider:null!==(n=null==t?void 0:t.regionInfoProvider)&&void 0!==n?n:VN,serviceId:null!==(a=null==t?void 0:t.serviceId)&&void 0!==a?a:"S3",signerConstructor:null!==(s=null==t?void 0:t.signerConstructor)&&void 0!==s?s:ZD,signingEscapePath:null!==(l=null==t?void 0:t.signingEscapePath)&&void 0!==l&&l,urlParser:null!==(c=null==t?void 0:t.urlParser)&&void 0!==c?c:jC,useArnRegion:null!==(f=null==t?void 0:t.useArnRegion)&&void 0!==f&&f}}(t);return(0,ie.pi)((0,ie.pi)((0,ie.pi)({},Pt),t),{runtime:"browser",defaultsMode:at,base64Decoder:null!==(r=null==t?void 0:t.base64Decoder)&&void 0!==r?r:u_,base64Encoder:null!==(e=null==t?void 0:t.base64Encoder)&&void 0!==e?e:DC,bodyLengthChecker:null!==(n=null==t?void 0:t.bodyLengthChecker)&&void 0!==n?n:LC,credentialDefaultProvider:null!==(a=null==t?void 0:t.credentialDefaultProvider)&&void 0!==a?a:function(Rt){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(s=null==t?void 0:t.defaultUserAgentProvider)&&void 0!==s?s:BC({serviceId:Pt.serviceId,clientVersion:"3.54.0"}),eventStreamSerdeProvider:null!==(l=null==t?void 0:t.eventStreamSerdeProvider)&&void 0!==l?l:FN,getAwsChunkedEncodingStream:null!==(c=null==t?void 0:t.getAwsChunkedEncodingStream)&&void 0!==c?c:jN,maxAttempts:null!==(f=null==t?void 0:t.maxAttempts)&&void 0!==f?f:3,md5:null!==(h=null==t?void 0:t.md5)&&void 0!==h?h:LN,region:null!==(g=null==t?void 0:t.region)&&void 0!==g?g:MC("Region is missing"),requestHandler:null!==(I=null==t?void 0:t.requestHandler)&&void 0!==I?I:new RC(ft),retryMode:null!==(B=null==t?void 0:t.retryMode)&&void 0!==B?B:function(){return(0,ie.mG)(void 0,void 0,void 0,function(){return(0,ie.Jh)(this,function(Rt){switch(Rt.label){case 0:return[4,ft()];case 1:return[2,Rt.sent().retryMode||o_]}})})},sha1:null!==(V=null==t?void 0:t.sha1)&&void 0!==V?V:uN.Sha1,sha256:null!==(ce=null==t?void 0:t.sha256)&&void 0!==ce?ce:dN.Sha256,streamCollector:null!==(Ie=null==t?void 0:t.streamCollector)&&void 0!==Ie?Ie:OC,streamHasher:null!==(he=null==t?void 0:t.streamHasher)&&void 0!==he?he:DN,useDualstackEndpoint:null!==(Se=null==t?void 0:t.useDualstackEndpoint)&&void 0!==Se?Se:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(Oe=null==t?void 0:t.useFipsEndpoint)&&void 0!==Oe?Oe:function(){return Promise.resolve(!1)},utf8Decoder:null!==(Be=null==t?void 0:t.utf8Decoder)&&void 0!==Be?Be:Ph.fromUtf8,utf8Encoder:null!==(et=null==t?void 0:t.utf8Encoder)&&void 0!==et?et:Ph.toUtf8})}(e),s=dC(a),l=lC(s),c=bC(l),g=function ys(t){var r=t.bucketEndpoint,e=void 0!==r&&r,n=t.forcePathStyle,a=void 0!==n&&n,s=t.useAccelerateEndpoint,l=void 0!==s&&s,c=t.useArnRegion,f=void 0!==c&&c,h=t.disableMultiregionAccessPoints,g=void 0!==h&&h;return(0,ie.pi)((0,ie.pi)({},t),{bucketEndpoint:e,forcePathStyle:a,useAccelerateEndpoint:l,useArnRegion:"function"==typeof f?f:function(){return Promise.resolve(f)},disableMultiregionAccessPoints:"function"==typeof g?g:function(){return Promise.resolve(g)}})}(wC(c)),B=function(t){return(0,ie.pi)((0,ie.pi)({},t),{eventStreamMarshaller:t.eventStreamSerdeProvider(t)})}(kC(g));return(n=t.call(this,B)||this).config=B,n.middlewareStack.use(CC(n.config)),n.middlewareStack.use(mC(n.config)),n.middlewareStack.use(gC(n.config)),n.middlewareStack.use(vC()),n.middlewareStack.use(function(t){return{applyToStack:function(r){r.addRelativeTo(function(t){return function(r,e){return function(n){return(0,ie.mG)(this,void 0,void 0,function(){var a,s,l,c,f,h;return(0,ie.Jh)(this,function(g){switch(g.label){case 0:return Gi.isInstance(n.request)?[4,t.signer()]:[2,r(n)];case 1:return a=g.sent(),l=r,c=[(0,ie.pi)({},n)],h={},[4,a.sign(n.request,{signingDate:EC(t.systemClockOffset),signingRegion:e.signing_region,signingService:e.signing_service})];case 2:return[4,l.apply(void 0,[ie.pi.apply(void 0,c.concat([(h.request=g.sent(),h)]))]).catch(function(I){var B,V=null!==(B=I.ServerTime)&&void 0!==B?B:AC(I.$response);throw V&&(t.systemClockOffset=TC(V,t.systemClockOffset)),I})];case 3:return s=g.sent(),(f=AC(s.response))&&(t.systemClockOffset=TC(f,t.systemClockOffset)),[2,s]}})})}}}(t),N3)}}}(n.config)),n.middlewareStack.use({applyToStack:function(r){r.add(function sO(){var t=this;return function(r){return function(e){return(0,ie.mG)(t,void 0,void 0,function(){var n,a;return(0,ie.Jh)(this,function(s){if("string"==typeof(n=e.input.Bucket)&&!vs(n)&&n.indexOf("/")>=0)throw(a=new Error("Bucket name shouldn't contain '/', received '"+n+"'")).name="InvalidBucketName",a;return[2,r((0,ie.pi)({},e))]})})}}}(),lO)}}),n.middlewareStack.use(function(t){return{applyToStack:function(r){r.add(function(t){return function(r){return function(e){return(0,ie.mG)(void 0,void 0,void 0,function(){var n,a;return(0,ie.Jh)(this,function(s){switch(s.label){case 0:return!Gi.isInstance(n=e.request)||t.isCustomEndpoint?[2,r((0,ie.pi)({},e))]:"s3.amazonaws.com"!==n.hostname?[3,1]:(n.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return a="aws-global",[4,t.region()];case 2:a===s.sent()&&(n.hostname="s3.amazonaws.com"),s.label=3;case 3:return[2,r((0,ie.pi)({},e))]}})})}}}(t),oO)}}}(n.config)),n.middlewareStack.use(function(t){return{applyToStack:function(r){r.add(function aN(t){var r=this;return function(e){return function(n){return(0,ie.mG)(r,void 0,void 0,function(){var a;return(0,ie.Jh)(this,function(s){return Gi.isInstance(a=n.request)&&a.body&&"node"===t.runtime&&(a.headers=(0,ie.pi)((0,ie.pi)({},a.headers),{Expect:"100-continue"})),[2,e((0,ie.pi)((0,ie.pi)({},n),{request:a}))]})})}}}(t),sN)}}}(n.config)),n.middlewareStack.use(FC(n.config)),n}return(0,ie.ZT)(r,t),r.prototype.destroy=function(){t.prototype.destroy.call(this)},r}(Lx);let qN=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-mediafile-pane-renderer"]],decls:1,vars:0,template:function(e,n){1&e&&o.\u0275\u0275text(0,"Media File")},styles:[""]}),t})(),qC=(()=>{class t{constructor(e){e.register(new Gt.ContentPlugin({id:"media_file",title:"Media File",selectionComponent:void 0,editorComponent:void 0,renderComponent:qN,handler:void 0}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Gt.ContentPluginManager))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule]]}),t})();const yg=new o.InjectionToken("Media Settings");class WN{constructor(r){r&&(this.endpointUrl=r.endpointUrl,this.cloudinaryUrl=r.cloudinaryUrl,this.uploadPreset=r.uploadPreset,this.imageUrl=r.imageUrl,this.bucket=r.bucket,this.prefix=r.prefix)}}class h_{constructor(r){r&&(this.id=r.id,this.contentType=r.contentType,this.contentDisposition=r.contentDisposition,this.path=r.path,this.fileName=r.fileName,this.length=r.length,this.extension=r.extension?r.extension:void 0,this.realPath=r.realPath&&""!==r.realPath?r.realPath:void 0)}}let _g=(()=>{class t{constructor(e,n,a,s){this.settings=e,this.cognitoSettings=n,this.http=a,this.authFacade=s}bulkUpload({files:e,fileNameOverride:n}){const s=[];return e.forEach(l=>{if(l){const c=new FormData;c.append("File",l,n||l.name),s.push(this.http.post(this.settings.endpointUrl,c).pipe((0,Qi.K)(f=>(0,Go._)(new Error("Error uploading images.")))))}}),s.length>0?(0,cn.D)(s):(0,Re.of)([])}bulkUploadS3({files:e,fileNameOverride:n,nocache:a}){const s=[];return e.forEach(l=>{l&&s.push(new y.y(c=>{const f=n||ai(),[h,g]=l.name.split(".",2),I=f+(g?"."+g:"");new _O({client:this.buildClient(),params:{Bucket:this.settings.bucket,Key:this.settings.prefix+I,Body:l,ContentType:l.type,...a?{CacheControl:"no-cache"}:{}}}).done().then(()=>{c.next(new h_({id:f,contentType:l.type,contentDisposition:"",path:I,realPath:this.settings.prefix+I,length:l.size,fileName:l.name,extension:g&&""!==g?g:void 0})),c.complete()})}))}),s.length>0?(0,cn.D)(s):(0,Re.of)([])}convertToFiles(e){const n=e.map(a=>new y.y(s=>{fetch(`${this.settings.imageUrl}/${a.path}`).then(l=>{l.blob().then(c=>{new Promise(f=>{let h=new FileReader;h.onload=()=>f(h.result),h.readAsDataURL(c)}).then(f=>{const h=this.convertDataURIToBinary(f),g=new File([h],a.fileName,{type:a.contentType});s.next(g),s.complete()})})})}));return(0,cn.D)(n)}convertDataURIToBinary(e){for(var n=";base64,",a=e.indexOf(n)+n.length,s=e.substring(a),l=window.atob(s),c=l.length,f=new Uint8Array(new ArrayBuffer(c)),h=0;h<c;h++)f[h]=l.charCodeAt(h);return f}buildClient(){return new HN({region:this.cognitoSettings.region,credentials:r_({client:new d_({region:this.cognitoSettings.region}),identityPoolId:this.cognitoSettings.identityPoolId,logins:{[`cognito-idp.${this.cognitoSettings.region}.amazonaws.com/${this.cognitoSettings.userPoolId}`]:()=>ad(this.authFacade.getUser$.pipe((0,ye.U)(e=>e?e.id_token:void 0)))}})})}isImage({file:e}){return e.type&&0===e.type.indexOf("image/")}isVideo({file:e}){return e.type&&0===e.type.indexOf("video/")}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(yg),o.\u0275\u0275inject(Nc),o.\u0275\u0275inject(L.HttpClient),o.\u0275\u0275inject(kr))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var mn=S(2866),sr=S(4971),Ct=S(4195);let Fh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule]]}),t})(),Xn=(()=>{class t{constructor(){}generateTokens(e){const n=new Map;return this.attributeTokens(e,n,"",0),n}generateGenericTokens(e,n=""){const a=new Map;return this.genericTokens(e,a,n,0),a}attributeTokens(e,n,a,s){e.forEach((l,c)=>{if("widget"!==l.name)for(const f in l)l.type===Ct.AttributeTypes.Complex||"attributes"===f&&l.attributes&&l.attributes.length>0?this.attributeTokens(l.attributes,n,l.type===Ct.AttributeTypes.Complex?`${a}`:`${a}.${l.name}`,s+1):"attributes"!==f&&n.set(f===l.name?`${a}.${f}`:`${a}.${l.name}.${f}`,l[f])})}genericTokens(e,n,a,s){for(const c in e)if("object"!=typeof e[c])n.set(`${a}.${c}`,e[c]);else if(Array.isArray(e[c])&&"attributes"===c)this.attributeTokens(e[c],n,`${a}.${c}`,s+1);else if(Array.isArray(e[c])){var l=e[c].length;for(let h=0;h<l;h++)this.genericTokens(e[c][h],n,`${a}.${c}.${h}`,s+1)}else this.genericTokens(e[c],n,`${a}.${c}`,s+1)}replaceTokens(e,n){return n&&n.forEach((a,s)=>{e=e.replace(`[${s}]`,`${a}`)}),e}matchTokens(e,n){const a=[],s=n.length;for(let l=0;l<s;l++)e.indexOf(`[${n[l]}]`)>-1&&a.push(n[l]);return a}discoverTokens(e,n=!1){const a=e.match(/(\[(?:\[??[^\[]*?\]))/g);return null===a?[]:a.reduce((l,c)=>{if(-1!==c.indexOf(" ")||-1===c.indexOf("."))return l;const[f]=1===c.indexOf(".")?["."]:c.substr(1,c.length-2).split(".");return-1!==l.findIndex(h=>h===f)?l:[...l,n?c.substr(1,c.length-2):f]},[])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Hn=S(1989);const KN=["gutterEls"];function YN(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",2,3),o.\u0275\u0275listener("keydown",function(a){o.\u0275\u0275restoreView(e);const s=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().startKeyboardDrag(a,2*s+1,s+1)})("mousedown",function(a){o.\u0275\u0275restoreView(e);const s=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().startMouseDrag(a,2*s+1,s+1)})("touchstart",function(a){o.\u0275\u0275restoreView(e);const s=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().startMouseDrag(a,2*s+1,s+1)})("mouseup",function(a){o.\u0275\u0275restoreView(e);const s=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().clickGutter(a,s+1)})("touchend",function(a){o.\u0275\u0275restoreView(e);const s=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().clickGutter(a,s+1)}),o.\u0275\u0275element(2,"div",4),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext(),n=e.index,a=e.$implicit,s=o.\u0275\u0275nextContext();o.\u0275\u0275styleProp("flex-basis",s.gutterSize,"px")("order",2*n+1),o.\u0275\u0275attribute("aria-label",s.gutterAriaLabel)("aria-orientation",s.direction)("aria-valuemin",a.minSize)("aria-valuemax",a.maxSize)("aria-valuenow",a.size)("aria-valuetext",s.getAriaAreaSizeText(a.size))}}function QN(t,r){1&t&&o.\u0275\u0275template(0,YN,3,10,"div",1),2&t&&o.\u0275\u0275property("ngIf",!1===r.last)}const JN=["*"];function Rh(t){if(void 0!==t.changedTouches&&t.changedTouches.length>0)return{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY};if(void 0!==t.clientX&&void 0!==t.clientY)return{x:t.clientX,y:t.clientY};if(void 0!==t.currentTarget){const r=t.currentTarget;return{x:r.offsetLeft,y:r.offsetTop}}return null}function XC(t,r,e){return Math.abs(t.x-r.x)<=e&&Math.abs(t.y-r.y)<=e}function WC(t,r){const e=t.nativeElement.getBoundingClientRect();return"horizontal"===r?e.width:e.height}function Dh(t){return"boolean"==typeof t?t:"false"!==t}function ql(t,r){return null==t?r:(t=Number(t),!isNaN(t)&&t>=0?t:r)}function KC(t,r){if("percent"===t){const e=r.reduce((n,a)=>null!==a?n+a:n,0);return r.every(n=>null!==n)&&e>99.9&&e<100.1}if("pixel"===t)return 1===r.filter(e=>null===e).length}function xg(t){return null===t.size?null:!0===t.component.lockSize?t.size:null===t.component.minSize?null:t.component.minSize>t.size?t.size:t.component.minSize}function bg(t){return null===t.size?null:!0===t.component.lockSize?t.size:null===t.component.maxSize?null:t.component.maxSize<t.size?t.size:t.component.maxSize}function _d(t,r,e,n){return r.reduce((a,s)=>{const l=function eB(t,r,e,n){return 0===e?{areaSnapshot:r,pixelAbsorb:0,percentAfterAbsorption:r.sizePercentAtStart,pixelRemain:0}:0===r.sizePixelAtStart&&e<0?{areaSnapshot:r,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:e}:"percent"===t?function tB(t,r,e){const a=(t.sizePixelAtStart+r)/e*100;if(r>0){if(null!==t.area.maxSize&&a>t.area.maxSize){const s=t.area.maxSize/100*e;return{areaSnapshot:t,pixelAbsorb:s,percentAfterAbsorption:t.area.maxSize,pixelRemain:t.sizePixelAtStart+r-s}}return{areaSnapshot:t,pixelAbsorb:r,percentAfterAbsorption:a>100?100:a,pixelRemain:0}}if(r<0){if(null!==t.area.minSize&&a<t.area.minSize){const s=t.area.minSize/100*e;return{areaSnapshot:t,pixelAbsorb:s,percentAfterAbsorption:t.area.minSize,pixelRemain:t.sizePixelAtStart+r-s}}return a<0?{areaSnapshot:t,pixelAbsorb:-t.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:r+t.sizePixelAtStart}:{areaSnapshot:t,pixelAbsorb:r,percentAfterAbsorption:a,pixelRemain:0}}}(r,e,n):"pixel"===t?function nB(t,r,e){const n=t.sizePixelAtStart+r;return r>0?null!==t.area.maxSize&&n>t.area.maxSize?{areaSnapshot:t,pixelAbsorb:t.area.maxSize-t.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:n-t.area.maxSize}:{areaSnapshot:t,pixelAbsorb:r,percentAfterAbsorption:-1,pixelRemain:0}:r<0?null!==t.area.minSize&&n<t.area.minSize?{areaSnapshot:t,pixelAbsorb:t.area.minSize+r-n,percentAfterAbsorption:-1,pixelRemain:n-t.area.minSize}:n<0?{areaSnapshot:t,pixelAbsorb:-t.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:r+t.sizePixelAtStart}:{areaSnapshot:t,pixelAbsorb:r,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(r,e):void 0}(t,s,a.remain,n);return a.list.push(l),a.remain=l.pixelRemain,a},{remain:e,list:[]})}function YC(t,r){"percent"===t?r.areaSnapshot.area.size=r.percentAfterAbsorption:"pixel"===t&&null!==r.areaSnapshot.area.size&&(r.areaSnapshot.area.size=r.areaSnapshot.sizePixelAtStart+r.pixelAbsorb)}const iB=new o.InjectionToken("angular-split-global-config");let Oh=(()=>{class t{constructor(e,n,a,s,l){this.ngZone=e,this.elRef=n,this.cdRef=a,this.renderer=s,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new o.EventEmitter(!1),this.dragEnd=new o.EventEmitter(!1),this.gutterClick=new o.EventEmitter(!1),this.gutterDblClick=new o.EventEmitter(!1),this.dragProgressSubject=new M.x,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=l?Object.assign(this._config,l):this._config,Object.keys(this._config).forEach(c=>{this[c]=this._config[c]})}set direction(e){this._direction="vertical"===e?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(e){this._unit="pixel"===e?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(e){this._gutterSize=ql(e,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(e){this._gutterStep=ql(e,1)}get gutterStep(){return this._gutterStep}set restrictMove(e){this._restrictMove=Dh(e)}get restrictMove(){return this._restrictMove}set useTransition(e){this._useTransition=Dh(e),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(e){this._disabled=Dh(e),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(e){this._dir="rtl"===e?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(e){this._gutterDblClickDuration=ql(e,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new y.y(e=>this.transitionEndSubscriber=e).pipe((0,Hn.b)(20))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(e){const n={component:e,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===e.visible?(this.displayedAreas.push(n),this.build(!0,!0)):this.hiddenAreas.push(n)}removeArea(e){if(this.displayedAreas.some(n=>n.component===e)){const n=this.displayedAreas.find(a=>a.component===e);this.displayedAreas.splice(this.displayedAreas.indexOf(n),1),this.build(!0,!0)}else if(this.hiddenAreas.some(n=>n.component===e)){const n=this.hiddenAreas.find(a=>a.component===e);this.hiddenAreas.splice(this.hiddenAreas.indexOf(n),1)}}updateArea(e,n,a){!0===e.visible&&this.build(n,a)}showArea(e){const n=this.hiddenAreas.find(s=>s.component===e);if(void 0===n)return;const a=this.hiddenAreas.splice(this.hiddenAreas.indexOf(n),1);this.displayedAreas.push(...a),this.build(!0,!0)}hideArea(e){const n=this.displayedAreas.find(s=>s.component===e);if(void 0===n)return;const a=this.displayedAreas.splice(this.displayedAreas.indexOf(n),1);a.forEach(s=>{s.order=0,s.size=0}),this.hiddenAreas.push(...a),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(e=>null===e.size?"*":e.size)}setVisibleAreaSizes(e){if(e.length!==this.displayedAreas.length)return!1;const n=e.map(s=>ql(s,null));return!1!==KC(this.unit,n)&&(this.displayedAreas.forEach((s,l)=>s.component._size=n[l]),this.build(!1,!0),!0)}build(e,n){if(this.stopDragging(),!0===e&&(this.displayedAreas.every(a=>null!==a.component.order)&&this.displayedAreas.sort((a,s)=>a.component.order-s.component.order),this.displayedAreas.forEach((a,s)=>{a.order=2*s,a.component.setStyleOrder(a.order)})),!0===n){const a=KC(this.unit,this.displayedAreas.map(s=>s.component.size));switch(this.unit){case"percent":{const s=100/this.displayedAreas.length;this.displayedAreas.forEach(l=>{l.size=a?l.component.size:s,l.minSize=xg(l),l.maxSize=bg(l)});break}case"pixel":if(a)this.displayedAreas.forEach(s=>{s.size=s.component.size,s.minSize=xg(s),s.maxSize=bg(s)});else{const s=this.displayedAreas.filter(l=>null===l.component.size);if(0===s.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((l,c)=>{l.size=0===c?null:l.component.size,l.minSize=0===c?null:xg(l),l.maxSize=0===c?null:bg(l)});else if(s.length>1){let l=!1;this.displayedAreas.forEach(c=>{null===c.component.size?!1===l?(c.size=null,c.minSize=null,c.maxSize=null,l=!0):(c.size=100,c.minSize=null,c.maxSize=null):(c.size=c.component.size,c.minSize=xg(c),c.maxSize=bg(c))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const e=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(n=>{n.component.setStyleFlex(0,0,`calc( ${n.size}% - ${n.size/100*e}px )`,null!==n.minSize&&n.minSize===n.size,null!==n.maxSize&&n.maxSize===n.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(e=>{null===e.size?e.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?e.component.setStyleFlex(0,0,"100%",!1,!1):e.component.setStyleFlex(0,0,`${e.size}px`,null!==e.minSize&&e.minSize===e.size,null!==e.maxSize&&e.maxSize===e.size)})}clickGutter(e,n){const a=Rh(e);this.startPoint&&XC(this.startPoint,a,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",n),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",n),this.stopDragging()},this.gutterDblClickDuration))}startKeyboardDrag(e,n,a){if(!0===this.disabled||!0===this.isWaitingClear)return;const s=function ZN(t,r){if("horizontal"===r)switch(t.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===r)switch(t.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}const e=t.currentTarget,n="PageUp"===t.key||"PageDown"===t.key?500:50;let a=e.offsetLeft,s=e.offsetTop;switch(t.key){case"ArrowLeft":a-=n;break;case"ArrowRight":a+=n;break;case"ArrowUp":s-=n;break;case"ArrowDown":s+=n;break;case"PageUp":"vertical"===r?s-=n:a+=n;break;case"PageDown":"vertical"===r?s+=n:a-=n;break;default:return null}return{x:a,y:s}}(e,this.direction);null!==s&&(this.endPoint=s,this.startPoint=Rh(e),e.preventDefault(),e.stopPropagation(),this.setupForDragEvent(n,a),this.startDragging(),this.drag(),this.stopDragging())}startMouseDrag(e,n,a){e.preventDefault(),e.stopPropagation(),this.startPoint=Rh(e),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(n,a),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.mouseDragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.mouseDragEvent.bind(this)))}),this.startDragging())}setupForDragEvent(e,n){this.snapshot={gutterNum:n,lastSteppedOffset:0,allAreasSizePixel:WC(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(a=>{const s={area:a,sizePixelAtStart:WC(a.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?a.size:-1};a.order<e?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[s]:this.snapshot.areasBeforeGutter.unshift(s):a.order>e&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[s]):this.snapshot.areasAfterGutter.push(s))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((a,s)=>a+s.sizePercentAtStart,0)}startDragging(){this.displayedAreas.forEach(e=>e.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0}mouseDragEvent(e){e.preventDefault(),e.stopPropagation();const n=Rh(e);null!==this._clickTimeout&&!XC(this.startPoint,n,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=Rh(e),null!==this.endPoint&&this.drag())}drag(){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let e="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(e=-e);const n=Math.round(e/this.gutterStep)*this.gutterStep;if(n===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=n;let a=_d(this.unit,this.snapshot.areasBeforeGutter,-n,this.snapshot.allAreasSizePixel),s=_d(this.unit,this.snapshot.areasAfterGutter,n,this.snapshot.allAreasSizePixel);if(0!==a.remain&&0!==s.remain?Math.abs(a.remain)===Math.abs(s.remain)||(Math.abs(a.remain)>Math.abs(s.remain)?s=_d(this.unit,this.snapshot.areasAfterGutter,n+a.remain,this.snapshot.allAreasSizePixel):a=_d(this.unit,this.snapshot.areasBeforeGutter,-(n-s.remain),this.snapshot.allAreasSizePixel)):0!==a.remain?s=_d(this.unit,this.snapshot.areasAfterGutter,n+a.remain,this.snapshot.allAreasSizePixel):0!==s.remain&&(a=_d(this.unit,this.snapshot.areasBeforeGutter,-(n-s.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const l=[...a.list,...s.list],c=l.find(f=>0!==f.percentAfterAbsorption&&f.percentAfterAbsorption!==f.areaSnapshot.area.minSize&&f.percentAfterAbsorption!==f.areaSnapshot.area.maxSize);c&&(c.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-l.filter(f=>f!==c).reduce((f,h)=>f+h.percentAfterAbsorption,0))}a.list.forEach(l=>YC(this.unit,l)),s.list.forEach(l=>YC(this.unit,l)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(e){if(e&&(e.preventDefault(),e.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(n=>n.component.unlockEvents());this.dragListeners.length>0;){const n=this.dragListeners.pop();n&&n()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(e,n){const a=this.getVisibleAreaSizes();"start"===e?this.dragStart.emit({gutterNum:n,sizes:a}):"end"===e?this.dragEnd.emit({gutterNum:n,sizes:a}):"click"===e?this.gutterClick.emit({gutterNum:n,sizes:a}):"dblclick"===e?this.gutterDblClick.emit({gutterNum:n,sizes:a}):"transitionEnd"===e?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(a)):"progress"===e&&this.dragProgressSubject.next({gutterNum:n,sizes:a})}ngOnDestroy(){this.stopDragging()}collapseArea(e,n,a){const s=this.displayedAreas.find(f=>f.component===e);if(void 0===s)return;const l="right"===a?1:-1;s.sizeBeforeCollapse||(s.sizeBeforeCollapse=s.size,s.gutterBeforeCollapse=l),s.size=n;const c=this.gutterEls.find(f=>f.nativeElement.style.order===`${s.order+l}`);c&&this.renderer.addClass(c.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}expandArea(e){const n=this.displayedAreas.find(s=>s.component===e);if(void 0===n||!n.sizeBeforeCollapse)return;n.size=n.sizeBeforeCollapse,n.sizeBeforeCollapse=null;const a=this.gutterEls.find(s=>s.nativeElement.style.order===`${n.order+n.gutterBeforeCollapse}`);a&&this.renderer.removeClass(a.nativeElement,"as-split-gutter-collapsed"),this.updateArea(e,!1,!1)}getAriaAreaSizeText(e){return null===e?null:e.toFixed(0)+" "+this.unit}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(iB,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["as-split"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(KN,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.gutterEls=a)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:JN,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275projection(0),o.\u0275\u0275template(1,QN,1,1,"ng-template",0)),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.displayedAreas))},directives:[x.NgForOf,x.NgIf],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url()}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),t})(),Mh=(()=>{class t{constructor(e,n,a,s){this.ngZone=e,this.elRef=n,this.renderer=a,this.split=s,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}set order(e){this._order=ql(e,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(e){this._size=ql(e,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(e){this._minSize=ql(e,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(e){this._maxSize=ql(e,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(e){this._lockSize=Dh(e),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(e){this._visible=Dh(e),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",e=>{"flex-basis"===e.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)}setStyleFlex(e,n,a,s,l){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",e),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",n),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",a),!0===s?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===l?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const e=this.lockListeners.pop();e&&e()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(e=0,n="right"){this.split.collapseArea(this,e,n)}expand(){this.split.expandArea(this)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(Oh))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),t})(),Cg=(()=>{class t{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:t,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule]]}),t})();let xd={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const oB=/[&<>"']/,aB=/[&<>"']/g,sB=/[<>"']|&(?!#?\w+;)/,lB=/[<>"']|&(?!#?\w+;)/g,cB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},JC=t=>cB[t];function Fr(t,r){if(r){if(oB.test(t))return t.replace(aB,JC)}else if(sB.test(t))return t.replace(lB,JC);return t}const uB=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function ZC(t){return t.replace(uB,(r,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):"")}const dB=/(^|[^\[])\^/g;function _i(t,r){t=t.source||t,r=r||"";const e={replace:(n,a)=>(a=(a=a.source||a).replace(dB,"$1"),t=t.replace(n,a),e),getRegex:()=>new RegExp(t,r)};return e}const fB=/[^\w:]/g,hB=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function ew(t,r,e){if(t){let n;try{n=decodeURIComponent(ZC(e)).replace(fB,"").toLowerCase()}catch{return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}r&&!hB.test(e)&&(e=function vB(t,r){wg[" "+t]||(wg[" "+t]=pB.test(t)?t+"/":Eg(t,"/",!0));const e=-1===(t=wg[" "+t]).indexOf(":");return"//"===r.substring(0,2)?e?r:t.replace(mB,"$1")+r:"/"===r.charAt(0)?e?r:t.replace(gB,"$1")+r:t+r}(r,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const wg={},pB=/^[^:]+:\/*[^/]*$/,mB=/^([^:]+:)[\s\S]*$/,gB=/^([^:]+:\/*[^/]*)[\s\S]*$/,Sg={exec:function(){}};function ja(t){let e,n,r=1;for(;r<arguments.length;r++)for(n in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function tw(t,r){const n=t.replace(/\|/g,(s,l,c)=>{let f=!1,h=l;for(;--h>=0&&"\\"===c[h];)f=!f;return f?"|":" |"}).split(/ \|/);let a=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>r)n.splice(r);else for(;n.length<r;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(/\\\|/g,"|");return n}function Eg(t,r,e){const n=t.length;if(0===n)return"";let a=0;for(;a<n;){const s=t.charAt(n-a-1);if(s!==r||e){if(s===r||!e)break;a++}else a++}return t.substr(0,n-a)}function nw(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function iw(t,r){if(r<1)return"";let e="";for(;r>1;)1&r&&(e+=t),r>>=1,t+=t;return e+t}function rw(t,r,e,n){const a=r.href,s=r.title?Fr(r.title):null,l=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){n.state.inLink=!0;const c={type:"link",raw:e,href:a,title:s,text:l,tokens:n.inlineTokens(l,[])};return n.state.inLink=!1,c}return{type:"image",raw:e,href:a,title:s,text:Fr(l)}}class p_{constructor(r){this.options=r||xd}space(r){const e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){const e=this.rules.block.code.exec(r);if(e){const n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Eg(n,"\n")}}}fences(r){const e=this.rules.block.fences.exec(r);if(e){const n=e[0],a=function _B(t,r){const e=t.match(/^(\s+)(?:```)/);if(null===e)return r;const n=e[1];return r.split("\n").map(a=>{const s=a.match(/^\s+/);if(null===s)return a;const[l]=s;return l.length>=n.length?a.slice(n.length):a}).join("\n")}(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim():e[2],text:a}}}heading(r){const e=this.rules.block.heading.exec(r);if(e){let n=e[2].trim();if(/#$/.test(n)){const s=Eg(n,"#");(this.options.pedantic||!s||/ $/.test(s))&&(n=s.trim())}const a={type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}hr(r){const e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:e[0]}}blockquote(r){const e=this.rules.block.blockquote.exec(r);if(e){const n=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],tokens:this.lexer.blockTokens(n,[]),text:n}}}list(r){let e=this.rules.block.list.exec(r);if(e){let n,a,s,l,c,f,h,g,I,B,V,ce,Ie=e[1].trim();const he=Ie.length>1,Se={type:"list",raw:"",ordered:he,start:he?+Ie.slice(0,-1):"",loose:!1,items:[]};Ie=he?`\\d{1,9}\\${Ie.slice(-1)}`:`\\${Ie}`,this.options.pedantic&&(Ie=he?Ie:"[*+-]");const Oe=new RegExp(`^( {0,3}${Ie})((?: [^\\n]*)?(?:\\n|$))`);for(;r&&(ce=!1,(e=Oe.exec(r))&&!this.rules.block.hr.test(r));){if(n=e[0],r=r.substring(n.length),g=e[2].split("\n",1)[0],I=r.split("\n",1)[0],this.options.pedantic?(l=2,V=g.trimLeft()):(l=e[2].search(/[^ ]/),l=l>4?1:l,V=g.slice(l),l+=e[1].length),f=!1,!g&&/^ *$/.test(I)&&(n+=I+"\n",r=r.substring(I.length+1),ce=!0),!ce){const et=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;r&&(B=r.split("\n",1)[0],g=B,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!et.test(g));){if(g.search(/[^ ]/)>=l||!g.trim())V+="\n"+g.slice(l);else{if(f)break;V+="\n"+g}!f&&!g.trim()&&(f=!0),n+=B+"\n",r=r.substring(B.length+1)}}Se.loose||(h?Se.loose=!0:/\n *\n *$/.test(n)&&(h=!0)),this.options.gfm&&(a=/^\[[ xX]\] /.exec(V),a&&(s="[ ] "!==a[0],V=V.replace(/^\[[ xX]\] +/,""))),Se.items.push({type:"list_item",raw:n,task:!!a,checked:s,loose:!1,text:V}),Se.raw+=n}Se.items[Se.items.length-1].raw=n.trimRight(),Se.items[Se.items.length-1].text=V.trimRight(),Se.raw=Se.raw.trimRight();const Be=Se.items.length;for(c=0;c<Be;c++){this.lexer.state.top=!1,Se.items[c].tokens=this.lexer.blockTokens(Se.items[c].text,[]);const et=Se.items[c].tokens.filter(ft=>"space"===ft.type),at=et.every(ft=>{const Pt=ft.raw.split("");let Rt=0;for(const on of Pt)if("\n"===on&&(Rt+=1),Rt>1)return!0;return!1});!Se.loose&&et.length&&at&&(Se.loose=!0,Se.items[c].loose=!0)}return Se}}html(r){const e=this.rules.block.html.exec(r);if(e){const n={type:"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:e[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(e[0]):Fr(e[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}}def(r){const e=this.rules.block.def.exec(r);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}}table(r){const e=this.rules.block.table.exec(r);if(e){const n={type:"table",header:tw(e[1]).map(a=>({text:a})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=e[0];let s,l,c,f,a=n.align.length;for(s=0;s<a;s++)n.align[s]=/^ *-+: *$/.test(n.align[s])?"right":/^ *:-+: *$/.test(n.align[s])?"center":/^ *:-+ *$/.test(n.align[s])?"left":null;for(a=n.rows.length,s=0;s<a;s++)n.rows[s]=tw(n.rows[s],n.header.length).map(h=>({text:h}));for(a=n.header.length,l=0;l<a;l++)n.header[l].tokens=[],this.lexer.inlineTokens(n.header[l].text,n.header[l].tokens);for(a=n.rows.length,l=0;l<a;l++)for(f=n.rows[l],c=0;c<f.length;c++)f[c].tokens=[],this.lexer.inlineTokens(f[c].text,f[c].tokens);return n}}}lheading(r){const e=this.rules.block.lheading.exec(r);if(e){const n={type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}paragraph(r){const e=this.rules.block.paragraph.exec(r);if(e){const n={type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}text(r){const e=this.rules.block.text.exec(r);if(e){const n={type:"text",raw:e[0],text:e[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}escape(r){const e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:Fr(e[1])}}tag(r){const e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):Fr(e[0]):e[0]}}link(r){const e=this.rules.inline.link.exec(r);if(e){const n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const l=Eg(n.slice(0,-1),"\\");if((n.length-l.length)%2==0)return}else{const l=function yB(t,r){if(-1===t.indexOf(r[1]))return-1;const e=t.length;let n=0,a=0;for(;a<e;a++)if("\\"===t[a])a++;else if(t[a]===r[0])n++;else if(t[a]===r[1]&&(n--,n<0))return a;return-1}(e[2],"()");if(l>-1){const f=(0===e[0].indexOf("!")?5:4)+e[1].length+l;e[2]=e[2].substring(0,l),e[0]=e[0].substring(0,f).trim(),e[3]=""}}let a=e[2],s="";if(this.options.pedantic){const l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);l&&(a=l[1],s=l[3])}else s=e[3]?e[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),rw(e,{href:a&&a.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(r,e){let n;if((n=this.rules.inline.reflink.exec(r))||(n=this.rules.inline.nolink.exec(r))){let a=(n[2]||n[1]).replace(/\s+/g," ");if(a=e[a.toLowerCase()],!a||!a.href){const s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return rw(n,a,n[0],this.lexer)}}emStrong(r,e,n=""){let a=this.rules.inline.emStrong.lDelim.exec(r);if(!a||a[3]&&n.match(/[\p{L}\p{N}]/u))return;const s=a[1]||a[2]||"";if(!s||s&&(""===n||this.rules.inline.punctuation.exec(n))){const l=a[0].length-1;let c,f,h=l,g=0;const I="*"===a[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(I.lastIndex=0,e=e.slice(-1*r.length+l);null!=(a=I.exec(e));){if(c=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!c)continue;if(f=c.length,a[3]||a[4]){h+=f;continue}if((a[5]||a[6])&&l%3&&!((l+f)%3)){g+=f;continue}if(h-=f,h>0)continue;if(f=Math.min(f,f+h+g),Math.min(l,f)%2){const V=r.slice(1,l+a.index+f);return{type:"em",raw:r.slice(0,l+a.index+f+1),text:V,tokens:this.lexer.inlineTokens(V,[])}}const B=r.slice(2,l+a.index+f-1);return{type:"strong",raw:r.slice(0,l+a.index+f+1),text:B,tokens:this.lexer.inlineTokens(B,[])}}}}codespan(r){const e=this.rules.inline.code.exec(r);if(e){let n=e[2].replace(/\n/g," ");const a=/[^ ]/.test(n),s=/^ /.test(n)&&/ $/.test(n);return a&&s&&(n=n.substring(1,n.length-1)),n=Fr(n,!0),{type:"codespan",raw:e[0],text:n}}}br(r){const e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){const e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2],[])}}autolink(r,e){const n=this.rules.inline.autolink.exec(r);if(n){let a,s;return"@"===n[2]?(a=Fr(this.options.mangle?e(n[1]):n[1]),s="mailto:"+a):(a=Fr(n[1]),s=a),{type:"link",raw:n[0],text:a,href:s,tokens:[{type:"text",raw:a,text:a}]}}}url(r,e){let n;if(n=this.rules.inline.url.exec(r)){let a,s;if("@"===n[2])a=Fr(this.options.mangle?e(n[0]):n[0]),s="mailto:"+a;else{let l;do{l=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(l!==n[0]);a=Fr(n[0]),s="www."===n[1]?"http://"+a:a}return{type:"link",raw:n[0],text:a,href:s,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(r,e){const n=this.rules.inline.text.exec(r);if(n){let a;return a=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):Fr(n[0]):n[0]:Fr(this.options.smartypants?e(n[0]):n[0]),{type:"text",raw:n[0],text:a}}}}const dn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Sg,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};dn.def=_i(dn.def).replace("label",dn._label).replace("title",dn._title).getRegex(),dn.bullet=/(?:[*+-]|\d{1,9}[.)])/,dn.listItemStart=_i(/^( *)(bull) */).replace("bull",dn.bullet).getRegex(),dn.list=_i(dn.list).replace(/bull/g,dn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+dn.def.source+")").getRegex(),dn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",dn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,dn.html=_i(dn.html,"i").replace("comment",dn._comment).replace("tag",dn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),dn.paragraph=_i(dn._paragraph).replace("hr",dn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dn._tag).getRegex(),dn.blockquote=_i(dn.blockquote).replace("paragraph",dn.paragraph).getRegex(),dn.normal=ja({},dn),dn.gfm=ja({},dn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),dn.gfm.table=_i(dn.gfm.table).replace("hr",dn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dn._tag).getRegex(),dn.gfm.paragraph=_i(dn._paragraph).replace("hr",dn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",dn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",dn._tag).getRegex(),dn.pedantic=ja({},dn.normal,{html:_i("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",dn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Sg,paragraph:_i(dn.normal._paragraph).replace("hr",dn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",dn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Jt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Sg,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Sg,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function xB(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function ow(t){let e,n,r="";const a=t.length;for(e=0;e<a;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}Jt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",Jt.punctuation=_i(Jt.punctuation).replace(/punctuation/g,Jt._punctuation).getRegex(),Jt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Jt.escapedEmSt=/\\\*|\\_/g,Jt._comment=_i(dn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Jt.emStrong.lDelim=_i(Jt.emStrong.lDelim).replace(/punct/g,Jt._punctuation).getRegex(),Jt.emStrong.rDelimAst=_i(Jt.emStrong.rDelimAst,"g").replace(/punct/g,Jt._punctuation).getRegex(),Jt.emStrong.rDelimUnd=_i(Jt.emStrong.rDelimUnd,"g").replace(/punct/g,Jt._punctuation).getRegex(),Jt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Jt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Jt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Jt.autolink=_i(Jt.autolink).replace("scheme",Jt._scheme).replace("email",Jt._email).getRegex(),Jt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Jt.tag=_i(Jt.tag).replace("comment",Jt._comment).replace("attribute",Jt._attribute).getRegex(),Jt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Jt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Jt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Jt.link=_i(Jt.link).replace("label",Jt._label).replace("href",Jt._href).replace("title",Jt._title).getRegex(),Jt.reflink=_i(Jt.reflink).replace("label",Jt._label).replace("ref",dn._label).getRegex(),Jt.nolink=_i(Jt.nolink).replace("ref",dn._label).getRegex(),Jt.reflinkSearch=_i(Jt.reflinkSearch,"g").replace("reflink",Jt.reflink).replace("nolink",Jt.nolink).getRegex(),Jt.normal=ja({},Jt),Jt.pedantic=ja({},Jt.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:_i(/^!?\[(label)\]\((.*?)\)/).replace("label",Jt._label).getRegex(),reflink:_i(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Jt._label).getRegex()}),Jt.gfm=ja({},Jt.normal,{escape:_i(Jt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Jt.gfm.url=_i(Jt.gfm.url,"i").replace("email",Jt.gfm._extended_email).getRegex(),Jt.breaks=ja({},Jt.gfm,{br:_i(Jt.br).replace("{2,}","*").getRegex(),text:_i(Jt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class Qs{constructor(r){this.tokens=[],this.tokens.links=Object.create(null),this.options=r||xd,this.options.tokenizer=this.options.tokenizer||new p_,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:dn.normal,inline:Jt.normal};this.options.pedantic?(e.block=dn.pedantic,e.inline=Jt.pedantic):this.options.gfm&&(e.block=dn.gfm,e.inline=this.options.breaks?Jt.breaks:Jt.gfm),this.tokenizer.rules=e}static get rules(){return{block:dn,inline:Jt}}static lex(r,e){return new Qs(e).lex(r)}static lexInline(r,e){return new Qs(e).inlineTokens(r)}lex(r){let e;for(r=r.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(r,this.tokens);e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(r,e=[]){let n,a,s,l;for(this.options.pedantic&&(r=r.replace(/^ +$/gm,""));r;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(c=>!!(n=c.call({lexer:this},r,e))&&(r=r.substring(n.raw.length),e.push(n),!0)))){if(n=this.tokenizer.space(r)){r=r.substring(n.raw.length),1===n.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(n);continue}if(n=this.tokenizer.code(r)){r=r.substring(n.raw.length),a=e[e.length-1],!a||"paragraph"!==a.type&&"text"!==a.type?e.push(n):(a.raw+="\n"+n.raw,a.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=a.text);continue}if(n=this.tokenizer.fences(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.heading(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.hr(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.blockquote(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.list(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.html(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.def(r)){r=r.substring(n.raw.length),a=e[e.length-1],!a||"paragraph"!==a.type&&"text"!==a.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(a.raw+="\n"+n.raw,a.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=a.text);continue}if(n=this.tokenizer.table(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.lheading(r)){r=r.substring(n.raw.length),e.push(n);continue}if(s=r,this.options.extensions&&this.options.extensions.startBlock){let c=1/0;const f=r.slice(1);let h;this.options.extensions.startBlock.forEach(function(g){h=g.call({lexer:this},f),"number"==typeof h&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(s=r.substring(0,c+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){a=e[e.length-1],l&&"paragraph"===a.type?(a.raw+="\n"+n.raw,a.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):e.push(n),l=s.length!==r.length,r=r.substring(n.raw.length);continue}if(n=this.tokenizer.text(r)){r=r.substring(n.raw.length),a=e[e.length-1],a&&"text"===a.type?(a.raw+="\n"+n.raw,a.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=a.text):e.push(n);continue}if(r){const c="Infinite loop on byte: "+r.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}}return this.state.top=!0,e}inline(r,e){this.inlineQueue.push({src:r,tokens:e})}inlineTokens(r,e=[]){let n,a,s,c,f,h,l=r;if(this.tokens.links){const g=Object.keys(this.tokens.links);if(g.length>0)for(;null!=(c=this.tokenizer.rules.inline.reflinkSearch.exec(l));)g.includes(c[0].slice(c[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,c.index)+"["+iw("a",c[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(c=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,c.index)+"["+iw("a",c[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(c=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,c.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;r;)if(f||(h=""),f=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(g=>!!(n=g.call({lexer:this},r,e))&&(r=r.substring(n.raw.length),e.push(n),!0)))){if(n=this.tokenizer.escape(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.tag(r)){r=r.substring(n.raw.length),a=e[e.length-1],a&&"text"===n.type&&"text"===a.type?(a.raw+=n.raw,a.text+=n.text):e.push(n);continue}if(n=this.tokenizer.link(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.reflink(r,this.tokens.links)){r=r.substring(n.raw.length),a=e[e.length-1],a&&"text"===n.type&&"text"===a.type?(a.raw+=n.raw,a.text+=n.text):e.push(n);continue}if(n=this.tokenizer.emStrong(r,l,h)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.codespan(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.br(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.del(r)){r=r.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.autolink(r,ow)){r=r.substring(n.raw.length),e.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(r,ow))){r=r.substring(n.raw.length),e.push(n);continue}if(s=r,this.options.extensions&&this.options.extensions.startInline){let g=1/0;const I=r.slice(1);let B;this.options.extensions.startInline.forEach(function(V){B=V.call({lexer:this},I),"number"==typeof B&&B>=0&&(g=Math.min(g,B))}),g<1/0&&g>=0&&(s=r.substring(0,g+1))}if(n=this.tokenizer.inlineText(s,xB)){r=r.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(h=n.raw.slice(-1)),f=!0,a=e[e.length-1],a&&"text"===a.type?(a.raw+=n.raw,a.text+=n.text):e.push(n);continue}if(r){const g="Infinite loop on byte: "+r.charCodeAt(0);if(this.options.silent){console.error(g);break}throw new Error(g)}}return e}}class Lh{constructor(r){this.options=r||xd}code(r,e,n){const a=(e||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(r,a);null!=s&&s!==r&&(n=!0,r=s)}return r=r.replace(/\n$/,"")+"\n",a?'<pre><code class="'+this.options.langPrefix+Fr(a,!0)+'">'+(n?r:Fr(r,!0))+"</code></pre>\n":"<pre><code>"+(n?r:Fr(r,!0))+"</code></pre>\n"}blockquote(r){return"<blockquote>\n"+r+"</blockquote>\n"}html(r){return r}heading(r,e,n,a){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+a.slug(n)+'">'+r+"</h"+e+">\n":"<h"+e+">"+r+"</h"+e+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(r,e,n){const a=e?"ol":"ul";return"<"+a+(e&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+a+">\n"}listitem(r){return"<li>"+r+"</li>\n"}checkbox(r){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(r){return"<p>"+r+"</p>\n"}table(r,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+r+"</thead>\n"+e+"</table>\n"}tablerow(r){return"<tr>\n"+r+"</tr>\n"}tablecell(r,e){const n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+r+"</"+n+">\n"}strong(r){return"<strong>"+r+"</strong>"}em(r){return"<em>"+r+"</em>"}codespan(r){return"<code>"+r+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(r){return"<del>"+r+"</del>"}link(r,e,n){if(null===(r=ew(this.options.sanitize,this.options.baseUrl,r)))return n;let a='<a href="'+Fr(r)+'"';return e&&(a+=' title="'+e+'"'),a+=">"+n+"</a>",a}image(r,e,n){if(null===(r=ew(this.options.sanitize,this.options.baseUrl,r)))return n;let a='<img src="'+r+'" alt="'+n+'"';return e&&(a+=' title="'+e+'"'),a+=this.options.xhtml?"/>":">",a}text(r){return r}}class aw{strong(r){return r}em(r){return r}codespan(r){return r}del(r){return r}html(r){return r}text(r){return r}link(r,e,n){return""+n}image(r,e,n){return""+n}br(){return""}}class sw{constructor(){this.seen={}}serialize(r){return r.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(r,e){let n=r,a=0;if(this.seen.hasOwnProperty(n)){a=this.seen[r];do{a++,n=r+"-"+a}while(this.seen.hasOwnProperty(n))}return e||(this.seen[r]=a,this.seen[n]=0),n}slug(r,e={}){const n=this.serialize(r);return this.getNextSafeSlug(n,e.dryrun)}}class Js{constructor(r){this.options=r||xd,this.options.renderer=this.options.renderer||new Lh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new aw,this.slugger=new sw}static parse(r,e){return new Js(e).parse(r)}static parseInline(r,e){return new Js(e).parseInline(r)}parse(r,e=!0){let a,s,l,c,f,h,g,I,B,V,ce,Ie,he,Se,Oe,Be,et,at,ft,n="";const Pt=r.length;for(a=0;a<Pt;a++)if(V=r[a],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[V.type]&&(ft=this.options.extensions.renderers[V.type].call({parser:this},V),!1!==ft||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(V.type)))n+=ft||"";else switch(V.type){case"space":continue;case"hr":n+=this.renderer.hr();continue;case"heading":n+=this.renderer.heading(this.parseInline(V.tokens),V.depth,ZC(this.parseInline(V.tokens,this.textRenderer)),this.slugger);continue;case"code":n+=this.renderer.code(V.text,V.lang,V.escaped);continue;case"table":for(I="",g="",c=V.header.length,s=0;s<c;s++)g+=this.renderer.tablecell(this.parseInline(V.header[s].tokens),{header:!0,align:V.align[s]});for(I+=this.renderer.tablerow(g),B="",c=V.rows.length,s=0;s<c;s++){for(h=V.rows[s],g="",f=h.length,l=0;l<f;l++)g+=this.renderer.tablecell(this.parseInline(h[l].tokens),{header:!1,align:V.align[l]});B+=this.renderer.tablerow(g)}n+=this.renderer.table(I,B);continue;case"blockquote":B=this.parse(V.tokens),n+=this.renderer.blockquote(B);continue;case"list":for(ce=V.ordered,Ie=V.start,he=V.loose,c=V.items.length,B="",s=0;s<c;s++)Oe=V.items[s],Be=Oe.checked,et=Oe.task,Se="",Oe.task&&(at=this.renderer.checkbox(Be),he?Oe.tokens.length>0&&"paragraph"===Oe.tokens[0].type?(Oe.tokens[0].text=at+" "+Oe.tokens[0].text,Oe.tokens[0].tokens&&Oe.tokens[0].tokens.length>0&&"text"===Oe.tokens[0].tokens[0].type&&(Oe.tokens[0].tokens[0].text=at+" "+Oe.tokens[0].tokens[0].text)):Oe.tokens.unshift({type:"text",text:at}):Se+=at),Se+=this.parse(Oe.tokens,he),B+=this.renderer.listitem(Se,et,Be);n+=this.renderer.list(B,ce,Ie);continue;case"html":n+=this.renderer.html(V.text);continue;case"paragraph":n+=this.renderer.paragraph(this.parseInline(V.tokens));continue;case"text":for(B=V.tokens?this.parseInline(V.tokens):V.text;a+1<Pt&&"text"===r[a+1].type;)V=r[++a],B+="\n"+(V.tokens?this.parseInline(V.tokens):V.text);n+=e?this.renderer.paragraph(B):B;continue;default:{const Rt='Token with "'+V.type+'" type was not found.';if(this.options.silent)return void console.error(Rt);throw new Error(Rt)}}return n}parseInline(r,e){e=e||this.renderer;let a,s,l,n="";const c=r.length;for(a=0;a<c;a++)if(s=r[a],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(l=this.options.extensions.renderers[s.type].call({parser:this},s),!1!==l||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)))n+=l||"";else switch(s.type){case"escape":case"text":n+=e.text(s.text);break;case"html":n+=e.html(s.text);break;case"link":n+=e.link(s.href,s.title,this.parseInline(s.tokens,e));break;case"image":n+=e.image(s.href,s.title,s.text);break;case"strong":n+=e.strong(this.parseInline(s.tokens,e));break;case"em":n+=e.em(this.parseInline(s.tokens,e));break;case"codespan":n+=e.codespan(s.text);break;case"br":n+=e.br();break;case"del":n+=e.del(this.parseInline(s.tokens,e));break;default:{const f='Token with "'+s.type+'" type was not found.';if(this.options.silent)return void console.error(f);throw new Error(f)}}return n}}function yn(t,r,e){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof r&&(e=r,r=null),nw(r=ja({},yn.defaults,r||{})),e){const n=r.highlight;let a;try{a=Qs.lex(t,r)}catch(c){return e(c)}const s=function(c){let f;if(!c)try{r.walkTokens&&yn.walkTokens(a,r.walkTokens),f=Js.parse(a,r)}catch(h){c=h}return r.highlight=n,c?e(c):e(null,f)};if(!n||n.length<3||(delete r.highlight,!a.length))return s();let l=0;return yn.walkTokens(a,function(c){"code"===c.type&&(l++,setTimeout(()=>{n(c.text,c.lang,function(f,h){if(f)return s(f);null!=h&&h!==c.text&&(c.text=h,c.escaped=!0),l--,0===l&&s()})},0))}),void(0===l&&s())}try{const n=Qs.lex(t,r);return r.walkTokens&&yn.walkTokens(n,r.walkTokens),Js.parse(n,r)}catch(n){if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",r.silent)return"<p>An error occurred:</p><pre>"+Fr(n.message+"",!0)+"</pre>";throw n}}yn.options=yn.setOptions=function(t){return ja(yn.defaults,t),function rB(t){xd=t}(yn.defaults),yn},yn.getDefaults=function QC(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},yn.defaults=xd,yn.use=function(...t){const r=ja({},...t),e=yn.defaults.extensions||{renderers:{},childTokens:{}};let n;t.forEach(a=>{if(a.extensions&&(n=!0,a.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){const l=e.renderers?e.renderers[s.name]:null;e.renderers[s.name]=l?function(...c){let f=s.renderer.apply(this,c);return!1===f&&(f=l.apply(this,c)),f}:s.renderer}if(s.tokenizer){if(!s.level||"block"!==s.level&&"inline"!==s.level)throw new Error("extension level must be 'block' or 'inline'");e[s.level]?e[s.level].unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&("block"===s.level?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:"inline"===s.level&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}s.childTokens&&(e.childTokens[s.name]=s.childTokens)})),a.renderer){const s=yn.defaults.renderer||new Lh;for(const l in a.renderer){const c=s[l];s[l]=(...f)=>{let h=a.renderer[l].apply(s,f);return!1===h&&(h=c.apply(s,f)),h}}r.renderer=s}if(a.tokenizer){const s=yn.defaults.tokenizer||new p_;for(const l in a.tokenizer){const c=s[l];s[l]=(...f)=>{let h=a.tokenizer[l].apply(s,f);return!1===h&&(h=c.apply(s,f)),h}}r.tokenizer=s}if(a.walkTokens){const s=yn.defaults.walkTokens;r.walkTokens=function(l){a.walkTokens.call(this,l),s&&s.call(this,l)}}n&&(r.extensions=e),yn.setOptions(r)})},yn.walkTokens=function(t,r){for(const e of t)switch(r.call(yn,e),e.type){case"table":for(const n of e.header)yn.walkTokens(n.tokens,r);for(const n of e.rows)for(const a of n)yn.walkTokens(a.tokens,r);break;case"list":yn.walkTokens(e.items,r);break;default:yn.defaults.extensions&&yn.defaults.extensions.childTokens&&yn.defaults.extensions.childTokens[e.type]?yn.defaults.extensions.childTokens[e.type].forEach(function(n){yn.walkTokens(e[n],r)}):e.tokens&&yn.walkTokens(e.tokens,r)}},yn.parseInline=function(t,r){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");nw(r=ja({},yn.defaults,r||{}));try{const e=Qs.lexInline(t,r);return r.walkTokens&&yn.walkTokens(e,r.walkTokens),Js.parseInline(e,r)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",r.silent)return"<p>An error occurred:</p><pre>"+Fr(e.message+"",!0)+"</pre>";throw e}},yn.Parser=Js,yn.parser=Js.parse,yn.Renderer=Lh,yn.TextRenderer=aw,yn.Lexer=Qs,yn.lexer=Qs.lex,yn.Tokenizer=p_,yn.Slugger=sw,yn.parse=yn;var bB=S(155);const CB=["*"];var Nh=(()=>{return(t=Nh||(Nh={})).CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",Nh;var t})();class lw{}const cw=new o.InjectionToken("SECURITY_CONTEXT");let Tg=(()=>{class t{constructor(e,n,a,s,l){this.platform=e,this.securityContext=n,this.http=a,this.sanitizer=l,this.initialMarkedOptions={renderer:new Lh},this.options=s}get options(){return this._options}set options(e){this._options={...this.initialMarkedOptions,...e}}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}compile(e,n=!1,a=!1,s=this.options){const l=this.trimIndentation(e),c=n?this.decodeHtml(l):l,h=yn(a?this.renderEmoji(c):c,s);return this.sanitizer.sanitize(this.securityContext,h)||""}getSource(e){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe((0,ye.U)(n=>this.handleExtension(e,n)))}highlight(e){if((0,x.isPlatformBrowser)(this.platform)&&"undefined"!=typeof Prism){e||(e=document);const n=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(n,a=>a.classList.add("language-none")),Prism.highlightAllUnder(e)}}renderKatex(e,n){if(!(0,x.isPlatformBrowser)(this.platform))return e;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return e.replace(/\$([^\s][^$]*?[^\s])\$/gm,(a,s)=>katex.renderToString(s,n))}decodeHtml(e){if(!(0,x.isPlatformBrowser)(this.platform))return e;const n=document.createElement("textarea");return n.innerHTML=e,n.value}handleExtension(e,n){const a=e?e.split("?")[0].split(".").splice(-1).join():"";return"md"!==a?"```"+a+"\n"+n+"\n```":n}renderEmoji(e){if(!(0,x.isPlatformBrowser)(this.platform))return e;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}trimIndentation(e){if(!e)return"";let n;return e.split("\n").map(a=>{let s=n;return a.length>0&&(s=isNaN(s)?a.search(/\S|$/):Math.min(a.search(/\S|$/),s)),isNaN(n)&&(n=s),s?a.substring(s):a}).join("\n")}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(cw),o.\u0275\u0275inject(L.HttpClient,8),o.\u0275\u0275inject(lw,8),o.\u0275\u0275inject(k.H7))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),uw=(()=>{class t{constructor(e,n){this.element=e,this.markdownService=n,this.error=new o.EventEmitter,this.load=new o.EventEmitter,this.ready=new o.EventEmitter,this._commandLine=!1,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(e){this._emoji=this.coerceBooleanProperty(e)}get katex(){return this._katex}set katex(e){this._katex=this.coerceBooleanProperty(e)}get lineHighlight(){return this._lineHighlight}set lineHighlight(e){this._lineHighlight=this.coerceBooleanProperty(e)}get lineNumbers(){return this._lineNumbers}set lineNumbers(e){this._lineNumbers=this.coerceBooleanProperty(e)}get commandLine(){return this._commandLine}set commandLine(e){this._commandLine=this.coerceBooleanProperty(e)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion()}render(e,n=!1){let a=this.markdownService.compile(e,n,this.emoji);a=this.katex?this.markdownService.renderKatex(a,this.katexOptions):a,this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(e){return null!=e&&"false"!=`${String(e)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(e=>{this.render(e),this.load.emit(e)},e=>this.error.emit(e))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,Nh.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,Nh.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(e,n){const a=e.querySelectorAll("pre");for(let s=0;s<a.length;s++){const l=n instanceof Array?n:[n];a.item(s).classList.add(...l)}}setPluginOptions(e,n){const a=e.querySelectorAll("pre");for(let s=0;s<a.length;s++)Object.keys(n).forEach(l=>{const c=n[l];if(c){const f=this.toLispCase(l);a.item(s).setAttribute(f,c.toString())}})}toLispCase(e){const n=e.match(/([A-Z])/g);if(!n)return e;let a=e.toString();for(let s=0,l=n.length;s<l;s++)a=a.replace(new RegExp(n[s]),"-"+n[s].toLowerCase());return"-"===a.slice(0,1)&&(a=a.slice(1)),a}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(Tg))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[o.\u0275\u0275NgOnChangesFeature],ngContentSelectors:CB,decls:1,vars:0,template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275projection(0))},encapsulation:2}),t})(),dw=(()=>{class t{constructor(e,n,a,s){this.domSanitizer=e,this.elementRef=n,this.markdownService=a,this.zone=s}transform(e){if(null==e)return"";if("string"!=typeof e)return console.error(`MarkdownPipe has been invoked with an invalid value type [${typeof e}]`),e;const n=this.markdownService.compile(e);return this.zone.onStable.pipe((0,bB.P)()).subscribe(()=>this.markdownService.highlight(this.elementRef.nativeElement)),this.domSanitizer.bypassSecurityTrustHtml(n)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(k.H7,16),o.\u0275\u0275directiveInject(o.ElementRef,16),o.\u0275\u0275directiveInject(Tg,16),o.\u0275\u0275directiveInject(o.NgZone,16))},t.\u0275pipe=o.\u0275\u0275definePipe({name:"markdown",type:t,pure:!0}),t})(),m_=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[Tg,e&&e.loader||[],e&&e.markedOptions||[],{provide:cw,useValue:e&&null!=e.sanitize?e.sanitize:o.SecurityContext.HTML}]}}static forChild(){return{ngModule:t}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({}),t})();var xs=S(8977),zi=S(4522),Wt=S(5074),Hi=S(7371),ri=S(207),Dt=S(1484);function AB(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function kB(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"form",3),o.\u0275\u0275listener("ngSubmit",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",4),o.\u0275\u0275template(3,AB,1,0,"ng-container",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-dialog-actions"),o.\u0275\u0275elementStart(5,"button",6),o.\u0275\u0275text(6,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext(),n=o.\u0275\u0275reference(3);o.\u0275\u0275property("formGroup",e.contentForm),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngTemplateOutlet",n),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!e.contentForm.valid)}}function IB(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function PB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",4),o.\u0275\u0275template(1,IB,1,0,"ng-container",5),o.\u0275\u0275elementEnd()),2&t){o.\u0275\u0275nextContext();const e=o.\u0275\u0275reference(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)}}function FB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.key)}}function RB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"ul",18),o.\u0275\u0275template(1,FB,2,1,"li",19),o.\u0275\u0275pipe(2,"keyvalue"),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("hidden",!0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,2,e.tokens))}}function DB(t,r){if(1&t&&(o.\u0275\u0275element(0,"classifieds-ui-dynamic-content-viewer",20),o.\u0275\u0275pipe(1,"markdown")),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("content",o.\u0275\u0275pipeBind1(1,1,e.preview))}}function OB(t,r){if(1&t&&o.\u0275\u0275element(0,"classifieds-ui-dynamic-content-viewer",20),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("content",e.preview)}}function MB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"as-split",7),o.\u0275\u0275elementStart(1,"as-split-area",8),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275template(3,RB,3,4,"ul",9),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275elementStart(5,"mat-label"),o.\u0275\u0275text(6,"Content Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-select",10),o.\u0275\u0275elementStart(8,"mat-option",11),o.\u0275\u0275text(9,"Markdown"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-option",12),o.\u0275\u0275text(11,"HTML"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"mat-option",13),o.\u0275\u0275text(13,"JSON"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"as-split",14),o.\u0275\u0275elementStart(15,"as-split-area",8),o.\u0275\u0275elementStart(16,"div"),o.\u0275\u0275element(17,"textarea",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(18,"as-split-area",8),o.\u0275\u0275elementStart(19,"div"),o.\u0275\u0275element(20,"textarea",16),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(21,"as-split-area",8),o.\u0275\u0275template(22,DB,2,3,"classifieds-ui-dynamic-content-viewer",17),o.\u0275\u0275template(23,OB,1,1,"classifieds-ui-dynamic-content-viewer",17),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("direction",e.splitDirection)("formGroup",e.contentForm),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",e.tokens),o.\u0275\u0275advance(14),o.\u0275\u0275property("cols",e.cols)("rows",e.rows),o.\u0275\u0275advance(3),o.\u0275\u0275property("cols",e.cols)("rows",e.rows),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",e.isMarkdown),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.isMarkdown)}}class Hc{constructor(r){r&&(this.content=r.content,this.contentType=r.contentType,r.jsFile&&""!==r.jsFile&&(this.jsFile=r.jsFile),r.jsScript&&""!==r.jsScript&&(this.jsScript=r.jsScript))}}let Ag=(()=>{class t{constructor(e){this.fb=e,this.submitted=new o.EventEmitter,this.splitDirection="vertical",this.rows=40,this.cols=100,this.rootForm=!0,this.onTouched=()=>{},this.contentForm=this.fb.group({content:this.fb.control("",d.kI.required),contentType:this.fb.control("",d.kI.required),jsScript:this.fb.control("")}),this.isMarkdown=!1,this.contentEditorOptions={theme:"vs-dark",language:"text/html"}}set snippet(e){void 0!==e&&this.contentForm.setValue({...e,jsScript:e.jsScript&&""!==e.jsScript?e.jsScript:""})}ngOnInit(){this.contentForm.get("content").valueChanges.pipe((0,xs.x)(),(0,Hn.b)(500),(0,ye.U)(e=>void 0!==this.tokens?this.replaceTokens(e):e)).subscribe(e=>{this.preview=e}),this.contentForm.get("contentType").valueChanges.subscribe(e=>{this.isMarkdown="text/markdown"===e})}writeValue(e){e&&(console.log(`write value: ${e}`),this.contentForm.setValue(e,{emitEvent:!1}))}registerOnChange(e){this.contentForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.contentForm.disable():this.contentForm.enable()}validate(e){return this.contentForm.valid?null:{invalidForm:{valid:!1,message:"snippet is invalid"}}}submit(){this.submitted.emit(new Hc({content:this.contentForm.get("content").value,contentType:this.contentForm.get("contentType").value,jsScript:this.contentForm.get("jsScript").value}))}replaceTokens(e){return this.tokens&&this.tokens.forEach((n,a)=>{e=e.replace(`[${a}]`,`${n} [token = '${a}']`)}),e}addScript(){let e=document.createElement("script");e.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-snippet-form"]],inputs:{tokens:"tokens",splitDirection:"splitDirection",rows:"rows",cols:"cols",rootForm:"rootForm",snippet:"snippet"},outputs:{submitted:"submitted"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:4,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","content-inner",4,"ngIf"],["formBodyTpl",""],[3,"formGroup","ngSubmit"],[1,"content-inner"],[4,"ngTemplateOutlet"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"direction","formGroup"],["size","50"],[3,"hidden",4,"ngIf"],["required","","formControlName","contentType"],["value","text/markdown"],["value","text/html"],["value","application/json"],["direction","horizontal"],["formControlName","content",3,"cols","rows"],["formControlName","jsScript",3,"cols","rows"],[3,"content",4,"ngIf"],[3,"hidden"],[4,"ngFor","ngForOf"],[3,"content"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,kB,7,3,"form",0),o.\u0275\u0275template(1,PB,2,1,"div",1),o.\u0275\u0275template(2,MB,24,9,"ng-template",null,2,o.\u0275\u0275templateRefExtractor)),2&e&&(o.\u0275\u0275property("ngIf",n.rootForm),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.rootForm))},directives:[zi.lW,Oh,Wt.KE,Hi.gD,ri.ey,mn.DynamicContentViewer,x.NgIf,d._Y,d.JL,d.sg,Dt.xY,x.NgTemplateOutlet,Dt.H8,Dt.ZT,Mh,x.NgForOf,Wt.hX,d.Q7,d.JJ,d.u,d.Fj],pipes:[x.KeyValuePipe,dw],styles:[""]}),t})(),g_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,d.u5,wl,Cg,sr.MaterialModule,Au,m_,mn.UtilsModule]]}),t})(),fw=(()=>{class t{parseSnippet({snippet:e}){return(0,Re.of)(e.content)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ln=S(3999),LB=S(1954);function Gn(t,r,e){return(0,LB.P)(()=>t()?r:e)}var Ln=S(6562),Ei=S(4744),za=S(4792),In=S(8562),Fo=S(3670);function NB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",10),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.value.title)}}function BB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",10),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e)}}function jB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-form-field",2),o.\u0275\u0275elementStart(1,"mat-label"),o.\u0275\u0275text(2,"Context"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-select",11),o.\u0275\u0275template(4,BB,2,2,"mat-option",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(4),o.\u0275\u0275property("ngForOf",e.contexts)}}function zB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",12),o.\u0275\u0275elementStart(1,"mat-checkbox",13),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.index,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("formGroupName",e),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(n.flagsAsArray[e])}}function UB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",1),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-form-field",2),o.\u0275\u0275elementStart(4,"mat-label"),o.\u0275\u0275text(5,"Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-select",3),o.\u0275\u0275template(7,NB,2,2,"mat-option",4),o.\u0275\u0275pipe(8,"keyvalue"),o.\u0275\u0275pipe(9,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(10,jB,5,1,"mat-form-field",5),o.\u0275\u0275elementStart(11,"mat-form-field",2),o.\u0275\u0275element(12,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"mat-form-field",2),o.\u0275\u0275element(14,"input",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"div",8),o.\u0275\u0275template(16,zB,3,2,"div",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=r.index,a=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",e),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(a.paramName(n)),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(8,5,o.\u0275\u0275pipeBind1(9,7,a.paramPlugins$))),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf","context"==e.get("mapping").get("type").value),o.\u0275\u0275advance(6),o.\u0275\u0275property("ngForOf",e.get("flags").controls)}}function VB(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",4),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.value.title)}}class Zs extends ln.Plugin{constructor(r){super(r),r&&(this.evalParam=r.evalParam,r.condition&&(this.condition=r.condition),r.usedContexts&&(this.usedContexts=r.usedContexts))}}class lr{constructor(r){r&&(this.mapping=new kg(r.mapping),void 0!==r.flags&&(this.flags=r.flags.map(e=>new HB(e))))}}class kg{constructor(r){r&&(this.type=r.type,this.value=r.value,this.testValue=r.testValue,this.context=r.context)}}class HB{constructor(r){r&&(this.name=r.name,this.enabled=r.enabled)}}class el{constructor(r){r&&(this.plugin=r.plugin,this.settings=r.settings?new hw(r.settings):new hw)}}class hw{constructor(r){r&&(this.paramsString=r.paramsString,r.params&&Array.isArray(r.params)&&(this.params=r.params.map(e=>new lr(e))))}}let Xl=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"param"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Bh=(()=>{class t{constructor(e,n){this.fb=e,this.ppm=n,this.contexts=[],this.params$=new m.X({}),this.paramValues$=new m.X([]),this.init$=new M.x,this.formArray=this.fb.array([]),this.paramPlugins$=this.ppm.getPlugins(),this.flags=new Map,this.savedParams=new Map,this.paramIndexes=new Map,this.paramsSub=this.params$.pipe((0,ee.b)(a=>{const s=new Map([...this.paramIndexes]);this.formArray.clear(),this.paramIndexes.clear();let l=0;for(const c in a)Array.isArray(a[c])?(a[c].forEach(f=>this.buildParams(f,l,s)),l++):0===a[c].indexOf(":")&&(this.buildParams(a[c],l,s),l++)})).subscribe(),this.savedParamsSub=this.formArray.valueChanges.pipe((0,Hn.b)(1e3),(0,ee.b)(a=>{const s=a.length;for(let l=0;l<s;l++)this.savedParams.set(this.paramName(l),new lr(a[l]))})).subscribe(),this.paramValuesSub=(0,Ln.a)([this.paramValues$,this.params$,this.init$]).pipe((0,ee.b)(([a])=>{const s=a?a.length:0;for(let l=0;l<s;l++){const c=Array.from(this.paramIndexes).find(([f,h])=>h===l);void 0!==c&&this.savedParams.set(c[0],a[l])}})).subscribe(),this.onTouched=()=>{},this.flags.set("page","Page"),this.flags.set("limit","Limit"),this.flags.set("offset","Offset"),this.flags.set("searchString","Search String")}set params(e){this.params$.next(e)}set paramValues(e){this.paramValues$.next(e)}get flagsAsArray(){const e=[];return this.flags.forEach((n,a)=>{e.push(a)}),e}ngOnInit(){this.init$.next(void 0)}writeValue(e){e&&this.formArray.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formArray.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formArray.disable():this.formArray.enable()}validate(e){return this.formArray.valid?null:this.formArray.errors}buildParams(e,n,a){console.log(`build param ${e}`),this.paramIndexes.set(e,n),this.formArray.push(this.fb.group({mapping:this.fb.group({type:this.fb.control("",d.kI.required),value:this.fb.control("",d.kI.required),testValue:this.fb.control(""),context:this.fb.control("")}),flags:this.fb.array(this.flagsAsArray.map(s=>this.fb.group({name:s,enabled:this.fb.control(!1)})))})),this.savedParams.has(e)?this.formArray.at(n).setValue(this.savedParams.get(e)):n<this.paramValues$.value.length&&-1===Array.from(a).findIndex(([s,l])=>l===n)&&this.formArray.at(n).setValue(this.paramValues$.value[n])}paramName(e){let n=0;for(const a in this.params$.value)if(Array.isArray(this.params$.value[a]))for(let s=0;s<this.params$.value[a].length;s++){if(e===n)return this.params$.value[a][s];n++}else if(0===this.params$.value[a].indexOf(":")){if(n===e)return this.params$.value[a];n++}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Xl))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-params-form"]],inputs:{contexts:"contexts",params:"params",paramValues:"paramValues"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:1,vars:1,consts:[[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],["formGroupName","mapping"],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","mapping",4,"ngIf"],["matInput","","formControlName","value","placeholder","value","required",""],["matInput","","formControlName","testValue","placeholder","Test Value","required",""],["formArrayName","flags"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],["formControlName","context"],[3,"formGroupName"],["formControlName","enabled"]],template:function(e,n){1&e&&o.\u0275\u0275template(0,UB,17,9,"div",0),2&e&&o.\u0275\u0275property("ngForOf",n.formArray.controls)},directives:[Wt.KE,Hi.gD,ri.ey,za.oG,x.NgForOf,d.JL,d.sg,d.x0,Wt.hX,d.Q7,d.JJ,d.u,x.NgIf,In.Nt,d.Fj,d.CE],pipes:[x.KeyValuePipe,x.AsyncPipe],styles:[""]}),t})(),qB=(()=>{class t{constructor(e){this.fb=e,this.contexts=[],this.settings$=new m.X(void 0),this.afterViewInit$=new M.x,this.paramValues$=new m.X([]),this.formGroup=this.fb.group({paramsString:this.fb.control(""),params:this.fb.control([])}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,Hn.b)(500)).subscribe(n=>{const a=Fo.parse("?"+n);this.paramsParsed=a}),this.settingsSub=this.settings$.pipe((0,ee.b)(n=>{n&&this.formGroup.get("paramsString").setValue(n.paramsString?n.paramsString:"")})).subscribe(),this.settingsParamsSub=(0,Ln.a)([this.settings$,this.formGroup.get("paramsString").valueChanges]).pipe((0,$.h)(([n])=>void 0!==n),(0,ui.g)(1),(0,ee.b)(([n])=>this.paramValues$.next(n.params))).subscribe(),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:this.formGroup.errors}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-params-querystring"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:6,vars:4,consts:[[3,"formGroup"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275element(4,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"classifieds-ui-params-form",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(5),o.\u0275\u0275property("params",n.paramsParsed)("paramValues",n.paramValues$.value)("contexts",n.contexts))},directives:[Wt.KE,Bh,d.JL,d.sg,In.Nt,d.Fj,d.JJ,d.u],styles:[""]}),t})(),XB=(()=>{class t{constructor(e){this.fb=e,this.plugins$=new m.X([]),this.title$=new m.X("Plugin"),this.instance$=new m.X(new el),this.instanceForm=this.fb.group({plugin:this.fb.control(""),settings:this.fb.control("")}),this.instanceSub=this.instance$.pipe((0,$.h)(n=>!!n),(0,ee.b)(n=>{this.instanceForm.get("plugin").setValue(n.plugin)})).subscribe(),this.onTouched=()=>{}}set title(e){this.title$.next(e)}set plugins(e){this.plugins$.next(e)}set instance(e){this.instance$.next(e)}writeValue(e){e&&this.instanceForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.instanceForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.instanceForm.disable():this.instanceForm.enable()}validate(e){return this.instanceForm.valid?null:this.instanceForm.errors}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-params-plugin-instance"]],inputs:{title:"title",plugins:"plugins",instance:"instance"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:10,vars:10,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["formControlName","settings",3,"settings"],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-select",1),o.\u0275\u0275template(6,VB,2,2,"mat-option",2),o.\u0275\u0275pipe(7,"keyvalue"),o.\u0275\u0275pipe(8,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(9,"druid-params-querystring",3),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.instanceForm),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(4,4,n.title$)),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(7,6,o.\u0275\u0275pipeBind1(8,8,n.plugins$))),o.\u0275\u0275advance(3),o.\u0275\u0275property("settings",n.instance$.value.settings))},directives:[Wt.KE,Hi.gD,ri.ey,qB,d.JL,d.sg,Wt.hX,d.Q7,d.JJ,d.u,x.NgForOf],pipes:[x.AsyncPipe,x.KeyValuePipe],styles:[""]}),t})(),tl=(()=>{class t{constructor(e,n){this.paramPluginManager=e,this.tokenizerService=n}paramValue(e,n){return this.paramPluginManager.getPlugins().pipe((0,ye.U)(a=>Array.from(a).map(([s,l])=>l)),(0,ye.U)(a=>a.find(s=>s.condition&&s.condition({param:e,metadata:n})||!s.condition&&s.id===e.mapping.type)),(0,Ke.w)(a=>Gn(()=>!!a,a?a.evalParam({param:e,metadata:n}):(0,Re.of)(),(0,Re.of)(e.mapping.value))),(0,ye.U)(a=>e.mapping.value&&"string"==typeof a&&0===this.tokenizerService.discoverTokens(a).length?a:e.mapping.testValue))}paramValues(e){return(0,cn.D)(Array.from(e.keys()).map(n=>this.paramValue(e.get(n),new Map).pipe((0,ye.U)(a=>[n,a])))).pipe((0,ye.U)(n=>n.reduce((a,s)=>new Map([...a,s]),new Map)),(0,Ei.d)(new Map))}resolveParams({params:e}){return(0,Ke.w)(()=>Gn(()=>Object.keys(e).length>1,(0,cn.D)(Object.keys(e).map(n=>this.paramValue(e[n],new Map).pipe((0,ye.U)(a=>({[n]:a}))))).pipe((0,ye.U)(n=>n.reduce((a,s)=>({...a,...s}),{})),(0,ye.U)(n=>({options:n}))),Gn(()=>0!==Object.keys(e).length,this.paramValue(0!==Object.keys(e).length?e[Object.keys(e)[0]]:new lr,new Map).pipe((0,ye.U)(n=>({options:{[Object.keys(e)[0]]:n}}))),(0,Re.of)({options:{}}))))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Xl),o.\u0275\u0275inject(Xn))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Wl=(()=>{class t{constructor(e,n){e.register(new Zs({id:"static",title:"Static",evalParam:({param:t})=>(0,Re.of)(t.mapping.value)})),e.register((t=>new Zs({id:"inputparam",title:"Input Param",evalParam:({param:r,metadata:e})=>(0,Re.of)(r.mapping.value).pipe((0,ye.U)(n=>e.has("inputparams")&&e.get("inputparams").has(n)?e.get("inputparams").get(n):void 0),(0,Ke.w)(n=>Gn(()=>void 0!==n,void 0!==n?t.paramValue(n,e):(0,Re.of)(r.mapping.testValue),(0,Re.of)(r.mapping.testValue))))}))(n))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Xl),o.\u0275\u0275inject(tl))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.u5,d.UX,sr.MaterialModule]]}),t})();const pw="@ngrx/router-store/request",v_=((0,Et.PH)(pw,(0,Et.Ky)()),"@ngrx/router-store/navigation"),y_=((0,Et.PH)(v_,(0,Et.Ky)()),"@ngrx/router-store/cancel"),__=((0,Et.PH)(y_,(0,Et.Ky)()),"@ngrx/router-store/error"),mw=((0,Et.PH)(__,(0,Et.Ky)()),"@ngrx/router-store/navigated");(0,Et.PH)(mw,(0,Et.Ky)());class gw{}class vw{serialize(r){return{root:this.serializeRoute(r.root),url:r.url}}serializeRoute(r){const e=r.children.map(n=>this.serializeRoute(n));return{params:r.params,paramMap:r.paramMap,data:r.data,url:r.url,outlet:r.outlet,routeConfig:r.routeConfig?{component:r.routeConfig.component,path:r.routeConfig.path,pathMatch:r.routeConfig.pathMatch,redirectTo:r.routeConfig.redirectTo,outlet:r.routeConfig.outlet}:null,queryParams:r.queryParams,queryParamMap:r.queryParamMap,fragment:r.fragment,component:r.routeConfig?r.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:e[0],pathFromRoot:void 0,children:e}}}class x_{serialize(r){return{root:this.serializeRoute(r.root),url:r.url}}serializeRoute(r){const e=r.children.map(n=>this.serializeRoute(n));return{params:r.params,data:r.data,url:r.url,outlet:r.outlet,routeConfig:r.routeConfig?{path:r.routeConfig.path,pathMatch:r.routeConfig.pathMatch,redirectTo:r.routeConfig.redirectTo,outlet:r.routeConfig.outlet}:null,queryParams:r.queryParams,fragment:r.fragment,firstChild:e[0],children:e}}}var jh=(()=>{return(t=jh||(jh={}))[t.PreActivation=1]="PreActivation",t[t.PostActivation=2]="PostActivation",jh;var t})();const yw=new o.InjectionToken("@ngrx/router-store Internal Configuration"),_w=new o.InjectionToken("@ngrx/router-store Configuration");function KB(t){return{stateKey:"router",serializer:x_,navigationActionTiming:jh.PreActivation,...t}}var ha=(()=>{return(t=ha||(ha={}))[t.NONE=1]="NONE",t[t.ROUTER=2]="ROUTER",t[t.STORE=3]="STORE",ha;var t})();let YB=(()=>{class t{constructor(e,n,a,s,l,c){this.store=e,this.router=n,this.serializer=a,this.errorHandler=s,this.config=l,this.activeRuntimeChecks=c,this.lastEvent=null,this.routerState=null,this.trigger=ha.NONE,this.stateKey=this.config.stateKey,!(0,Et.rM)()&&(0,o.isDevMode)()&&(c?.strictActionSerializability||c?.strictStateSerializability)&&this.serializer instanceof vw&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the DefaultRouterStateSerializer. The default serializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer. This also applies to Ivy with immutability runtime checks."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}static forRoot(e={}){return{ngModule:t,providers:[{provide:yw,useValue:e},{provide:_w,useFactory:KB,deps:[yw]},{provide:gw,useClass:e.serializer?e.serializer:0===e.routerState?vw:x_}]}}setUpStoreStateListener(){this.store.pipe((0,Et.Ys)(this.stateKey),(0,Vo.M)(this.store)).subscribe(([e,n])=>{this.navigateIfNeeded(e,n)})}navigateIfNeeded(e,n){if(!e||!e.state||this.trigger===ha.ROUTER||this.lastEvent instanceof zn.NavigationStart)return;const a=e.state.url;(function QB(t,r){return bw(t)===bw(r)})(this.router.url,a)||(this.storeState=n,this.trigger=ha.STORE,this.router.navigateByUrl(a).catch(s=>{this.errorHandler.handleError(s)}))}setUpRouterEventsListener(){const e=this.config.navigationActionTiming===jh.PostActivation;let n;this.router.events.pipe((0,Vo.M)(this.store)).subscribe(([a,s])=>{this.lastEvent=a,a instanceof zn.NavigationStart?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==ha.STORE&&(this.storeState=s,this.dispatchRouterRequest(a))):a instanceof zn.RoutesRecognized?(n=a,!e&&this.trigger!==ha.STORE&&this.dispatchRouterNavigation(a)):a instanceof zn.NavigationCancel?(this.dispatchRouterCancel(a),this.reset()):a instanceof zn.NavigationError?(this.dispatchRouterError(a),this.reset()):a instanceof zn.NavigationEnd&&(this.trigger!==ha.STORE&&(e&&this.dispatchRouterNavigation(n),this.dispatchRouterNavigated(a)),this.reset())})}dispatchRouterRequest(e){this.dispatchRouterAction(pw,{event:e})}dispatchRouterNavigation(e){const n=this.serializer.serialize(e.state);this.dispatchRouterAction(v_,{routerState:n,event:new zn.RoutesRecognized(e.id,e.url,e.urlAfterRedirects,n)})}dispatchRouterCancel(e){this.dispatchRouterAction(y_,{storeState:this.storeState,event:e})}dispatchRouterError(e){this.dispatchRouterAction(__,{storeState:this.storeState,event:new zn.NavigationError(e.id,e.url,`${e}`)})}dispatchRouterNavigated(e){const n=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(mw,{event:e,routerState:n})}dispatchRouterAction(e,n){this.trigger=ha.ROUTER;try{this.store.dispatch({type:e,payload:{routerState:this.routerState,...n,event:0===this.config.routerState?n.event:{id:n.event.id,url:n.event.url,urlAfterRedirects:n.event.urlAfterRedirects}}})}finally{this.trigger=ha.NONE}}reset(){this.trigger=ha.NONE,this.storeState=null,this.routerState=null}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Et.yh),o.\u0275\u0275inject(zn.Router),o.\u0275\u0275inject(gw),o.\u0275\u0275inject(o.ErrorHandler),o.\u0275\u0275inject(_w),o.\u0275\u0275inject(Et.hg))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({}),t})();function bw(t){return t?.length>0&&"/"===t[t.length-1]?t.substring(0,t.length-1):t}function zh(t=function JB(){return(0,Et.ZF)("router")}()){const r=(0,Et.P1)(t,I=>I&&I.state),e=(0,Et.P1)(r,I=>I&&I.root),n=(0,Et.P1)(e,I=>{if(!I)return;let B=I;for(;B.firstChild;)B=B.firstChild;return B}),a=(0,Et.P1)(e,I=>I&&I.fragment),s=(0,Et.P1)(e,I=>I&&I.queryParams),c=(0,Et.P1)(n,I=>I&&I.params),h=(0,Et.P1)(n,I=>I&&I.data),g=(0,Et.P1)(r,I=>I&&I.url);return{selectCurrentRoute:n,selectFragment:a,selectQueryParams:s,selectQueryParam:I=>(0,Et.P1)(s,B=>B&&B[I]),selectRouteParams:c,selectRouteParam:I=>(0,Et.P1)(c,B=>B&&B[I]),selectRouteData:h,selectUrl:g}}let Cw=(()=>{class t{constructor(e){[new Zs({id:"page",title:"Page",usedContexts:()=>(0,Re.of)(["_page"]),condition:({param:t,metadata:r})=>t.flags.findIndex(e=>e.enabled&&"page"===e.name)>-1&&r.has("page"),evalParam:({metadata:r})=>(0,Re.of)(`${r.get("page")}`)}),new Zs({id:"searchstring",title:"Searchstring",condition:({param:t,metadata:r})=>t.flags.findIndex(e=>e.enabled)>-1&&r.has("searchString"),evalParam:({metadata:r})=>(0,Re.of)(`${r.get("searchString")}`)}),new Zs({id:"route",title:"Route",usedContexts:()=>(0,Re.of)(["_route"]),evalParam:({param:t,metadata:r})=>{const e=r.get("_route");return(0,Re.of)(e.params[t.mapping.value])}}),new Zs({id:"querystring",title:"Querystring",usedContexts:()=>(0,Re.of)(["_page"]),evalParam:({param:t,metadata:r})=>{const e=r.get("_route");return(0,Re.of)(e.queryParams[t.mapping.value])}}),new Zs({id:"standardpagination",title:"Standard Pagination",usedContexts:()=>(0,Re.of)(["_page"]),condition:({param:t,metadata:r})=>t.flags.findIndex(e=>e.enabled&&"offset"===e.name)>-1&&r.has("limit")&&r.has("page"),evalParam:({metadata:r})=>(0,Re.of)(""+ +r.get("limit")*(+r.get("page")-1))})].forEach(n=>e.register(n))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Xl))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[Wl]]}),t})(),Kl=(()=>{class t{constructor(e,n,a){this.routerStore=e,this.paramPluginManager=n,this.paramEvaluatorService=a}getUrl(e,n,a){const{selectCurrentRoute:s}=zh(l=>l.router);return this.routerStore.pipe((0,Et.Ys)(s),(0,ye.U)(l=>[l,e,e?e.indexOf("?"):-1]),(0,ye.U)(([l,c,f])=>[l,f>-1?c.substring(0,f):c,f>-1?c.substring(f+1):""]),(0,Ke.w)(([l,c,f])=>{const h=Fo.parse(f),g=c?c.split("/"):[],I=new Map([...a,["_route",l]]),B=this.paramNames(e),V=n.reduce((he,Se,Oe)=>new Map([...he,[B[Oe],Se]]),new Map),ce=g.reduce((he,Se,Oe)=>0===Se.indexOf(":")?[...he,this.paramEvaluatorService.paramValue(V.get(Se),I)]:[...he,(0,Re.of)(g[Oe])],[]),Ie=[];for(const he in h)Array.isArray(h[he])?h[he].forEach(Se=>Ie.push(this.paramEvaluatorService.paramValue(V.get(Se),I).pipe((0,ye.U)(Oe=>[he,Oe,!0])))):"string"==typeof h[he]&&h[he].indexOf(":")>-1?Ie.push(this.paramEvaluatorService.paramValue(V.get(h[he]),I).pipe((0,ye.U)(Se=>[he,Se,!1]))):Ie.push((0,Re.of)([he,h[he],Array.isArray(h[he])]));return(0,cn.D)([(0,cn.D)(ce).pipe((0,ye.U)(he=>he.filter(Se=>null!=Se&&""!==Se&&"undefined"!==Se).map((Se,Oe)=>0===Oe&&0===Se.indexOf("http")?`${Se}/`:Se).join("/")),(0,Ei.d)(c)),(0,cn.D)(Ie).pipe((0,ee.b)(he=>console.log(he)),(0,ye.U)(he=>he.reduce((Se,[Oe,Be,et])=>{if(null==Be||""===Be||"undefined"===Be){const at={...Se};return delete at[Oe],at}return et?{...Se,[Oe]:[...void 0!==Se[Oe]?Se[Oe]:[],Be]}:{...Se,[Oe]:Be}},this.rebuildQueryString(h))),(0,ee.b)(he=>console.log(he)),(0,ye.U)(he=>Fo.stringify(he,{arrayFormat:"repeat",indices:!1})),(0,Ei.d)(f))]).pipe((0,ye.U)(he=>he.join("?")))}))}paramNames(e){const n=e?e.indexOf("?"):-1,s={...(n>-1?e.substring(0,n):e||"").split("/").reduce((c,f,h)=>0===f.indexOf(":")?{...c,[f.substr(1)]:f}:c,{}),...Fo.parse(e?e.substring(e.indexOf("?")+1):"")},l=[];for(const c in s)Array.isArray(s[c])?s[c].forEach(f=>l.push(f)):0===s[c].indexOf(":")&&l.push(s[c]);return l}rebuildQueryString(e){const n={};for(const a in e)Array.isArray(e[a])?n[a]=[]:null!=a[e]&&""!==a[e]&&"undefined"!==a[e]&&(n[a]=a[e]);return Fo.parse(n)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Et.yh),o.\u0275\u0275inject(Xl),o.\u0275\u0275inject(tl))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function rj(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",8),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.value.title)}}function oj(t,r){}function aj(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",8),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e)}}function sj(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Binding"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",10),o.\u0275\u0275template(5,aj,2,2,"mat-option",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"button",6),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().removeBinding(s)}),o.\u0275\u0275text(7,"Remove"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.index,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroupName",e),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",n.bindableOptions)}}class bs extends ln.Plugin{constructor(r){super(r),r&&(this.editor=r.editor,this.fetch=r.fetch,this.getBindings=r.getBindings?r.getBindings:()=>(0,Re.of)([]),this.editorOptions=r.editorOptions?r.editorOptions:()=>(0,Re.of)(new Ig))}}class Ua{constructor(r){r&&(this.url=r.url,this.method=r.method?r.method:void 0,void 0!==r.renderer&&(this.renderer=new b_(r.renderer)),void 0!==r.params&&(this.params=r.params.map(e=>new lr(e))),r.body&&(this.body=new Hc(r.body)))}}class b_{constructor(r){r&&(this.type=r.type,this.query=r.query,this.trackBy=r.trackBy,void 0!==r.data&&(this.data=new Hc(r.data)),void 0!==r.bindings&&(this.bindings=r.bindings.map(e=>new Gt.ContentBinding(e))))}}class qn{constructor(r){this.results=[],r&&(this.results=r.results)}}class C_{constructor(r){r&&(this.query=r.query,this.trackBy=r.trackBy,this.idMapping=r.idMapping,this.labelMapping=r.labelMapping,this.valueMapping=r.valueMapping,this.multiple=r.multiple,this.limit=r.limit)}}class qc{constructor(r){this.settings=[],this.params=[],r&&(this.plugin=r.plugin,r.renderer&&(this.renderer=new b_(r.renderer)),r.settings&&(this.settings=r.settings.map(e=>new Ct.AttributeValue(e))),r.params&&(this.params=r.params.map(e=>new lr(e))))}}class Ig{constructor(r){this.fullscreen=!1,r&&(this.fullscreen=r.fullscreen)}}const Uh=new C_({query:"",trackBy:"",idMapping:"",labelMapping:"",valueMapping:"",multiple:!1,limit:0}),w_=new Ua({url:"",renderer:{type:"",data:{content:"",contentType:""},query:"",trackBy:"",bindings:[]},params:[]});let ww=(()=>{class t{constructor(e){this.fb=e,this.datasourceOptions$=new m.X(Uh),this.formGroup=this.fb.group({query:this.fb.control(""),trackBy:this.fb.control(""),valueMapping:this.fb.control(""),labelMapping:this.fb.control(""),idMapping:this.fb.control(""),multiple:this.fb.control(""),limit:this.fb.control("")}),this.datasourceOptionsSub=this.datasourceOptions$.subscribe(n=>{this.formGroup.setValue(n),this.formGroup.updateValueAndValidity()}),this.onTouched=()=>{}}set datasourceOptions(e){this.datasourceOptions$.next(e)}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{datasourceOptions:{valid:!1}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-datasource-options"]],inputs:{datasourceOptions:"datasourceOptions"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:16,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","query","placeholder","Query"],["matInput","","formControlName","trackBy","placeholder","Track By"],["matInput","","formControlName","idMapping","placeholder","Id"],["matInput","","formControlName","valueMapping","placeholder","Value"],["matInput","","formControlName","labelMapping","placeholder","Label"],["formControlName","multiple"],["matInput","","formControlName","limit","placeholder","Limit"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275element(2,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275element(4,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-form-field"),o.\u0275\u0275element(6,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-form-field"),o.\u0275\u0275element(8,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-form-field"),o.\u0275\u0275element(10,"input",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"div"),o.\u0275\u0275elementStart(12,"mat-checkbox",6),o.\u0275\u0275text(13,"Multiple"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"mat-form-field"),o.\u0275\u0275element(15,"input",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("formGroup",n.formGroup)},directives:[Wt.KE,za.oG,d.JL,d.sg,In.Nt,d.Fj,d.JJ,d.u],encapsulation:2}),t})(),Sw=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","classifiedsUiDatasourceRendererHost",""]]}),t})(),Zo=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"datasource"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),S_=(()=>{class t{constructor(e,n,a){this.fb=e,this.componentFactoryResolver=n,this.dpm=a,this.datasources$=this.dpm.getPlugins(),this.formGroup=this.fb.group({plugin:this.fb.control("",[d.kI.required]),settings:this.fb.control(""),renderer:this.fb.group({type:this.fb.control("pane"),bindings:this.fb.array([])})}),this.bindableOptions=[],this.contexts=[],this.settings$=new m.X([]),this.componentRef$=new m.X(void 0),this.datasource$=new m.X(void 0),this.afterViewInit$=new M.x,this.contextForwardingSub=this.componentRef$.pipe((0,$.h)(s=>!!s)).subscribe(s=>{s.instance.contexts=this.contexts,s.instance.settings=this.settings$.value}),this.rendererSub=(0,Ln.a)([this.formGroup.get("plugin").valueChanges,this.afterViewInit$]).pipe((0,Ke.w)(([s,l])=>s&&""!==s?this.dpm.getPlugin(s):(0,Re.of)(void 0))).subscribe(s=>{s&&this.renderPlugin(s)}),this.settingsSub=(0,Ln.a)([this.componentRef$,this.settings$]).pipe((0,$.h)(([s,l])=>!!s)).subscribe(([s,l])=>{s.instance.settings=l}),this.datasourceSub=this.datasource$.pipe((0,ee.b)(s=>{setTimeout(()=>this.settings$.next(s?s.settings:[]))})).subscribe(s=>{this.formGroup.get("renderer").get("bindings").clear(),s?(this.formGroup.get("plugin").setValue(s.plugin),this.formGroup.get("renderer").get("type").setValue("pane"),s.renderer&&s.renderer.bindings&&s.renderer.bindings.forEach(l=>{this.addBinding(l)})):(this.formGroup.get("plugin").setValue(""),this.formGroup.get("renderer").get("type").setValue("pane"))}),this.onTouched=()=>{}}set datasource(e){this.datasource$.next(e)}get bindings(){return this.formGroup.get("renderer").get("bindings")}ngOnInit(){}ngAfterViewInit(){this.afterViewInit$.next(void 0)}renderPlugin(e){const n=this.componentFactoryResolver.resolveComponentFactory(e.editor),a=this.datasourceHost.viewContainerRef;a.clear(),this.componentRef$.next(a.createComponent(n))}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}addBinding(e){this.bindings.push(this.fb.group({type:this.fb.control("pane",d.kI.required),id:this.fb.control(e?e.id:"",d.kI.required)}))}removeBinding(e){this.bindings.removeAt(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(Zo))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-datasource-form"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(Sw,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.datasourceHost=a.first)}},inputs:{bindableOptions:"bindableOptions",contexts:"contexts",datasource:"datasource"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:16,vars:7,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiDatasourceRendererHost",""],["formGroupName","renderer"],["formArrayName","bindings"],["type","button",3,"click"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],["required","","formControlName","id"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Datasource"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",1),o.\u0275\u0275template(5,rj,2,2,"mat-option",2),o.\u0275\u0275pipe(6,"keyvalue"),o.\u0275\u0275pipe(7,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerStart(8),o.\u0275\u0275template(9,oj,0,0,"ng-template",3),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementStart(10,"div",4),o.\u0275\u0275elementStart(11,"div",5),o.\u0275\u0275elementStart(12,"button",6),o.\u0275\u0275listener("click",function(){return n.addBinding()}),o.\u0275\u0275text(13,"Add Binding"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"div"),o.\u0275\u0275template(15,sj,8,2,"div",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(6,3,o.\u0275\u0275pipeBind1(7,5,n.datasources$))),o.\u0275\u0275advance(10),o.\u0275\u0275property("ngForOf",n.bindings.controls))},directives:[Wt.KE,Hi.gD,ri.ey,d.JL,d.sg,Wt.hX,d.Q7,d.JJ,d.u,x.NgForOf,Sw,d.x0,d.CE],pipes:[x.KeyValuePipe,x.AsyncPipe],styles:[""]}),t})(),lj=(()=>{class t{constructor(e,n){this.fb=e,this.attributeSerializer=n,this.settings$=new m.X(void 0),this.formGroup=this.fb.group({data:this.fb.control("")}),this.settingsSub=this.settings$.pipe((0,ye.U)(a=>a?this.attributeSerializer.deserializeAsObject(a):void 0)).subscribe(a=>{a&&a.data?this.formGroup.get("data").setValue(a.data):this.formGroup.get("data").setValue("")}),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}ngOnInit(){}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-data-source-form"]],inputs:{settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","data","cols","60","rows","20"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"textarea",1),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("formGroup",n.formGroup)},directives:[d.JL,d.sg,d.Fj,d.JJ,d.u],styles:[""]}),t})(),cj=(()=>{class t{constructor(e){this.controlContainer=e,this.settings=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-data-datasource"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-data-source-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",n.settings))},directives:[lj,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})(),uj=(()=>{class t{constructor(e,n){this.fb=e,this.attributeSerializer=n,this.settings$=new m.X(void 0),this.formGroup=this.fb.group({data:this.fb.control("")}),this.settingsSub=this.settings$.pipe((0,ye.U)(a=>a?this.attributeSerializer.deserializeAsObject(a):void 0)).subscribe(a=>{}),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}ngOnInit(){}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-datasource-source-form"]],inputs:{settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:2,vars:0,template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"Datasource"),o.\u0275\u0275elementEnd())},styles:[""]}),t})(),dj=(()=>{class t{constructor(e){this.controlContainer=e,this.settings=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-datasource-source"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-datasource-source-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",n.settings))},directives:[uj,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})();const fj=t=>new bs({id:"data",title:"Data",editor:cj,fetch:({settings:r})=>(0,Re.of)(new qn).pipe((0,ye.U)(()=>t.deserializeAsObject(r)),(0,ye.U)(e=>new qn({results:JSON.parse(e.data)})))});let Yl=(()=>{class t{constructor(e,n){[fj(n),new bs({id:"datasource_datasource",title:"Datasource",editor:dj,fetch:({})=>(0,Re.of)(new qn)})].forEach(a=>e.register(a))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,sr.MaterialModule,Cw]]}),t})(),Vh=(()=>{class t{constructor(e,n){this.config=e,this.http=n,this.cache=new Map}getData(e){return this.cache.has(e)?(0,Re.of)(this.cache.get(e)).pipe((0,ui.g)(0)):this.http.get(`${e}`).pipe((0,Qi.K)(()=>(0,Re.of)([])),(0,ye.U)(n=>Array.isArray(n)?n:[n]),(0,ee.b)(n=>this.cache.set(e,n)))}postData({url:e,body:n=""}){return this.http.post(`${e}`,n).pipe((0,ye.U)(a=>Array.isArray(a)?a:[a]))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(jr),o.\u0275\u0275inject(L.HttpClient))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Ew{constructor(r){r&&(this.label=r.label,this.dataItem=r.dataItem,void 0!==r.value&&(this.value=r.value))}}class Tw{constructor(r){r&&(this.value=r.value,this.label=r.label,this.id=r.id,this.multiple=r.multiple,this.limit=r.limit)}}let Aw=(()=>{class t{constructor(e,n){this.dpm=e,this.attributeSerializer=n}evalDatasource({datasource:e,metadata:n,datasources:a}){return(0,Re.of)(e).pipe((0,Ke.w)(s=>this.dpm.getPlugin(s.plugin).pipe((0,ye.U)(l=>[s,l]))),(0,Ke.w)(([s,l])=>l.fetch({settings:s.settings,metadata:n,datasource:s,datasources:a}).pipe((0,ye.U)(c=>[s,c]))),(0,Ke.w)(([s,l])=>(0,cn.D)(s.renderer.bindings.reduce((c,f)=>[...c,...a&&a.has(f.id)?[(0,Re.of)(a.get(f.id))]:[]],[])).pipe((0,Ke.w)(c=>c.reduce((f,h)=>f.pipe((0,Ke.w)(g=>this.dpm.getPlugin(h.plugin).pipe((0,ye.U)(I=>[I,g,h]))),(0,Ke.w)(([g,I,B])=>g.fetch({settings:h.settings,dataset:I,metadata:n,datasource:B,datasources:a}))),(0,Re.of)(l))),(0,ye.U)(c=>c),(0,Ei.d)(l))))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Xc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Gh extends ln.Plugin{constructor(r){super(r),r&&(this.build=r.build)}}const pj=t=>()=>new Promise(r=>{t.build(),r()});let bd=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"bridgebuilder"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gj=(()=>{class t{constructor(e){this.bpm=e}build(){try{console.log("build bridge..."),this.bpm.getPlugins().subscribe(e=>{Array.from(e).forEach(([n,a])=>{a.build(),console.log("bridge build: "+n)})}),console.log("bridge built.")}catch{}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(bd))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),kw=(()=>{class t{constructor(e){console.log("bridge constructor"),e.register(new Gh({id:"test",title:"Test",build:()=>{Xc.prototype.sayHello2=()=>{alert("say hello 2")}}}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(bd))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[{provide:o.APP_INITIALIZER,useFactory:pj,deps:[gj],multi:!0}],imports:[[]]}),t})();var Iw=S(4503),E_=S(6067);function vj(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",3),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e)}}function yj(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",5),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value.name),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.value.title)}}function _j(t,r){}const T_=new o.InjectionToken("ContextPlugin");class nl extends ln.Plugin{constructor(r){super(r),this.global=!1,r&&(this.name=this.id,this.title=r.title,this.baseObject=r.baseObject,this.resolver=r.resolver,this.global=void 0!==r.global&&r.global,this.internal=void 0!==r.internal&&r.internal,this.group=void 0!==r.group?r.group:void 0,r.editorComponent&&(this.editorComponent=r.editorComponent))}}class Jr{constructor(r){this.name=r.name,this.adaptor=r.adaptor,r.plugin&&(this.plugin=r.plugin),"rest"===this.adaptor?this.rest=new Ua(r.rest):"snippet"===this.adaptor||"json"===this.adaptor?this.snippet=new Hc(r.snippet):"data"===this.adaptor?this.data=r.data:"token"===this.adaptor?this.tokens=new Map([...r.tokens]):"datasource"===this.adaptor&&(this.datasource=new qc(r.datasource))}}class A_{constructor(r){r&&(this.name=r.name)}}let xj=(()=>{class t{constructor(e,n){this.fb=e,this.attributeSerializer=n,this.contexts=[],this.settings$=new m.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[d.kI.required])}),this.settingsSub=this.settings$.pipe((0,ye.U)(a=>a?new A_(this.attributeSerializer.deserializeAsObject(a)):void 0)).subscribe(a=>{a?this.formGroup.get("name").setValue(a.name):this.formGroup.get("name").setValue("")}),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-context-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:6,vars:2,consts:[[3,"formGroup"],["required","","formControlName","name"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Context"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",1),o.\u0275\u0275template(5,vj,2,2,"mat-option",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",n.contexts))},directives:[Wt.KE,Hi.gD,ri.ey,d.JL,d.sg,Wt.hX,d.Q7,d.JJ,d.u,x.NgForOf],styles:[""]}),t})(),bj=(()=>{class t{constructor(e){this.controlContainer=e,this.contexts=[],this.settings=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-context-datasource"]],inputs:{contexts:"contexts",settings:"settings"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"contexts","settings"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-context-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("contexts",n.contexts)("settings",n.settings))},directives:[xj,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})(),Cj=(()=>{class t{constructor(e,n,a){this.fb=e,this.controlContainer=n,this.attributeSerializer=a}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("datasource",d.kI.required)),this.controlContainer.control.addControl("datasource",this.fb.control("")),this.controlContainer.control.addControl("_proxy",this.fb.control("")),this.proxyControlSub=this.controlContainer.control.get("_proxy").valueChanges.pipe((0,ye.U)(e=>e?new qc({...e,settings:this.attributeSerializer.serialize(e.settings,"settings").attributes}):new qc),(0,ee.b)(e=>this.controlContainer.control.get("datasource").setValue(e))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-datasource-context-editor"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(S_,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.datasourceFormComp=a.first)}},decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","_proxy"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&o.\u0275\u0275property("formGroup",n.controlContainer.control)},directives:[S_,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})();const wj=t=>new nl({id:"route",name:"route",title:"Route",global:!0,baseObject:{path:"",arg0:"",arg2:"",arg3:"",arg4:"",arg5:""},resolver:t});let k_=(()=>{class t{constructor(e){this.routerStore=e}resolve(e,n){const{selectCurrentRoute:a}=zh(s=>s.router);return this.routerStore.pipe((0,Et.Ys)(a),(0,ye.U)(s=>({path:`/pages/panelpage/${s.params.panelPageId}`})))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Et.yh))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Pw=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","classifiedsUiContextEditorHost",""]]}),t})(),Ql=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"context"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Fw=(()=>{class t{constructor(e,n,a){this.fb=e,this.componentFactoryResolver=n,this.cpm=a,this.contextForm=this.fb.group({name:this.fb.control("",d.kI.required),plugin:this.fb.control("",d.kI.required)}),this.context$=new m.X(void 0),this.onTouched=()=>{}}set context(e){this.context$.next(e)}ngOnInit(){this.contextPlugins=this.cpm.getPlugins().pipe((0,ye.U)(e=>new Map(Array.from(e).filter(([n,a],s)=>!a.internal).map(([n,a],s)=>[a.name,a])))),this.contextForm.get("plugin").valueChanges.pipe((0,Ke.w)(e=>this.cpm.getPlugin(e))).subscribe(e=>{e.editorComponent?this.renderEditor(e):this.editorHost.viewContainerRef.clear()}),this.context$.pipe((0,$.h)(()=>!!this.componentRef)).subscribe(e=>{this.componentRef.instance.context=e})}writeValue(e){e&&this.contextForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.contextForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.contextForm.disable():this.contextForm.enable()}validate(e){return this.contextForm.valid?null:{invalidForm:{valid:!1,message:"context is invalid"}}}renderEditor(e){const n=this.componentFactoryResolver.resolveComponentFactory(e.editorComponent),a=this.editorHost.viewContainerRef;a.clear(),this.componentRef=a.createComponent(n),this.componentRef.instance.context=this.context$.value}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(Ql))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-context-form"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(Pw,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.editorHost=a.first)}},inputs:{context:"context"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:12,vars:6,consts:[["fxLayout","column",3,"formGroup"],["matInput","","formControlName","name","placeholder","Name","required",""],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiContextEditorHost",""],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275element(2,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275elementStart(4,"mat-label"),o.\u0275\u0275text(5,"Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-select",2),o.\u0275\u0275template(7,yj,2,2,"mat-option",3),o.\u0275\u0275pipe(8,"keyvalue"),o.\u0275\u0275pipe(9,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerStart(10),o.\u0275\u0275template(11,_j,0,0,"ng-template",4),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.contextForm),o.\u0275\u0275advance(7),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(8,2,o.\u0275\u0275pipeBind1(9,4,n.contextPlugins))))},directives:[Wt.KE,Hi.gD,ri.ey,ue,d.JL,d.sg,In.Nt,d.Fj,d.JJ,d.u,d.Q7,Wt.hX,x.NgForOf,Pw],pipes:[x.KeyValuePipe,x.AsyncPipe],styles:[""]}),t})(),I_=(()=>{class t{constructor(e){this.dpm=e}resolve(e,n,a){return(0,Re.of)(new qn).pipe((0,ye.U)(()=>new qc(n)),(0,Ke.w)(s=>this.dpm.getPlugin(s.plugin).pipe((0,ye.U)(l=>({ds:s,p:l})))),(0,Ke.w)(({ds:s,p:l})=>l.fetch({settings:s.settings,metadata:a})),(0,ye.U)(s=>s))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Zo))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Rw=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n),this.add$=new E_.t(1)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"resolved_context"}))}register(e){const n=this.pluginInstances.has(e.id);super.register(e),n||this.add$.next(void 0)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Cd=(()=>{class t extends class kj{constructor(r,e){this.cpm=r,this.rcm=e}resolveGlobals(r=ai()){return this.cpm.getPlugins().pipe((0,ye.U)(e=>Array.from(e.values()).filter(n=>!0===n.global)),(0,Ke.w)(e=>(0,R.T)(...e.map(n=>n.resolver.resolve(n,{}).pipe((0,ye.U)(a=>[n.name,a,e.length])))).pipe((0,Iw.R)((n,[a,s,l])=>new Map([...n,[`_${a}`,s],["__len",l]]),new Map([])),(0,$.h)(n=>n.size-1==+n.get("__len")),(0,ye.U)(n=>Object.assign({},...[...n.entries()].filter(([a,s])=>"__len"!==a).map(([a,s])=>({[a]:s})))))))}resolveGlobalsSingle(r=ai()){return this.cpm.getPlugins().pipe((0,ye.U)(e=>Array.from(e.values()).filter(n=>!0===n.global)),(0,Ke.w)(e=>(0,R.T)(...e.map(n=>n.resolver.resolve(n,{}).pipe((0,ye.U)(a=>[n.name,a]))))))}resolveAll(r,e=ai()){return(0,R.T)(...r.map(n=>this.resolve(n,e).pipe((0,ye.U)(a=>[n.name,Array.isArray(a)?a.length>0?a[0]:void 0:a])))).pipe((0,Iw.R)((n,[a,s])=>new Map([...n,[a,s]]),new Map),(0,$.h)(n=>n.size===r.length),(0,ye.U)(n=>Object.assign({},...[...n.entries()].map(([a,s])=>({[a]:s})))))}resolveAllSingle(r,e=ai()){return(0,R.T)(...r.map(n=>this.resolve(n,e).pipe((0,ye.U)(a=>[n.name,Array.isArray(a)?a.length>0?a[0]:void 0:a])))).pipe((0,ye.U)(([n,a])=>[n,a]))}resolveMerged(r,e=ai()){return this.rcm.getPlugins().pipe((0,Ke.w)(()=>this.rcm.add$.pipe((0,Ei.d)(void 0))),(0,Ke.w)(()=>this.rcm.getPlugins()),(0,Ke.w)(n=>(0,Ln.a)([...Array.from(n).map(([a,s])=>s.resolve()),this.resolveGlobals(e),0===r.length?(0,Re.of)({}):this.resolveAll(r,e)]).pipe((0,Hn.b)(0),(0,ye.U)(a=>a.reduce((s,l)=>({...s,...l}),{})))))}resolveMergedSingle(r,e=ai()){return 0!==r.length?this.rcm.getPlugins().pipe((0,Ke.w)(n=>(0,R.T)(...Array.from(n).map(([a,s])=>s.resolveSingle()),this.resolveGlobalsSingle(),this.resolveAllSingle(r)))):this.rcm.getPlugins().pipe((0,Ke.w)(n=>(0,R.T)(...Array.from(n).map(([a,s])=>s.resolveSingle()),this.resolveGlobalsSingle())))}resolve(r,e=ai()){return r.plugin?this.cpm.getPlugin(r.plugin).pipe((0,Ke.w)(n=>n.resolver.resolve(n,this.getDataObject(r),new Map([["name",r.name]])))):(0,Re.of)(this.getDataObject(r))}getDataObject(r){switch(r.adaptor){case"rest":return r.rest;case"snippet":return r.snippet;case"json":return JSON.parse(r.snippet.content);case"data":return r.data;case"token":return r.tokens;case"datasource":return r.datasource;default:return}}}{constructor(e,n){super(e,n)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ql),o.\u0275\u0275inject(Rw))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),wd=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g){e.forEach(I=>s.register(I)),l.register(((t,r)=>new Gh({id:"context",title:"Context",build:()=>{Xc.prototype.resolveContext=(e,n)=>new Promise(a=>{t.getPlugin(e).pipe((0,Ke.w)(s=>s.resolver.resolve(s,n).pipe((0,hn.q)(1)))).subscribe(s=>{a(s)})}),Xc.prototype.resolveMergedContext=e=>new Promise(n=>{r.resolveMerged(e).pipe((0,ee.b)(a=>n(a)),(0,hn.q)(1)).subscribe()})}}))(s,n)),f.register(((t,r)=>new Zs({id:"context",title:"Context",evalParam:({param:e,metadata:n})=>{const a=e.mapping.context&&""!==e.mapping.context?new Jr(n.get("contexts").find(s=>s.name===e.mapping.context)):void 0;return a?t.resolve(a).pipe((0,hn.q)(1),(0,Ke.w)(s=>Gn(()=>e.mapping.value&&""!==e.mapping.value,(0,Re.of)(s).pipe((0,ye.U)(l=>r.generateGenericTokens(Array.isArray(l)?l[0]:l)),(0,ye.U)(l=>r.replaceTokens(`[${e.mapping.value}]`,l)),(0,hn.q)(1)),(0,Re.of)(Array.isArray(s)?s[0]:s)).pipe((0,hn.q)(1)))):(0,Re.of)()},usedContexts:({param:e})=>(0,Re.of)([e.mapping.context])}))(n,a)),c.register(((t,r)=>new bs({id:"context",title:"Context",editor:bj,fetch:({settings:e,metadata:n})=>(0,Re.of)(new qn).pipe((0,ye.U)(()=>new A_(r.deserializeAsObject(e))),(0,ye.U)(a=>n.get("contexts").find(s=>s.name===a.name)),(0,Ke.w)(a=>t.resolve(a).pipe((0,ye.U)(s=>s instanceof qn?s:new qn({results:Array.isArray(s)?s:[s]})),(0,hn.q)(1)))),getBindings:({settings:e})=>(0,Re.of)([]).pipe((0,ye.U)(()=>new A_(r.deserializeAsObject(e))),(0,ye.U)(a=>[new Gt.ContentBinding({id:a.name,type:"context"})]))}))(n,h)),s.register((t=>{const r={dataset:new qn};return new nl({id:"datasource",name:"datasource",title:"Datasource",baseObject:r,resolver:t,editorComponent:Cj})})(g))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(T_),o.\u0275\u0275inject(Cd),o.\u0275\u0275inject(Xn),o.\u0275\u0275inject(Ql),o.\u0275\u0275inject(bd),o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(Xl),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(I_))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[{provide:k_,useClass:k_},{provide:I_,useClass:I_},{provide:T_,useFactory:wj,multi:!0,deps:[k_]}],imports:[[x.CommonModule,d.UX,d.u5,sr.MaterialModule,wl,Fh,g_,Yl]]}),t})(),Ij=(()=>{class t{constructor(e){this.contextPlugins=e}getAll(e){return void 0===e?this.contextPlugins:this.contextPlugins.filter(e?n=>n.global:n=>!n.global)}getAllObjects(){return this.contextPlugins.map(e=>e.baseObject)}lookupContext(e){return this.contextPlugins.find(n=>n.name===e)}register(e){this.contextPlugins.push(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(T_))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Pj extends ln.Plugin{constructor(r){super(r),this.resolve=r.resolve,this.resolveSingle=r.resolveSingle}}let P_=(()=>{class t{constructor(e){this.ppm=e}extractContexts(e){return(0,cn.D)(e.map(n=>this.ppm.getPlugin(n.mapping.type).pipe((0,Ke.w)(a=>Gn(()=>!!a&&!!a.usedContexts,a&&a.usedContexts?a.usedContexts({param:n,metadata:new Map([])}):(0,Re.of)([]),(0,Re.of)([])))))).pipe((0,ye.U)(n=>n.reduce((a,s)=>[...a,...s.filter(l=>!a.includes(l))],[])))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Xl))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Fj=(()=>{class t{constructor(e,n,a){this.routerStore=e,this.router=n}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Et.yh),o.\u0275\u0275directiveInject(zn.Router),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-alias-catch-all-router"]],decls:2,vars:0,template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"Page Not Found"),o.\u0275\u0275elementEnd())},styles:[""]}),t})();const Rj=[];let Dj=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[],imports:[[mn.UtilsModule,zn.RouterModule.forChild(Rj)]]}),t})();class Oj extends ln.Plugin{constructor(r){super(r),r&&(this.loadingStrategy=r.loadingStrategy,this.matchingStrategy=r.matchingStrategy,this.redirectHandler=r.redirectHandler)}}let Dw=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"alias"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ow=(()=>{class t{constructor(e,n,a,s){this.siteName=e,this.router=n,this.apm=a,this.routesLoaded=!1}canActivate(e,n){return console.log("catch all alias hit"),new Promise(a=>{this.apm.getPlugins().pipe((0,Ke.w)(s=>(0,cn.D)(this.routesLoaded?[]:Array.from(s).map(([l,c])=>c.loadingStrategy.load())).pipe((0,Ei.d)(void 0))),(0,ee.b)(()=>this.routesLoaded=!0),(0,Ke.w)(()=>this.apm.getPlugins()),(0,Ke.w)(s=>(0,cn.D)(Array.from(s).map(([l,c])=>c.matchingStrategy.match(n).pipe((0,ye.U)(f=>[c,f])))))).subscribe(s=>{if(console.log("routes loaded: "+(this.routesLoaded?"y":"n")),void 0!==s.map(([c,f],h)=>f?c:void 0).find(c=>void 0!==c)){console.log(`alias gaurd state: ${n.url}`);const c=this.router.parseUrl(n.url);a(c)}else a(!0)})})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(mn.SITE_NAME),o.\u0275\u0275inject(zn.Router),o.\u0275\u0275inject(Dw),o.\u0275\u0275inject(li))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();var Mw=S(7714);function Mj(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",4),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.value.title)}}function Lj(t,r){}class Lw extends ln.Plugin{constructor(r){super(r),r&&(this.editor=r.editor,this.send=r.send)}}class Nj{constructor(r){this.settings=[],r&&(this.data=r.data,r.settings&&Array.isArray(r.settings)&&(this.settings=r.settings.map(e=>new Ct.AttributeValue(e))))}}class F_{constructor(r){}}class Sd{constructor(r){r&&(this.dataduct=new Bj(r.dataduct))}}class Bj{constructor(r){this.settings=[],r&&(this.plugin=r.plugin,r.settings&&Array.isArray(r.settings)&&(this.settings=r.settings.map(e=>new Ct.AttributeValue(e))))}}let Nw=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","classifiedsUiDataductRendererHost",""]]}),t})(),Pg=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"dataduct"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),jj=(()=>{class t{constructor(e,n){this.dpm=e,this.fb=n,this.contexts=[],this.ductForm=this.fb.group({plugin:this.fb.control("",[d.kI.required]),settings:this.fb.control("")}),this.ducts$=this.dpm.getPlugins(),this.componentRef$=new m.X(void 0),this.persistence$=new m.X(void 0),this.afterViewInit$=new M.x,this.contextForwardingSub=this.componentRef$.pipe((0,$.h)(a=>!!a)).subscribe(a=>{a.instance.contexts=this.contexts,a.instance.settings=this.persistence$.value&&this.persistence$.value.dataduct?this.persistence$.value.dataduct.settings:[]}),this.persistenceSub=(0,Ln.a)([this.persistence$,this.afterViewInit$]).pipe((0,ye.U)(([a])=>a),(0,ee.b)(a=>{this.ductForm.get("plugin").setValue(a&&a.dataduct?a.dataduct.plugin:"")}),(0,ui.g)(1),(0,ee.b)(a=>{this.componentRef$.value&&this.componentRef$.value.instance&&a&&(this.componentRef$.value.instance.settings=a.dataduct?a.dataduct.settings:[])})).subscribe(),this.rendererSub=(0,Ln.a)([this.ductForm.get("plugin").valueChanges,this.afterViewInit$]).pipe((0,Ke.w)(([a,s])=>a&&""!==a?this.dpm.getPlugin(a):(0,Re.of)(void 0))).subscribe(a=>{a&&this.renderPlugin(a)}),this.onTouched=()=>{}}set persistence(e){this.persistence$.next(e)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}writeValue(e){e&&this.ductForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.ductForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.ductForm.disable():this.ductForm.enable()}validate(e){return this.ductForm.valid?null:this.ductForm.errors}renderPlugin(e){const n=this.datasourceHost.viewContainerRef;n.clear(),this.componentRef$.next(n.createComponent(e.editor))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Pg),o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-persistence-form"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(Nw,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.datasourceHost=a.first)}},inputs:{contexts:"contexts",persistence:"persistence"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:10,vars:6,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiDataductRendererHost",""],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Plugin"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",1),o.\u0275\u0275template(5,Mj,2,2,"mat-option",2),o.\u0275\u0275pipe(6,"keyvalue"),o.\u0275\u0275pipe(7,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerStart(8),o.\u0275\u0275template(9,Lj,0,0,"ng-template",3),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.ductForm),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(6,2,o.\u0275\u0275pipeBind1(7,4,n.ducts$))))},directives:[Wt.KE,Hi.gD,ri.ey,d.JL,d.sg,Wt.hX,d.Q7,d.JJ,d.u,x.NgForOf,Nw],pipes:[x.KeyValuePipe,x.AsyncPipe],styles:[""]}),t})(),zj=(()=>{class t{constructor(e,n,a,s){this.data=e,this.dialogRef=n,this.fb=a,this.attributeSerializer=s,this.persistenceForm=this.fb.group({dataduct:this.fb.control("")}),this.contexts=[],this.persistence=new Sd,this.contexts=e.contexts,this.persistence=e.persistence}submit(){const e=this.persistenceForm.value;console.log("persistence form",e);const n=this.attributeSerializer.serialize(e.dataduct.settings,"settings");console.log("persistence settings",n),this.dialogRef.close(new Sd({...this.persistenceForm.value,dataduct:{...e.dataduct,settings:n.attributes}}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-persistence-dialog"]],decls:8,vars:4,consts:[[1,"persistence-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["formControlName","dataduct",3,"contexts","persistence"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275element(4,"classifieds-ui-persistence-form",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-dialog-actions"),o.\u0275\u0275elementStart(6,"button",4),o.\u0275\u0275text(7,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.persistenceForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("contexts",n.contexts)("persistence",n.persistence),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!n.persistenceForm.valid))},directives:[jj,zi.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),t})(),Uj=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.u5,d.UX,sr.MaterialModule]]}),t})(),Vj=(()=>{class t{constructor(e){this.dpm=e}persist({data:e,persistence:n}){return this.dpm.getPlugin(n.dataduct.plugin).pipe((0,Ke.w)(a=>a.send(new Nj({data:e,settings:n.dataduct.settings}))),(0,ye.U)(()=>{}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Pg))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Gj(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275element(1,"druid-detour-interaction-listener",4),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().deleteListener$.next(s)}),o.\u0275\u0275text(3,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.index,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("formControlName",e)("listener",n.interactions$.value.interactions.listeners[e])}}class Wc{constructor(r){this.interactions=r&&r.interactions?new Bw(r.interactions):new Bw}}class Bw{constructor(r){this.listeners=[],r&&r.listeners&&Array.isArray(r.listeners)&&(this.listeners=r.listeners.map(e=>new jw(e)))}}class jw{constructor(r){this.handler=r&&r.handler?new el(r.handler):new el,this.event=r&&r.event?new el(r.event):new el}}let zw=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"interaction_event"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Uw=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"interaction_handler"}))}discovery(){super.discovery()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$j=(()=>{class t{constructor(e,n,a){this.fb=e,this.iepm=n,this.ihpm=a,this.eventPlugins$=this.iepm.getPlugins(),this.handlerPlugins$=this.ihpm.getPlugins(),this.listenerForm=this.fb.group({event:this.fb.control(""),handler:this.fb.control("")}),this.contexts=[],this.listener$=new m.X(new jw),this.event$=new m.X(new el),this.handler$=new m.X(new el),this.listenerSub=this.listener$.pipe((0,ee.b)(s=>{this.event$.next(s&&s.event?s.event:new el),this.handler$.next(s&&s.handler?s.handler:new el)})).subscribe(),this.onTouched=()=>{}}set listener(e){this.listener$.next(e)}writeValue(e){e&&this.listenerForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.listenerForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.listenerForm.disable():this.listenerForm.enable()}validate(e){return this.listenerForm.valid?null:this.listenerForm.errors}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(zw),o.\u0275\u0275directiveInject(Uw))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-detour-interaction-listener"]],inputs:{contexts:"contexts",listener:"listener"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:5,vars:9,consts:[[3,"formGroup"],["formControlName","event","title","Event",3,"plugins","instance"],["formControlName","handler","title","Handler",3,"plugins","instance"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"druid-params-plugin-instance",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275element(3,"druid-params-plugin-instance",2),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.listenerForm),o.\u0275\u0275advance(1),o.\u0275\u0275property("plugins",o.\u0275\u0275pipeBind1(2,5,n.eventPlugins$))("instance",n.event$.value),o.\u0275\u0275advance(2),o.\u0275\u0275property("plugins",o.\u0275\u0275pipeBind1(4,7,n.handlerPlugins$))("instance",n.handler$.value))},directives:[XB,d.JL,d.sg,d.JJ,d.u],pipes:[x.AsyncPipe],styles:[""]}),t})(),Hj=(()=>{class t{constructor(e){this.fb=e,this.interactions$=new m.X(new Wc({interactions:{listeners:[]}})),this.contexts$=new m.X([]),this.afterViewInit$=new M.x,this.interactionsForm=this.fb.group({listeners:this.fb.array([])}),this.addListener$=new M.x,this.deleteListener$=new M.x,this.addListenerSub=this.addListener$.pipe((0,ee.b)(()=>this.listeners.push(this.fb.control("")))).subscribe(),this.deleteListenerSub=this.deleteListener$.pipe((0,ee.b)(n=>{this.interactions$.value.interactions.listeners.splice(n,1),this.listeners.removeAt(n)})).subscribe(),this.interactionsSub=(0,Ln.a)([this.interactions$,this.afterViewInit$]).pipe((0,ye.U)(([n])=>n),(0,$.h)(n=>0!==n.interactions.listeners.length),(0,ee.b)(n=>{this.listeners.clear(),n.interactions.listeners.forEach((a,s)=>{this.listeners.push(this.fb.control(""))})})).subscribe(),this.onTouched=()=>{}}set interactions(e){this.interactions$.next(e)}set contexts(e){this.contexts$.next(e)}get listeners(){return this.interactionsForm.get("listeners")}ngAfterViewInit(){this.afterViewInit$.next(void 0),this.afterViewInit$.complete()}writeValue(e){e&&this.interactionsForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.interactionsForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.interactionsForm.disable():this.interactionsForm.enable()}validate(e){return this.interactionsForm.valid?null:this.interactionsForm.errors}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-detour-interactions-form"]],inputs:{interactions:"interactions",contexts:"contexts"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","listeners"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","listener"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275template(2,Gj,4,2,"div",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("click",function(){return n.addListener$.next(void 0)}),o.\u0275\u0275text(4,"Add Listener"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.interactionsForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",n.listeners.controls))},directives:[$j,d.JL,d.sg,d.CE,x.NgForOf,d.JJ,d.u],styles:[""]}),t})(),qj=(()=>{class t{constructor(e,n,a){this.data=e,this.dialogRef=n,this.fb=a,this.interactionsForm=this.fb.group({interactions:this.fb.control("")}),this.contexts=[],this.interactions=new Wc,this.contexts=e.contexts,this.interactions=e.interactions}submit(){const e=new Wc(this.interactionsForm.value);console.log("interactions payload",e),this.dialogRef.close(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-detour-interactions-dialog"]],decls:8,vars:4,consts:[[1,"interactions-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["formControlName","interactions",3,"contexts","interactions"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275element(4,"druid-detour-interactions-form",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-dialog-actions"),o.\u0275\u0275elementStart(6,"button",4),o.\u0275\u0275text(7,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.interactionsForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("contexts",n.contexts)("interactions",n.interactions),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!n.interactionsForm.valid))},directives:[Hj,zi.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),t})();class Xj extends ln.Plugin{constructor(r){super(r)}}let Kj=(()=>{class t{constructor(e){e.register(new Xj({title:"DOM",id:"dom"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(zw))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.u5,d.UX,sr.MaterialModule,Wl]]}),t})();class Vw extends ln.Plugin{constructor(r){super(r)}}var Jl=S(4865),Cs=S(5892),ws=S(6517),Ed=S(78),R_=S(8055);class Kc extends ln.Plugin{constructor(r){super(r),r&&(this.create=r.create,this.read=r.read,this.update=r.update,this.delete=r.delete,r.query&&(this.query=r.query))}}class Gw{constructor(r){this.options=[],this.params=[],r&&(this.adaptorName=r.adaptorName,this.optionsString=r.optionsString?r.optionsString:void 0,this.paramsString=r.paramsString?r.paramsString:void 0,r.options&&Array.isArray(r.options)&&(this.options=r.options.map(e=>new lr(e))),r.params&&Array.isArray(r.params)&&(this.params=r.params.map(e=>new lr(e))))}}let Yj=(()=>{class t{constructor(e,n){this.fb=e,this.attributeSerializer=n,this.contexts=[],this.settings$=new m.X(void 0),this.datasource$=new m.X(void 0),this.optionValues$=new m.X([]),this.paramValues$=new m.X([]),this.formGroup=this.fb.group({adaptorName:this.fb.control(""),optionsString:this.fb.control(""),paramsString:this.fb.control(""),options:this.fb.control([]),params:this.fb.control([])}),this.settingsSub=this.settings$.pipe((0,ye.U)(a=>a?new Gw(this.attributeSerializer.deserializeAsObject(a)):void 0),(0,ee.b)(a=>setTimeout(()=>this.datasource$.next(a)))).subscribe(a=>{a?(this.formGroup.get("adaptorName").setValue(a.adaptorName),this.formGroup.get("optionsString").setValue(a.optionsString?a.optionsString:""),this.formGroup.get("paramsString").setValue(a.paramsString?a.paramsString:"")):(this.formGroup.get("adaptorName").setValue(""),this.formGroup.get("optionsString").setValue(""),this.formGroup.get("paramsString").setValue(""),setTimeout(()=>this.optionValues$.next([]),2),setTimeout(()=>this.optionValues$.next([]),2))}),this.datasourceOptionsSub=(0,Ln.a)([this.datasource$,this.formGroup.get("optionsString").valueChanges]).pipe((0,$.h)(([a])=>void 0!==a),(0,ui.g)(1),(0,ee.b)(([a])=>this.optionValues$.next(a.options))).subscribe(),this.datasourceParamsSub=(0,Ln.a)([this.datasource$,this.formGroup.get("paramsString").valueChanges]).pipe((0,$.h)(([a])=>void 0!==a),(0,ui.g)(1),(0,ee.b)(([a])=>this.paramValues$.next(a.params))).subscribe(),this.optionsStringChangeSub=this.formGroup.get("optionsString").valueChanges.pipe((0,Hn.b)(500)).subscribe(a=>{const s=Fo.parse("?"+a);this.optionsParsed=s}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,Hn.b)(500)).subscribe(a=>{const s=Fo.parse("?"+a);this.paramsParsed=s}),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}ngOnInit(){}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:this.formGroup.errors}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-crud-adaptor-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:14,vars:7,consts:[[3,"formGroup"],["matInput","","placeholder","Adaptor","formControlName","adaptorName","required",""],[1,"options-container"],["matInput","","placeholder","Options","formControlName","optionsString"],["formControlName","options",3,"params","paramValues","contexts"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275element(3,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",2),o.\u0275\u0275elementStart(5,"div"),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(8,"classifieds-ui-params-form",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",5),o.\u0275\u0275elementStart(10,"div"),o.\u0275\u0275elementStart(11,"mat-form-field"),o.\u0275\u0275element(12,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(13,"classifieds-ui-params-form",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(8),o.\u0275\u0275property("params",n.optionsParsed)("paramValues",n.optionValues$.value)("contexts",n.contexts),o.\u0275\u0275advance(5),o.\u0275\u0275property("params",n.paramsParsed)("paramValues",n.paramValues$.value)("contexts",n.contexts))},directives:[Wt.KE,Bh,d.JL,d.sg,In.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),t})(),$w=(()=>{class t{constructor(e){this.controlContainer=e,this.settings=[],this.contexts=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-crud-adaptor-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-crud-adaptor-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",n.settings)("contexts",n.contexts))},directives:[Yj,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})(),il=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"crud_adaptor"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Td=(()=>{class t{constructor(e){this.crud=e,this.cachedCollectionQueries=[],this.cachedCollectionIgnore={p:{create:void 0,update:void 0,delete:void 0,query:void 0,read:void 0},input:{identity:void 0}}}evaluatePlugins({object:e,plugins:n,op:a,parentObject:s}){const c=Object.keys(n).filter(f=>!n[f].ops||n[f].ops.includes(a)).map(f=>this.crud.getPlugin(n[f].plugin?n[f].plugin:f).pipe((0,ye.U)(h=>({p:h,params:n[f].params?Object.keys(n[f].params).reduce((g,I)=>({...g,[I]:n[f].params[I]instanceof lr?n[f].params[I]:new lr({flags:[],mapping:{type:"static",value:n[f].params[I],context:void 0,testValue:n[f].params[I]}})}),{}):{}})),(0,Ke.w)(({p:h,params:g})=>h[a]({rule:void 0,object:e,parentObject:s,params:g,identity:({object:I,parentObject:B})=>(0,Re.of)({identity:I.id?I.id:B?B.id:void 0})})),(0,Ke.w)(h=>Gn(()=>n[f].plugins&&0!==Object.keys(n[f].plugins).length,n[f].plugins&&0!==Object.keys(n[f].plugins).length?this.evaluatePlugins({plugins:n[f].plugins,object:h.entity?h.entity:e,parentObject:h.originalEntity?h.originalEntity:e,op:a}):(0,Re.of)(h),(0,Re.of)(h)))));return(0,cn.D)(c).pipe((0,ye.U)(()=>e))}evaluateCollectionPlugins({query:e,objects:n,plugins:a,op:s,parentObjects:l}){console.log("evaluate collection plugins");const c=Object.keys(a),f=c.filter(g=>!a[g].ops||a[g].ops.includes(s)).map(g=>this.crud.getPlugin(a[g].plugin?a[g].plugin:g).pipe((0,ye.U)(I=>({p:I,params:a[g].params?Object.keys(a[g].params).reduce((B,V)=>({...B,[V]:a[g].params[V]instanceof lr?a[g].params[V]:new lr({flags:[],mapping:{type:"static",value:a[g].params[V],context:void 0,testValue:a[g].params[V]}})}),{}):{}})),(0,Ke.w)(({p:I,params:B})=>this.buildQueryRule({params:e,config:a[g]}).pipe((0,ye.U)(({rule:V})=>({p:I,params:B,rule:V})))),(0,Ke.w)(({p:I,params:B,rule:V})=>this.flightAndCacheAwareCollectionQuery({p:I,input:{rule:V,objects:n,parentObjects:l,params:B,identity:({object:ce,parentObject:Ie})=>(0,Re.of)({identity:ce.id?ce.id:Ie?Ie.id:void 0})}}).pipe((0,ee.b)(()=>console.log("end of crud query call")))),(0,Ke.w)(I=>Gn(()=>a[g].plugins&&0!==Object.keys(a[g].plugins).length,this.evaluateCollectionPlugins({query:e,plugins:a[g].plugins&&0!==Object.keys(a[g].plugins).length?a[g].plugins:{},objects:I.entities?I.entities:n,parentObjects:I.originalEntities?I.originalEntities:n,op:s}),(0,Re.of)(I))),(0,ee.b)(I=>console.log("end of op",I))));return c.filter(g=>!a[g].ops||a[g].ops.includes(s)).find(g=>a[g].fallback)&&f.length>1?f.reduce((g,I)=>g.pipe((0,Ke.w)(B=>B&&Array.isArray(B)&&B.length>0?(0,Re.of)(B):I.pipe((0,ye.U)(V=>V&&V.entities&&Array.isArray(V.entities)?V.entities:[]))),(0,Ke.w)(B=>(0,Re.of)(B.length>0?B:[]))),(0,Re.of)([])):1===f.length?f[0].pipe((0,ye.U)(g=>[...g.entities])):(0,cn.D)(f).pipe((0,ye.U)(g=>g.reduce((I,B)=>[...I,...B.entities],[])),(0,Ei.d)([]))}buildQueryRule({params:e,config:n}){return new y.y(a=>{const s=[];"string"==typeof e&&e.split("&").map(f=>f.split("=",2)).reduce((f,[h,g])=>new Map([...Array.from(f).filter(([I,B])=>I!==h),[h,[...f.has(h)?f.get(h):[],g]]]),new Map).forEach((f,h)=>s.push({any:f.map(g=>({fact:"identity"===h?"identity":"entity",operator:n.queryMappings&&n.queryMappings.has(h)&&n.queryMappings.get(h).defaultOperator?n.queryMappings.get(h).defaultOperator:"equal",value:g,..."identity"===h?{}:{path:`$.${h}`}}))}));const l=s.length>0?new Ed.Rule({conditions:{all:s},event:{type:"visible"}}):void 0;a.next({rule:l}),a.complete()})}flightAndCacheAwareCollectionQuery(e){let n=this.cachedCollectionQueries.findIndex(({p:a,input:s})=>{const l=(0,R_.getDiff)({...e.p,...this.cachedCollectionIgnore.p},{...a,...this.cachedCollectionIgnore.p}),c=(0,R_.getDiff)({...e.input,...this.cachedCollectionIgnore.input},{...s,...this.cachedCollectionIgnore.input});return 0===l.length&&0===c.length});return-1===n&&(this.cachedCollectionQueries.push({p:e.p,input:e.input,query$:new E_.t}),n=this.cachedCollectionQueries.length-1,e.p.query(e.input).pipe((0,ee.b)(a=>this.cachedCollectionQueries[n].query$.next(a)),(0,hn.q)(1)).subscribe()),this.cachedCollectionQueries[n].query$.pipe((0,hn.q)(1))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(il))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$h=(()=>{class t{constructor(e,n,a,s,l,c,f,h){e.register(((t,r,e,n,a,s)=>new bs({id:"crud_adaptor",title:"Crud Adaptor",editor:$w,fetch:({settings:l,metadata:c})=>(0,Re.of)(new qn).pipe((0,ye.U)(()=>r.deserializeAsObject(l)),(0,ye.U)(f=>new Gw(f)),(0,Ke.w)(f=>e.getPlugin(f.adaptorName).pipe((0,ye.U)(h=>({plugin:h,ds:f})))),(0,ye.U)(({plugin:f,ds:h})=>({plugin:f,ds:h,optionNames:h.optionsString?h.optionsString.split("&").filter(g=>-1!==g.indexOf("=:")).map(g=>g.split("=",2)[1].substr(1)):[]})),(0,Ke.w)(({plugin:f,ds:h,optionNames:g})=>(0,cn.D)([n.paramValues(h.options.reduce((I,B,V)=>new Map([...I,[g[V],B]]),new Map)).pipe((0,ye.U)(I=>Array.from(I).reduce((B,[V,ce])=>({...B,[V]:ce}),{}))),h.paramsString&&""!==h.paramsString?s.getUrl("?"+h.paramsString,h.params,c).pipe((0,hn.q)(1)):(0,Re.of)(void 0)]).pipe((0,ye.U)(([I,B])=>({plugin:f,options:I,query:B})))),(0,Ke.w)(({plugin:f,options:h,query:g})=>a.evaluateCollectionPlugins({plugins:{[f.id]:{params:h}},op:"query",query:g&&g.substr(1)})),(0,ye.U)(f=>new qn({results:f}))),editorOptions:()=>(0,Re.of)(new Ig({fullscreen:!0})),getBindings:({})=>(0,Re.of)([])}))(0,l,n,c,f,h)),a.register((({crudDataHelper:t,attributeSerializer:r})=>new Lw({id:"crud",title:"Crud",editor:$w,send:e=>(0,Re.of)(new F_({})).pipe((0,ye.U)(()=>({settings:r.deserializeAsObject(e.settings)})),(0,ee.b)(({settings:n})=>console.log("crud data duct",n)),(0,ye.U)(({settings:n})=>({plugins:{[`${n.adaptorName}`]:{plugin:`${n.adaptorName}`,ops:["create"],params:`${n.optionsString}`.split("&").reduce((a,s,l)=>({...a,[s.split("=",1)[0]]:new lr(n.options[l])}),{})}}})),(0,Ke.w)(({plugins:n})=>t.evaluatePlugins({object:e.data,plugins:n,op:"create",parentObject:{id:ai()}})),(0,ye.U)(()=>new F_({})))}))({crudDataHelper:f,attributeSerializer:l}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(il),o.\u0275\u0275inject(Pg),o.\u0275\u0275inject(P_),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(tl),o.\u0275\u0275inject(Td),o.\u0275\u0275inject(Kl))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,d.u5,sr.MaterialModule,wd,Wl]]}),t})();class Fg{constructor(r,e,n,a){this.crud=e,this.entityDefinitionService=n,this.crudDataHelperService=a,this._name=`${r} CrudDataService`,this.entityName=r}get name(){return this._name}add(r){const e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:r,plugins:e.crud,op:"create"})}update(r){const e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:r.changes,plugins:e.crud,op:"update"})}upsert(r){const e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:r,plugins:e.crud,op:"update"})}delete(r){const e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.getById(r).pipe((0,Ke.w)(n=>this.crudDataHelperService.evaluatePlugins({object:n,plugins:e.crud,op:"delete"})),(0,ye.U)(()=>r))}getAll(){const r=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({plugins:r.crud,op:"query"})}getById(r){const e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:`identity=${r}`,plugins:e.crud,op:"query"}).pipe((0,ye.U)(n=>n&&0!==n.length?n[0]:void 0))}getWithQuery(r){const e=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:r,plugins:e.crud,op:"query"})}}let Hw=(()=>{class t{constructor(){this.operatorsMap=new Map([["=","equal"],["!=","notEqual"]])}buildFields(e,n=""){const a=new Map;return this.genericFields(e,a,n,0),a}attributeFields(e,n,a,s){e.forEach((l,c)=>{if("widget"!==l.name)for(const f in l)l.type===Ct.AttributeTypes.Complex||"attributes"===f&&l.attributes&&l.attributes.length>0?this.attributeFields(l.attributes,n,l.type===Ct.AttributeTypes.Complex?`${a}`:`${a}.${l.name}`,s+1):"attributes"!==f&&(f===l.name?n.set(`${a}.${f}`,{name:`${a}.${f}`,type:this.resolveAttributeType(l.type),defaultValue:l[f]}):n.set(`${a}.${l.name}.${f}`,{name:`${a}.${l.name}.${f}`,type:this.resolveAttributeType(l.type),defaultValue:l[f]}))})}genericFields(e,n,a,s){for(const c in e){const f=typeof e[c];if("object"!==f)n.set(`${a}.${c}`,{name:`${a}.${c}`,type:this.resolveNativeType(f),defaultValue:e[c]});else if(Array.isArray(e[c])&&"attributes"===c)this.attributeFields(e[c],n,`${a}.${c}`,s+1);else if(Array.isArray(e[c])){var l=e[c].length;for(let h=0;h<l;h++)this.genericFields(e[c][h],n,`${a}.${c}.${h}`,s+1)}else this.genericFields(e[c],n,`${a}.${c}`,s+1)}}toEngineRule(e,n=0){const a=[];if(void 0!==e.rules&&Array.isArray(e.rules)){const s=e.rules.length;for(let l=0;l<s;l++)if(!("field"in e.rules[l])||null!=e.condition&&""!==e.condition){const c=this.toEngineRule(e.rules[l],n+1);a.push(c.conditions)}else{const c=e.rules[l].field.indexOf("."),f=e.rules[l].field.substr(0,c),h=e.rules[l].field.substr(c+1);a.push({fact:f,path:`$.${h}`,operator:this.operatorsMap.get(e.rules[l].operator),value:e.rules[l].value})}return new Ed.Rule("and"===e.condition?{conditions:{all:a},event:0===n?{type:"visible"}:void 0}:{conditions:{any:a},event:0===n?{type:"visible"}:void 0})}{const s=e.field.indexOf("."),l=e.field.substr(0,s),c=e.field.substr(s+1);return a.push({fact:l,path:`$.${c}`,operator:this.operatorsMap.get(e.operator),value:e.value}),new Ed.Rule({conditions:{all:a},event:0===n?{type:"visible"}:void 0})}}extractConditions(e,n=0){const a=this.toEngineRule(e);return[...void 0!==a.conditions.any?a.conditions.any:[],...void 0!==a.conditions.all?a.conditions.all:[]]}resolveNativeType(e){switch(e){case"number":return"number";case"boolean":return"boolean";default:return"string"}}resolveAttributeType(e){switch(e){case Ct.AttributeTypes.Float:case Ct.AttributeTypes.Number:return"number";case Ct.AttributeTypes.Bool:return"boolean";default:return"string"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),D_=(()=>{class t{constructor(e,n){this.rulesParser=e,this.inlineContextResolver=n}evaluate(e,n=[]){return this.inlineContextResolver.resolveMerged(n,`rules:${ai()}`).pipe((0,hn.q)(1),(0,ye.U)(a=>[{...a},new Ed.Engine]),(0,ee.b)(([a,s])=>{const l=this.rulesParser.toEngineRule(e);s.addRule(l)}),(0,Ke.w)(([a,s])=>new y.y(l=>{s.run(a).then(c=>{l.next(c.events.findIndex(f=>"visible"===f.type)>-1),l.complete()})})))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Hw),o.\u0275\u0275inject(Cd))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();S(1562);var O_=S(7400),qw=S(9984);const M_=({body:t,headers:r,hostname:e,method:n="GET",path:a="/",port:s=443,protocol:l="https:",query:c,service:f,cognitoSettings:h,authFacade:g})=>(0,Re.of)(new Gi({body:t,headers:r,hostname:e,method:n,path:a,port:s,protocol:l,query:c})).pipe((0,ee.b)(()=>console.log(".marker({ event: BEGIN , context: s3, entity: sig , op: signv4 , meta: {  } })")),(0,Ke.w)(I=>(0,O_.D)(new cg({credentials:r_({client:new d_({region:h.region}),identityPoolId:h.identityPoolId,logins:{[`cognito-idp.${h.region}.amazonaws.com/${h.userPoolId}`]:()=>ad(g.getUser$.pipe((0,ye.U)(B=>B?B.id_token:void 0)))}}),region:h.region,service:f,sha256:qw.Sha256}).sign(I).then(B=>(console.log(".marker({ event: RESOLVED, entity: s3 , op: signv4 , meta: {  } })"),B))).pipe((0,ee.b)(()=>console.log(".marker({ /s3/sign/after/sig })")),(0,hn.q)(1))),(0,ye.U)(I=>I),(0,ee.b)(()=>console.log(".marker({ event: END , context: s3, entity: sig , op: signv4 , meta: {  } })")));let e4=(()=>{class t{constructor(e,n,a,s,l,c,f){a.register(((t,r,e,n,a,s)=>new Kc({id:"aws_s3_entity",title:"AWS S3 Entity",create:({object:l,identity:c,params:f,parentObject:h})=>(0,Re.of)({success:!1}).pipe(n.resolveParams({params:f}),(0,Ke.w)(({options:g})=>c({object:l,parentObject:h}).pipe((0,ye.U)(({identity:I})=>({identity:I,options:g})))),(0,Ke.w)(({options:g,identity:I})=>M_({method:"PUT",body:JSON.stringify(l),headers:{"Content-Type":"application/json",host:`${g.bucket}.s3.amazonaws.com`},hostname:`${g.bucket}.s3.amazonaws.com`,path:`${g.prefix}${I}.json`,protocol:"https:",service:"s3",cognitoSettings:e,authFacade:r}).pipe((0,ye.U)(B=>({signedHttpRequest:B,options:g})))),(0,ee.b)(({signedHttpRequest:g})=>delete g.headers.host),(0,ye.U)(({signedHttpRequest:g,options:I})=>({signedHttpRequest:g,options:I,url:`https://${I.bucket}.s3.amazonaws.com${g.path}`})),(0,Ke.w)(({signedHttpRequest:g,url:I})=>a.put(I,JSON.stringify(l),{headers:g.headers,withCredentials:!1})),(0,ye.U)(()=>({success:!0}))),read:({})=>(0,Re.of)({success:!1}),update:({object:l,identity:c,params:f})=>(0,Re.of)({success:!1}).pipe(n.resolveParams({params:f}),(0,Ke.w)(({options:h})=>c({object:l}).pipe((0,ye.U)(({identity:g})=>({identity:g,options:h})))),(0,Ke.w)(({options:h,identity:g})=>M_({method:"PUT",body:JSON.stringify(l),headers:{"Content-Type":"application/json",host:`${h.bucket}.s3.amazonaws.com`},hostname:`${h.bucket}.s3.amazonaws.com`,path:`${h.prefix}${g}.json`,protocol:"https:",service:"s3",cognitoSettings:e,authFacade:r}).pipe((0,ye.U)(I=>({signedHttpRequest:I,options:h})))),(0,ee.b)(({signedHttpRequest:h})=>delete h.headers.host),(0,ye.U)(({signedHttpRequest:h,options:g})=>({signedHttpRequest:h,options:g,url:`https://${g.bucket}.s3.amazonaws.com${h.path}`})),(0,Ke.w)(({signedHttpRequest:h,url:g})=>a.put(g,JSON.stringify(l),{headers:h.headers,withCredentials:!1})),(0,ye.U)(()=>({success:!0}))),delete:({})=>(0,Re.of)({success:!1}),query:({rule:l,params:c})=>(0,Re.of)({entities:[],success:!1}).pipe(n.resolveParams({params:c}),(0,ye.U)(({options:f})=>({options:f,identityCondition:l.conditions.all.map(h=>h.any.find(g=>"identity"===g.fact)).find(h=>!!h)})),(0,Ke.w)(({identityCondition:f,options:h})=>Gn(()=>void 0!==f&&f&&"identity"===f.fact&&h&&h.bucket,M_({method:"GET",body:void 0,headers:{"Content-Type":"application/json",host:`${h?h.bucket:""}.s3.amazonaws.com`},hostname:`${h?h.bucket:""}.s3.amazonaws.com`,path:`${h&&h.prefix?h.prefix:""}${f?f.value:""}.json`,protocol:"https:",service:"s3",cognitoSettings:e,authFacade:r}).pipe((0,ee.b)(()=>console.log(".marker({ event: AFTER , entity: s3 , op: query , meta: { action: createSignedRequest } })")),(0,ee.b)(g=>delete g.headers.host),(0,ye.U)(g=>({signedHttpRequest:g,options:h,url:`https://${h.bucket}.s3.amazonaws.com${g.path}`})),(0,ee.b)(()=>console.log(".marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })")),(0,Ke.w)(({signedHttpRequest:g,url:I})=>a.get(I,{headers:g.headers,withCredentials:!1})),(0,ee.b)(()=>console.log(".marker({ event: AFTER , entity: s3 , op: query , meta: { http: get } })")),(0,ye.U)(g=>({entities:g?[g]:[],success:!!g}))),(0,Re.of)({entities:[],success:!1}))))}))(0,s,e,l,c))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Nc),o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(il),o.\u0275\u0275inject(kr),o.\u0275\u0275inject(tl),o.\u0275\u0275inject(L.HttpClient),o.\u0275\u0275inject(mn.AsyncApiCallHelperService))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[mn.UtilsModule,qr,$h]]}),t})();const Rg=({body:t,headers:r,hostname:e,method:n="GET",path:a="/",port:s=443,protocol:l="https:",query:c,service:f,cognitoSettings:h,authFacade:g})=>(0,Re.of)(new Gi({body:t,headers:r,hostname:e,method:n,path:a,port:s,protocol:l,query:c})).pipe((0,ee.b)(()=>console.log(".marker({ event: BEGIN , context: os, entity: sig , op: signv4 , meta: {  } })")),(0,Ke.w)(I=>(0,O_.D)(new cg({credentials:r_({client:new d_({region:h.region}),identityPoolId:h.identityPoolId,logins:{[`cognito-idp.${h.region}.amazonaws.com/${h.userPoolId}`]:()=>ad(g.getUser$.pipe((0,ye.U)(B=>B?B.id_token:void 0)))}}),region:h.region,service:f,sha256:qw.Sha256,applyChecksum:!1}).sign(I).then(B=>(console.log(".marker({ event: RESOLVED, entity: os , op: signv4 , meta: {  } })"),B))).pipe((0,ee.b)(()=>console.log(".marker({ /os/sign/after/sig })")),(0,hn.q)(1))),(0,ye.U)(I=>I),(0,ee.b)(()=>console.log(".marker({ event: END , context: os, entity: sig , op: signv4 , meta: {  } })")));let r4=(()=>{class t{constructor(e,n,a,s,l,c){a.register(((t,r,e,n,a)=>new Kc({id:"aws_opensearch_template",title:"AWS Opensearch Template",create:({})=>(0,Re.of)({success:!1}),read:({})=>(0,Re.of)({success:!1}),update:({})=>(0,Re.of)({success:!1}),delete:({})=>(0,Re.of)({success:!1}),query:({rule:s,params:l})=>(0,Re.of)({entities:[],success:!1}).pipe((0,Ke.w)(()=>l&&0!==Object.keys(l).length?(0,cn.D)(Object.keys(l).map(c=>n.paramValue(l[c],new Map).pipe((0,ye.U)(f=>({[c]:f}))))).pipe((0,ye.U)(c=>c.reduce((f,h)=>({...f,...h}),{})),(0,ye.U)(c=>({options:c}))):(0,Re.of)({options:{}})),(0,ye.U)(({options:c})=>({options:c,body:JSON.stringify({id:c.id,params:s?s.conditions.all.reduce((f,h)=>({...f,...h.any.reduce((g,I)=>({...g,[I.path.substr(2)]:[...g[I.path.substr(2)]?g[I.path.substr(2)]:[],JSON.parse(decodeURIComponent(I.value))]}),{})}),{}):{}})})),(0,ee.b)(({body:c})=>console.log("open search template query body",c)),(0,Ke.w)(({options:c,body:f})=>Rg({method:"POST",body:f,headers:{"Content-Type":"application/json",host:`${c.domain}.${c.region}.es.amazonaws.com`},hostname:`${c.domain}.${c.region}.es.amazonaws.com`,path:`/${c.index}/_search/template`,protocol:"https:",service:"es",cognitoSettings:e,authFacade:r}).pipe((0,ye.U)(h=>({signedHttpRequest:h,options:c})))),(0,Ke.w)(({signedHttpRequest:c,options:f})=>(delete c.headers.host,a.post(`https://${f.domain}.${f.region}.es.amazonaws.com/${f.index}/_search/template`,c.body,{headers:c.headers,withCredentials:!1}).pipe((0,ye.U)(g=>({res:g,options:f}))))),(0,ye.U)(({res:c,options:f})=>({entities:f.hits&&c&&c.hits&&c.hits.hits?c.hits.hits.map(h=>f.source?h._source:h):[c],success:!0})))}))(0,s,e,l,c)),a.register(((t,r,e,n)=>new Kc({id:"aws_opensearch_entity",title:"AWS Opensearch Entity",create:({object:a,identity:s,params:l,parentObject:c})=>(0,Re.of)({success:!1}).pipe(e.resolveParams({params:l}),(0,Ke.w)(({options:f})=>s({object:a,parentObject:c}).pipe((0,ye.U)(({identity:h})=>({identity:h,options:f})))),(0,Ke.w)(({options:f,identity:h})=>Rg({method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json",host:`${f.domain}.${f.region}.es.amazonaws.com`},hostname:`${f.domain}.${f.region}.es.amazonaws.com`,path:`/${f.index}/_doc/${h}`,protocol:"https:",service:"es",...f.pipeline?{query:{pipeline:f.pipeline}}:{},cognitoSettings:r,authFacade:t}).pipe((0,ye.U)(g=>({signedHttpRequest:g,options:f,identity:h})))),(0,Ke.w)(({signedHttpRequest:f,options:h,identity:g})=>(delete f.headers.host,n.put(`https://${h.domain}.${h.region}.es.amazonaws.com/${h.index}/_doc/${g}`,JSON.stringify(a),{headers:f.headers,withCredentials:!1,params:{...h.pipeline?{pipeline:h.pipeline}:{}}}).pipe((0,ye.U)(B=>({res:B,options:h}))))),(0,ye.U)(()=>({success:!0}))),read:({})=>(0,Re.of)({success:!1}),update:({object:a,identity:s,params:l,parentObject:c})=>(0,Re.of)({success:!1}).pipe(e.resolveParams({params:l}),(0,Ke.w)(({options:f})=>s({object:a,parentObject:c}).pipe((0,ye.U)(({identity:h})=>({identity:h,options:f})))),(0,Ke.w)(({options:f,identity:h})=>Rg({method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json",host:`${f.domain}.${f.region}.es.amazonaws.com`},hostname:`${f.domain}.${f.region}.es.amazonaws.com`,path:`/${f.index}/_doc/${h}`,protocol:"https:",service:"es",...f.pipeline?{query:{pipeline:f.pipeline}}:{},cognitoSettings:r,authFacade:t}).pipe((0,ye.U)(g=>({signedHttpRequest:g,options:f,identity:h})))),(0,Ke.w)(({signedHttpRequest:f,options:h,identity:g})=>(delete f.headers.host,n.put(`https://${h.domain}.${h.region}.es.amazonaws.com/${h.index}/_doc/${g}`,JSON.stringify(a),{headers:f.headers,withCredentials:!1,params:{...h.pipeline?{pipeline:h.pipeline}:{}}}).pipe((0,ye.U)(B=>({res:B,options:h}))))),(0,ye.U)(()=>({success:!0}))),delete:({})=>(0,Re.of)({success:!1}),query:({rule:a,params:s})=>(0,Re.of)({entities:[],success:!1}).pipe((0,ee.b)(()=>{console.log("crud open search query",a,s)}),e.resolveParams({params:s}),(0,ye.U)(({options:l})=>({options:l,identityCondition:a.conditions.all.map(c=>c.any.find(f=>"identity"===f.fact)).find(c=>!!c)})),(0,Ke.w)(({options:l,identityCondition:c})=>Rg({method:"GET",headers:{"Content-Type":"application/json",host:`${l.domain}.${l.region}.es.amazonaws.com`},hostname:`${l.domain}.${l.region}.es.amazonaws.com`,path:`/${l.index}/_doc/${c?c.value:""}`,protocol:"https:",service:"es",cognitoSettings:r,authFacade:t}).pipe((0,ee.b)(()=>console.log(".marker({ event: AFTER , entity: opensearch , op: query , meta: { action: createSignedRequest } })")),(0,ee.b)(f=>delete f.headers.host),(0,ye.U)(f=>({signedHttpRequest:f,options:l,url:`https://${l.domain}.${l.region}.es.amazonaws.com${f.path}`})),(0,ee.b)(()=>console.log(".marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })")),(0,Ke.w)(({signedHttpRequest:f,url:h})=>n.get(h,{headers:f.headers,withCredentials:!1}).pipe((0,Qi.K)(()=>(0,Re.of)(void 0)))),(0,ee.b)(()=>console.log(".marker({ event: AFTER , entity: opensearch , op: query , meta: { http: get } })")),(0,ye.U)(f=>({entities:f?[f._source]:[],success:!!f})))))}))(s,e,l,c))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Nc),o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(il),o.\u0275\u0275inject(kr),o.\u0275\u0275inject(tl),o.\u0275\u0275inject(L.HttpClient))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[qr,$h]]}),t})();var Ro=S(4567),o4=S(1755),Hh=S(2375),a4=Object.prototype.toString;var Ww=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},Dg=function(){function t(r,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}();function Kw(t){return t.split("").map(function(r){return"(?:"+r.toUpperCase()+"|"+r.toLowerCase()+")"}).join("")}function Ad(t,r){for(var e=t.length-1;e>=0;e--)t[e]===r&&Array.prototype.splice.call(t,e,1)}function s4(t,r){return Object.prototype.hasOwnProperty.call(t,r)}var L_={},Yw=function(){function t(){Ww(this,t),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return Dg(t,null,[{key:"getInstance",value:function(e){return L_[e]=L_[e]||new t,L_[e]}}]),Dg(t,[{key:"acronym",value:function(e){this.acronyms[e.toLowerCase()]=e;var n=[];for(var a in this.acronyms)s4(this.acronyms,a)&&n.push(this.acronyms[a]);this.acronymRegex=new RegExp(n.join("|"))}},{key:"plural",value:function(e,n){"string"==typeof e&&Ad(this.uncountables,e),Ad(this.uncountables,n),this.plurals.unshift([e,n])}},{key:"singular",value:function(e,n){"string"==typeof e&&Ad(this.uncountables,e),Ad(this.uncountables,n),this.singulars.unshift([e,n])}},{key:"irregular",value:function(e,n){Ad(this.uncountables,e),Ad(this.uncountables,n);var a=e[0],s=e.substr(1),l=n[0],c=n.substr(1);if(a.toUpperCase()===l.toUpperCase())this.plural(new RegExp("("+a+")"+s+"$","i"),"$1"+c),this.plural(new RegExp("("+l+")"+c+"$","i"),"$1"+c),this.singular(new RegExp("("+a+")"+s+"$","i"),"$1"+s),this.singular(new RegExp("("+l+")"+c+"$","i"),"$1"+s);else{var f=Kw(s),h=Kw(c);this.plural(new RegExp(a.toUpperCase()+f+"$"),l.toUpperCase()+c),this.plural(new RegExp(a.toLowerCase()+f+"$"),l.toLowerCase()+c),this.plural(new RegExp(l.toUpperCase()+h+"$"),l.toUpperCase()+c),this.plural(new RegExp(l.toLowerCase()+h+"$"),l.toLowerCase()+c),this.singular(new RegExp(a.toUpperCase()+f+"$"),a.toUpperCase()+s),this.singular(new RegExp(a.toLowerCase()+f+"$"),a.toLowerCase()+s),this.singular(new RegExp(l.toUpperCase()+h+"$"),a.toUpperCase()+s),this.singular(new RegExp(l.toLowerCase()+h+"$"),a.toLowerCase()+s)}}},{key:"uncountable",value:function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];this.uncountables=this.uncountables.concat(n)}},{key:"human",value:function(e,n){this.humans.unshift([e,n])}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===e?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[e]=[]}}]),t}(),Qw={en:function l4(t){t.plural(/$/,"s"),t.plural(/s$/i,"s"),t.plural(/^(ax|test)is$/i,"$1es"),t.plural(/(octop|vir)us$/i,"$1i"),t.plural(/(octop|vir)i$/i,"$1i"),t.plural(/(alias|status)$/i,"$1es"),t.plural(/(bu)s$/i,"$1ses"),t.plural(/(buffal|tomat)o$/i,"$1oes"),t.plural(/([ti])um$/i,"$1a"),t.plural(/([ti])a$/i,"$1a"),t.plural(/sis$/i,"ses"),t.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),t.plural(/(hive)$/i,"$1s"),t.plural(/([^aeiouy]|qu)y$/i,"$1ies"),t.plural(/(x|ch|ss|sh)$/i,"$1es"),t.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),t.plural(/^(m|l)ouse$/i,"$1ice"),t.plural(/^(m|l)ice$/i,"$1ice"),t.plural(/^(ox)$/i,"$1en"),t.plural(/^(oxen)$/i,"$1"),t.plural(/(quiz)$/i,"$1zes"),t.singular(/s$/i,""),t.singular(/(ss)$/i,"$1"),t.singular(/(n)ews$/i,"$1ews"),t.singular(/([ti])a$/i,"$1um"),t.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),t.singular(/(^analy)(sis|ses)$/i,"$1sis"),t.singular(/([^f])ves$/i,"$1fe"),t.singular(/(hive)s$/i,"$1"),t.singular(/(tive)s$/i,"$1"),t.singular(/([lr])ves$/i,"$1f"),t.singular(/([^aeiouy]|qu)ies$/i,"$1y"),t.singular(/(s)eries$/i,"$1eries"),t.singular(/(m)ovies$/i,"$1ovie"),t.singular(/(x|ch|ss|sh)es$/i,"$1"),t.singular(/^(m|l)ice$/i,"$1ouse"),t.singular(/(bus)(es)?$/i,"$1"),t.singular(/(o)es$/i,"$1"),t.singular(/(shoe)s$/i,"$1"),t.singular(/(cris|test)(is|es)$/i,"$1is"),t.singular(/^(a)x[ie]s$/i,"$1xis"),t.singular(/(octop|vir)(us|i)$/i,"$1us"),t.singular(/(alias|status)(es)?$/i,"$1"),t.singular(/^(ox)en/i,"$1"),t.singular(/(vert|ind)ices$/i,"$1ex"),t.singular(/(matr)ices$/i,"$1ix"),t.singular(/(quiz)zes$/i,"$1"),t.singular(/(database)s$/i,"$1"),t.irregular("person","people"),t.irregular("man","men"),t.irregular("child","children"),t.irregular("sex","sexes"),t.irregular("move","moves"),t.irregular("zombie","zombies"),t.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}};function Ss(t,r){if(function Xw(t){return"[object Function]"===a4.call(t)}(t)&&(r=t,t=null),t=t||"en",!r)return Yw.getInstance(t);r(Yw.getInstance(t))}for(var Jw in Qw)Ss(Jw,Qw[Jw]);function Zw(t,r){var n,a,s,e=""+t;if(0===e.length)return e;var l=e.toLowerCase().match(/\b\w+$/);if(l&&Ss().uncountables.indexOf(l[0])>-1)return e;for(var c=0,f=r.length;c<f;c++)if(s=(n=r[c])[1],e.match(a=n[0])){e=e.replace(a,s);break}return e}function eS(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return Zw(t,Ss(r).plurals)}function tS(t){var r=null==t?"":String(t);return r.charAt(0).toUpperCase()+r.slice(1)}function Yc(t,r){null==r&&(r=!0);var e=""+t;return(e=r?e.replace(/^[a-z\d]*/,function(n){return Ss().acronyms[n]||tS(n)}):e.replace(new RegExp("^(?:"+Ss().acronymRegex.source+"(?=\\b|[A-Z_])|\\w)"),function(n){return n.toLowerCase()})).replace(/(?:_|(\/))([a-z\d]*)/gi,function(n,a,s,l,c){return a||(a=""),""+a+(Ss().acronyms[s]||tS(s))})}var nS={\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00c6:"AE",\u00c7:"C",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00d0:"D",\u00d1:"N",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O","\xd7":"x",\u00d8:"O",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00dd:"Y",\u00de:"Th",\u00df:"ss",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00e6:"ae",\u00e7:"c",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00f0:"d",\u00f1:"n",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00fd:"y",\u00fe:"th",\u00ff:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010a:"C",\u010b:"c",\u010c:"C",\u010d:"c",\u010e:"D",\u010f:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011a:"E",\u011b:"e",\u011c:"G",\u011d:"g",\u011e:"G",\u011f:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u0128:"I",\u0129:"i",\u012a:"I",\u012b:"i",\u012c:"I",\u012d:"i",\u012e:"I",\u012f:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013a:"l",\u013b:"L",\u013c:"l",\u013d:"L",\u013e:"l",\u013f:"L",\u0140:"l",\u0141:"L",\u0142:"l",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"'n",\u014a:"NG",\u014b:"ng",\u014c:"O",\u014d:"o",\u014e:"O",\u014f:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",\u015a:"S",\u015b:"s",\u015c:"S",\u015d:"s",\u015e:"S",\u015f:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",\u0168:"U",\u0169:"u",\u016a:"U",\u016b:"u",\u016c:"U",\u016d:"u",\u016e:"U",\u016f:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017a:"z",\u017b:"Z",\u017c:"z",\u017d:"Z",\u017e:"z",\u0410:"A",\u0411:"B",\u0412:"V",\u0413:"G",\u0414:"D",\u0415:"E",\u0401:"E",\u0416:"ZH",\u0417:"Z",\u0418:"I",\u0419:"J",\u041a:"K",\u041b:"L",\u041c:"M",\u041d:"N",\u041e:"O",\u041f:"P",\u0420:"R",\u0421:"S",\u0422:"T",\u0423:"U",\u0424:"F",\u0425:"KH",\u0426:"C",\u0427:"CH",\u0428:"SH",\u0429:"SHCH",\u042a:"",\u042b:"Y",\u042c:"",\u042d:"E",\u042e:"YU",\u042f:"YA",\u0430:"a",\u0431:"b",\u0432:"v",\u0433:"g",\u0434:"d",\u0435:"e",\u0451:"e",\u0436:"zh",\u0437:"z",\u0438:"i",\u0439:"j",\u043a:"k",\u043b:"l",\u043c:"m",\u043d:"n",\u043e:"o",\u043f:"p",\u0440:"r",\u0441:"s",\u0442:"t",\u0443:"u",\u0444:"f",\u0445:"kh",\u0446:"c",\u0447:"ch",\u0448:"sh",\u0449:"shch",\u044a:"",\u044b:"y",\u044c:"",\u044d:"e",\u044e:"yu",\u044f:"ya"},N_={};function g4(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",5),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.index;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("panel page | level: ",e,"")}}function v4(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-select",3),o.\u0275\u0275template(2,g4,2,2,"mat-option",4),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(3,1,e.panelPages$))}}function y4(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",5),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.index;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("panel | ",e,"")}}function _4(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-select",6),o.\u0275\u0275template(2,y4,2,2,"mat-option",4),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(3,1,e.panels$))}}function x4(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",5),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.index;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("pane | ",e,"")}}function b4(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-select",7),o.\u0275\u0275template(2,x4,2,2,"mat-option",4),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(3,1,e.panes$))}}function C4(t,r){if(1&t&&o.\u0275\u0275element(0,"druid-panels-panelpage-linkedlist",8),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("panelPages",e.nested)}}function w4(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",2),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext(2).onItemSelect(s.id)}),o.\u0275\u0275elementStart(1,"span",6),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",e.title," [",e.id,"]")}}function S4(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-nav-list"),o.\u0275\u0275template(1,w4,3,2,"a",5),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,1,e.panels$))}}!function(){function t(){for(var r in Ww(this,t),this.approximations={},nS)this.approximate(r,nS[r])}Dg(t,null,[{key:"getInstance",value:function(e){return N_[e]=N_[e]||new t,N_[e]}}]),Dg(t,[{key:"approximate",value:function(e,n){this.approximations[e]=n}},{key:"transliterate",value:function(e,n){var a=this;return e.replace(/[^\u0000-\u007f]/g,function(s){return a.approximations[s]||n||"?"})}}])}();class T4{constructor(r){r&&(this.openSearchDomain=r.openSearchDomain,this.s3Bucket=r.s3Bucket,this.objectsRootUrl=r.objectsRootUrl)}}class di{constructor(r){this.gridItems=[],this.panels=[],this.contexts=[],this.rowSettings=[],this.entityPermissions=new oS,r&&(this.id=r.id,this.layoutType=r.layoutType,this.displayType=r.displayType,this.name=r.name?r.name:void 0,this.title=r.title?r.title:void 0,this.site=r.site?r.site:void 0,this.userId=r.userId?r.userId:void 0,this.path=r.path?r.path:void 0,this.persistence=r.persistence?new Sd(r.persistence):void 0,this.interactions=r.interactions?new Wc(r.interactions):void 0,r.panels&&(this.panels=r.panels.map(e=>new uo(e))),r.gridItems&&(this.gridItems=r.gridItems.map(e=>new rS(e))),r.contexts&&(this.contexts=r.contexts.map(e=>new Jr(e))),r.layoutSetting&&(this.layoutSetting=new Qn(r.layoutSetting)),r.rowSettings&&Array.isArray(r.rowSettings)&&(this.rowSettings=r.rowSettings.map(e=>new Qn(e))),r.entityPermissions&&(this.entityPermissions=new oS(r.entityPermissions)),r.cssFile&&(this.cssFile=r.cssFile))}}class uo{constructor(r){this.settings=[],this.panes=[],r&&(this.name=r.name?r.name:void 0,this.label=r.label?r.label:void 0,this.stylePlugin=r.stylePlugin,r.settings&&(this.settings=r.settings.map(e=>new Ct.AttributeValue(e))),r.panes&&(this.panes=r.panes.map(e=>new mi(e))),r.columnSetting&&(this.columnSetting=new Qn(r.columnSetting)))}}class mi{constructor(r){this.settings=[],this.locked=!1,this.contexts=[],r&&(this.name=r.name,this.label=r.label,this.contentPlugin=r.contentPlugin,this.locked=void 0!==r.locked&&r.locked,r.linkedPageId&&(this.linkedPageId=r.linkedPageId),void 0!==r.metadata&&(this.metadata=new Map([...r.metadata])),void 0!==r.settings&&(this.settings=r.settings.map(e=>new Ct.AttributeValue(e))),void 0!==r.contexts&&(this.contexts=r.contexts.map(e=>new Jr(e))),void 0!==r.rule&&"string"!=typeof r.rule&&(this.rule={...r.rule}),r.nestedPage&&(this.nestedPage=new di(r.nestedPage)),r.resolvedContext&&(this.resolvedContext={...r.resolvedContext}))}}class rS{constructor(r){r&&(this.cols=r.cols,this.rows=r.rows,this.x=r.x,this.y=r.y,this.weight=r.weight)}}class Qn{constructor(r){this.settings=[],r&&r.settings&&Array.isArray(r.settings)&&(this.settings=r.settings.map(e=>new Ct.AttributeValue(e)))}}class oS{constructor(r){this.readUserIds=[],this.writeUserIds=[],this.deleteUserIds=[],r&&(this.readUserIds=r.readUserIds?r.readUserIds.map(e=>e):[],this.writeUserIds=r.writeUserIds?r.writeUserIds.map(e=>e):[],this.deleteUserIds=r.deleteUserIds?r.deleteUserIds.map(e=>e):[])}}let fo=(()=>{class t{constructor(e){this.attributeSerializer=e}handleFile(e){return(0,Re.of)()}handlesType(e){return!1}implementsRendererOverride(){return!1}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return!1}isData(e){return!1}buildDynamicItems(e,n){return(0,Re.of)([])}fetchDynamicData(e,n){return(0,Re.of)(new qn)}getBindings(e,n){return(0,Re.of)([])}toObject(e){return(0,Re.of)(this.attributeSerializer.deserializeAsObject(e))}buildSettings(e){return this.attributeSerializer.serialize(e,"root").attributes}fromPanes(e){return e.map(n=>new mi(this.attributeSerializer.deserialize(n)))}wrapPanel(e){return new uo({stylePlugin:void 0,settings:[],panes:e,columnSetting:new Qn})}stateDefinition(e){return(0,Re.of)({})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A4=(()=>{class t{constructor(e,n){this.fb=e,this.panelHandler=n,this.panelPages$=new m.X([]),this.panels$=new m.X([]),this.panes$=new m.X([]),this.nested$=new m.X([]),this.formGroup=this.fb.group({panelPage:this.fb.control(void 0),panel:this.fb.control(void 0),pane:this.fb.control(void 0),nested:this.fb.control(void 0)}),this.panelPageSub=this.formGroup.get("panelPage").valueChanges.subscribe(a=>{this.panels$.next(new di(this.panelPages$.value[a]).panels)}),this.panelSub=this.formGroup.get("panel").valueChanges.subscribe(a=>{this.panes$.next(new uo(this.panels$.value[a]).panes)}),this.paneSub=this.formGroup.get("pane").valueChanges.pipe((0,ye.U)(a=>this.panes$.value[a]),(0,Ke.w)(a=>Gn(()=>"panel"===a.contentPlugin,this.panelHandler.toObject(a.settings),(0,Re.of)(void 0))),(0,$.h)(a=>!!a)).subscribe(a=>{this.nested$.next([a])}),this.onTouched=()=>{}}set panelPages(e){this.panelPages$.next(e)}set panels(e){this.panels$.next(e)}set panes(e){this.panes$.next(e)}get panelPages(){return this.panelPages$.value&&Array.isArray(this.panelPages$.value)?this.panelPages$.value:[]}get panels(){return this.panels$.value&&Array.isArray(this.panels$.value)?this.panels$.value:[]}get panes(){return this.panes$.value&&Array.isArray(this.panes$.value)?this.panes$.value:[]}get nested(){return this.nested$.value&&void 0!==typeof this.nested$.value&&this.nested$.value.length>0?[...this.nested$.value]:void 0}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(fo))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-panels-panelpage-linkedlist"]],inputs:{panelPages:"panelPages",panels:"panels",panes:"panes"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:5,vars:5,consts:[[3,"formGroup"],[4,"ngIf"],["formControlName","nested",3,"panelPages",4,"ngIf"],["required","","formControlName","panelPage"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["required","","formControlName","panel"],["required","","formControlName","pane"],["formControlName","nested",3,"panelPages"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,v4,4,3,"mat-form-field",1),o.\u0275\u0275template(2,_4,4,3,"mat-form-field",1),o.\u0275\u0275template(3,b4,4,3,"mat-form-field",1),o.\u0275\u0275template(4,C4,1,1,"druid-panels-panelpage-linkedlist",2),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.panelPages.length>0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.panels.length>0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.panes.length>0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.nested))},directives:[Wt.KE,Hi.gD,ri.ey,t,d.JL,d.sg,x.NgIf,d.Q7,d.JJ,d.u,x.NgForOf],pipes:[x.AsyncPipe],encapsulation:2}),t})(),k4=(()=>{class t{constructor(e,n,a,s,l,c){this.siteName=e,this.bottomSheetRef=n,this.handler=a,this.dialog=s,this.fb=l,this.selectedIndex=0,this.panelPagesService=c.getEntityCollectionService("PanelPage"),this.panelPageListItemsService=c.getEntityCollectionService("PanelPageListItem")}ngOnInit(){}onNewSelect(){const e=ai(),n=new di({id:void 0,layoutType:"split",displayType:"page",site:this.siteName,gridItems:[],panels:[],layoutSetting:new Qn,rowSettings:[]});this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:e,label:e,rule:new d.NI(""),settings:this.fb.array(this.handler.buildSettings(n).map(a=>this.convertToGroup(a)))})),this.bottomSheetRef.dismiss()}onLinkSelect(){this.selectedIndex=1,this.panels$=this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(this.siteName)}`)}onEmbedSelect(){const e=ai();this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:e,label:e,rule:new d.NI(""),locked:new d.NI(!0),settings:this.fb.array([])})),this.bottomSheetRef.dismiss()}onItemSelect(e){const n=ai();this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:n,label:n,rule:new d.NI(""),linkedPageId:new d.NI(e,d.kI.required),locked:new d.NI(!0),settings:this.fb.array([])})),this.bottomSheetRef.dismiss()}convertToGroup(e){const n=this.fb.group({name:new d.NI(e.name,d.kI.required),type:new d.NI(e.type,d.kI.required),displayName:new d.NI(e.displayName,d.kI.required),value:new d.NI(e.value,d.kI.required),computedValue:new d.NI(e.value,d.kI.required),attributes:new d.Oe([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(a=>{n.get("attributes").push(this.convertToGroup(a))}),n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(mn.SITE_NAME),o.\u0275\u0275directiveInject(Jl.oL),o.\u0275\u0275directiveInject(fo),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-panel-selector"]],inputs:{panelFormGroup:"panelFormGroup"},decls:11,vars:1,consts:[["mat-align-tabs","start",3,"selectedIndex"],["label","Type"],["mat-list-item","","mat-list-item","",3,"click"],["label","Search"],["matTabContent",""],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-line",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-tab-group",0),o.\u0275\u0275elementStart(1,"mat-tab",1),o.\u0275\u0275elementStart(2,"mat-nav-list"),o.\u0275\u0275elementStart(3,"a",2),o.\u0275\u0275listener("click",function(){return n.onNewSelect()}),o.\u0275\u0275text(4,"New Panel"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"a",2),o.\u0275\u0275listener("click",function(){return n.onLinkSelect()}),o.\u0275\u0275text(6,"Link Panel"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"a",2),o.\u0275\u0275listener("click",function(){return n.onEmbedSelect()}),o.\u0275\u0275text(8,"Embed Panel"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-tab",3),o.\u0275\u0275template(10,S4,3,3,"ng-template",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("selectedIndex",n.selectedIndex)},directives:[Cs.SP,Cs.uX,ws.Hk,ws.Tg,Cs.Vc,x.NgForOf,ri.X2],pipes:[x.AsyncPipe],styles:[""]}),t})(),I4=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-panel-editor"]],decls:2,vars:0,template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"panel-editor works!"),o.\u0275\u0275elementEnd())},styles:[""]}),t})();class pa{constructor(r){this.panels=[],r&&(this.id=r.id,void 0!==r.panels&&Array.isArray(r.panels)&&(this.panels=r.panels.map(e=>new Zl(e))))}}class Zl{constructor(r){this.panes=[],r&&void 0!==r.panes&&Array.isArray(r.panes)&&(this.panes=r.panes.map(e=>new ea(e)))}}class ea{constructor(r){r&&(void 0!==r.state&&(this.state=new Ct.AttributeValue(r.state)),null!=r.nestedPage&&(this.nestedPage=new pa(r.nestedPage)))}}let Qc=(()=>{class t{constructor(e,n,a,s,l,c){this.siteName=e,this.panelHandler=n,this.attributeSerializer=a,this.rulesResolver=s,this.dpm=l,this.datasourceEvalutator=c}handleFile(e){return(0,Re.of)([])}handlesType(e){return!1}implementsRendererOverride(){return!0}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return!0}isData(e){return!0}fetchDynamicData(e,n){const a=n.has("dataPanes")?new Map(n.get("dataPanes").map(l=>[l.name,l])):new Map([]),s=new Map(Array.from(a).map(([l,c])=>[l,new qc(this.attributeSerializer.deserializeAsObject(c.settings))]));return this.toObject(e).pipe((0,Ke.w)(l=>this.datasourceEvalutator.evalDatasource({datasource:l,metadata:n,datasources:s})))}buildDynamicItems(e,n){const a=new Map(n.get("dataPanes").map(s=>[s.name,s]));return this.fetchDynamicData(e,n).pipe((0,Ke.w)(s=>this.toObject(e).pipe((0,ye.U)(l=>[l,s]))),(0,Ke.w)(([s,l])=>this.getBindings(e,"pane").pipe((0,ye.U)(c=>[s,l,c]))),(0,Ke.w)(([s,l,c])=>Gn(()=>0!==l.results.length&&c.length>0,(0,cn.D)(l.results.map(f=>(0,cn.D)(c.filter(h=>!a.has(h.id)).map(h=>(0,Re.of)(n.get("panes").find(g=>g.name===h.id)).pipe((0,Ke.w)(g=>Gn(()=>g&&g.rule&&null!==g.rule&&""!==g.rule.condition,g?this.rulesResolver.evaluate(g.rule,[...n.get("contexts"),...void 0!==g.contexts?g.contexts:[],new Jr({name:"_root",adaptor:"data",data:f})]).pipe((0,ye.U)(I=>[g,I])):(0,Re.of)([g,!1]),(0,Re.of)(!1).pipe((0,ye.U)(I=>[g,I])))),(0,$.h)(([g,I])=>I),(0,ye.U)(([g,I])=>g.name),(0,Ei.d)(h.id)))).pipe((0,ye.U)(h=>h.reduce((g,I)=>[...g,I],[]))))).pipe((0,ye.U)(f=>[s,l,f])),new y.y(f=>{f.next([s,l,[]]),f.complete()}))),(0,ye.U)(([s,l,c])=>l.results.reduce((f,h,g)=>[...f,...c[g]?c[g].map(I=>new mi({...n.get("panes").find(B=>B.name===I),rule:void 0,label:ai(),contexts:[...n.get("contexts"),new Jr({name:"_root",adaptor:"data",data:h})]})):[]],[])),(0,ye.U)(s=>new uo({stylePlugin:void 0,settings:[],panes:s,columnSetting:new Qn})),(0,ye.U)(s=>this.panelHandler.buildSettings(new di({id:void 0,layoutType:"grid",displayType:"page",site:this.siteName,gridItems:[],layoutSetting:new Qn,rowSettings:[],panels:[s]}))),(0,ye.U)(s=>s.find(l=>"panels"===l.name).attributes[0].attributes.find(l=>"panes"===l.name).attributes))}getBindings(e,n,a){const s=a?new Map(a.get("dataPanes").map(l=>[l.name,l])):new Map;return"context"===n?this.toObject(e).pipe((0,ye.U)(l=>[l,l.params?l.params.reduce((c,f)=>[...c,..."form"===f.mapping.type?[new Gt.ContentBinding({id:`form__${f.mapping.value.split(".",2)[0].trim()}`,type:"context"})]:[]],[]):[]]),(0,Ke.w)(([l,c])=>this.dpm.getPlugin(l.plugin).pipe((0,Ke.w)(f=>f.getBindings({settings:l.settings,metadata:a}).pipe((0,ye.U)(h=>[l,h]))))),(0,Ke.w)(([l,c])=>(0,cn.D)(l.renderer.bindings.reduce((f,h)=>[...f,...s.has(h.id)?[this.toObject(s.get(h.id).settings)]:[]],[])).pipe((0,Ke.w)(f=>(0,cn.D)(f.map(h=>this.dpm.getPlugin(h.plugin).pipe((0,Ke.w)(g=>g.getBindings({settings:h.settings,metadata:a}))))).pipe((0,ye.U)(h=>h.reduce((g,I)=>[...g,...I],c)),(0,Ei.d)(c))),(0,Ei.d)(c)))):this.toObject(e).pipe((0,Ke.w)(l=>Gn(()=>l.renderer.type===n,(0,Re.of)(l.renderer.bindings),(0,Re.of)([]))))}toObject(e){return(0,Re.of)(this.attributeSerializer.deserializeAsObject(e))}buildSettings(e){return this.attributeSerializer.serialize(e,"root").attributes}getRenderType(e){const n=[e.find(a=>"renderer"===a.name)].map(a=>a.attributes.find(s=>"type"===s.name));return n.length>0?n[0].value:void 0}stateDefinition(e){return(0,Re.of)({autocomplete:{input:""},loading:"y"})}editorOptions(e){return this.toObject(e).pipe((0,Ke.w)(n=>this.dpm.getPlugin(n&&n.plugin?n.plugin:"data").pipe((0,ye.U)(a=>[n,a]))),(0,Ke.w)(([n,a])=>a.editorOptions?a.editorOptions({settings:n&&n.settings?n.settings:[]}):(0,Re.of)(void 0)),(0,ye.U)(n=>new Gt.ContentPluginEditorOptions({fullscreen:!!n&&n.fullscreen})))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(mn.SITE_NAME),o.\u0275\u0275inject(fo),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(D_),o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(Aw))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),P4=(()=>{class t{constructor(e,n,a,s,l){this.data=e,this.dialogRef=n,this.fb=a,this.attributeSerializer=s,this.datasourceHandler=l,this.datasource=new qc,this.bindableOptions=[],this.contexts=[],this.formGroup=this.fb.group({source:this.fb.control("")})}ngOnInit(){const e=this.data.panelFormGroup.get("panes");if(this.bindableOptions=e.controls.reduce((n,a)=>a.get("name").value?[...n,a.get("name").value]:[...n],[]),this.contexts=this.data.contexts.map(n=>n.name),void 0!==this.data.panelIndex&&this.data.paneIndex<e.length){const n=e.at(this.data.paneIndex).get("settings").value.map(a=>new Ct.AttributeValue(a));this.datasourceHandler.toObject(n).subscribe(a=>{this.datasource=a})}}onSubmit(){const e=this.attributeSerializer.serialize(this.formGroup.value.source,"source"),n=this.data.panelFormGroup.get("panes").at(this.data.paneIndex);void 0===this.data.paneIndex?(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"datasource",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array(e.attributes.map(a=>this.attributeSerializer.convertToGroup(a)))})),console.log(this.data.panelFormGroup.get("panes").value)):(n.get("settings").clear(),e.attributes.forEach(a=>n.get("settings").push(this.attributeSerializer.convertToGroup(a)))),this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Qc))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-datasource-editor"]],decls:4,vars:4,consts:[[3,"formGroup","ngSubmit"],["formControlName","source",3,"bindableOptions","contexts","datasource"],["type","submit"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.onSubmit()}),o.\u0275\u0275element(1,"classifieds-ui-datasource-form",1),o.\u0275\u0275elementStart(2,"button",2),o.\u0275\u0275text(3,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(1),o.\u0275\u0275property("bindableOptions",n.bindableOptions)("contexts",n.contexts)("datasource",n.datasource))},directives:[S_,d._Y,d.JL,d.sg,d.JJ,d.u],styles:[""]}),t})();const F4=t=>new Gt.ContentPlugin({id:"panel",title:"Panel",selectionComponent:k4,editorComponent:I4,renderComponent:void 0,handler:t}),R4=t=>new Gt.ContentPlugin({id:"datasource",title:"Datasource",selectionComponent:void 0,editorComponent:P4,renderComponent:void 0,handler:t}),aS=(0,Et.PH)("[PageBuilder] Load Rest Data",(0,Et.Ky)()),sS=(0,Et.PH)("[PageBuilder] Load Rest Data Success",(0,Et.Ky)()),B_=((0,Et.PH)("[PageBuilder] Load Rest Data Error",(0,Et.Ky)()),(0,Et.PH)("[PageBuilder] Set Page Info",(0,Et.Ky)())),lS=(0,Et.PH)("[PageBuilder] Set Form",(0,Et.Ky)()),j_=(0,Et.PH)("[PageBuilder] Set Page",(0,Et.Ky)()),cS=(0,Et.PH)("[PageBuilder] Selection Path",(0,Et.Ky)());let O4=(()=>{class t{constructor(e,n,a){this.actions$=e,this.datasourceApi=n,this.snippetParserService=a,this.loadRestData$=Br(()=>this.actions$.pipe(so(aS),(0,Ra.b)(s=>this.fetchRestdata$(s.rest).pipe((0,Qi.K)(()=>[]),(0,ye.U)(l=>void 0!==s.rest.renderer&&void 0!==s.rest.renderer.query&&""!==s.rest.renderer.query?(0,Ro.JSONPath)({path:s.rest.renderer.query,json:l}):l),(0,ye.U)(l=>sS({tag:s.tag,data:new qn({results:l})}))))))}fetchRestdata$(e){switch(e.method?e.method:"get"){case"post":case"POST":return(0,Re.of)([]).pipe((0,Ke.w)(()=>this.snippetParserService.parseSnippet({snippet:e.body})),(0,Ke.w)(a=>this.datasourceApi.postData({url:e.url,body:a})));default:return this.datasourceApi.getData(e.url)}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ho),o.\u0275\u0275inject(Vh),o.\u0275\u0275inject(fw))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class Xh{constructor(r){r&&(this.id=r.id,this.path=r.path,this.realPath=r.realPath,this.args=r.args)}}const uS="pageBuilder",L4=(0,Et.Lq)({dataTags:[],datasets:[],pageInfo:void 0,formNames:[],forms:[],page:void 0,selectionPath:[]},(0,Et.on)(sS,(t,r)=>{const e=t.dataTags.findIndex(n=>n===r.tag);if(e>-1&&void 0!==t.forms[e]){const n={...t};return n.datasets[e].push(r.data),n}return{...t,dataTags:[...t.dataTags,r.tag],datasets:[...t.datasets,[r.data]]}}),(0,Et.on)(lS,(t,r)=>{const e=t.formNames.findIndex(n=>n===r.name);return e>-1&&void 0!==t.forms[e]?{...t,forms:t.forms.map((n,a)=>a===e?r.form:n)}:{...t,formNames:[...t.formNames,r.name],forms:[...t.forms,r.form]}}),(0,Et.on)(B_,(t,r)=>({...t,pageInfo:void 0!==r.info?new Xh(r.info):void 0})),(0,Et.on)(j_,(t,r)=>({...t,page:void 0!==r.page?new di(r.page):void 0})),(0,Et.on)(cS,(t,r)=>({...t,selectionPath:void 0!==r.path?r.path:[]})));function N4(t,r){return L4(t,r)}const Og=new o.InjectionToken("StylePlugin"),z_=new o.InjectionToken("PanelsSettings");let U_=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g,I,B,V){const ce=((t,r)=>({PanelPageListItem:{entityName:"PanelPageListItem",crud:{idb_keyval:{params:{prefix:"panelpage__"},queryMappings:new Map([["site",{defaultOperator:"term||wildcard"}],["path",{defaultOperator:"term||wildcard"}]])}}},PanelPage:{entityName:"PanelPage",crud:{save:{ops:["create","update"],plugin:"rest",params:{entityName:"PanelPage"}},...(0,x.isPlatformServer)(t)?{}:{readPrimary:{fallback:!0,ops:["create","update","query"],plugin:"idb_keyval",params:{prefix:"panelpage__"}}},readFallback:{fallback:!0,ops:["query"],plugin:"rest",params:{entityName:"PanelPage",root:r.objectsRootUrl,suffix:".json"}}}},PanelPageState:{entityName:"PanelPageState"}}))(e,a);s.registerMetadataMap(ce),c.registerService("PanelPageState",new mn.NoopDataService("PanelPageState")),c.registerService("PanelPage",new Fg("PanelPage",I,B,V)),c.registerService("PanelPageListItem",new Fg("PanelPageListItem",I,B,V)),n.forEach(Ie=>l.register(Ie)),f.register(((t,r)=>new Gh({id:"panels",title:"Panels",build:()=>{Xc.prototype.writePaneState=(e,n)=>new Promise(a=>{const s=t.getEntityCollectionService("PanelPageState");s.getByKey(e.id).pipe((0,Qi.K)(()=>(0,Re.of)(new pa({id:e.id,panels:[]}))),(0,ye.U)(l=>void 0===l?new pa({id:e.id,panels:[]}):l),(0,ye.U)(l=>{const c=r.serialize(n,"root");let f=new pa({...l,panels:[]});for(let h=0;h<e.panelIndex+1;h++){f.panels.push(h<l.panels.length?new Zl({...l.panels[h],panes:[]}):new Zl);for(let g=0;g<e.paneIndex+1;g++)f.panels[h].panes.push(h===e.panelIndex&&g===e.paneIndex?new ea(h<l.panels.length&&g<l.panels[h].panes.length?{...l.panels[h].panes[g],state:c}:{state:c}):h<l.panels.length&&g<l.panels[h].panes.length?new ea({...l.panels[h].panes[g]}):new ea)}return f}),(0,Ke.w)(l=>s.upsert(l))).subscribe(l=>{a(l)})})}}))(h,g)),c.registerService("PanelPageForm",new Fg("PanelPageForm",I,B,V))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(Gt.CONTENT_PLUGIN),o.\u0275\u0275inject(z_),o.\u0275\u0275inject(pr),o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(Hr),o.\u0275\u0275inject(bd),o.\u0275\u0275inject(li),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(il),o.\u0275\u0275inject(pr),o.\u0275\u0275inject(Td))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[{provide:fo,useClass:fo},{provide:Gt.CONTENT_PLUGIN,useFactory:F4,multi:!0,deps:[fo]},{provide:Gt.CONTENT_PLUGIN,useFactory:R4,multi:!0,deps:[Qc]},{provide:Il,useClass:Yu}],imports:[[x.CommonModule,d.u5,d.UX,Et.Aw.forFeature(uS,N4),Xo.forFeature([O4]),sr.MaterialModule,Yl,qr,e4,r4,$h]]}),t})();class Mg{constructor(r){r&&(this.panelPage=r.panelPage,null!=r.panel&&(this.panel=r.panel),null!=r.pane&&(this.pane=r.pane),null!=r.nested&&"object"==typeof r.nested&&(this.nested=new Mg(r.nested)))}}let dS=(()=>{class t{constructor(e){this.controlContainer=e,this.savable=!0,this.nested=!1,this.dashboard=[],this.layoutSetting=new Qn,this.rowSettings=[],this.ancestory=[]}get gridItems(){return[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-layout-editor-base"]],inputs:{savable:"savable",nested:"nested",editor:"editor",dashboard:"dashboard",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings",editablePaneTpl:"editablePaneTpl",extraActionsAreaTmpl:"extraActionsAreaTmpl",contextsMenuTpl:"contextsMenuTpl",ancestory:"ancestory"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})(),fS=(()=>{class t{constructor(e){this.controlContainer=e,this.displayMainControls=!1,this.displayItemHeader=!1}get columnSettings(){return this.panelPage?this.panelPage.panels.reduce((n,a)=>[...n,new Qn(a.columnSetting)],[]):[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-layout-renderer-base"]],inputs:{panelPage:"panelPage",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",renderPanelTpl:"renderPanelTpl"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})(),B4=(()=>{class t{constructor(){this.settings=[],this.panes=[],this.originMappings=[],this.ancestory=[]}mergeContexts(e){if(void 0!==e||void 0!==this.contexts)return void 0!==e&&void 0!==this.contexts?[...e,...this.contexts]:void 0!==e?e:this.contexts}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-panel-style-renderer-base"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings",contexts:"contexts",ancestory:"ancestory"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})(),hS=(()=>{class t{constructor(e,n){this.es=e,this.panelHandler=n}get panelPageService(){return this.es.getEntityCollectionService("PanelPage")}reducePage(e){return e.panels.reduce((n,a,s)=>this.reducePanels(n,a,s),[])}reducePanels(e,n,a){return[...e,...n.panes.reduce((s,l,c)=>this.reducePanes(s,l,c).map(f=>f.pipe((0,ye.U)(([h,g])=>[a,h,g]))),[])]}reducePanes(e,n,a){return[...e,..."panel"===n.contentPlugin?[this.nestedPage$(n).pipe((0,ye.U)(s=>[a,s]))]:[]]}nestedPage$(e){return console.log("get nested panel page"),e.linkedPageId&&""!==e.linkedPageId?this.getByKey(e.linkedPageId).pipe((0,ee.b)(()=>console.log(`get(${e.linkedPageId})`))):this.getEmbedded(e.settings).pipe((0,ee.b)(()=>console.log("toObject()")))}remapNested(e,n){n.forEach(([a,s,l])=>{e.panels[a].panes[s].nestedPage=l})}getByKey(e){return this.panelPageService.getByKey(e).pipe((0,ye.U)(n=>new di(n)),(0,Ke.w)(n=>Gn(()=>this.reducePage(n).length>0,(0,cn.D)(this.reducePage(n)).pipe((0,ee.b)(a=>this.remapNested(n,a)),(0,ye.U)(()=>n)),(0,Re.of)(n))))}getEmbedded(e){return this.panelHandler.toObject(e).pipe((0,ye.U)(n=>new di(n)),(0,Ke.w)(n=>Gn(()=>this.reducePage(n).length>0,(0,cn.D)(this.reducePage(n)).pipe((0,ee.b)(a=>this.remapNested(n,a)),(0,ye.U)(()=>n)),(0,Re.of)(n))))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(li),o.\u0275\u0275inject(fo))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),j4=(()=>{class t{constructor(e){this.panelHandler=e}rebuildPage(e,n){return new di({...e,panels:this.rebuildPanels(e.panels,[...n])})}rebuildPanels(e,n){return e.filter((a,s)=>this.rebuildCondition(n[0],s)).map(a=>new uo({...a,panes:this.rebuildPanes(a.panes,n.slice(1))}))}rebuildPanes(e,n){return e.filter((a,s)=>this.rebuildCondition(n[0],s)).map(a=>new mi("panel"===a.contentPlugin?{...a,nestedPage:void 0,settings:this.panelHandler.buildSettings(this.rebuildPage(a.nestedPage,n.slice(1)))}:{...a}))}rebuildCondition(e,n){return 0===e||(e>-1?n===e+-1*e:n!==-1*e+e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(fo))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),z4=(()=>{class t{constructor(e){this.panelHandler=e}convertPageToState(e){return(0,Re.of)(new pa).pipe((0,Ke.w)(()=>(0,cn.D)(e.panels.map(n=>this.convertPanelToState(n)))),(0,ye.U)(n=>new pa({id:e.id,panels:n})))}convertPanelToState(e){return(0,Re.of)(new Zl).pipe((0,Ke.w)(()=>(0,cn.D)(e.panes.map(n=>this.convertPaneToState(n)))),(0,ye.U)(n=>new Zl({panes:n})))}convertPaneToState(e){return(0,Re.of)(new ea).pipe((0,Ke.w)(n=>Gn(()=>this.hasNestedPanelPage(e),this.panelHandler.toObject(e.settings).pipe((0,Ke.w)(a=>this.convertPageToState(a)),(0,ye.U)(a=>new ea({state:new Ct.AttributeValue,nestedPage:a}))),(0,Re.of)(n))))}hasNestedPanelPage(e){return"panel"===e.contentPlugin&&(null==e.linkedPageId||""===e.linkedPageId)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(fo))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),U4=(()=>{class t{constructor(e){this.panelsLoaderService=e}walkPageHierarchy({panelPage:e,visitorFunc:n,defaultv:a,ancestory:s}){return new y.y(l=>{const c=e.panels.length,f=[];for(let h=0;h<c;h++){const g=e.panels[h].panes.length;for(let I=0;I<g;I++)f.push(n({pane:e.panels[h].panes[I],panelPage:e,ancestoryWithSelf:[...s,h,I]})),e.panels[h].panes[I].nestedPage&&e.panels[h].panes[I].nestedPage.panels&&0!==e.panels[h].panes[I].nestedPage.panels.length&&f.push(this.walkPageHierarchy({panelPage:e,visitorFunc:n,defaultv:a,ancestory:[...s,h,I]}))}0===f.length?(l.next(a),l.complete()):(0,cn.D)(f).pipe((0,ye.U)(h=>h.reduce((g,I)=>[...g,...I],a)),(0,ee.b)(h=>{l.next(h),l.complete()})).subscribe()})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(hS))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pS=(()=>{class t{constructor(e,n){this.panelsVisitorService=e,this.cpm=n,this.gatherPaneContexts=({pane:a,panelPage:s,ancestoryWithSelf:l})=>this.cpm.getPlugin(a.contentPlugin).pipe((0,Ke.w)(c=>c.handler?c.handler.stateDefinition(a.settings):(0,Re.of)({})),(0,ye.U)(c=>new Jr({name:"panestate-"+l.join("-"),adaptor:"data",plugin:"panestate",data:{id:s?s.id:"",selectionPath:[...l],value:c}})),(0,ye.U)(c=>[c]),(0,hn.q)(1))}allActivePageContexts({panelPage:e,ancestory:n=[]}){return this.panelsVisitorService.walkPageHierarchy({panelPage:e,ancestory:n,visitorFunc:this.gatherPaneContexts,defaultv:[]})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(U4),o.\u0275\u0275inject(Gt.ContentPluginManager))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),V4=(()=>{class t{constructor(e){this.attributeSerializer=e}buildToAncestorySpec({panelPageState:e,ancestory:n}){for(let a=0;a<n[0]+1;a++)if(e.panels.length<a+1&&e.panels.push(new Zl),a===n[0]&&n.length>1)for(let s=0;s<n[1]+1;s++)e.panels[n[0]].panes.length<s+1&&e.panels[n[0]].panes.push(new ea({state:this.attributeSerializer.serialize({},"root")})),s===n[1]&&n.length>2&&(e.panels[n[0]].panes[s].nestedPage||(e.panels[n[0]].panes[s].nestedPage=new pa),this.buildToAncestorySpec({panelPageState:e.panels[n[0]].panes[s].nestedPage,ancestory:n.slice(2)}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Jc=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"style"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mS=(()=>{class t{constructor(e){this.spm=e}alterResolvedPanes({panel:e,resolvedPanes:n,originMappings:a}){return(0,Re.of)(void 0).pipe((0,Ke.w)(()=>e.stylePlugin&&""!==e.stylePlugin?this.spm.getPlugin(e.stylePlugin):(0,Re.of)(void 0)),(0,Ke.w)(s=>s&&s.handler?s.handler.alterResolvedPanes({settings:e.settings,resolvedPanes:n,originMappings:a}):(0,Re.of)({resolvedPanes:n,originMappings:a})))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Jc))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),kd=(()=>{class t{constructor(e,n,a,s){this.panelHandler=e,this.rulesResolver=n,this.inlineContextResolver=a,this.cpm=s}usedContexts(e){return this.panesPlugins(e).pipe((0,Ke.w)(n=>this.dataPanes(e).pipe((0,ye.U)(a=>({plugins:n,dataPanes:a})))),(0,Ke.w)(({plugins:n,dataPanes:a})=>(0,cn.D)(e.reduce((s,l)=>{const c=n.get(l.contentPlugin);return void 0!==c.handler?[...s,c.handler.getBindings(l.settings,"context",new Map([["dataPanes",a]])).pipe((0,ye.U)(f=>f.map(h=>h.id)))]:[...s]},[])).pipe((0,ye.U)(s=>s.reduce((l,c)=>[...l,...c],[])))))}staticPanes(e){return this.cpm.getPlugins(e.reduce((n,a)=>-1===n.findIndex(s=>s===a.contentPlugin)?[...n,a.contentPlugin]:[...n],[])).pipe((0,ye.U)(n=>e.filter(a=>void 0===n.get(a.contentPlugin).handler||!n.get(a.contentPlugin).handler.isDynamic(a.settings))))}dataPanes(e){return this.cpm.getPlugins(e.reduce((n,a)=>-1===n.findIndex(s=>s===a.contentPlugin)?[...n,a.contentPlugin]:[...n],[])).pipe((0,ye.U)(n=>e.filter(a=>void 0!==n.get(a.contentPlugin).handler&&n.get(a.contentPlugin).handler.isData(a.settings))))}panesPlugins(e){return this.cpm.getPlugins(e.reduce((n,a)=>-1===n.findIndex(s=>s===a.contentPlugin)?[...n,a.contentPlugin]:[...n],[]))}resolvePanes({panes:e,contexts:n,resolvedContext:a}){return console.log("resolve panes"),this.panesPlugins(e).pipe((0,Ke.w)(s=>(0,cn.D)(e.reduce((l,c)=>{const f=s.get(c.contentPlugin);return void 0!==f.handler?[...l,f.handler.getBindings(c.settings,"pane").pipe((0,ye.U)(h=>h.map(g=>g.id)))]:[...l,(0,Re.of)([])]},[])))).pipe((0,ye.U)(s=>s.reduce((l,c)=>[...l,...c],[])),(0,Ke.w)(s=>this.panesPlugins(e).pipe((0,ye.U)(l=>[s,l]))),(0,Ke.w)(([s,l])=>(0,cn.D)(e.reduce((c,f)=>{const h=l.get(f.contentPlugin);return void 0!==h.handler&&h.handler.isDynamic(f.settings)?[...c,h.handler.isData(f.settings)&&-1!==s.findIndex(g=>g===f.name)?(0,Re.of)([]):(0,cn.D)([this.staticPanes(e),this.dataPanes(e)]).pipe((0,Ke.w)(([g,I])=>h.handler.buildDynamicItems(f.settings,new Map([...void 0===f.metadata?[]:f.metadata,["tag",ai()],["panes",g],["dataPanes",I],["contexts",void 0!==n?n:[]]])).pipe((0,ye.U)(B=>this.panelHandler.fromPanes(B)),(0,ye.U)(B=>this.panelHandler.wrapPanel(B).panes),(0,hn.q)(1))))]:""===f.name||-1===s.findIndex(g=>g===f.name)?[...c,(0,Re.of)([new mi({...f,contexts:[...n,...f.contexts?f.contexts:[]]})]).pipe((0,Ke.w)(g=>Gn(()=>null!=g[0].rule&&""!==g[0].rule.condition,this.rulesResolver.evaluate(g[0].rule,[...n,...f.contexts?f.contexts:[]]).pipe((0,ye.U)(I=>I?g:[])),(0,Re.of)(g))))]:[...c]},[])).pipe((0,Ke.w)(c=>Gn(()=>0===c.reduce((f,h)=>[...f,...h],[]).length,(0,Re.of)([c,[]]),(0,cn.D)([...c.reduce((f,h)=>[...f,...h.map(g=>g.contexts&&0!==g.contexts.length?this.inlineContextResolver.resolveAll(g.contexts).pipe((0,hn.q)(1)):(0,Re.of)({}).pipe((0,hn.q)(1)))],[])]).pipe((0,ye.U)(f=>[c,f.map(h=>({...h,...a}))])))),(0,ye.U)(([c,f])=>{let h=[],g=[];return c.forEach((I,B)=>{h=[...void 0===h?[]:h,...I.map((V,ce)=>new mi({...V,resolvedContext:f[h.length+ce]}))],g=[...g&&[],...I.map(()=>B)]}),{resolvedPanes:h,originMappings:g}}))))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(fo),o.\u0275\u0275inject(D_),o.\u0275\u0275inject(Cd),o.\u0275\u0275inject(Gt.ContentPluginManager))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Wh extends ln.Plugin{constructor(r){super(r),r&&(this.name=this.id,this.title=r.title,this.editorComponent=r.editorComponent?r.editorComponent:void 0,this.renderComponent=r.renderComponent?r.renderComponent:void 0,r.handler&&(this.handler=r.handler))}}let Lg=(()=>{class t extends o4.o2{constructor(){super(),this.pageChange$=new M.x,this.pageSize=20,this.dataStream=new m.X([]),this.subscription=new Mw.w0,this.lastPage=0,this.paneItems=[]}set panes(e){this.paneItems=[...this.paneItems,...e],this.dataStream.next(this.paneItems)}connect(e){return this.subscription.add(e.viewChange.subscribe(n=>{const a=Math.ceil((n.end+1)/this.pageSize);a>this.lastPage&&(this.lastPage=a,this.pageChange$.next(a))})),this.dataStream}disconnect(e){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const Id=(0,Et.ZF)(uS),Ng=t=>(0,Et.P1)(Id,r=>{const e=r.dataTags.findIndex(n=>n===t);if(e>-1)return r.datasets[e][r.datasets[e].length-1]}),G4=(0,Et.P1)(Id,t=>t.pageInfo),$4=(0,Et.P1)(Id,t=>t.page),H4=(0,Et.P1)(Id,t=>t.selectionPath),gS=(0,Et.P1)(Id,t=>t.formNames),q4=(0,Et.P1)(Id,t=>t.forms),X4=(0,Et.P1)(gS,q4,(t,r,e)=>{const n=t.findIndex(a=>a===e.name);if(n>-1)return r[n]});let Do=(()=>{class t{constructor(e){this.store=e,this.getPageInfo$=this.store.pipe((0,Et.Ys)(G4)),this.getPage$=this.store.pipe((0,Et.Ys)($4)),this.getSelectionPath$=this.store.pipe((0,Et.Ys)(H4)),this.getFormNames$=this.store.pipe((0,Et.Ys)(gS)),this.getForm$=n=>this.store.pipe((0,Et.Ys)(X4,{name:n}))}loadRestData(e,n){this.store.dispatch(aS({tag:e,rest:n}))}setPageInfo(e){this.store.dispatch(B_({info:e}))}setPage(e){this.store.dispatch(j_({page:e}))}setSelectionPath(e){this.store.dispatch(cS({path:e}))}setForm(e,n){this.store.dispatch(lS({name:e,form:n}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Et.yh))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Kh{constructor(r){this.readUserIds=[],r&&(this.title=r.title,this.name=r.name,this.path=r.path,this.cssFile=r.cssFile,r.readUserIds&&(this.readUserIds=r.readUserIds.map(e=>e)))}}class vS{constructor(r){r&&(this.label=r.label,this.name=r.name)}}class yS{constructor(r){r&&(this.label=r.label,this.name=r.name)}}class Es{constructor(r){this.panels=[],r&&(this.id=r.id,this.name=r.name,this.title=r.title,this.derivativeId=r.derivativeId,r.panels&&(this.panels=r.panels.map(e=>new V_(e))))}}class V_{constructor(r){this.panes=[],r&&(this.name=r.name,this.label=r.label,r.panes&&(this.panes=r.panes.map(e=>new G_(e))))}}class G_{constructor(r){this.settings=[],r&&(this.name=r.name,this.label=r.label,this.contentPlugin=r.contentPlugin,r.settings&&(this.settings=r.settings.map(e=>new Ct.AttributeValue(e))))}}class $_{constructor(r){r&&(this.name=r.name,this.field=r.field)}}let H_=(()=>{class t{constructor(e,n,a,s){this.pageBuilderFacade=e,this.panelStateArchitectService=n,this.attributeSerializer=a,this.selectEntities=l=>l.entities,this.selectById=({id:l})=>(0,Et.P1)(this.selectEntities,c=>c[l]?c[l]:void 0),this.panelPageStateService=s.getEntityCollectionService("PanelPageState")}mergeState({state:e,settings:n,plugin:a,ancestory:s}){return(0,Re.of)(e).pipe((0,Ke.w)(l=>this.pageBuilderFacade.getPageInfo$.pipe((0,ye.U)(c=>[l,c]))),(0,Ke.w)(([l,c])=>a.handler.stateDefinition(n).pipe((0,ye.U)(f=>[l,c,f]))),(0,Ke.w)(([l,c,f])=>this.panelPageStateService.collection$.pipe((0,Et.Ys)(this.selectById({id:c.id})),(0,ye.U)(h=>[l,new pa(h||{id:c.id,panels:[]}),f]),(0,hn.q)(1))),(0,ye.U)(([l,c,f])=>{this.panelStateArchitectService.buildToAncestorySpec({panelPageState:c,ancestory:[...s]});const h="$."+s.map((I,B)=>`${(B+1)%2==0?"panes":(0===B?"":"nestedPage.")+"panels"}[${I}]`).join(".");return[l,c,f,(0,Ro.JSONPath)({path:h,json:c})[0]]}),(0,ee.b)(([l,c,f,h])=>{const g=h.state?h.state.root?this.attributeSerializer.deserialize(h.state).root:this.attributeSerializer.deserialize(h.state):{},I=Hh(g&&0!==Object.keys(g).length?g:f,l);h.state=this.attributeSerializer.serialize(I,"root")}),(0,ye.U)(([l,c,f,h])=>({paneState:h,pageState:c})))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Do),o.\u0275\u0275inject(V4),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(li))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),q_=(()=>{class t{constructor(e){this.attributeSerializer=e}serializeForm(e){const n=e.panels.length;let a={};for(let s=0;s<n;s++){const l=e.panels[s].panes.length,c=new Map;for(let f=0;f<l;f++){const h=this.serializeFormPane(e.panels[s].panes[f]);if(e.panels[s].panes[f].name&&null!==e.panels[s].panes[f].name&&(a[e.panels[s].panes[f].name]||e.panels[s].panes[f].name===eS(e.panels[s].panes[f].name))){c.has(e.panels[s].panes[f].name)||c.set(e.panels[s].panes[f].name,void 0!==a[e.panels[s].panes[f].name]?[a[e.panels[s].panes[f].name]]:[]);const g=c.get(e.panels[s].panes[f].name);c.set(e.panels[s].panes[f].name,[...g,h])}else a=e.panels[s].panes[f].name&&""!==e.panels[s].panes[f].name?{...a,[e.panels[s].panes[f].name]:h}:{...a,...h}}Array.from(c).forEach(([f,h])=>a[f]=h)}return a}serializeFormPane(e){if("panel"===e.contentPlugin)return this.serializeForm(new Es(this.attributeSerializer.deserializeAsObject(e.settings,!0)));{const n=this.attributeSerializer.deserializeAsObject(e.settings,!0);return void 0!==n?n.value:void 0}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),W4=(()=>{class t{constructor(e){this.attributeSerializer=e}convertPageToForm({pp:e,pp2:n,ancestory:a,debugPath:s=[]}){return(0,Re.of)(new pa).pipe((0,Ke.w)(()=>(0,cn.D)(e.panels.map((l,c)=>this.convertPanelToForm({panel:l,panel2:n.panels[c],ancestory:a,debugPath:[...s,`convertPageToForm{ index: ${c} }`]})))),(0,ye.U)(l=>new Es({id:e.id,panels:l,name:n.name,title:n.title,derivativeId:""})))}convertPanelToForm({panel:e,panel2:n,ancestory:a,debugPath:s=[]}){return(0,Re.of)(new V_).pipe((0,Ke.w)(()=>(0,cn.D)(e.panes.map((l,c)=>this.convertPaneToForm({pane:l,pane2:n.panes[c],ancestory:a,debugPath:[...s,`convertPanelToForm{ index: ${c} }`]})))),(0,ye.U)(l=>new V_({panes:l,name:n.name,label:n.label})))}convertPaneToForm({pane:e,pane2:n,ancestory:a,debugPath:s=[]}){const l=e.state.attributes.find(c=>"value"===c.name);return(0,Re.of)(new G_({settings:l?[l]:[],name:n.name,label:n.label,contentPlugin:n.contentPlugin})).pipe((0,Ke.w)(c=>Gn(()=>this.hasNestedPanelPage(e),e.nestedPage?this.convertPageToForm({ancestory:a,pp:e.nestedPage,pp2:new di(this.attributeSerializer.deserializeAsObject(n.settings)),debugPath:[...s,"convertPaneToForm"]}).pipe((0,ye.U)(f=>new G_({...c,settings:this.attributeSerializer.serialize(f,"root").attributes}))):(0,Re.of)(c),(0,Re.of)(c))))}hasNestedPanelPage(e){return!!e.nestedPage}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),K4=(()=>{class t{constructor(e,n){this.attributeSerializer=e,this.fb=n}makeFormGroupFromPage(e,n){return(0,Re.of)(this.fb.group({panels:this.fb.array([])})).pipe((0,Ke.w)(a=>(0,cn.D)(e.panels.map((s,l)=>this.makeFormGroupFromPanel(s,n.panels[l]))).pipe((0,ye.U)(s=>({panelGroups:s,pageFormGroup:a})))),(0,ee.b)(({panelGroups:a,pageFormGroup:s})=>{const l=a.length;for(let c=0;c<l;c++)s.get("panels").push(a[c])}),(0,ye.U)(({pageFormGroup:a})=>a))}makeFormGroupFromPanel(e,n){return(0,Re.of)(this.fb.group({name:this.fb.control(e.name),panes:this.fb.array([])})).pipe((0,Ke.w)(a=>(0,cn.D)(e.panes.map((s,l)=>this.makeFormGroupFromPane(s,n.panes[l]))).pipe((0,ye.U)(s=>({paneGroups:s,panelFormGroup:a})))),(0,ee.b)(({paneGroups:a,panelFormGroup:s})=>{const l=a.length;for(let c=0;c<l;c++)s.get("panes").push(a[c])}),(0,ye.U)(({panelFormGroup:a})=>a))}makeFormGroupFromPane(e,n){const a=n?n.settings.find(s=>"value"===s.name):void 0;return(0,Re.of)(this.fb.group({name:this.fb.control(e.name),contentPlugin:this.fb.control(""),settings:this.fb.array([])})).pipe((0,Ke.w)(s=>Gn(()=>this.hasNestedPanelPage(e),this.hasNestedPanelPage(e)?this.makeFormGroupFromPage(e.nestedPage,new Es(this.attributeSerializer.deserializeAsObject(n.settings))).pipe((0,ee.b)(l=>{const c=this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(l.value,"value").attributes[0]);s.get("contentPlugin").setValue("panel"),s.get("settings").push(c)}),(0,ye.U)(()=>s)):(0,Re.of)(s).pipe((0,ee.b)(()=>{if(a){const l=this.attributeSerializer.convertToGroup(a);s.get("settings").push(l)}})),(0,Re.of)(s).pipe((0,ee.b)(()=>{if(a){const l=this.attributeSerializer.convertToGroup(a);s.get("settings").push(l)}})))))}hasNestedPanelPage(e){return!!e.nestedPage}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(d.qu))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),X_=(()=>{class t{makeJsonNode(){return{attributes:{},children:{}}}reduceCss(e,n,a=!0){return e&&e.children?Object.keys(e.children).filter(s=>a?0===s.indexOf(n):0!==s.indexOf(n)).reduce((s,l)=>({...s,children:{...s.children,[a?l.substr(l.indexOf(n)+n.length).trim():l]:e.children[l]}}),this.makeJsonNode()):this.makeJsonNode()}reduceSelector(e,n,a=!0){return e?Object.keys(e).filter(s=>a?0===s.indexOf(n):0!==s.indexOf(n)).reduce((s,l)=>({...s,[a?l.substr(l.indexOf(n)+n.length).trim():l]:e[l]}),{}):{}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Y4(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",1),o.\u0275\u0275listener("click",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext()._remove(a)}),o.\u0275\u0275elementEnd()}}const W_=[[["ngx-dropzone-label"]]],K_=["ngx-dropzone-label"],Q4=["fileInput"];function J4(t,r){1&t&&o.\u0275\u0275projection(0,2,["*ngIf","!_hasPreviews"])}const Z4=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],ez=["ngx-dropzone-preview","*","ngx-dropzone-label"];function tz(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",2),o.\u0275\u0275listener("click",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext()._remove(a)}),o.\u0275\u0275elementEnd()}}function nz(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"video",2),o.\u0275\u0275listener("click",function(n){return n.stopPropagation()}),o.\u0275\u0275element(1,"source",3),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("src",e.sanitizedVideoSrc,o.\u0275\u0275sanitizeUrl)}}function iz(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",4),o.\u0275\u0275listener("click",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext()._remove(a)}),o.\u0275\u0275elementEnd()}}let _S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["ngx-dropzone-label"]]}),t})();function Pd(t){return null!=t&&"false"!=`${t}`}let Y_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(e,n){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"svg"),o.\u0275\u0275element(1,"line",0),o.\u0275\u0275element(2,"line",1),o.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),t})();var Yh=(()=>{return(t=Yh||(Yh={}))[t.BACKSPACE=8]="BACKSPACE",t[t.DELETE=46]="DELETE",Yh;var t})();let Fd=(()=>{class t{constructor(e){this.sanitizer=e,this._removable=!1,this.removed=new o.EventEmitter,this.tabIndex=0}set file(e){this._file=e}get file(){return this._file}get removable(){return this._removable}set removable(e){this._removable=Pd(e)}keyEvent(e){switch(e.keyCode){case Yh.BACKSPACE:case Yh.DELETE:this.remove()}}get hostStyle(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}_remove(e){e.stopPropagation(),this.remove()}remove(){this._removable&&this.removed.next(this.file)}readFile(){var e=this;return ku(function*(){return new Promise((n,a)=>{const s=new FileReader;if(s.onload=l=>{n(l.target.result)},s.onerror=l=>{console.error(`FileReader failed on file ${e.file.name}.`),a(l)},!e.file)return a("No file to read. Please provide a file using the [file] Input property.");s.readAsDataURL(e.file)})})()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(k.H7))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("keyup",function(s){return n.keyEvent(s)}),2&e&&(o.\u0275\u0275hostProperty("tabindex",n.tabIndex),o.\u0275\u0275styleMap(n.hostStyle))},inputs:{file:"file",removable:"removable"},outputs:{removed:"removed"},ngContentSelectors:K_,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(W_),o.\u0275\u0275projection(0),o.\u0275\u0275template(1,Y4,1,0,"ngx-dropzone-remove-badge",0)),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.removable))},directives:[Y_,x.NgIf],styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),t})(),xS=(()=>{class t{parseFileList(e,n,a,s){const l=[],c=[];for(let h=0;h<e.length;h++){const g=e.item(h);this.isAccepted(g,n)?a&&g.size>a?this.rejectFile(c,g,"size"):!s&&l.length>=1?this.rejectFile(c,g,"no_multiple"):l.push(g):this.rejectFile(c,g,"type")}return{addedFiles:l,rejectedFiles:c}}isAccepted(e,n){if("*"===n)return!0;const a=n.split(",").map(f=>f.toLowerCase().trim()),s=e.type.toLowerCase(),l=e.name.toLowerCase();return!!a.find(f=>f.endsWith("/*")?s.split("/")[0]===f.split("/")[0]:f.startsWith(".")?l.endsWith(f):f==s)}rejectFile(e,n,a){const s=n;s.reason=a,e.push(s)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Bg=(()=>{class t{constructor(e){this.service=e,this.change=new o.EventEmitter,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._processDirectoryDrop=!1,this._isHovered=!1}get _hasPreviews(){return!!this._previewChildren.length}get disabled(){return this._disabled}set disabled(e){this._disabled=Pd(e),this._isHovered&&(this._isHovered=!1)}get multiple(){return this._multiple}set multiple(e){this._multiple=Pd(e)}get maxFileSize(){return this._maxFileSize}set maxFileSize(e){this._maxFileSize=function rz(t){return isNaN(parseFloat(t))||isNaN(Number(t))?null:Number(t)}(e)}get expandable(){return this._expandable}set expandable(e){this._expandable=Pd(e)}get disableClick(){return this._disableClick}set disableClick(e){this._disableClick=Pd(e)}get processDirectoryDrop(){return this._processDirectoryDrop}set processDirectoryDrop(e){this._processDirectoryDrop=Pd(e)}_onClick(){this.disableClick||this.showFileSelector()}_onDragOver(e){this.disabled||(this.preventDefault(e),this._isHovered=!0)}_onDragLeave(){this._isHovered=!1}_onDrop(e){if(!this.disabled)if(this.preventDefault(e),this._isHovered=!1,this.processDirectoryDrop&&DataTransferItem.prototype.webkitGetAsEntry){const n=e.dataTransfer.items;if(n.length>0){const a=[],s=[];for(let c=0;c<n.length;c++){const f=n[c].webkitGetAsEntry();f.isFile?a.push(e.dataTransfer.files[c]):f.isDirectory&&s.push(f)}const l=new DataTransfer;if(a.forEach(c=>{l.items.add(c)}),!s.length&&l.items.length&&this.handleFileDrop(l.files),s.length){const c=[];for(const f of s)c.push(this.extractFilesFromDirectory(f));Promise.all(c).then(f=>{f.reduce((h,g)=>[...h,...g]).forEach(h=>{l.items.add(h)}),this.handleFileDrop(l.files)})}}}else this.handleFileDrop(e.dataTransfer.files)}extractFilesFromDirectory(e){function n(s){return a.apply(this,arguments)}function a(){return(a=ku(function*(s){try{return yield new Promise((l,c)=>s.file(l,c))}catch(l){console.log("Error converting a fileEntry to a File: ",l)}})).apply(this,arguments)}return new Promise((s,l)=>{const c=[],f=e.createReader(),h=()=>{f.readEntries(function(){var g=ku(function*(I){if(I.length){const B=I.filter(V=>V.isFile);for(const V of B){const ce=yield n(V);c.push(ce)}h()}else s(c)});return function(I){return g.apply(this,arguments)}}())};h()})}showFileSelector(){this.disabled||this._fileInput.nativeElement.click()}_onFilesSelected(e){this.handleFileDrop(e.target.files),this._fileInput.nativeElement.value="",this.preventDefault(e)}handleFileDrop(e){const n=this.service.parseFileList(e,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:n.addedFiles,rejectedFiles:n.rejectedFiles,source:this})}preventDefault(e){e.preventDefault(),e.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(xS,2))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(e,n,a){if(1&e&&o.\u0275\u0275contentQuery(a,Fd,5),2&e){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n._previewChildren=s)}},viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(Q4,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n._fileInput=a.first)}},hostVars:8,hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("click",function(){return n._onClick()})("dragover",function(s){return n._onDragOver(s)})("dragleave",function(){return n._onDragLeave()})("drop",function(s){return n._onDrop(s)}),2&e&&o.\u0275\u0275classProp("ngx-dz-disabled",n.disabled)("expandable",n.expandable)("unclickable",n.disableClick)("ngx-dz-hovered",n._isHovered)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",processDirectoryDrop:"processDirectoryDrop",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[o.\u0275\u0275ProvidersFeature([xS])],ngContentSelectors:ez,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(Z4),o.\u0275\u0275elementStart(0,"input",0,1),o.\u0275\u0275listener("change",function(s){return n._onFilesSelected(s)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(2,J4,1,0,"ng-content",2),o.\u0275\u0275projection(3),o.\u0275\u0275projection(4,1)),2&e&&(o.\u0275\u0275property("id",n.id)("multiple",n.multiple)("accept",n.accept)("disabled",n.disabled),o.\u0275\u0275attribute("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedBy),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",!n._hasPreviews))},directives:[x.NgIf],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:1px dotted #000;outline:-webkit-focus-ring-color auto 5px}"]}),t})(),bS=(()=>{class t extends Fd{constructor(e){super(e),this.defaultImgLoading="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2IoMjQxLCAyNDIsIDI0Mykgbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvOyIgd2lkdGg9IjIyNHB4IiBoZWlnaHQ9IjIyNHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgo8Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSIxNCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiM4NWEyYjYiIHN0cm9rZS1kYXNoYXJyYXk9IjIxLjk5MTE0ODU3NTEyODU1MiAyMS45OTExNDg1NzUxMjg1NTIiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGR1cj0iMS4xNjI3OTA2OTc2NzQ0MTg0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGtleVRpbWVzPSIwOzEiIHZhbHVlcz0iMCA1MCA1MDszNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iI2JiY2VkZCIgc3Ryb2tlLWRhc2hhcnJheT0iMTUuNzA3OTYzMjY3OTQ4OTY2IDE1LjcwNzk2MzI2Nzk0ODk2NiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE1LjcwNzk2MzI2Nzk0ODk2NiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZHVyPSIxLjE2Mjc5MDY5NzY3NDQxODRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIga2V5VGltZXM9IjA7MSIgdmFsdWVzPSIwIDUwIDUwOy0zNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjwhLS0gW2xkaW9dIGdlbmVyYXRlZCBieSBodHRwczovL2xvYWRpbmcuaW8vIC0tPjwvc3ZnPg==",this.imageSrc=this.sanitizer.bypassSecurityTrustUrl(this.defaultImgLoading)}set file(e){this._file=e,this.renderImage()}get file(){return this._file}ngOnInit(){this.renderImage()}renderImage(){this.readFile().then(e=>setTimeout(()=>this.imageSrc=e)).catch(e=>console.error(e))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(k.H7))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-dropzone-image-preview"]],inputs:{file:"file"},features:[o.\u0275\u0275ProvidersFeature([{provide:Fd,useExisting:t}]),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:K_,decls:3,vars:2,consts:[[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(W_),o.\u0275\u0275element(0,"img",0),o.\u0275\u0275projection(1),o.\u0275\u0275template(2,tz,1,0,"ngx-dropzone-remove-badge",1)),2&e&&(o.\u0275\u0275property("src",n.imageSrc,o.\u0275\u0275sanitizeUrl),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.removable))},directives:[Y_,x.NgIf],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:hover   img[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   img[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;border-radius:5px;opacity:.8}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),t})(),oz=(()=>{class t extends Fd{constructor(e){super(e)}ngOnInit(){this.file?(this.videoSrc=URL.createObjectURL(this.file),this.sanitizedVideoSrc=this.sanitizer.bypassSecurityTrustUrl(this.videoSrc)):console.error("No file to read. Please provide a file using the [file] Input property.")}ngOnDestroy(){URL.revokeObjectURL(this.videoSrc)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(k.H7))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-dropzone-video-preview"]],features:[o.\u0275\u0275ProvidersFeature([{provide:Fd,useExisting:t}]),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:K_,decls:3,vars:2,consts:[["controls","",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["controls","",3,"click"],[3,"src"],[3,"click"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(W_),o.\u0275\u0275template(0,nz,2,1,"video",0),o.\u0275\u0275projection(1),o.\u0275\u0275template(2,iz,1,0,"ngx-dropzone-remove-badge",1)),2&e&&(o.\u0275\u0275property("ngIf",n.sanitizedVideoSrc),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.removable))},directives:[Y_,x.NgIf],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:hover   video[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   video[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   video[_ngcontent-%COMP%]{max-height:100%;border-radius:5px}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),t})(),jg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule]]}),t})();function Sn(t,r,e,n){var l,a=arguments.length,s=a<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,r,e,n);else for(var c=t.length-1;c>=0;c--)(l=t[c])&&(s=(a<3?l(s):a>3?l(r,e,s):l(r,e))||s);return a>3&&s&&Object.defineProperty(r,e,s),s}function Cn(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)}var Ug=function(){function t(r){this.template=r}return t.ctorParameters=function(){return[{type:o.TemplateRef}]},(t=Sn([Cn("design:paramtypes",[o.TemplateRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.TemplateRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","queryOperator",""]]}),t}(),Vg=function(){function t(r){this.template=r}return t.ctorParameters=function(){return[{type:o.TemplateRef}]},(t=Sn([Cn("design:paramtypes",[o.TemplateRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.TemplateRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","queryField",""]]}),t}(),Gg=function(){function t(r){this.template=r}return t.ctorParameters=function(){return[{type:o.TemplateRef}]},(t=Sn([Cn("design:paramtypes",[o.TemplateRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.TemplateRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","queryEntity",""]]}),t}(),$g=function(){function t(r){this.template=r}return t.ctorParameters=function(){return[{type:o.TemplateRef}]},(t=Sn([Cn("design:paramtypes",[o.TemplateRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.TemplateRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","querySwitchGroup",""]]}),t}(),Hg=function(){function t(r){this.template=r}return t.ctorParameters=function(){return[{type:o.TemplateRef}]},(t=Sn([Cn("design:paramtypes",[o.TemplateRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.TemplateRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","queryButtonGroup",""]]}),t}(),SS=function(){function t(r){this.template=r}return Object.defineProperty(t.prototype,"queryInputType",{get:function(){return this._type},set:function(r){!r||(this._type=r)},enumerable:!0,configurable:!0}),t.ctorParameters=function(){return[{type:o.TemplateRef}]},Sn([(0,o.Input)(),Cn("design:type",String),Cn("design:paramtypes",[String])],t.prototype,"queryInputType",null),(t=Sn([Cn("design:paramtypes",[o.TemplateRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.TemplateRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","queryInput",""]],inputs:{queryInputType:"queryInputType"}}),t}(),qg=function(){function t(r){this.template=r}return t.ctorParameters=function(){return[{type:o.TemplateRef}]},(t=Sn([Cn("design:paramtypes",[o.TemplateRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.TemplateRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","queryRemoveButton",""]]}),t}(),Xg=function(){function t(r){this.template=r}return t.ctorParameters=function(){return[{type:o.TemplateRef}]},(t=Sn([Cn("design:paramtypes",[o.TemplateRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.TemplateRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","queryEmptyWarning",""]]}),t}(),Wg=function(){function t(r){this.template=r}return t.ctorParameters=function(){return[{type:o.TemplateRef}]},(t=Sn([Cn("design:paramtypes",[o.TemplateRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.TemplateRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","queryArrowIcon",""]]}),t}(),sz=["treeContainer"];function lz(t,r){if(1&t&&o.\u0275\u0275element(0,"i",0),2&t){var e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",e.getClassNames("arrowIcon"))}}function cz(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function uz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,cz,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.ngIf,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",n.getArrowIconContext())}}function dz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",9),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().toggleCollapse()}),o.\u0275\u0275template(1,uz,2,2,"ng-container",3),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(),a=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngClass",n.getClassNames("arrowIconButton",n.data.collapsed?"collapsed":null)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.getArrowIconTemplate())("ngIfElse",a)}}function fz(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function hz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",0),o.\u0275\u0275template(2,fz,1,0,"ng-container",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.ngIf,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("buttonGroup","rightAlign")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",n.getButtonGroupContext())}}function pz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",11),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).addRuleSet()}),o.\u0275\u0275element(1,"i",0),o.\u0275\u0275text(2," Ruleset "),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",n.getClassNames("button"))("disabled",n.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("addIcon"))}}function mz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"button",11),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).removeRuleSet()}),o.\u0275\u0275element(2,"i",0),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&t){var n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("button","removeButton"))("disabled",n.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("removeIcon"))}}function gz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"button",11),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().addRule()}),o.\u0275\u0275element(2,"i",0),o.\u0275\u0275text(3," Rule "),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(4,pz,3,3,"button",12),o.\u0275\u0275template(5,mz,3,3,"ng-container",13),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",n.getClassNames("buttonGroup","rightAlign")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("button"))("disabled",n.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("addIcon")),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.allowRuleset),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!!n.parentValue&&n.allowRuleset)}}function vz(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function yz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,vz,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.ngIf,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",n.getSwitchGroupContext())}}function _z(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",0),o.\u0275\u0275elementStart(2,"input",14,15),o.\u0275\u0275listener("ngModelChange",function(s){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).data.condition=s}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"label",9),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(e);var s=o.\u0275\u0275reference(3);return o.\u0275\u0275nextContext(2).changeCondition(s.value)}),o.\u0275\u0275text(5,"AND"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div",0),o.\u0275\u0275elementStart(7,"input",16,17),o.\u0275\u0275listener("ngModelChange",function(s){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).data.condition=s}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"label",9),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(e);var s=o.\u0275\u0275reference(8);return o.\u0275\u0275nextContext(2).changeCondition(s.value)}),o.\u0275\u0275text(10,"OR"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",n.getClassNames("switchGroup","transition")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("switchControl")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("switchRadio"))("ngModel",n.data.condition)("disabled",n.disabled),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass",n.getClassNames("switchLabel")),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass",n.getClassNames("switchControl")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("switchRadio"))("ngModel",n.data.condition)("disabled",n.disabled),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass",n.getClassNames("switchLabel"))}}function xz(t,r){if(1&t&&o.\u0275\u0275template(0,_z,11,11,"div",8),2&t){var e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",e.data)}}function bz(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function Cz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",0),o.\u0275\u0275template(2,bz,1,0,"ng-container",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.ngIf,n=o.\u0275\u0275nextContext(3).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",a.getClassNames("buttonGroup","rightAlign")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",a.getRemoveButtonContext(n))}}function wz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"button",11),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(e);var s=o.\u0275\u0275nextContext(3).$implicit,l=o.\u0275\u0275nextContext(2);return l.removeRule(s,l.data)}),o.\u0275\u0275element(2,"i",0),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(5);o.\u0275\u0275property("ngClass",n.getClassNames("removeButtonSize","rightAlign")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("button","removeButton"))("disabled",n.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",n.getClassNames("removeIcon"))}}function Sz(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function Ez(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Sz,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.ngIf,n=o.\u0275\u0275nextContext(4).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",a.getEntityContext(n))}}function Tz(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",27),o.\u0275\u0275template(1,Ez,2,2,"ng-container",3),o.\u0275\u0275elementEnd()),2&t){o.\u0275\u0275nextContext();var e=o.\u0275\u0275reference(6),n=o.\u0275\u0275nextContext(4);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.getEntityTemplate())("ngIfElse",e)}}function Az(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){var e=r.$implicit;o.\u0275\u0275property("ngValue",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.name," ")}}function kz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"select",28),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(3).$implicit.entity=l})("ngModelChange",function(l){o.\u0275\u0275restoreView(e);var c=o.\u0275\u0275nextContext(3),f=c.$implicit,h=c.index,g=o.\u0275\u0275nextContext(2);return g.changeEntity(l,f,h,g.data)}),o.\u0275\u0275template(2,Az,2,2,"option",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(3).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",a.getClassNames("entityControlSize")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",a.getClassNames("entityControl"))("ngModel",n.entity)("disabled",a.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",a.entities)}}function Iz(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function Pz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Iz,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.ngIf,n=o.\u0275\u0275nextContext(3).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",a.getFieldContext(n))}}function Fz(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){var e=r.$implicit;o.\u0275\u0275property("ngValue",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.name," ")}}function Rz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"select",28),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(3).$implicit.field=l})("ngModelChange",function(l){o.\u0275\u0275restoreView(e);var c=o.\u0275\u0275nextContext(3).$implicit;return o.\u0275\u0275nextContext(2).changeField(l,c)}),o.\u0275\u0275template(2,Fz,2,2,"option",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(3).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",a.getClassNames("fieldControlSize")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",a.getClassNames("fieldControl"))("ngModel",n.field)("disabled",a.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",a.getFields(n.entity))}}function Dz(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function Oz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Dz,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.ngIf,n=o.\u0275\u0275nextContext(3).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",a.getOperatorContext(n))}}function Mz(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){var e=r.$implicit;o.\u0275\u0275property("ngValue",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e," ")}}function Lz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"select",28),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(3).$implicit.operator=l})("ngModelChange",function(){o.\u0275\u0275restoreView(e);var l=o.\u0275\u0275nextContext(3).$implicit;return o.\u0275\u0275nextContext(2).changeOperator(l)}),o.\u0275\u0275template(2,Mz,2,2,"option",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(3).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",a.getClassNames("operatorControlSize")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",a.getClassNames("operatorControl"))("ngModel",n.operator)("disabled",a.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",a.getOperators(n.field))}}function Nz(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function Bz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Nz,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.ngIf,n=o.\u0275\u0275nextContext(3).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",a.getInputContext(n))}}function jz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",39),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(4).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",a.getClassNames("inputControl"))("ngModel",n.value)("disabled",a.disabled)}}function zz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",40),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(4).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",a.getClassNames("inputControl"))("ngModel",n.value)("disabled",a.disabled)}}function Uz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",41),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(4).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",a.getClassNames("inputControl"))("ngModel",n.value)("disabled",a.disabled)}}function Vz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",42),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(4).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",a.getClassNames("inputControl"))("ngModel",n.value)("disabled",a.disabled)}}function Gz(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){var e=r.$implicit;o.\u0275\u0275property("ngValue",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.name," ")}}function $z(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"select",28),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275template(1,Gz,2,2,"option",29),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(4).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",a.getClassNames("inputControl"))("ngModel",n.value)("disabled",a.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",a.getOptions(n.field))}}function Hz(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){var e=r.$implicit;o.\u0275\u0275property("ngValue",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.name," ")}}function qz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"select",43),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275template(2,Hz,2,2,"option",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&t){var n=o.\u0275\u0275nextContext(4).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",a.getClassNames("inputControl"))("ngModel",n.value)("disabled",a.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",a.getOptions(n.field))}}function Xz(t,r){if(1&t){var e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",44),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&t){var n=o.\u0275\u0275nextContext(4).$implicit,a=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",a.getClassNames("inputControl"))("ngModel",n.value)("disabled",a.disabled)}}function Wz(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",31),o.\u0275\u0275template(1,jz,1,3,"input",32),o.\u0275\u0275template(2,zz,1,3,"input",33),o.\u0275\u0275template(3,Uz,1,3,"input",34),o.\u0275\u0275template(4,Vz,1,3,"input",35),o.\u0275\u0275template(5,$z,2,4,"select",36),o.\u0275\u0275template(6,qz,3,4,"ng-container",37),o.\u0275\u0275template(7,Xz,1,3,"input",38),o.\u0275\u0275elementEnd()),2&t){var e=o.\u0275\u0275nextContext(3).$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",n.getClassNames("inputControlSize"))("ngSwitch",n.getInputType(e.field,e.operator)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","string"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","number"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","date"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","time"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","category"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","multiselect"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","boolean")}}function Kz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Cz,3,3,"ng-container",3),o.\u0275\u0275template(2,wz,3,4,"ng-template",null,21,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(4,Tz,2,2,"div",22),o.\u0275\u0275template(5,kz,3,5,"ng-template",null,23,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(7,Pz,2,2,"ng-container",3),o.\u0275\u0275template(8,Rz,3,5,"ng-template",null,24,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(10,Oz,2,2,"ng-container",3),o.\u0275\u0275template(11,Lz,3,5,"ng-template",null,25,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(13,Bz,2,2,"ng-container",3),o.\u0275\u0275template(14,Wz,8,9,"ng-template",null,26,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementContainerEnd()),2&t){var e=o.\u0275\u0275reference(3),n=o.\u0275\u0275reference(9),a=o.\u0275\u0275reference(12),s=o.\u0275\u0275reference(15),l=o.\u0275\u0275nextContext(2).$implicit,c=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",c.getRemoveButtonTemplate())("ngIfElse",e),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",(null==c.entities?null:c.entities.length)>0),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",c.getFieldTemplate())("ngIfElse",n),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",c.getOperatorTemplate())("ngIfElse",a),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",c.findTemplateForRule(l))("ngIfElse",s)}}function Yz(t,r){if(1&t&&o.\u0275\u0275element(0,"query-builder",45),2&t){var e=o.\u0275\u0275nextContext(2).$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("data",e)("disabled",n.disabled)("parentTouchedCallback",n.parentTouchedCallback||n.onTouchedCallback)("parentChangeCallback",n.parentChangeCallback||n.onChangeCallback)("parentInputTemplates",n.parentInputTemplates||n.inputTemplates)("parentOperatorTemplate",n.parentOperatorTemplate||n.operatorTemplate)("parentFieldTemplate",n.parentFieldTemplate||n.fieldTemplate)("parentEntityTemplate",n.parentEntityTemplate||n.entityTemplate)("parentSwitchGroupTemplate",n.parentSwitchGroupTemplate||n.switchGroupTemplate)("parentButtonGroupTemplate",n.parentButtonGroupTemplate||n.buttonGroupTemplate)("parentRemoveButtonTemplate",n.parentRemoveButtonTemplate||n.removeButtonTemplate)("parentEmptyWarningTemplate",n.parentEmptyWarningTemplate||n.emptyWarningTemplate)("parentArrowIconTemplate",n.parentArrowIconTemplate||n.arrowIconTemplate)("parentValue",n.data)("classNames",n.classNames)("config",n.config)("allowRuleset",n.allowRuleset)("allowCollapse",n.allowCollapse)("emptyMessage",n.emptyMessage)("operatorMap",n.operatorMap)}}function Qz(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function Jz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Qz,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&t){var e=o.\u0275\u0275nextContext().ngIf,n=o.\u0275\u0275nextContext(4);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",n.getEmptyWarningContext())}}function Zz(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Jz,2,2,"ng-container",13),o.\u0275\u0275elementContainerEnd()),2&t){var e=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.invalid)}}function eU(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"p",0),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){var e=o.\u0275\u0275nextContext(5);o.\u0275\u0275property("ngClass",e.getClassNames("emptyWarning")),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.emptyMessage," ")}}function tU(t,r){if(1&t&&o.\u0275\u0275template(0,eU,2,2,"p",8),2&t){var e=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275property("ngIf",e.invalid)}}function nU(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"li",0),o.\u0275\u0275template(2,Kz,16,9,"ng-container",13),o.\u0275\u0275template(3,Yz,1,20,"query-builder",19),o.\u0275\u0275template(4,Zz,2,1,"ng-container",3),o.\u0275\u0275template(5,tU,1,1,"ng-template",null,20,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.ngIf,n=o.\u0275\u0275reference(6),a=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",a.getQueryItemClassName(e)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.ruleset),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.ruleset),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",a.getEmptyWarningTemplate())("ngIfElse",n)}}var iU=function(t,r){return{ruleset:t,invalid:r}};function rU(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,nU,7,5,"ng-container",13),o.\u0275\u0275elementContainerEnd()),2&t){var e=r.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pureFunction2(1,iU,!!e.rules,!n.config.allowEmptyRulesets&&e.rules&&0===e.rules.length))}}function oU(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"ul",0),o.\u0275\u0275template(1,rU,2,4,"ng-container",18),o.\u0275\u0275elementEnd()),2&t){var e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",e.getClassNames("tree")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.data.rules)}}var aU={provide:d.JU,useExisting:(0,o.forwardRef)(function(){return J_}),multi:!0},sU={provide:d.Cf,useExisting:(0,o.forwardRef)(function(){return J_}),multi:!0},J_=function(){function t(r){var e=this;this.changeDetectorRef=r,this.defaultClassNames={arrowIconButton:"q-arrow-icon-button",arrowIcon:"q-icon q-arrow-icon",removeIcon:"q-icon q-remove-icon",addIcon:"q-icon q-add-icon",button:"q-button",buttonGroup:"q-button-group",removeButton:"q-remove-button",switchGroup:"q-switch-group",switchLabel:"q-switch-label",switchRadio:"q-switch-radio",rightAlign:"q-right-align",transition:"q-transition",collapsed:"q-collapsed",treeContainer:"q-tree-container",tree:"q-tree",row:"q-row",connector:"q-connector",rule:"q-rule",ruleSet:"q-ruleset",invalidRuleSet:"q-invalid-ruleset",emptyWarning:"q-empty-warning",fieldControl:"q-field-control",fieldControlSize:"q-control-size",entityControl:"q-entity-control",entityControlSize:"q-control-size",operatorControl:"q-operator-control",operatorControlSize:"q-control-size",inputControl:"q-input-control",inputControlSize:"q-control-size"},this.defaultOperatorMap={string:["=","!=","contains","like"],number:["=","!=",">",">=","<","<="],time:["=","!=",">",">=","<","<="],date:["=","!=",">",">=","<","<="],category:["=","!=","in","not in"],boolean:["="]},this.data={condition:"and",rules:[]},this.allowRuleset=!0,this.allowCollapse=!1,this.emptyMessage="A ruleset cannot be empty. Please add a rule or remove it all together.",this.config={fields:{}},this.persistValueOnFieldChange=!1,this.defaultTemplateTypes=["string","number","time","date","category","boolean","multiselect"],this.defaultPersistValueTypes=["string","number","time","date","boolean"],this.defaultEmptyList=[],this.inputContextCache=new Map,this.operatorContextCache=new Map,this.fieldContextCache=new Map,this.entityContextCache=new Map,this.removeButtonContextCache=new Map,this.getDisabledState=function(){return e.disabled}}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(r){var e=this.config,n=typeof e;if("object"!==n)throw new Error("Expected 'config' must be a valid object, got "+n+" instead.");this.fields=Object.keys(e.fields).map(function(a){var s=e.fields[a];return s.value=s.value||a,s}),this.entities=e.entities?Object.keys(e.entities).map(function(a){var s=e.entities[a];return s.value=s.value||a,s}):null,this.operatorsCache={}},t.prototype.validate=function(r){var e={},n=[],a=!1;return!this.config.allowEmptyRulesets&&this.checkEmptyRuleInRuleset(this.data)&&(e.empty="Empty rulesets are not allowed.",a=!0),this.validateRulesInRuleset(this.data,n),n.length&&(e.rules=n,a=!0),a?e:null},Object.defineProperty(t.prototype,"value",{get:function(){return this.data},set:function(r){this.data=r||{condition:"and",rules:[]},this.handleDataChange()},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(r){this.value=r},t.prototype.registerOnChange=function(r){var e=this;this.onChangeCallback=function(){return r(e.data)}},t.prototype.registerOnTouched=function(r){var e=this;this.onTouchedCallback=function(){return r(e.data)}},t.prototype.setDisabledState=function(r){this.disabled=r,this.changeDetectorRef.detectChanges()},t.prototype.findTemplateForRule=function(r){var e=this.getInputType(r.field,r.operator);if(e){var n=this.findQueryInput(e);return n?n.template:(-1===this.defaultTemplateTypes.indexOf(e)&&console.warn("Could not find template for field with type: "+e),null)}},t.prototype.findQueryInput=function(r){return(this.parentInputTemplates||this.inputTemplates).find(function(n){return n.queryInputType===r})},t.prototype.getOperators=function(r){if(this.operatorsCache[r])return this.operatorsCache[r];var e=this.defaultEmptyList,n=this.config.fields[r];if(this.config.getOperators)return this.config.getOperators(r,n);var a=n.type;return n&&n.operators?e=n.operators:a?(0===(e=this.operatorMap&&this.operatorMap[a]||this.defaultOperatorMap[a]||this.defaultEmptyList).length&&console.warn("No operators found for field '"+r+"' with type "+n.type+". Please define an 'operators' property on the field or use the 'operatorMap' binding to fix this."),n.nullable&&(e=e.concat(["is null","is not null"]))):console.warn("No 'type' property found on field: '"+r+"'"),this.operatorsCache[r]=e,e},t.prototype.getFields=function(r){return this.entities&&r?this.fields.filter(function(e){return e&&e.entity===r}):this.fields},t.prototype.getInputType=function(r,e){if(this.config.getInputType)return this.config.getInputType(r,e);if(!this.config.fields[r])throw new Error("No configuration for field '"+r+"' could be found! Please add it to config.fields.");var n=this.config.fields[r].type;switch(e){case"is null":case"is not null":return null;case"in":case"not in":return"category"===n||"boolean"===n?"multiselect":n;default:return n}},t.prototype.getOptions=function(r){return this.config.getOptions?this.config.getOptions(r):this.config.fields[r].options||this.defaultEmptyList},t.prototype.getClassNames=function(){for(var r=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a=this.classNames?this.classNames:this.defaultClassNames,s=e.map(function(l){return a[l]||r.defaultClassNames[l]}).filter(function(l){return!!l});return s.length?s.join(" "):null},t.prototype.getDefaultField=function(r){if(r){if(void 0!==r.defaultField)return this.getDefaultValue(r.defaultField);var e=this.fields.filter(function(n){return n&&n.entity===r.value});return e&&e.length?e[0]:(console.warn("No fields found for entity '"+r.name+"'. A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)}return null},t.prototype.getDefaultOperator=function(r){if(r&&void 0!==r.defaultOperator)return this.getDefaultValue(r.defaultOperator);var e=this.getOperators(r.value);return e&&e.length?e[0]:(console.warn("No operators found for field '"+r.value+"'. A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)},t.prototype.addRule=function(r){if(!this.disabled){if(r=r||this.data,this.config.addRule)this.config.addRule(r);else{var e=this.fields[0];r.rules=r.rules.concat([{field:e.value,operator:this.getDefaultOperator(e),value:this.getDefaultValue(e.defaultValue),entity:e.entity}])}this.handleTouched(),this.handleDataChange()}},t.prototype.removeRule=function(r,e){this.disabled||(e=e||this.data,this.config.removeRule?this.config.removeRule(r,e):e.rules=e.rules.filter(function(n){return n!==r}),this.inputContextCache.delete(r),this.operatorContextCache.delete(r),this.fieldContextCache.delete(r),this.entityContextCache.delete(r),this.removeButtonContextCache.delete(r),this.handleTouched(),this.handleDataChange())},t.prototype.addRuleSet=function(r){this.disabled||(r=r||this.data,this.config.addRuleSet?this.config.addRuleSet(r):r.rules=r.rules.concat([{condition:"and",rules:[]}]),this.handleTouched(),this.handleDataChange())},t.prototype.removeRuleSet=function(r,e){this.disabled||(r=r||this.data,e=e||this.parentValue,this.config.removeRuleSet?this.config.removeRuleSet(r,e):e.rules=e.rules.filter(function(n){return n!==r}),this.handleTouched(),this.handleDataChange())},t.prototype.transitionEnd=function(r){this.treeContainer.nativeElement.style.maxHeight=null},t.prototype.toggleCollapse=function(){var r=this;this.computedTreeContainerHeight(),setTimeout(function(){r.data.collapsed=!r.data.collapsed},100)},t.prototype.computedTreeContainerHeight=function(){var r=this.treeContainer.nativeElement;r&&r.firstElementChild&&(r.style.maxHeight=r.firstElementChild.clientHeight+8+"px")},t.prototype.changeCondition=function(r){this.disabled||(this.data.condition=r,this.handleTouched(),this.handleDataChange())},t.prototype.changeOperator=function(r){this.disabled||(r.value=this.config.coerceValueForOperator?this.config.coerceValueForOperator(r.operator,r.value,r):this.coerceValueForOperator(r.operator,r.value,r),this.handleTouched(),this.handleDataChange())},t.prototype.coerceValueForOperator=function(r,e,n){return"multiselect"!==this.getInputType(n.field,r)||Array.isArray(e)?e:[e]},t.prototype.changeInput=function(){this.disabled||(this.handleTouched(),this.handleDataChange())},t.prototype.changeField=function(r,e){if(!this.disabled){var n=this.inputContextCache.get(e),s=this.config.fields[r],l=this.calculateFieldChangeValue(n&&n.field,s,e.value);void 0!==l?e.value=l:delete e.value,e.operator=this.getDefaultOperator(s),this.inputContextCache.delete(e),this.operatorContextCache.delete(e),this.fieldContextCache.delete(e),this.entityContextCache.delete(e),this.getInputContext(e),this.getFieldContext(e),this.getOperatorContext(e),this.getEntityContext(e),this.handleTouched(),this.handleDataChange()}},t.prototype.changeEntity=function(r,e,n,a){if(!this.disabled){var s=n,l=a,c=this.entities.find(function(h){return h.value===r}),f=this.getDefaultField(c);l||(s=(l=this.data).rules.findIndex(function(h){return h===e})),e.field=f.value,l.rules[s]=e,f?this.changeField(f.value,e):(this.handleTouched(),this.handleDataChange())}},t.prototype.getDefaultValue=function(r){return"function"==typeof r?r():r},t.prototype.getOperatorTemplate=function(){var r=this.parentOperatorTemplate||this.operatorTemplate;return r?r.template:null},t.prototype.getFieldTemplate=function(){var r=this.parentFieldTemplate||this.fieldTemplate;return r?r.template:null},t.prototype.getEntityTemplate=function(){var r=this.parentEntityTemplate||this.entityTemplate;return r?r.template:null},t.prototype.getArrowIconTemplate=function(){var r=this.parentArrowIconTemplate||this.arrowIconTemplate;return r?r.template:null},t.prototype.getButtonGroupTemplate=function(){var r=this.parentButtonGroupTemplate||this.buttonGroupTemplate;return r?r.template:null},t.prototype.getSwitchGroupTemplate=function(){var r=this.parentSwitchGroupTemplate||this.switchGroupTemplate;return r?r.template:null},t.prototype.getRemoveButtonTemplate=function(){var r=this.parentRemoveButtonTemplate||this.removeButtonTemplate;return r?r.template:null},t.prototype.getEmptyWarningTemplate=function(){var r=this.parentEmptyWarningTemplate||this.emptyWarningTemplate;return r?r.template:null},t.prototype.getQueryItemClassName=function(r){var e=this.getClassNames("row","connector","transition");return e+=" "+this.getClassNames(r.ruleset?"ruleSet":"rule"),r.invalid&&(e+=" "+this.getClassNames("invalidRuleSet")),e},t.prototype.getButtonGroupContext=function(){return this.buttonGroupContext||(this.buttonGroupContext={addRule:this.addRule.bind(this),addRuleSet:this.allowRuleset&&this.addRuleSet.bind(this),removeRuleSet:this.allowRuleset&&this.parentValue&&this.removeRuleSet.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}),this.buttonGroupContext},t.prototype.getRemoveButtonContext=function(r){return this.removeButtonContextCache.has(r)||this.removeButtonContextCache.set(r,{removeRule:this.removeRule.bind(this),getDisabledState:this.getDisabledState,$implicit:r}),this.removeButtonContextCache.get(r)},t.prototype.getFieldContext=function(r){return this.fieldContextCache.has(r)||this.fieldContextCache.set(r,{onChange:this.changeField.bind(this),getFields:this.getFields.bind(this),getDisabledState:this.getDisabledState,fields:this.fields,$implicit:r}),this.fieldContextCache.get(r)},t.prototype.getEntityContext=function(r){return this.entityContextCache.has(r)||this.entityContextCache.set(r,{onChange:this.changeEntity.bind(this),getDisabledState:this.getDisabledState,entities:this.entities,$implicit:r}),this.entityContextCache.get(r)},t.prototype.getSwitchGroupContext=function(){return{onChange:this.changeCondition.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}},t.prototype.getArrowIconContext=function(){return{getDisabledState:this.getDisabledState,$implicit:this.data}},t.prototype.getEmptyWarningContext=function(){return{getDisabledState:this.getDisabledState,message:this.emptyMessage,$implicit:this.data}},t.prototype.getOperatorContext=function(r){return this.operatorContextCache.has(r)||this.operatorContextCache.set(r,{onChange:this.changeOperator.bind(this),getDisabledState:this.getDisabledState,operators:this.getOperators(r.field),$implicit:r}),this.operatorContextCache.get(r)},t.prototype.getInputContext=function(r){return this.inputContextCache.has(r)||this.inputContextCache.set(r,{onChange:this.changeInput.bind(this),getDisabledState:this.getDisabledState,options:this.getOptions(r.field),field:this.config.fields[r.field],$implicit:r}),this.inputContextCache.get(r)},t.prototype.calculateFieldChangeValue=function(r,e,n){return null!=this.config.calculateFieldChangeValue?this.config.calculateFieldChangeValue(r,e,n):this.persistValueOnFieldChange&&null!=r&&null!=e&&r.type===e.type&&-1!==this.defaultPersistValueTypes.indexOf(r.type)?n:e&&void 0!==e.defaultValue?this.getDefaultValue(e.defaultValue):void 0},t.prototype.checkEmptyRuleInRuleset=function(r){var e=this;return!r||!r.rules||0===r.rules.length||r.rules.some(function(n){return!!n.rules&&e.checkEmptyRuleInRuleset(n)})},t.prototype.validateRulesInRuleset=function(r,e){var n=this;r&&r.rules&&r.rules.length>0&&r.rules.forEach(function(a){if(a.rules)return n.validateRulesInRuleset(a,e);if(a.field){var s=n.config.fields[a.field];if(s&&s.validator&&s.validator.apply){var l=s.validator(a,r);null!=l&&e.push(l)}}})},t.prototype.handleDataChange=function(){this.changeDetectorRef.markForCheck(),this.onChangeCallback&&this.onChangeCallback(),this.parentChangeCallback&&this.parentChangeCallback()},t.prototype.handleTouched=function(){this.onTouchedCallback&&this.onTouchedCallback(),this.parentTouchedCallback&&this.parentTouchedCallback()},t.ctorParameters=function(){return[{type:o.ChangeDetectorRef}]},Sn([(0,o.Input)(),Cn("design:type",Boolean)],t.prototype,"disabled",void 0),Sn([(0,o.Input)(),Cn("design:type",Object)],t.prototype,"data",void 0),Sn([(0,o.Input)(),Cn("design:type",Boolean)],t.prototype,"allowRuleset",void 0),Sn([(0,o.Input)(),Cn("design:type",Boolean)],t.prototype,"allowCollapse",void 0),Sn([(0,o.Input)(),Cn("design:type",String)],t.prototype,"emptyMessage",void 0),Sn([(0,o.Input)(),Cn("design:type",Object)],t.prototype,"classNames",void 0),Sn([(0,o.Input)(),Cn("design:type",Object)],t.prototype,"operatorMap",void 0),Sn([(0,o.Input)(),Cn("design:type",Object)],t.prototype,"parentValue",void 0),Sn([(0,o.Input)(),Cn("design:type",Object)],t.prototype,"config",void 0),Sn([(0,o.Input)(),Cn("design:type",Wg)],t.prototype,"parentArrowIconTemplate",void 0),Sn([(0,o.Input)(),Cn("design:type",o.QueryList)],t.prototype,"parentInputTemplates",void 0),Sn([(0,o.Input)(),Cn("design:type",Ug)],t.prototype,"parentOperatorTemplate",void 0),Sn([(0,o.Input)(),Cn("design:type",Vg)],t.prototype,"parentFieldTemplate",void 0),Sn([(0,o.Input)(),Cn("design:type",Gg)],t.prototype,"parentEntityTemplate",void 0),Sn([(0,o.Input)(),Cn("design:type",$g)],t.prototype,"parentSwitchGroupTemplate",void 0),Sn([(0,o.Input)(),Cn("design:type",Hg)],t.prototype,"parentButtonGroupTemplate",void 0),Sn([(0,o.Input)(),Cn("design:type",qg)],t.prototype,"parentRemoveButtonTemplate",void 0),Sn([(0,o.Input)(),Cn("design:type",Xg)],t.prototype,"parentEmptyWarningTemplate",void 0),Sn([(0,o.Input)(),Cn("design:type",Function)],t.prototype,"parentChangeCallback",void 0),Sn([(0,o.Input)(),Cn("design:type",Function)],t.prototype,"parentTouchedCallback",void 0),Sn([(0,o.Input)(),Cn("design:type",Boolean)],t.prototype,"persistValueOnFieldChange",void 0),Sn([(0,o.ViewChild)("treeContainer",{static:!0}),Cn("design:type",o.ElementRef)],t.prototype,"treeContainer",void 0),Sn([(0,o.ContentChild)(Hg),Cn("design:type",Hg)],t.prototype,"buttonGroupTemplate",void 0),Sn([(0,o.ContentChild)($g),Cn("design:type",$g)],t.prototype,"switchGroupTemplate",void 0),Sn([(0,o.ContentChild)(Vg),Cn("design:type",Vg)],t.prototype,"fieldTemplate",void 0),Sn([(0,o.ContentChild)(Gg),Cn("design:type",Gg)],t.prototype,"entityTemplate",void 0),Sn([(0,o.ContentChild)(Ug),Cn("design:type",Ug)],t.prototype,"operatorTemplate",void 0),Sn([(0,o.ContentChild)(qg),Cn("design:type",qg)],t.prototype,"removeButtonTemplate",void 0),Sn([(0,o.ContentChild)(Xg),Cn("design:type",Xg)],t.prototype,"emptyWarningTemplate",void 0),Sn([(0,o.ContentChildren)(SS),Cn("design:type",o.QueryList)],t.prototype,"inputTemplates",void 0),Sn([(0,o.ContentChild)(Wg),Cn("design:type",Wg)],t.prototype,"arrowIconTemplate",void 0),Sn([(0,o.Input)(),Cn("design:type",Object),Cn("design:paramtypes",[Object])],t.prototype,"value",null),(t=Sn([Cn("design:paramtypes",[o.ChangeDetectorRef])],t)).\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ChangeDetectorRef))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["query-builder"]],contentQueries:function(e,n,a){var s;1&e&&(o.\u0275\u0275contentQuery(a,Hg,5),o.\u0275\u0275contentQuery(a,$g,5),o.\u0275\u0275contentQuery(a,Vg,5),o.\u0275\u0275contentQuery(a,Gg,5),o.\u0275\u0275contentQuery(a,Ug,5),o.\u0275\u0275contentQuery(a,qg,5),o.\u0275\u0275contentQuery(a,Xg,5),o.\u0275\u0275contentQuery(a,Wg,5),o.\u0275\u0275contentQuery(a,SS,4)),2&e&&(o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.buttonGroupTemplate=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.switchGroupTemplate=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.fieldTemplate=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.entityTemplate=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.operatorTemplate=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.removeButtonTemplate=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.emptyWarningTemplate=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.arrowIconTemplate=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.inputTemplates=s))},viewQuery:function(e,n){var a;1&e&&o.\u0275\u0275viewQuery(sz,7),2&e&&o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.treeContainer=a.first)},inputs:{data:"data",allowRuleset:"allowRuleset",allowCollapse:"allowCollapse",emptyMessage:"emptyMessage",config:"config",persistValueOnFieldChange:"persistValueOnFieldChange",value:"value",disabled:"disabled",classNames:"classNames",operatorMap:"operatorMap",parentValue:"parentValue",parentArrowIconTemplate:"parentArrowIconTemplate",parentInputTemplates:"parentInputTemplates",parentOperatorTemplate:"parentOperatorTemplate",parentFieldTemplate:"parentFieldTemplate",parentEntityTemplate:"parentEntityTemplate",parentSwitchGroupTemplate:"parentSwitchGroupTemplate",parentButtonGroupTemplate:"parentButtonGroupTemplate",parentRemoveButtonTemplate:"parentRemoveButtonTemplate",parentEmptyWarningTemplate:"parentEmptyWarningTemplate",parentChangeCallback:"parentChangeCallback",parentTouchedCallback:"parentTouchedCallback"},features:[o.\u0275\u0275ProvidersFeature([aU,sU]),o.\u0275\u0275NgOnChangesFeature],decls:13,vars:8,consts:[[3,"ngClass"],["defaultArrowIcon",""],[3,"ngClass","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultButtonGroup",""],["defaultSwitchGroup",""],[3,"ngClass","transitionend"],["treeContainer",""],[3,"ngClass",4,"ngIf"],[3,"ngClass","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"ngClass","disabled","click"],["type","button",3,"ngClass","disabled","click",4,"ngIf"],[4,"ngIf"],["type","radio","value","and",3,"ngClass","ngModel","disabled","ngModelChange"],["andOption",""],["type","radio","value","or",3,"ngClass","ngModel","disabled","ngModelChange"],["orOption",""],[4,"ngFor","ngForOf"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap",4,"ngIf"],["defaultEmptyWarning",""],["defaultRemoveButton",""],["class","q-inline-block-display",4,"ngIf"],["defaultEntity",""],["defaultField",""],["defaultOperator",""],["defaultInput",""],[1,"q-inline-block-display"],[3,"ngClass","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"ngClass","ngSwitch"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange"],["multiple","",3,"ngClass","ngModel","disabled","ngModelChange"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap"]],template:function(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,lz,1,1,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(3,dz,2,3,"a",2),o.\u0275\u0275template(4,hz,3,3,"ng-container",3),o.\u0275\u0275template(5,gz,6,6,"ng-template",null,4,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(7,yz,2,2,"ng-container",3),o.\u0275\u0275template(8,xz,1,1,"ng-template",null,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div",6,7),o.\u0275\u0275listener("transitionend",function(c){return n.transitionEnd(c)}),o.\u0275\u0275template(12,oU,2,2,"ul",8),o.\u0275\u0275elementEnd()),2&e){var a=o.\u0275\u0275reference(6),s=o.\u0275\u0275reference(9);o.\u0275\u0275property("ngClass",n.getClassNames("switchRow")),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",n.allowCollapse),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.getButtonGroupTemplate())("ngIfElse",a),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",n.getSwitchGroupTemplate())("ngIfElse",s),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngClass",n.getClassNames("treeContainer",n.data.collapsed?"collapsed":null)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.data&&n.data.rules)}},directives:[x.NgClass,x.NgIf,x.NgTemplateOutlet,d._,d.Fj,d.JJ,d.On,x.NgForOf,d.EJ,d.YN,d.Kr,x.NgSwitch,x.NgSwitchCase,d.wV,d.K7,d.Wl,t],styles:["@charset \"UTF-8\";[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .q-icon[_ngcontent-%COMP%]{font-style:normal;font-size:12px}[_nghost-%COMP%]   .q-remove-icon[_ngcontent-%COMP%]::before{content:'\u274c'}[_nghost-%COMP%]   .q-arrow-icon-button[_ngcontent-%COMP%]{float:left;margin:4px 6px 4px 0;-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-transition:transform .25s linear;transition:transform .25s linear;cursor:pointer}[_nghost-%COMP%]   .q-arrow-icon-button.q-collapsed[_ngcontent-%COMP%]{-webkit-transform:rotate(0);transform:rotate(0)}[_nghost-%COMP%]   .q-arrow-icon[_ngcontent-%COMP%]::before{content:'\u25b6'}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]{color:#555}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]::before{content:'\u2795'}[_nghost-%COMP%]   .q-remove-button[_ngcontent-%COMP%]{color:#b3415d;width:31px}[_nghost-%COMP%]   .q-button-group[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-switch-group[_ngcontent-%COMP%]{font-family:\"Lucida Grande\",Tahoma,Verdana,sans-serif;overflow:hidden}[_nghost-%COMP%]   .q-right-align[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]{margin-left:8px;padding:0 8px;background-color:#fff}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:disabled{display:none}[_nghost-%COMP%]   .q-control-size[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding-right:10px}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]{display:inline-block;padding:5px 8px;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;width:auto}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]:disabled{border-color:transparent}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:not([type=checkbox]), [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]{min-height:32px;-webkit-appearance:none}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]{float:left;margin-bottom:0;font-size:14px;line-height:30px;font-weight:400;text-align:center;text-shadow:none;border:1px solid rgba(0,0,0,.2);box-sizing:border-box}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f0f0f0}[_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]{background-color:#e4e4e4;padding:0 8px}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]{position:absolute;clip:rect(0,0,0,0);height:1px;width:1px;border:0;overflow:hidden}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked + .q-switch-label[_ngcontent-%COMP%]{border:1px solid #619ed7;background:#fff;color:#3176b3}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:disabled + .q-switch-label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked:disabled + .q-switch-label[_ngcontent-%COMP%]{display:initial;color:initial;cursor:default;border-color:transparent}[_nghost-%COMP%]   .q-invalid-ruleset[_ngcontent-%COMP%]{border:1px solid rgba(179,65,93,.5)!important;background:rgba(179,65,93,.1)!important}[_nghost-%COMP%]   .q-empty-warning[_ngcontent-%COMP%]{color:#8d252e;text-align:center}[_nghost-%COMP%]   .q-ruleset[_ngcontent-%COMP%]{border:1px solid #ccc}[_nghost-%COMP%]   .q-rule[_ngcontent-%COMP%]{border:1px solid #ccc;background:#fff}[_nghost-%COMP%]   .q-transition[_ngcontent-%COMP%]{-webkit-transition:.1s ease-in-out;transition:.1s ease-in-out}[_nghost-%COMP%]   .q-tree-container[_ngcontent-%COMP%]{width:100%;overflow:hidden;-webkit-transition:max-height .25s ease-in;transition:max-height .25s ease-in}[_nghost-%COMP%]   .q-tree-container.q-collapsed[_ngcontent-%COMP%]{max-height:0!important}[_nghost-%COMP%]   .q-tree[_ngcontent-%COMP%]{list-style:none;margin:4px 0 2px}[_nghost-%COMP%]   .q-row[_ngcontent-%COMP%]{padding:6px 8px;margin-top:6px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::before{top:-5px;border-width:0 0 2px 2px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::after{border-width:0 0 0 2px;top:50%}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::after, [_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::before{content:'';left:-12px;border-color:#ccc;border-style:solid;width:9px;height:calc(50% + 6px);position:absolute}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]:last-child::after{content:none}[_nghost-%COMP%]   .q-inline-block-display[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}"]}),t}(),lU=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.u5]]}),t}();function cU(t,r){if(1&t&&o.\u0275\u0275element(0,"div",3),2&t){const e=r.index,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngStyle",n.gridRenderer.getGridColumnStyle(e))}}function uU(t,r){if(1&t&&o.\u0275\u0275element(0,"div",4),2&t){const e=r.index,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngStyle",n.gridRenderer.getGridRowStyle(e))}}const ES=["*"];function dU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",8),o.\u0275\u0275listener("mousedown",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)})("touchstart",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)}),o.\u0275\u0275elementEnd()}}function fU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275listener("mousedown",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)})("touchstart",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)}),o.\u0275\u0275elementEnd()}}function hU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",10),o.\u0275\u0275listener("mousedown",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)})("touchstart",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)}),o.\u0275\u0275elementEnd()}}function pU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",11),o.\u0275\u0275listener("mousedown",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)})("touchstart",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)}),o.\u0275\u0275elementEnd()}}function mU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",12),o.\u0275\u0275listener("mousedown",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)})("touchstart",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)}),o.\u0275\u0275elementEnd()}}function gU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",13),o.\u0275\u0275listener("mousedown",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)})("touchstart",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)}),o.\u0275\u0275elementEnd()}}function vU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",14),o.\u0275\u0275listener("mousedown",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)})("touchstart",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)}),o.\u0275\u0275elementEnd()}}function yU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",15),o.\u0275\u0275listener("mousedown",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)})("touchstart",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().resize.dragStartDelay(a)}),o.\u0275\u0275elementEnd()}}var Nn=(()=>{return(t=Nn||(Nn={})).Fit="fit",t.ScrollVertical="scrollVertical",t.ScrollHorizontal="scrollHorizontal",t.Fixed="fixed",t.VerticalFixed="verticalFixed",t.HorizontalFixed="horizontalFixed",Nn;var t})(),Qh=(()=>{return(t=Qh||(Qh={})).Always="always",t.OnDragAndResize="onDrag&Resize",t.None="none",Qh;var t})(),gi=(()=>{return(t=gi||(gi={})).None="none",t.CompactUp="compactUp",t.CompactLeft="compactLeft",t.CompactUpAndLeft="compactUp&Left",t.CompactLeftAndUp="compactLeft&Up",t.CompactRight="compactRight",t.CompactUpAndRight="compactUp&Right",t.CompactRightAndUp="compactRight&Up",t.CompactDown="compactDown",t.CompactDownAndLeft="compactDown&Left",t.CompactLeftAndDown="compactLeft&Down",t.CompactDownAndRight="compactDown&Right",t.CompactRightAndDown="compactRight&Down",gi;var t})(),vr=(()=>{return(t=vr||(vr={})).LTR="ltr",t.RTL="rtl",vr;var t})();class _U{constructor(r){this.gridster=r}destroy(){delete this.gridster}checkCompact(){this.gridster.$options.compactType!==gi.None&&(this.gridster.$options.compactType===gi.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===gi.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===gi.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===gi.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===gi.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===gi.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===gi.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===gi.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===gi.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===gi.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===gi.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===gi.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(r){this.gridster.$options.compactType!==gi.None&&(this.gridster.$options.compactType===gi.CompactUp?this.moveTillCollision(r,"y",-1):this.gridster.$options.compactType===gi.CompactLeft?this.moveTillCollision(r,"x",-1):this.gridster.$options.compactType===gi.CompactUpAndLeft?(this.moveTillCollision(r,"y",-1),this.moveTillCollision(r,"x",-1)):this.gridster.$options.compactType===gi.CompactLeftAndUp?(this.moveTillCollision(r,"x",-1),this.moveTillCollision(r,"y",-1)):this.gridster.$options.compactType===gi.CompactUpAndRight?(this.moveTillCollision(r,"y",-1),this.moveTillCollision(r,"x",1)):this.gridster.$options.compactType===gi.CompactDown?this.moveTillCollision(r,"y",1):this.gridster.$options.compactType===gi.CompactDownAndLeft?(this.moveTillCollision(r,"y",1),this.moveTillCollision(r,"x",-1)):this.gridster.$options.compactType===gi.CompactLeftAndDown?(this.moveTillCollision(r,"x",-1),this.moveTillCollision(r,"y",1)):this.gridster.$options.compactType===gi.CompactDownAndRight?(this.moveTillCollision(r,"y",1),this.moveTillCollision(r,"x",1)):this.gridster.$options.compactType===gi.CompactRightAndDown&&(this.moveTillCollision(r,"x",1),this.moveTillCollision(r,"y",1)))}checkCompactMovement(r,e){let n=!1;this.gridster.grid.forEach(a=>{!1!==a.$item.compactEnabled&&this.moveTillCollision(a.$item,r,e)&&(n=!0,a.item[r]=a.$item[r],a.itemChanged())}),n&&this.checkCompact()}moveTillCollision(r,e,n){return r[e]+=n,this.gridster.checkCollision(r)?(r[e]-=n,!1):(this.moveTillCollision(r,e,n),!0)}}const xU={gridType:Nn.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:gi.None,mobileBreakpoint:640,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:Qh.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,disableAutoPositionOnConflict:!1,dirType:vr.LTR};class Ui{static merge(r,e,n){for(const a in e)void 0!==e[a]&&n.hasOwnProperty(a)&&(r[a]="object"==typeof e[a]?Ui.merge(r[a],e[a],n[a]):e[a]);return r}static debounce(r,e){let n;return function(){const a=this,s=arguments,l=()=>{n=void 0,r.apply(a,s)};clearTimeout(n),n=setTimeout(l,e)}}static checkTouchEvent(r){void 0===r.clientX&&r.touches&&(r.touches&&r.touches.length?(r.clientX=r.touches[0].clientX,r.clientY=r.touches[0].clientY):r.changedTouches&&r.changedTouches.length&&(r.clientX=r.changedTouches[0].clientX,r.clientY=r.changedTouches[0].clientY))}static checkContentClassForEvent(r,e){if(r.$options.draggable.ignoreContent){if(!Ui.checkDragHandleClass(e.target,e.currentTarget,r.$options.draggable.dragHandleClass,r.$options.draggable.ignoreContentClass))return!0}else if(Ui.checkContentClass(e.target,e.currentTarget,r.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(r,e){return Ui.checkContentClass(e.target,e.currentTarget,r.$options.draggable.ignoreContentClass)||Ui.checkContentClass(e.target,e.currentTarget,r.$options.draggable.dragHandleClass)}static checkDragHandleClass(r,e,n,a){if(!r||r===e)return!1;if(r.hasAttribute("class")){const s=r.getAttribute("class").split(" ");if(s.indexOf(n)>-1)return!0;if(s.indexOf(a)>-1)return!1}return Ui.checkDragHandleClass(r.parentNode,e,n,a)}static checkContentClass(r,e,n){return!(!r||r===e)&&(!!(r.hasAttribute("class")&&r.getAttribute("class").split(" ").indexOf(n)>-1)||Ui.checkContentClass(r.parentNode,e,n))}static compareItems(r,e){return r.y>e.y?-1:r.y<e.y?1:r.x>e.x?-1:1}}class bU{constructor(r){this.gridster=r}destroy(){delete this.initialItem,delete this.gridster.movingItem,this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridster,this.emptyCellExit&&(this.emptyCellExit(),this.emptyCellExit=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.emptyCellClick&&this.gridster.options.emptyCellClickCallback?(this.emptyCellClick=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb.bind(this)),this.emptyCellClickTouch=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb.bind(this))):!this.gridster.$options.enableEmptyCellClick&&this.emptyCellClick&&this.emptyCellClickTouch&&(this.emptyCellClick(),this.emptyCellClickTouch(),this.emptyCellClick=null,this.emptyCellClickTouch=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.emptyCellContextMenu&&this.gridster.options.emptyCellContextMenuCallback?this.emptyCellContextMenu=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb.bind(this)):!this.gridster.$options.enableEmptyCellContextMenu&&this.emptyCellContextMenu&&(this.emptyCellContextMenu(),this.emptyCellContextMenu=null),this.gridster.$options.enableEmptyCellDrop&&!this.emptyCellDrop&&this.gridster.options.emptyCellDropCallback?(this.emptyCellDrop=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop.bind(this)),this.gridster.zone.runOutsideAngular(()=>{this.emptyCellMove=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver.bind(this))}),this.emptyCellExit=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.emptyCellDrop&&this.emptyCellMove&&this.emptyCellExit&&(this.emptyCellDrop(),this.emptyCellMove(),this.emptyCellExit(),this.emptyCellMove=null,this.emptyCellDrop=null,this.emptyCellExit=null),this.gridster.$options.enableEmptyCellDrag&&!this.emptyCellDrag&&this.gridster.options.emptyCellDragCallback?(this.emptyCellDrag=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown.bind(this)),this.emptyCellDragTouch=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown.bind(this))):!this.gridster.$options.enableEmptyCellDrag&&this.emptyCellDrag&&this.emptyCellDragTouch&&(this.emptyCellDrag(),this.emptyCellDragTouch(),this.emptyCellDrag=null,this.emptyCellDragTouch=null)}emptyCellClickCb(r){if(!this.gridster||this.gridster.movingItem||Ui.checkContentClassForEmptyCellClickEvent(this.gridster,r))return;const e=this.getValidItemFromEvent(r);!e||(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(r,e),this.gridster.cdRef.markForCheck())}emptyCellContextMenuCb(r){if(this.gridster.movingItem||Ui.checkContentClassForEmptyCellClickEvent(this.gridster,r))return;r.preventDefault(),r.stopPropagation();const e=this.getValidItemFromEvent(r);!e||(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(r,e),this.gridster.cdRef.markForCheck())}emptyCellDragDrop(r){const e=this.getValidItemFromEvent(r);!e||(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(r,e),this.gridster.cdRef.markForCheck())}emptyCellDragOver(r){r.preventDefault(),r.stopPropagation();const e=this.getValidItemFromEvent(r);e?(r.dataTransfer&&(r.dataTransfer.dropEffect="move"),this.gridster.movingItem=e):(r.dataTransfer&&(r.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()}emptyCellMouseDown(r){if(Ui.checkContentClassForEmptyCellClickEvent(this.gridster,r))return;r.preventDefault(),r.stopPropagation();const e=this.getValidItemFromEvent(r);!e||1!==r.buttons&&!(r instanceof TouchEvent)||(this.initialItem=e,this.gridster.movingItem=e,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.emptyCellMMove=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove.bind(this)),this.emptyCellMMoveTouch=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove.bind(this))}),this.emptyCellUp=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp.bind(this)),this.emptyCellUpTouch=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp.bind(this)))}emptyCellMouseMove(r){r.preventDefault(),r.stopPropagation();const e=this.getValidItemFromEvent(r,this.initialItem);!e||(this.gridster.movingItem=e,this.gridster.previewStyle())}emptyCellMouseUp(r){this.emptyCellMMove(),this.emptyCellMMoveTouch(),this.emptyCellUp(),this.emptyCellUpTouch();const e=this.getValidItemFromEvent(r,this.initialItem);e&&(this.gridster.movingItem=e),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(r,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}getPixelsX(r,e){const n=this.gridster.options.scale;return n?(r.clientX-e.left)/n+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():r.clientX+this.gridster.el.scrollLeft-e.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(r,e){const n=this.gridster.options.scale;return n?(r.clientY-e.top)/n+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():r.clientY+this.gridster.el.scrollTop-e.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(r,e){r.preventDefault(),r.stopPropagation(),Ui.checkTouchEvent(r);const n=this.gridster.el.getBoundingClientRect(),a=this.getPixelsX(r,n),s=this.getPixelsY(r,n),l={x:this.gridster.pixelsToPositionX(a,Math.floor,!0),y:this.gridster.pixelsToPositionY(s,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(e&&(l.cols=Math.min(Math.abs(e.x-l.x)+1,this.gridster.$options.emptyCellDragMaxCols),l.rows=Math.min(Math.abs(e.y-l.y)+1,this.gridster.$options.emptyCellDragMaxRows),e.x<l.x?l.x=e.x:e.x-l.x>this.gridster.$options.emptyCellDragMaxCols-1&&(l.x=this.gridster.movingItem?this.gridster.movingItem.x:0),e.y<l.y?l.y=e.y:e.y-l.y>this.gridster.$options.emptyCellDragMaxRows-1&&(l.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(l))return l}}class CU{constructor(r){this.gridster=r}destroy(){delete this.gridster}updateItem(r,e,n){if(this.gridster.mobile)this.clearCellPosition(n,r),n.setStyle(r,"height",this.gridster.$options.keepFixedHeightInMobile?(e.rows-1)*this.gridster.$options.margin+e.rows*this.gridster.$options.fixedRowHeight+"px":e.rows*this.gridster.curWidth/e.cols+"px"),n.setStyle(r,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),n.setStyle(r,"margin-bottom",this.gridster.$options.margin+"px"),n.setStyle(r,vr.LTR?"margin-right":"margin-left","");else{const a=Math.round(this.gridster.curColWidth*e.x),s=Math.round(this.gridster.curRowHeight*e.y),l=this.gridster.curColWidth*e.cols-this.gridster.$options.margin,c=this.gridster.curRowHeight*e.rows-this.gridster.$options.margin;this.setCellPosition(n,r,a,s),n.setStyle(r,"width",l+"px"),n.setStyle(r,"height",c+"px");let f=null,h=null;this.gridster.$options.outerMargin&&(this.gridster.rows===e.rows+e.y&&(f=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===e.cols+e.x&&(h=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),n.setStyle(r,"margin-bottom",f),n.setStyle(r,vr.LTR?"margin-right":"margin-left",h)}}updateGridster(){let r="",e="",n="",a="";if(this.gridster.$options.gridType===Nn.Fit)r=Nn.Fit,e=Nn.ScrollVertical,n=Nn.ScrollHorizontal,a=Nn.Fixed;else if(this.gridster.$options.gridType===Nn.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,r=Nn.ScrollVertical,e=Nn.Fit,n=Nn.ScrollHorizontal,a=Nn.Fixed;else if(this.gridster.$options.gridType===Nn.ScrollHorizontal){const s=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*(s>=1?s:s+1),r=Nn.ScrollHorizontal,e=Nn.Fit,n=Nn.ScrollVertical,a=Nn.Fixed}else this.gridster.$options.gridType===Nn.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),r=Nn.Fixed,e=Nn.Fit,n=Nn.ScrollVertical,a=Nn.ScrollHorizontal):this.gridster.$options.gridType===Nn.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),r=Nn.ScrollVertical,e=Nn.Fit,n=Nn.ScrollHorizontal,a=Nn.Fixed):this.gridster.$options.gridType===Nn.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),r=Nn.ScrollHorizontal,e=Nn.Fit,n=Nn.ScrollVertical,a=Nn.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==Nn.Fit?this.gridster.renderer.removeClass(this.gridster.el,r):this.gridster.renderer.addClass(this.gridster.el,r),this.gridster.renderer.removeClass(this.gridster.el,e),this.gridster.renderer.removeClass(this.gridster.el,n),this.gridster.renderer.removeClass(this.gridster.el,a)}getGridColumnStyle(r){return{...this.getLeftPosition(this.gridster.curColWidth*r),width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"}}getGridRowStyle(r){return{...this.getTopPosition(this.gridster.curRowHeight*r),width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"}}getLeftPosition(r){const e=this.gridster.$options.dirType===vr.RTL?-r:r;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+e+"px)"}:{left:this.getLeftMargin()+e+"px"}}getTopPosition(r){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+r+"px)"}:{top:this.getTopMargin()+r+"px"}}clearCellPosition(r,e){this.gridster.$options.useTransformPositioning?r.setStyle(e,"transform",""):(r.setStyle(e,"top",""),r.setStyle(e,"left",""))}setCellPosition(r,e,n,a){const s=this.gridster.$options.dirType===vr.RTL?-n:n;this.gridster.$options.useTransformPositioning?r.setStyle(e,"transform","translate3d("+s+"px, "+a+"px, 0)"):(r.setStyle(e,"left",this.getLeftMargin()+s+"px"),r.setStyle(e,"top",this.getTopMargin()+a+"px"))}getLeftMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}let Jh,Zc,ma,Zh,rl,ep,tp,np,ip,wU=(()=>{class t{constructor(e,n){this.renderer=n,this.el=e.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(e=>this.previewStyle(e))}ngOnDestroy(){this.sub.unsubscribe(),delete this.el}previewStyle(e){e?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,e,this.renderer)):this.renderer.setStyle(this.el,"display","")}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(e,n){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),t})(),Z_=(()=>{class t{constructor(e,n,a,s){this.renderer=n,this.cdRef=a,this.zone=s,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new o.EventEmitter,this.el=e.nativeElement,this.$options=JSON.parse(JSON.stringify(xU)),this.calculateLayoutDebounce=Ui.debounce(this.calculateLayout.bind(this),0),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new bU(this),this.compact=new _U(this),this.gridRenderer=new CU(this)}static checkCollisionTwoItemsForSwaping(e,n){return e.x+(1===e.cols?0:1)<n.x+n.cols&&e.x+e.cols>n.x+(1===n.cols?0:1)&&e.y+(1===e.rows?0:1)<n.y+n.rows&&e.y+e.rows>n.y+(1===n.rows?0:1)}checkCollisionTwoItems(e,n){if(!(e.x<n.x+n.cols&&e.x+e.cols>n.x&&e.y<n.y+n.rows&&e.y+e.rows>n.y))return!1;if(!this.$options.allowMultiLayer)return!0;const s=this.$options.defaultLayerIndex;return(void 0===e.layerIndex?s:e.layerIndex)===(void 0===n.layerIndex?s:n.layerIndex)}ngOnInit(){this.options.initCallback&&this.options.initCallback(this)}ngOnChanges(e){e.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged.bind(this),resize:this.onResize.bind(this),getNextPossiblePosition:this.getNextPossiblePosition.bind(this),getFirstPossiblePosition:this.getFirstPossiblePosition.bind(this),getLastPossiblePosition:this.getLastPossiblePosition.bind(this),getItemComponent:n=>this.getItemComponent(n)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let e,n;"fit"!==this.$options.gridType||this.mobile?(n=this.el.clientWidth,e=this.el.clientHeight):(n=this.el.offsetWidth,e=this.el.offsetHeight),(n!==this.curWidth||e!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=Ui.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize.bind(this)),this.emptyCell.updateOptions()}optionsChanged(){this.setOptions();let n,e=this.grid.length-1;for(;e>=0;e--)n=this.grid[e],n.updateOptions();this.calculateLayout()}ngOnDestroy(){this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),delete this.emptyCell,this.compact.destroy(),delete this.compact}onResize(){this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())}checkIfToResize(){const e=this.el.clientWidth,n=this.el.offsetWidth,a=this.el.scrollWidth,s=this.el.clientHeight,l=this.el.offsetHeight,c=this.el.scrollHeight;return!(e<n&&c>l&&c-l<n-e||s<l&&a>n&&a-n<l-s)}setGridSize(){const e=this.el;let n,a;this.$options.setGridSize||this.$options.gridType===Nn.Fit&&!this.mobile?(n=e.offsetWidth,a=e.offsetHeight):(n=e.clientWidth,a=e.clientHeight),this.curWidth=n,this.curHeight=a}setGridDimensions(){this.setGridSize(),!this.mobile&&this.$options.mobileBreakpoint>this.curWidth?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&this.$options.mobileBreakpoint<this.curWidth&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let s,e=this.$options.minRows,n=this.$options.minCols,a=this.grid.length-1;for(;a>=0;a--)s=this.grid[a],s.notPlaced||(e=Math.max(e,s.$item.y+s.$item.rows),n=Math.max(n,s.$item.x+s.$item.cols));e+=this.$options.addEmptyRowsCount,(this.columns!==n||this.rows!==e)&&(this.columns=n,this.rows=e,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let a=-this.$options.margin;null!==this.$options.outerMarginLeft?(a+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(a+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(a+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(a+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-a)/this.columns;let s=-this.$options.margin;null!==this.$options.outerMarginTop?(s+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(s+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(s+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(s+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-s)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let n,e=this.grid.length-1;for(;e>=0;e--)n=this.grid[e],n.setSize(),n.drag.toggle(),n.resize.toggle();setTimeout(this.resize.bind(this),100)}updateGrid(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=t.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=t.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(e){void 0===e.$item.cols&&(e.$item.cols=this.$options.defaultItemCols,e.item.cols=e.$item.cols,e.itemChanged()),void 0===e.$item.rows&&(e.$item.rows=this.$options.defaultItemRows,e.item.rows=e.$item.rows,e.itemChanged()),-1===e.$item.x||-1===e.$item.y?this.autoPositionItem(e):this.checkCollision(e.$item)&&(this.$options.disableWarnings||(e.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(e.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?e.notPlaced=!0:this.autoPositionItem(e)),this.grid.push(e),this.calculateLayoutDebounce()}removeItem(e){this.grid.splice(this.grid.indexOf(e),1),this.calculateLayoutDebounce(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(e.item,e)}checkCollision(e){let n=!1;if(this.options.itemValidateCallback&&(n=!this.options.itemValidateCallback(e)),!n&&this.checkGridCollision(e)&&(n=!0),!n){const a=this.findItemWithItem(e);a&&(n=a)}return n}checkGridCollision(e){const ce=e.cols*e.rows;return!(e.y>-1&&e.x>-1&&e.cols+e.x<=this.$options.maxCols&&e.rows+e.y<=this.$options.maxRows&&e.cols<=(void 0===e.maxItemCols?this.$options.maxItemCols:e.maxItemCols)&&e.cols>=(void 0===e.minItemCols?this.$options.minItemCols:e.minItemCols)&&e.rows<=(void 0===e.maxItemRows?this.$options.maxItemRows:e.maxItemRows)&&e.rows>=(void 0===e.minItemRows?this.$options.minItemRows:e.minItemRows)&&(void 0===e.minItemArea?this.$options.minItemArea:e.minItemArea)<=ce&&(void 0===e.maxItemArea?this.$options.maxItemArea:e.maxItemArea)>=ce)}findItemWithItem(e){let a,n=0;for(;n<this.grid.length;n++)if(a=this.grid[n],a.$item!==e&&this.checkCollisionTwoItems(a.$item,e))return a;return!1}findItemsWithItem(e){const n=[];let s,a=0;for(;a<this.grid.length;a++)s=this.grid[a],s.$item!==e&&this.checkCollisionTwoItems(s.$item,e)&&n.push(s);return n}autoPositionItem(e){this.getNextPossiblePosition(e.$item)?(e.notPlaced=!1,e.item.x=e.$item.x,e.item.y=e.$item.y,e.itemChanged()):(e.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(e.item,["cols","rows","x","y"])))}getNextPossiblePosition(e,n={}){-1===e.cols&&(e.cols=this.$options.defaultItemCols),-1===e.rows&&(e.rows=this.$options.defaultItemRows),this.setGridDimensions();let s,a=n.y||0;for(;a<this.rows;a++)for(e.y=a,s=n.x||0;s<this.columns;s++)if(e.x=s,!this.checkCollision(e))return!0;const l=this.$options.maxRows>=this.rows+e.rows;return this.rows<=this.columns&&l||!(this.$options.maxCols>=this.columns+e.cols)?!!l&&(e.y=this.rows,e.x=0,!0):(e.x=this.columns,e.y=0,!0)}getFirstPossiblePosition(e){const n=Object.assign({},e);return this.getNextPossiblePosition(n),n}getLastPossiblePosition(e){let n={y:0,x:0};n=this.grid.reduce((s,l)=>{const c={y:l.$item.y+l.$item.rows-1,x:l.$item.x+l.$item.cols-1};return 1===Ui.compareItems(s,c)?c:s},n);const a=Object.assign({},e);return this.getNextPossiblePosition(a,n),a}pixelsToPositionX(e,n,a){const s=n(e/this.curColWidth);return a?s:Math.max(s,0)}pixelsToPositionY(e,n,a){const s=n(e/this.curRowHeight);return a?s:Math.max(s,0)}positionXToPixels(e){return e*this.curColWidth}positionYToPixels(e){return e*this.curRowHeight}getItemComponent(e){return this.grid.find(n=>n.item===e)}checkCollisionForSwaping(e){let n=!1;if(this.options.itemValidateCallback&&(n=!this.options.itemValidateCallback(e)),!n&&this.checkGridCollision(e)&&(n=!0),!n){const a=this.findItemWithItemForSwapping(e);a&&(n=a)}return n}findItemWithItemForSwapping(e){let a,n=this.grid.length-1;for(;n>-1;n--)if(a=this.grid[n],a.$item!==e&&t.checkCollisionTwoItemsForSwaping(a.$item,e))return a;return!1}previewStyle(e=!1){this.movingItem?(this.compact&&e&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(e,n,a){const s=Math.max(e,Math.floor(n/a));return s<0?0:Number.isFinite(s)?Math.floor(s):0}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.NgZone))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["gridster"]],inputs:{options:"options"},features:[o.\u0275\u0275NgOnChangesFeature],ngContentSelectors:ES,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,cU,1,1,"div",0),o.\u0275\u0275template(1,uU,1,1,"div",1),o.\u0275\u0275projection(2),o.\u0275\u0275element(3,"gridster-preview",2)),2&e&&(o.\u0275\u0275property("ngForOf",n.gridColumns),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.gridRows),o.\u0275\u0275advance(2),o.\u0275\u0275property("gridRenderer",n.gridRenderer)("previewStyle$",n.previewStyle$))},directives:[wU,x.NgForOf,x.NgStyle],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),t})();class TS{constructor(r){this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=r,this.gridster=r.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){delete this.gridster,delete this.gridsterItem}pushItems(r,e){if(this.gridster.$options.pushItems&&!e){this.pushedItemsOrder=[],this.iteration=0;const n=this.push(this.gridsterItem,r);return n||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],n}return!1}restoreTempItems(){let r=this.pushedItemsTemp.length-1;for(;r>-1;r--)this.removeFromTempPushed(this.pushedItemsTemp[r])}restoreItems(){let r=0;const e=this.pushedItems.length;let n;for(;r<e;r++)n=this.pushedItems[r],n.$item.x=n.item.x||0,n.$item.y=n.item.y||0,n.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let r=0;const e=this.pushedItems.length;let n;for(;r<e;r++)n=this.pushedItems[r],n.checkItemChanges(n.$item,n.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let r=this.pushedItems.length-1,e=!1;for(;r>-1;r--)this.checkPushedItem(this.pushedItems[r],r)&&(e=!0);e&&this.checkPushBack()}push(r,e){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(r.$item)||""===e)return!1;const n=this.gridster.findItemsWithItem(r.$item),a=e===this.fromNorth||e===this.fromWest;n.sort((h,g)=>a?g.$item.y-h.$item.y||g.$item.x-h.$item.x:h.$item.y-g.$item.y||h.$item.x-g.$item.x);let l,s=0,c=!0;const f=[];for(;s<n.length;s++){if(l=n[s],l===this.gridsterItem)continue;if(!l.canBeDragged()){c=!1;break}const h=this.pushedItemsTemp.indexOf(l);if(h>-1&&this.pushedItemsTempPath[h].length>10){c=!1;break}if(this.tryPattern[e][0].call(this,l,r))this.pushedItemsOrder.push(l),f.push(l);else if(this.tryPattern[e][1].call(this,l,r))this.pushedItemsOrder.push(l),f.push(l);else if(this.tryPattern[e][2].call(this,l,r))this.pushedItemsOrder.push(l),f.push(l);else{if(!this.tryPattern[e][3].call(this,l,r)){c=!1;break}this.pushedItemsOrder.push(l),f.push(l)}}if(!c&&(s=this.pushedItemsOrder.lastIndexOf(f[0]),s>-1)){let h=this.pushedItemsOrder.length-1;for(;h>=s;h--)l=this.pushedItemsOrder[h],this.pushedItemsOrder.pop(),this.removeFromTempPushed(l),this.removeFromPushedItem(l)}return this.iteration++,c}trySouth(r,e){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(r),r.$item.y=e.$item.y+e.$item.rows,this.push(r,this.fromNorth)?(r.setSize(),this.addToPushed(r),!0):(this.removeFromTempPushed(r),!1))}tryNorth(r,e){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(r),r.$item.y=e.$item.y-r.$item.rows,this.push(r,this.fromSouth)?(r.setSize(),this.addToPushed(r),!0):(this.removeFromTempPushed(r),!1))}tryEast(r,e){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(r),r.$item.x=e.$item.x+e.$item.cols,this.push(r,this.fromWest)?(r.setSize(),this.addToPushed(r),!0):(this.removeFromTempPushed(r),!1))}tryWest(r,e){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(r),r.$item.x=e.$item.x-r.$item.cols,this.push(r,this.fromEast)?(r.setSize(),this.addToPushed(r),!0):(this.removeFromTempPushed(r),!1))}addToTempPushed(r){let e=this.pushedItemsTemp.indexOf(r);-1===e&&(e=this.pushedItemsTemp.push(r)-1,this.pushedItemsTempPath[e]=[]),this.pushedItemsTempPath[e].push({x:r.$item.x,y:r.$item.y})}removeFromTempPushed(r){const e=this.pushedItemsTemp.indexOf(r),n=this.pushedItemsTempPath[e].pop();!n||(r.$item.x=n.x,r.$item.y=n.y,r.setSize(),this.pushedItemsTempPath[e].length||(this.pushedItemsTemp.splice(e,1),this.pushedItemsTempPath.splice(e,1)))}addToPushed(r){if(this.pushedItems.indexOf(r)<0)this.pushedItems.push(r),this.pushedItemsPath.push([{x:r.item.x||0,y:r.item.y||0},{x:r.$item.x,y:r.$item.y}]);else{const e=this.pushedItems.indexOf(r);this.pushedItemsPath[e].push({x:r.$item.x,y:r.$item.y})}}removeFromPushed(r){r>-1&&(this.pushedItems.splice(r,1),this.pushedItemsPath.splice(r,1))}removeFromPushedItem(r){const e=this.pushedItems.indexOf(r);e>-1&&(this.pushedItemsPath[e].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1)))}checkPushedItem(r,e){const n=this.pushedItemsPath[e];let s,l,c,a=n.length-2,f=!1;for(;a>-1;a--)s=n[a],l=r.$item.x,c=r.$item.y,r.$item.x=s.x,r.$item.y=s.y,this.gridster.findItemWithItem(r.$item)?(r.$item.x=l,r.$item.y=c):(r.setSize(),n.splice(a+1,n.length-a-1),f=!0);return n.length<2&&this.removeFromPushed(e),f}}function kS(t,r,e,n,a,s,l,c,f,h){Jh=t.$options.scrollSensitivity,Zc=t.$options.scrollSpeed,ma=t.el,Zh=f,rl=h;const g=ma.offsetWidth,B=ma.scrollLeft,V=ma.scrollTop,ce=e-V;if(!t.$options.disableScrollVertical)if(l.clientY<s.clientY&&ma.offsetHeight+V-e-a<Jh){if(MS(),Zh&&rl&&!rl.s||ip)return;ip=IS(1,c,l)}else if(l.clientY>s.clientY&&V>0&&ce<Jh){if(OS(),Zh&&rl&&!rl.n||np)return;np=IS(-1,c,l)}else l.clientY!==s.clientY&&t0();const Se=r-B;if(!t.$options.disableScrollHorizontal)if(l.clientX<s.clientX&&B+g-r-n<=Jh){if(DS(),Zh&&rl&&!rl.e||ep)return;ep=PS(1,c,l)}else if(l.clientX>s.clientX&&B>0&&Se<Jh){if(RS(),Zh&&rl&&!rl.w||tp)return;tp=PS(-1,c,l)}else l.clientX!==s.clientX&&e0()}function IS(t,r,e){let n=e.clientY;return setInterval(()=>{(!ma||-1===t&&ma.scrollTop-Zc<0)&&t0(),ma.scrollTop+=t*Zc,n+=t*Zc,r({clientX:e.clientX,clientY:n})},50)}function PS(t,r,e){let n=e.clientX;return setInterval(()=>{(!ma||-1===t&&ma.scrollLeft-Zc<0)&&e0(),ma.scrollLeft+=t*Zc,n+=t*Zc,r({clientX:n,clientY:e.clientY})},50)}function FS(){e0(),t0(),ma=null}function e0(){RS(),DS()}function t0(){MS(),OS()}function RS(){ep&&(clearInterval(ep),ep=0)}function DS(){tp&&(clearInterval(tp),tp=0)}function OS(){ip&&(clearInterval(ip),ip=0)}function MS(){np&&(clearInterval(np),np=0)}class SU{constructor(r){this.gridsterItem=r,this.gridster=r.gridster}destroy(){delete this.gridster,delete this.gridsterItem,delete this.swapedItem}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){const r=this.swapedItem.$item.x,e=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=r,this.swapedItem.$item.y=e):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(r){let e;if(e=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(r.$item):this.gridster.checkCollision(r.$item),e&&!0!==e&&e.canBeDragged()){const n=e,a=n.$item.x,s=n.$item.y,l=r.$item.x,c=r.$item.y,f=l-a,h=c-s;n.$item.x=r.item.x-f,n.$item.y=r.item.y-h,r.$item.x=n.item.x+f,r.$item.y=n.item.y+h,this.gridster.checkCollision(n.$item)||this.gridster.checkCollision(r.$item)?(r.$item.x=l,r.$item.y=c,n.$item.x=a,n.$item.y=s):(n.setSize(),this.swapedItem=n,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}class EU{constructor(r,e,n){this.zone=n,this.collision=!1,this.gridsterItem=r,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),delete this.gridsterItem,delete this.gridster,delete this.collision,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(r){r.which&&1!==r.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,r),r.stopPropagation(),r.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragFunction),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=r.clientX,this.originalClientY=r.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===vr.RTL?r.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:r.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=r.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new TS(this.gridsterItem),this.swap=new SU(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}dragMove(r){r.stopPropagation(),r.preventDefault(),Ui.checkTouchEvent(r),this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,kS(this.gridster,this.left,this.top,this.width,this.height,r,this.lastMouse,this.calculateItemPositionFromMousePosition.bind(this)),this.calculateItemPositionFromMousePosition(r)}calculateItemPositionFromMousePosition(r){this.gridster.options.scale?this.calculateItemPositionWithScale(r,this.gridster.options.scale):this.calculateItemPositionWithoutScale(r),this.calculateItemPosition(),this.lastMouse.clientX=r.clientX,this.lastMouse.clientY=r.clientY,this.zone.run(()=>{this.gridster.updateGrid()})}calculateItemPositionWithScale(r,e){this.left=this.gridster.$options.dirType===vr.RTL?this.gridster.el.scrollWidth-this.originalClientX+(r.clientX-this.originalClientX)/e+this.diffLeft:this.originalClientX+(r.clientX-this.originalClientX)/e+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(r.clientY-this.originalClientY)/e+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(r){this.left=this.gridster.$options.dirType===vr.RTL?this.gridster.el.scrollWidth-r.clientX+this.diffLeft:r.clientX+this.offsetLeft-this.diffLeft,this.top=r.clientY+this.offsetTop-this.diffTop}dragStop(r){r.stopPropagation(),r.preventDefault(),FS(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,r)).then(this.makeDrag.bind(this),this.cancelDrag.bind(this)):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})}cancelDrag(){this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}makeDrag(){this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){const r=this.path[this.path.length-1];let e="";r.x<this.gridsterItem.$item.x?e=this.push.fromWest:r.x>this.gridsterItem.$item.x?e=this.push.fromEast:r.y<this.gridsterItem.$item.y?e=this.push.fromNorth:r.y>this.gridsterItem.$item.y&&(e=this.push.fromSouth),this.push.pushItems(e,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}this.gridster.previewStyle(!0)}toggle(){const r=this.gridsterItem.canBeDragged();!this.enabled&&r?(this.enabled=!this.enabled,this.dragStartFunction=this.dragStartDelay.bind(this),this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartFunction),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartFunction)):this.enabled&&!r&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}dragStartDelay(r){if(r.target.hasAttribute("class")&&r.target.getAttribute("class").split(" ").indexOf("gridster-item-resizable-handler")>-1||Ui.checkContentClassForEvent(this.gridster,r))return;if(Ui.checkTouchEvent(r),!this.gridster.$options.draggable.delayStart)return void this.dragStart(r);const e=setTimeout(()=>{this.dragStart(r),g()},this.gridster.$options.draggable.delayStart),n=this.gridsterItem.renderer.listen("document","mouseup",g),a=this.gridsterItem.renderer.listen("document","mouseleave",g),s=this.gridsterItem.renderer.listen("window","blur",g),l=this.gridsterItem.renderer.listen("document","touchmove",function h(I){Ui.checkTouchEvent(I),(Math.abs(I.clientX-r.clientX)>9||Math.abs(I.clientY-r.clientY)>9)&&g()}),c=this.gridsterItem.renderer.listen("document","touchend",g),f=this.gridsterItem.renderer.listen("document","touchcancel",g);function g(){clearTimeout(e),s(),n(),a(),l(),c(),f()}}}class TU{constructor(r){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=r,this.gridster=r.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){delete this.gridster,delete this.gridsterItem}pushItems(r){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,r)}restoreItems(){let r=0;const e=this.pushedItems.length;let n;for(;r<e;r++)n=this.pushedItems[r],n.$item.x=n.item.x||0,n.$item.y=n.item.y||0,n.$item.cols=n.item.cols||1,n.$item.row=n.item.row||1,n.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let r=0;const e=this.pushedItems.length;let n;for(;r<e;r++)n=this.pushedItems[r],n.checkItemChanges(n.$item,n.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let r=this.pushedItems.length-1,e=!1;for(;r>-1;r--)this.checkPushedItem(this.pushedItems[r],r)&&(e=!0);e&&this.checkPushBack()}push(r,e){const n=this.gridster.checkCollision(r.$item);if(n&&!0!==n&&n!==this.gridsterItem&&n.canBeResized()){if(this.tryPattern[e].call(this,n,r,e))return!0}else if(!1===n)return!0;return!1}trySouth(r,e,n){const a=r.$item.y,s=r.$item.rows;return r.$item.y=e.$item.y+e.$item.rows,r.$item.rows=s+a-r.$item.y,this.gridster.checkCollisionTwoItems(r.$item,e.$item)||this.gridster.checkGridCollision(r.$item)?(r.$item.y=a,r.$item.rows=s,!1):(r.setSize(),this.addToPushed(r),this.push(e,n),!0)}tryNorth(r,e,n){const a=r.$item.rows;return r.$item.rows=e.$item.y-r.$item.y,this.gridster.checkCollisionTwoItems(r.$item,e.$item)||this.gridster.checkGridCollision(r.$item)?(r.$item.rows=a,!1):(r.setSize(),this.addToPushed(r),this.push(e,n),!0)}tryEast(r,e,n){const a=r.$item.x,s=r.$item.cols;return r.$item.x=e.$item.x+e.$item.cols,r.$item.cols=s+a-r.$item.x,this.gridster.checkCollisionTwoItems(r.$item,e.$item)||this.gridster.checkGridCollision(r.$item)?(r.$item.x=a,r.$item.cols=s,!1):(r.setSize(),this.addToPushed(r),this.push(e,n),!0)}tryWest(r,e,n){const a=r.$item.cols;return r.$item.cols=e.$item.x-r.$item.x,this.gridster.checkCollisionTwoItems(r.$item,e.$item)||this.gridster.checkGridCollision(r.$item)?(r.$item.cols=a,!1):(r.setSize(),this.addToPushed(r),this.push(e,n),!0)}addToPushed(r){if(this.pushedItems.indexOf(r)<0)this.pushedItems.push(r),this.pushedItemsPath.push([{x:r.item.x||0,y:r.item.y||0,cols:r.item.cols||0,rows:r.item.rows||0},{x:r.$item.x,y:r.$item.y,cols:r.$item.cols,rows:r.$item.rows}]);else{const e=this.pushedItems.indexOf(r);this.pushedItemsPath[e].push({x:r.$item.x,y:r.$item.y,cols:r.$item.cols,rows:r.$item.rows})}}removeFromPushed(r){r>-1&&(this.pushedItems.splice(r,1),this.pushedItemsPath.splice(r,1))}checkPushedItem(r,e){const n=this.pushedItemsPath[e];let s,l,c,f,h,a=n.length-2;for(;a>-1;a--)s=n[a],l=r.$item.x,c=r.$item.y,f=r.$item.cols,h=r.$item.rows,r.$item.x=s.x,r.$item.y=s.y,r.$item.cols=s.cols,r.$item.rows=s.rows,this.gridster.findItemWithItem(r.$item)?(r.$item.x=l,r.$item.y=c,r.$item.cols=f,r.$item.rows=h):(r.setSize(),n.splice(a+1,n.length-1-a));return n.length<2&&(this.removeFromPushed(e),!0)}}class AU{constructor(r,e,n){this.zone=n,this.gridsterItem=r,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={w:!1,e:!1,n:!1,s:!1}}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridsterItem,delete this.gridster}dragStart(r){r.which&&1!==r.which||(this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,r),r.stopPropagation(),r.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragFunction),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=r.clientX,this.lastMouse.clientY=r.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=r.clientX,this.originalClientY=r.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=r.clientX+this.offsetLeft-this.left,this.diffRight=r.clientX+this.offsetLeft-this.right,this.diffTop=r.clientY+this.offsetTop-this.top,this.diffBottom=r.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new TS(this.gridsterItem),this.pushResize=new TU(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),r.target?.hasAttribute("class")&&r.target.getAttribute("class").split(" ").indexOf("handle-n")>-1?(this.resizeEventScrollType.n=!0,this.directionFunction=this.handleN):r.target?.hasAttribute("class")&&r.target.getAttribute("class").split(" ").indexOf("handle-w")>-1?this.gridster.$options.dirType===vr.RTL?(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):r.target?.hasAttribute("class")&&r.target.getAttribute("class").split(" ").indexOf("handle-s")>-1?(this.resizeEventScrollType.s=!0,this.directionFunction=this.handleS):r.target.hasAttribute("class")&&r.target.getAttribute("class").split(" ").indexOf("handle-e")>-1?this.gridster.$options.dirType===vr.RTL?(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):r.target.hasAttribute("class")&&r.target.getAttribute("class").split(" ").indexOf("handle-nw")>-1?this.gridster.$options.dirType===vr.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):r.target.hasAttribute("class")&&r.target.getAttribute("class").split(" ").indexOf("handle-ne")>-1?this.gridster.$options.dirType===vr.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):r.target.hasAttribute("class")&&r.target.getAttribute("class").split(" ").indexOf("handle-sw")>-1?this.gridster.$options.dirType===vr.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):r.target.hasAttribute("class")&&r.target.getAttribute("class").split(" ").indexOf("handle-se")>-1&&(this.gridster.$options.dirType===vr.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE)))}dragMove(r){r.stopPropagation(),r.preventDefault(),Ui.checkTouchEvent(r),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,kS(this.gridster,this.left,this.top,this.width,this.height,r,this.lastMouse,this.directionFunction.bind(this),!0,this.resizeEventScrollType);const e=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(r.clientX-this.originalClientX)/e,clientY:this.originalClientY+(r.clientY-this.originalClientY)/e}),this.lastMouse.clientX=r.clientX,this.lastMouse.clientY=r.clientY,this.zone.run(()=>{this.gridster.updateGrid()})}dragStop(r){r.stopPropagation(),r.preventDefault(),FS(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,r)).then(this.makeResize.bind(this),this.cancelResize.bind(this)):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})}cancelResize(){this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}makeResize(){this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}handleN(r){if(this.top=r.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight,this.top=this.bottom-this.minHeight),this.newPosition=this.gridster.pixelsToPositionY(this.top+this.margin,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)}handleW(r){if(this.left=(this.gridster.$options.dirType===vr.RTL?this.originalClientX+(this.originalClientX-r.clientX):r.clientX)+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width&&(this.width=this.minWidth,this.left=this.right-this.minWidth),this.newPosition=this.gridster.pixelsToPositionX(this.left+this.margin,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)}handleS(r){if(this.height=r.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.newPosition=this.gridster.pixelsToPositionY(this.bottom,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)}handleE(r){if(this.width=(this.gridster.$options.dirType===vr.RTL?this.originalClientX+(this.originalClientX-r.clientX):r.clientX)+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.newPosition=this.gridster.pixelsToPositionX(this.right,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)}handleNW(r){this.handleN(r),this.handleW(r)}handleNE(r){this.handleN(r),this.handleE(r)}handleSW(r){this.handleS(r),this.handleW(r)}handleSE(r){this.handleS(r),this.handleE(r)}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized()}dragStartDelay(r){if(Ui.checkTouchEvent(r),!this.gridster.$options.resizable.delayStart)return void this.dragStart(r);const e=setTimeout(()=>{this.dragStart(r),g()},this.gridster.$options.resizable.delayStart),n=this.gridsterItem.renderer.listen("document","mouseup",g),a=this.gridsterItem.renderer.listen("document","mouseleave",g),s=this.gridsterItem.renderer.listen("window","blur",g),l=this.gridsterItem.renderer.listen("document","touchmove",function h(I){Ui.checkTouchEvent(I),(Math.abs(I.clientX-r.clientX)>9||Math.abs(I.clientY-r.clientY)>9)&&g()}),c=this.gridsterItem.renderer.listen("document","touchend",g),f=this.gridsterItem.renderer.listen("document","touchcancel",g);function g(){clearTimeout(e),s(),n(),a(),l(),c(),f()}}setItemTop(r){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,r)}setItemLeft(r){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,r,this.top)}setItemHeight(r){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",r+"px")}setItemWidth(r){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",r+"px")}}let kU=(()=>{class t{constructor(e,n,a,s){this.renderer=a,this.zone=s,this.itemInit=new o.EventEmitter,this.itemChange=new o.EventEmitter,this.itemResize=new o.EventEmitter,this.el=e.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=n,this.drag=new EU(this,n,this.zone),this.resize=new AU(this,n,this.zone)}get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(e){e.item&&(this.updateOptions(),this.init||this.gridster.calculateLayoutDebounce()),e.item&&e.item.previousValue&&this.setSize()}updateOptions(){this.$item=Ui.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0})}ngOnDestroy(){this.gridster.removeItem(this),delete this.gridster,this.drag.destroy(),delete this.drag,this.resize.destroy(),delete this.resize}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){const n=this.$item.x*this.gridster.curColWidth,a=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,s=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=n,!this.init&&a>0&&s>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(a!==this.width||s!==this.height)&&(this.width=a,this.height=s,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(e,n){e.rows===n.rows&&e.cols===n.cols&&e.x===n.x&&e.y===n.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=n.x||0,this.$item.y=n.y||0,this.$item.cols=n.cols||1,this.$item.rows=n.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayoutDebounce(),this.itemChanged()))}canBeDragged(){const e=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&e&&(void 0===this.$item.dragEnabled?e:this.$item.dragEnabled)}canBeResized(){const e=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&e&&(void 0===this.$item.resizeEnabled?e:this.$item.resizeEnabled)}bringToFront(e){if(e&&e<=0)return;const n=this.getLayerIndex(),a=this.gridster.$options.maxLayerIndex;if(n<a){const s=e?n+e:a;this.item.layerIndex=this.$item.layerIndex=s>a?a:s}}sendToBack(e){if(e&&e<=0)return;const n=this.getLayerIndex();if(n>0){const a=e?n-e:0;this.item.layerIndex=this.$item.layerIndex=a<0?0:a}}getLayerIndex(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(Z_),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.NgZone))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(e,n){2&e&&o.\u0275\u0275styleProp("z-index",n.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[o.\u0275\u0275NgOnChangesFeature],ngContentSelectors:ES,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275projection(0),o.\u0275\u0275template(1,dU,1,0,"div",0),o.\u0275\u0275template(2,fU,1,0,"div",1),o.\u0275\u0275template(3,hU,1,0,"div",2),o.\u0275\u0275template(4,pU,1,0,"div",3),o.\u0275\u0275template(5,mU,1,0,"div",4),o.\u0275\u0275template(6,gU,1,0,"div",5),o.\u0275\u0275template(7,vU,1,0,"div",6),o.\u0275\u0275template(8,yU,1,0,"div",7)),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.gridster.$options.resizable.handles.s&&n.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.gridster.$options.resizable.handles.e&&n.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.gridster.$options.resizable.handles.n&&n.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.gridster.$options.resizable.handles.w&&n.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.gridster.$options.resizable.handles.se&&n.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.gridster.$options.resizable.handles.ne&&n.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.gridster.$options.resizable.handles.sw&&n.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.gridster.$options.resizable.handles.nw&&n.resize.resizeEnabled))},directives:[x.NgIf],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),t})(),LS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule]]}),t})();var rp=S(7822),ho=S(8589),Rd=S(6643),IU=S(1528),Dd=S(6328),eu=S(8085);const Kg=["innerGridItem"];function PU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}const tu=function(t){return{i:t}};function FU(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275elementStart(1,"p",4),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",5),o.\u0275\u0275template(4,PU,1,0,"ng-container",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.index,n=o.\u0275\u0275nextContext().index,a=o.\u0275\u0275nextContext();o.\u0275\u0275property("fxFlex",a.dashboard[a.itemIndex(n,e)].cols),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate3("row: ",n," | column: ",e," | size: ",a.dashboard[a.itemIndex(n,e)].cols,""),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngStyle",a.gridItemInnerStyles(n,e)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",a.innerGridItemTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(7,tu,a.itemIndex(n,e)))}}const RU=function(){return{height:"100%"}};function DU(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275elementStart(1,"div",3),o.\u0275\u0275template(2,FU,5,9,"div",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.index,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("fxFlex",n.rowFlex(e)),o.\u0275\u0275advance(1),o.\u0275\u0275property("fxLayout",n.rowDirection(e))("ngStyle",o.\u0275\u0275pureFunction0(4,RU)),o.\u0275\u0275advance(1),o.\u0275\u0275property("for",n.totalColumns(e))}}const n0=["gridItemActions"],r0=["extraActions"],NS=["mainControls"],BS=["itemHeader"];function OU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function MU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function LU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function NU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"gridster-item",8),o.\u0275\u0275elementStart(1,"div",9),o.\u0275\u0275elementStart(2,"div",10,11),o.\u0275\u0275template(4,MU,1,0,"ng-container",12),o.\u0275\u0275elementStart(5,"button",13),o.\u0275\u0275listener("mousedown",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().removeItem(s)})("touchstart",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().removeItem(s)}),o.\u0275\u0275text(6,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"div",14),o.\u0275\u0275template(8,LU,1,0,"ng-container",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit,n=r.index,a=o.\u0275\u0275nextContext();o.\u0275\u0275property("item",e),o.\u0275\u0275advance(2),o.\u0275\u0275property("hidden",!a.displayItemHeader),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",a.gridItemActionsTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(6,tu,n)),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngTemplateOutlet",a.innerGridItemTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(8,tu,n))}}function BU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function jU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function zU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}const jS=function(){return{i:0}};function UU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function VU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function GU(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function $U(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"as-split-area",15),o.\u0275\u0275elementStart(1,"div",16),o.\u0275\u0275elementStart(2,"div",17,18),o.\u0275\u0275template(4,VU,1,0,"ng-container",19),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",20),o.\u0275\u0275template(6,GU,1,0,"ng-container",19),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.index,n=o.\u0275\u0275nextContext().index,a=o.\u0275\u0275nextContext();o.\u0275\u0275property("size",a.itemSize(n,e)),o.\u0275\u0275advance(2),o.\u0275\u0275property("hidden",!a.displayItemHeader),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",a.gridItemActionsTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(6,tu,a.itemIndex(n,e))),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",a.innerGridItemTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(8,tu,a.itemIndex(n,e)))}}function HU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",6),o.\u0275\u0275elementStart(1,"div",7),o.\u0275\u0275elementStart(2,"button",8),o.\u0275\u0275elementStart(3,"mat-icon"),o.\u0275\u0275text(4,"menu"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-menu",null,9),o.\u0275\u0275elementStart(7,"button",10),o.\u0275\u0275listener("mousedown",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().addColumn(s)}),o.\u0275\u0275text(8,"Add Column"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"button",10),o.\u0275\u0275listener("mousedown",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().layoutSettings("row",s)}),o.\u0275\u0275text(10,"Layout Settings"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"button",11),o.\u0275\u0275listener("mousedown",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().removeRow(s)}),o.\u0275\u0275text(12,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"div",12),o.\u0275\u0275elementStart(14,"as-split",13),o.\u0275\u0275listener("dragEnd",function(a){const l=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().dragEnd(l,a)}),o.\u0275\u0275template(15,$U,7,10,"as-split-area",14),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.index,n=o.\u0275\u0275reference(6),a=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("matMenuTriggerFor",n),o.\u0275\u0275advance(13),o.\u0275\u0275property("for",a.totalColumns(e))}}function qU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",6),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().login()}),o.\u0275\u0275text(1,"login"),o.\u0275\u0275elementEnd()}}const XU=function(t){return[t,"manage"]};function WU(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",7),o.\u0275\u0275elementStart(1,"a",8),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(2,XU,e.path)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.path)}}const KU=["*"];function YU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",15),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.submit()}),o.\u0275\u0275text(2,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function QU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onPropertiesClick()}),o.\u0275\u0275text(2,"Properties"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function JU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onDeleteClick()}),o.\u0275\u0275text(2,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function ZU(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onRulesClick()}),o.\u0275\u0275text(2,"Rules"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function e5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",17),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onPersistenceClick()}),o.\u0275\u0275text(2,"Persistence"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function t5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",17),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onInteractionsClick()}),o.\u0275\u0275text(2,"Interactions"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function n5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",18),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.applyStyle(0)})("touchstart",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.applyStyle(0)}),o.\u0275\u0275text(2,"Apply Style"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function i5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",18),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.removeStyle(0)})("touchstart",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.removeStyle(0)}),o.\u0275\u0275text(2,"Remove Style"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function r5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",35),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2),o.\u0275\u0275reference(2).toggle()}),o.\u0275\u0275elementStart(1,"mat-icon"),o.\u0275\u0275text(2,"menu"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function o5(t,r){1&t&&(o.\u0275\u0275elementStart(0,"mat-icon"),o.\u0275\u0275text(1,"arrow_drop_down"),o.\u0275\u0275elementEnd())}function a5(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"button",36),o.\u0275\u0275template(1,o5,2,0,"mat-icon",4),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2),n=o.\u0275\u0275reference(29);o.\u0275\u0275property("matMenuTriggerFor",n),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.nested)}}function s5(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function l5(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,s5,1,0,"ng-container",23),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e.contextsMenuTpl)}}function c5(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",37),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.editor.panelStyleTitle(0))}}function u5(t,r){1&t&&o.\u0275\u0275element(0,"span",38)}function d5(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function f5(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",39),o.\u0275\u0275text(1,"d r u i d"),o.\u0275\u0275elementEnd())}function h5(t,r){if(1&t&&(o.\u0275\u0275template(0,r5,3,0,"button",19),o.\u0275\u0275template(1,a5,2,2,"button",20),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275template(3,l5,2,1,"ng-container",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(4,c5,2,1,"div",21),o.\u0275\u0275template(5,u5,1,0,"span",22),o.\u0275\u0275template(6,d5,1,0,"ng-container",23),o.\u0275\u0275elementStart(7,"div",24),o.\u0275\u0275elementStart(8,"mat-form-field"),o.\u0275\u0275elementStart(9,"mat-select",25),o.\u0275\u0275elementStart(10,"mat-option",26),o.\u0275\u0275text(11,"page"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"mat-option",27),o.\u0275\u0275text(13,"form"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"mat-option",28),o.\u0275\u0275text(15,"json"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"div",29),o.\u0275\u0275elementStart(17,"mat-form-field"),o.\u0275\u0275elementStart(18,"mat-select",30),o.\u0275\u0275elementStart(19,"mat-option",31),o.\u0275\u0275text(20,"grid"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(21,"mat-option",32),o.\u0275\u0275text(22,"gridless"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(23,"mat-option",33),o.\u0275\u0275text(24,"split"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(25,f5,2,0,"div",34)),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",!e.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.nested),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",e.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.editor.hasPanelStyle(0)&&e.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e.extraActionsAreaTmpl),o.\u0275\u0275advance(19),o.\u0275\u0275property("ngIf",!e.nested)}}function p5(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",37),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.editor.panelStyleTitle(0))}}function m5(t,r){if(1&t&&o.\u0275\u0275template(0,p5,2,1,"div",21),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",e.editor.hasPanelStyle(0)&&!e.nested)}}function g5(t,r){1&t&&o.\u0275\u0275elementContainer(0)}const o0=function(t,r){return{i:t,j:r}};function v5(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",43),o.\u0275\u0275template(1,g5,1,0,"ng-container",44),o.\u0275\u0275elementEnd()),2&t){const e=r.index,n=o.\u0275\u0275nextContext().i,a=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",a.editablePaneTpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction2(2,o0,n,e))}}function y5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone",40),o.\u0275\u0275listener("change",function(a){const l=o.\u0275\u0275restoreView(e).i;return o.\u0275\u0275nextContext().editor.onFileChange(a,l)})("cdkDropListDropped",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onDrop(a)}),o.\u0275\u0275elementStart(1,"div",null,41),o.\u0275\u0275template(3,v5,2,5,"div",42),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.i,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("cdkDropListData",e)("multiple",!0)("disableClick",!0),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",n.editor.panelPanes(e).controls)}}function _5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",15),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.submit()}),o.\u0275\u0275text(1,"Save"),o.\u0275\u0275elementEnd()}}function x5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onPropertiesClick()}),o.\u0275\u0275text(1,"Properties"),o.\u0275\u0275elementEnd()}}function b5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onDeleteClick()}),o.\u0275\u0275text(1,"Delete"),o.\u0275\u0275elementEnd()}}function C5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onRulesClick()}),o.\u0275\u0275text(1,"Rules"),o.\u0275\u0275elementEnd()}}function w5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onPersistenceClick()}),o.\u0275\u0275text(1,"Persistence"),o.\u0275\u0275elementEnd()}}function S5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onInteractionsClick()}),o.\u0275\u0275text(1,"Interactions"),o.\u0275\u0275elementEnd()}}function E5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.applyStyle(0)})("touchstart",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.applyStyle(0)}),o.\u0275\u0275text(1,"Apply Style"),o.\u0275\u0275elementEnd()}}function T5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.removeStyle(0)})("touchstart",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.removeStyle(0)}),o.\u0275\u0275text(1,"Remove Style"),o.\u0275\u0275elementEnd()}}function A5(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function k5(t,r){if(1&t&&o.\u0275\u0275template(0,A5,1,0,"ng-container",2),2&t){const e=r.i,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngTemplateOutlet",n.renderPanelTpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,tu,e))}}function I5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.submit()}),o.\u0275\u0275text(2,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function P5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",17),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onRulesClick()}),o.\u0275\u0275text(2,"Rules"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function F5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onPersistenceClick()}),o.\u0275\u0275text(2,"Persistence"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function R5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onInteractionsClick()}),o.\u0275\u0275text(2,"Interactions"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function D5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",17),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onDeleteClick()}),o.\u0275\u0275text(2,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function O5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",32),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2),o.\u0275\u0275reference(2).toggle()}),o.\u0275\u0275elementStart(1,"mat-icon"),o.\u0275\u0275text(2,"menu"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function M5(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"button",33),o.\u0275\u0275elementStart(1,"mat-icon"),o.\u0275\u0275text(2,"menu"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){o.\u0275\u0275nextContext(2);const e=o.\u0275\u0275reference(30);o.\u0275\u0275property("matMenuTriggerFor",e)}}function L5(t,r){1&t&&o.\u0275\u0275element(0,"span",34)}function N5(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function B5(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,N5,1,0,"ng-container",30),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e.contextsMenuTpl)}}function j5(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function z5(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",35),o.\u0275\u0275text(1,"d r u i d"),o.\u0275\u0275elementEnd())}function U5(t,r){if(1&t&&(o.\u0275\u0275template(0,O5,3,0,"button",18),o.\u0275\u0275template(1,M5,3,1,"button",19),o.\u0275\u0275template(2,L5,1,0,"span",20),o.\u0275\u0275elementStart(3,"div"),o.\u0275\u0275template(4,B5,2,1,"ng-container",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",21),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275elementStart(7,"mat-select",22),o.\u0275\u0275elementStart(8,"mat-option",23),o.\u0275\u0275text(9,"page"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-option",24),o.\u0275\u0275text(11,"form"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"mat-option",25),o.\u0275\u0275text(13,"json"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"div",26),o.\u0275\u0275elementStart(15,"mat-form-field"),o.\u0275\u0275elementStart(16,"mat-select",27),o.\u0275\u0275elementStart(17,"mat-option",28),o.\u0275\u0275text(18,"gridless"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"mat-option",29),o.\u0275\u0275text(20,"split"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(21,j5,1,0,"ng-container",30),o.\u0275\u0275template(22,z5,2,0,"div",31)),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",!e.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.nested),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",e.savable),o.\u0275\u0275advance(17),o.\u0275\u0275property("ngTemplateOutlet",e.extraActionsAreaTmpl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.nested)}}function V5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",42),o.\u0275\u0275listener("mousedown",function(){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext().i;return o.\u0275\u0275nextContext().editor.applyStyle(a)})("touchstart",function(){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext().i;return o.\u0275\u0275nextContext().editor.applyStyle(a)}),o.\u0275\u0275text(1,"Apply Style"),o.\u0275\u0275elementEnd()}}function G5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",42),o.\u0275\u0275listener("mousedown",function(){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext().i;return o.\u0275\u0275nextContext().editor.removeStyle(a)})("touchstart",function(){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext().i;return o.\u0275\u0275nextContext().editor.removeStyle(a)}),o.\u0275\u0275text(1,"Remove Style"),o.\u0275\u0275elementEnd()}}function $5(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",43),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().i,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(n.editor.panelStyleTitle(e))}}function H5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",36),o.\u0275\u0275elementStart(1,"mat-icon"),o.\u0275\u0275text(2,"arrow_drop_down"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-menu",null,37),o.\u0275\u0275elementStart(5,"button",5),o.\u0275\u0275listener("mousedown",function(){const s=o.\u0275\u0275restoreView(e).i;return o.\u0275\u0275nextContext(),o.\u0275\u0275reference(22).layoutSettings("column",s)}),o.\u0275\u0275text(6,"Layout Settings"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"button",38),o.\u0275\u0275listener("mousedown",function(){const s=o.\u0275\u0275restoreView(e).i;return o.\u0275\u0275nextContext().editor.addContent(s)})("touchstart",function(){const s=o.\u0275\u0275restoreView(e).i;return o.\u0275\u0275nextContext().editor.addContent(s)}),o.\u0275\u0275text(8,"Add Content"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"button",38),o.\u0275\u0275listener("mousedown",function(){const s=o.\u0275\u0275restoreView(e).i;return o.\u0275\u0275nextContext().editor.editPanelProps(s)})("touchstart",function(){const s=o.\u0275\u0275restoreView(e).i;return o.\u0275\u0275nextContext().editor.editPanelProps(s)}),o.\u0275\u0275text(10,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(11,V5,2,0,"button",39),o.\u0275\u0275template(12,G5,2,0,"button",39),o.\u0275\u0275elementStart(13,"button",40),o.\u0275\u0275listener("mousedown",function(){const s=o.\u0275\u0275restoreView(e).i;return o.\u0275\u0275nextContext(),o.\u0275\u0275reference(22).removeColumn2(s)})("touchstart",function(){const s=o.\u0275\u0275restoreView(e).i;return o.\u0275\u0275nextContext(),o.\u0275\u0275reference(22).removeColumn2(s)}),o.\u0275\u0275text(14,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(15,$5,2,1,"div",41)}if(2&t){const e=r.i,n=o.\u0275\u0275reference(4),a=o.\u0275\u0275nextContext();o.\u0275\u0275property("matMenuTriggerFor",n),o.\u0275\u0275advance(11),o.\u0275\u0275property("ngIf",!a.editor.hasPanelStyle(e)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",a.editor.hasPanelStyle(e)),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",a.editor.hasPanelStyle(e))}}function q5(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function X5(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",47),o.\u0275\u0275template(1,q5,1,0,"ng-container",48),o.\u0275\u0275elementEnd()),2&t){const e=r.index,n=o.\u0275\u0275nextContext().i,a=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",a.editablePaneTpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction2(2,o0,n,e))}}function W5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone",44),o.\u0275\u0275listener("change",function(a){const l=o.\u0275\u0275restoreView(e).i;return o.\u0275\u0275nextContext().editor.onFileChange(a,l)})("cdkDropListDropped",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onDrop(a)}),o.\u0275\u0275elementStart(1,"div",null,45),o.\u0275\u0275template(3,X5,2,5,"div",46),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.i,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("cdkDropListData",e)("multiple",!0)("disableClick",!0),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",n.editor.panelPanes(e).controls)}}function K5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.submit()}),o.\u0275\u0275text(1,"Save"),o.\u0275\u0275elementEnd()}}function Y5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onRulesClick()}),o.\u0275\u0275text(1,"Rules"),o.\u0275\u0275elementEnd()}}function Q5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onPersistenceClick()}),o.\u0275\u0275text(1,"Persistence"),o.\u0275\u0275elementEnd()}}function J5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onInteractionsClick()}),o.\u0275\u0275text(1,"Interactions"),o.\u0275\u0275elementEnd()}}function Z5(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().editor.onDeleteClick()}),o.\u0275\u0275text(1,"Delete"),o.\u0275\u0275elementEnd()}}function e6(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function t6(t,r){if(1&t&&o.\u0275\u0275template(0,e6,1,0,"ng-container",2),2&t){const e=r.i,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngTemplateOutlet",n.renderPanelTpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,tu,e))}}let g6=(()=>{class t{constructor(e){this.attributeMatcher=e,this.dashboard=[],this.layoutSetting=new Qn,this.rowSettings=[],this.columnSettings=[]}get totalRows(){return 0==this.dashboard.length?0:this.dashboard.reduce((e,n)=>n.y>e?n.y:e,0)+1}get direction(){const e=this.attributeMatcher.getComputedValue("direction",this.layoutSetting?this.layoutSetting.settings:[]);return!e||"column"!==e.trim()&&"row"!==e.trim()?"column":e}ngOnInit(){console.log(this.dashboard)}itemIndex(e,n){return this.dashboard.findIndex(a=>a.y===e&&a.x===n)}totalColumns(e){return this.dashboard.reduce((n,a)=>a.y===e?n+1:n,0)}rowDirection(e){const n=this.attributeMatcher.getComputedValue("direction",this.rowSettings&&this.rowSettings[e]?this.rowSettings[e].settings:[]);return!n||"column"!==n.trim()&&"row"!==n.trim()?"row":n}rowFlex(e){return["flexGrow","flexShrink","flexBasis"].map(l=>this.attributeMatcher.getComputedValue(l,this.rowSettings&&this.rowSettings[e]?this.rowSettings[e].settings:[])).map(l=>null!=l&&""!==l&&""!==l.trim()?`${l.trim()}`:"").join(" ")}gridItemInnerStyles(e,n){const a=this.itemIndex(e,n);return{height:this.calculateHeight(this.attributeMatcher.getComputedValue("height",this.columnSettings&&this.columnSettings[a]?this.columnSettings[a].settings:[]))}}calculateHeight(e){return null!=e?e.trim():"auto"}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeMatcherService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-flex-layout"]],contentQueries:function(e,n,a){if(1&e&&o.\u0275\u0275contentQuery(a,Kg,5),2&e){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.innerGridItemTmpl=s.first)}},inputs:{dashboard:"dashboard",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings"},decls:2,vars:2,consts:[["fxFill","",3,"fxLayout"],[3,"fxFlex",4,"for"],[3,"fxFlex"],[3,"fxLayout","ngStyle"],["hidden",""],[1,"grid-item-inner",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,DU,3,5,"div",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("fxLayout",n.direction),o.\u0275\u0275advance(1),o.\u0275\u0275property("for",n.totalRows))},directives:[Bn,ue,mn.ForDirective,Xt,x.NgStyle,aa,x.NgTemplateOutlet],styles:[""]}),t})(),zS=(()=>{class t{constructor(){this.itemAdded=new o.EventEmitter,this.itemRemoved=new o.EventEmitter,this.dashboard=[],this.displayMainControls=!0,this.displayItemHeader=!0,this.itemHeights=[],this.rows=0}get grid(){return this.dashboard}get cumulativeHeight(){const e=[];return this.heightsMatrix.forEach(n=>{e.push(this.itemHeights.reduce((a,s)=>s>a?s:a))}),e.reduce((n,a)=>n+a)}get heightsMatrix(){return this.dashboard.reduce((e,n,a)=>(e[n.y]=void 0!==e[n.y]?[...e[n.y],this.itemHeights[a]]:[this.itemHeights[a]],e),[])}ngOnInit(){}removeItem(e){this.dashboard.splice(e,1),this.itemHeights.splice(e,1),this.itemRemoved.emit(e)}addColumn(){console.log("add column grid"),this.dashboard.push({cols:1,rows:1,y:0,x:this.dashboard.length}),this.itemAdded.emit()}addRow(){this.dashboard.push({cols:1,rows:1,y:this.rows++,x:0}),this.itemAdded.emit()}setItemContentHeight(e,n){this.itemHeights[e]=n+(this.displayItemHeader?this.itemHeaderHeight(e):0),this.refreshGridHeight()}refreshGridHeight(){this.gridHeight=this.cumulativeHeight+16*this.gridster.rows}itemHeaderHeight(e){return this.itemHeaders.find((n,a)=>a===e).nativeElement.offsetHeight}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-grid-layout"]],contentQueries:function(e,n,a){if(1&e&&(o.\u0275\u0275contentQuery(a,n0,5),o.\u0275\u0275contentQuery(a,Kg,5),o.\u0275\u0275contentQuery(a,r0,5)),2&e){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.gridItemActionsTmpl=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.innerGridItemTmpl=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.extraActionsTmpl=s.first)}},viewQuery:function(e,n){if(1&e&&(o.\u0275\u0275viewQuery(Z_,5),o.\u0275\u0275viewQuery(NS,5),o.\u0275\u0275viewQuery(BS,5)),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.gridster=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.mainControls=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.itemHeaders=a)}},inputs:{dashboard:"dashboard",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",options:"options"},outputs:{itemAdded:"itemAdded",itemRemoved:"itemRemoved"},decls:11,vars:6,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],["type","button",3,"mousedown"],[4,"ngTemplateOutlet"],[1,"layout-inner"],[3,"options"],[3,"item",4,"ngFor","ngForOf"],[3,"item"],["fxLayout","column","fxFill",""],["fxFlex","0 1 auto",1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",1,"delete",3,"mousedown","touchstart"],["fxFlex","",1,"grid-item-inner"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1,2),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("mousedown",function(){return n.addColumn()}),o.\u0275\u0275text(4,"Add Column"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"button",3),o.\u0275\u0275listener("mousedown",function(){return n.addRow()}),o.\u0275\u0275text(6,"Add Row"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(7,OU,1,0,"ng-container",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div",5),o.\u0275\u0275elementStart(9,"gridster",6),o.\u0275\u0275template(10,NU,9,10,"gridster-item",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("hidden",!n.displayMainControls),o.\u0275\u0275advance(6),o.\u0275\u0275property("ngTemplateOutlet",n.extraActionsTmpl),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("height",n.gridHeight,"px"),o.\u0275\u0275advance(1),o.\u0275\u0275property("options",n.options),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.dashboard))},directives:[Z_,kU,x.NgTemplateOutlet,x.NgForOf,ue,Bn,Xt],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.grid-item-header[_ngcontent-%COMP%]{background-color:#ccc;padding:.5em}button.delete[_ngcontent-%COMP%]{float:right}.main-controls[_ngcontent-%COMP%]{background-color:#fff;padding:.5em}"]}),t})(),US=(()=>{class t{constructor(){this.displayMainControls=!0,this.displayItemHeader=!0,this.nested=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-gridless-layout"]],contentQueries:function(e,n,a){if(1&e&&(o.\u0275\u0275contentQuery(a,n0,5),o.\u0275\u0275contentQuery(a,Kg,5),o.\u0275\u0275contentQuery(a,r0,5)),2&e){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.gridItemActionsTmpl=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.innerGridItemTmpl=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.extraActionsTmpl=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&o.\u0275\u0275classProp("is-nested",n.nested)},inputs:{displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",nested:"nested"},decls:11,vars:9,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],[4,"ngTemplateOutlet"],[1,"layout-inner"],["fxLayout","column","fxFill",""],["fxFlex","0 1 auto",1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","",1,"grid-item-inner"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1,2),o.\u0275\u0275template(3,BU,1,0,"ng-container",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",4),o.\u0275\u0275elementStart(5,"div",5),o.\u0275\u0275elementStart(6,"div",6,7),o.\u0275\u0275template(8,jU,1,0,"ng-container",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",9),o.\u0275\u0275template(10,zU,1,0,"ng-container",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("hidden",!n.displayMainControls),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",n.extraActionsTmpl),o.\u0275\u0275advance(3),o.\u0275\u0275property("hidden",!n.displayItemHeader),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",n.gridItemActionsTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction0(7,jS)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",n.innerGridItemTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction0(8,jS)))},directives:[x.NgTemplateOutlet,ue,Bn,Xt],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.is-nested[_nghost-%COMP%]   .layout-wrapper[_ngcontent-%COMP%]{padding:0 .25em;border:1px solid #ccc}.main-controls[_ngcontent-%COMP%]{display:flex;padding:0;align-items:baseline;border-bottom:1px solid #ccc;margin-bottom:.25em}.grid-item-header[_ngcontent-%COMP%]{padding:0;display:flex;align-items:baseline}"]}),t})(),v6=(()=>{class t{constructor(e){this.fb=e,this.settingValues=[],this.layoutForm=this.fb.group({settings:this.fb.control("")}),this.onTouched=()=>{}}get attributes(){return this.layout.settings.has(this.type)?this.layout.settings.get(this.type):[]}ngOnInit(){}writeValue(e){e&&this.layoutForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.layoutForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.layoutForm.disable():this.layoutForm.enable()}validate(e){return this.layoutForm.valid?null:{invalidForm:{valid:!1,message:"layout is invalid"}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-layout-form"]],inputs:{layout:"layout",type:"type",settingValues:"settingValues"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"attributes","attributeValues"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"classifieds-ui-attributes-builder",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.layoutForm),o.\u0275\u0275advance(1),o.\u0275\u0275property("attributes",n.attributes)("attributeValues",n.settingValues))},directives:[Ct.AttributesBuilderComponent,d.JL,d.sg,d.JJ,d.u],styles:[""]}),t})(),y6=(()=>{class t{constructor(e,n,a,s){this.data=e,this.dialogRef=n,this.valueComputerService=a,this.fb=s,this.settingValues=[],this.dialogForm=this.fb.group({layout:this.fb.control("")})}get attrValues(){return""===this.dialogForm.get("layout").value?this.settingValues:this.dialogForm.get("layout").value.settings.map(e=>new Ct.AttributeValue(e))}ngOnInit(){this.layout=this.data.layout,this.type=this.data.type,this.settingValues=this.data.settingValues}submit(){console.log(this.attrValues);const e=this.valueComputerService.compute(this.attrValues);this.dialogRef.close(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(Ct.ValueComputerService),o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-layout-dialog"]],decls:6,vars:5,consts:[[1,"layout-form",3,"formGroup","ngSubmit"],["formControlName","layout",3,"layout","type","settingValues"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275element(2,"druid-layout-form",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-dialog-actions"),o.\u0275\u0275elementStart(4,"button",2),o.\u0275\u0275text(5,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.dialogForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("layout",n.layout)("type",n.type)("settingValues",n.settingValues),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!n.dialogForm.valid))},directives:[v6,zi.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),t})(),Yg=(()=>{class t extends ln.BasePluginManager{constructor(e,n){super(e,n)}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"layout"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),VS=(()=>{class t{constructor(e,n,a){this.el=e,this.dialog=n,this.lpm=a,this.itemAdded=new o.EventEmitter,this.itemRemoved=new o.EventEmitter,this.dashboard=[],this.displayMainControls=!0,this.displayItemHeader=!0,this.nested=!1,this.layoutSettingChange=new o.EventEmitter,this.rowSettingsChange=new o.EventEmitter,this.columnSettingsChange=new o.EventEmitter,this.rows=0,this.sizes=[]}get totalRows(){return 0==this.dashboard.length?0:this.dashboard.reduce((e,n)=>n.y>e?n.y:e,0)+1}ngOnInit(){if(0===this.dashboard.length)this.addRow();else{for(let n=0;n<this.totalRows;n++){const a=this.totalColumns(n);this.sizes.push([]);for(let s=0;s<a;s++){const l=this.itemIndex(n,s);this.sizes[n].push(this.dashboard[l].cols)}}if(this.totalRows!==this.rowSettings.length&&0===this.rowSettings.length){const n=[];for(let a=0;a<this.totalRows;a++)n.push(new Qn);this.rowSettings=n,this.rowSettingsChange.emit(this.rowSettings)}let e=0;for(let n=0;n<this.totalRows;n++)e+=this.totalColumns(n);if(e!==this.columnSettings.length&&0===this.columnSettings.length){const n=[];for(let a=0;a<this.totalRows;a++)for(let s=0;s<this.totalColumns(a);s++)n.push(new Qn);this.columnSettings=n,this.columnSettingsChange.emit(this.columnSettings)}}}removeRow(e){const n=this.dashboard.reduce((l,c,f)=>[...l,...c.y===e?[f]:[]],[]);let a=n.length,s=0;for(let l=0;l<a;l++)this.dashboard.splice(n[l]-s,1),this.rowSettings.splice(e,1),s++,this.itemRemoved.emit(n[l]),this.rowSettingsChange.emit(this.rowSettings);a=this.dashboard.length;for(let l=0;l<a;l++)this.dashboard[l].y>e&&(this.dashboard[l].y=this.dashboard[l].y-1)}removeColumn(e,n){const a=this.itemIndex(e,n);this.dashboard.splice(a,1),this.itemRemoved.emit(a)}removeColumn2(e){this.dashboard.splice(e,1),this.itemRemoved.emit(e)}addRow(){this.sizes.push([]),this.rowSettings=[...this.rowSettings.map(e=>new Qn(e)),new Qn],this.addColumn(0===this.totalRows?0:this.totalRows),this.rowSettingsChange.emit(this.rowSettings)}addColumn(e){const n=this.totalColumns(e),a=0===n?100:100/(n+1);this.sizes[e][n]=a,this.dashboard.push({cols:a,rows:1,y:e,x:n}),this.itemAdded.emit(),setTimeout(()=>this.resetGutter())}dragEnd(e,{sizes:n}){const a=this.dashboard.length;let s=0;this.sizes[e]=[...n];const l=this.dashboard.map(c=>({...c}));for(let c=0;c<a;c++)this.dashboard[c].y===e&&(l[c].cols=n[s],s+=1);this.dashboard=l}itemIndex(e,n){return this.dashboard.findIndex(a=>a.y===e&&a.x===n)}itemSize(e,n){return this.dashboard[this.itemIndex(e,n)].cols}totalColumns(e){return this.dashboard.reduce((n,a)=>a.y===e?n+1:n,0)}resetGutter(){this.el.nativeElement.querySelectorAll(".as-split-gutter").forEach(e=>{e.style.height="auto"})}settingValues(e,n){switch(e){case"column":return this.columnSettings[n].settings;case"row":return this.rowSettings[n].settings;case"global":return this.layoutSetting.settings;default:return[]}}layoutSettings(e,n){this.lpm.getPlugin("split").pipe((0,Ke.w)(a=>this.dialog.open(y6,{data:{layout:a,type:e,settingValues:this.settingValues(e,n)}}).afterClosed()),(0,$.h)(a=>!!a)).subscribe(a=>{switch(e){case"column":this.columnSettings=this.columnSettings.map((s,l)=>new Qn(l===n?{settings:a.map(c=>new Ct.AttributeValue(c))}:s)),console.log(this.columnSettings),this.columnSettingsChange.emit(this.columnSettings);break;case"row":this.rowSettings=this.rowSettings.map((s,l)=>new Qn(l===n?{settings:a.map(c=>new Ct.AttributeValue(c))}:s)),console.log(this.rowSettings),this.rowSettingsChange.emit(this.rowSettings);break;case"global":this.layoutSetting=new Qn({settings:a.map(s=>new Ct.AttributeValue(s))}),this.layoutSettingChange.emit(this.layoutSetting)}})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(Yg))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-split-layout"]],contentQueries:function(e,n,a){if(1&e&&(o.\u0275\u0275contentQuery(a,n0,5),o.\u0275\u0275contentQuery(a,Kg,5),o.\u0275\u0275contentQuery(a,r0,5)),2&e){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.gridItemActionsTmpl=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.innerGridItemTmpl=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.extraActionsTmpl=s.first)}},viewQuery:function(e,n){if(1&e&&(o.\u0275\u0275viewQuery(NS,5),o.\u0275\u0275viewQuery(BS,5),o.\u0275\u0275viewQuery(Mh,5)),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.mainControls=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.itemHeaders=a),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.splitAreas=a)}},hostVars:2,hostBindings:function(e,n){2&e&&o.\u0275\u0275classProp("is-nested",n.nested)},inputs:{dashboard:"dashboard",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",nested:"nested",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings"},outputs:{itemAdded:"itemAdded",itemRemoved:"itemRemoved",layoutSettingChange:"layoutSettingChange",rowSettingsChange:"rowSettingsChange",columnSettingsChange:"columnSettingsChange"},decls:6,vars:3,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],[4,"ngTemplateOutlet"],[1,"layout-inner"],["class","rows-wrapper",4,"for"],[1,"rows-wrapper"],[1,"row-controls"],["mat-button","","type","button",3,"matMenuTriggerFor"],["rowActions","matMenu"],["type","button","mat-menu-item","",3,"mousedown"],["type","button","mat-menu-item","",1,"remove-row",3,"mousedown"],[1,"rows-inner"],["unit","percent","direction","horizontal",3,"dragEnd"],[3,"size",4,"for"],[3,"size"],["fxLayout","column","fxFill",""],[1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","",1,"grid-item-inner"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1,2),o.\u0275\u0275template(3,UU,1,0,"ng-container",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",4),o.\u0275\u0275template(5,HU,16,2,"div",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("hidden",!n.displayMainControls),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",n.extraActionsTmpl),o.\u0275\u0275advance(2),o.\u0275\u0275property("for",n.totalRows))},directives:[zi.lW,rp.Hw,ho.VK,ho.OP,Oh,x.NgTemplateOutlet,mn.ForDirective,ho.p6,Mh,ue,Bn,Xt],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.grid-item-header[_ngcontent-%COMP%]{padding:0;display:flex;align-items:baseline}button.delete[_ngcontent-%COMP%]{float:right}.main-controls[_ngcontent-%COMP%]{display:flex;padding:0;align-items:baseline}.rows-inner[_ngcontent-%COMP%]{height:auto;background-color:#fff}.row-controls[_ngcontent-%COMP%]{background-color:gray;padding:0}.remove-row[_ngcontent-%COMP%]{float:right}.is-nested[_nghost-%COMP%]   .layout-wrapper[_ngcontent-%COMP%]{padding:0 .25em;border:1px solid #ccc}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0;color:#fff}.mat-menu-trigger[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}"]}),t})();class GS extends ln.Plugin{constructor(r){if(super(r),this.settings=new Map,r.settings){const e=[];this.renderer=r.renderer,this.editor=r.editor,r.settings.forEach((n,a)=>{e.push([a,n.map(s=>new Ct.Attribute(s))])}),this.settings=new Map(e)}}}let $S=(()=>{class t{constructor(e,n,a,s){this.siteName=e,this.authFacade=n,this.controlContainer=a,this.close=new o.EventEmitter,this.panelPageListItemsService=s.getEntityCollectionService("PanelPageListItem")}ngOnInit(){this.panelPageListItems$=this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`),this.isAuthenticated$=this.authFacade.getUser$.pipe((0,ye.U)(e=>!!e))}login(){this.authFacade.login()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(mn.SITE_NAME),o.\u0275\u0275directiveInject(kr),o.\u0275\u0275directiveInject(d.gN),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-layout-sidenav"]],outputs:{close:"close"},ngContentSelectors:KU,decls:12,vars:6,consts:[[1,"close-wrapper"],[3,"click"],["type","button","class","login","mat-button","",3,"click",4,"ngIf"],[1,"viewport-container"],["appendOnly","","itemSize","48",1,"viewport"],["class","pp-item",4,"cdkVirtualFor","cdkVirtualForOf"],["type","button","mat-button","",1,"login",3,"click"],[1,"pp-item"],[3,"routerLink"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-icon",1),o.\u0275\u0275listener("click",function(){return n.close.emit()}),o.\u0275\u0275text(2,"close"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,qU,2,0,"button",2),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"mat-divider"),o.\u0275\u0275projection(6),o.\u0275\u0275element(7,"mat-divider"),o.\u0275\u0275elementStart(8,"div",3),o.\u0275\u0275elementStart(9,"cdk-virtual-scroll-viewport",4),o.\u0275\u0275template(10,WU,3,4,"div",5),o.\u0275\u0275pipe(11,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",!o.\u0275\u0275pipeBind1(4,2,n.isAuthenticated$)),o.\u0275\u0275advance(7),o.\u0275\u0275property("cdkVirtualForOf",o.\u0275\u0275pipeBind1(11,4,n.panelPageListItems$)))},directives:[rp.Hw,zi.lW,IU.d,Dd.N7,x.NgIf,Dd.xd,Dd.x0,zn.RouterLinkWithHref],pipes:[x.AsyncPipe],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.close-wrapper[_ngcontent-%COMP%]{padding:16px 16px 0;position:relative}.login[_ngcontent-%COMP%]{position:absolute;top:7px;right:5px}.pp-item[_ngcontent-%COMP%]{line-height:48px}.viewport[_ngcontent-%COMP%]{height:100%;width:300px}.viewport-container[_ngcontent-%COMP%]{flex:1;padding:0 0 0 16px;box-sizing:border-box}"]}),t})(),_6=(()=>{class t extends dS{constructor(e,n,a,s){super(a),this.siteName=e,this.authFacade=n,this.controlContainer=a,this.panelPageListItemsService=s.getEntityCollectionService("PanelPageListItem")}ngOnInit(){this.panelPageListItems$=this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`),this.isAuthenticated$=this.authFacade.getUser$.pipe((0,ye.U)(e=>!!e))}login(){this.authFacade.login()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(mn.SITE_NAME),o.\u0275\u0275directiveInject(kr),o.\u0275\u0275directiveInject(d.gN),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-gridless-layout-editor"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:42,vars:19,consts:[["autosize","",3,"hasBackdrop"],["fixedInViewport","","mode","over"],["drawer",""],[3,"close"],[4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown","touchstart"],["cdkDropListGroup","",3,"formGroup","nested"],["extraActions",""],["gridItemActions",""],["innerGridItem",""],["topActions","matMenu"],["mat-menu-item","","type","submit",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown",4,"ngIf"],["mat-menu-item","","type","button",3,"mousedown","touchstart",4,"ngIf"],["mat-menu-item","","type","submit",3,"click"],["type","button","mat-menu-item","",3,"click"],["type","button","mat-menu-item","",3,"mousedown"],["mat-menu-item","","type","button",3,"mousedown","touchstart"],["mat-button","","type","button","class","drawer-trigger",3,"click",4,"ngIf"],["mat-button","","type","button",3,"matMenuTriggerFor",4,"ngIf"],["class","style-title",4,"ngIf"],["class","spacer",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"display-type"],["required","","formControlName","displayType"],["value","page"],["value","form"],["value","json"],[1,"layout-type"],["required","","formControlName","layoutType"],["value","grid"],["value","gridless"],["value","split"],["class","brand",4,"ngIf"],["mat-button","","type","button",1,"drawer-trigger",3,"click"],["mat-button","","type","button",3,"matMenuTriggerFor"],[1,"style-title"],[1,"spacer"],[1,"brand"],["cdkDropList","",1,"panel-dropzone",3,"cdkDropListData","multiple","disableClick","change","cdkDropListDropped"],["panes",""],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){if(1&e){const a=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"mat-sidenav-container",0),o.\u0275\u0275elementStart(1,"mat-sidenav",1,2),o.\u0275\u0275elementStart(3,"druid-layout-sidenav",3),o.\u0275\u0275listener("close",function(){return o.\u0275\u0275restoreView(a),o.\u0275\u0275reference(2).toggle()}),o.\u0275\u0275elementStart(4,"nav"),o.\u0275\u0275elementStart(5,"ul"),o.\u0275\u0275template(6,YU,3,0,"li",4),o.\u0275\u0275template(7,QU,3,0,"li",4),o.\u0275\u0275template(8,JU,3,0,"li",4),o.\u0275\u0275template(9,ZU,3,0,"li",4),o.\u0275\u0275template(10,e5,3,0,"li",4),o.\u0275\u0275template(11,t5,3,0,"li",4),o.\u0275\u0275elementStart(12,"li"),o.\u0275\u0275elementStart(13,"button",5),o.\u0275\u0275listener("mousedown",function(){return n.editor.addContent(0)})("touchstart",function(){return n.editor.addContent(0)}),o.\u0275\u0275text(14,"Add Content"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"li"),o.\u0275\u0275elementStart(16,"button",5),o.\u0275\u0275listener("mousedown",function(){return n.editor.editPanelProps(0)})("touchstart",function(){return n.editor.editPanelProps(0)}),o.\u0275\u0275text(17,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(18,n5,3,0,"li",4),o.\u0275\u0275template(19,i5,3,0,"li",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"mat-sidenav-content"),o.\u0275\u0275elementStart(21,"classifieds-ui-gridless-layout",6),o.\u0275\u0275template(22,h5,26,7,"ng-template",null,7,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(24,m5,1,1,"ng-template",null,8,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(26,y5,4,4,"ng-template",null,9,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(28,"mat-menu",null,10),o.\u0275\u0275template(30,_5,2,0,"button",11),o.\u0275\u0275template(31,x5,2,0,"button",12),o.\u0275\u0275template(32,b5,2,0,"button",12),o.\u0275\u0275template(33,C5,2,0,"button",12),o.\u0275\u0275template(34,w5,2,0,"button",13),o.\u0275\u0275template(35,S5,2,0,"button",13),o.\u0275\u0275elementStart(36,"button",5),o.\u0275\u0275listener("mousedown",function(){return n.editor.addContent(0)})("touchstart",function(){return n.editor.addContent(0)}),o.\u0275\u0275text(37,"Add Content"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(38,"button",5),o.\u0275\u0275listener("mousedown",function(){return n.editor.editPanelProps(0)})("touchstart",function(){return n.editor.editPanelProps(0)}),o.\u0275\u0275text(39,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(40,E5,2,0,"button",14),o.\u0275\u0275template(41,T5,2,0,"button",14),o.\u0275\u0275elementEnd()}2&e&&(o.\u0275\u0275property("hasBackdrop",!1),o.\u0275\u0275advance(6),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable||n.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(7),o.\u0275\u0275property("ngIf",!n.editor.hasPanelStyle(0)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.editor.hasPanelStyle(0)),o.\u0275\u0275advance(2),o.\u0275\u0275property("formGroup",n.controlContainer.control)("nested",n.nested),o.\u0275\u0275advance(9),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable||n.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngIf",!n.editor.hasPanelStyle(0)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.editor.hasPanelStyle(0)))},directives:[Rd.TM,Rd.JX,$S,ho.OP,Rd.Rh,US,zi.lW,rp.Hw,Wt.KE,Hi.gD,ri.ey,Bg,ho.VK,x.NgIf,eu.Fd,d.JL,d.sg,ho.p6,x.NgTemplateOutlet,d.Q7,d.JJ,d.u,eu.Wj,x.NgForOf,eu.Zt],styles:[".layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:70px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}.cdk-drag[_ngcontent-%COMP%]{padding:.25em}.brand[_ngcontent-%COMP%]{font-family:sans-serif;text-align:right;flex:1}.spacer[_ngcontent-%COMP%]{flex:1}.style-title[_ngcontent-%COMP%]{font-family:sans-serif;font-weight:500;text-transform:lowercase;color:#000}.mat-icon[_ngcontent-%COMP%]{color:#000}.drawer-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}"]}),t})(),x6=(()=>{class t extends fS{constructor(e){super(e),this.controlContainer=e}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-gridless-layout-renderer"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"displayMainControls","displayItemHeader"],["innerGridItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"classifieds-ui-gridless-layout",0),o.\u0275\u0275template(1,k5,1,4,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("displayMainControls",n.displayMainControls)("displayItemHeader",n.displayItemHeader)},directives:[US,x.NgTemplateOutlet],styles:["[_nghost-%COMP%]{height:100%}"]}),t})(),b6=(()=>{class t extends dS{constructor(e){super(e),this.controlContainer=e}get gridItems(){return this.dashboard.map((e,n)=>({...e,cols:Math.floor(e.cols),weight:n}))}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-split-layout-editor"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:42,vars:17,consts:[["autosize","",3,"hasBackdrop"],["fixedInViewport","","mode","over"],["drawer",""],[3,"close"],[4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown"],["type","button","mat-menu-item","",3,"click"],["cdkDropListGroup","",3,"nested","formGroup","dashboard","layoutSetting","rowSettings","columnSettings","itemAdded","itemRemoved","layoutSettingChange","rowSettingsChange","columnSettingsChange"],["splitLayout",""],["extraActions",""],["gridItemActions",""],["innerGridItem",""],["topActions","matMenu"],["mat-menu-item","","type","submit",3,"click",4,"ngIf"],["mat-menu-item","","type","button",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown",4,"ngIf"],["mat-menu-item","","type","submit",3,"click"],["mat-menu-item","","type","button",3,"click"],["mat-button","","type","button","class","drawer-trigger",3,"click",4,"ngIf"],["mat-button","","type","button",3,"matMenuTriggerFor",4,"ngIf"],["class","spacer",4,"ngIf"],[1,"display-type"],["required","","formControlName","displayType"],["value","page"],["value","form"],["value","json"],[1,"layout-type"],["required","","formControlName","layoutType"],["value","gridless"],["value","split"],[4,"ngTemplateOutlet"],["class","brand",4,"ngIf"],["mat-button","","type","button",1,"drawer-trigger",3,"click"],["mat-button","","type","button",3,"matMenuTriggerFor"],[1,"spacer"],[1,"brand"],["mat-button","","type","button",1,"panel-actions-btn",3,"matMenuTriggerFor"],["panelActions","matMenu"],["type","button","mat-menu-item","",3,"mousedown","touchstart"],["mat-menu-item","","type","button",3,"mousedown","touchstart",4,"ngIf"],["type","button","mat-menu-item","",1,"delete",3,"mousedown","touchstart"],["class","style-title",4,"ngIf"],["mat-menu-item","","type","button",3,"mousedown","touchstart"],[1,"style-title"],["cdkDropList","",1,"panel-dropzone",3,"cdkDropListData","multiple","disableClick","change","cdkDropListDropped"],["panes",""],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){if(1&e){const a=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"mat-sidenav-container",0),o.\u0275\u0275elementStart(1,"mat-sidenav",1,2),o.\u0275\u0275elementStart(3,"druid-layout-sidenav",3),o.\u0275\u0275listener("close",function(){return o.\u0275\u0275restoreView(a),o.\u0275\u0275reference(2).toggle()}),o.\u0275\u0275elementStart(4,"nav"),o.\u0275\u0275elementStart(5,"ul"),o.\u0275\u0275template(6,I5,3,0,"li",4),o.\u0275\u0275elementStart(7,"li"),o.\u0275\u0275elementStart(8,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(a),o.\u0275\u0275reference(22).addRow()}),o.\u0275\u0275text(9,"Add Row"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"li"),o.\u0275\u0275elementStart(11,"button",6),o.\u0275\u0275listener("click",function(){return n.editor.onPropertiesClick()}),o.\u0275\u0275text(12,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"li"),o.\u0275\u0275elementStart(14,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(a),o.\u0275\u0275reference(22).layoutSettings("global")}),o.\u0275\u0275text(15,"Layout Settings"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(16,P5,3,0,"li",4),o.\u0275\u0275template(17,F5,3,0,"li",4),o.\u0275\u0275template(18,R5,3,0,"li",4),o.\u0275\u0275template(19,D5,3,0,"li",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"mat-sidenav-content"),o.\u0275\u0275elementStart(21,"classifieds-ui-split-layout",7,8),o.\u0275\u0275listener("itemAdded",function(){return n.editor.onItemAdded()})("itemRemoved",function(l){return n.editor.onItemRemoved(l)})("layoutSettingChange",function(l){return n.editor.onLayoutSettingChange(l)})("rowSettingsChange",function(l){return n.editor.onRowSettingsChange(l)})("columnSettingsChange",function(l){return n.editor.onColumnSettingsChange(l)}),o.\u0275\u0275template(23,U5,23,6,"ng-template",null,9,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(25,H5,16,4,"ng-template",null,10,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(27,W5,4,4,"ng-template",null,11,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(29,"mat-menu",null,12),o.\u0275\u0275template(31,K5,2,0,"button",13),o.\u0275\u0275elementStart(32,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(a),o.\u0275\u0275reference(22).addRow()}),o.\u0275\u0275text(33,"Add Row"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(34,"button",6),o.\u0275\u0275listener("click",function(){return n.editor.onPropertiesClick()}),o.\u0275\u0275text(35,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(36,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(a),o.\u0275\u0275reference(22).layoutSettings("global")}),o.\u0275\u0275text(37,"Layout Settings"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(38,Y5,2,0,"button",14),o.\u0275\u0275template(39,Q5,2,0,"button",15),o.\u0275\u0275template(40,J5,2,0,"button",15),o.\u0275\u0275template(41,Z5,2,0,"button",14),o.\u0275\u0275elementEnd()}2&e&&(o.\u0275\u0275property("hasBackdrop",!1),o.\u0275\u0275advance(6),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(10),o.\u0275\u0275property("ngIf",n.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.nested),o.\u0275\u0275advance(2),o.\u0275\u0275property("nested",n.nested)("formGroup",n.controlContainer.control)("dashboard",n.dashboard)("layoutSetting",n.layoutSetting)("rowSettings",n.rowSettings)("columnSettings",n.columnSettings),o.\u0275\u0275advance(10),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(7),o.\u0275\u0275property("ngIf",n.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.nested))},directives:[Rd.TM,Rd.JX,$S,ho.OP,Rd.Rh,VS,zi.lW,rp.Hw,Wt.KE,Hi.gD,ri.ey,ho.VK,Bg,x.NgIf,eu.Fd,d.JL,d.sg,ho.p6,x.NgTemplateOutlet,d.Q7,d.JJ,d.u,eu.Wj,x.NgForOf,eu.Zt],styles:[".layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:70px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}.cdk-drag[_ngcontent-%COMP%]{padding:.25em}.panel-actions-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}.brand[_ngcontent-%COMP%]{font-family:sans-serif;text-align:right;flex:1}.spacer[_ngcontent-%COMP%]{flex:1}.style-title[_ngcontent-%COMP%]{font-family:sans-serif;font-weight:500;text-transform:lowercase;color:#000}.drawer-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}"]}),t})(),C6=(()=>{class t extends fS{constructor(e){super(e),this.controlContainer=e}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-flex-layout-renderer"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"dashboard","layoutSetting","rowSettings","columnSettings"],["innerGridItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"classifieds-ui-flex-layout",0),o.\u0275\u0275template(1,t6,1,4,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("dashboard",null==n.panelPage?null:n.panelPage.gridItems)("layoutSetting",n.panelPage.layoutSetting)("rowSettings",n.panelPage.rowSettings)("columnSettings",n.columnSettings)},directives:[g6,x.NgTemplateOutlet],encapsulation:2}),t})();const w6=()=>{const t=new Map([["row",[new Ct.Attribute({name:"flexGrow",type:Ct.AttributeTypes.Text,label:"Flex Grow",required:!1,widget:"text",options:{},attributes:[]}),new Ct.Attribute({name:"flexShrink",type:Ct.AttributeTypes.Text,label:"Flex Shrink",required:!1,widget:"text",options:{},attributes:[]}),new Ct.Attribute({name:"flexBasis",type:Ct.AttributeTypes.Text,label:"Flex Basis",required:!1,widget:"text",options:{},attributes:[]}),new Ct.Attribute({name:"height",type:Ct.AttributeTypes.Text,label:"Height",required:!1,widget:"text",options:{},attributes:[]}),new Ct.Attribute({name:"direction",type:Ct.AttributeTypes.Text,label:"Direction",required:!1,widget:"text",options:{},attributes:[]})]],["column",[new Ct.Attribute({name:"height",type:Ct.AttributeTypes.Text,label:"Height",required:!1,widget:"text",options:{},attributes:[]})]],["global",[new Ct.Attribute({name:"direction",type:Ct.AttributeTypes.Text,label:"Direction",required:!1,widget:"text",options:{},attributes:[]})]]]);return new GS({id:"split",title:"Split",editor:b6,renderer:C6,settings:t})};let HS=(()=>{class t{constructor(e){[w6(),new GS({id:"gridless",title:"Gridless",editor:_6,renderer:x6,settings:new Map})].forEach(n=>{e.register(n)})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Yg))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.u5,zn.RouterModule,d.UX,sr.MaterialModule,wl,Cg,LS,jg,mn.UtilsModule,Fh,Ct.AttributesModule]]}),t})();function E6(t,r){if(1&t&&o.\u0275\u0275element(0,"ngx-json-viewer",12),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("json",e.jsonData)("expanded",!1)}}class Qg{constructor(r){this.params=[],r&&(this.url=r.url,this.method=r.method?r.method:void 0,void 0!==r.renderer&&(this.renderer=new b_(r.renderer)),void 0!==r.params&&(this.params=r.params.map(e=>new lr(e))),r.body&&(this.body=new Hc(r.body)))}}let op=(()=>{class t{constructor(e,n,a){this.fb=e,this.datasourceApi=n,this.tokenizerService=a,this.dataChange=new o.EventEmitter,this.contexts=[],this.sourceForm=this.fb.group({url:this.fb.control("",d.kI.required),params:this.fb.control([]),body:this.fb.control(""),method:this.fb.control("get",[d.kI.required])}),this.restSource$=new m.X(new Qg),this.componentDestroyed=new M.x,this.refreshData$=new M.x,this.refreshSubscription=this.refreshData$.pipe((0,ye.U)(()=>this.generateUrl()),(0,ee.b)(s=>console.log(s)),(0,$.h)(s=>s&&""!==s.trim()),(0,Ke.w)(s=>this.datasourceApi.getData(s).pipe((0,Qi.K)(l=>(console.log(l),(0,Re.of)([]))))),(0,Wi.R)(this.componentDestroyed)).subscribe(s=>{this.jsonData=s,this.dataChange.emit(s)}),this.urlChangeSub=this.sourceForm.get("url").valueChanges.pipe((0,Hn.b)(500),(0,$.h)(s=>s&&""!==s.trim()),(0,ye.U)(s=>[s,s.indexOf("?")]),(0,ye.U)(([s,l])=>[l>-1?s.substring(0,l):s,l>-1?s.substring(l+1):""])).subscribe(([s,l])=>{const f={...s.split("/").reduce((h,g,I)=>0===g.indexOf(":")?{...h,[g.substr(1)]:g}:h,{}),...Fo.parse(l)};this.paramsParsed=f}),this.restSourceSub=this.restSource$.pipe((0,ee.b)(s=>{s?(this.sourceForm.get("url").setValue(s.url),this.sourceForm.get("method").setValue(s.method?s.method:""),this.sourceForm.get("body").setValue(s.body?{...s.body,jsScript:""}:"")):(this.sourceForm.get("url").setValue(""),this.sourceForm.get("method").setValue(""),this.sourceForm.get("body").setValue(""))})).subscribe(),this.onTouched=()=>{}}set restSource(e){this.restSource$.next(e)}ngOnInit(){this.sourceForm.valueChanges.pipe((0,Hn.b)(1e3)).subscribe(()=>{console.log("refresh data"),this.refreshData$.next(void 0)})}ngOnDestroy(){this.componentDestroyed.next(void 0),this.componentDestroyed.complete()}writeValue(e){e&&this.sourceForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.sourceForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.sourceForm.disable():this.sourceForm.enable()}validate(e){return this.sourceForm.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}generateUrl(){console.log("generate url");const e=this.sourceForm.get("url").value,[n,a]=e?e.split("?",2):["",""],s=Fo.parse(a),l={},c=n.split("/"),f=c.length,h=[];let g=0;for(let B=0;B<f;B++)if(0===c[B].indexOf(":")){if(!this.sourceForm.get("params").value[g])return"";const V=this.sourceForm.get("params").value[g].mapping;h.push("static"===V.value.type?V.value.value:V.value.testValue),g++}else h.push(c[B]);for(const B in s)if("string"==typeof s[B]&&s[B].indexOf(":")>-1){if(!this.sourceForm.get("params").value[g])return"";const V=this.sourceForm.get("params").value[g].mapping;l[B]="static"===V.type?V.value:V.testValue,g++}const I=h.join("/")+(""!==a?"?"+Fo.stringify({...s,...l}):"");return console.log(I),I}onDataChange(e){this.tokens=this.tokenizerService.generateGenericTokens(e[0])}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Vh),o.\u0275\u0275directiveInject(Xn))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-rest-source-form"]],inputs:{restSource:"restSource",contexts:"contexts"},outputs:{dataChange:"dataChange"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:19,vars:7,consts:[["direction","horizontal",3,"formGroup"],["as-split-area","","size","50"],["required","","formControlName","method"],["value","get"],["value","post"],["value","put"],["value","delete"],["matInput","","placeholder","Url","formControlName","url","required",""],["formControlName","body","rows","10","cols","40",3,"rootForm","tokens"],["formControlName","params",3,"params","paramValues","contexts"],["size","50"],[3,"json","expanded",4,"ngIf"],[3,"json","expanded"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"as-split",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275elementStart(4,"mat-select",2),o.\u0275\u0275elementStart(5,"mat-option",3),o.\u0275\u0275text(6,"GET"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-option",4),o.\u0275\u0275text(8,"POST"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-option",5),o.\u0275\u0275text(10,"PUT"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"mat-option",6),o.\u0275\u0275text(12,"DELETE"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"mat-form-field"),o.\u0275\u0275element(14,"input",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(15,"classifieds-ui-snippet-form",8),o.\u0275\u0275element(16,"classifieds-ui-params-form",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"as-split-area",10),o.\u0275\u0275template(18,E6,1,2,"ngx-json-viewer",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.sourceForm),o.\u0275\u0275advance(15),o.\u0275\u0275property("rootForm",!1)("tokens",n.tokens),o.\u0275\u0275advance(1),o.\u0275\u0275property("params",n.paramsParsed)("paramValues",n.restSource$.value.params)("contexts",n.contexts),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.jsonData))},directives:[Oh,Wt.KE,Hi.gD,ri.ey,Ag,Bh,fy,d.JL,d.sg,Mh,d.Q7,d.JJ,d.u,In.Nt,d.Fj,x.NgIf],styles:[""]}),t})(),T6=(()=>{class t{constructor(e,n){this.attributeSerializer=e,this.controlContainer=n,this.contexts=[]}set settings(e){this.restSource=e?new Qg(this.attributeSerializer.deserializeAsObject(e)):void 0}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-rest-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"restSource","contexts"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-rest-source-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("restSource",n.restSource)("contexts",n.contexts))},directives:[op,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})();const ap=({method:t,url:r,data:e,options:n,params:a,http:s})=>{if(e instanceof Error)return(0,Re.of)([]);let c;switch(t){case"DELETE":c=s.delete(r,n),a.has("saveDelay")&&(c=c.pipe((0,ui.g)(+a.get("saveDelay"))));break;case"GET":{const f=a.has("suffix")?r+a.get("suffix"):r;c=s.get(f,n),a.has("getDelay")&&(c=c.pipe((0,ui.g)(+a.get("getDelay"))));break}case"POST":c=s.post(r,e,n),a.has("saveDelay")&&(c=c.pipe((0,ui.g)(+a.get("saveDelay"))));break;case"PUT":c=s.put(r,e,n),a.has("saveDelay")&&(c=c.pipe((0,ui.g)(+a.get("saveDelay"))));break;default:{const f=new Error("Unimplemented HTTP method, "+t);c=(0,Go._)(f)}}return a.has("timeout")&&(c=c.pipe((0,xf.V)(+a.get("timeout")+ +a.get("saveDelay")))),c.pipe((0,Qi.K)(()=>(0,Re.of)([])))};let qS=(()=>{class t{constructor(e,n,a,s){this.attrbuteSerializer=e,this.http=n,this.snippetParserService=a,this.urlGenerator=s}fetchDataset({settings:e,metadata:n}){return(0,Re.of)(new qn).pipe((0,ee.b)(()=>console.log("START rest fetch")),(0,ye.U)(()=>this.attrbuteSerializer.deserializeAsObject(e)),(0,ye.U)(a=>new Qg(a)),(0,Ke.w)(a=>this.urlGenerator.getUrl(a.url,a.params,n).pipe((0,ye.U)(s=>new Qg({...a,url:s})))),(0,$.h)(a=>a.url&&""!==a.url.trim()&&a.url.indexOf("http")>-1),(0,Ke.w)(a=>ap({url:a.url,method:"POST"===a.method.toUpperCase()?"POST":"GET",http:this.http,params:new Map}).pipe((0,Qi.K)(()=>(0,Re.of)([])),(0,ye.U)(s=>Array.isArray(s)?s:[s]),(0,ye.U)(s=>new qn({results:s})))),(0,ee.b)(()=>console.log("END rest fetch")))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(L.HttpClient),o.\u0275\u0275inject(fw),o.\u0275\u0275inject(Kl))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),XS=(()=>{class t extends Gu{constructor(e){super(e),this.pluralizer2=e}getResourceUrls(e,n,a=!1){const s=a?n:Bf(n);return{entityResourceUrl:`${s}/${e}/`.toLowerCase(),collectionResourceUrl:`${s}/${this.pluralizer2.pluralize(e)}/`.toLowerCase()}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Il))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),WS=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g){e.register(((t,r,e)=>new bs({id:"rest",title:"Rest",editor:T6,fetch:({settings:n,metadata:a})=>t.fetchDataset({settings:n,metadata:a}),editorOptions:()=>(0,Re.of)(new Ig({fullscreen:!0})),getBindings:({settings:n})=>(0,Re.of)([]).pipe((0,ye.U)(()=>e.deserializeAsObject(n)),(0,ye.U)(s=>new Ua(s)),(0,Ke.w)(s=>r.extractContexts(s.params)),(0,ye.U)(s=>s.map(l=>new Gt.ContentBinding({id:l,type:"context"}))))}))(n,a,s)),l.register(((t,r,e,n)=>new Kc({id:"rest",title:"Rest",create:({object:a,params:s})=>(0,Re.of)({success:!1}).pipe((0,Ke.w)(()=>t.paramValues(new Map(Object.keys(s).map(l=>[l,s[l]])))),(0,Ke.w)(l=>ap({method:"POST",url:e.entityResource(l.get("entityName"),l.has("root")?l.get("root"):n.root?n.root:"api",!0),data:a||new Error("No entity to add"),params:l,http:r})),(0,ye.U)(()=>({success:!0,entity:a}))),read:({})=>(0,Re.of)({success:!1}),update:({object:a,identity:s,params:l,parentObject:c})=>(0,Re.of)({success:!1}).pipe((0,Ke.w)(()=>s({object:a,parentObject:c})),(0,Ke.w)(({identity:f})=>t.paramValues(new Map(Object.keys(l).map(h=>[h,l[h]]))).pipe((0,ye.U)(h=>({identity:f,options:h})))),(0,Ke.w)(({identity:f,options:h})=>ap({method:"PUT",url:e.entityResource(h.get("entityName"),h.has("root")?h.get("root"):n.root?n.root:"api",!0)+`${f}`,data:a||new Error("No entity to add"),params:h,http:r})),(0,ye.U)(()=>({success:!0,entity:a}))),delete:({})=>(0,Re.of)({success:!1}),query:({params:a,rule:s})=>(0,Re.of)({success:!1}).pipe((0,Ke.w)(()=>t.paramValues(new Map(Object.keys(a).map(l=>[l,a[l]])))),(0,Ke.w)(l=>new y.y(c=>{const f=s?s.conditions.all.reduce((g,I)=>[...g,...I.any.filter(B=>"identity"!==B.fact).map(B=>`${B.path.substr(2)}=${B.value}`)],[]):[],h=s?s.conditions.all.reduce((g,I)=>g||I.any.find(B=>"identity"===B.fact),void 0):void 0;c.next({identityFact:h,options:l,query:f.length>0?new L.HttpParams({fromString:f.join("&")}):void 0,path:h?h.value:""}),c.complete()})),(0,Ke.w)(({options:l,query:c,path:f,identityFact:h})=>Gn(()=>!!h,ap({method:"GET",url:e.entityResource(l.get("entityName"),l.has("root")?l.get("root"):n.root?n.root:"api",!0)+f,options:{params:c},params:l,http:r}).pipe((0,ye.U)(g=>({success:!0,entities:Array.isArray(g)?g:[g]}))),ap({method:"GET",url:e.collectionResource(l.get("entityName"),l.has("root")?l.get("root"):n.root?n.root:"api")+f,options:{params:c},params:l,http:r}).pipe((0,ye.U)(g=>({success:!0,entities:g}))))))}))(c,f,h,g))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(qS),o.\u0275\u0275inject(P_),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(il),o.\u0275\u0275inject(tl),o.\u0275\u0275inject(L.HttpClient),o.\u0275\u0275inject(XS),o.\u0275\u0275inject(jr))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[qS,XS],imports:[[x.CommonModule,d.u5,d.UX,sr.MaterialModule,Cg,Au,g_,Yl,Fh,$h,Wl]]}),t})();var sp=S(7260),a0=S(3012),I6=S(9663),P6=S(420),KS=S(1817),lp=S(4874),YS=S(6607);let R6=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[]]}),t})();const Od=({selector:t,document:r})=>{const e=r.createDocumentFragment();if(!t||-1!==t.indexOf("undefined"))return!1;try{e.querySelector(t)}catch{return!1}return!0},D6=/\/\*[\s\S]*?\*\//g,O6=/([^\:]+):([^\;]*);/,M6=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,Jg=function(t){return void 0===t||0==t.length||null==t},L6={ordered:!1,comments:!1,stripComments:!1,split:!1};let N6=(()=>{class t{constructor(e){this.document=e,this.mutate$=new M.x,this.mutated$=new M.x,this.mutateSub=this.mutate$.pipe((0,$.h)(({record:n})=>"attributes"===n.type&&"style"===n.attributeName&&!!n.target),(0,Hn.b)(2e3),(0,Ke.w)(({record:n,overlay:a})=>this.mapRecord({record:n,overlay:a})),(0,ee.b)(({stylesheet:n})=>this.mutated$.next({stylesheet:n}))).subscribe()}stylize({targetNode:e}){const n=new Map;new MutationObserver(l=>{l.forEach(c=>{this.mutate$.next({record:c,overlay:n})})}).observe(e,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"],attributeOldValue:!0})}mapRecord({record:e,overlay:n}){return new y.y(a=>{const s=YS.default(e.target),l=this.toJSON(`${s} { ${e.oldValue} }`),c=l.children[s]?Object.keys(l.children[s].attributes).reduce((B,V)=>({...B,[Yc(V.replace("-","_"),!1)]:l.children[s].attributes[V]}),{}):void 0,f=Object.keys(e.target.style).reduce((B,V)=>NaN!==parseInt(V)&&e.target.style.hasOwnProperty(Yc(e.target.style[V].replace("-","_"),!1))?{...B,[Yc(e.target.style[V].replace("-","_"),!1)]:e.target.style[Yc(e.target.style[V].replace("-","_"),!1)]}:B,{}),h=Hh(c,f);n.set(s,h);const g=[];n.forEach((B,V)=>{const Ie=V.split(" ").reduce((he,Se,Oe)=>-1!==Se.indexOf(".pane-")||-1!==Se.indexOf(".panel-")?{selector:[...he.selector,Se.replace(/^(.*?)(\.pane-|\.panel-page|\.panel-)([0-9]*)(.*?)$/,"$2$3")],chars:he.chars+Se.length,lastIndex:he.chars+Oe+Se.length}:{...he,chars:he.chars+Se.length},{selector:[],chars:0,lastIndex:0});if(0!==Ie.selector.length){let he=(Ie.selector.join(" ")+" "+V.slice(Ie.lastIndex).split(">").join("")).replace(/(\.ng\-[a-zA-Z0-9_-]*)/gm,"").trim();0===he.indexOf(".panel-page")&&(he=he.substr(12).trim()),Od({selector:he,document:this.document})&&g.push(he+" { "+Object.keys(B).reduce((Oe,Be)=>Be.match(/^[a-zA-Z-]*$/gm)?`${Oe}${function d4(t){return t.replace(/_/g,"-")}(function qh(t){var r=""+t;return(r=(r=(r=(r=r.replace(new RegExp("(?:([A-Za-z\\d])|^)("+Ss().acronymRegex.source+")(?=\\b|[^a-z])","g"),function(e,n,a){return(n||"")+(n?"_":"")+a.toLowerCase()})).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2")).replace(/([a-z\d])([A-Z])/g,"$1_$2")).replace(/-/g,"_")).toLowerCase()}(Be))}: ${B[Be]};`:Oe,"")+" }")}});const I=g.join("\n");a.next({stylesheet:I}),a.complete()})}toJSON(e,n=L6){const f={children:{},attributes:{}};let h=null,g=0;for(n.stripComments&&(n.comments=!1,e=e.replace(D6,""));null!=(h=M6.exec(e));)if(!Jg(h[1])&&n.comments)f[g++]=h[1].trim();else if(Jg(h[2])){if(!Jg(h[3]))return f;if(!Jg(h[4])){const I=h[4].trim(),B=O6.exec(I);if(B){const V=B[1].trim(),ce=B[2].trim();if(n.ordered)f[g++]={name:V,value:ce,type:"attr"};else if(V in f.attributes){const Ie=f.attributes[V];Ie instanceof Array||(f.attributes[V]=[Ie]),f.attributes[V].push(ce)}else f.attributes[V]=ce}else f[g++]=I}}else{const I=h[2].trim(),B=this.toJSON(e,n);if(n.ordered)f[g++]={name:I,value:B,type:"rule"};else{const V=n.split?I.split(","):[I];for(const ce in V){const Ie=V[ce].trim();if(Ie in f.children)for(const he in B.attributes)f.children[Ie].attributes[he]=B.attributes[he];else f.children[Ie]=B}}}return f}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(x.DOCUMENT))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ol=(()=>{return(t=ol||(ol={}))[t.KEEP=0]="KEEP",t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",ol;var t})();let B6=(()=>{class t{constructor(e){this.document=e,this.mutate=new M.x,this.mutated$=new M.x,this.mutateub=this.mutate.pipe((0,$.h)(({record:n})=>"attributes"===n.type&&"class"===n.attributeName&&!!n.target),(0,Hn.b)(2e3),(0,Ke.w)(({record:n,overlay:a,originals:s})=>this.mapRecord({record:n,overlay:a,originals:s}).pipe((0,Qi.K)(l=>(0,Re.of)({classes:a})))),(0,ee.b)(({classes:n})=>this.mutated$.next({classes:n}))).subscribe()}classify({targetNode:e}){const n=new Map,a=new Map;new MutationObserver(c=>{c.forEach(f=>{this.mutate.next({record:f,overlay:n,originals:a})})}).observe(e,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0})}mapRecord({record:e,overlay:n,originals:a}){return new y.y(s=>{const l=YS.default(e.target);let c="";const f=e.oldValue.split(" ").map(B=>B.trim()),g=l.split(" ").reduce((B,V,ce)=>-1!==V.indexOf(".pane-")||-1!==V.indexOf(".panel-")?{selector:[...B.selector,V.replace(/^(.*?)(\.pane-|\.panel-page|\.panel-)([0-9]*)(.*?)$/,"$2$3")],chars:B.chars+V.length,lastIndex:B.chars+ce+V.length}:{...B,chars:B.chars+V.length},{selector:[],chars:0,lastIndex:0});if(0!==g.selector.length){const B=l.substring(g.lastIndex).split(">").map(V=>V.trim()).filter(V=>""!==V).map((V,ce)=>{const Ie=V.indexOf("."),he=-1===Ie?B:V.substring(0,Ie),Oe=(-1===Ie?[]:V.substring(Ie+1).split(".")).filter(Be=>void 0!==f.find(et=>Be===et));return(0===ce?" > ":"")+he+(0===Oe.length?"":"."+Oe.join("."))});c=(g.selector.join(" ")+B.join(" > ")).replace(/(\.ng\-[a-zA-Z0-9_-]*)/gm,""),0===c.indexOf(".panel-page")&&(c=c.substr(12).trim())}if(Od({selector:c,document:this.document})){a.has(c)||a.set(c,new Set(f));const B=e.target.classList,V=new Map(Array.from(B.values()).map(Ie=>[`${Ie}`,!a.has(c)||!a.get(c).has(`${Ie}`)&&0!==`${Ie}`.indexOf("ng-")&&0!==`${Ie}`.indexOf("mat-")?ol.ADD:ol.KEEP])),ce=Array.from(a.get(c)).reduce((Ie,he)=>[-1===Array.from(B.values()).findIndex(Se=>Se===he)?he:void 0],[]).filter(Ie=>void 0!==Ie);0!==ce.length&&ce.forEach(Ie=>V.set(Ie,ol.REMOVE)),0===V.size&&n.has(c)?n.delete(c):0!==V.size&&n.set(c,V),s.next({classes:n}),s.complete()}else s.error(new Error('Selector invalid "'+c+'"')),s.complete()})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(x.DOCUMENT))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const j6=["renderPanelTpl"];function z6(t,r){}function U6(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",4),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().submit()}),o.\u0275\u0275text(1,"Submit"),o.\u0275\u0275elementEnd()}}function V6(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275elementContainerStart(1,5),o.\u0275\u0275element(2,"classifieds-ui-render-panel",6),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.i,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",n.pageForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("formControlName",e)("panel",n.panelPageCached.panels[e])("nested",n.nested$.value)("contexts",n.contexts$.value)("resolvedContext",n.resolvedContext)("contextsChanged",n.contextsChanged)("displayType",n.panelPageCached.displayType)("indexPosition",e)("css",n.filteredCss)("listeners",n.filteredListeners)("ancestory",n.ancestory$.value)}}function G6(t,r){}function $6(t,r){if(1&t&&o.\u0275\u0275element(0,"classifieds-ui-panel-page",4),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("panelPage",e.panelPage)("nested",!0)("contexts",e.contexts)("css",e.filteredCss)("listeners",e.filteredListeners)("ancestory",e.ancestoryWithSelf)}}function H6(t,r){if(1&t&&o.\u0275\u0275element(0,"classifieds-ui-panel-page",5),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("id",e.linkedPageId)("nested",!0)("contexts",e.contexts)("ancestory",e.ancestoryWithSelf)}}function q6(t,r){if(1&t&&o.\u0275\u0275element(0,"classifieds-ui-panel-page",4),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("panelPage",e.embedPanel)("nested",!0)("contexts",e.contexts)("css",e.filteredCss)("listeners",e.filteredListeners)("ancestory",e.ancestoryWithSelf)}}const X6=["panes"];function W6(t,r){}function K6(t,r){if(1&t&&o.\u0275\u0275element(0,"classifieds-ui-render-pane",8),2&t){const e=r.$implicit,n=r.index,a=o.\u0275\u0275nextContext(3),s=o.\u0275\u0275reference(1);o.\u0275\u0275property("formControlName",n)("pluginName",e.contentPlugin)("settings",e.settings)("name",e.name)("label",e.label)("originPane",a.panel.panes[a.originMappings[n]])("contexts",e.contexts)("displayType",a.displayType)("resolvedContext",e.resolvedContext)("indexPosition",n)("css",a.filteredCss)("listeners",a.filteredListeners)("ancestory",a.ancestoryWithSelf$.value)("panes",s)("originPanes",a.originPanes)}}function Y6(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275elementContainerStart(2,6),o.\u0275\u0275template(3,K6,1,15,"classifieds-ui-render-pane",7),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",e.resolvedPanes)}}function Q6(t,r){if(1&t&&o.\u0275\u0275element(0,"classifieds-ui-render-pane",10),2&t){const e=r.$implicit,n=r.index,a=o.\u0275\u0275nextContext(3),s=o.\u0275\u0275reference(1);o.\u0275\u0275property("pluginName",e.contentPlugin)("settings",e.settings)("name",e.name)("label",e.label)("originPane",a.panel.panes[a.originMappings[n]])("contexts",e.contexts)("linkedPageId",e.linkedPageId)("displayType",a.displayType)("resolvedContext",e.resolvedContext)("indexPosition",n)("css",a.filteredCss)("listeners",a.filteredListeners)("ancestory",a.ancestoryWithSelf$.value)("panes",s)("originPanes",a.originPanes)}}function J6(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Q6,1,15,"classifieds-ui-render-pane",9),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.resolvedPanes)}}function Z6(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementContainerStart(1,4),o.\u0275\u0275template(2,Y6,4,1,"ng-container",5),o.\u0275\u0275template(3,J6,2,1,"ng-container",5),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitch",e.displayType),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","form"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","page")}}let Zg=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","classifiedsUiPaneContentHost",""]]}),t})(),QS=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","classifiedsUiLayoutRendererHost",""]]}),t})();class Zr{constructor(r,e,n,a,s,l,c,f,h,g,I,B,V,ce,Ie,he,Se,Oe,Be,et,at,ft,Pt,Rt,on,an,Vt){this.platformId=r,this.mediaSettings=e,this.routerStore=n,this.fb=a,this.el=s,this.inlineContextResolver=l,this.pageBuilderFacade=c,this.cpm=f,this.cxm=h,this.lpm=g,this.componentFactoryResolver=I,this.styleLoader=B,this.http=V,this.cssHelper=ce,this.attributeSerializer=Ie,this.formService=he,this.panelsContextService=Se,this.asyncApiCallHelperSvc=Oe,this.crudDataHelperService=Be,this.entityDefinitionService=et,this.ngZone=at,this.persistService=ft,this.stylizerService=Pt,this.classifyService=Rt,this.fileService=on,this.authFacade=an,this.resolvedContext={},this.contextsChanged=[],this.persistenceEnabled=!1,this.onInit$=new M.x,this.afterViewInit$=new M.x,this.afterContentInit$=new M.x,this.renderLayout$=new M.x,this.id$=new m.X(void 0),this.panelPage$=new m.X(void 0),this.nested$=new m.X(!1),this.ancestory$=new m.X([]),this.contexts$=new m.X([]),this.instanceUniqueIdentity=ai(),this.isStable=!1,this.managedCssCache="",this.managedClassesCache={},this.filteredListeners=[],this.css$=new m.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=this.css$.subscribe(At=>{this.nested$.value&&console.log("filtered css nested",At),this.filteredCss=At}),this.listeners$=new m.X([]),this.listenersSub=this.listeners$.pipe((0,ee.b)(At=>{this.filteredListeners=At})).subscribe(),this.settingsFormArray=this.fb.array([]),this.pageForm=this.fb.group({panels:this.fb.array([])}),this.bridgeSub=this.pageForm.valueChanges.pipe((0,$.h)(()=>this.nested$.value),(0,Hn.b)(500)).subscribe(At=>{console.log("write page"),console.log(At),this.settingsFormArray.clear();const $t=this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(At,"value").attributes[0]);this.settingsFormArray.push($t),console.log($t.value)}),this.idOrPanelPageSub=(0,Ln.a)([this.id$,this.panelPage$]).pipe((0,xs.x)(),(0,ye.U)(([At,$t])=>({id:At,panelPage:$t})),(0,$.h)(({id:At,panelPage:$t})=>!!At||!!$t),(0,Ke.w)(({id:At,panelPage:$t})=>Gn(()=>!At,(0,Re.of)({panelPage:$t}),new y.y(_n=>{const Wn=this.entityDefinitionService.getDefinition("PanelPage").metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:`identity=${At}`,plugins:Wn.crud,op:"query"}).pipe((0,ye.U)(fn=>fn&&0!==fn.length?fn[0]:void 0),(0,ee.b)(fn=>{_n.next({panelPage:fn}),_n.complete()})).subscribe()}))),(0,Ke.w)(({panelPage:At})=>this.cpm.getPlugins(At.panels.reduce(($t,_n)=>(_n.panes.forEach(Wn=>{$t.includes(Wn.contentPlugin)||$t.push(Wn.contentPlugin)}),$t),[])).pipe((0,ye.U)(()=>({panelPage:At})))),(0,Ke.w)(({panelPage:At})=>Gn(()=>!this.nested$.value,this.panelsContextService.allActivePageContexts({panelPage:At}).pipe((0,ye.U)($t=>({panelPage:At,contexts:Array.from($t)}))),(0,Re.of)({panelPage:At,contexts:[]}))),(0,ee.b)(({panelPage:At,contexts:$t})=>{this.hookupFormChange({panelPage:At}),this.populatePanelsFormArray({panelPage:At}),this.panelPageCached=At,this.persistenceEnabled=At.persistence&&At.persistence.dataduct&&At.persistence.dataduct.plugin&&""!==At.persistence.dataduct.plugin,this.filteredListeners=At.interactions&&At.interactions.interactions&&At.interactions.interactions.listeners?At.interactions.interactions.listeners:[],this.renderLayout$.next(At),this.contexts$.next([...At.contexts?At.contexts.map(_n=>new Jr(_n)):[],...$t]),this.hookupCss({file:At.cssFile?At.cssFile.trim():void 0}),console.log(`cached panel page: ${At.id}`)})).subscribe(),this.hookupContextSub=(0,Ln.a)(this.contexts$,this.afterContentInit$).pipe((0,ye.U)(([At])=>At),(0,Ke.w)(At=>this.inlineContextResolver.resolveMerged(At,`panelpage:${ai()}`).pipe((0,Ke.w)($t=>this.cxm.getPlugins().pipe((0,ye.U)(_n=>({contexts:At,resolvedContext:$t,globalPlugins:Array.from(_n.values()).filter(Wn=>!0===Wn.global)})))),(0,hn.q)(1))),(0,ee.b)(()=>{this.resolveSub&&this.resolveSub.unsubscribe()}),(0,ee.b)(({contexts:At,resolvedContext:$t,globalPlugins:_n})=>{this.resolvedContext=$t;const Wn=new M.x;if((0,x.isPlatformServer)(this.platformId)){const fn=setInterval(()=>{0===Zr.registredContextListeners.size&&(Wn.next(),Wn.complete(),clearInterval(fn))},1e3)}this.resolveSub=this.inlineContextResolver.resolveMergedSingle(At).pipe((0,sp.T)(_n.length+(At?At.length:0)),(0,ee.b)(()=>Zr.registredContextListeners.add(this.instanceUniqueIdentity)),(0,ee.b)(fn=>console.log("buffer",fn)),function F6(t,...r){var e,n;const a=null!==(e=(0,P6.yG)(r))&&void 0!==e?e:Ls.z,s=null!==(n=r[0])&&void 0!==n?n:null,l=r[1]||1/0;return(0,ls.e)((c,f)=>{let h=[],g=!1;const I=ce=>{const{buffer:Ie,subs:he}=ce;he.unsubscribe(),(0,I6.P)(h,ce),f.next(Ie),g&&B()},B=()=>{if(h){const ce=new Mw.w0;f.add(ce);const he={buffer:[],subs:ce};h.push(he),(0,KS.f)(ce,a,()=>I(he),t)}};null!==s&&s>=0?(0,KS.f)(f,a,B,s,!0):g=!0,B();const V=(0,ss.x)(f,ce=>{const Ie=h.slice();for(const he of Ie){const{buffer:Se}=he;Se.push(ce),l<=Se.length&&I(he)}},()=>{for(;null==h?void 0:h.length;)f.next(h.shift().buffer);null==V||V.unsubscribe(),f.complete(),f.unsubscribe()},void 0,()=>h=null);c.subscribe(V)})}(1),(0,ee.b)(fn=>{0===fn.length&&Zr.registredContextListeners.delete(this.instanceUniqueIdentity)}),(0,$.h)(fn=>0!==fn.length),(0,ee.b)(fn=>{this.contextsChanged=fn.reduce((fi,[ur,Zn])=>[...fi,...fi.includes(ur)?[]:[ur]],[]),this.resolvedContext=fn.reduce((fi,[ur,Zn])=>({...fi,[ur]:Zn}),this.resolvedContext)}),(0,ee.b)(()=>Zr.registredContextListeners.delete(this.instanceUniqueIdentity)),(0,x.isPlatformServer)(this.platformId)?(0,Wi.R)(Wn):(0,ee.b)(()=>{})).subscribe()})).subscribe(),this.renderLayoutSub=(0,Ln.a)([this.renderLayout$,this.afterViewInit$]).pipe((0,ui.g)(1),(0,ye.U)(([At])=>({panelPage:At})),(0,Ke.w)(({panelPage:At})=>this.lpm.getPlugin(At.layoutType).pipe((0,ye.U)($t=>({panelPage:At,plugin:$t})))),(0,ee.b)(()=>console.log("start render layout")),(0,ye.U)(({plugin:At,panelPage:$t})=>({panelPage:$t,plugin:At,viewContainerRef:this.layoutRendererHost.viewContainerRef})),(0,ee.b)(({viewContainerRef:At})=>At.clear()),(0,ye.U)(({plugin:At,viewContainerRef:$t,panelPage:_n})=>({panelPage:_n,layoutRendererRef:$t.createComponent(At.renderer)})),(0,ee.b)(({layoutRendererRef:At})=>this.layoutRendererRef=At),(0,ee.b)(({layoutRendererRef:At,panelPage:$t})=>{At.instance.renderPanelTpl=this.renderPanelTpl,At.instance.panelPage=$t}),(0,ee.b)(()=>console.log("end render layout"))).subscribe(),this.stylizerSub=this.afterViewInit$.pipe((0,$.h)(()=>(0,x.isPlatformBrowser)(this.platformId)),(0,ee.b)(()=>{this.stylizerService.stylize({targetNode:this.el.nativeElement})})).subscribe(),this.classifySub=this.afterViewInit$.pipe((0,$.h)(()=>(0,x.isPlatformBrowser)(this.platformId)),(0,ee.b)(()=>{this.classifyService.classify({targetNode:this.el.nativeElement})})).subscribe(),this.stylizerMutatedSub=(0,x.isPlatformBrowser)(this.platformId)?this.stylizerService.mutated$.pipe((0,Hn.b)(2e3),(0,sp.T)(1),(0,Ke.w)(({stylesheet:At})=>this.authFacade.getUser$.pipe((0,ye.U)($t=>({stylesheet:At,isAuthenticated:!!$t})))),(0,$.h)(({isAuthenticated:At})=>At),(0,ee.b)(({stylesheet:At})=>{console.log("merged css",At)}),(0,$.h)(()=>!!this.panelPageCached&&!!this.panelPageCached.id),(0,Ke.w)(({stylesheet:At})=>this.isStable?(0,Re.of)({stylesheet:At}):this.ngZone.onStable.asObservable().pipe((0,ye.U)(()=>({stylesheet:At})),(0,hn.q)(1))),(0,ye.U)(({stylesheet:At})=>({stylesheet:(this.managedCssCache&&""!==this.managedCssCache.trim()?this.managedCssCache+"\n":"")+At})),(0,Ra.b)(({stylesheet:At})=>this.fileService.bulkUpload({nocache:!0,files:[new File([At],`panelpage__${this.panelPageCached.id}.css`)],fileNameOverride:`panelpage__${this.panelPageCached.id}.css`})),(0,ee.b)(()=>{console.log("stylesheet saved.")})).subscribe():void 0,this.classifyMutatedSub=(0,x.isPlatformBrowser)(this.platformId)?this.classifyService.mutated$.pipe((0,Hn.b)(2e3),(0,sp.T)(1),(0,Ke.w)(({classes:At})=>this.authFacade.getUser$.pipe((0,ye.U)($t=>({classes:At,isAuthenticated:!!$t})))),(0,$.h)(({isAuthenticated:At})=>At),(0,ee.b)(({classes:At})=>{console.log("merged classes",At)}),(0,$.h)(()=>!!this.panelPageCached&&!!this.panelPageCached.id),(0,Ke.w)(({classes:At})=>this.isStable?(0,Re.of)({classes:At}):this.ngZone.onStable.asObservable().pipe((0,ye.U)(()=>({classes:At})),(0,hn.q)(1))),(0,ye.U)(({classes:At})=>({classes:Array.from(At.keys()).reduce(($t,_n)=>({...$t,[_n]:Array.from(At.get(_n).keys()).filter(Wn=>At.get(_n).get(Wn)!==ol.KEEP).reduce((Wn,fn)=>({...Wn,[fn]:At.get(_n).get(fn)}),{})}),{})})),(0,ye.U)(({classes:At})=>({classes:Hh(this.managedClassesCache,At)})),(0,ye.U)(({classes:At})=>({json:JSON.stringify(At)})),(0,Ra.b)(({json:At})=>this.fileService.bulkUpload({nocache:!0,files:[new File([At],`panelpage__${this.panelPageCached.id}__classes.json`)],fileNameOverride:`panelpage__${this.panelPageCached.id}__classes.json`})),(0,ee.b)(()=>{console.log("classes saved.")})).subscribe():void 0,this.onStableSub=this.ngZone.onStable.asObservable().pipe((0,ee.b)(()=>this.isStable=!0)).subscribe(),this.onUnstableSub=this.ngZone.onUnstable.asObservable().pipe((0,ee.b)(()=>this.isStable=!1)).subscribe(),this.onTouched=()=>{},this.panelPageService=Vt.getEntityCollectionService("PanelPage"),this.panelPageFormService=Vt.getEntityCollectionService("PanelPageForm"),this.panelPageStateService=Vt.getEntityCollectionService("PanelPageState")}set id(r){this.id$.next(r)}set panelPage(r){this.panelPage$.next(r)}set nested(r){this.nested$.next(r)}set contexts(r){this.contexts$.next(r)}set ancestory(r){this.ancestory$.next(r)}set css(r){this.css$.next(r)}set listeners(r){this.listeners$.next(r)}get panelsArray(){return this.pageForm.get("panels")}ngOnInit(){this.onInit$.next(void 0)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}ngAfterContentInit(){this.afterContentInit$.next(void 0)}ngOnDestroy(){Zr.registredContextListeners.delete(this.instanceUniqueIdentity)}populatePanelsFormArray({panelPage:r}){this.panelsArray.clear(),r.panels.forEach(()=>{this.panelsArray.push(this.fb.control(""))})}hookupFormChange({panelPage:r}){this.pageForm.valueChanges.pipe((0,Hn.b)(100),(0,$.h)(()=>void 0!==r&&"form"===r.displayType)).subscribe(e=>{const n=new Es({...e,name:r.name,title:r.title,derivativeId:r.id});this.pageBuilderFacade.setForm(r.name,n)})}hookupCss({}){(0,cn.D)([(0,Re.of)(void 0),(0,Re.of)(void 0),(0,Re.of)(void 0),this.panelPageCached.id?this.http.get(`${this.mediaSettings.imageUrl}/media/panelpage__${this.panelPageCached.id}__classes.json`).pipe((0,Qi.K)(()=>(0,Re.of)(void 0)),(0,Ei.d)(void 0)):(0,Re.of)(void 0)]).pipe((0,ee.b)(([e,n,a,s])=>{console.log("fetched managed panelpage css and class files");let l={};this.managedCssCache="",this.managedClassesCache=s,e&&(l=Hh(l,e)),n&&(this.managedCssCache=a,l=Hh(l,n)),this.filteredCss={css:l,classes:s}})).subscribe()}submit(){if(this.pageForm.valid){const r=new Es({...this.pageForm.value}),e=this.formService.serializeForm(r);console.log(r),console.log(this.formService.serializeForm(r)),console.log("form data",e),this.persistService.persist({data:e,persistence:this.panelPageCached.persistence}).subscribe(()=>{console.log("persisted data")})}else console.log("detected form invalid")}writeValue(r){r&&this.settingsFormArray.setValue(r,{emitEvent:!1})}registerOnChange(r){this.settingsFormArray.valueChanges.subscribe(r)}registerOnTouched(r){this.onTouched=r}setDisabledState(r){r?this.settingsFormArray.disable():this.settingsFormArray.enable()}validate(r){return this.settingsFormArray.statusChanges.pipe((0,lp.O)(this.settingsFormArray.status),(0,$.h)(e=>"PENDING"!==e),(0,Hn.b)(1),(0,hn.q)(1),(0,ye.U)(e=>this.settingsFormArray.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}))}}Zr.registredContextListeners=new Set,Zr.\u0275fac=function(r){return new(r||Zr)(o.\u0275\u0275directiveInject(o.PLATFORM_ID),o.\u0275\u0275directiveInject(yg),o.\u0275\u0275directiveInject(Et.yh),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(Cd),o.\u0275\u0275directiveInject(Do),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(Ql),o.\u0275\u0275directiveInject(Yg),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(mn.StyleLoaderService),o.\u0275\u0275directiveInject(L.HttpClient),o.\u0275\u0275directiveInject(X_),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(q_),o.\u0275\u0275directiveInject(pS),o.\u0275\u0275directiveInject(mn.AsyncApiCallHelperService),o.\u0275\u0275directiveInject(Td),o.\u0275\u0275directiveInject(pr),o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(Vj),o.\u0275\u0275directiveInject(N6),o.\u0275\u0275directiveInject(B6),o.\u0275\u0275directiveInject(_g),o.\u0275\u0275directiveInject(kr),o.\u0275\u0275directiveInject(li))},Zr.\u0275cmp=o.\u0275\u0275defineComponent({type:Zr,selectors:[["classifieds-ui-panel-page"]],viewQuery:function(r,e){if(1&r&&(o.\u0275\u0275viewQuery(zS,5),o.\u0275\u0275viewQuery(j6,7),o.\u0275\u0275viewQuery(QS,5)),2&r){let n;o.\u0275\u0275queryRefresh(n=o.\u0275\u0275loadQuery())&&(e.gridLayout=n.first),o.\u0275\u0275queryRefresh(n=o.\u0275\u0275loadQuery())&&(e.renderPanelTpl=n.first),o.\u0275\u0275queryRefresh(n=o.\u0275\u0275loadQuery())&&(e.layoutRendererHost=n.first)}},hostVars:2,hostBindings:function(r,e){2&r&&o.\u0275\u0275classProp("panel-page",!0)},inputs:{id:"id",panelPage:"panelPage",nested:"nested",contexts:"contexts",ancestory:"ancestory",css:"css",listeners:"listeners",resolvedContext:"resolvedContext"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>Zr),multi:!0},{provide:d.SD,useExisting:(0,o.forwardRef)(()=>Zr),multi:!0}])],decls:6,vars:2,consts:[[3,"formGroup"],["classifiedsUiLayoutRendererHost",""],["type","button",3,"click",4,"ngIf"],["renderPanelTpl",""],["type","button",3,"click"],["formArrayName","panels"],[3,"formControlName","panel","nested","contexts","resolvedContext","contextsChanged","displayType","indexPosition","css","listeners","ancestory"]],template:function(r,e){1&r&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275template(2,z6,0,0,"ng-template",1),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,U6,2,0,"button",2),o.\u0275\u0275template(4,V6,3,12,"ng-template",null,3,o.\u0275\u0275templateRefExtractor)),2&r&&(o.\u0275\u0275property("formGroup",e.pageForm),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",e.persistenceEnabled))},directives:function(){return[eV,d.JL,d.sg,QS,x.NgIf,d.CE,d.JJ,d.u]},styles:["[_nghost-%COMP%]     gridster{background-color:#fff}[_nghost-%COMP%]     gridster-item{background-color:#fff}"]});let cp=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g,I,B){this.document=e,this.platformId=n,this.el=a,this.renderer2=s,this.componentFactoryResolver=l,this.panelHandler=c,this.fb=f,this.cpm=h,this.cssHelper=g,this.paneStateService=I,this.settings=[],this.ancestory=[],this.panes=[],this.originPanes=[],this.afterContentInit$=new M.x,this.resolvedContext$=new m.X({}),this.schedulePluginChange=new M.x,this.ancestoryWithSelf=[],this.filteredListeners=[],this.css$=new m.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=(0,Ln.a)([this.css$,this.afterContentInit$,this.schedulePluginChange]).pipe((0,ye.U)(([V])=>V),(0,ye.U)(V=>({css:this.cssHelper.reduceCss(V.css,`.pane-${this.indexPosition}`),classes:this.cssHelper.reduceSelector(V.classes,`.pane-${this.indexPosition}`)})),(0,ye.U)(({css:V,classes:ce})=>[this.cssHelper.reduceCss(V,".panel-page",!1),this.cssHelper.reduceCss(V,".panel-page"),this.cssHelper.reduceSelector(ce,".panel-page",!1),this.cssHelper.reduceSelector(ce,".panel-page")]),(0,ee.b)(([V,ce,Ie,he])=>this.filteredCss={css:ce,classes:he}),(0,ye.U)(([V,ce,Ie,he])=>({css:V,classes:Ie})),(0,ye.U)(({css:V,classes:ce})=>({css:{children:Object.keys(V.children).reduce((Se,Oe)=>({...Se,...0===Oe.indexOf(">")?{[this.ancestoryWithSelf.map((Be,et)=>(et+1)%2==0?`.pane-${Be}`:`.panel-${Be}`).join(" ")+" "+Oe]:ce[Oe]}:{[Oe]:ce[Oe]}}),{})},classes:Object.keys(ce).reduce((Se,Oe)=>({...Se,...0===Oe.indexOf(">")?{[this.ancestoryWithSelf.map((Be,et)=>(et+1)%2==0?`.pane-${Be}`:`.panel-${Be}`).join(" ")+" "+Oe]:ce[Oe]}:{[Oe]:ce[Oe]}}),{})})),(0,ui.g)(500)).subscribe(({css:V,classes:ce})=>{console.log("reduced classes",ce);const Ie=Object.keys(V.children).filter(Se=>""===Se||Od({selector:Se,document:this.document})),he=Object.keys(ce).filter(Se=>""===Se||Od({selector:Se,document:this.document}));he.forEach((Se,Oe)=>{const Be=""===Se?[this.el.nativeElement]:-1!==Se.indexOf(">")?this.document.querySelectorAll(Se):this.el.nativeElement.querySelectorAll(Se),et=Be.length;for(let at=0;at<et;at++){const ft=ce[he[Oe]],Pt=Object.keys(ft),Rt=Pt.length;for(let on=0;on<Rt;on++)Be[at]&&(ft[Pt[on]]===ol.REMOVE?(console.log(`remove class ${Pt[on]}`),this.renderer2.removeClass(Be[at],Pt[on])):(console.log(`add class ${Pt[on]}`),this.renderer2.addClass(Be[at],Pt[on])))}}),Ie.forEach(Se=>{console.log(`search: ${Se}`);const Oe=""===Se?[this.el.nativeElement]:-1!==Se.indexOf(">")?this.document.querySelectorAll(Se):this.el.nativeElement.querySelectorAll(Se),Be=Oe.length,et=Object.keys(V.children[Se].attributes);for(let at=0;at<Be;at++)Oe[at]&&et.forEach(ft=>{console.log(`${Se} { ${ft}: ${V.children[Se].attributes[ft]}; }`);const Pt=Yc(ft.replace("-","_"),!1);this.renderer2.setStyle(Oe[at],Pt,V.children[Se].attributes[ft])})})}),this.listeners$=new m.X([]),this.listenersSub=(0,Ln.a)([this.listeners$,this.schedulePluginChange]).pipe((0,ye.U)(([V])=>V),(0,ee.b)(V=>{console.log("pane listeners",V)})).subscribe(),this.paneForm=this.fb.group({contentPlugin:this.fb.control("",d.kI.required),name:this.fb.control(""),label:this.fb.control(""),settings:this.fb.control("")}),this.paneFormSub=this.paneForm.valueChanges.subscribe(V=>{console.log(`pane form value plugin: ${this.pluginName}`),console.log(V)}),this.scheduleStateChange$=new M.x,this.scheduleStateChangeSub=this.scheduleStateChange$.pipe((0,Ke.w)(({state:V})=>this.paneStateService.mergeState({state:V,ancestory:[...this.ancestoryWithSelf],settings:this.settings,plugin:this.contentPlugin}))).subscribe(({pageState:V})=>{this.panelPageStateService.upsert(V)}),this.onTouched=()=>{},this.pluginChangeSub=this.schedulePluginChange.pipe((0,$.h)(()=>this.pluginName&&null!==this.pluginName&&""!==this.pluginName),(0,Ke.w)(()=>this.cpm.getPlugin(this.pluginName))).subscribe(V=>{this.contentPlugin=V,this.paneForm.get("contentPlugin").setValue(V.name),this.paneForm.get("name").setValue(this.name),this.paneForm.get("label").setValue(this.label),"panel"===this.pluginName?this.resolveNestedPanelPage():this.renderPaneContent()}),this.embedPanelSub=this.resolvedContext$.pipe((0,ye.U)(V=>{V&&V._root&&!this.linkedPageId&&0===this.settings.length&&(this.embedPanel=new di(V._root))})).subscribe(),this.panelPageStateService=B.getEntityCollectionService("PanelPageState")}set resolvedContext(e){this.resolvedContext$.next(e)}set css(e){this.css$.next(e)}set listeners(e){this.listeners$.next(e)}get indexPositionClass(){return`pane-${this.indexPosition}`}get dynamicPanel(){return new di(this.resolvedContext._root)}ngOnInit(){this.ancestoryWithSelf=[...this.ancestory?this.ancestory:[],...null!=this.indexPosition?[this.indexPosition]:[]],this.schedulePluginChange.next(void 0)}ngOnChanges(e){if(e.ancestory||e.indexPosition){const n=[...e.ancestory.currentValue?e.ancestory.currentValue:this.ancestory?this.ancestory:[],...null!=e.indexPosition.currentValue?[e.indexPosition.currentValue]:this.indexPosition?[this.indexPosition]:[]];(n.length!==this.ancestoryWithSelf.length||0!==this.ancestoryWithSelf.filter((a,s)=>n[s]!==a).length)&&(this.ancestoryWithSelf=n)}this.schedulePluginChange.next(void 0)}ngAfterContentInit(){this.afterContentInit$.next(void 0)}writeValue(e){e&&this.paneForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.paneForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.paneForm.disable():this.paneForm.enable()}validate(e){return this.paneForm.statusChanges.pipe((0,lp.O)(this.paneForm.status),(0,$.h)(n=>"PENDING"!==n),(0,Hn.b)(1),(0,hn.q)(1),(0,ye.U)(n=>this.paneForm.valid?null:{invalidForm:{invalidForm:{valid:!1,message:"pane is invalid"}}}))}resolveNestedPanelPage(){this.panelHandler.toObject(this.settings).subscribe(e=>{this.panelPage=new di({...e,contexts:this.contexts})})}renderPaneContent(){const e=this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent),n=this.contentPaneHost.viewContainerRef;n.clear(),this.componentRef=n.createComponent(e),this.componentRef.instance.settings=this.settings,this.componentRef.instance.name=this.name,this.componentRef.instance.label=this.label,this.componentRef.instance.panes=this.panes,this.componentRef.instance.originPanes=this.originPanes,this.componentRef.instance.contexts=this.contexts.map(a=>new Jr(a)),this.componentRef.instance.displayType=this.displayType,this.componentRef.instance.resolvedContext=this.resolvedContext$.value,this.componentRef.instance.ancestory=this.ancestoryWithSelf,this.componentRef.instance.state&&this.contentPlugin.handler&&this.contentPlugin.handler.stateDefinition(this.settings).pipe((0,hn.q)(1)).subscribe(a=>{this.componentRef.instance.state=a||{}}),this.componentRef.instance.stateChange&&this.componentRef.instance.stateChange.subscribe(a=>{this.scheduleStateChange$.next({state:a})})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(x.DOCUMENT),o.\u0275\u0275directiveInject(o.PLATFORM_ID),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(fo),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(X_),o.\u0275\u0275directiveInject(H_),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-render-pane"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(Zg,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.contentPaneHost=a.first)}},hostVars:5,hostBindings:function(e,n){2&e&&(o.\u0275\u0275attribute("data-index",n.indexPosition),o.\u0275\u0275classMap(n.indexPositionClass),o.\u0275\u0275classProp("pane",!0))},inputs:{pluginName:"pluginName",settings:"settings",linkedPageId:"linkedPageId",contexts:"contexts",originPane:"originPane",displayType:"displayType",name:"name",label:"label",indexPosition:"indexPosition",ancestory:"ancestory",panes:"panes",originPanes:"originPanes",resolvedContext:"resolvedContext",css:"css",listeners:"listeners"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.SD,useExisting:(0,o.forwardRef)(()=>t),multi:!0}]),o.\u0275\u0275NgOnChangesFeature],decls:6,vars:4,consts:[["fxFlex","",3,"formGroup"],["classifiedsUiPaneContentHost",""],["fxFlex","","formControlName","settings",3,"panelPage","nested","contexts","css","listeners","ancestory",4,"ngIf"],["fxFlex","","formControlName","settings",3,"id","nested","contexts","ancestory",4,"ngIf"],["fxFlex","","formControlName","settings",3,"panelPage","nested","contexts","css","listeners","ancestory"],["fxFlex","","formControlName","settings",3,"id","nested","contexts","ancestory"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275template(2,G6,0,0,"ng-template",1),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275template(3,$6,1,6,"classifieds-ui-panel-page",2),o.\u0275\u0275template(4,H6,1,4,"classifieds-ui-panel-page",3),o.\u0275\u0275template(5,q6,1,6,"classifieds-ui-panel-page",2),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.paneForm),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf","panel"==n.pluginName&&!n.linkedPageId&&0!==n.settings.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","panel"==n.pluginName&&n.linkedPageId),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","panel"==n.pluginName&&!n.linkedPageId&&0===n.settings.length))},directives:[Zr,d.JL,d.sg,Zg,x.NgIf,d.JJ,d.u],styles:["[_nghost-%COMP%]{height:100%}"]}),t})(),eV=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g,I){this.platformId=e,this.document=n,this.hostEl=a,this.renderer2=s,this.componentFactoryResolver=l,this.fb=c,this.panelResolverService=f,this.spm=h,this.cssHelper=g,this.styleResolverService=I,this.nested=!1,this.resolvedContext={},this.heightChange=new o.EventEmitter,this.panelForm=this.fb.group({name:this.fb.control(""),label:this.fb.control(""),panes:this.fb.array([])}),this.panelFormSub=this.panelForm.valueChanges.subscribe(B=>{console.log("paneL form value"),console.log(B)}),this.filteredListeners=[],this.afterContentInit$=new M.x,this.schedulePanelRender=new M.x,this.rendered$=new M.x,this.css$=new m.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=(0,Ln.a)([this.css$,this.afterContentInit$,this.rendered$]).pipe((0,ee.b)(([B])=>console.log("css node",B.css)),(0,ye.U)(([B])=>B),(0,ye.U)(B=>({css:this.cssHelper.reduceCss(B.css,`.panel-${this.indexPosition$.value}`),classes:this.cssHelper.reduceSelector(B.classes,`.panel-${this.indexPosition$.value}`)})),(0,ye.U)(({css:B,classes:V})=>[this.cssHelper.reduceCss(B,".pane-",!1),B,this.cssHelper.reduceSelector(V,".pane-",!1),V]),(0,ee.b)(([B,V,ce,Ie])=>this.filteredCss={css:V,classes:Ie}),(0,ye.U)(([B,V,ce])=>({css:B,classes:ce})),(0,ye.U)(({css:B,classes:V})=>({css:{children:Object.keys(B.children).reduce((he,Se)=>({...he,...0===Se.indexOf(">")?{[this.ancestoryWithSelf$.value.map((Oe,Be)=>(Be+1)%2==0?`.pane-${Oe}`:`.panel-${Oe}`).join(" ")+" "+Se]:V[Se]}:{[Se]:V[Se]}}),{})},classes:Object.keys(V).reduce((he,Se)=>({...he,...0===Se.indexOf(">")?{[this.ancestoryWithSelf$.value.map((Oe,Be)=>(Be+1)%2==0?`.pane-${Oe}`:`.panel-${Oe}`).join(" ")+" "+Se]:V[Se]}:{[Se]:V[Se]}}),{})})),(0,ui.g)(1)).subscribe(({css:B,classes:V})=>{console.log("classes",V);const ce=Object.keys(B.children).filter(he=>""===he||Od({selector:he,document:this.document})),Ie=Object.keys(V).filter(he=>""===he||Od({selector:he,document:this.document}));Ie.forEach((he,Se)=>{const Oe=""===he?[this.hostEl.nativeElement]:-1!==he.indexOf(">")?this.document.querySelectorAll(he):this.hostEl.nativeElement.querySelectorAll(he),Be=Oe.length;for(let et=0;et<Be;et++){const at=V[Ie[Se]],ft=Object.keys(at),Pt=ft.length;for(let Rt=0;Rt<Pt;Rt++)Oe[et]&&(at[ft[Rt]]===ol.REMOVE?(console.log(`remove class ${ft[Rt]}`),this.renderer2.removeClass(Oe[et],ft[Rt])):(console.log(`add class ${ft[Rt]}`),this.renderer2.addClass(Oe[et],ft[Rt])))}}),ce.forEach(he=>{console.log(`search: ${he}`);const Se=""===he?[this.hostEl.nativeElement]:-1!==he.indexOf(">")?this.document.querySelectorAll(he):this.hostEl.nativeElement.querySelectorAll(he),Oe=Se.length,Be=Object.keys(B.children[he].attributes);for(let et=0;et<Oe;et++)Se[et]&&Be.forEach(at=>{console.log(`${he} { ${at}: ${B.children[he].attributes[at]}; }`);const ft=Yc(at.replace("-","_"),!1);this.renderer2.setStyle(Se[et],ft,B.children[he].attributes[at])})})}),this.listeners$=new m.X([]),this.listenersSub=this.listeners$.pipe((0,ee.b)(B=>{console.log("panel listeners",B),this.filteredListeners=B})).subscribe(),this.scheduleRender=new M.x,this.scheduleRenderSub=this.scheduleRender.pipe((0,ee.b)(()=>console.log(`schdule renderer before [${this.panel.name}]`)),(0,Ke.w)(([B,V,ce])=>this.panelResolverService.resolvePanes({panes:B,contexts:V,resolvedContext:ce}).pipe((0,ye.U)(({resolvedPanes:Ie,originMappings:he})=>({resolvedPanes:Ie,originMappings:he,panes:B})))),(0,Ke.w)(({panes:B,resolvedPanes:V,originMappings:ce})=>this.styleResolverService.alterResolvedPanes({panel:this.panel,resolvedPanes:V,originMappings:ce}).pipe((0,ye.U)(({resolvedPanes:Ie,originMappings:he})=>({panes:B,resolvedPanes:Ie,originMappings:he})))),(0,ee.b)(()=>console.log(`schdule renderer after [${this.panel.name}]`))).subscribe(({panes:B,resolvedPanes:V,originMappings:ce})=>{console.log(`render panel: ${this.panel.name}`),this.resolvedPanes=V,this.originPanes=B,this.originMappings=ce,this.populatePanesFormArray(),void 0!==this.stylePlugin?this.renderPanelContent():this.rendered$.next(void 0)}),this.schduleContextChange=new M.x,this.schedulePanelRenderSub=this.schedulePanelRender.pipe((0,Ke.w)(B=>this.spm.getPlugin(B))).subscribe(B=>{const V=this.componentFactoryResolver.resolveComponentFactory(B.renderComponent),ce=this.panelHost.viewContainerRef;ce.clear();const Ie=ce.createComponent(V);this.componentRef=Ie,Ie.instance.settings=this.panel.settings,Ie.instance.panes=this.resolvedPanes,Ie.instance.originPanes=this.panel.panes,Ie.instance.originMappings=this.originMappings,Ie.instance.contexts=this.contexts.map(he=>new Jr(he)),Ie.instance.displayType=this.displayType,Ie.instance.ancestory=this.ancestoryWithSelf$.value,Ie.instance.resolvedContext=this.resolvedContext,Ie.instance.panel=this.panel,Ie.instance.indexPosition=this.indexPosition$.value,this.rendered$.next(void 0)}),this.originMappings=[],this.resolvedContexts=[],this.ancestoryWithSelf$=new m.X([]),this.ancestory$=new m.X([]),this.indexPosition$=new m.X(void 0),this.onTouched=()=>{},this.ancestorySub=(0,Ln.a)([this.ancestory$,this.indexPosition$]).pipe((0,ee.b)(([B,V])=>{this.ancestoryWithSelf$.next([...B,V])})).subscribe(),this.counter=t.COUNTER++}set contextChanged(e){}set contextsChanged(e){e.map(n=>this.schduleContextChange.next(n))}set indexPosition(e){this.indexPosition$.next(e)}set ancestory(e){this.ancestory$.next(e)}set css(e){this.css$.next(e)}set listeners(e){this.listeners$.next(e)}get indexPositionClass(){return`panel-${this.indexPosition$.value}`}get panesArray(){return this.panelForm.get("panes")}ngOnInit(){this.stylePlugin=void 0!==this.panel.stylePlugin&&""!==this.panel.stylePlugin?this.panel.stylePlugin:void 0,void 0!==this.panel&&void 0!==this.panelHost&&(console.log(`panel render init [${this.panel.name}`),this.panelResolverService.usedContexts(this.panel.panes).pipe((0,ye.U)(e=>e.filter(n=>"_page"!==n&&"_root"!==n&&"."!==n&&0!==n.indexOf("panestate-"+this.ancestoryWithSelf$.value.join("-")))),(0,ee.b)(e=>console.log(`contexts [${this.panel.name}]: ${e.join(",")}`)),(0,Ke.w)(e=>this.schduleContextChange.pipe((0,ee.b)(n=>console.log(`detected change [${this.panel.name}]: ${n}`)),(0,ye.U)(n=>[e,n]))),(0,ee.b)(([e,n])=>console.log(`detected change [${this.panel.name}]: ${n} : ctx: ${e.join(",")}`)),(0,$.h)(([e,n])=>Array.isArray(e)&&-1!==e.findIndex(a=>a===n)),(0,Hn.b)(100)).subscribe(([e,n])=>{console.log(`Context changed [${this.panel.name}]: ${n}`),console.log(`contexts detected [${this.panel.name}]: ${e.join(",")}`),this.scheduleRender.next([this.panel.panes,this.contexts,this.resolvedContext])}))}ngOnChanges(e){this.stylePlugin=void 0!==this.panel.stylePlugin&&""!==this.panel.stylePlugin?this.panel.stylePlugin:void 0,e.resolvedContext&&void 0===e.resolvedContext.previousValue&&this.scheduleRender.next([this.panel.panes,this.contexts,this.resolvedContext])}ngAfterViewInit(){}ngAfterContentInit(){this.afterContentInit$.next(void 0)}writeValue(e){e&&this.panelForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.panelForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.panelForm.disable():this.panelForm.enable()}validate(e){return this.panelForm.statusChanges.pipe((0,lp.O)(this.panelForm.status),(0,$.h)(n=>"PENDING"!==n),(0,Hn.b)(1),(0,hn.q)(1),(0,ye.U)(n=>this.panelForm.valid?null:{invalidForm:{valid:!1,message:"panel are invalid"}}))}populatePanesFormArray(){this.panesArray.clear(),this.resolvedPanes.forEach((e,n)=>{this.panesArray.push(this.fb.control(""))})}renderPanelContent(){this.schedulePanelRender.next(this.stylePlugin)}}return t.COUNTER=0,t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.PLATFORM_ID),o.\u0275\u0275directiveInject(x.DOCUMENT),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(kd),o.\u0275\u0275directiveInject(Jc),o.\u0275\u0275directiveInject(X_),o.\u0275\u0275directiveInject(mS))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-render-panel"]],viewQuery:function(e,n){if(1&e&&(o.\u0275\u0275viewQuery(Zg,7),o.\u0275\u0275viewQuery(X6,7),o.\u0275\u0275viewQuery(cp,5)),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.panelHost=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.paneContainer=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.renderedPanes=a)}},hostVars:5,hostBindings:function(e,n){2&e&&(o.\u0275\u0275attribute("data-index",n.indexPosition$.value),o.\u0275\u0275classMap(n.indexPositionClass),o.\u0275\u0275classProp("panel",!0))},inputs:{panel:"panel",contexts:"contexts",nested:"nested",displayType:"displayType",resolvedContext:"resolvedContext",contextChanged:"contextChanged",contextsChanged:"contextsChanged",indexPosition:"indexPosition",ancestory:"ancestory",css:"css",listeners:"listeners"},outputs:{heightChange:"heightChange"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.SD,useExisting:(0,o.forwardRef)(()=>t),multi:!0}]),o.\u0275\u0275NgOnChangesFeature],decls:5,vars:2,consts:[[1,"render-panel",3,"formGroup"],["panes",""],["classifiedsUiPaneContentHost",""],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formArrayName","panes"],[3,"formControlName","pluginName","settings","name","label","originPane","contexts","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes",4,"ngFor","ngForOf"],[3,"formControlName","pluginName","settings","name","label","originPane","contexts","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes"],[3,"pluginName","settings","name","label","originPane","contexts","linkedPageId","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes",4,"ngFor","ngForOf"],[3,"pluginName","settings","name","label","originPane","contexts","linkedPageId","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0,1),o.\u0275\u0275elementContainerStart(2),o.\u0275\u0275template(3,W6,0,0,"ng-template",2),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275template(4,Z6,4,3,"ng-container",3),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.panelForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",!n.stylePlugin&&n.resolvedPanes))},directives:[cp,d.JL,d.sg,Zg,x.NgIf,x.NgSwitch,x.NgSwitchCase,d.CE,x.NgForOf,d.JJ,d.u],styles:["[_nghost-%COMP%]{height:100%}.render-panel[_ngcontent-%COMP%]{height:100%}"]}),t})(),ev=(()=>{class t{constructor(e){e.register(new Vw({id:"panels_form_submit",title:"Submit Panels Form"})),e.register(new Vw({id:"panels_dialog",title:"Open Panels Dialog"}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Uw))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.u5,mn.UtilsModule,d.UX,U_,HS]]}),t})();const up={},JS={};let ZS=!1;function e1(t,r){return(0,ie.mG)(this,void 0,void 0,function*(){return JS[r]||(ZS||(yield S.I("default"),ZS=!0),yield t.init(S.S.default),JS[r]=!0),t})}function t1(t,r){return(0,ie.mG)(this,void 0,void 0,function*(){return new Promise((e,n)=>{if(up[r])return void e();const a=document.createElement("script");a.src=t,a.onerror=n,a.onload=()=>{const s=window[r];e1(s,r),up[r]=s,e()},document.body.appendChild(a)})})}function Md(t){return(0,ie.mG)(this,void 0,void 0,function*(){let r,e;return t.type||(t.type="script"),"script"===t.type?(r={type:"script",remoteEntry:t.remoteEntry,remoteName:t.remoteName},e=t.remoteName):"module"===t.type&&(r={type:"module",remoteEntry:t.remoteEntry},e=t.remoteEntry),t.remoteEntry&&(yield function rV(t,r){return(0,ie.mG)(this,void 0,void 0,function*(){if("string"==typeof t)return yield t1(t,r);if("script"===t.type){const e=t;return yield t1(e.remoteEntry,e.remoteName)}"module"===t.type&&(yield function oV(t){return(0,ie.mG)(this,void 0,void 0,function*(){return up[t]?Promise.resolve():yield import(t).then(r=>{e1(r,t),up[t]=r})})}(t.remoteEntry))})}(r)),yield function iV(t,r){return(0,ie.mG)(this,void 0,void 0,function*(){return(yield up[t].get(r))()})}(e,t.exposedModule)})}var ec=S(2922),nu=S(8550),Ts=S(5288),n1=S(2197);function aV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",4),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext().onEntitySelected(s.value)}),o.\u0275\u0275elementStart(1,"span",5),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.value.title)}}function sV(t,r){}function lV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"classifieds-ui-dynamic-content-viewer",1),o.\u0275\u0275listener("docRendered",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onDocRendered()}),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("content",o.\u0275\u0275pipeBind1(1,1,e.content$))}}function cV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"classifieds-ui-dynamic-content-viewer",1),o.\u0275\u0275listener("docRendered",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onDocRendered()}),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("content",o.\u0275\u0275pipeBind1(1,1,e.content$))}}function uV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",4),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext().onStyleSelected(s.value)}),o.\u0275\u0275elementStart(1,"span",5),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.value.title)}}function dV(t,r){}const fV=["contentEditor"];function hV(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function pV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",19),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).onOverrideClick()}),o.\u0275\u0275text(1,"Override"),o.\u0275\u0275elementEnd()}}function mV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",19),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).onRemoveOverrideClick()}),o.\u0275\u0275text(1,"Remove Override"),o.\u0275\u0275elementEnd()}}function gV(t,r){}const tv=function(t){return{settings:t}},vV=function(t){return{visible:t}};function yV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275elementStart(1,"div",10),o.\u0275\u0275elementStart(2,"div",11),o.\u0275\u0275elementStart(3,"button",12),o.\u0275\u0275elementStart(4,"mat-icon"),o.\u0275\u0275text(5,"more_vert"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-expansion-panel",13),o.\u0275\u0275listener("afterCollapse",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onAfterCollapse()})("afterExpand",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onAfterExpand()}),o.\u0275\u0275elementStart(7,"mat-expansion-panel-header"),o.\u0275\u0275elementStart(8,"mat-panel-title"),o.\u0275\u0275text(9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div",14),o.\u0275\u0275elementStart(11,"ul"),o.\u0275\u0275template(12,hV,1,0,"ng-container",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"div",16),o.\u0275\u0275template(14,pV,2,0,"button",17),o.\u0275\u0275template(15,mV,2,0,"button",17),o.\u0275\u0275elementContainerStart(16),o.\u0275\u0275template(17,gV,0,0,"ng-template",18),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext(),n=o.\u0275\u0275reference(6),a=o.\u0275\u0275reference(2);o.\u0275\u0275advance(3),o.\u0275\u0275property("matMenuTriggerFor",n),o.\u0275\u0275advance(6),o.\u0275\u0275textInterpolate2("",e.contentPlugin.title," : ",e.name,""),o.\u0275\u0275advance(1),o.\u0275\u0275property("hidden",e.preview),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",a)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(9,tv,e.settings)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(11,vV,e.preview)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.displayOverride&&!e.hasOverride),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.displayOverride&&e.hasOverride)}}function _V(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"attribute"),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext().settings;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind2(2,1,n,e.name))}}function xV(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function bV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"ul"),o.\u0275\u0275template(1,xV,1,0,"ng-container",15),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275nextContext(2);const n=o.\u0275\u0275reference(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,tv,e.attributes))}}function CV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275text(1),o.\u0275\u0275template(2,_V,3,4,"span",21),o.\u0275\u0275template(3,bV,2,4,"ul",21),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext().settings;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.displayName,": "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.attributes||0==e.attributes.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.attributes&&e.attributes.length>0)}}function wV(t,r){1&t&&o.\u0275\u0275template(0,CV,4,3,"li",20),2&t&&o.\u0275\u0275property("ngForOf",r.settings)}function SV(t,r){}function EV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",22),o.\u0275\u0275elementStart(1,"classifieds-ui-content-editor",23,24),o.\u0275\u0275listener("nestedUpdate",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onNestedUpdate(a)})("delete",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onDeleteClick()})("rules",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onRulesClick()})("props",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onPropsClick()}),o.\u0275\u0275template(3,SV,0,0,"ng-template",null,25,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("panelPage",e.panelPage)("savable",!1)("nested",!0)("locked",e.locked)("contexts",e.contexts)("rootContext",e.rootContext)("ancestory",e.paneAncestoryWithSelf)}}function TV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",26),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onPreviewClick()}),o.\u0275\u0275text(1,"Preview"),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("disabled",e.locked)}}function AV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",27),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onDisablePreviewClick()}),o.\u0275\u0275text(1,"Disable Preview"),o.\u0275\u0275elementEnd()}}const kV=["extraActionsArea"],IV=["contextsMenuTpl"],PV=["editablePaneTpl"],FV=["panes"];function RV(t,r){}const r1=function(t){return{nested:t}};function DV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"form",7),o.\u0275\u0275listener("ngSubmit",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().submit()}),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275template(2,RV,0,0,"ng-template",8),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",e.contentForm)("ngClass",o.\u0275\u0275pureFunction1(2,r1,e.nested))}}function OV(t,r){}function MV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275template(2,OV,0,0,"ng-template",8),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",e.contentForm)("ngClass",o.\u0275\u0275pureFunction1(2,r1,e.nested))}}function LV(t,r){1&t&&o.\u0275\u0275element(0,"div",12)}function NV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"classifieds-ui-editable-pane",10),o.\u0275\u0275listener("delete",function(){const a=o.\u0275\u0275restoreView(e),s=a.i,l=a.j;return o.\u0275\u0275nextContext().onDeletePane(s,l)})("rules",function(){const a=o.\u0275\u0275restoreView(e),s=a.i,l=a.j;return o.\u0275\u0275nextContext().onRulesPane(s,l)})("nestedUpdate",function(a){const s=o.\u0275\u0275restoreView(e),l=s.i,c=s.j;return o.\u0275\u0275nextContext().onNestedUpdate(a,l,c)})("rendererOverride",function(){const a=o.\u0275\u0275restoreView(e),s=a.i,l=a.j;return o.\u0275\u0275nextContext().onOverrideRenderer(s,l)})("removeRendererOverride",function(){const a=o.\u0275\u0275restoreView(e),s=a.i,l=a.j;return o.\u0275\u0275nextContext().onRemoveOverrideRenderer(s,l)})("edit",function(){const a=o.\u0275\u0275restoreView(e),s=a.i,l=a.j;return o.\u0275\u0275nextContext().onPaneEdit(s,l)})("props",function(){const a=o.\u0275\u0275restoreView(e),s=a.i,l=a.j;return o.\u0275\u0275nextContext().editPaneProps(s,l)})("delete",function(){const a=o.\u0275\u0275restoreView(e),s=a.i,l=a.j;return o.\u0275\u0275nextContext().onPaneDelete(s,l)}),o.\u0275\u0275template(1,LV,1,0,"div",11),o.\u0275\u0275elementEnd()}if(2&t){const e=r.i,n=r.j,a=o.\u0275\u0275nextContext();o.\u0275\u0275property("panelIndex",e)("paneIndex",n)("name",a.panelPaneName(e,n))("label",a.panelPaneLabel(e,n))("locked",a.panelPaneLocked(e,n))("contexts",a.contexts)("pluginName",a.panelPanePlugin(e,n))("settings",a.panelPaneSettings(e,n))("ancestory",a.ancestory)}}function BV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"button",13),o.\u0275\u0275text(1,"( x )"),o.\u0275\u0275elementEnd()),2&t){o.\u0275\u0275nextContext();const e=o.\u0275\u0275reference(8);o.\u0275\u0275property("matMenuTriggerFor",e)}}function jV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",5),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext().onEditContext(s.name)}),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.name)}}function zV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",1),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext().onItemSelect(s.value)}),o.\u0275\u0275elementStart(1,"span",2),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.value.name)}}function UV(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function VV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("",e.displayName,": ")}}function GV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"attribute"),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext().settings;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind2(2,1,n,e.name))}}function $V(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function HV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,$V,1,0,"ng-container",4),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275nextContext(2);const n=o.\u0275\u0275reference(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,tv,e.attributes))}}function qV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,VV,2,1,"span",2),o.\u0275\u0275template(2,GV,3,4,"span",2),o.\u0275\u0275template(3,HV,2,4,"div",2),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",0==e.attributes.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",0==e.attributes.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.attributes.length>0)}}function XV(t,r){1&t&&o.\u0275\u0275template(0,qV,4,3,"div",6),2&t&&o.\u0275\u0275property("ngForOf",r.settings)}function WV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,UV,1,0,"ng-container",4),o.\u0275\u0275template(2,XV,1,1,"ng-template",null,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275reference(3),n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,tv,n.attributeValues))}}function KV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",7),o.\u0275\u0275element(1,"classifieds-ui-attributes-builder",8),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("formGroup",e.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("attributes",e.attributes)("attributeValues",e.attributeValues)}}function YV(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,WV,4,4,"div",2),o.\u0275\u0275template(2,KV,2,3,"div",3),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","page"==e.displayType),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","form"==e.displayType)}}function QV(t,r){if(1&t&&o.\u0275\u0275element(0,"classifieds-ui-snippet-pane-renderer",9),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("settings",e.rendererSettings)("tokens",e.tokens)}}function JV(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-image-preview",2),o.\u0275\u0275listener("removed",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onRemoveMedia(a)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("removable",!0)("file",e.media),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",e.media.name," (",e.media.type,")")}}const ZV=["img"];function eG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",26),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e)}}function tG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275elementStart(1,"mat-form-field",23),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Pane"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",24),o.\u0275\u0275template(5,eG,2,2,"mat-option",25),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.index,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("formGroupName",e),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngForOf",n.panes)}}function nG(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",20),o.\u0275\u0275elementStart(1,"button",21),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().addPane()}),o.\u0275\u0275text(2,"Add Pane"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div"),o.\u0275\u0275template(4,tG,6,2,"div",22),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(4),o.\u0275\u0275property("ngForOf",e.bindings.controls)}}function iG(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",27),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275element(2,"input",28),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275element(4,"input",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-form-field"),o.\u0275\u0275element(6,"input",30),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"div"),o.\u0275\u0275elementStart(8,"mat-checkbox",31),o.\u0275\u0275text(9,"Multiple"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-form-field"),o.\u0275\u0275element(11,"input",32),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())}function rG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.label)}}function oG(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",5),o.\u0275\u0275template(5,rG,2,2,"mat-option",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(e.label),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",e.options)}}function aG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-radio-button",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.label)}}function sG(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"label"),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-radio-group",5),o.\u0275\u0275template(5,aG,2,2,"mat-radio-button",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(e.label),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",e.options)}}function lG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275elementStart(1,"div",9),o.\u0275\u0275elementStart(2,"mat-checkbox",10),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=r.index;o.\u0275\u0275advance(1),o.\u0275\u0275property("formGroupName",n),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.label)}}function cG(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275template(3,lG,4,2,"div",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",e.options)}}function uG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.label)}}function dG(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275element(2,"input",11),o.\u0275\u0275elementStart(3,"mat-autocomplete",12,13),o.\u0275\u0275listener("optionSelected",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().onOptionSelected(a)}),o.\u0275\u0275template(5,uG,2,2,"mat-option",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&t){const e=o.\u0275\u0275reference(4),n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("placeholder",n.label)("matAutocomplete",e),o.\u0275\u0275advance(1),o.\u0275\u0275property("displayWith",n.displayAuto),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",n.options)}}function fG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",8),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.name),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.name)}}function hG(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",5),o.\u0275\u0275element(1,"druid-panels-panelpage-linkedlist",6),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().onRemoveMapping(s)}),o.\u0275\u0275text(3,"Remove"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.index,n=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroupName",e),o.\u0275\u0275advance(1),o.\u0275\u0275property("panes",n.panes)}}function pG(t,r){if(1&t&&o.\u0275\u0275element(0,"classifieds-ui-render-pane",4),2&t){const e=o.\u0275\u0275nextContext().index,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("pluginName",n.panes[2*e].contentPlugin)("settings",n.panes[2*e].settings)("contexts",n.panes[2*e].contexts)}}function mG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-tab"),o.\u0275\u0275template(1,pG,1,3,"ng-template",3),o.\u0275\u0275element(2,"classifieds-ui-render-pane",4),o.\u0275\u0275elementEnd()),2&t){const e=r.index,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275property("pluginName",n.panes[2*e+1].contentPlugin)("settings",n.panes[2*e+1].settings)("contexts",n.panes[2*e+1].contexts)}}function gG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-tab-group",1),o.\u0275\u0275template(1,mG,3,3,"mat-tab",2),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("for",e.panes.length/2)}}function vG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-tab",6),o.\u0275\u0275element(1,"classifieds-ui-render-pane",4),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("pluginName",e.contentPlugin)("settings",e.settings)("contexts",e.contexts)}}function yG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-tab-group",1),o.\u0275\u0275template(1,vG,2,3,"mat-tab",5),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.panes)}}function _G(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275element(1,"classifieds-ui-render-pane",3),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("pluginName",e.contentPlugin)("settings",e.settings)("contexts",e.contexts)("resolvedContext",e.resolvedContext)}}function xG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"th",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e)}}function bG(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"td",8),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext().$implicit,a=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(a.rowData(n,e))}}function CG(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,4),o.\u0275\u0275template(1,xG,2,1,"th",5),o.\u0275\u0275template(2,bG,2,1,"td",6),o.\u0275\u0275elementContainerEnd()),2&t&&o.\u0275\u0275property("matColumnDef",r.$implicit)}function wG(t,r){1&t&&o.\u0275\u0275element(0,"tr",9)}function SG(t,r){1&t&&o.\u0275\u0275element(0,"tr",10)}const EG={GridLayout:{entityName:"GridLayout"},PanelPageForm:{crud:{panelpageform_serialize:{plugins:{idb_keyval:{params:{prefix:"panelpageform__"}}}}}}};let nv=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","classifiedsUiContentSelectionHost",""]]}),t})(),TG=(()=>{class t{constructor(e,n,a,s,l,c){this.data=e,this.bottomSheetRef=n,this.dialog=a,this.componentFactoryResolver=s,this.fb=l,this.contentPluginManager=c,this.selectedIndex=0}ngOnInit(){this.contentPlugins=this.contentPluginManager.getPlugins()}onEntitySelected(e){this.plugin=e,void 0!==this.plugin.selectionComponent?(this.selectedIndex=1,this.renderSelectionComponent()):void 0!==this.plugin.editorComponent?(this.bottomSheetRef.dismiss(),e.handler?this.plugin.handler.editorOptions([]).subscribe(n=>{this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,pane:void 0,paneIndex:void 0,contexts:this.data.contexts,contentAdded:this.data.contentAdded,plugin:e},...n.fullscreen?{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}:{}})}):this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,pane:void 0,paneIndex:void 0,contexts:this.data.contexts,contentAdded:this.data.contentAdded}})):this.data.panelForm.get("panes").push(this.fb.group({contentPlugin:this.fb.control(this.plugin.id),name:this.fb.control(""),label:this.fb.control(""),settings:this.fb.array([])}))}renderSelectionComponent(){const e=this.componentFactoryResolver.resolveComponentFactory(this.plugin.selectionComponent),n=this.selectionHost.viewContainerRef;n.clear();const a=n.createComponent(e);a.instance.panelFormGroup=this.data.panelForm,a.instance.contexts=this.data.contexts}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Jl.OG),o.\u0275\u0275directiveInject(Jl.oL),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Gt.ContentPluginManager))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-content-selector"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(nv,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.selectionHost=a.first)}},decls:10,vars:6,consts:[[1,"content-selector-wrapper"],[3,"selectedIndex"],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["classifiedsUiContentSelectionHost",""],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-tab-group",1),o.\u0275\u0275elementStart(2,"mat-tab"),o.\u0275\u0275elementStart(3,"mat-nav-list"),o.\u0275\u0275template(4,aV,3,1,"a",2),o.\u0275\u0275pipe(5,"keyvalue"),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-tab"),o.\u0275\u0275elementContainerStart(8),o.\u0275\u0275template(9,sV,0,0,"ng-template",3),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("selectedIndex",n.selectedIndex),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(5,2,o.\u0275\u0275pipeBind1(6,4,n.contentPlugins))))},directives:[Cs.SP,Cs.uX,ws.Hk,ws.Tg,x.NgForOf,ri.X2,nv],pipes:[x.KeyValuePipe,x.AsyncPipe],styles:[".content-selector-wrapper[_ngcontent-%COMP%]     .mat-tab-header{display:none}"]}),t})(),iu=(()=>{class t{constructor(e,n){this.attributeSerializer=e,this.tokenizrService=n,this.types=["text/markdown","text/html"]}handleFile(e){return new y.y(n=>{const a=new FileReader;a.onload=()=>{n.next(this.buildSettings(new Hc({contentType:e.type,content:`${a.result}`}))),n.complete()},a.readAsText(e)})}handlesType(e){return void 0!==this.types.find(n=>n===e)}implementsRendererOverride(){return!1}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return!1}isData(e){return!1}getBindings(e,n,a){return"context"===n?this.toObject(e).pipe((0,ye.U)(s=>this.tokenizrService.discoverTokens(s.content).map(c=>new Gt.ContentBinding({id:c,type:"context"})))):(0,Re.of)([])}fetchDynamicData(e,n){return(0,Re.of)(new qn)}buildDynamicItems(e,n){return(0,Re.of)([])}toObject(e){return(0,Re.of)(new Hc(this.attributeSerializer.deserializeAsObject(e)))}buildSettings(e){return this.attributeSerializer.serialize(e,"root").attributes}stateDefinition(e){return(0,Re.of)({})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions({fullscreen:!0}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Xn))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),o1=(()=>{class t{constructor(e,n,a,s){this.hostEl=e,this.handler=n,this.tokenizerService=a,this.markdownService=s,this.contexts=[],this.afterContentInit$=new M.x,this.content="",this.content$=new m.X(""),this.settings$=new m.X([]),this.snippet$=new m.X(void 0),this.resolvedContext$=new m.X(void 0),this.docRendered$=new M.x,this.contentSub=(0,Ln.a)([this.afterContentInit$,this.content$,this.snippet$,this.docRendered$]).subscribe(([l,c,f])=>{f&&f.jsScript&&""!==f.jsScript&&setTimeout(()=>this.appendScript(f.jsScript))}),this.renderContentSub=(0,Ln.a)([this.settings$,this.resolvedContext$]).pipe((0,Ke.w)(([l,c])=>this.handler.toObject(l)),(0,Ke.w)(l=>this.resolveContexts().pipe((0,ye.U)(c=>[l,c])))).subscribe(([l,c])=>{void 0!==c&&(this.tokens=c),this.contentType=l.contentType,this.snippet$.next(l);const f=this.replaceTokens(l.content),h=l.contentType&&-1!==l.contentType.indexOf("markdown")?this.markdownService.compile(f):f;this.content$.next(h)})}set settings(e){this.settings$.next(e)}set resolvedContext(e){this.resolvedContext$.next(e)}ngOnInit(){}ngOnChanges(){console.log("pane changed")}ngAfterContentInit(){this.afterContentInit$.next(),this.afterContentInit$.complete()}replaceTokens(e){return void 0!==this.tokens&&this.tokens.forEach((n,a)=>{e=e.split(`[${a}]`).join(`${n}`)}),e}resolveContexts(){return new y.y(e=>{let n=new Map;if(this.resolvedContext$.value)for(const a in this.resolvedContext$.value)n=new Map([...n,...this.tokenizerService.generateGenericTokens(this.resolvedContext$.value[a],"_root"===a?"":a)]);e.next(n),e.complete()})}appendScript(e){let n=document.createElement("script");n.type="text/javascript",n.appendChild(document.createTextNode(e)),this.hostEl.nativeElement.appendChild(n),console.log("add script")}onDocRendered(){this.docRendered$.next(void 0)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(iu),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(Tg))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-snippet-pane-renderer"]],inputs:{settings:"settings",contexts:"contexts",tokens:"tokens",resolvedContext:"resolvedContext"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[3,"content","docRendered",4,"ngIf"],[3,"content","docRendered"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,lV,2,3,"classifieds-ui-dynamic-content-viewer",0),o.\u0275\u0275template(1,cV,2,3,"classifieds-ui-dynamic-content-viewer",0)),2&e&&(o.\u0275\u0275property("ngIf","text/markdown"==n.contentType),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","text/html"==n.contentType))},directives:[mn.DynamicContentViewer,x.NgIf],pipes:[x.AsyncPipe],styles:[""]}),t})(),ru=(()=>{class t{constructor(e){this.snippetHandler=e}handleFile(e){return(0,Re.of)([])}handlesType(e){return!1}implementsRendererOverride(){return!0}hasRendererOverride(e){return this.rendererSnippet(e).pipe((0,ye.U)(n=>void 0!==n))}isDynamic(e){return!1}isData(e){return!1}fetchDynamicData(e,n){return(0,Re.of)(new qn)}buildDynamicItems(e,n){return(0,Re.of)([])}getBindings(e,n,a){return(0,Re.of)([])}valueSettings(e){const n=[];return e.forEach(a=>{"value"===a.name&&n.push(a)}),n}rendererSnippet(e){let n;return e.forEach(a=>{"_renderer"===a.name&&(n=this.snippetHandler.toObject(a.attributes))}),void 0!==n?n:(0,Re.of)(void 0)}rendererOverrideSettings(e){return[new Ct.AttributeValue({name:"_renderer",type:Ct.AttributeTypes.Complex,displayName:"Renderer Override",value:void 0,computedValue:void 0,intValue:0,attributes:this.snippetHandler.buildSettings(e)})]}widgetSettings(e){return[new Ct.AttributeValue({name:"widget",type:e.schema.type,displayName:"Widget",value:e.name,computedValue:e.name,intValue:0,attributes:[]})]}stateDefinition(e){return(0,Re.of)({})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(iu))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),AG=(()=>{class t{constructor(e,n,a,s,l){this.data=e,this.dialogRef=n,this.tokenizerService=a,this.handler=s,this.fb=l}ngOnInit(){this.tokens=this.tokenizerService.generateTokens(this.data.pane.settings)}submitted(e){this.replaceRenderer(e),this.dialogRef.close()}replaceRenderer(e){let n;const a=this.handler.rendererOverrideSettings(e)[0],s=this.convertToGroup(a),l=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("settings");l.controls.forEach((c,f)=>{"_renderer"===c.get("name").value&&(n=f)}),void 0!==n?(l.insert(n,s),l.removeAt(n+1)):l.push(s)}convertToGroup(e){const n=this.fb.group({name:new d.NI(e.name,d.kI.required),type:new d.NI(e.type,d.kI.required),displayName:new d.NI(e.displayName,d.kI.required),value:new d.NI(e.value,d.kI.required),computedValue:new d.NI(e.value,d.kI.required),attributes:new d.Oe([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(a=>{n.get("attributes").push(this.convertToGroup(a))}),n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ru),o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-rendering-editor"]],decls:2,vars:1,consts:[[3,"tokens","submitted"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"classifieds-ui-snippet-form",0),o.\u0275\u0275listener("submitted",function(s){return n.submitted(s)}),o.\u0275\u0275element(1,"classifieds-ui-snippet-form"),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("tokens",n.tokens)},directives:[Ag],styles:[""]}),t})(),kG=(()=>{class t{constructor(e,n,a,s,l,c){this.data=e,this.spm=n,this.bottomSheetRef=a,this.dialog=s,this.componentFactoryResolver=l,this.fb=c,this.selectedIndex=0}ngOnInit(){this.stylePlugins=this.spm.getPlugins()}onStyleSelected(e){this.plugin=e,void 0!==this.plugin.editorComponent?(this.bottomSheetRef.dismiss(),this.data.panelForm.get("stylePlugin").setValue(this.plugin.name),this.data.panelForm.get("styleTitle").setValue(this.plugin.title),this.data.panelForm.get("settings").clear(),this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,contexts:this.data.contexts}})):(this.data.panelForm.get("stylePlugin").setValue(this.plugin.name),this.data.panelForm.get("styleTitle").setValue(this.plugin.title),this.data.panelForm.get("settings").clear(),this.bottomSheetRef.dismiss())}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Jl.OG),o.\u0275\u0275directiveInject(Jc),o.\u0275\u0275directiveInject(Jl.oL),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-style-selector"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(nv,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.selectionHost=a.first)}},decls:10,vars:6,consts:[[1,"style-selector-wrapper"],[3,"selectedIndex"],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["classifiedsUiContentSelectionHost",""],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-tab-group",1),o.\u0275\u0275elementStart(2,"mat-tab"),o.\u0275\u0275elementStart(3,"mat-nav-list"),o.\u0275\u0275template(4,uV,3,1,"a",2),o.\u0275\u0275pipe(5,"keyvalue"),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-tab"),o.\u0275\u0275elementContainerStart(8),o.\u0275\u0275template(9,dV,0,0,"ng-template",3),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("selectedIndex",n.selectedIndex),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(5,2,o.\u0275\u0275pipeBind1(6,4,n.stylePlugins))))},directives:[Cs.SP,Cs.uX,ws.Hk,ws.Tg,x.NgForOf,ri.X2,nv],pipes:[x.KeyValuePipe,x.AsyncPipe],styles:[".style-selector-wrapper[_ngcontent-%COMP%]     .mat-tab-header{display:none}"]}),t})(),IG=(()=>{class t{constructor(e,n,a,s,l){this.data=e,this.dialogRef=n,this.fb=a,this.inlineContextResolver=s,this.rulesParser=l,this.rulesForm=this.fb.group({rules:this.fb.control("")}),this.config={fields:{}}}ngOnInit(){this.inlineContextResolver.resolveMerged(this.data.contexts).subscribe(e=>{const n={};for(const a in e)this.rulesParser.buildFields(e[a],a).forEach((s,l)=>{n[l]=s});this.config={...this.config,fields:n},void 0!==this.data.rule&&this.rulesForm.get("rules").setValue(this.data.rule)})}submit(){console.log("the rules"),console.log(this.rulesForm.get("rules").value),this.dialogRef.close(this.rulesForm.get("rules").value)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Cd),o.\u0275\u0275directiveInject(Hw))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-rules-dialog"]],decls:6,vars:3,consts:[[1,"rest-form",3,"formGroup","ngSubmit"],["formControlName","rules",3,"config"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275element(2,"query-builder",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-dialog-actions"),o.\u0275\u0275elementStart(4,"button",2),o.\u0275\u0275text(5,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.rulesForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("config",n.config),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!n.rulesForm.valid))},directives:[J_,zi.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),t})(),PG=(()=>{class t{constructor(e,n,a){this.data=e,this.dialogRef=n,this.fb=a,this.propertiesForm=this.fb.group({name:this.fb.control(this.data.props.name),title:this.fb.control(this.data.props.title),path:this.fb.control(this.data.props.path),cssFile:this.fb.control(this.data.props.cssFile),readUserIds:this.fb.array([this.fb.group({userId:this.fb.control(this.data.props.readUserIds&&this.data.props.readUserIds.length>0?this.data.props.readUserIds[0]:"")})])})}ngOnInit(){}submit(){this.dialogRef.close(new Kh({...this.propertiesForm.value,readUserIds:this.propertiesForm.value.readUserIds.map(e=>e.userId)}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-properties-dialog"]],decls:18,vars:2,consts:[[1,"properties-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","title","placeholder","Title"],["matInput","","formControlName","path","placeholder","Path"],["matInput","","formControlName","cssFile","placeholder","Css File"],["formArrayName","readUserIds"],["formGroupName","0"],["matInput","","formControlName","userId","placeholder","Read User Id"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275element(5,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-form-field"),o.\u0275\u0275element(9,"input",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-form-field"),o.\u0275\u0275element(11,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"mat-form-field",7),o.\u0275\u0275elementStart(13,"div",8),o.\u0275\u0275element(14,"input",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"mat-dialog-actions"),o.\u0275\u0275elementStart(16,"button",10),o.\u0275\u0275text(17,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.propertiesForm),o.\u0275\u0275advance(16),o.\u0275\u0275property("disabled",!n.propertiesForm.valid))},directives:[Wt.KE,zi.lW,d._Y,d.JL,d.sg,Dt.xY,ue,In.Nt,d.Fj,d.JJ,d.u,d.CE,d.x0,Dt.H8,Dt.ZT],styles:[""]}),t})(),a1=(()=>{class t{constructor(e,n,a){this.data=e,this.dialogRef=n,this.fb=a,this.contextForm=this.fb.group({context:this.fb.control("")}),this.context=e.context}ngOnInit(){}ngAfterViewInit(){this.data.context&&setTimeout(()=>{this.contextFormComp.contextForm.setValue({name:this.data.context.name,plugin:this.data.context.plugin}),"rest"===this.data.context.plugin?setTimeout(()=>{this.contextFormComp.componentRef.instance.restSourceFormComp.restSource={url:this.data.context.rest.url,params:this.data.context.rest.params}}):"datasource"===this.data.context.plugin&&setTimeout(()=>{this.contextFormComp.componentRef.instance.datasourceFormComp.datasource=this.data.context.datasource})})}submit(){""!==this.contextForm.get("context").value.name?this.dialogRef.close(new Jr(this.contextForm.get("context").value)):this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-context-dialog"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(Fw,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.contextFormComp=a.first)}},decls:6,vars:3,consts:[[1,"context-form",3,"formGroup","ngSubmit"],["formControlName","context",3,"context"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275element(2,"classifieds-ui-context-form",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-dialog-actions"),o.\u0275\u0275elementStart(4,"button",2),o.\u0275\u0275text(5,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.contextForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("context",n.context),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!n.contextForm.valid))},directives:[Fw,zi.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),t})(),FG=(()=>{class t{constructor(e,n,a){this.data=e,this.dialogRef=n,this.fb=a,this.propsForm=this.fb.group({name:this.fb.control(this.data.props.name),label:this.fb.control(this.data.props.label)})}ngOnInit(){}submit(){this.dialogRef.close(new vS(this.propsForm.value))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-panel-props-dialog"]],decls:11,vars:2,consts:[[1,"props-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","label","placeholder","Label"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275element(5,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-dialog-actions"),o.\u0275\u0275elementStart(9,"button",5),o.\u0275\u0275text(10,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.propsForm),o.\u0275\u0275advance(9),o.\u0275\u0275property("disabled",!n.propsForm.valid))},directives:[Wt.KE,zi.lW,d._Y,d.JL,d.sg,Dt.xY,ue,In.Nt,d.Fj,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),t})(),RG=(()=>{class t{constructor(e,n,a){this.data=e,this.dialogRef=n,this.fb=a,this.propsForm=this.fb.group({name:this.fb.control(this.data.props.name),label:this.fb.control(this.data.props.label)})}ngOnInit(){}submit(){this.dialogRef.close(new yS(this.propsForm.value))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-pane-props-dialog"]],decls:11,vars:2,consts:[[1,"props-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","label","placeholder","Label"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275element(5,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-dialog-actions"),o.\u0275\u0275elementStart(9,"button",5),o.\u0275\u0275text(10,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.propsForm),o.\u0275\u0275advance(9),o.\u0275\u0275property("disabled",!n.propsForm.valid))},directives:[Wt.KE,zi.lW,d._Y,d.JL,d.sg,Dt.xY,ue,In.Nt,d.Fj,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),t})(),s1=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","classifiedsUiLayoutEditorHost",""]]}),t})(),l1=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","classifiedsUiPaneContentHost",""]]}),t})(),s0=(()=>{class t{constructor(e,n){this.entityServices=e,this.attributeSerializer=n}get entityCollectionService(){return this.entityServices.getEntityCollectionService("PanelPageState")}resolve(e,n){const a=f=>f.entities,c="$."+n.selectionPath.map((f,h)=>`${(h+1)%2==0?"panes":(0===h?"":"nestedPage.")+"panels"}[${f}]`).join(".");return this.entityCollectionService.collection$.pipe((0,Et.Ys)((({id:f,path:h})=>(0,Et.P1)((({id:f})=>(0,Et.P1)(a,h=>h[f]?h[f]:void 0))({id:f}),g=>(0,Ro.JSONPath)({path:h,json:g})))({id:n.id,path:c})),(0,ye.U)(f=>f&&Array.isArray(f)&&0!==f.length?f[0]:this.defaultPaneState(n.value?n.value:{})),(0,ye.U)(f=>this.attributeSerializer.deserialize(f.state)),(0,ye.U)(f=>f?f.root?f.root:f:{}),(0,ee.b)(f=>{console.log(`resolved panestate[id=${n.id}]${c}`),console.log(f)}))}defaultPaneState(e){return new ea({state:this.attributeSerializer.serialize(e,"root")})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(li),o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),c1=(()=>{class t{constructor(e,n,a){this.componentFactoryResolver=e,this.panelHandler=n,this.cpm=a,this.settings=[],this.locked=!1,this.contexts=[],this.edit=new o.EventEmitter,this.props=new o.EventEmitter,this.delete=new o.EventEmitter,this.rules=new o.EventEmitter,this.rendererOverride=new o.EventEmitter,this.removeRendererOverride=new o.EventEmitter,this.nestedUpdate=new o.EventEmitter,this.heightChange=new o.EventEmitter,this.displayOverride=!1,this.hasOverride=!1,this.preview=!1,this.schedulePluginChange=new M.x,this.pluginChangeSub=this.schedulePluginChange.pipe((0,Ke.w)(s=>this.cpm.getPlugin(this.pluginName).pipe((0,Ke.w)(l=>l.handler.hasRendererOverride(this.settings).pipe((0,ye.U)(c=>[s,l,c])))))).subscribe(([s,l,c])=>{this.contentPlugin=l,this.displayOverride=l.handler.implementsRendererOverride(),this.hasOverride=!!c,s&&"panel"===this.pluginName&&this.panelHandler.toObject(this.settings).subscribe(f=>{this.panelPage=f})}),this.ancestory$=new M.x,this.panelIndex$=new M.x,this.paneIndex$=new M.x,this.paneAncestoryWithSelf=[],this.paneAncestoryWithSelfSub=(0,Ln.a)([this.ancestory$,this.panelIndex$,this.paneIndex$]).pipe((0,ye.U)(([s,l,c])=>[...s,l,c])).subscribe(s=>{this.paneAncestoryWithSelf=s})}set panelIndex(e){this.panelIndex$.next(e)}set paneIndex(e){this.paneIndex$.next(e)}set ancestory(e){this.ancestory$.next(e)}ngOnInit(){this.schedulePluginChange.next(!0),console.log("here 1")}ngOnChanges(e){this.schedulePluginChange.next(!1),console.log("here 2"),console.log(e)}onEditClick(){this.edit.emit()}onPropsClick(){this.props.emit()}onRulesClick(){this.rules.emit()}onDeleteClick(){this.delete.emit()}onPreviewClick(){this.preview=!0,void 0!==this.contentPaneHost&&this.renderPaneContent(),setTimeout(()=>this.heightChange.emit())}onOverrideClick(){this.rendererOverride.emit()}onRemoveOverrideClick(){this.removeRendererOverride.emit()}onNestedUpdate(e){this.nestedUpdate.emit(e)}onDisablePreviewClick(){this.preview=!1,void 0!==this.contentPaneHost&&this.contentPaneHost.viewContainerRef.clear(),setTimeout(()=>this.heightChange.emit())}onAfterCollapse(){this.heightChange.emit()}onAfterExpand(){this.heightChange.emit()}renderPaneContent(){const e=this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent),n=this.contentPaneHost.viewContainerRef;n.clear(),n.createComponent(e).instance.settings=this.settings}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(fo),o.\u0275\u0275directiveInject(Gt.ContentPluginManager))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-editable-pane"]],viewQuery:function(e,n){if(1&e&&(o.\u0275\u0275viewQuery(l1,5),o.\u0275\u0275viewQuery(fV,5)),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.contentPaneHost=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.contentEditor=a.first)}},inputs:{pluginName:"pluginName",settings:"settings",name:"name",label:"label",panelIndex:"panelIndex",paneIndex:"paneIndex",locked:"locked",rootContext:"rootContext",contexts:"contexts",ancestory:"ancestory"},outputs:{edit:"edit",props:"props",delete:"delete",rules:"rules",rendererOverride:"rendererOverride",removeRendererOverride:"removeRendererOverride",nestedUpdate:"nestedUpdate",heightChange:"heightChange"},features:[o.\u0275\u0275NgOnChangesFeature],decls:17,vars:6,consts:[["class","editable-pane-wrapper",4,"ngIf","ngIfElse"],["settingsTmpl",""],["nestedPanelTpl",""],["paneMenu","matMenu"],["type","button","mat-menu-item","",3,"disabled","click"],["type","button","mat-menu-item","",3,"click"],["mat-menu-item","","type","button",3,"disabled","click",4,"ngIf"],["mat-menu-item","","type","button",3,"click",4,"ngIf"],["type","button","mat-menu-item","",1,"delete",3,"click"],[1,"editable-pane-wrapper"],["fxLayout","row",1,"inner-pane-wrapper"],[1,"pane-menu-trigger-wrapper"],["mat-button","","type","button",3,"matMenuTriggerFor"],["fxFlex","",3,"afterCollapse","afterExpand"],[3,"hidden"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"preview-area",3,"ngClass"],["class","override","type","button",3,"click",4,"ngIf"],["classifiedsUiPaneContentHost",""],["type","button",1,"override",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nested-panel-wrapper"],[3,"panelPage","savable","nested","locked","contexts","rootContext","ancestory","nestedUpdate","delete","rules","props"],["contentEditor",""],["extraActionsArea",""],["mat-menu-item","","type","button",3,"disabled","click"],["mat-menu-item","","type","button",3,"click"]],template:function(e,n){if(1&e&&(o.\u0275\u0275template(0,yV,18,13,"div",0),o.\u0275\u0275template(1,wV,1,1,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(3,EV,5,7,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementStart(5,"mat-menu",null,3),o.\u0275\u0275elementStart(7,"button",4),o.\u0275\u0275listener("click",function(){return n.onEditClick()}),o.\u0275\u0275text(8,"Edit"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"button",4),o.\u0275\u0275listener("click",function(){return n.onPropsClick()}),o.\u0275\u0275text(10,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"button",5),o.\u0275\u0275listener("click",function(){return n.onRulesClick()}),o.\u0275\u0275text(12,"Rules"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(13,TV,2,1,"button",6),o.\u0275\u0275template(14,AV,2,0,"button",7),o.\u0275\u0275elementStart(15,"button",8),o.\u0275\u0275listener("click",function(){return n.onDeleteClick()}),o.\u0275\u0275text(16,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const a=o.\u0275\u0275reference(4);o.\u0275\u0275property("ngIf","panel"!=n.pluginName||n.locked)("ngIfElse",a),o.\u0275\u0275advance(7),o.\u0275\u0275property("disabled",n.locked),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",n.locked&&0!==n.settings.length),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",!n.preview),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.preview)}},directives:function(){return[zi.lW,rp.Hw,a0.ib,a0.yz,l0,ho.VK,ho.OP,x.NgIf,ue,ho.p6,Xt,a0.yK,x.NgTemplateOutlet,x.NgClass,dr,l1,x.NgForOf]},pipes:function(){return[Ct.AttributePipe]},styles:[".editable-pane-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em;border-radius:4px;padding-left:.25em;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.nested-panel-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em}.inner-pane-wrapper[_ngcontent-%COMP%]{padding:0}.pane-header[_ngcontent-%COMP%]{background-color:#ccc;padding:0}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}button.delete[_ngcontent-%COMP%]{float:right}.preview-area[_ngcontent-%COMP%]{display:none;position:relative}.preview-area.visible[_ngcontent-%COMP%]{display:block;height:300px;overflow-y:scroll;border:1px solid black;padding:.5em}.panel-name[_ngcontent-%COMP%]{float:right;padding-right:.5em}.pane-menu-trigger-wrapper[_ngcontent-%COMP%]{display:flex}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 1em 0 .25em}"]}),t})(),l0=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g,I,B,V,ce,Ie){this.siteName=e,this.cpm=n,this.spm=a,this.lpm=s,this.cxtm=l,this.fb=c,this.bs=f,this.dialog=h,this.panelHandler=g,this.tokenizerService=I,this.componentFactoryResolver=B,this.pageBuilderFacade=V,this.paneStateContextResolver=ce,this.panelsContextService=Ie,this.submitted=new o.EventEmitter,this.nestedUpdate=new o.EventEmitter,this.delete=new o.EventEmitter,this.rules=new o.EventEmitter,this.props=new o.EventEmitter,this.savable=!0,this.nested=!1,this.locked=!1,this.pageBuilder=!1,this.contexts=[],this.contentAdded=new M.x,this.contentAdddedSub=this.contentAdded.subscribe(([he,Se])=>{this.resolvePaneContexts(he,Se)}),this.dashboard=[],this.pageProperties=new Kh,this.persistence=new Sd,this.interactions=new Wc,this.layoutSetting=new Qn,this.rowSettings=[],this.ancestory$=new m.X([]),this.onTouched=()=>{},this.contentForm=this.fb.group({name:this.fb.control(""),title:this.fb.control(""),layoutType:this.fb.control("split",d.kI.required),displayType:this.fb.control("page",d.kI.required),panels:this.fb.array([])}),this.options={gridType:Nn.Fit,displayGrid:Qh.Always,pushItems:!0,draggable:{enabled:!0},resizable:{enabled:!0},mobileBreakpoint:0,itemChangeCallback:(he,Se)=>{},itemInitCallback:(he,Se)=>{if(this.nested&&0!==he.y){const Oe=this.gridLayout.grid.findIndex(Be=>Be.x===he.x&&Be.y===he.y&&Be.cols===he.cols&&Be.rows===he.rows);0===this.panelPanes(Oe).length&&this.gridLayout.setItemContentHeight(Oe,200)}}},this.ancestorySub=this.ancestory$.pipe((0,$.h)(()=>!!this.layoutEditorRef)).subscribe(he=>{this.layoutEditorRef.instance.ancestory=he})}set ancestory(e){this.ancestory$.next(e)}get ancestory(){return this.ancestory$.value}get panels(){return this.contentForm.get("panels")}get layoutType(){return this.contentForm.get("layoutType")}get displayType(){return this.contentForm.get("displayType")}get columnSettings(){const e=this.panels.length;let n=[];for(let a=0;a<e;a++)n=[...n,new Qn(this.panels.at(a).get("columnSetting").value)];return n}ngOnInit(){this.contentForm.valueChanges.pipe((0,$.h)(()=>this.nested),(0,Hn.b)(500)).subscribe(()=>{this.nestedUpdate.emit(this.packageFormData())}),this.contentForm.get("layoutType").valueChanges.pipe((0,$.h)(e=>"gridless"===e),(0,ui.g)(1)).subscribe(e=>{0===this.panels.length&&this.panels.push(this.fb.group({name:new d.NI(""),label:new d.NI(""),stylePlugin:new d.NI(""),styleTitle:new d.NI(""),settings:new d.Oe([]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array([])})}))}),this.contentForm.valueChanges.pipe((0,$.h)(()=>!this.nested),(0,Hn.b)(500)).subscribe(()=>{const e=this.packageFormData();this.pageBuilderFacade.setPage(e)})}ngAfterViewInit(){this.layoutType.valueChanges.pipe((0,$.h)(()=>!!this.layoutEditorHost)).subscribe(e=>{this.renderEditorLayout(e)}),this.layoutType.value&&this.renderEditorLayout(this.layoutType.value)}ngAfterContentInit(){setTimeout(()=>{this.panelPage||this.contentForm.get("layoutType").setValue("split")},1e3)}ngOnChanges(e){e.panelPage&&e.panelPage.previousValue!==e.panelPage.currentValue&&(this.panels.clear(),this.panelPageId=e.panelPage.currentValue.panelPageId,this.dashboard=e.panelPage.currentValue.gridItems.map(n=>Object.assign({},n)),this.layoutType.setValue(e.panelPage.currentValue.layoutType),this.layoutSetting=new Qn(e.panelPage.currentValue.layoutSetting),this.rowSettings=e.panelPage.currentValue.rowSettings?e.panelPage.currentValue.rowSettings.map(n=>new Qn(n)):[],this.persistence=e.panelPage.currentValue.persistence?new Sd(e.panelPage.currentValue.persistence):new Sd,this.interactions=e.panelPage.currentValue.interactions?new Wc(e.panelPage.currentValue.interactions):new Wc,this.nested?(this.pageProperties=new Kh({name:e.panelPage.currentValue.name,title:e.panelPage.currentValue.title,path:"",readUserIds:[],cssFile:""}),this.contentForm.get("name").setValue(e.panelPage.currentValue.name),this.contentForm.get("title").setValue(e.panelPage.currentValue.title)):(this.pageProperties=new Kh({name:e.panelPage.currentValue.name,title:e.panelPage.currentValue.title,path:e.panelPage.currentValue.path,readUserIds:e.panelPage.currentValue.entityPermissions.readUserIds,cssFile:e.panelPage.currentValue.cssFile}),this.contexts=e.panelPage.currentValue.contexts),e.panelPage.currentValue.panels.forEach((n,a)=>{this.panels.push(this.fb.group({name:new d.NI(n.name),label:new d.NI(n.label),stylePlugin:new d.NI(n.stylePlugin),styleTitle:new d.NI(""),settings:this.fb.array(void 0!==n.settings?n.settings.map(s=>this.convertToGroup(s)):[]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array(n.columnSetting?n.columnSetting.settings.map(s=>this.convertToGroup(s)):[])})})),n.stylePlugin&&""!==n.stylePlugin&&this.spm.getPlugin(n.stylePlugin).subscribe(s=>{this.panels.at(a).get("styleTitle").setValue(s.title)}),this.nested&&this.panelPanes(this.panels.length-1).valueChanges.pipe((0,Hn.b)(5),(0,ui.g)(1)).subscribe((s=>()=>{if(void 0!==this.gridLayout){const l=this.paneContainers.find((c,f)=>f===s);this.gridLayout.setItemContentHeight(s,l.nativeElement.offsetHeight)}})(this.panels.length-1)),n.panes.forEach((s,l)=>{this.panels.at(a).get("panes").push(this.fb.group({contentPlugin:s.contentPlugin,name:new d.NI(s.name),label:new d.NI(s.label),locked:new d.NI(s.locked),linkedPageId:new d.NI(s.linkedPageId),rule:new d.NI(s.rule&&null!==s.rule?{...s.rule,rules:s.rule.rules&&Array.isArray(s.rule.rules)?s.rule.rules:[]}:{condition:"",rules:[]}),settings:new d.Oe(s.settings.map(c=>this.convertToGroup(c)))})),setTimeout(()=>this.resolvePaneContexts(a,l))})}),this.layoutEditorRef&&(this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings))}addContent(e){console.log(this.panels.at(e)),this.pageBuilderFacade.getPage$.pipe((0,Ke.w)(n=>this.panelsContextService.allActivePageContexts({panelPage:n})),(0,hn.q)(1)).subscribe(n=>{this.bs.open(TG,{data:{panelForm:this.panels.at(e),panelIndex:e,contexts:[...this.rootContext?[this.rootContext]:[],...this.contexts,...n]}})})}editPanelProps(e){const n=this.panels.at(e).get("name"),a=this.panels.at(e).get("label");this.dialog.open(FG,{data:{props:new vS({name:n.value,label:a.value})}}).afterClosed().subscribe(s=>{s&&(n.setValue(s.name),a.setValue(s.label))})}editPaneProps(e,n){const a=this.panelPane(e,n).get("name"),s=this.panelPane(e,n).get("label");this.dialog.open(RG,{data:{props:new yS({name:a.value,label:s.value})}}).afterClosed().subscribe(l=>{l&&(a.setValue(l.name),s.setValue(l.label))})}applyStyle(e){this.bs.open(kG,{data:{panelForm:this.panels.controls[e],panelIndex:e,contexts:this.contexts}})}removeStyle(e){this.panels.controls[e].get("stylePlugin").setValue(""),this.panels.controls[e].get("styleTitle").setValue("")}onItemAdded(){console.log("item added"),this.panels.push(this.fb.group({name:new d.NI(""),label:new d.NI(""),stylePlugin:new d.NI(""),styleTitle:new d.NI(""),settings:new d.Oe([]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array([])})})),this.nested&&void 0!==this.gridLayout&&setTimeout(()=>{this.paneContainers.forEach((e,n)=>{this.gridLayout.setItemContentHeight(n,e.nativeElement.offsetHeight)})}),this.panelPanes(this.panels.length-1).valueChanges.pipe((0,$.h)(()=>this.nested&&void 0!==this.gridLayout),(0,Hn.b)(5),(0,ui.g)(1)).subscribe((e=>()=>{const n=this.paneContainers.find((a,s)=>s===e);this.gridLayout.setItemContentHeight(e,n.nativeElement.offsetHeight)})(this.panels.length-1)),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}onItemRemoved(e){this.panels.removeAt(e),this.nested&&void 0!==this.gridLayout&&setTimeout(()=>{this.paneContainers.forEach((n,a)=>{this.gridLayout.setItemContentHeight(a,n.nativeElement.offsetHeight)})}),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}onDrop(e){console.log(e);const n=+e.container.data,a=+e.previousContainer.data;if(n===a){const s=e.currentIndex>e.previousIndex?1:-1,l=e.previousIndex,c=e.currentIndex,f=this.panelPanes(n).at(l);for(let h=l;h*s<c*s;h+=s){const g=this.panelPanes(n).at(h+s);this.panelPanes(n).setControl(h,g)}this.panelPanes(n).setControl(c,f)}else{const s=this.panelPanes(a).at(e.previousIndex);this.panelPanes(a).removeAt(e.previousIndex),this.panelPanes(n).insert(e.currentIndex,s)}}onOverrideRenderer(e,n){const a=new mi(this.panelPane(e,n).value);this.dialog.open(AG,{data:{panelFormGroup:this.panels.at(e),paneIndex:n,pane:a}})}onRemoveOverrideRenderer(e,n){const a=this.panelPane(e,n).get("settings");let s;a.controls.forEach((l,c)=>{"_renderer"===l.get("name").value&&(s=c)}),void 0!==s&&a.removeAt(s)}onNestedUpdate(e,n,a){const s=this.panelHandler.buildSettings(e),l=this.panelPane(n,a).get("settings");l.clear(),s.forEach(c=>l.push(this.convertToGroup(c)))}onPaneHeightChange(e){if(this.nested&&this.gridLayout){const n=this.paneContainers.find((a,s)=>s===e);this.gridLayout.setItemContentHeight(e,n.nativeElement.offsetHeight)}}onDeleteClick(){this.delete.emit()}onRulesClick(){this.rules.emit()}onPropertiesClick(){this.props.emit(),this.dialog.open(PG,{data:{props:this.pageProperties}}).afterClosed().subscribe(e=>{e&&(this.pageProperties=new Kh({...e}),this.contentForm.get("name").setValue(e.name),this.contentForm.get("title").setValue(e.title))})}onRulesPane(e,n){const a=new mi(this.panelPane(e,n).value),s=""!==this.panelPane(e,n).get("rule").value?this.panelPane(e,n).get("rule").value:void 0,[l]=this.editablePanes.filter((c,f)=>c.name===a.name);this.pageBuilderFacade.getPage$.pipe((0,ee.b)(()=>{this.pageBuilderFacade.setSelectionPath([...this.ancestory,e,n])}),(0,Ke.w)(c=>this.panelsContextService.allActivePageContexts({panelPage:c})),(0,Ke.w)(c=>this.dialog.open(IG,{data:{rule:s,contexts:[...l.rootContext?[l.rootContext]:this.rootContext?[this.rootContext]:[],...this.contexts,...c]}}).afterClosed()),(0,hn.q)(1)).subscribe(c=>{this.panelPane(e,n).get("rule").setValue(c||s||void 0)})}onDeletePane(e,n){console.log(`delete nested pane: ${e} | ${n}`)}onAddContextClick(){const e=this.packageFormData();this.pageBuilderFacade.setPage(e),this.dialog.open(a1,{data:{}}).afterClosed().subscribe(n=>{n&&(this.contexts=[...this.contexts,n])})}onEditContext(e){const n=this.contexts.find(a=>a.name===e);if(console.log(n),n){const a=this.packageFormData();this.pageBuilderFacade.setPage(a),this.dialog.open(a1,{data:{context:n}}).afterClosed().subscribe(s=>{s&&(this.contexts=this.contexts.map(l=>l.name===e?new Jr(s):l))})}}onLayoutSettingChange(e){this.layoutSetting=new Qn(e),this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.layoutSetting=this.layoutSetting)}onRowSettingsChange(e){this.rowSettings=e.map(n=>new Qn(n)),this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.rowSettings=this.rowSettings)}onColumnSettingsChange(e){const n=this.panels.length;for(let a=0;a<n;a++){this.panels.at(a).get("columnSetting").get("settings").clear();for(let s=0;s<e[a].settings.length;s++)this.panels.at(a).get("columnSetting").get("settings").push(this.convertToGroup(e[a].settings[s]))}this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}submit(){this.submitted.emit(this.packageFormData())}packageFormData(){const n=new di({id:this.panelPageId,title:this.pageProperties.title,name:this.pageProperties.name,site:this.siteName,path:this.pageProperties.path,cssFile:this.pageProperties.cssFile,displayType:this.displayType.value,layoutType:this.layoutType.value,gridItems:this.layoutEditorRef.instance.gridItems,contexts:this.contexts,panels:this.panels.value,layoutSetting:new Qn(this.layoutSetting),rowSettings:this.rowSettings.map(a=>new Qn(a)),persistence:this.persistence,interactions:this.interactions,entityPermissions:{readUserIds:this.pageProperties.readUserIds,writeUserIds:[],deleteUserIds:[]}});return console.log(n),n}syncNestedPanelPages(){console.log("sync nested"),this.editablePanes.forEach(e=>{if(void 0!==e.contentEditor){const n=this.panelHandler.buildSettings(e.contentEditor.packageFormData()),a=this.panelPane(e.panelIndex,e.paneIndex).get("settings");a.clear(),n.forEach(s=>a.push(this.convertToGroup(s)))}})}resolvePaneContexts(e,n){const a=new mi(this.panelPane(e,n).value),s=this.panelPanes(e).controls;this.cpm.getPlugin(a.contentPlugin).pipe((0,$.h)(l=>void 0!==l.handler&&l.handler.isDynamic(a.settings)),(0,Ke.w)(l=>l.handler.fetchDynamicData(a.settings,new Map([["tag",ai()],["contexts",[...this.contexts]]])).pipe((0,ye.U)(c=>new Jr({name:"_root",adaptor:"data",data:0!==c.length?c.results[0]:{}})),(0,Ke.w)(c=>l.handler.getBindings(a.settings,"pane").pipe((0,ye.U)(f=>[c,f.map(h=>s.findIndex(g=>new mi(g.value).name===h.id))])))))).subscribe(([l,c])=>{this.editablePanes.forEach((f,h)=>{c.findIndex(g=>g===h)>-1&&(f.rootContext=l)})})}onPersistenceClick(){this.dialog.open(zj,{data:{persistence:this.persistence,contexts:this.contexts}}).afterClosed().subscribe(e=>{console.log("persistence closed",e),this.persistence=e||this.persistence})}onInteractionsClick(){this.dialog.open(qj,{data:{interactions:this.interactions,contexts:this.contexts},maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}).afterClosed().subscribe(e=>{console.log("interactions closed",e),this.interactions=e||this.interactions})}panelPanes(e){return this.panels.at(e).get("panes")}panelPane(e,n){return this.panelPanes(e).at(n)}panelPanePlugin(e,n){return this.panelPane(e,n).get("contentPlugin").value}panelPaneSettings(e,n){return this.panelPane(e,n).get("settings").value}panelPaneName(e,n){return this.panelPane(e,n).get("name").value}panelPaneLabel(e,n){return this.panelPane(e,n).get("label").value}panelPaneLocked(e,n){if(this.locked)return this.locked;const a=this.panelPane(e,n).get("locked");return null!==a&&a.value}panelPaneIsNested(e,n){return"panel"===this.panelPanePlugin(e,n)}panelPanePanelPage(e,n){let a;return this.panelHandler.toObject(this.panelPaneSettings(e,n)).subscribe(s=>{a=s}),a}hasPanelStyle(e){return void 0!==this.panels.at(e).get("stylePlugin").value&&""!==this.panels.at(e).get("stylePlugin").value}panelStyleTitle(e){return this.panels.at(e).get("styleTitle").value}onPaneEdit(e,n){const a=new mi(this.panelPane(e,n).value),s=this.panelPanePlugin(e,n),[l]=this.editablePanes.filter((c,f)=>c.name===a.name);this.cpm.getPlugin(s).pipe((0,$.h)(c=>void 0!==c.editorComponent),(0,Ke.w)(c=>this.pageBuilderFacade.getPage$.pipe((0,Ke.w)(f=>this.panelsContextService.allActivePageContexts({panelPage:f}).pipe((0,ye.U)(h=>[c,h]),(0,hn.q)(1))),(0,hn.q)(1))),(0,Ke.w)(([c,f])=>c.handler?c.handler.editorOptions(a.settings).pipe((0,ye.U)(h=>[c,f,h])):(0,Re.of)([c,f,new Gt.ContentPluginEditorOptions]))).subscribe(([c,f,h])=>{this.dialog.open(c.editorComponent,{data:{panelFormGroup:this.panels.at(e),panelIndex:e,paneIndex:n,contexts:[...l.rootContext?[l.rootContext]:this.rootContext?[this.rootContext]:[],...this.contexts,...f],contentAdded:this.contentAdded,pane:a},...h.fullscreen?{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}:{}}).afterClosed().subscribe(()=>{this.resolvePaneContexts(e,n)})})}onPaneDelete(e,n){this.panelPanes(e).removeAt(n)}onFileChange(e,n){const a=e.addedFiles[0];this.cpm.getPlugins().pipe((0,ye.U)(s=>Array.from(s.values()).filter(l=>void 0!==l.handler).find(l=>l.handler.handlesType(a.type))),(0,$.h)(s=>void 0!==s)).subscribe(s=>{s.handler.handleFile(a).subscribe(l=>{this.panelPanes(n).push(this.fb.group({contentPlugin:s.id,name:new d.NI(""),label:new d.NI(""),settings:this.fb.array(l.map(c=>this.fb.group({name:new d.NI(c.name,d.kI.required),type:new d.NI(c.type,d.kI.required),displayName:new d.NI(c.displayName,d.kI.required),value:new d.NI(c.value,d.kI.required),computedValue:new d.NI(c.value,d.kI.required)})))}))})})}writeValue(e){e&&this.contentForm.setValue(e,{emitEvent:!1})}registerOnChange(e){this.contentForm.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.contentForm.disable():this.contentForm.enable()}validate(e){return this.contentForm.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}convertToGroup(e){const n=this.fb.group({name:new d.NI(e.name,d.kI.required),type:new d.NI(e.type,d.kI.required),displayName:new d.NI(e.displayName,d.kI.required),value:new d.NI(e.value,d.kI.required),computedValue:new d.NI(e.value,d.kI.required),attributes:new d.Oe([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(a=>{n.get("attributes").push(this.convertToGroup(a))}),n}renderEditorLayout(e){console.log(`render editor layout ${e}`),this.lpm.getPlugin(e).subscribe(n=>{const a=this.componentFactoryResolver.resolveComponentFactory(n.editor),s=this.layoutEditorHost.viewContainerRef;s.clear(),this.layoutEditorRef=s.createComponent(a),this.layoutEditorRef.instance.savable=this.savable,this.layoutEditorRef.instance.nested=this.nested,this.layoutEditorRef.instance.ancestory=this.ancestory,this.layoutEditorRef.instance.editor=this,this.layoutEditorRef.instance.extraActionsAreaTmpl=this.extraActionsAreaTmpl,this.layoutEditorRef.instance.contextsMenuTpl=this.contextsMenuTpl,this.layoutEditorRef.instance.editablePaneTpl=this.editablePaneTpl,this.layoutEditorRef.instance.dashboard=this.dashboard,this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings})}updateEditorLayoutVars(){this.layoutEditorRef.instance.savable=this.savable,this.layoutEditorRef.instance.nested=this.nested,this.layoutEditorRef.instance.ancestory=this.ancestory,this.layoutEditorRef.instance.editor=this,this.layoutEditorRef.instance.extraActionsAreaTmpl=this.extraActionsAreaTmpl,this.layoutEditorRef.instance.contextsMenuTpl=this.contextsMenuTpl,this.layoutEditorRef.instance.editablePaneTpl=this.editablePaneTpl,this.layoutEditorRef.instance.dashboard=this.dashboard,this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(mn.SITE_NAME),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(Jc),o.\u0275\u0275directiveInject(Yg),o.\u0275\u0275directiveInject(Ql),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Jl.ch),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(fo),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(Do),o.\u0275\u0275directiveInject(s0),o.\u0275\u0275directiveInject(pS))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-content-editor"]],contentQueries:function(e,n,a){if(1&e&&o.\u0275\u0275contentQuery(a,kV,5),2&e){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.extraActionsAreaTmpl=s.first)}},viewQuery:function(e,n){if(1&e&&(o.\u0275\u0275viewQuery(zS,5),o.\u0275\u0275viewQuery(VS,5),o.\u0275\u0275viewQuery(s1,5),o.\u0275\u0275viewQuery(IV,7),o.\u0275\u0275viewQuery(PV,7),o.\u0275\u0275viewQuery(FV,5),o.\u0275\u0275viewQuery(c1,5)),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.gridLayout=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.splitLayout=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.layoutEditorHost=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.contextsMenuTpl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.editablePaneTpl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.paneContainers=a),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.editablePanes=a)}},inputs:{panelPage:"panelPage",savable:"savable",nested:"nested",locked:"locked",pageBuilder:"pageBuilder",contexts:"contexts",rootContext:"rootContext",ancestory:"ancestory"},outputs:{submitted:"submitted",nestedUpdate:"nestedUpdate",delete:"delete",rules:"rules",props:"props"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}]),o.\u0275\u0275NgOnChangesFeature],decls:12,vars:3,consts:[["class","content-editor-wrapper",3,"formGroup","ngClass","ngSubmit",4,"ngIf","ngIfElse"],["nestedTpl",""],["editablePaneTpl",""],["contextsMenuTpl",""],["contextMenu","matMenu"],["type","button","mat-menu-item","",3,"click"],["type","button","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"content-editor-wrapper",3,"formGroup","ngClass","ngSubmit"],["classifiedsUiLayoutEditorHost",""],[1,"content-editor-wrapper",3,"formGroup","ngClass"],[1,"editable-pane",3,"panelIndex","paneIndex","name","label","locked","contexts","pluginName","settings","ancestory","delete","rules","nestedUpdate","rendererOverride","removeRendererOverride","edit","props"],["class","custom-placeholder",4,"cdkDragPlaceholder"],[1,"custom-placeholder"],["type","button","mat-menu-item","",1,"context-button",3,"matMenuTriggerFor"]],template:function(e,n){if(1&e&&(o.\u0275\u0275template(0,DV,3,4,"form",0),o.\u0275\u0275template(1,MV,3,4,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(3,NV,2,9,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(5,BV,2,1,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementStart(7,"mat-menu",null,4),o.\u0275\u0275elementStart(9,"button",5),o.\u0275\u0275listener("click",function(){return n.onAddContextClick()}),o.\u0275\u0275text(10,"define variable"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(11,jV,2,1,"button",6),o.\u0275\u0275elementEnd()),2&e){const a=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",!n.nested&&!n.pageBuilder)("ngIfElse",a),o.\u0275\u0275advance(11),o.\u0275\u0275property("ngForOf",n.contexts)}},directives:[c1,ho.OP,ho.VK,x.NgIf,d._Y,d.JL,d.sg,x.NgClass,dr,s1,eu.Hk,ho.p6,x.NgForOf],styles:[".content-editor-wrapper[_ngcontent-%COMP%]{height:100%}.panel-inner[_ngcontent-%COMP%]{padding:1em}.content-editor-wrapper[_ngcontent-%COMP%]     ngx-dropzone{height:100%;display:block;padding:0;border:none}.content-editor-wrapper.nested[_ngcontent-%COMP%]     .grid-item-header{border-bottom:1px solid white}.layout-type[_ngcontent-%COMP%], .display-type[_ngcontent-%COMP%]{float:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:1.5em}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:85px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .main-controls{background-color:#ccc}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .layout-inner{background-color:#ccc;padding:.75em}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .editable-pane-wrapper{border:none;margin-bottom:0}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .pane-header{background-color:#fff}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .nested-panel-wrapper{padding:.75em;margin-bottom:0}.custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;transition:transform .25s cubic-bezier(0,0,.2,1)}.context-button[_ngcontent-%COMP%]{font-style:italic;font-family:serif;font-weight:bolder;font-size:medium}"]}),t})(),DG=(()=>{class t{constructor(e,n,a){this.data=e,this.fb=n,this.handler=a}ngOnInit(){void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).subscribe(e=>{this.snippet=e})}onSubmit(e){if(void 0===this.data.paneIndex)this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"snippet",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:new d.Oe(this.buildSettings(e))}));else{const n=this.data.panelFormGroup.get("panes").at(this.data.paneIndex);n.get("settings").clear(),this.buildSettings(e).forEach(a=>{n.get("settings").push(a)})}}buildSettings(e){return[this.fb.group({name:new d.NI("contentType",d.kI.required),type:new d.NI(Ct.AttributeTypes.Text,d.kI.required),displayName:new d.NI("Content Type",d.kI.required),value:new d.NI(e.contentType,d.kI.required),computedValue:new d.NI(e.contentType,d.kI.required)}),this.fb.group({name:new d.NI("content",d.kI.required),type:new d.NI(Ct.AttributeTypes.Text,d.kI.required),displayName:new d.NI("Content",d.kI.required),value:new d.NI(e.content,d.kI.required),computedValue:new d.NI(e.content,d.kI.required)}),this.fb.group({name:new d.NI("jsScript",d.kI.required),type:new d.NI(Ct.AttributeTypes.Text,d.kI.required),displayName:new d.NI("jsScript",d.kI.required),value:new d.NI(e.jsScript),computedValue:new d.NI(e.jsScript)})]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(iu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-snippet-editor2"]],decls:1,vars:1,consts:[[3,"snippet","submitted"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"classifieds-ui-snippet-form",0),o.\u0275\u0275listener("submitted",function(s){return n.onSubmit(s)}),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("snippet",n.snippet)},directives:[Ag],styles:[""]}),t})(),iv=(()=>{class t{constructor(e,n,a,s,l,c,f){this.route=e,this.pageBuilderFacade=n,this.routerStore=a,this.asyncApiCallHelperSvc=s,this.crudDataHelperService=l,this.entityDefinitionService=c,this.paramMapSub=this.route.paramMap.pipe((0,ee.b)(()=>console.log("param map panelPageId")),(0,ye.U)(h=>h.get("panelPageId")),(0,$.h)(h=>void 0!==h),(0,Ke.w)(()=>this.route.data),(0,Vo.M)(this.routerStore.pipe((0,Et.Ys)(zh(h=>h.router).selectCurrentRoute),(0,ye.U)(h=>h.params),(0,hn.q)(1))),(0,ee.b)(([h,g])=>{console.log("route page"),this.pageBuilderFacade.setPageInfo(new Xh({id:h.panelPageListItem.id,realPath:"/pages/panelpage/"+h.panelPageListItem.id,path:h.panelPageListItem.path,args:g})),this.panelPageId=h.panelPageListItem.id})).subscribe(),this.panelPageService=f.getEntityCollectionService("PanelPage")}ngOnInit(){const{selectCurrentRoute:e}=zh(n=>n.router);this.route.paramMap.pipe((0,ee.b)(()=>console.log("param map page builder facade info")),(0,Vo.M)(this.pageBuilderFacade.getPageInfo$),(0,$.h)(([n,a])=>void 0!==a&&void 0!==n.get("panelPageId")&&n.get("panelPageId")===a.id),(0,Ke.w)(([n,a])=>this.routerStore.pipe((0,Et.Ys)(e),(0,ye.U)(s=>[a,s.params]),(0,hn.q)(1)))).subscribe(([n,a])=>{this.pageBuilderFacade.setPageInfo(new Xh({...n,args:a}))})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(zn.ActivatedRoute),o.\u0275\u0275directiveInject(Do),o.\u0275\u0275directiveInject(Et.yh),o.\u0275\u0275directiveInject(mn.AsyncApiCallHelperService),o.\u0275\u0275directiveInject(Td),o.\u0275\u0275directiveInject(pr),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-panel-page-router"]],decls:1,vars:1,consts:[[3,"id"]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"classifieds-ui-panel-page",0),2&e&&o.\u0275\u0275property("id",n.panelPageId)},directives:[Zr],styles:[""]}),t})(),OG=(()=>{class t{constructor(e){this.panelPageService=e.getEntityCollectionService("PanelPage"),this.panelPageListItemService=e.getEntityCollectionService("PanelPageListItem")}ngOnInit(){console.log("here")}onSubmit(e){console.log("create panel page",e),e.id=ai(),this.panelPageService.add(e).subscribe(()=>{console.log("panel page created")})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-create-panel-page"]],decls:1,vars:0,consts:[[3,"submitted"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"classifieds-ui-content-editor",0),o.\u0275\u0275listener("submitted",function(s){return n.onSubmit(s)}),o.\u0275\u0275elementEnd())},directives:[l0],styles:[""]}),t})(),rv=(()=>{class t{constructor(e,n,a,s,l){this.route=e,this.pageBuilderFacade=n,this.routerStore=a,this.moduleLoader=s,this.panelPageService=l.getEntityCollectionService("PanelPage"),this.panelPageListItemService=l.getEntityCollectionService("PanelPageListItem")}ngOnInit(){this.route.paramMap.pipe((0,ye.U)(e=>e.get("panelPageId")),(0,$.h)(e=>void 0!==e),(0,xs.x)(),(0,Ke.w)(e=>this.panelPageService.getByKey(e)),(0,Ke.w)(e=>e?(0,cn.D)(e.contexts.filter(n=>"module"===n.plugin).map(n=>this.moduleLoader.loadModule(()=>Md({type:"module",remoteEntry:n.data.remoteEntry,exposedModule:n.data.exposedModule}).then(a=>a[n.data.moduleName])))).pipe((0,ui.g)(1),(0,ye.U)(()=>e),(0,Ei.d)(e)):(0,Re.of)(e)),(0,Ke.w)(e=>this.routerStore.pipe((0,Et.Ys)(zh(n=>n.router).selectCurrentRoute),(0,ye.U)(n=>[e,n.params]),(0,hn.q)(1))),(0,ee.b)(([e,n])=>this.pageBuilderFacade.setPageInfo(new Xh({id:e.id,realPath:`/pages/panelpage/${e.id}`,path:e.path,args:n})))).subscribe(([e])=>{console.log(e),this.panelPage=e})}onSubmit(e){console.log("submitted"),this.panelPageService.update(new di({...e,id:this.panelPage.id})).subscribe(()=>{alert("panel page updated")})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(zn.ActivatedRoute),o.\u0275\u0275directiveInject(Do),o.\u0275\u0275directiveInject(Et.yh),o.\u0275\u0275directiveInject(mn.ModuleLoaderService),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-edit-panel-page"]],decls:1,vars:1,consts:[[3,"panelPage","submitted"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"classifieds-ui-content-editor",0),o.\u0275\u0275listener("submitted",function(s){return n.onSubmit(s)}),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("panelPage",n.panelPage)},directives:[l0],styles:[""]}),t})(),MG=(()=>{class t{constructor(e,n,a,s,l,c){this.bottomSheetRef=e,this.handler=n,this.fb=a,this.dialog=s,this.cpm=l,this.wpm=c}ngOnInit(){this.attributeWidgets=this.wpm.getPlugins()}onItemSelect(e){console.log(e),this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"attribute",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array(this.handler.widgetSettings(e).map(l=>this.fb.group({name:new d.NI(l.name,d.kI.required),type:new d.NI(l.type,d.kI.required),displayName:new d.NI(l.displayName,d.kI.required),value:new d.NI(l.value,d.kI.required),computedValue:new d.NI(l.computedValue,d.kI.required)})))}));const n=this.panelFormGroup.get("panes"),a=n.length-1,s=new mi(n.at(a).value);this.cpm.getPlugin("attribute").subscribe(l=>{this.dialog.open(l.editorComponent,{data:{panelFormGroup:this.panelFormGroup,pane:s,paneIndex:a}})}),this.bottomSheetRef.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Jl.oL),o.\u0275\u0275directiveInject(ru),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(Ct.WidgetPluginManager))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-attribute-selector"]],inputs:{panelFormGroup:"panelFormGroup"},decls:4,vars:5,consts:[["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-nav-list"),o.\u0275\u0275template(1,zV,3,1,"a",0),o.\u0275\u0275pipe(2,"keyvalue"),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,1,o.\u0275\u0275pipeBind1(3,3,n.attributeWidgets))))},directives:[ws.Hk,ws.Tg,x.NgForOf,ri.X2],pipes:[x.KeyValuePipe,x.AsyncPipe],styles:[""]}),t})(),LG=(()=>{class t{constructor(e,n,a,s,l){this.data=e,this.dialogRef=a,this.fb=s,this.handler=l,this.attributes=[],this.attributeValues=[],this.attributesFormGroup=this.fb.group({name:new d.NI(""),label:new d.NI(""),attributes:new d.NI("")});const c=this.data.pane.settings.find(f=>"widget"===f.name);this.widget=n.find(f=>f.name===c.value)}get name(){return this.attributesFormGroup.get("name")}get label(){return this.attributesFormGroup.get("label")}ngOnInit(){const e=this.data.pane.settings.find(s=>"value"===s.name);this.attributes=[new Ct.Attribute({...this.widget.schema,widget:this.widget.name,label:"Value",name:"value"})];const n=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("name").value,a=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("label").value;this.attributesFormGroup.get("name").setValue(n),this.attributesFormGroup.get("label").setValue(a),void 0!==e?(this.attributeValues=this.handler.valueSettings(this.data.pane.settings),console.log(this.attributeValues)):this.attributeValues=[new Ct.AttributeValue({name:"value",type:this.widget.schema.type,displayName:"Value",value:"",computedValue:"",intValue:0,attributes:[]})]}submit(){const e=this.name.value,n=this.label.value;this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("name").setValue(e),this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("label").setValue(n);const a=new mi({name:e,label:n,contentPlugin:"attribute",settings:""===this.attributesFormGroup.get("attributes").value?[]:this.attributesFormGroup.get("attributes").value});0!==a.settings.length?this.handler.rendererSnippet(this.data.pane.settings).subscribe(s=>{const l=void 0!==s?this.handler.rendererOverrideSettings(s):[],c=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("settings");c.clear(),[...this.handler.widgetSettings(this.widget),...a.settings,...l].forEach(f=>c.push(this.convertToGroup(f))),this.dialogRef.close()}):this.dialogRef.close()}convertToGroup(e){const n=this.fb.group({name:new d.NI(e.name,d.kI.required),type:new d.NI(e.type,d.kI.required),displayName:new d.NI(e.displayName,d.kI.required),value:new d.NI(e.value,d.kI.required),computedValue:new d.NI(e.value,d.kI.required),attributes:new d.Oe([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(a=>{n.get("attributes").push(this.convertToGroup(a))}),n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Ct.ATTRIBUTE_WIDGET),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(ru))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-attribute-editor"]],decls:10,vars:3,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Label","formControlName","label"],["formControlName","attributes",3,"attributes","attributeValues"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content",1),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275element(3,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275element(5,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(6,"classifieds-ui-attributes-builder",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-dialog-actions"),o.\u0275\u0275elementStart(8,"button",5),o.\u0275\u0275text(9,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.attributesFormGroup),o.\u0275\u0275advance(6),o.\u0275\u0275property("attributes",n.attributes)("attributeValues",n.attributeValues))},directives:[Wt.KE,Ct.AttributesBuilderComponent,zi.lW,d._Y,d.JL,d.sg,Dt.xY,ue,In.Nt,d.Fj,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),t})(),NG=(()=>{class t{constructor(e,n,a,s,l){this.widgets=e,this.handler=n,this.tokenizerService=a,this.fb=s,this.controlContainer=l,this.settings=[],this.appearance="legacy",this.attributes=[]}ngOnInit(){this.attributes=[new Ct.Attribute({...this.widgets.find(e=>e.name===this.settings.find(n=>"widget"===n.name).value).schema,name:"value",label:"Value"})],this.attributeValues=this.handler.valueSettings(this.settings),this.tokens=this.tokenizerService.generateTokens(this.attributeValues),this.handler.rendererSnippet(this.settings).subscribe(e=>{this.rendererOverride=e,void 0!==e&&(this.rendererSettings=this.handler.rendererOverrideSettings(e)[0].attributes)})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.ATTRIBUTE_WIDGET),o.\u0275\u0275directiveInject(ru),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-attribute-pane-renderer"]],inputs:{settings:"settings",appearance:"appearance",name:"name",label:"label",displayType:"displayType"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["overrideTpl",""],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["settingsTmpl",""],[4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","settings",3,"attributes","attributeValues"],[3,"settings","tokens"]],template:function(e,n){if(1&e&&(o.\u0275\u0275template(0,YV,3,2,"div",0),o.\u0275\u0275template(1,QV,1,2,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&e){const a=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",!n.rendererOverride)("ngIfElse",a)}},directives:[Ct.AttributesBuilderComponent,o1,x.NgIf,x.NgTemplateOutlet,x.NgForOf,d.JL,d.sg,d.JJ,d.u],pipes:[Ct.AttributePipe],styles:[".override[_ngcontent-%COMP%]{position:absolute;top:.5em;right:.5em}"]}),t})(),Ld=(()=>{class t{constructor(e,n){this.filesService=e,this.attributeSerializer=n,this.types=["image/png","image/jpg","image/jpeg","image/gif"]}handleFile(e){return this.filesService.bulkUpload({files:[e]}).pipe((0,ye.U)(n=>this.buildSettings(n[0])))}handlesType(e){return void 0!==this.types.find(n=>n===e)}implementsRendererOverride(){return!1}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return!1}isData(e){return!1}buildDynamicItems(e,n){return(0,Re.of)([])}fetchDynamicData(e,n){return(0,Re.of)(new qn)}getBindings(e,n,a){return(0,Re.of)([])}toObject(e){return(0,Re.of)(this.attributeSerializer.deserializeAsObject(e))}buildSettings(e){return e.fileName="placeholdername",this.attributeSerializer.serialize(e,"root").attributes}stateDefinition(e){return(0,Re.of)({mediaLoading:"y",mediaLoaded:"n",loadError:"n",loadDuration:"y"})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(_g),o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),BG=(()=>{class t{constructor(e,n,a,s,l){this.data=e,this.dialogRef=n,this.fb=a,this.filesService=s,this.handler=l,this.mediaTypes=".png,.jpg,.jpeg,.gif,.svg"}ngOnInit(){void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).pipe((0,Ke.w)(e=>this.filesService.convertToFiles([e]))).subscribe(e=>{this.media=e[0]})}onSelectMedia(e){this.media=e.addedFiles[0],this.handler.handleFile(this.media).subscribe(n=>{void 0===this.data.paneIndex&&this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"media",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:new d.Oe(n.map(a=>this.fb.group({name:new d.NI(a.name,d.kI.required),type:new d.NI(a.type,d.kI.required),displayName:new d.NI(a.displayName,d.kI.required),value:new d.NI(a.value,d.kI.required),computedValue:new d.NI(a.value,d.kI.required)})))})),this.dialogRef.close()})}onRemoveMedia(e){this.media=void 0}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(_g),o.\u0275\u0275directiveInject(Ld))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-media-editor"]],decls:4,vars:3,consts:[[3,"multiple","accept","change"],[3,"removable","file","removed",4,"ngIf"],[3,"removable","file","removed"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"ngx-dropzone",0),o.\u0275\u0275listener("change",function(s){return n.onSelectMedia(s)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2,"Drag and Drop Media Here"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,JV,3,4,"ngx-dropzone-image-preview",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("multiple",!1)("accept",n.mediaTypes),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",n.media))},directives:[Bg,bS,_S,x.NgIf],styles:[""]}),t})(),jG=(()=>{class t{constructor(e,n,a,s){this.mediaSettings=e,this.handler=n,this.attributeSerializer=a,this.settings=[],this.ancestory=[],this.state={},this.stateChange=new o.EventEmitter,this.panelPageStateService=s.getEntityCollectionService("PanelPageState")}ngOnInit(){console.log("media ancestory is"),console.log(this.ancestory),console.log("my state is:"),console.log(this.state),this.mediaBaseUrl=this.mediaSettings.imageUrl,this.handler.toObject(this.settings).subscribe(e=>{this.mediaFile=e})}ngAfterViewInit(){this.image.nativeElement.onload=()=>{console.log("image loaded"),this.stateChange.emit({mediaLoading:"n"})}}ngOnChanges(){this.mediaBaseUrl=this.mediaSettings.imageUrl,this.handler.toObject(this.settings).subscribe(e=>{this.mediaFile=e})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(yg),o.\u0275\u0275directiveInject(Ld),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-media-pane-renderer"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(ZV,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.image=a.first)}},inputs:{settings:"settings",ancestory:"ancestory",state:"state"},outputs:{stateChange:"stateChange"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[3,"src"],["img",""]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"img",0,1),2&e&&o.\u0275\u0275propertyInterpolate2("src","",n.mediaBaseUrl,"/",n.mediaFile.path,"",o.\u0275\u0275sanitizeUrl)},styles:["img[_ngcontent-%COMP%]{max-width:100%}"]}),t})(),dp=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g){this.siteName=e,this.snippetHandler=n,this.pageBuilderFacade=a,this.store=s,this.tokenizerService=l,this.panelHandler=c,this.urlGeneratorService=f,this.attributeSerializer=h,this.rulesResolver=g}handleFile(e){return(0,Re.of)([])}handlesType(e){return!1}implementsRendererOverride(){return!0}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return["snippet","pane"].indexOf(this.getRenderType(e))>-1}isData(e){return!1}fetchDynamicData(e,n){const a=new M.x;return this.toObject(e).pipe((0,Ke.w)(s=>this.urlGeneratorService.getUrl(s.url,s.params,n).pipe((0,ye.U)(l=>[s,l])))).subscribe(([s,l])=>{this.pageBuilderFacade.loadRestData(`${n.get("tag")}`,new Ua({...s,url:l})),this.store.pipe((0,Et.Ys)(Ng(`${n.get("tag")}`)),(0,$.h)(c=>void 0!==c)).subscribe(c=>{a.next(c),a.complete()})}),a}buildDynamicItems(e,n){const a=new M.x;return console.log("build dynamic items rest"),this.toObject(e).pipe((0,Ke.w)(s=>this.urlGeneratorService.getUrl(s.url,s.params,n).pipe((0,ye.U)(l=>[s,l])))).subscribe(([s,l])=>{console.log("Load in rest data"),this.pageBuilderFacade.loadRestData(`${n.get("tag")}`,new Ua({...s,url:l})),this.store.pipe((0,Et.Ys)(Ng(`${n.get("tag")}`)),(0,$.h)(c=>void 0!==c),(0,Ke.w)(c=>this.getBindings(e,"pane").pipe((0,ye.U)(f=>[c,f]))),(0,Ke.w)(([c,f])=>Gn(()=>0!==c.results.length&&f.length>0,new y.y(h=>{(0,cn.D)(c.results.map(g=>(0,O_.D)(f).pipe((0,ye.U)(I=>n.get("panes").find(B=>B.name===I.id)),(0,Ke.w)(I=>Gn(()=>I.rule&&null!==I.rule&&""!==I.rule.condition,this.rulesResolver.evaluate(I.rule,[...n.get("contexts"),...void 0!==I.contexts?I.contexts:[],new Jr({name:"_root",adaptor:"data",data:g})]).pipe((0,ye.U)(B=>[I,B])),(0,Re.of)(!1).pipe((0,ye.U)(B=>[I,B])))),(0,$.h)(([I,B])=>B),(0,ye.U)(([I,B])=>I.name),(0,Ei.d)(f[0].id),(0,hn.q)(1)))).pipe((0,ye.U)(g=>[c,g])).subscribe(g=>{h.next(g),h.complete()})}),new y.y(h=>{h.next([c]),h.complete()}))),(0,ye.U)(([c,f])=>c.results.map("pane"===s.renderer.type?(h,g)=>{const I=n.get("panes").find(V=>V.name===f[g]),B=ai();return new mi({...I,rule:void 0,label:B,contexts:[...n.get("contexts"),new Jr({name:"_root",adaptor:"data",data:h})]})}:h=>new mi({contentPlugin:"snippet",name:ai(),label:void 0,contexts:[...n.get("contexts"),new Jr({name:"_root",adaptor:"data",data:h})],settings:this.snippetHandler.buildSettings({...s.renderer.data,content:s.renderer.data.content})}))),(0,ye.U)(c=>new uo({stylePlugin:void 0,settings:[],panes:c,columnSetting:new Qn})),(0,ye.U)(c=>this.panelHandler.buildSettings(new di({id:void 0,layoutType:"grid",displayType:"page",site:this.siteName,gridItems:[],layoutSetting:new Qn,rowSettings:[],panels:[c]})))).subscribe(c=>{a.next(c.find(f=>"panels"===f.name).attributes[0].attributes.find(f=>"panes"===f.name).attributes),a.complete()})}),a}buildSelectOptionItems(e,n){return this.toObject(e).pipe((0,Ke.w)(a=>this.urlGeneratorService.getUrl(a.url,a.params,n).pipe((0,ye.U)(s=>[a,s]))),(0,ye.U)(([a,s])=>new Ua({...a,url:s}))).subscribe(a=>{this.pageBuilderFacade.loadRestData(`${n.get("tag")}`,a)}),this.store.pipe((0,Et.Ys)(Ng(`${n.get("tag")}`)),(0,$.h)(a=>void 0!==a),(0,ye.U)(a=>[a,a.results.map(s=>this.tokenizerService.generateGenericTokens(s))]),(0,ye.U)(([a,s])=>[a,s,new Tw(JSON.parse(n.get("snippet").content))]),(0,ye.U)(([a,s,l])=>s.map((c,f)=>new Ew({dataItem:a.results[f],value:this.attributeSerializer.serialize("[.]"===l.value?a.results[f]:this.tokenizerService.replaceTokens(l.value,c),"value"),label:this.tokenizerService.replaceTokens(l.label,c)}))))}getBindings(e,n,a){return"context"===n?this.toObject(e).pipe((0,ye.U)(s=>s.params.reduce((l,c)=>[...l,..."form"===c.mapping.type?[new Gt.ContentBinding({id:`form__${c.mapping.value.split(".",2)[0].trim()}`,type:"context"})]:[]],[]))):this.toObject(e).pipe((0,Ke.w)(s=>Gn(()=>s.renderer.type===n,(0,Re.of)(s.renderer.bindings),(0,Re.of)([]))))}toObject(e){return(0,Re.of)(this.attributeSerializer.deserializeAsObject(e))}buildSettings(e){return this.attributeSerializer.serialize(e,"root").attributes}getRenderType(e){const n=[e.find(a=>"renderer"===a.name)].map(a=>a.attributes.find(s=>"type"===s.name));return n.length>0?n[0].value:void 0}stateDefinition(e){return(0,Re.of)({autocomplete:{input:""}})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(mn.SITE_NAME),o.\u0275\u0275inject(iu),o.\u0275\u0275inject(Do),o.\u0275\u0275inject(Et.yh),o.\u0275\u0275inject(Xn),o.\u0275\u0275inject(fo),o.\u0275\u0275inject(Kl),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(D_))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),zG=(()=>{class t{constructor(e,n){this.fb=e,this.tokenizerService=n,this.panes=[],this.submitted=new o.EventEmitter,this.contexts=[],this.forms=[],this.snippetValidation=!0,this.restForm=this.fb.group({source:this.fb.control(""),renderer:this.fb.group({type:"snippet",query:this.fb.control(""),trackBy:this.fb.control(""),data:this.fb.control(""),bindings:this.fb.array([]),select:this.fb.group({value:this.fb.control(""),label:this.fb.control(""),id:this.fb.control(""),multiple:this.fb.control(""),limit:this.fb.control("")})})})}set rest(e){if(void 0!==e){this._rest=e;const n={value:"",label:"",id:"",multiple:"",limit:""};this.restForm.setValue({renderer:{trackBy:"",query:"",...e.renderer,data:e.renderer.data?{...e.renderer.data,jsScript:e.renderer.data.jsScript?e.renderer.data.jsScript:""}:{content:"",contentType:"",jsScript:""},select:["pane","snippet"].findIndex(a=>a===e.renderer.type)>-1?n:JSON.parse(e.renderer.data.content),bindings:[]},source:{url:"",params:[],method:"",body:""}}),"pane"===e.renderer.type&&(this.bindings.clear(),e.renderer.bindings.forEach(a=>{"pane"===a.type&&this.bindings.push(this.fb.group({id:this.fb.control(a.id,d.kI.required),type:this.fb.control(a.type,d.kI.required)}))})),"pane"===e.renderer.type?this.restForm.get("renderer").get("data").disable():this.restForm.get("renderer").get("data").enable(),setTimeout(()=>{this.restSource={url:e.url,params:e.params,method:e.method?e.method:"",body:e.body?{...e.body,jsScript:""}:""},this.sourceForm.refreshData$.next(void 0)})}}get rendererType(){return this.restForm.get("renderer").get("type")}get isSelectable(){return this.restForm.get("renderer").get("type").value&&"snippet"!==this.restForm.get("renderer").get("type").value&&"pane"!==this.restForm.get("renderer").get("type").value}get bindings(){return this.restForm.get("renderer").get("bindings")}get valid(){return this.restForm.valid}ngOnInit(){console.log(this.contexts),this.restForm.get("renderer").get("type").valueChanges.subscribe(e=>{"pane"===this.rendererType.value?this.restForm.get("renderer").get("data").disable():this.restForm.get("renderer").get("data").enable(),this.restForm.get("renderer").get("data").setValue({contentType:"",content:"",jsScript:""})}),this.restForm.get("renderer").get("select").valueChanges.subscribe(e=>{this.restForm.get("renderer").get("data").setValue({contentType:"application/json",content:JSON.stringify({value:e.value,label:e.label,id:e.id,multiple:e.multiple,limit:e.limit}),jsScript:""})})}ngAfterViewInit(){}onDataChange(e){this.tokens=this.tokenizerService.generateGenericTokens(e[0])}addPane(){this.bindings.push(this.fb.group({type:this.fb.control("pane",d.kI.required),id:this.fb.control("",d.kI.required)}))}submit(){const e=new Ua({...this.restForm.value,url:this.restForm.value.source.url,params:this.restForm.value.source.params,method:this.restForm.value.source.method,body:this.restForm.value.source.body});this.submitted.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Xn))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-rest-form"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(op,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.sourceForm=a.first)}},inputs:{panes:"panes",contexts:"contexts",rest:"rest"},outputs:{submitted:"submitted"},decls:34,vars:9,consts:[[1,"rest-form",3,"formGroup","ngSubmit"],["direction","vertical",1,"content-inner"],["as-split-area","","size","50"],["formControlName","source",3,"contexts","restSource","dataChange"],["size","50","formGroupName","renderer"],["matInput","","formControlName","query","placeholder","Query"],["matInput","","formControlName","trackBy","placeholder","Track By"],["required","","formControlName","type"],["label","Output"],["value","snippet"],["value","pane"],["label","Input"],["value","select"],["value","radiogroup"],["value","checkboxgroup"],["value","autocomplete"],["formControlName","data","splitDirection","horizontal","rows","10","cols","40",3,"hidden","rootForm","tokens"],["formArrayName","bindings",4,"ngIf"],["formGroupName","select",4,"ngIf"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],["formArrayName","bindings"],["type","button",3,"click"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formGroupName","select"],["matInput","","formControlName","id","placeholder","Id"],["matInput","","formControlName","value","placeholder","Value"],["matInput","","formControlName","label","placeholder","Label"],["formControlName","multiple"],["matInput","","formControlName","limit","placeholder","Limit"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"as-split",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275elementStart(4,"classifieds-ui-rest-source-form",3),o.\u0275\u0275listener("dataChange",function(s){return n.onDataChange(s)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"as-split-area",4),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-form-field"),o.\u0275\u0275element(9,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-form-field"),o.\u0275\u0275elementStart(11,"mat-label"),o.\u0275\u0275text(12,"Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"mat-select",7),o.\u0275\u0275elementStart(14,"mat-optgroup",8),o.\u0275\u0275elementStart(15,"mat-option",9),o.\u0275\u0275text(16,"Snippet"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"mat-option",10),o.\u0275\u0275text(18,"Pane"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"mat-optgroup",11),o.\u0275\u0275elementStart(20,"mat-option",12),o.\u0275\u0275text(21,"Select"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(22,"mat-option",13),o.\u0275\u0275text(23,"Radio Group"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(24,"mat-option",14),o.\u0275\u0275text(25,"Checkbox Group"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(26,"mat-option",15),o.\u0275\u0275text(27,"Autocomplete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(28,"classifieds-ui-snippet-form",16),o.\u0275\u0275template(29,nG,5,1,"div",17),o.\u0275\u0275template(30,iG,12,0,"div",18),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(31,"mat-dialog-actions"),o.\u0275\u0275elementStart(32,"button",19),o.\u0275\u0275text(33,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.restForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("contexts",n.contexts)("restSource",n.restSource),o.\u0275\u0275advance(24),o.\u0275\u0275property("hidden","snippet"!=n.rendererType.value)("rootForm",!1)("tokens",n.tokens),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","pane"==n.rendererType.value),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isSelectable),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!n.valid))},directives:[Oh,op,Wt.KE,Hi.gD,ri.Nv,ri.ey,Ag,za.oG,zi.lW,d._Y,d.JL,d.sg,Dt.xY,Mh,d.JJ,d.u,d.x0,In.Nt,d.Fj,Wt.hX,d.Q7,x.NgIf,d.CE,x.NgForOf,Dt.H8,Dt.ZT],styles:[".rest-form[_ngcontent-%COMP%]     .content-inner{height:auto}"]}),t})(),UG=(()=>{class t{constructor(e,n,a,s){this.data=e,this.dialogRef=n,this.fb=a,this.handler=s,this.panes=[],this.contexts=[],this.contexts=this.data.contexts}ngOnInit(){this.panes=this.data.panelFormGroup.get("panes").controls.reduce((e,n)=>n.get("name").value?[...e,n.get("name").value]:[...e],[]),void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).subscribe(e=>{this.rest=e})}submitted(e){const n=this.data.panelFormGroup.get("panes");if(void 0===this.data.paneIndex)n.push(this.fb.group({contentPlugin:"rest",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array(this.handler.buildSettings(e).map(a=>this.convertToGroup(a)))})),this.data.contentAdded.next([this.data.panelIndex,n.length-1]);else{const a=n.at(this.data.paneIndex);a.get("settings").clear(),this.handler.buildSettings(e).forEach(s=>{a.get("settings").push(this.convertToGroup(s))})}this.dialogRef.close()}convertToGroup(e){const n=this.fb.group({name:new d.NI(e.name,d.kI.required),type:new d.NI(e.type,d.kI.required),displayName:new d.NI(e.displayName,d.kI.required),value:new d.NI(e.value,d.kI.required),computedValue:new d.NI(e.value,d.kI.required),attributes:new d.Oe([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(a=>{n.get("attributes").push(this.convertToGroup(a))}),n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(dp))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-rest-editor"]],decls:1,vars:3,consts:[[3,"panes","rest","contexts","submitted"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"classifieds-ui-rest-form",0),o.\u0275\u0275listener("submitted",function(s){return n.submitted(s)}),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("panes",n.panes)("rest",n.rest)("contexts",n.contexts)},directives:[zG],styles:[""]}),t})(),VG=(()=>{class t{constructor(e,n,a){this.fb=e,this.attributeSerializer=n,this.tokenizerService=a,this.searchChange=new o.EventEmitter,this.selectionForm=this.fb.group({attributes:this.fb.array([])}),this.onTouched=()=>{},this.displayAuto=s=>a.replaceTokens(this.selectMapping.label,this.tokenizerService.generateGenericTokens(s.dataItem))}set values(e){this.options=e,this.buildOptions()}get attributesArray(){return this.selectionForm.get("attributes")}ngOnInit(){this.attributesArray.push(this.fb.group({name:new d.NI("value",d.kI.required),type:new d.NI(Ct.AttributeTypes.Array,d.kI.required),displayName:new d.NI("Value",d.kI.required),value:new d.NI(""),attributes:["checkboxgroup"].findIndex(e=>e===this.renderType)>-1?this.fb.array([]):new d.NI("")})),"autocomplete"===this.renderType&&(this.attributesArray.at(0).addControl("_proxy",this.fb.control("")),this.attributesArray.at(0).get("_proxy").valueChanges.pipe((0,xs.x)(),(0,Hn.b)(500)).subscribe(e=>{this.searchChange.emit(e)}))}onOptionSelected(e){this.attributesArray.at(0).get("attributes").setValue(e.option.value.value),this.attributesArray.at(0).get("attributes").updateValueAndValidity()}writeValue(e){e&&this.attributesArray.setValue(e,{emitEvent:!1})}registerOnChange(e){this.attributesArray.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.attributesArray.disable():this.attributesArray.enable()}validate(e){return this.selectionForm.valid?null:{invalidForm:{valid:!1,message:"selection is invalid"}}}buildOptions(){if("checkboxgroup"===this.renderType&&void 0!==this.options){const e=this.attributesArray.controls[0].get("attributes");e.clear(),this.options.forEach(n=>{const a=this.attributeSerializer.convertToGroup(n.value);a.addControl("_store",new d.NI(!1)),e.push(a)})}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Xn))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-selection"]],inputs:{name:"name",label:"label",values:"values",renderType:"renderType",selectMapping:"selectMapping"},outputs:{searchChange:"searchChange"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:9,vars:6,consts:[[3,"formGroup"],["formArrayName","attributes"],["formGroupName","0"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formControlName","attributes"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["formControlName","_store"],["matInput","","formControlName","_proxy",3,"placeholder","matAutocomplete"],[3,"displayWith","optionSelected"],["autocomplete","matAutocomplete"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div",2),o.\u0275\u0275elementStart(3,"div"),o.\u0275\u0275elementContainerStart(4,3),o.\u0275\u0275template(5,oG,6,2,"ng-container",4),o.\u0275\u0275template(6,sG,6,2,"ng-container",4),o.\u0275\u0275template(7,cG,4,1,"ng-container",4),o.\u0275\u0275template(8,dG,6,4,"ng-container",4),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.selectionForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngSwitch",n.renderType),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","select"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","radiogroup"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","checkboxgroup"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","autocomplete"))},directives:[Wt.KE,Hi.gD,ri.ey,ec.U0,za.oG,nu.XC,d.JL,d.sg,d.CE,d.x0,x.NgSwitch,x.NgSwitchCase,Wt.hX,d.JJ,d.u,x.NgForOf,ec.VQ,In.Nt,d.Fj,nu.ZL],styles:[""]}),t})(),GG=(()=>{class t{constructor(e,n){this.restHandler=e,this.controlContainer=n,this.settings=[],this.contexts=[],this.state={},this.stateChange=new o.EventEmitter,this.tag=ai(),this.searchChange$=new M.x}get renderType(){return this.restHandler.getRenderType(this.settings)}ngOnInit(){this.restHandler.toObject(this.settings).pipe((0,ee.b)(e=>{this.snippet=e.renderer.data,this.selectMapping=new Tw(JSON.parse(this.snippet.content))}),(0,$.h)(()=>"autocomplete"!==this.renderType),(0,Ke.w)(e=>this.restHandler.buildSelectOptionItems(this.settings,new Map([["tag",this.tag],["snippet",e.renderer.data],["contexts",this.contexts]])))).subscribe(e=>{this.options=e}),this.searchChange$.pipe((0,ee.b)(e=>{this.stateChange.emit({autocomplete:{input:e}})}),(0,Ke.w)(e=>this.restHandler.buildSelectOptionItems(this.settings,new Map([["tag",ai()],["snippet",this.snippet],["contexts",this.contexts]])))).subscribe(e=>{this.options=e})}onSearchChange(e){this.searchChange$.next(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(dp),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-rest-pane-renderer"]],inputs:{settings:"settings",name:"name",label:"label",displayType:"displayType",contexts:"contexts",state:"state"},outputs:{stateChange:"stateChange"},decls:2,vars:6,consts:[[3,"formGroup"],["formControlName","settings",3,"name","label","renderType","values","selectMapping","searchChange"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"classifieds-ui-selection",1),o.\u0275\u0275listener("searchChange",function(s){return n.onSearchChange(s)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("name",n.name)("label",n.label)("renderType",n.renderType)("values",n.options)("selectMapping",n.selectMapping))},directives:[VG,d.JL,d.sg,d.JJ,d.u],styles:[""]}),t})(),ov=(()=>{class t{constructor(e,n,a,s,l,c){this.siteName=e,this.tokenizerService=n,this.panelHandler=a,this.mediaHandler=s,this.attributeSerializer=l,this.inlineContextResolver=c}handleFile(e){return(0,Re.of)()}handlesType(e){return!1}implementsRendererOverride(){return!1}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return!0}isData(e){return!1}fetchDynamicData(e,n){return(0,Re.of)(new qn)}buildDynamicItems(e,n){return this.toObject(e).pipe((0,ye.U)(a=>[a,n.get("contexts").find(s=>s.name===a.context)]),(0,Ke.w)(([a,s])=>this.extractDataArray(s,a.query).pipe((0,ye.U)(l=>[a,s,l]))),(0,Ke.w)(([a,s,l])=>this.transformDataArray(l,a.plugin)),(0,ye.U)(a=>new uo({stylePlugin:void 0,settings:[],panes:a,columnSetting:new Qn})),(0,ye.U)(a=>this.panelHandler.buildSettings(new di({id:void 0,layoutType:"grid",displayType:"page",site:this.siteName,gridItems:[],layoutSetting:new Qn,rowSettings:[],panels:[a]}))),(0,ye.U)(a=>a.find(s=>"panels"===s.name).attributes[0].attributes.find(s=>"panes"===s.name).attributes))}getBindings(e,n,a){return"context"===n?this.toObject(e).pipe((0,ye.U)(s=>[new Gt.ContentBinding({id:s.context,type:"context"})])):(0,Re.of)([])}toObject(e){return(0,Re.of)(this.attributeSerializer.deserializeAsObject(e))}buildSettings(e){return this.attributeSerializer.serialize(e,"root").attributes}extractDataArray(e,n){return this.inlineContextResolver.resolve(e).pipe((0,ye.U)(a=>{const s=n.split("."),l=s.length;if(void 0===e)return(0,Re.of)([]);let c=Array.isArray(a)?a[0]:a;for(let f=0;f<l;f++)""!==s[f]&&(c=c[s[f]]);return c}))}transformDataArray(e,n){return"media"===n?(0,Re.of)(e.map(a=>new h_(a)).map(a=>new mi({contentPlugin:"media",name:void 0,label:void 0,settings:this.mediaHandler.buildSettings(a)}))):(0,Re.of)()}stateDefinition(e){return(0,Re.of)({})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(mn.SITE_NAME),o.\u0275\u0275inject(Xn),o.\u0275\u0275inject(fo),o.\u0275\u0275inject(Ld),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Cd))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class $G{constructor(r){r&&(this.context=r.context,this.query=r.query,this.plugin=r.plugin)}}let HG=(()=>{class t{constructor(e){this.fb=e,this.contexts=[],this.submitted=new o.EventEmitter,this.sliceForm=this.fb.group({context:this.fb.control("",d.kI.required),query:this.fb.control("",d.kI.required),plugin:this.fb.control("",d.kI.required)})}ngOnInit(){}submit(){const e=new $G(this.sliceForm.value);this.submitted.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-slice-form"]],inputs:{contexts:"contexts"},outputs:{submitted:"submitted"},decls:20,vars:3,consts:[[1,"slice-form",3,"formGroup","ngSubmit"],["required","","formControlName","context"],["value","_root"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Query","formControlName","query","required",""],["required","","formControlName","plugin"],["value","media"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-select",1),o.\u0275\u0275elementStart(6,"mat-option",2),o.\u0275\u0275text(7,"_root"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(8,fG,2,2,"mat-option",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-form-field"),o.\u0275\u0275element(10,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"mat-form-field"),o.\u0275\u0275elementStart(12,"mat-label"),o.\u0275\u0275text(13,"Plugin"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"mat-select",5),o.\u0275\u0275elementStart(15,"mat-option",6),o.\u0275\u0275text(16,"Media"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"mat-dialog-actions"),o.\u0275\u0275elementStart(18,"button",7),o.\u0275\u0275text(19,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.sliceForm),o.\u0275\u0275advance(8),o.\u0275\u0275property("ngForOf",n.contexts),o.\u0275\u0275advance(10),o.\u0275\u0275property("disabled",!n.sliceForm.valid))},directives:[Wt.KE,Hi.gD,ri.ey,zi.lW,d._Y,d.JL,d.sg,Dt.xY,Wt.hX,d.Q7,d.JJ,d.u,x.NgForOf,In.Nt,d.Fj,Dt.H8,Dt.ZT],styles:[""]}),t})(),qG=(()=>{class t{constructor(e,n,a,s){this.data=e,this.dialogRef=n,this.fb=a,this.handler=s,this.contexts=[],this.contexts=this.data.contexts}ngOnInit(){}submitted(e){this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"slice",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array(this.handler.buildSettings(e).map(n=>this.convertToGroup(n)))})),this.dialogRef.close()}convertToGroup(e){const n=this.fb.group({name:new d.NI(e.name,d.kI.required),type:new d.NI(e.type,d.kI.required),displayName:new d.NI(e.displayName,d.kI.required),value:new d.NI(e.value,d.kI.required),computedValue:new d.NI(e.value,d.kI.required),attributes:new d.Oe([])});return e.attributes&&e.attributes.length>0&&e.attributes.forEach(a=>{n.get("attributes").push(this.convertToGroup(a))}),n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(ov))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-slice-editor"]],decls:1,vars:1,consts:[[3,"contexts","submitted"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"classifieds-ui-slice-form",0),o.\u0275\u0275listener("submitted",function(s){return n.submitted(s)}),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("contexts",n.contexts)},directives:[HG],styles:[""]}),t})(),XG=(()=>{class t{constructor(e,n){this.fb=e,this.controlContainer=n}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("rest",d.kI.required)),this.controlContainer.control.addControl("rest",this.fb.control(""))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-context-editor"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(op,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.restSourceFormComp=a.first)}},decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","rest"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-rest-source-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&o.\u0275\u0275property("formGroup",n.controlContainer.control)},directives:[op,d.JL,d.sg,d.JJ,d.u],styles:[""]}),t})(),WG=(()=>{class t{constructor(e,n,a,s){this.data=e,this.dialogRef=n,this.fb=a,this.attributeSerializer=s,this.contexts=[],this.panes=[],this.formGroup=this.fb.group({labels:this.fb.array([this.buildLabelGroup()])}),this.contexts=this.data.contexts}get labels(){return this.formGroup.get("labels")}ngOnInit(){this.panes=new uo(this.data.panelFormGroup.value).panes}submit(){this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(e=>{console.log("label mappings"),console.log(this.attributeSerializer.convertToGroup(e)),this.data.panelFormGroup.get("settings").push(this.attributeSerializer.convertToGroup(e))})}onRemoveMapping(e){this.labels.removeAt(e)}onAddMapping(){this.labels.push(this.buildLabelGroup())}buildLabelGroup(){return this.fb.group({mapping:this.fb.control("")})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-tabs-panel-editor"]],decls:7,vars:3,consts:[[3,"formGroup","ngSubmit"],["formArrayName","labels"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button","mat-raised-button","","color","primary",3,"click"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"formGroupName"],["formControlName","mapping",3,"panes"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275template(2,hG,4,2,"div",2),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("click",function(){return n.onAddMapping()}),o.\u0275\u0275text(4,"Add"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"button",4),o.\u0275\u0275text(6,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",n.labels.controls),o.\u0275\u0275advance(3),o.\u0275\u0275property("disabled",!n.formGroup.valid))},directives:[A4,zi.lW,d._Y,d.JL,d.sg,d.CE,x.NgForOf,d.x0,d.JJ,d.u,Dt.ZT],encapsulation:2}),t})(),KG=(()=>{class t{constructor(e){this.attributeSerializer=e,this.settings=[],this.panes=[],this.originMappings=[],this.labelMappingsEnabled=!1}ngOnInit(){console.log("tabs panels contexts"),console.log(this.panes);const e=this.attributeSerializer.deserialize(new Ct.AttributeValue({name:"",displayName:"",computedValue:"",type:Ct.AttributeTypes.Complex,value:"",intValue:0,attributes:this.settings}));this.labelMappingsEnabled=!!(e&&void 0!==e.labels&&Array.isArray(e.labels)&&e.labels.length>0)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-tabs-panel-renderer"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings"},decls:2,vars:2,consts:[["mat-align-tabs","start",4,"ngIf"],["mat-align-tabs","start"],[4,"for"],["mat-tab-label",""],[3,"pluginName","settings","contexts"],["label","The Label",4,"ngFor","ngForOf"],["label","The Label"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,gG,2,1,"mat-tab-group",0),o.\u0275\u0275template(1,yG,2,1,"mat-tab-group",0)),2&e&&(o.\u0275\u0275property("ngIf",n.labelMappingsEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.labelMappingsEnabled))},directives:[Cs.SP,Cs.uX,cp,x.NgIf,mn.ForDirective,Cs.uD,x.NgForOf],styles:[""]}),t})(),u1=(()=>{class t{constructor(e,n){this.fb=e,this.controlContainer=n,this.panelPages=[],this.panelPage$=new m.X(new di),this.context$=new m.X(void 0),this.formGroup=this.fb.group({state:this.fb.control("",[d.kI.required])}),this.stateCtrl=this.fb.control(""),this.stateCtrlSub=this.stateCtrl.valueChanges.pipe((0,Hn.b)(250),(0,xs.x)(),(0,$.h)(a=>{try{return JSON.parse(a),!0}catch{return!1}}),(0,ye.U)(a=>JSON.parse(a))).subscribe(a=>{console.log("write state"),console.log(a),this.formGroup.get("state").setValue(a)}),this.onTouched=()=>{}}set panelPage(e){this.panelPage$.next(e)}set context(e){this.context$.next(e)}ngOnInit(){this.panelPage$.subscribe(e=>{this.panelPages=[e]}),this.context$.subscribe(e=>{this.stateCtrl.setValue(e?JSON.stringify(e.data.state):"")})}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}flattenSelector(e){const n=[];return null!=e.panel&&n.push(e.panel),null!=e.pane&&n.push(e.pane),null!=e.nested&&"object"==typeof e.nested&&this.flattenSelector(e.nested).forEach(a=>n.push(a)),n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-page-state-form"]],inputs:{panelPage:"panelPage",context:"context"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:3,vars:2,consts:[[3,"formGroup"],["cols","40","rows","20","required","",3,"formControl"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275text(1," <"),o.\u0275\u0275element(2,"textarea",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(2),o.\u0275\u0275property("formControl",n.stateCtrl))},directives:[d.JL,d.sg,d.Fj,d.Q7,d.JJ,d.oH],styles:[""]}),t})(),YG=(()=>{class t{constructor(e,n,a){this.fb=e,this.pageBuilderFacade=n,this.controlContainer=a}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",d.kI.required)),this.controlContainer.control.addControl("data",this.fb.control("")),this.pageBuilderFacade.getPage$.pipe((0,hn.q)(1)).subscribe(e=>{this.panelPage=e})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Do),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-page-state-editor"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(u1,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.restSourceFormComp=a.first)}},inputs:{context:"context"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","data",3,"panelPage","context"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-page-state-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("panelPage",n.panelPage)("context",n.context))},directives:[u1,d.JL,d.sg,d.JJ,d.u],styles:[""]}),t})(),QG=(()=>{class t{constructor(e,n){this.fb=e,this.attributeSerializer=n,this.settings$=new m.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[d.kI.required]),field:this.fb.control("",[d.kI.required])}),this.settingsSub=this.settings$.pipe((0,ye.U)(a=>a?new $_(this.attributeSerializer.deserializeAsObject(a)):void 0)).subscribe(a=>{a?(this.formGroup.get("name").setValue(a.name),this.formGroup.get("field").setValue(a.field)):(this.formGroup.get("name").setValue(""),this.formGroup.get("field").setValue(""))}),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}ngOnInit(){}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-form-datasource-form"]],inputs:{settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:11,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","field","required",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div"),o.\u0275\u0275elementStart(7,"mat-form-field"),o.\u0275\u0275elementStart(8,"mat-label"),o.\u0275\u0275text(9,"Field"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(10,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("formGroup",n.formGroup)},directives:[Wt.KE,d.JL,d.sg,Wt.hX,In.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),t})(),JG=(()=>{class t{constructor(e){this.controlContainer=e,this.settings=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-form-datasource"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-form-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",n.settings))},directives:[QG,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})();const ZG=t=>new Gt.ContentPlugin({id:"snippet",title:"Snippet",selectionComponent:void 0,editorComponent:DG,renderComponent:o1,handler:t}),e8=t=>new Gt.ContentPlugin({id:"attribute",title:"Attribute",selectionComponent:MG,editorComponent:LG,renderComponent:NG,handler:t}),t8=t=>new Gt.ContentPlugin({id:"media",title:"Media",selectionComponent:void 0,editorComponent:BG,renderComponent:jG,handler:t}),n8=t=>new Gt.ContentPlugin({id:"rest",title:"REST",selectionComponent:void 0,editorComponent:UG,renderComponent:GG,handler:t}),r8=t=>new Gt.ContentPlugin({id:"slice",title:"Slice",selectionComponent:void 0,editorComponent:qG,renderComponent:void 0,handler:t}),o8=t=>new nl({id:"page",name:"page",title:"Page",global:!0,group:"pages",baseObject:{path:""},resolver:t}),a8=t=>{const r={dataset:new qn};return new nl({id:"rest",name:"rest",title:"Rest",baseObject:r,resolver:t,editorComponent:XG})},s8=t=>{const r={dataset:new qn};return new nl({id:"form",name:"form",title:"Form",baseObject:r,resolver:t})},l8=t=>{const r=new ea({state:new Ct.AttributeValue});return new nl({id:"panestate",name:"panestate",title:"Pane State",internal:!0,baseObject:r,resolver:t})},c8=t=>{const r=new ea({state:new Ct.AttributeValue});return new nl({id:"pagestate",name:"pagestate",title:"Page State",internal:!0,baseObject:r,resolver:t,editorComponent:YG})},u8=t=>new Wh({id:"tabs",name:"tabs",title:"Tabs",handler:t,editorComponent:WG,renderComponent:KG}),c0=t=>r=>{if(0===("/"+r.map(e=>e.path).join("/")).indexOf(t.path)){const e=t.path.substr(1).split("/").length;return{consumed:r,posParams:r.reduce((n,a,s)=>0===s?{...n,panelPageId:new zn.UrlSegment(t.id,{})}:s>e-1?{...n,["arg"+(s-e)]:new zn.UrlSegment(a.path,{})}:{...n},{})}}return null},u0=t=>r=>0===("/"+r.map(e=>e.path).join("/")).indexOf(t.path)&&r.map(e=>e.path).join("/").indexOf("/manage")>-1?(t.path.substr(1).split("/"),{consumed:r,posParams:r.reduce((n,a,s)=>0===s?{...n,panelPageId:new zn.UrlSegment(t.id,{})}:{...n},{})}):null;let g8=(()=>{class t{constructor(e,n,a,s){this.tokenizerService=e,this.panelResolverService=n,this.styleResolverService=a,this.paneDatasource=s,this.settings=[],this.panes=[],this.originMappings=[],this.resolvedContext={}}ngOnInit(){this.paneDatasource.pageChange$.pipe((0,sp.T)(1),(0,Ke.w)(e=>this.panelResolverService.resolvePanes({panes:this.originPanes.map(n=>new mi({...n,metadata:new Map([...n.metadata?n.metadata:[],["page",e],["limit",this.paneDatasource.pageSize]])})),contexts:this.contexts,resolvedContext:this.resolvedContext})),(0,Ke.w)(({resolvedPanes:e,originMappings:n})=>this.styleResolverService.alterResolvedPanes({panel:this.panel,resolvedPanes:e,originMappings:n}))).subscribe(({resolvedPanes:e,originMappings:n})=>{this.originMappings=n,this.paneDatasource.panes=e}),this.paneDatasource.panes=this.panes,this.trackByTpl="[._root.id]"}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(kd),o.\u0275\u0275directiveInject(mS),o.\u0275\u0275directiveInject(Lg))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-virtual-list-panel-renderer"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings",contexts:"contexts",resolvedContext:"resolvedContext",panel:"panel"},features:[o.\u0275\u0275ProvidersFeature([Lg])],decls:2,vars:2,consts:[[1,"panes-viewport",3,"itemSize"],["class","pane-item",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"pane-item"],[3,"pluginName","settings","contexts","resolvedContext"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",0),o.\u0275\u0275template(1,_G,2,4,"div",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("itemSize",75),o.\u0275\u0275advance(1),o.\u0275\u0275property("cdkVirtualForOf",n.paneDatasource))},directives:[Dd.N7,cp,Dd.xd,Dd.x0],styles:["[_nghost-%COMP%]{position:relative}.panes-viewport[_ngcontent-%COMP%]{height:100%;width:100%}"]}),t})(),v8=(()=>{class t{constructor(e){this.router=e}ngOnInit(){}onClick(){this.router.navigateByUrl(this.href)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(zn.Router))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-page-router-link"]],inputs:{href:"href",text:"text"},decls:2,vars:1,consts:[[3,"click"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"a",0),o.\u0275\u0275listener("click",function(){return n.onClick()}),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(n.text))},styles:["[_nghost-%COMP%]:hover{cursor:pointer}"]}),t})();const d1=new o.InjectionToken("PagesSettings");class y8{constructor(r){this.disableRouting=!1,r&&(this.disableRouting=r.disableRouting)}}let _8=(()=>{class t{constructor(e,n,a,s){this.siteName=e,this.pagesSettings=n,this.router=a,this.routesLoaded=!1,this.panelPageListItemsService=s.getEntityCollectionService("PanelPageListItem")}canActivate(e,n){return new Promise(this.pagesSettings.disableRouting?a=>a(!0):a=>{let s=n.url;-1!==s.indexOf("?")&&(s=n.url.substr(0,s.indexOf("?")));const l="path="+s.substr(1).split("/").reduce((c,f,h)=>[...c,0===h?`/${f}`:`${c[h-1]}/${f}`],[]).map(c=>this.encodePathComponent(c)).join("&path=")+`&site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`;setTimeout(()=>{}),(0,cn.D)([Gn(()=>!this.routesLoaded,this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}&path={"wildcard":{"path.keyword":{"value":"*"}}}`).pipe((0,ee.b)(()=>console.log("loaded page list items")),(0,ye.U)(c=>c.filter(f=>void 0!==f.path&&""!==f.path)),(0,ye.U)(c=>c.map(f=>new di(f)).sort((f,h)=>f.path.split("/").length===h.path.split("/").length?f.path.split("/")[f.path.split("/").length-1]>h.path.split("/")[h.path.split("/").length-1]?-1:1:f.path.split("/").length>h.path.split("/").length?-1:1)),(0,ee.b)(c=>c.sort((f,h)=>f.path.length>h.path.length?1:-1)),(0,ee.b)(c=>{const f=this.router.config;c.forEach(h=>{f.unshift({matcher:u0(h),component:rv}),f.unshift({matcher:c0(h),component:iv,data:{panelPageListItem:h}}),console.log(`panels matcher: ${h.path}`)}),this.routesLoaded=!0}),(0,ye.U)(()=>[])),(0,Re.of)([])),this.panelPageListItemsService.getWithQuery(l).pipe((0,Qi.K)(c=>(0,Re.of)([])),(0,ee.b)(()=>console.log("loaded specific matched")),(0,ye.U)(c=>c.reduce((f,h)=>void 0===f||f.path.split("/").length<h.path.split("/").length?h:f,void 0)),(0,ye.U)(c=>{const f=n.url.substr(1).split("/").slice(c.path.split("/").length-1).join("/");return[c,f]}))]).pipe((0,ye.U)(([c,[f,h]])=>[f,h])).subscribe(([c,f])=>{const h=`${c.path}${""===f?"":`/${f}`}?${Fo.stringify(e.queryParams)}`,g=this.router.parseUrl(h);console.log(`panels garud navigate: ${c.path}${""===f?"":`/${f}`}?${Fo.stringify(e.queryParams)}`),a(g)})})}encodePathComponent(e){return`{"term":{"path.keyword":{"value":"${e}"}}}`}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(mn.SITE_NAME),o.\u0275\u0275inject(d1),o.\u0275\u0275inject(zn.Router),o.\u0275\u0275inject(li))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),f1=(()=>{class t{constructor(e){this.pageBuilderFacade=e}resolve(e,n){return this.pageBuilderFacade.getPageInfo$}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Do))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),h1=(()=>{class t{constructor(e,n,a,s){this.pageBuilderFacade=e,this.store=n,this.urlGeneratorService=a,this.routerStore=s}resolve(e,n){const a=new Ua(n);return(a.params&&Array.isArray(a.params)&&a.params.length>0?this.changePipeline(a.params):(0,Re.of)([])).pipe((0,Ke.w)(()=>a.params&&Array.isArray(a.params)&&a.params.length>0?this.rebuildParams(a.params):(0,Re.of)([])),(0,ye.U)(s=>[s,new Map([["tag",ai()]])]),(0,Ke.w)(([s,l])=>this.urlGeneratorService.getUrl(a.url,s,l).pipe((0,ye.U)(c=>[c,l]))),(0,Ke.w)(([s,l])=>(this.pageBuilderFacade.loadRestData(`${l.get("tag")}`,new Ua({...a,url:s})),this.store.pipe((0,Et.Ys)(Ng(`${l.get("tag")}`)),(0,$.h)(c=>void 0!==c),(0,ye.U)(c=>c.results),(0,hn.q)(1)))))}changePipeline(e){const n=e.reduce((a,s)=>{switch(s.mapping.type){case"route":return[...a,this.routeArgChange(s.mapping.value)];case"querystring":return[...a,this.queryStringChange(s.mapping.value)];case"form":return[...a,this.formChange(s.mapping.value)];default:return[...a]}},[]);return(0,R.T)(...n)}routeArgChange(e){return this.pageBuilderFacade.getPageInfo$.pipe((0,ye.U)(()=>{}))}queryStringChange(e){return new M.x}formChange(e){const[n,a]=e.split(".",2);return this.pageBuilderFacade.getForm$(n).pipe((0,ee.b)(()=>console.log("form change")),(0,ye.U)(()=>{}))}rebuildParams(e){return this.pageBuilderFacade.getPageInfo$.pipe((0,ye.U)(n=>n?e:this.testParams(e)))}testParams(e){const n=[],a=e.length;for(let s=0;s<a;s++)n.push(new lr("route"===e[s].mapping.type?{...e[s],mapping:{type:"static",value:e[s].mapping.testValue,context:void 0,testValue:void 0}}:e[s]));return n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Do),o.\u0275\u0275inject(Et.yh),o.\u0275\u0275inject(Kl),o.\u0275\u0275inject(Et.yh))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),p1=(()=>{class t{constructor(e){this.pageBuilderFacade=e}resolve(e,n){return this.pageBuilderFacade.getForm$(n)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Do))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),x8=(()=>{class t extends B4{constructor(e,n){super(),this.tokenizerService=e,this.paneDatasource=n,this.trackByMapping=(a,s)=>this.tokenizerService.replaceTokens(this.trackByTpl,this.tokenizerService.generateGenericTokens(s.contexts[0].data))}get displayedColumns(){const e=this.panes.findIndex(n=>n.contexts.findIndex(a=>"_root"===a.name)>-1);return e>-1?Object.keys(this.panes[e].contexts.find(n=>"_root"===n.name).data):[]}ngOnInit(){console.log(this.panes),this.paneDatasource.panes=this.panes}rowData(e,n){return console.log(`name: ${e}`),`${n.contexts.find(a=>"_root"===a.name).data[e]}`}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(Lg))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["lib-table-panel-renderer"]],features:[o.\u0275\u0275ProvidersFeature([Lg]),o.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"table",0),o.\u0275\u0275template(1,CG,3,1,"ng-container",1),o.\u0275\u0275template(2,wG,1,0,"tr",2),o.\u0275\u0275template(3,SG,1,0,"tr",3),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("dataSource",n.paneDatasource),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.displayedColumns),o.\u0275\u0275advance(1),o.\u0275\u0275property("matHeaderRowDef",n.displayedColumns),o.\u0275\u0275advance(1),o.\u0275\u0275property("matRowDefColumns",n.displayedColumns))},directives:[Ts.BZ,n1.nU,Ts.XQ,Ts.Gk,n1.YE,x.NgForOf,Ts.w1,Ts.fO,Ts.ge,Ts.Dz,Ts.ev,Ts.as,Ts.nj],styles:[""]}),t})(),b8=(()=>{class t{constructor(e){this.attributeSerializer=e}handleFile(e){return(0,Re.of)()}handlesType(e){return!1}implementsRendererOverride(){return!1}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return!1}isData(e){return!1}buildDynamicItems(e,n){return(0,Re.of)([])}fetchDynamicData(e,n){return(0,Re.of)(new qn)}getBindings(e,n){return(0,Re.of)([])}toObject(e){return(0,Re.of)(this.attributeSerializer.deserializeAsObject(e))}buildSettings(e){return this.attributeSerializer.serialize(e,"root").attributes}fromPanes(e){return e.map(n=>new mi(this.attributeSerializer.deserialize(n)))}wrapPanel(e){return new uo({stylePlugin:void 0,settings:[],panes:e,columnSetting:new Qn})}stateDefinition(e){return(0,Re.of)({})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),d0=(()=>{class t{constructor(e,n,a,s){this.panelHandler=e,this.attributeSerializer=n,this.panelsLoaderService=a,this.panelsSelectorService=s}alterResolvedPanes({settings:e,resolvedPanes:n,originMappings:a}){const s=this.attributeSerializer.deserialize(new Ct.AttributeValue({name:"",displayName:"",computedValue:"",type:Ct.AttributeTypes.Complex,value:"",intValue:0,attributes:e})),l=s&&void 0!==s.labels&&Array.isArray(s.labels)?s.labels.map(f=>new Mg(f.mapping)):[];let c=[];return 0===l.length?(0,Re.of)({resolvedPanes:n,originMappings:a}):(c=n.length!==l.length?n.map((f,h)=>new Mg({...h<l.length?l[h]:l[l.length-1],pane:h})).map(f=>this.flattenSelector(f)):l.map(f=>this.flattenSelector(f)),(0,cn.D)(n.map((f,h)=>this.panelsLoaderService.reducePanes([],f,0)[0])).pipe((0,ye.U)(f=>f.reduce((h,[g,I])=>[...h,I],[])),(0,ye.U)(f=>{const h=c.map(Ie=>this.selectWithTarget(Ie)),g=c.map(Ie=>this.selectWithoutTarget(Ie)),I=h.map((Ie,he)=>this.panelsSelectorService.rebuildPage(f[c[he][0]],Ie.slice(1))),B=g.map((Ie,he)=>this.panelsSelectorService.rebuildPage(f[c[he][0]],Ie.slice(1))),V=[],ce=n.length;for(let Ie=0;Ie<ce;Ie++)V.push(new mi({...n[Ie],settings:this.panelHandler.buildSettings(I[Ie])})),V.push(new mi({...n[Ie],settings:this.panelHandler.buildSettings(B[Ie])}));return{resolvedPanes:V,originMappings:a}})))}stateDefinition(e){return(0,Re.of)({})}flattenSelector(e){const n=[];return null!=e.panel&&n.push(e.panel),null!=e.pane&&n.push(e.pane),null!=e.nested&&"object"==typeof e.nested&&this.flattenSelector(e.nested).forEach(a=>n.push(a)),n}selectWithTarget(e){return e.map(n=>n+1)}selectWithoutTarget(e){return e.map((n,a)=>a===e.length-1?-1*(n+1):0)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(b8),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(hS),o.\u0275\u0275inject(j4))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),m1=(()=>{class t{constructor(e,n,a,s){this.entityServices=e,this.pageBuilderFacade=n,this.panelStateConverterService=a,this.attributeSerializer=s,this.resolverCache$=new Map}get emptyPaneState(){return new ea({state:this.attributeSerializer.serialize({displayAssociatedPane:""},"root")})}get entities$(){return this.entityServices.getEntityCollectionService("PanelPageState").entities$.pipe((0,ee.b)(e=>{console.log("entities in store"),console.log(e)}))}get panelPage$(){return(0,Ln.a)([this.pageBuilderFacade.getPageInfo$,this.entityServices.getEntityCollectionService("PanelPage").entities$]).pipe((0,ye.U)(([e,n])=>e&&void 0!==e.id&&""!==e.id&&null!==e.id&&-1!==n.findIndex(a=>a.id===e.id)?n.find(a=>a.id===e.id):void 0))}get fakePageInfo(){return new Xh({id:"948d6e7b-12ab-11ec-8ecd-661fdd19e6df",path:"",realPath:"",args:new Map})}resolve(e,n){const a=n&&n.selectionMethod&&0!==n.selectionMethod.length&&n.id&&null!==n.id&&""!==n.id?`ps[id=${n.id}]${n.selectionMethod.map(s=>`${s}`).join("")}`:void 0;if(a&&this.resolverCache$.has(a))return this.resolverCache$.get(a);{const s=this.resolve$(e,n);return a&&this.resolverCache$.set(a,s),s}}resolve$(e,n){return(0,Ln.a)([this.panelPage$,this.entities$]).pipe((0,ye.U)(([a,s])=>[a,a&&-1!==s.findIndex(l=>l.id===a.id)?s.find(l=>l.id===a.id):new pa]),(0,Ke.w)(([a,s])=>this.pageBuilderFacade.getSelectionPath$.pipe((0,ye.U)(l=>n&&n.selectionPath?n.selectionPath:l),(0,ee.b)(l=>l.join(",")),(0,ye.U)(l=>l.map((c,f)=>`${(f+1)%2==0?"panes":(0===f?"":"nestedPage.")+"panels"}[${c}]`)),(0,ye.U)(l=>0===l.length?void 0:"$."+l.join(".")),(0,ye.U)(l=>[a,s,l]))),(0,ee.b)(([a,s,l])=>{console.log("page state context resolver"),console.log(a),console.log("query: "+l)}),(0,Ke.w)(([a,s,l])=>Gn(()=>!!a&&!s,this.panelStateConverterService.convertPageToState(a).pipe((0,ye.U)(c=>new pa({...c,panels:c.panels.map(f=>new Zl({...f,panes:f.panes.map(h=>new ea({...h,state:this.attributeSerializer.serialize({displayAssociatedPane:"y"},"root")}))}))})),(0,ye.U)(c=>[c,l])),(0,Re.of)([s,l]))),(0,ee.b)(([a,s])=>{console.log("rebuilt state from realtime page"),console.log(a)}),(0,ye.U)(([a,s])=>s?(0,Ro.JSONPath)({path:s,json:a}):this.emptyPaneState),(0,ye.U)(a=>a&&Array.isArray(a)&&0!==a.length?a[0]:this.emptyPaneState),(0,ee.b)(a=>{console.log("json path match"),console.log(a)}),(0,ye.U)(a=>this.attributeSerializer.deserializeAsObject(a.state)),(0,ee.b)(a=>{console.log("final state"),console.log(a)}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(li),o.\u0275\u0275inject(Do),o.\u0275\u0275inject(z4),o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();const C8=[{path:"pages",children:[{path:"create-panel-page",component:OG},{path:"panelpage/:panelPageId/manage",component:rv}]}];let w8=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g,I,B,V,ce,Ie,he,Se,Oe,Be,et,at,ft,Pt,Rt,on,an,Vt,At,$t,_n){var r;c.registerMetadataMap(EG),[o8(Ie),a8(he),s8(Se),l8(Oe),c8(Be)].forEach(fn=>{s.register(fn)}),e.forEach(fn=>a.register(fn)),n.forEach(fn=>l.register(fn)),f.register(((t,r,e)=>new Zs({id:"form",title:"Form",usedContexts:({param:n})=>(0,Re.of)([`form__${n.mapping.value.substr(0,n.mapping.value.indexOf("."))}`]),evalParam:({param:n})=>{const s=n.mapping.value.substr(0,n.mapping.value.indexOf(".")),l=n.mapping.value.substr(n.mapping.value.indexOf(".")+1);return console.log(`form: ${s} || ${l}`),e.getForm$(s).pipe((0,hn.q)(1),(0,ye.U)(c=>c||new Es),(0,ye.U)(c=>r.serializeForm(c)),(0,ye.U)(c=>t.generateGenericTokens(c)),(0,ee.b)(c=>console.log(c)),(0,ye.U)(c=>c.has(`.${l}`)?t.replaceTokens(`[.${l}]`,c):""),(0,ee.b)(c=>{console.log("form value"),console.log(c)}))}}))(B,V,ce)),h.register((t=>new Pj({id:"form",title:"Form",resolve:()=>t.getFormNames$.pipe((0,Ke.w)(r=>0===r.length?(0,Re.of)([]):(0,Ln.a)(r.map(e=>t.getForm$(e).pipe((0,ye.U)(n=>[e,n]))))),(0,ye.U)(r=>r.reduce((e,[n,a])=>({...e,[`form__${n}`]:a}),{}))),resolveSingle:()=>t.getFormNames$.pipe((0,Ke.w)(r=>(0,R.T)(...r.map(e=>t.getForm$(e).pipe((0,ye.U)(n=>[`form__${e}`,n]))))))}))(ce)),et.register((t=>new Gh({id:"pages_form",title:"Pages Form",build:()=>{Xc.prototype.serializePageForm=r=>new Promise(e=>{e(t.serializeForm(r))})}}))(V)),et.getPlugin("pages_form").subscribe(fn=>fn.build()),Rt.register((r=V,new Kc({id:"panelpageform_serialize",title:"Panelpageform Serialize",create:({object:e})=>(0,Re.of)({success:!1,entity:r.serializeForm(new Es(e))}),read:({})=>(0,Re.of)({success:!1}),update:({})=>(0,Re.of)({success:!1}),delete:({})=>(0,Re.of)({success:!1})}))),At.register(((t,r,e)=>new bs({id:"form",title:"Form",editor:JG,fetch:({settings:n})=>(0,Re.of)(new qn).pipe((0,ye.U)(()=>new $_(t.deserializeAsObject(n))),(0,Ke.w)(a=>r.getForm$(a.name).pipe((0,ye.U)(s=>[a,s||new Es]),(0,Ei.d)([a,new Es]),(0,hn.q)(1))),(0,ye.U)(([a,s])=>[a,e.serializeForm(s)]),(0,ye.U)(([a,s])=>new qn({results:(0,Ro.JSONPath)({path:`$.${a.field}.*`,json:s})}))),getBindings:({settings:n})=>(0,Re.of)([]).pipe((0,ye.U)(()=>new $_(t.deserializeAsObject(n))),(0,ye.U)(s=>[new Gt.ContentBinding({id:`form__${s.name}`,type:"context"})]))}))($t,ce,V))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Gt.CONTENT_PLUGIN),o.\u0275\u0275inject(Og),o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(Ql),o.\u0275\u0275inject(Jc),o.\u0275\u0275inject(pr),o.\u0275\u0275inject(Xl),o.\u0275\u0275inject(Rw),o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(Ij),o.\u0275\u0275inject(Xn),o.\u0275\u0275inject(q_),o.\u0275\u0275inject(Do),o.\u0275\u0275inject(f1),o.\u0275\u0275inject(h1),o.\u0275\u0275inject(p1),o.\u0275\u0275inject(s0),o.\u0275\u0275inject(m1),o.\u0275\u0275inject(bd),o.\u0275\u0275inject(L.HttpClient),o.\u0275\u0275inject(Il),o.\u0275\u0275inject(jr),o.\u0275\u0275inject(il),o.\u0275\u0275inject(pr),o.\u0275\u0275inject(Hr),o.\u0275\u0275inject(tl),o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Td))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[_8,f1,h1,p1,s0,m1,{provide:mn.EMBEDDABLE_COMPONENT,useValue:v8,multi:!0},{provide:mn.EMBEDDABLE_COMPONENT,useValue:uw,multi:!0},{provide:mn.EMBEDDABLE_COMPONENT,useValue:iv,multi:!0},{provide:iu,useClass:iu},{provide:ru,useClass:ru},{provide:Ld,useClass:Ld},{provide:dp,useClass:dp},{provide:ov,useClass:ov},{provide:d0,useClass:d0},{provide:Gt.CONTENT_PLUGIN,useFactory:ZG,multi:!0,deps:[iu]},{provide:Gt.CONTENT_PLUGIN,useFactory:e8,multi:!0,deps:[ru]},{provide:Gt.CONTENT_PLUGIN,useFactory:t8,multi:!0,deps:[Ld]},{provide:Gt.CONTENT_PLUGIN,useFactory:n8,multi:!0,deps:[dp]},{provide:Gt.CONTENT_PLUGIN,useFactory:r8,multi:!0,deps:[ov]},{provide:Og,useValue:new Wh({id:"virtuallist",name:"virtuallist",title:"Virtual List",editorComponent:void 0,renderComponent:g8}),multi:!0},{provide:Og,useFactory:u8,multi:!0,deps:[d0]},{provide:Og,useValue:new Wh({id:"table",name:"table",title:"Table",editorComponent:void 0,renderComponent:x8}),multi:!0}],imports:[[x.CommonModule,d.u5,d.UX,sr.MaterialModule,wl,Cg,zn.RouterModule.forChild(C8),Au,m_.forChild(),jg,LS,mn.UtilsModule,Fh,wd,Ct.AttributesModule,qC,HS,lU,U_,WS,g_,Wl,kw,Yl,ev]]}),t})();class S8 extends Oj{}class E8{constructor(r,e,n){this.siteName=r,this.es=e,this.router=n,this.routesLoaded=!1}get panelPageListItemsService(){return this.es.getEntityCollectionService("PanelPageListItem")}isLoaded(){return this.routesLoaded}load(){return this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}&path=${encodeURIComponent('{"wildcard":{"path.keyword":{"value":"*"}}}')}`).pipe((0,ye.U)(r=>r.filter(e=>void 0!==e.path&&""!==e.path)),(0,ye.U)(r=>r.map(e=>new di(e)).sort((e,n)=>e.path.split("/").length===n.path.split("/").length?e.path.split("/")[e.path.split("/").length-1]>n.path.split("/")[n.path.split("/").length-1]?-1:1:e.path.split("/").length>n.path.split("/").length?-1:1)),(0,ee.b)(r=>r.sort((e,n)=>e.path.length>n.path.length?1:-1)),(0,ee.b)(r=>{r.forEach(e=>{this.router.config.unshift({matcher:c0(e),component:iv,data:{panelPageListItem:e}}),this.router.config.unshift({matcher:u0(e),component:rv,data:{panelPageListItem:e}})}),this.routesLoaded=!0}),(0,ee.b)(()=>console.log("panels routes loaded")),(0,ye.U)(()=>!0))}}class T8{constructor(r,e,n){this.siteName=r,this.es=e,this.router=n}get panelPageListItemsService(){return this.es.getEntityCollectionService("PanelPageListItem")}match(r){let e=r.url;-1!==e.indexOf("?")&&(e=r.url.substr(0,e.indexOf("?")));const n="path="+e.substr(1).split("/").reduce((a,s,l)=>[...a,0===l?`/${s}`:`${a[l-1]}/${s}`],[]).map(a=>this.encodePathComponent(a)).join("&path=")+`&site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`;return this.panelPageListItemsService.getWithQuery(n).pipe((0,Qi.K)(a=>(0,Re.of)([])),(0,ye.U)(a=>a.reduce((s,l)=>void 0===s||s.path.split("/").length<l.path.split("/").length?l:s,void 0)),(0,ye.U)(a=>!!a||r.url.indexOf("pages")>-1))}encodePathComponent(r){return`{"term":{"path.keyword":{"value":"${r}"}}}`}}class A8{constructor(r,e,n){this.siteName=r,this.es=e,this.router=n}get panelPageListItemsService(){return this.es.getEntityCollectionService("PanelPageListItem")}redirect(r,e){if(e.url.indexOf("pages")>-1)console.log(`redirect: ${e.url}`),this.router.navigateByUrl(e.url);else{let n=e.url;-1!==n.indexOf("?")&&(n=e.url.substr(0,n.indexOf("?")));const a="path="+n.substr(1).split("/").reduce((s,l,c)=>[...s,0===c?`/${l}`:`${s[c-1]}/${l}`],[]).map(s=>this.encodePathComponent(s)).join("&path=")+`&site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`;this.panelPageListItemsService.getWithQuery(a).pipe((0,ye.U)(s=>s.reduce((l,c)=>void 0===l||l.path.split("/").length<c.path.split("/").length?c:l,void 0)),(0,ye.U)(s=>{const l=e.url.substr(1).split("/").slice(s.path.split("/").length-1).join("/");return[s,l]})).subscribe(([s,l])=>{this.router.navigate(["reload"])})}}encodePathComponent(r){return`{"term":{"path.keyword":{"value":"${r}"}}}`}}let I8=(()=>{class t{constructor(e,n,a,s){e.register(((t,r,e)=>{const n=new E8(t,r,e),a=new T8(t,r,e),s=new A8(t,r,e);return new S8({id:"panels",title:"Panels",loadingStrategy:n,matchingStrategy:a,redirectHandler:s})})(a,s,n))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Dw),o.\u0275\u0275inject(zn.Router),o.\u0275\u0275inject(mn.SITE_NAME),o.\u0275\u0275inject(li))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule]]}),t})();function h0(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(e[n[a]]=t[n[a]])}return e}var fp=S(4437);const F8=["content"];function R8(t,r){if(1&t&&o.\u0275\u0275element(0,"formly-field",2),2&t){const e=r.$implicit;o.\u0275\u0275property("form",e.form)("options",e.options)("model",e.model)("field",e)}}const y1=["*"],D8=["container"];function O8(t,r){}const M8=["fieldComponent"];function L8(t,r){1&t&&o.\u0275\u0275element(0,"formly-field",1),2&t&&o.\u0275\u0275property("field",r.$implicit)}function B8(t,r,e){if(r.id)return r.id;let n=r.type;return!n&&r.template&&(n="template"),gp(n)&&(n=n.prototype.constructor.name),[t,n,r.key,e].join("_")}function tc(t){if(!t.key)return[];if(!t._keyPath||t._keyPath.key!==t.key){let r=[];if("string"==typeof t.key){const e=-1===t.key.indexOf("[")?t.key:t.key.replace(/\[(\w+)\]/g,".$1");r=-1!==e.indexOf(".")?e.split("."):[e]}else r=Array.isArray(t.key)?t.key.slice(0):[`${t.key}`];t._keyPath={key:t.key,path:r}}return t._keyPath.path.slice(0)}const _1=["required","pattern","minLength","maxLength","min","max"];function hp(t,r){let e=tc(t);if(0===e.length)return;let n=t;for(;n.parent;)n=n.parent,e=[...tc(n),...e];if(void 0===r&&t.resetOnHide){const a=e.pop();delete e.reduce((l,c)=>l[c]||{},n.model)[a]}else!function j8(t,r,e){for(let n=0;n<r.length-1;n++){const a=r[n];(!t[a]||!ic(t[a]))&&(t[a]=/^\d+$/.test(r[n+1])?[]:{}),t=t[a]}t[r[r.length-1]]=po(e)}(n.model,e,r)}function pp(t){let r=t.parent.model;for(const e of tc(t)){if(!r)return r;r=r[e]}return r}function Nd(t,...r){return r.forEach(e=>{for(let n in e)nc(t[n])||z8(t[n])?t[n]=po(e[n]):U8(t[n],e[n])&&Nd(t[n],e[n])}),t}function nc(t){return null==t}function mp(t){return void 0===t}function z8(t){return""===t}function gp(t){return"function"==typeof t}function U8(t,r){return ic(t)&&ic(r)&&Object.getPrototypeOf(t)===Object.getPrototypeOf(r)&&!(Array.isArray(t)||Array.isArray(r))}function ic(t){return null!=t&&"object"==typeof t}function po(t){if(!ic(t)||(0,fp.b)(t)||t instanceof o.TemplateRef||t.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(t.constructor.name))return t;if(t instanceof Set)return new Set(t);if(t instanceof Map)return new Map(t);if(t._isAMomentObject&&gp(t.clone))return t.clone();if(t instanceof d.TO)return null;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t))return t.slice(0).map(n=>po(n));const r=Object.getPrototypeOf(t);let e=Object.create(r);return e=Object.setPrototypeOf(e,r),Object.keys(t).reduce((n,a)=>{const s=Object.getOwnPropertyDescriptor(t,a);return s.get?Object.defineProperty(n,a,s):n[a]=po(t[a]),n},e)}function cr(t,r,e){Object.defineProperty(t,r,{enumerable:!1,writable:!0,configurable:!0}),t[r]=e}function Va(t,r,e){t._observers||cr(t,"_observers",{}),t._observers[r]||(t._observers[r]=[]);let n=t._observers[r];return-1===n.indexOf(e)&&(n.push(e),e({currentValue:t[r],firstChange:!0}),1===n.length&&(cr(t,`___$${r}`,t[r]),Object.defineProperty(t,r,{configurable:!0,get:()=>t[`___$${r}`],set:a=>{if(a!==t[`___$${r}`]){const s=t[`___$${r}`];t[`___$${r}`]=a,n.forEach(l=>l({previousValue:s,currentValue:a,firstChange:!1}))}}}))),()=>n.splice(n.indexOf(e),1)}const Bd=new o.InjectionToken("FORMLY_CONFIG");class yr{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.templateManipulators={preWrapper:[],postWrapper:[]},this.extras={checkExpressionOn:"changeDetectionCheck",lazyRender:!1,showError:function(r){return r.formControl&&r.formControl.invalid&&(r.formControl.touched||r.options.parentForm&&r.options.parentForm.submitted||!(!r.field.validation||!r.field.validation.show))}},this.extensions={}}addConfig(r){r.types&&r.types.forEach(e=>this.setType(e)),r.validators&&r.validators.forEach(e=>this.setValidator(e)),r.wrappers&&r.wrappers.forEach(e=>this.setWrapper(e)),r.manipulators&&(console.warn("NgxFormly: passing 'manipulators' config is deprecated, use custom extension instead."),r.manipulators.forEach(e=>this.setManipulator(e))),r.validationMessages&&r.validationMessages.forEach(e=>this.addValidatorMessage(e.name,e.message)),r.extensions&&r.extensions.forEach(e=>this.extensions[e.name]=e.extension),r.extras&&(this.extras=Object.assign({},this.extras,r.extras))}setType(r){Array.isArray(r)?r.forEach(e=>this.setType(e)):(this.types[r.name]||(this.types[r.name]={name:r.name}),["component","extends","defaultOptions","wrappers"].forEach(e=>{r.hasOwnProperty(e)&&(this.types[r.name][e]=r[e])}))}getType(r){if(!this.types[r])throw new Error(`[Formly Error] The type "${r}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.mergeExtendedType(r),this.types[r]}getMergedField(r={}){const e=this.getType(r.type);e.defaultOptions&&Nd(r,e.defaultOptions);const n=e.extends&&this.getType(e.extends).defaultOptions;n&&Nd(r,n),r&&r.optionsTypes&&r.optionsTypes.forEach(s=>{const l=this.getType(s).defaultOptions;l&&Nd(r,l)});const a=this.resolveFieldTypeRef(r);a&&a.instance&&a.instance.defaultOptions&&Nd(r,a.instance.defaultOptions),!r.wrappers&&e.wrappers&&(r.wrappers=[...e.wrappers])}resolveFieldTypeRef(r={}){if(!r.type)return null;const e=this.getType(r.type);if(!e.component||e._componentRef)return e._componentRef;const{_resolver:n,_injector:a}=r.parent.options,s=n.resolveComponentFactory(e.component).create(a);return cr(e,"_componentRef",s),s.destroy(),e._componentRef}setWrapper(r){this.wrappers[r.name]=r,r.types&&r.types.forEach(e=>{this.setTypeWrapper(e,r.name)})}getWrapper(r){if(!this.wrappers[r])throw new Error(`[Formly Error] The wrapper "${r}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[r]}setTypeWrapper(r,e){this.types[r]||(this.types[r]={}),this.types[r].wrappers||(this.types[r].wrappers=[]),-1===this.types[r].wrappers.indexOf(e)&&this.types[r].wrappers.push(e)}setValidator(r){this.validators[r.name]=r}getValidator(r){if(!this.validators[r])throw new Error(`[Formly Error] The validator "${r}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[r]}addValidatorMessage(r,e){this.messages[r]=e}getValidatorMessage(r){return this.messages[r]}setManipulator(r){(new r.class)[r.method](this)}mergeExtendedType(r){if(!this.types[r].extends)return;const e=this.getType(this.types[r].extends);this.types[r].component||(this.types[r].component=e.component),this.types[r].wrappers||(this.types[r].wrappers=e.wrappers)}}yr.\u0275fac=function(r){return new(r||yr)},yr.\u0275prov=o.\u0275\u0275defineInjectable({token:yr,factory:yr.\u0275fac,providedIn:"root"}),yr.ngInjectableDef=(0,o.defineInjectable)({factory:function(){return new yr},token:yr,providedIn:"root"});class ta{constructor(r,e,n){this.formlyConfig=r,this.componentFactoryResolver=e,this.injector=n}buildForm(r,e=[],n,a){if(!this.formlyConfig.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");const s={fieldGroup:e,model:n,formControl:r,options:this._setOptions(a)};(function N8(t,r){const e=t._updateTreeValidity.bind(t);t._updateTreeValidity=()=>{},r(),t._updateTreeValidity=e})(r,()=>this._buildForm(s)),s.options._checkField(s,!0)}_buildForm(r){this.getExtensions().forEach(e=>e.prePopulate&&e.prePopulate(r)),this.getExtensions().forEach(e=>e.onPopulate&&e.onPopulate(r)),r.fieldGroup&&r.fieldGroup.forEach(e=>this._buildForm(e)),this.getExtensions().forEach(e=>e.postPopulate&&e.postPopulate(r))}getExtensions(){return Object.keys(this.formlyConfig.extensions).map(r=>this.formlyConfig.extensions[r])}_setOptions(r){return(r=r||{}).formState=r.formState||{},r.showError||(r.showError=this.formlyConfig.extras.showError),r.fieldChanges||cr(r,"fieldChanges",new M.x),r._resolver||cr(r,"_resolver",this.componentFactoryResolver),r._injector||cr(r,"_injector",this.injector),r._hiddenFieldsForCheck||(r._hiddenFieldsForCheck=[]),r._markForCheck||(r._markForCheck=e=>{e._componentRefs&&e._componentRefs.forEach(n=>{n.injector.get(o.ChangeDetectorRef).markForCheck()}),e.fieldGroup&&e.fieldGroup.forEach(n=>r._markForCheck(n))}),r._buildField||(r._buildField=e=>(this.buildForm(e.form,e.fieldGroup,e.model,e.options),e)),r}}function p0(t,r=!1){const e=t.formControl,n=e._fields?e._fields.indexOf(t):-1;-1!==n&&e._fields.splice(n,1);const a=e.parent;if(!a)return;const s={emitEvent:r};if(a instanceof d.Oe){const l=a.controls.findIndex(c=>c===e);-1!==l&&sv(a,s,()=>a.removeAt(l))}else if(a instanceof d.cw){const l=tc(t),c=l[l.length-1];a.get([c])===e&&sv(a,s,()=>a.removeControl(c))}e.setParent(null)}function x1(t){if(t.formControl)return t.formControl;if(!1===t.shareFormControl)return null;const r=t.parent.formControl;return r?r.get(tc(t)):null}function m0(t,r,e=!1){(r=r||t.formControl)._fields||cr(r,"_fields",[]),-1===r._fields.indexOf(t)&&r._fields.push(t),!t.formControl&&r&&(cr(t,"formControl",r),r.setValidators(null),r.setAsyncValidators(null),t.templateOptions.disabled=!!t.templateOptions.disabled,Va(t.templateOptions,"disabled",({firstChange:c,currentValue:f})=>{c||(f?t.formControl.disable():t.formControl.enable())}),r.registerOnDisabledChange&&r.registerOnDisabledChange(c=>{t.templateOptions.___$disabled=c,t.options&&t.options._markForCheck(t)}));let n=t.parent.formControl;if(!n||!t.key)return;const a=tc(t),s=pp(t);(!nc(r.value)||!nc(s))&&r.value!==s&&r instanceof d.NI&&r.patchValue(s);for(let c=0;c<a.length-1;c++){const f=a[c];n.get([f])||sv(n,{emitEvent:e},()=>n.setControl(f,new d.cw({}))),n=n.get([f])}const l=a[a.length-1];!t._hide&&n.get([l])!==r&&sv(n,{emitEvent:e},()=>n.setControl(l,r))}function g0(t,r=!1){const e=t.status,n=t.value;t.updateValueAndValidity({emitEvent:!1,onlySelf:r}),e!==t.status&&t.statusChanges.emit(t.status),n!==t.value&&t.valueChanges.emit(t.value)}function sv(t,r,e){t instanceof d.cw&&!t.__patchForEachChild&&(cr(t,"__patchForEachChild",!0),t._forEachChild=a=>{Object.keys(t.controls).forEach(s=>t.controls[s]&&a(t.controls[s],s))});const n=t.updateValueAndValidity.bind(t);!1===r.emitEvent&&(t.updateValueAndValidity=a=>{n(Object.assign({},a||{},{emitEvent:!1}))}),e(),!1===r.emitEvent&&(t.updateValueAndValidity=n)}function b1(t){t._fields&&delete t._fields,t.setValidators(null),t.setAsyncValidators(null),(t instanceof d.cw||t instanceof d.Oe)&&Object.keys(t.controls).forEach(r=>b1(t.controls[r]))}ta.\u0275fac=function(r){return new(r||ta)(o.\u0275\u0275inject(yr),o.\u0275\u0275inject(o.ComponentFactoryResolver),o.\u0275\u0275inject(o.Injector))},ta.\u0275prov=o.\u0275\u0275defineInjectable({token:ta,factory:ta.\u0275fac,providedIn:"root"}),ta.ngInjectableDef=(0,o.defineInjectable)({factory:function(){return new ta((0,o.inject)(yr),(0,o.inject)(o.ComponentFactoryResolver),(0,o.inject)(o.INJECTOR))},token:ta,providedIn:"root"});let C1=(()=>{class t{constructor(e,n,a,s,l){this.formlyBuilder=e,this.formlyConfig=n,this.ngZone=a,this.parentFormGroup=l,this.modelChange=new o.EventEmitter,this.immutable=!1,this._modelChangeValue={},this.modelChangeSubs=[],this.modelChange$=new M.x,this.modelChangeSub=this.modelChange$.pipe((0,Ke.w)(()=>this.ngZone.onStable.asObservable().pipe((0,hn.q)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=po(this.model))})),null!==s&&console.warn("NgxFormly: passing 'immutable' attribute to 'formly-form' component is deprecated since v5.5, enable immutable mode through NgModule declaration instead."),this.immutable=null!==s||!!n.extras.immutable}set model(e){this._model=this.immutable?po(e):e}get model(){return this._model||(this._model={}),this._model}set fields(e){this._fields=this.immutable?po(e):e}get fields(){return this._fields||[]}set options(e){this._options=this.immutable?po(e):e}get options(){return this._options}set content(e){if(e){let n=!1,a=e.nativeElement.nextSibling;for(;a&&!n;)(a.nodeType===Node.ELEMENT_NODE||a.nodeType===Node.TEXT_NODE&&a.textContent&&""!==a.textContent.trim())&&(n=!0),a=a.nextSibling;n&&console.warn("NgxFormly: content projection for 'formly-form' component is deprecated since v5.5, you should avoid passing content inside the 'formly-form' tag.")}}ngDoCheck(){"changeDetectionCheck"===this.formlyConfig.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(e){e.model&&this.field&&(this.field.model=this.model),e.fields&&this.form&&b1(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.form=this.form||new d.cw({}),this.setOptions(),this.options.updateInitialValue(),this.clearModelSubscriptions(),this.formlyBuilder.buildForm(this.form,this.fields,this.model,this.options),this.trackModelChanges(this.fields))}ngOnDestroy(){this.modelChangeSub.unsubscribe(),this.clearModelSubscriptions()}changeModel({value:n,field:a}){hp(a,n),this.modelChange$.next()}setOptions(){this.options||(this.options={}),this.options.resetModel||(this.options.resetModel=e=>{e=po(nc(e)?this.options._initialModel:e),this.model&&(Object.keys(this.model).forEach(n=>delete this.model[n]),Object.assign(this.model,e||{})),this.options._buildForm(),this.options.parentForm&&this.options.parentForm.control===this.form?this.options.parentForm.resetForm(this.model):this.form.reset(this.model)}),!this.options.parentForm&&this.parentFormGroup&&(cr(this.options,"parentForm",this.parentFormGroup),Va(this.options.parentForm,"submitted",({firstChange:e})=>{e||(this.checkExpressionChange(),this.options._markForCheck({fieldGroup:this.fields,model:this.model,formControl:this.form,options:this.options}))})),this.options.updateInitialValue||(this.options.updateInitialValue=()=>this.options._initialModel=po(this.model)),this.options._buildForm||(this.options._buildForm=(e=!1)=>{this.clearModelSubscriptions(),this.formlyBuilder.buildForm(this.form,this.fields,this.model,this.options),this.trackModelChanges(this.fields),e&&this.modelChange.emit(this._modelChangeValue=po(this.model))})}checkExpressionChange(){this.options&&this.options._checkField&&this.options._checkField({fieldGroup:this.fields,model:this.model,formControl:this.form,options:this.options})}trackModelChanges(e,n=[]){e.forEach(a=>{if(a.key&&!a.fieldGroup&&a.formControl){const s=a.formControl;let l=s.valueChanges.pipe((0,xs.x)((g,I)=>!(g!==I||Array.isArray(g)||ic(g))));const{updateOn:c,debounce:f}=a.modelOptions;(!c||"change"===c)&&f&&f.default>0&&(l=s.valueChanges.pipe((0,Hn.b)(f.default))),this.modelChangeSubs.push(l.subscribe(g=>{s instanceof d.NI&&s._fields&&s._fields.length>1&&s.patchValue(g,{emitEvent:!1,onlySelf:!0}),a.parsers&&a.parsers.length>0&&a.parsers.forEach(I=>g=I(g)),this.changeModel({key:[...n,...tc(a)].join("."),value:g,field:a})}));const h=s.valueChanges.observers;h&&h.length>1&&h.unshift(h.pop())}a.fieldGroup&&a.fieldGroup.length>0&&this.trackModelChanges(a.fieldGroup,a.key?[...n,...tc(a)]:n)})}clearModelSubscriptions(){this.modelChangeSubs.forEach(e=>e.unsubscribe()),this.modelChangeSubs=[]}get field(){return this.fields&&this.fields[0]&&this.fields[0].parent}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(ta),o.\u0275\u0275directiveInject(yr),o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275injectAttribute("immutable"),o.\u0275\u0275directiveInject(d.sg,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-form"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(F8,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.content=a.first)}},inputs:{model:"model",fields:"fields",options:"options",form:"form"},outputs:{modelChange:"modelChange"},features:[o.\u0275\u0275ProvidersFeature([ta]),o.\u0275\u0275NgOnChangesFeature],ngContentSelectors:y1,decls:4,vars:1,consts:[["hide-deprecation","",3,"form","options","model","field",4,"ngFor","ngForOf"],["content",""],["hide-deprecation","",3,"form","options","model","field"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,R8,1,4,"formly-field",0),o.\u0275\u0275elementContainerStart(1,null,1),o.\u0275\u0275projection(3),o.\u0275\u0275elementContainerEnd()),2&e&&o.\u0275\u0275property("ngForOf",n.fields)},directives:function(){return[x.NgForOf,v0]},encapsulation:2}),t})(),v0=(()=>{class t{constructor(e,n,a,s,l){this.formlyConfig=e,this.renderer=n,this.resolver=a,this.elementRef=s,this.warnDeprecation=!1,this.modelChange=new o.EventEmitter,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.warnDeprecation=null===l}set model(e){this.warnDeprecation&&console.warn(`NgxFormly: passing 'model' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}set form(e){this.warnDeprecation&&console.warn(`NgxFormly: passing 'form' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}set options(e){this.warnDeprecation&&console.warn(`NgxFormly: passing 'options' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterContentChecked(){this.triggerHook("afterContentChecked")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngAfterViewChecked(){this.triggerHook("afterViewChecked")}ngDoCheck(){this.triggerHook("doCheck"),this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(e=>e()),this.hooksObservers.forEach(e=>e()),this.triggerHook("onDestroy")}renderField(e,n,a=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),a=this.field?this.field.wrappers:[]),a&&a.length>0){const[s,...l]=a,{component:c}=this.formlyConfig.getWrapper(s),f=e.createComponent(this.resolver.resolveComponentFactory(c));this.attachComponentRef(f,n),Va(f.instance,"fieldComponent",({firstChange:h,previousValue:g,currentValue:I})=>{if(I){if(g&&g._lContainer===I._lContainer)return;const B=g?g.detach():null;B&&!B.destroyed?I.insert(B):this.renderField(I,n,l),!h&&f.changeDetectorRef.detectChanges()}})}else if(n&&n.type){const{component:s}=this.formlyConfig.getType(n.type),l=e.createComponent(this.resolver.resolveComponentFactory(s));this.attachComponentRef(l,n)}}triggerHook(e,n){if(this.field&&this.field.hooks&&this.field.hooks[e]&&(!n||n.field)){const a=this.field.hooks[e](this.field);if((0,fp.b)(a)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(e)){const s=a.subscribe();this.hooksObservers.push(()=>s.unsubscribe())}}this.field&&this.field.lifecycle&&this.field.lifecycle[e]&&this.field.lifecycle[e](this.field.form,this.field,this.field.model,this.field.options),"onChanges"===e&&n.field&&(this.resetRefs(n.field.previousValue),this.render())}attachComponentRef(e,n){this.componentRefs.push(e),n._componentRefs.push(e),Object.assign(e.instance,{field:n})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(e=>e()),this.hostObservers=[Va(this.field,"hide",({firstChange:e,currentValue:n})=>{this.formlyConfig.extras.lazyRender?n?(this.containerRef.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(this.containerRef,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)):(e&&this.renderField(this.containerRef,this.field),(!e||e&&n)&&this.renderer.setStyle(this.elementRef.nativeElement,"display",n?"none":""))}),Va(this.field,"className",({firstChange:e,currentValue:n})=>{(!e||e&&n)&&(!this.formlyConfig.extras.lazyRender||!0!==this.field.hide)&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",n)})]}}resetRefs(e){e&&(e._componentRefs?e._componentRefs=e._componentRefs.filter(n=>-1===this.componentRefs.indexOf(n)):cr(this.field,"_componentRefs",[])),this.componentRefs=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(yr),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275injectAttribute("hide-deprecation"))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(D8,7,o.ViewContainerRef),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.containerRef=a.first)}},inputs:{model:"model",form:"form",options:"options",field:"field"},outputs:{modelChange:"modelChange"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["container",""]],template:function(e,n){1&e&&o.\u0275\u0275template(0,O8,0,0,"ng-template",null,0,o.\u0275\u0275templateRefExtractor)},encapsulation:2}),t})(),Ga=(()=>{class t{constructor(e,n,a){this.renderer=e,this.elementRef=n,this.uiAttributesCache={},this.uiAttributes=null,this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(s,l)=>{switch(s){case"focus":return this.onFocus(l);case"blur":return this.onBlur(l);case"change":return this.onChange(l);default:return this.to[s](this.field,l)}}},this.document=a}get to(){return this.field.templateOptions||{}}get fieldAttrElements(){return this.field&&this.field._elementRefs||[]}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(n=>n()),this.uiEvents.events.forEach(n=>{(this.to&&this.to[n]||-1!==["focus","blur","change"].indexOf(n))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,n,a=>this.uiEvents.callback(n,a)))}),this.to&&this.to.attributes&&Va(this.to,"attributes",({currentValue:n,previousValue:a})=>{a&&Object.keys(a).forEach(s=>this.removeAttribute(s)),n&&Object.keys(n).forEach(s=>{null!=n[s]&&this.setAttribute(s,n[s])})}),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),Va(this.field,"focus",({currentValue:n})=>{this.toggleFocus(n)}))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const e=this.elementRef.nativeElement;this.uiAttributes=[..._1,"tabindex","placeholder","readonly","disabled","step"].filter(n=>!e.hasAttribute||!e.hasAttribute(n))}this.uiAttributes.forEach(e=>{const n=this.to[e];this.uiAttributesCache[e]!==n&&(!this.to.attributes||!this.to.attributes.hasOwnProperty(e.toLowerCase()))&&(this.uiAttributesCache[e]=n,n||0===n?this.setAttribute(e,!0===n?e:`${n}`):this.removeAttribute(e))})}ngOnDestroy(){this.uiEvents.listeners.forEach(e=>e()),this.detachElementRef(this.field)}toggleFocus(e){const n=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!n||!n.nativeElement.focus)return;const a=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:s})=>this.document.activeElement===s||s.contains(this.document.activeElement));e&&!a?n.nativeElement.focus():!e&&a&&n.nativeElement.blur()}onFocus(e){this.field.___$focus=!0,this.to.focus&&this.to.focus(this.field,e)}onBlur(e){this.field.___$focus=!1,this.to.blur&&this.to.blur(this.field,e)}onHostChange(e){e instanceof Event||this.onChange(e)}onChange(e){this.to.change&&this.to.change(this.field,e),this.field.formControl&&this.field.formControl.markAsDirty()}attachElementRef(e){!e||(e._elementRefs&&-1===e._elementRefs.indexOf(this.elementRef)?e._elementRefs.push(this.elementRef):cr(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){const n=e&&e._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==n&&this.field._elementRefs.splice(n,1)}setAttribute(e,n){this.renderer.setAttribute(this.elementRef.nativeElement,e,n)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(x.DOCUMENT))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","formlyAttributes",""]],hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("change",function(s){return n.onHostChange(s)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[o.\u0275\u0275NgOnChangesFeature]}),t})(),vp=(()=>{class t{get model(){return this.field.model}set model(e){console.warn(`NgxFormly: passing 'model' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get form(){return this.field.parent.formControl}set form(e){console.warn(`NgxFormly: passing 'form' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get options(){return this.field.options}set options(e){console.warn(`NgxFormly: passing 'options' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get key(){return this.field.key}get formControl(){return this.field.formControl}get to(){return this.field.templateOptions||{}}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options.formState||{}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,inputs:{model:"model",form:"form",options:"options",field:"field"}}),t})(),G8=(()=>{class t extends vp{constructor(e){super(),this.defaultOptions={defaultValue:[]},e instanceof ta&&console.warn(`NgxFormly: passing 'FormlyFormBuilder' to '${this.constructor.name}' type is not required anymore, you may remove it!`)}onPopulate(e){!e.formControl&&e.key&&m0(e,x1(e)||new d.Oe([],{updateOn:e.modelOptions.updateOn})),e.fieldGroup=e.fieldGroup||[];const n=e.model?e.model.length:0;if(e.fieldGroup.length>n)for(let a=e.fieldGroup.length-1;a>=n;--a)p0(e.fieldGroup[a]),e.fieldGroup.splice(a,1);for(let a=e.fieldGroup.length;a<n;a++){const s=Object.assign({},po(e.fieldArray),{key:`${a}`});e.fieldGroup.push(s)}}add(e,n,{markAsDirty:a}={markAsDirty:!0}){e=nc(e)?this.field.fieldGroup.length:e,this.model||hp(this.field,[]),this.model.splice(e,0,n?po(n):void 0),this.options._buildForm(!0),a&&this.formControl.markAsDirty()}remove(e,{markAsDirty:n}={markAsDirty:!0}){this.model.splice(e,1),p0(this.field.fieldGroup[e],!0),this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach((a,s)=>a.key=`${s}`),this.options._buildForm(!0),n&&this.formControl.markAsDirty()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Bd,8))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["fieldArray"]],features:[o.\u0275\u0275InheritDefinitionFeature]}),t})(),w1=(()=>{class t extends vp{}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275dir=o.\u0275\u0275defineDirective({type:t,viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(M8,5,o.ViewContainerRef),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.fieldComponent=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature]}),t})(),$8=(()=>{class t extends vp{constructor(){super(...arguments),this.defaultOptions={defaultValue:{}}}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-group"]],hostVars:2,hostBindings:function(e,n){2&e&&o.\u0275\u0275classMap(n.field.fieldGroupClassName||"")},features:[o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:y1,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,L8,1,1,"formly-field",0),o.\u0275\u0275projection(1)),2&e&&o.\u0275\u0275property("ngForOf",n.field.fieldGroup)},directives:[x.NgForOf,v0],encapsulation:2}),t})(),H8=(()=>{class t{constructor(e){this.formlyConfig=e}ngOnChanges(){this.errorMessage$=(0,R.T)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,$.h)(({field:e,type:n,property:a})=>e===this.field&&"expressionChanges"===n&&-1!==a.indexOf("validation"))):(0,Re.of)(null)).pipe((0,lp.O)(null),(0,Ke.w)(()=>(0,fp.b)(this.errorMessage)?this.errorMessage:(0,Re.of)(this.errorMessage)))}get errorMessage(){const e=this.field.formControl;for(let n in e.errors)if(e.errors.hasOwnProperty(n)){let a=this.formlyConfig.getValidatorMessage(n);if(ic(e.errors[n])){if(e.errors[n].errorPath)return;e.errors[n].message&&(a=e.errors[n].message)}return this.field.validation&&this.field.validation.messages&&this.field.validation.messages[n]&&(a=this.field.validation.messages[n]),this.field.validators&&this.field.validators[n]&&this.field.validators[n].message&&(a=this.field.validators[n].message),this.field.asyncValidators&&this.field.asyncValidators[n]&&this.field.asyncValidators[n].message&&(a=this.field.asyncValidators[n].message),"function"==typeof a?a(e.errors[n],this.field):a}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(yr))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,template:function(e,n){1&e&&(o.\u0275\u0275text(0),o.\u0275\u0275pipe(1,"async")),2&e&&o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(1,1,n.errorMessage$))},pipes:[x.AsyncPipe],encapsulation:2,changeDetection:0}),t})(),q8=(()=>{class t extends vp{constructor(e){super(),this.sanitizer=e,this.innerHtml={content:null,template:null}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.to.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(k.H7))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-template"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"div",0),2&e&&o.\u0275\u0275property("innerHtml",n.template,o.\u0275\u0275sanitizeHtml)},encapsulation:2}),t})();function S1(t,r,e){return t instanceof Function?t.apply(r,e):!!t}class W8{prePopulate(r){if(r.parent||r.options._checkField)return;let e=!1;r.options._checkField=(n,a)=>{e||(e=!0,this.checkField(n,a),e=!1)}}postPopulate(r){if(r.parent&&!r._expressionProperties){if(cr(r,"_expressionProperties",{}),r.expressionProperties)for(const e in r.expressionProperties){const n=r.expressionProperties[e];if("string"==typeof n||gp(n))r._expressionProperties[e]={expression:this._evalExpression(e,n,"templateOptions.disabled"===e&&r.parent.expressionProperties&&r.parent.expressionProperties.hasOwnProperty("templateOptions.disabled")?()=>r.parent.templateOptions.disabled:void 0)},"templateOptions.disabled"===e&&Object.defineProperty(r._expressionProperties[e],"expressionValue",{get:()=>r.templateOptions.disabled,set:()=>{},enumerable:!0,configurable:!0});else if(n instanceof y.y){const a=()=>n.subscribe(f=>{this.setExprValue(r,e,f),r.options&&r.options._markForCheck&&r.options._markForCheck(r)});let s=a();const l=r.hooks.onInit;r.hooks.onInit=()=>(null===s&&(s=a()),l&&l(r));const c=r.hooks.onDestroy;r.hooks.onDestroy=()=>{c&&c(r),s.unsubscribe(),s=null}}}r.hideExpression?(delete r.hide,r.hideExpression=this._evalExpression("hide",r.hideExpression,()=>{let e=r.parent;for(;e.parent&&!e.hide;)e=e.parent;return e.hide})):Va(r,"hide",({currentValue:e,firstChange:n})=>{r._hide=e,(!n||n&&!0===e)&&r.options._hiddenFieldsForCheck.push(r)})}}_evalExpression(r,e,n){return(...a)=>{try{return"string"==typeof e&&(e=function X8(t,r){try{return-1!==t.indexOf("this.field")&&console.warn("NgxFormly: using 'this.field' in expressionProperties is deprecated since v5.1, use 'field' instead."),Function(...r,`return ${t};`)}catch(e){console.error(e)}}(e,["model","formState","field"])),"function"!=typeof e&&(e=()=>!!e),n&&n()||e(...a)}catch(s){throw s.message=`[Formly Error] [Expression "${r}"] ${s.message}`,s}}}checkField(r,e=!1){const n=this._checkField(r,e);r.options._hiddenFieldsForCheck.sort(a=>a.hide?-1:1).forEach(a=>this.toggleFormControl(a,!!a.hide,!e)),r.options._hiddenFieldsForCheck=[],n&&(this.checkField(r),r.options&&r.options._markForCheck&&r.options._markForCheck(r))}_checkField(r,e=!1){let n=!1;return r.fieldGroup.forEach(a=>{!a.options||(this.checkFieldExpressionChange(a,e)&&(n=!0),this.checkFieldVisibilityChange(a,e)&&(r.options._hiddenFieldsForCheck.push(a),n=!0),a.fieldGroup&&a.fieldGroup.length>0&&this._checkField(a,e)&&(n=!0))}),n}checkFieldExpressionChange(r,e){if(!r||!r._expressionProperties)return!1;let n=!1;const a=r._expressionProperties;for(const s in a){let l=S1(a[s].expression,{field:r},[r.model,r.options.formState,r,e]);"templateOptions.disabled"===s&&(l=!!l),(e||a[s].expressionValue!==l&&(!ic(l)&&!gp(l)||gp(l)&&""+a[s].expressionValue!=""+l||(0,fp.b)(l)||JSON.stringify(l)!==JSON.stringify(a[s].expressionValue)))&&(n=!0,a[s].expressionValue=l,this.setExprValue(r,s,l))}return n}checkFieldVisibilityChange(r,e){if(!r||nc(r.hideExpression))return!1;const n=!!S1(r.hideExpression,{field:r},[r.model,r.options.formState,r,e]);let a=!1;return(n!==r.hide||e)&&(a=!0,r.hide=n,r.templateOptions.hidden=n),a}setDisabledState(r,e){r.fieldGroup&&r.fieldGroup.filter(n=>!n.expressionProperties||!n.expressionProperties.hasOwnProperty("templateOptions.disabled")).forEach(n=>this.setDisabledState(n,e)),r.key&&r.templateOptions.disabled!==e&&(r.templateOptions.disabled=e)}toggleFormControl(r,e,n){if(r.fieldGroup&&r.fieldGroup.filter(a=>!a.hideExpression).forEach(a=>this.toggleFormControl(a,e,n)),r.formControl&&r.key){cr(r,"_hide",!(!e&&!r.hide));const a=r.formControl;a._fields&&a._fields.length>1&&g0(a),!0!==e||a._fields&&!a._fields.every(s=>!!s._hide)?!1===e&&(r.resetOnHide&&r.parent&&!mp(r.defaultValue)&&mp(pp(r))&&hp(r,r.defaultValue),m0(r,void 0,!0),r.resetOnHide&&r.fieldArray&&(r.fieldGroup||[]).length!==(r.model||[]).length&&r.options._buildForm(!0)):(p0(r,!0),n&&r.resetOnHide&&(r.formControl.reset({value:void 0,disabled:r.formControl.disabled}),r.fieldGroup&&(hp(r,void 0),r.formControl instanceof d.Oe&&(r.fieldGroup.length=0))))}r.options.fieldChanges&&r.options.fieldChanges.next({field:r,type:"hidden",value:e})}setExprValue(r,e,n){try{let a=r;const s=-1===e.indexOf("[")?e.split("."):e.replace(/\'|\"/g,"").split(/[[\]]{1,2}/).filter(c=>c),l=s.length-1;for(let c=0;c<l;c++)a=a[s[c]];a[s[l]]=n}catch(a){throw a.message=`[Formly Error] [Expression "${e}"] ${a.message}`,a}if("templateOptions.disabled"===e&&r.key&&this.setDisabledState(r,n),0===e.indexOf("model.")){const a=e.replace(/^model\./,""),s=r.key&&e===a?r.formControl:r.parent.formControl.get(a);s&&(!nc(s.value)||!nc(n))&&s.value!==n&&s.patchValue(n)}this.emitExpressionChanges(r,e,n)}emitExpressionChanges(r,e,n){!r.options.fieldChanges||r.options.fieldChanges.next({field:r,type:"expressionChanges",property:e,value:n})}}class K8{constructor(r){this.formlyConfig=r}onPopulate(r){this.initFieldValidation(r,"validators"),this.initFieldValidation(r,"asyncValidators")}initFieldValidation(r,e){const n=[];if("validators"===e&&!(r.hasOwnProperty("fieldGroup")&&!r.key)&&n.push(this.getPredefinedFieldValidation(r)),r[e])for(const a in r[e])"validation"===a&&!Array.isArray(r[e].validation)&&(r[e].validation=[r[e].validation],console.warn(`NgxFormly(${r.key}): passing a non array value to the 'validation' is deprecated, pass an array instead`)),"validation"===a?n.push(...r[e].validation.map(s=>this.wrapNgValidatorFn(r,s))):n.push(this.wrapNgValidatorFn(r,r[e][a],a));cr(r,"_"+e,n)}getPredefinedFieldValidation(r){let e=[];return _1.forEach(n=>Va(r.templateOptions,n,({currentValue:a,firstChange:s})=>{e=e.filter(l=>l!==n),null!=a&&!1!==a&&e.push(n),!s&&r.formControl&&g0(r.formControl)})),n=>0===e.length?null:d.kI.compose(e.map(a=>()=>{const s=r.templateOptions[a];switch(a){case"required":return d.kI.required(n);case"pattern":return d.kI.pattern(s)(n);case"minLength":return d.kI.minLength(s)(n);case"maxLength":return d.kI.maxLength(s)(n);case"min":return d.kI.min(s)(n);case"max":return d.kI.max(s)(n)}}))(n)}wrapNgValidatorFn(r,e,n){let a=null;if("string"==typeof e&&(a=po(this.formlyConfig.getValidator(e))),"object"==typeof e&&e.name&&(a=po(this.formlyConfig.getValidator(e.name)),e.options&&(a.options=e.options)),"object"==typeof e&&e.expression){const{expression:s}=e,l=h0(e,["expression"]);a={name:n,validation:s,options:Object.keys(l).length>0?l:null}}return"function"==typeof e&&(a={name:n,validation:e}),s=>{const l=a.validation(s,r,a.options);return function V8(t){return!!t&&"function"==typeof t.then}(l)?l.then(c=>this.handleAsyncResult(r,n?!!c:c,a)):(0,fp.b)(l)?l.pipe((0,ye.U)(c=>this.handleAsyncResult(r,n?!!c:c,a))):this.handleResult(r,n?!!l:l,a)}}handleAsyncResult(r,e,n){return r.options&&r.options._markForCheck&&r.options._markForCheck(r),this.handleResult(r,e,n)}handleResult(r,e,{name:n,options:a}){"boolean"==typeof e&&(e=e?null:{[n]:a||!0});const s=r.formControl;return s._childrenErrors&&s._childrenErrors[n]&&s._childrenErrors[n](),ic(e)&&Object.keys(e).forEach(l=>{const c=e[l].errorPath?e[l].errorPath:(a||{}).errorPath,f=c?r.formControl.get(c):null;if(f){const g=h0(e[l],["errorPath"]);f.setErrors(Object.assign({},f.errors||{},{[l]:g})),!s._childrenErrors&&cr(s,"_childrenErrors",{}),s._childrenErrors[l]=()=>{const ce=h0(f.errors||{},["symbol"==typeof l?l:l+""]);f.setErrors(0===Object.keys(ce).length?null:ce)}}}),e}}class Y8{constructor(r){this.config=r}onPopulate(r){!r.parent||(r.fieldGroup&&!r.key?cr(r,"formControl",r.parent.formControl):this.addFormControl(r))}postPopulate(r){r.parent||this.setValidators(r)}addFormControl(r){let e=x1(r);if(!e){const n={updateOn:r.modelOptions.updateOn},a=r.key?pp(r):r.defaultValue,s=this.config?this.config.resolveFieldTypeRef(r):null;if(s&&s.componentType&&s.componentType.createControl){const l=s.componentType;console.warn(`NgxFormly: '${l.name}::createControl' is deprecated since v5.0, use 'prePopulate' hook instead.`),e=l.createControl(a,r)}else e=r.fieldGroup?new d.cw({},n):new d.NI(a,n)}m0(r,e)}setValidators(r,e=!1){let n=!1;if(!1===e&&r.key&&r.templateOptions&&r.templateOptions.disabled&&(e=!0),(r.fieldGroup||[]).forEach(a=>this.setValidators(a,e)&&(n=!0)),r.key||!r.parent||!r.key&&!r.fieldGroup){const{formControl:a}=r;r.templateOptions=r.templateOptions||{},r.key&&a&&a instanceof d.NI&&(e&&a.enabled&&(a.disable({emitEvent:!1,onlySelf:!0}),n=!0),!e&&a.disabled&&(a.enable({emitEvent:!1,onlySelf:!0}),n=!0)),a&&(null===a.validator||null===a.asyncValidator)&&(a.setValidators(()=>{const s=d.kI.compose(this.mergeValidators(r,"_validators"));return s?s(a):null}),a.setAsyncValidators(()=>{const s=d.kI.composeAsync(this.mergeValidators(r,"_asyncValidators"));return s?s(a):(0,Re.of)(null)}),n=!0),n&&g0(a,!0)}return n}mergeValidators(r,e){const n=[],a=r.formControl;return a&&a._fields&&a._fields.length>1?a._fields.filter(s=>!s._hide).forEach(s=>n.push(...s[e])):r[e]&&n.push(...r[e]),r.fieldGroup&&r.fieldGroup.filter(s=>!s.key&&s.fieldGroup).forEach(s=>n.push(...this.mergeValidators(s,e))),n}}class Q8{constructor(r){this.formlyConfig=r,this.formId=0}prePopulate(r){if(this.getFieldComponentInstance(r).prePopulate(),r.parent)return;const e=r.options&&r.options.fieldTransform||this.formlyConfig.extras.fieldTransform;(Array.isArray(e)?e:[e]).forEach(n=>{if(n&&(console.warn("NgxFormly: fieldTransform is deprecated since v5.0, use custom extension instead."),!n(r.fieldGroup,r.model,r.formControl,r.options)))throw new Error("fieldTransform must return an array of fields")})}onPopulate(r){this.initFieldOptions(r),this.getFieldComponentInstance(r).onPopulate(),r.fieldGroup&&r.fieldGroup.forEach((e,n)=>{Object.defineProperty(e,"parent",{get:()=>r,configurable:!0}),Object.defineProperty(e,"index",{get:()=>n,configurable:!0}),this.formId++})}postPopulate(r){this.getFieldComponentInstance(r).postPopulate()}initFieldOptions(r){const e=r.parent;if(e){if(Object.defineProperty(r,"form",{get:()=>e.formControl,configurable:!0}),Object.defineProperty(r,"options",{get:()=>e.options,configurable:!0}),Object.defineProperty(r,"model",{get:()=>r.key&&r.fieldGroup?pp(r):e.model,configurable:!0}),Nd(r,{id:B8(`formly_${this.formId}`,r,r.index),hooks:{},modelOptions:{},validation:{messages:{}},templateOptions:r.type&&r.key?{label:"",placeholder:"",focus:!1,disabled:!1}:{}}),this.formlyConfig.extras.resetFieldOnHide&&!1!==r.resetOnHide&&(r.resetOnHide=!0),r.lifecycle&&console.warn("NgxFormly: 'lifecycle' is deprecated since v5.0, use 'hooks' instead."),"formly-template"!==r.type&&(r.template||r.expressionProperties&&r.expressionProperties.template)&&(r.type&&console.warn("NgxFormly: passing 'type' property is not allowed when 'template' is set."),r.type="formly-template"),!r.type&&r.fieldGroup&&(r.type="formly-group"),r.type&&this.formlyConfig.getMergedField(r),r.parent){let n=!mp(r.key)&&!mp(r.defaultValue)&&mp(pp(r))&&(!r.resetOnHide||!(r.hide||r.hideExpression));if(n&&r.resetOnHide){let a=r.parent;for(;a&&!a.hideExpression&&!a.hide;)a=a.parent;n=!a||!(a.hideExpression||a.hide)}n&&hp(r,r.defaultValue)}this.initFieldWrappers(r)}}initFieldWrappers(r){r.wrappers=r.wrappers||[];const e=Object.assign({preWrapper:[],postWrapper:[]},r.templateOptions.templateManipulators||{});r.wrappers=[...this.formlyConfig.templateManipulators.preWrapper.map(n=>n(r)),...e.preWrapper.map(n=>n(r)),...r.wrappers,...this.formlyConfig.templateManipulators.postWrapper.map(n=>n(r)),...e.postWrapper.map(n=>n(r))].filter((n,a,s)=>n&&a===s.indexOf(n))}getFieldComponentInstance(r){const e=this.formlyConfig.resolveFieldTypeRef(r),n=e?e.instance:{};return{prePopulate:()=>n.prePopulate&&n.prePopulate(r),onPopulate:()=>n.onPopulate&&n.onPopulate(r),postPopulate:()=>n.postPopulate&&n.postPopulate(r)}}}function E1(t){return{types:[{name:"formly-group",component:$8},{name:"formly-template",component:q8}],extensions:[{name:"core",extension:new Q8(t)},{name:"field-validation",extension:new K8(t)},{name:"field-form",extension:new Y8(t)},{name:"field-expression",extension:new W8}]}}let ga=(()=>{class t{constructor(e,n=[]){!n||n.forEach(a=>e.addConfig(a))}static forRoot(e={}){return{ngModule:t,providers:[{provide:Bd,multi:!0,useFactory:E1,deps:[yr]},{provide:Bd,useValue:e,multi:!0},{provide:o.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:e,multi:!0},yr,ta]}}static forChild(e={}){return{ngModule:t,providers:[{provide:Bd,multi:!0,useFactory:E1,deps:[yr]},{provide:Bd,useValue:e,multi:!0},{provide:o.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:e,multi:!0},ta]}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(yr),o.\u0275\u0275inject(Bd,8))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule]]}),t})();var T1=S(4218);const J8=["matPrefix"],Z8=["matSuffix"],e$=["fieldComponent"];function t$(t,r){1&t&&(o.\u0275\u0275elementStart(0,"span",8),o.\u0275\u0275text(1,"*"),o.\u0275\u0275elementEnd())}function n$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-label"),o.\u0275\u0275text(1),o.\u0275\u0275template(2,t$,2,0,"span",7),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.to.label," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.to.required&&!0!==e.to.hideRequiredMarker)}}function i$(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function r$(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0,9),o.\u0275\u0275template(1,i$,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e.to.prefix?e.to.prefix:e.to._matPrefix)}}function o$(t,r){1&t&&o.\u0275\u0275elementContainer(0)}function a$(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0,11),o.\u0275\u0275template(1,o$,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e.to.suffix?e.to.suffix:e.to._matSuffix)}}function s$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-hint",12),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("id",null),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.to.description)}}class l${constructor(r){this.field=r}isErrorState(r,e){return this.field&&this.field.showError}}let na=(()=>{class t extends vp{constructor(){super(...arguments),this.errorStateMatcher=new l$(this),this.stateChanges=new M.x,this._errorState=!1}get formFieldControl(){return this._control||this}set formFieldControl(e){this._control=e,this.formField&&e!==this.formField._control&&(this.formField._control=e)}ngOnInit(){this.formField&&(this.formField._control=this.formFieldControl)}ngAfterViewInit(){(this.matPrefix||this.matSuffix)&&setTimeout(()=>{cr(this.to,"_matPrefix",this.matPrefix),cr(this.to,"_matSuffix",this.matSuffix),this.options._markForCheck(this.field)})}ngOnDestroy(){this.formField&&delete this.formField._control,this.stateChanges.complete()}setDescribedByIds(e){}onContainerClick(e){this.field.focus=!0,this.stateChanges.next()}get errorState(){const e=this.options.showError(this);return e!==this._errorState&&(this._errorState=e,this.stateChanges.next()),e}get controlType(){return this.to.type?this.to.type:this.field.type instanceof o.Type?this.field.type.constructor.name:this.field.type}get focused(){return!!this.field.focus&&!this.disabled}get disabled(){return!!this.to.disabled}get required(){return!!this.to.required}get placeholder(){return this.to.placeholder||""}get shouldPlaceholderFloat(){return this.shouldLabelFloat}get value(){return this.formControl.value}set value(e){this.formControl.patchValue(e)}get ngControl(){return this.formControl}get empty(){return null==this.value||""===this.value}get shouldLabelFloat(){return this.focused||!this.empty}get formField(){return this.field?this.field.__formField__:null}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275dir=o.\u0275\u0275defineDirective({type:t,viewQuery:function(e,n){if(1&e&&(o.\u0275\u0275viewQuery(J8,5),o.\u0275\u0275viewQuery(Z8,5)),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.matPrefix=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.matSuffix=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature]}),t})(),c$=(()=>{class t extends w1{constructor(e,n,a,s){super(),this.config=e,this.renderer=n,this.elementRef=a,this.focusMonitor=s,this.stateChanges=new M.x,this._errorState=!1,this.initialGapCalculated=!1}ngOnInit(){this.formField._control=this,cr(this.field,"__formField__",this.formField);const e=this.config.resolveFieldTypeRef(this.formlyField);e&&!(e.instance instanceof na)&&console.warn(`Component '${e.componentType.name}' must extend 'FieldType' from '@ngx-formly/material/form-field'.`),this.formlyField.hide&&"outline"===this.formlyField.templateOptions.appearance&&(this.initialGapCalculated=!0),this.focusMonitor.monitor(this.elementRef,!0).subscribe(n=>{!n&&this.field.focus&&(this.field.focus=!1),this.stateChanges.next()})}ngAfterContentChecked(){!this.initialGapCalculated||this.formlyField.hide||(this.formField.updateOutlineGap(),this.initialGapCalculated=!0)}ngAfterViewInit(){if("outline"!==this.formField.appearance&&!0===this.to.hideFieldUnderline){const e=this.formField._elementRef.nativeElement.querySelector(".mat-form-field-underline");e&&this.renderer.removeChild(e.parentNode,e)}}ngOnDestroy(){delete this.formlyField.__formField__,this.stateChanges.complete(),this.focusMonitor.stopMonitoring(this.elementRef)}setDescribedByIds(e){}onContainerClick(e){this.formlyField.focus=!0,this.stateChanges.next()}get errorState(){const e=this.options.showError(this);return e!==this._errorState&&(this._errorState=e,this.stateChanges.next()),e}get controlType(){return this.to.type}get focused(){return!!this.formlyField.focus&&!this.disabled}get disabled(){return!!this.to.disabled}get required(){return!!this.to.required}get placeholder(){return this.to.placeholder||""}get shouldPlaceholderFloat(){return this.shouldLabelFloat}get value(){return this.formControl.value}get ngControl(){return this.formControl}get empty(){return!this.formControl.value}get shouldLabelFloat(){return this.focused||!this.empty}get formlyField(){return this.field}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(yr),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(T1.tE))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-wrapper-mat-form-field"]],viewQuery:function(e,n){if(1&e&&(o.\u0275\u0275viewQuery(e$,7,o.ViewContainerRef),o.\u0275\u0275viewQuery(Wt.KE,7)),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.fieldComponent=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.formField=a.first)}},features:[o.\u0275\u0275ProvidersFeature([{provide:Wt.Eo,useExisting:t}]),o.\u0275\u0275InheritDefinitionFeature],decls:9,vars:9,consts:[[3,"hideRequiredMarker","floatLabel","appearance","color"],["fieldComponent",""],[4,"ngIf"],["matPrefix","",4,"ngIf"],["matSuffix","",4,"ngIf"],[3,"field"],[3,"id",4,"ngIf"],["aria-hidden","true","class","mat-form-field-required-marker",4,"ngIf"],["aria-hidden","true",1,"mat-form-field-required-marker"],["matPrefix",""],[4,"ngTemplateOutlet"],["matSuffix",""],[3,"id"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-form-field",0),o.\u0275\u0275elementContainer(1,null,1),o.\u0275\u0275template(3,n$,3,2,"mat-label",2),o.\u0275\u0275template(4,r$,2,1,"ng-container",3),o.\u0275\u0275template(5,a$,2,1,"ng-container",4),o.\u0275\u0275elementStart(6,"mat-error"),o.\u0275\u0275element(7,"formly-validation-message",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(8,s$,2,2,"mat-hint",6),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("hideRequiredMarker",!0)("floatLabel",n.to.floatLabel)("appearance",n.to.appearance)("color",n.to.color),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",n.to.label&&!0!==n.to.hideLabel),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.to.prefix||n.to._matPrefix),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.to.suffix||n.to._matSuffix),o.\u0275\u0275advance(2),o.\u0275\u0275property("field",n.field),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.to.description))},directives:[Wt.KE,x.NgIf,Wt.hX,Wt.qo,x.NgTemplateOutlet,Wt.R9,Wt.TO,H8,Wt.bx],styles:["formly-wrapper-mat-form-field .mat-form-field{width:100%}"],encapsulation:2}),t})(),$a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,Wt.lN,ga.forChild({wrappers:[{name:"form-field",component:c$}]})]]}),t})();function u$(t,r){if(1&t&&o.\u0275\u0275element(0,"input",2),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("id",e.id)("type",e.type||"text")("readonly",e.to.readonly)("required",e.to.required)("errorStateMatcher",e.errorStateMatcher)("formControl",e.formControl)("formlyAttributes",e.field)("tabindex",e.to.tabindex)("placeholder",e.to.placeholder)}}function d$(t,r){if(1&t&&o.\u0275\u0275element(0,"input",3),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("id",e.id)("readonly",e.to.readonly)("required",e.to.required)("errorStateMatcher",e.errorStateMatcher)("formControl",e.formControl)("formlyAttributes",e.field)("tabIndex",e.to.tabindex)("placeholder",e.to.placeholder)}}let f$=(()=>{class t extends na{get type(){return this.to.type||"text"}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-input"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(In.Nt,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.formFieldControl=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["matInput","",3,"id","type","readonly","required","errorStateMatcher","formControl","formlyAttributes","tabindex","placeholder",4,"ngIf","ngIfElse"],["numberTmp",""],["matInput","",3,"id","type","readonly","required","errorStateMatcher","formControl","formlyAttributes","tabindex","placeholder"],["matInput","","type","number",3,"id","readonly","required","errorStateMatcher","formControl","formlyAttributes","tabIndex","placeholder"]],template:function(e,n){if(1&e&&(o.\u0275\u0275template(0,u$,1,9,"input",0),o.\u0275\u0275template(1,d$,1,8,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&e){const a=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf","number"!==n.type)("ngIfElse",a)}},directives:[x.NgIf,In.Nt,d.Fj,d.Q7,d.JJ,d.oH,Ga,d.wV],encapsulation:2}),t})(),h$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,In.c,$a,ga.forChild({types:[{name:"input",component:f$,wrappers:["form-field"]}]})]]}),t})();var p$=S(5804);let m$=(()=>{class t extends na{constructor(){super(...arguments),this.defaultOptions={templateOptions:{cols:1,rows:1}}}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-textarea"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(In.Nt,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.formFieldControl=a.first)}},features:[o.\u0275\u0275ProvidersFeature([{provide:In.Jk,useExisting:t}]),o.\u0275\u0275InheritDefinitionFeature],decls:2,vars:15,consts:[["matInput","",3,"id","readonly","required","formControl","errorStateMatcher","cols","rows","formlyAttributes","placeholder","tabindex","cdkTextareaAutosize","cdkAutosizeMinRows","cdkAutosizeMaxRows"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"textarea",0),o.\u0275\u0275text(1,"    "),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275classProp("cdk-textarea-autosize",n.to.autosize),o.\u0275\u0275property("id",n.id)("readonly",n.to.readonly)("required",n.to.required)("formControl",n.formControl)("errorStateMatcher",n.errorStateMatcher)("cols",n.to.cols)("rows",n.to.rows)("formlyAttributes",n.field)("placeholder",n.to.placeholder)("tabindex",n.to.tabindex)("cdkTextareaAutosize",n.to.autosize)("cdkAutosizeMinRows",n.to.autosizeMinRows)("cdkAutosizeMaxRows",n.to.autosizeMaxRows))},directives:[In.Nt,d.Fj,p$.IC,d.Q7,d.JJ,d.oH,Ga],encapsulation:2}),t})(),g$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,In.c,$a,ga.forChild({types:[{name:"textarea",component:m$,wrappers:["form-field"]}]})]]}),t})(),lv=(()=>{class t{transform(e,n){return e instanceof y.y||(e=(0,Re.of)(e)),e.pipe((0,ye.U)(a=>this.toOptions(a,n||{})))}toOptions(e,n){const a=[],s={},l=n.templateOptions||{};return l._flatOptions=!0,e.map(c=>{this.getGroupProp(c,l)?(l._flatOptions=!1,s[this.getGroupProp(c,l)]||(s[this.getGroupProp(c,l)]=[],a.push({label:this.getGroupProp(c,l),group:s[this.getGroupProp(c,l)]})),s[this.getGroupProp(c,l)].push(this.toOption(c,l))):a.push(this.toOption(c,l))}),a}toOption(e,n){return{label:this.getLabelProp(e,n),value:this.getValueProp(e,n),disabled:this.getDisabledProp(e,n)||!1}}getLabelProp(e,n){return"function"==typeof n.labelProp?n.labelProp(e):this.shouldUseLegacyOption(e,n)?(console.warn("NgxFormly: legacy select option '{key, value}' is deprecated since v5.5, use '{value, label}' instead."),e.value):e[n.labelProp||"label"]}getValueProp(e,n){return"function"==typeof n.valueProp?n.valueProp(e):this.shouldUseLegacyOption(e,n)?e.key:e[n.valueProp||"value"]}getDisabledProp(e,n){return"function"==typeof n.disabledProp?n.disabledProp(e):e[n.disabledProp||"disabled"]}getGroupProp(e,n){return"function"==typeof n.groupProp?n.groupProp(e):e[n.groupProp||"group"]}shouldUseLegacyOption(e,n){return!n.valueProp&&!n.labelProp&&null!=e&&"object"==typeof e&&"key"in e&&"value"in e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.\u0275\u0275definePipe({name:"formlySelectOptions",type:t,pure:!0}),t})(),cv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({}),t})();function v$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-radio-button",2),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=r.index,a=o.\u0275\u0275nextContext();o.\u0275\u0275property("id",a.id+"_"+n)("color",a.to.color)("labelPosition",a.to.labelPosition)("disabled",e.disabled)("value",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.label," ")}}let y$=(()=>{class t extends na{constructor(){super(...arguments),this.defaultOptions={templateOptions:{hideFieldUnderline:!0,floatLabel:"always",options:[],tabindex:-1}}}ngAfterViewInit(){this.focusObserver=Va(this.field,"focus",({currentValue:e})=>{-1===this.to.tabindex&&e&&this.radioGroup._radios.length>0&&setTimeout(()=>{(this.radioGroup.selected?this.radioGroup.selected:this.radioGroup._radios.first)._elementRef.nativeElement.focus({preventScroll:!0})})})}onContainerClick(){}ngOnDestroy(){this.focusObserver&&this.focusObserver()}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-radio"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(ec.VQ,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.radioGroup=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature],decls:4,vars:10,consts:[[3,"formControl","formlyAttributes","required","tabindex"],[3,"id","color","labelPosition","disabled","value",4,"ngFor","ngForOf"],[3,"id","color","labelPosition","disabled","value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-radio-group",0),o.\u0275\u0275template(1,v$,2,6,"mat-radio-button",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275pipe(3,"formlySelectOptions"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formControl",n.formControl)("formlyAttributes",n.field)("required",n.to.required)("tabindex",n.to.tabindex),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,5,o.\u0275\u0275pipeBind2(3,7,n.to.options,n.field))))},directives:[ec.VQ,d.JJ,d.oH,Ga,d.Q7,x.NgForOf,ec.U0],pipes:[x.AsyncPipe,lv],encapsulation:2}),t})(),_$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,ec.Fk,$a,cv,ga.forChild({types:[{name:"radio",component:y$,wrappers:["form-field"]}]})]]}),t})();function x$(t,r){1&t&&(o.\u0275\u0275elementStart(0,"span",2),o.\u0275\u0275text(1,"*"),o.\u0275\u0275elementEnd())}let b$=(()=>{class t extends na{constructor(e,n){super(),this.renderer=e,this.focusMonitor=n,this.defaultOptions={templateOptions:{hideFieldUnderline:!0,indeterminate:!0,floatLabel:"always",hideLabel:!0,align:"start",color:"accent"}}}onContainerClick(e){this.checkbox.focus(),super.onContainerClick(e)}ngAfterViewInit(){this.checkbox&&this.focusMonitor.monitor(this.checkbox._inputElement,!0).subscribe(e=>{e?this.to.focus&&this.to.focus(this.field):this.to.blur&&this.to.blur(this.field)})}ngAfterViewChecked(){if(this.required!==this._required&&this.checkbox&&this.checkbox._inputElement){this._required=this.required;const e=this.checkbox._inputElement.nativeElement;this.required?this.renderer.setAttribute(e,"required","required"):this.renderer.removeAttribute(e,"required")}}ngOnDestroy(){this.checkbox&&this.focusMonitor.stopMonitoring(this.checkbox._inputElement)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(T1.tE))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-checkbox"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(za.oG,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.checkbox=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:9,consts:[[3,"formControl","id","formlyAttributes","tabIndex","indeterminate","color","labelPosition"],["aria-hidden","true","class","mat-form-field-required-marker",4,"ngIf"],["aria-hidden","true",1,"mat-form-field-required-marker"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-checkbox",0),o.\u0275\u0275text(1),o.\u0275\u0275template(2,x$,2,0,"span",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formControl",n.formControl)("id",n.id)("formlyAttributes",n.field)("tabIndex",n.to.tabindex)("indeterminate",n.to.indeterminate&&null===n.formControl.value)("color",n.to.color)("labelPosition",n.to.align||n.to.labelPosition),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.to.label," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.to.required&&!0!==n.to.hideRequiredMarker))},directives:[za.oG,d.JJ,d.oH,Ga,x.NgIf],encapsulation:2}),t})(),C$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,za.p9,$a,ga.forChild({types:[{name:"checkbox",component:b$,wrappers:["form-field"]}]})]]}),t})();function w$(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"mat-checkbox",1),o.\u0275\u0275listener("change",function(a){const l=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext().onChange(l.value,a.checked)}),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&t){const e=r.$implicit,n=r.index,a=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("id",a.id+"_"+n)("formlyAttributes",a.field)("tabIndex",a.to.tabindex)("color",a.to.color)("labelPosition",a.to.labelPosition)("checked",a.isChecked(e))("disabled",a.formControl.disabled||e.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.label," ")}}let S$=(()=>{class t extends na{constructor(){super(...arguments),this.defaultOptions={templateOptions:{hideFieldUnderline:!0,floatLabel:"always",options:[],color:"accent"}}}onChange(e,n){this.formControl.patchValue("array"===this.to.type?n?[...this.formControl.value||[],e]:[...this.formControl.value||[]].filter(a=>a!==e):Object.assign({},this.formControl.value,{[e]:n})),this.formControl.markAsTouched()}onContainerClick(){}isChecked(e){const n=this.formControl.value;return n&&("array"===this.to.type?-1!==n.indexOf(e.value):n[e.value])}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-multicheckbox"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(za.oG,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.checkboxes=a)}},hostVars:1,hostBindings:function(e,n){2&e&&o.\u0275\u0275hostProperty("id",n.id)},features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:6,consts:[[4,"ngFor","ngForOf"],[3,"id","formlyAttributes","tabIndex","color","labelPosition","checked","disabled","change"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,w$,3,8,"ng-container",0),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275pipe(2,"formlySelectOptions")),2&e&&o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(1,1,o.\u0275\u0275pipeBind2(2,3,n.to.options,n.field)))},directives:[x.NgForOf,za.oG,Ga],pipes:[x.AsyncPipe,lv],encapsulation:2}),t})(),E$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,za.p9,$a,cv,ga.forChild({types:[{name:"multicheckbox",component:S$,wrappers:["form-field"]}]})]]}),t})();function T$(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"mat-option",3),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).selectOptions;return o.\u0275\u0275nextContext().toggleSelectAll(s)}),o.\u0275\u0275element(1,"mat-pseudo-checkbox",4),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()}if(2&t){const e=r.selectOptions,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("state",n.getSelectAllState(e)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.to.selectAllOption," ")}}const A$=function(t){return{selectOptions:t}};function k$(t,r){if(1&t&&o.\u0275\u0275elementContainer(0,7),2&t){const e=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275nextContext();const n=o.\u0275\u0275reference(1);o.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,A$,e))}}function I$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",12),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value)("disabled",e.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.label," ")}}function P$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-optgroup",10),o.\u0275\u0275template(1,I$,2,3,"mat-option",11),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("label",e.label),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.group)}}function F$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",12),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("value",e.value)("disabled",e.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.label)}}function R$(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,P$,2,2,"mat-optgroup",8),o.\u0275\u0275template(2,F$,2,3,"mat-option",9),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.group),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.group)}}function D$(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,k$,1,4,"ng-container",5),o.\u0275\u0275template(2,R$,3,2,"ng-container",6),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.ngIf,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.to.multiple&&n.to.selectAllOption),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e)}}let O$=(()=>{class t extends na{constructor(){super(...arguments),this.defaultOptions={templateOptions:{options:[],compareWith:(e,n)=>e===n}}}getSelectAllState(e){return this.empty||0===this.value.length?"":this.value.length!==this.getSelectAllValue(e).length?"indeterminate":"checked"}toggleSelectAll(e){const n=this.getSelectAllValue(e);this.formControl.setValue(this.value&&this.value.length===n.length?[]:n),this.formControl.markAsDirty()}change(e){this.to.change&&this.to.change(this.field,e)}_getAriaLabelledby(){return this.to.attributes&&this.to.attributes["aria-labelledby"]?this.to.attributes["aria-labelledby"]:this.formField&&this.formField._labelId?this.formField._labelId:void 0}_getAriaLabel(){return this.to.attributes?this.to.attributes["aria-label"]:void 0}getSelectAllValue(e){if(!this.selectAllValue||e!==this.selectAllValue.options){const n=[];e.forEach(a=>a.group?n.push(...a.group):n.push(a)),this.selectAllValue={options:e,value:n.filter(a=>!a.disabled).map(a=>a.value)}}return this.selectAllValue.value}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-select"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(Hi.gD,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.formFieldControl=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature],decls:6,vars:18,consts:[["selectAll",""],[3,"id","formControl","formlyAttributes","placeholder","tabIndex","required","compareWith","multiple","errorStateMatcher","aria-label","aria-labelledby","disableOptionCentering","selectionChange"],[4,"ngIf"],[3,"click"],[1,"mat-option-pseudo-checkbox",3,"state"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"label",4,"ngIf"],[3,"value","disabled",4,"ngIf"],[3,"label"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,T$,3,2,"ng-template",null,0,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementStart(2,"mat-select",1),o.\u0275\u0275listener("selectionChange",function(s){return n.change(s)}),o.\u0275\u0275template(3,D$,3,2,"ng-container",2),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275pipe(5,"formlySelectOptions"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("id",n.id)("formControl",n.formControl)("formlyAttributes",n.field)("placeholder",n.to.placeholder)("tabIndex",n.to.tabindex)("required",n.to.required)("compareWith",n.to.compareWith)("multiple",n.to.multiple)("errorStateMatcher",n.errorStateMatcher)("aria-label",n._getAriaLabel())("aria-labelledby",n._getAriaLabelledby())("disableOptionCentering",n.to.disableOptionCentering),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(4,13,o.\u0275\u0275pipeBind2(5,15,n.to.options,n.field))))},directives:[ri.ey,ri.nP,Hi.gD,d.JJ,d.oH,Ga,d.Q7,x.NgIf,x.NgTemplateOutlet,x.NgForOf,ri.Nv],pipes:[x.AsyncPipe,lv],encapsulation:2}),t})(),M$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,Hi.LD,ri.us,$a,cv,ga.forChild({types:[{name:"select",component:O$,wrappers:["form-field"]}]})]]}),t})(),L$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[$a,h$,g$,_$,C$,E$,M$]]}),t})();var rc=S(2298);const N$=["datepickerToggle"];function B$(t,r){if(1&t&&o.\u0275\u0275element(0,"mat-datepicker-toggle",4),2&t){const e=o.\u0275\u0275nextContext(),n=o.\u0275\u0275reference(4);o.\u0275\u0275property("disabled",e.to.disabled)("for",n)}}let j$=(()=>{class t extends na{constructor(e){super(),this.config=e,this.defaultOptions={templateOptions:{datepickerOptions:{startView:"month",datepickerTogglePosition:"suffix",dateInput:()=>{},dateChange:()=>{},monthSelected:()=>{},yearSelected:()=>{}}}}}ngAfterViewInit(){super.ngAfterViewInit(),this.config.getValidatorMessage("matDatepickerParse")&&Va(this.field.formControl,"errors",({currentValue:e})=>{if(e.required&&e.matDatepickerParse){const n=Object.keys(e).sort(a=>"matDatepickerParse"===a?-1:0).reduce((a,s)=>Object.assign({},a,{[s]:e[s]}),{});this.field.formControl.___$errors=n}}),this.datepickerInput._formField=this.formField,setTimeout(()=>{switch(this.to.datepickerOptions.datepickerTogglePosition){case"suffix":this.to._matSuffix=this.datepickerToggle;break;case"prefix":this.to._matPrefix=this.datepickerToggle}this.options._markForCheck(this.field)})}ngOnDestroy(){this.fieldErrorsObserver&&this.fieldErrorsObserver()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(yr))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-datepicker"]],viewQuery:function(e,n){if(1&e&&(o.\u0275\u0275viewQuery(In.Nt,7),o.\u0275\u0275viewQuery(rc.hl,7),o.\u0275\u0275viewQuery(N$,5)),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.formFieldControl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.datepickerInput=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.datepickerToggle=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature],decls:5,vars:20,consts:[["matInput","",3,"id","errorStateMatcher","formControl","matDatepicker","matDatepickerFilter","max","min","formlyAttributes","placeholder","tabindex","readonly","required","dateInput","dateChange"],["datepickerToggle",""],[3,"color","dateClass","disabled","opened","panelClass","startAt","startView","touchUi","monthSelected","yearSelected"],["picker",""],[3,"disabled","for"]],template:function(e,n){if(1&e){const a=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",0),o.\u0275\u0275listener("dateInput",function(l){return n.to.datepickerOptions.dateInput(n.field,l)})("dateChange",function(l){return n.to.datepickerOptions.dateChange(n.field,l)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(1,B$,1,2,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementStart(3,"mat-datepicker",2,3),o.\u0275\u0275listener("monthSelected",function(l){o.\u0275\u0275restoreView(a);const c=o.\u0275\u0275reference(4);return n.to.datepickerOptions.monthSelected(n.field,l,c)})("yearSelected",function(l){o.\u0275\u0275restoreView(a);const c=o.\u0275\u0275reference(4);return n.to.datepickerOptions.yearSelected(n.field,l,c)}),o.\u0275\u0275elementEnd()}if(2&e){const a=o.\u0275\u0275reference(4);o.\u0275\u0275property("id",n.id)("errorStateMatcher",n.errorStateMatcher)("formControl",n.formControl)("matDatepicker",a)("matDatepickerFilter",n.to.datepickerOptions.filter)("max",n.to.datepickerOptions.max)("min",n.to.datepickerOptions.min)("formlyAttributes",n.field)("placeholder",n.to.placeholder)("tabindex",n.to.tabindex)("readonly",n.to.readonly)("required",n.to.required),o.\u0275\u0275advance(3),o.\u0275\u0275property("color",n.to.color)("dateClass",n.to.datepickerOptions.dateClass)("disabled",n.to.datepickerOptions.disabled)("opened",n.to.datepickerOptions.opened)("panelClass",n.to.datepickerOptions.panelClass)("startAt",n.to.datepickerOptions.startAt)("startView",n.to.datepickerOptions.startView)("touchUi",n.to.datepickerOptions.touchUi)}},directives:[In.Nt,d.Fj,rc.hl,d.JJ,d.oH,Ga,d.Q7,rc.nW,rc.Mq],encapsulation:2}),t})(),z$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,In.c,rc.FA,$a,ga.forChild({types:[{name:"datepicker",component:j$,wrappers:["form-field"]}]})]]}),t})();function U$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"option",3),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngValue",null),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.to.placeholder)}}function V$(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"option",7),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngValue",e.value)("disabled",e.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.label)}}function G$(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,V$,3,3,"ng-container",6),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e)}}function $$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"option",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("ngValue",e.value)("disabled",e.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.label)}}function H$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"option",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("ngValue",e.value)("disabled",e.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.label," ")}}function q$(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"optgroup",10),o.\u0275\u0275template(1,H$,2,3,"option",11),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("label",e.label),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.group)}}function X$(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,$$,2,3,"option",8),o.\u0275\u0275template(2,q$,2,2,"ng-template",null,9,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275reference(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.group)("ngIfElse",n)}}function W$(t,r){if(1&t&&o.\u0275\u0275template(0,X$,4,2,"ng-container",6),2&t){const e=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275property("ngForOf",e)}}function K$(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,G$,2,1,"ng-container",4),o.\u0275\u0275template(2,W$,1,1,"ng-template",null,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementContainerEnd()),2&t){const e=o.\u0275\u0275reference(3),n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.to._flatOptions)("ngIfElse",e)}}let Y$=(()=>{class t extends na{constructor(){super(...arguments),this.defaultOptions={templateOptions:{options:[]}}}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-native-select"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(In.Nt,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.formFieldControl=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature],decls:5,vars:13,consts:[["matNativeControl","",3,"id","readonly","required","errorStateMatcher","formControl","formlyAttributes"],[3,"ngValue",4,"ngIf"],[4,"ngIf"],[3,"ngValue"],[4,"ngIf","ngIfElse"],["grouplist",""],[4,"ngFor","ngForOf"],[3,"ngValue","disabled"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"select",0),o.\u0275\u0275template(1,U$,2,2,"option",1),o.\u0275\u0275template(2,K$,4,2,"ng-container",2),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275pipe(4,"formlySelectOptions"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("id",n.id)("readonly",n.to.readonly)("required",n.to.required)("errorStateMatcher",n.errorStateMatcher)("formControl",n.formControl)("formlyAttributes",n.field),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.to.placeholder),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(3,8,o.\u0275\u0275pipeBind2(4,10,n.to.options,n.field))))},directives:[In.Nt,d.EJ,d.Q7,d.JJ,d.oH,Ga,x.NgIf,d.YN,d.Kr,x.NgForOf],pipes:[x.AsyncPipe,lv],encapsulation:2}),t})(),Q$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,In.c,$a,cv,ga.forChild({types:[{name:"native-select",component:Y$,wrappers:["form-field"]}]})]]}),t})();var yp=S(4714);let J$=(()=>{class t extends na{constructor(){super(...arguments),this.defaultOptions={templateOptions:{hideFieldUnderline:!0,floatLabel:"always",hideLabel:!0}}}onContainerClick(e){this.slideToggle.focus(),super.onContainerClick(e)}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-toggle"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(yp.Rr,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.slideToggle=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature],decls:2,vars:7,consts:[[3,"id","formControl","formlyAttributes","color","tabIndex","required"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-slide-toggle",0),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("id",n.id)("formControl",n.formControl)("formlyAttributes",n.field)("color",n.to.color)("tabIndex",n.to.tabindex)("required",n.to.required),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.to.label," "))},directives:[yp.Rr,yp.SA,d.JJ,d.oH,Ga,d.Q7],encapsulation:2}),t})(),Z$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,yp.rP,$a,ga.forChild({types:[{name:"toggle",component:J$,wrappers:["form-field"]}]})]]}),t})();var uv=S(5682);let eH=(()=>{class t extends na{constructor(){super(...arguments),this.defaultOptions={templateOptions:{hideFieldUnderline:!0,floatLabel:"always",thumbLabel:!1}}}onContainerClick(e){this.slider.focus(),super.onContainerClick(e)}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["formly-field-mat-slider"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(uv.pH,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.slider=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:11,consts:[[3,"id","formControl","formlyAttributes","tabIndex","color","thumbLabel","step","max","min"]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"mat-slider",0),2&e&&(o.\u0275\u0275styleProp("width","100%"),o.\u0275\u0275property("id",n.id)("formControl",n.formControl)("formlyAttributes",n.field)("tabIndex",n.to.tabindex)("color",n.to.color)("thumbLabel",n.to.thumbLabel)("step",n.to.step)("max",n.to.max)("min",n.to.min))},directives:[uv.pH,d.JJ,d.oH,Ga],encapsulation:2}),t})(),tH=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,uv.KP,$a,ga.forChild({types:[{name:"slider",component:eH,wrappers:["form-field"]}]})]]}),t})();function nH(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",11),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e)}}function iH(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",4),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.label," ")}}function rH(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",1),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext().onItemSelect(s.key)}),o.\u0275\u0275elementStart(1,"span",2),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.value)}}function oH(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",3),o.\u0275\u0275element(1,"formly-field",4),o.\u0275\u0275elementStart(2,"div",5),o.\u0275\u0275elementStart(3,"button",6),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().remove(s)}),o.\u0275\u0275text(4,"Remove"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("field",e)}}class y0{constructor(r){r&&(this.type=r.type,this.key=r.key,this.value=null!=r.value?r.value:void 0,r.options&&"object"==typeof r.options&&(this.options=new aH(r.options)),r.rest&&"object"==typeof r.rest&&(this.rest=new Ua(r.rest)),r.datasourceBinding&&"object"==typeof r.datasourceBinding&&(this.datasourceBinding=new Gt.ContentBinding(r.datasourceBinding)),r.datasourceOptions&&"object"==typeof r.datasourceOptions&&(this.datasourceOptions=new C_(r.datasourceOptions)))}}class aH{constructor(r){r&&(this.label=r.label)}}class sH{constructor(r){r&&(this.valuesMapping=r.valuesMapping)}}let _0=(()=>{class t{constructor(e,n,a,s,l){this.urlGeneratorService=e,this.datasourceApi=n,this.tokenizerService=a,this.datasourceContentHandler=s,this.panelResolver=l}buildFieldConfig(e,n){return(0,Re.of)(e).pipe((0,Ke.w)(a=>Gn(()=>!!a.options,this.buildTemplateOptions(a,n).pipe((0,ye.U)(s=>[a,s])),(0,Re.of)([a,{}]))),(0,ye.U)(([a,s])=>({key:"value",type:a.type,templateOptions:s})))}buildTemplateOptions(e,n){return(0,Re.of)(e).pipe((0,ye.U)(a=>[a,{label:a.options.label,multiple:!!a.datasourceOptions&&a.datasourceOptions.multiple,options:[]}]),(0,Ke.w)(([a,s])=>Gn(()=>this.hasDataOptions(a),this.buildDataOptions(a,n).pipe((0,ye.U)(l=>[s,l])),(0,Re.of)([s,[]]))),(0,ye.U)(([a,s])=>({...a,options:s})))}buildDataOptions(e,n){return(0,Re.of)(e).pipe((0,Ke.w)(a=>{if((a.rest||a.datasourceBinding&&a.datasourceBinding.id&&""!==a.datasourceBinding.id)&&"autocomplete"!==a.type){if(a.datasourceBinding){const s=n.has("panes")?n.get("panes").find(l=>l.name===a.datasourceBinding.id):void 0;return this.panelResolver.dataPanes(n.get("panes")).pipe((0,Ke.w)(l=>s?this.datasourceContentHandler.fetchDynamicData(s.settings,new Map([...n,["dataPanes",l]])):(0,Re.of)([])),(0,ye.U)(l=>[a,l.results]))}return this.buildRestDataOptions(a).pipe((0,ye.U)(s=>[a,s]))}return(0,Re.of)([a,[]])}),(0,ye.U)(([a,s])=>[a,a.datasourceOptions&&""!==a.datasourceOptions.query?(0,Ro.JSONPath)({path:a.datasourceOptions.query,json:s}):s]),(0,Ke.w)(([a,s])=>this.mapDataOptions(a,s)))}buildRestDataOptions(e){return(0,Re.of)(e).pipe((0,Ke.w)(n=>this.urlGeneratorService.getUrl(n.rest.url,n.rest.params,new Map([]))),(0,Ke.w)(n=>this.datasourceApi.getData(`${n}`)))}mapDataOptions(e,n){return(0,Re.of)([e,n]).pipe((0,ye.U)(([a,s])=>[a,s,s?s.map(l=>this.tokenizerService.generateGenericTokens(l)):[]]),(0,ye.U)(([a,s,l])=>l.map(c=>this.mapDataItem(a,c))))}mapDataItem(e,n){return{value:this.tokenizerService.replaceTokens(`${e.datasourceOptions.valueMapping}`,n),label:this.tokenizerService.replaceTokens(`${e.datasourceOptions.labelMapping}`,n),display:this.tokenizerService.replaceTokens(`${e.datasourceOptions.labelMapping}`,n)}}hasDataOptions(e){return!!e.rest&&e.rest.url&&""!==e.rest.url.trim()||e.datasourceBinding&&e.datasourceBinding.id&&""!==e.datasourceBinding.id}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Kl),o.\u0275\u0275inject(Vh),o.\u0275\u0275inject(Xn),o.\u0275\u0275inject(Qc),o.\u0275\u0275inject(kd))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),jd=(()=>{class t{constructor(e,n,a,s){this.attributeSerializer=e,this.formlyHandlerHelper=n,this.datasourceHandler=a,this.dpm=s}handleFile(e){return(0,Re.of)([])}handlesType(e){return!1}implementsRendererOverride(){return!1}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return!1}isData(e){return!1}getBindings(e,n,a){return"pane"===n?this.toObject(e).pipe((0,Ke.w)(s=>Gn(()=>s.datasourceBinding&&s.datasourceBinding.id&&null!==s.datasourceBinding.id,(0,Re.of)([s.datasourceBinding]),(0,Re.of)([])))):(0,Re.of)([])}fetchDynamicData(e,n){return(0,Re.of)(new qn)}buildDynamicItems(e,n){return(0,Re.of)([])}toObject(e){return(0,Re.of)(new y0(this.attributeSerializer.deserializeAsObject(e)))}buildSettings(e){return this.attributeSerializer.serialize(e,"root").attributes}buildFieldConfig(e,n){return this.toObject(e).pipe((0,Ke.w)(a=>this.formlyHandlerHelper.buildFieldConfig(a,n)))}stateDefinition(e){return(0,Re.of)({autocomplete:{input:""},value:void 0})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(_0),o.\u0275\u0275inject(Qc),o.\u0275\u0275inject(Zo))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),A1=(()=>{class t{constructor(e,n,a,s,l){this.data=e,this.dialogRef=n,this.fb=a,this.handler=s,this.attributeSerializer=l,this.rest=w_,this.datasourceOptions=Uh,this.bindableOptions=[],this.formGroup=this.fb.group({type:this.fb.control("",[d.kI.required]),key:this.fb.control("",[d.kI.required]),value:this.fb.control(""),options:this.fb.group({label:this.fb.control("")}),rest:this.fb.control(""),datasourceOptions:this.fb.control(""),datasourceBinding:this.fb.group({id:this.fb.control(""),type:this.fb.control("pane")})})}get paneGroup(){return this.data.panelFormGroup.get("panes").at(this.data.paneIndex)}ngOnInit(){this.handler.toObject(this.data.pane.settings).subscribe(e=>{this.formGroup.get("type").setValue(e.type),this.formGroup.get("key").setValue(e.key),this.formGroup.get("value").setValue(e.value),this.formGroup.get("options").setValue(e.options?e.options:{label:""}),this.rest=e.rest?new Ua({...e.rest,params:[]}):w_,this.datasourceOptions=e.datasourceOptions?e.datasourceOptions:Uh,this.formGroup.get("datasourceBinding").get("id").setValue(e.datasourceBinding&&e.datasourceBinding.id&&null!==e.datasourceBinding.id?e.datasourceBinding.id:""),setTimeout(()=>this.rest=e.rest?e.rest:w_)}),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce((e,n)=>n.get("name").value?[...e,n.get("name").value]:[...e],[])}submit(){console.log(this.formGroup.value);const e=new y0(this.formGroup.value);console.log(e),this.paneGroup.get("name").setValue(e.key),this.paneGroup.get("label").setValue(e.key),this.paneGroup.get("settings").clear(),this.handler.buildSettings(e).map(a=>this.attributeSerializer.convertToGroup(a)).forEach(a=>this.paneGroup.get("settings").push(a)),this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(jd),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-formly-field-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:21,vars:3,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","placeholder","Key","formControlName","key","required",""],["formGroupName","options"],["matInput","","placeholder","label","formControlName","label"],["matInput","","formControlName","value"],["formGroupName","datasourceBinding"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","datasourceOptions",3,"datasourceOptions"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275element(4,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-form-field",3),o.\u0275\u0275element(6,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"div"),o.\u0275\u0275elementStart(8,"mat-form-field"),o.\u0275\u0275elementStart(9,"mat-label"),o.\u0275\u0275text(10,"Value"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(11,"input",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"mat-form-field",6),o.\u0275\u0275elementStart(13,"mat-label"),o.\u0275\u0275text(14,"Datasource"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"mat-select",7),o.\u0275\u0275template(16,nH,2,2,"mat-option",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(17,"classifieds-ui-datasource-options",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(18,"mat-dialog-actions"),o.\u0275\u0275elementStart(19,"button",10),o.\u0275\u0275text(20,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(16),o.\u0275\u0275property("ngForOf",n.bindableOptions),o.\u0275\u0275advance(1),o.\u0275\u0275property("datasourceOptions",n.datasourceOptions))},directives:[Wt.KE,Hi.gD,ri.ey,ww,zi.lW,d._Y,d.JL,d.sg,Dt.xY,ue,In.Nt,d.Fj,d.JJ,d.u,d.Q7,d.x0,Wt.hX,x.NgForOf,Dt.H8,Dt.ZT],styles:[""]}),t})(),k1=(()=>{class t extends na{ngOnInit(){super.ngOnInit(),this.filter=this.formControl.valueChanges.pipe((0,lp.O)(""),(0,Ke.w)(e=>this.to.filter({term:e,field:this.field})))}ngAfterViewInit(){super.ngAfterViewInit(),this.autocomplete._formField=this.formField}displayAuto(e){return e&&null!==e?e.label:""}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-formly-autocomplete"]],viewQuery:function(e,n){if(1&e&&(o.\u0275\u0275viewQuery(In.Nt,5),o.\u0275\u0275viewQuery(nu.ZL,5)),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.formFieldControl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.autocomplete=a.first)}},features:[o.\u0275\u0275InheritDefinitionFeature],decls:5,vars:9,consts:[["matInput","",3,"matAutocomplete","formControl","formlyAttributes","placeholder","errorStateMatcher"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){if(1&e&&(o.\u0275\u0275element(0,"input",0),o.\u0275\u0275elementStart(1,"mat-autocomplete",1,2),o.\u0275\u0275template(3,iH,2,2,"mat-option",3),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd()),2&e){const a=o.\u0275\u0275reference(2);o.\u0275\u0275property("matAutocomplete",a)("formControl",n.formControl)("formlyAttributes",n.field)("placeholder",n.to.placeholder)("errorStateMatcher",n.errorStateMatcher),o.\u0275\u0275advance(1),o.\u0275\u0275property("displayWith",n.displayAuto),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(4,7,n.filter))}},directives:[nu.XC,ri.ey,In.Nt,nu.ZL,d.Fj,d.JJ,d.oH,Ga,x.NgForOf],pipes:[x.AsyncPipe],encapsulation:2}),t})(),lH=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g){this.fb=e,this.attributeSerializer=n,this.handler=a,this.formlyHandlerHelper=s,this.urlGeneratorService=l,this.datasourceApi=c,this.datasourceHandler=f,this.panelResolver=h,this.tokenizerService=g,this.contexts=[],this.searchChange=new o.EventEmitter,this.valueChange=new o.EventEmitter,this.settingsFormArray=this.fb.array([]),this.proxyGroup=this.fb.group({}),this.init$=new M.x,this.afterViewInit$=new M.x,this.resolvedContext$=new m.X(void 0),this.settings$=new m.X([]),this.panes$=new m.X([]),this.originPanes$=new m.X([]),this.bridgeSub=this.proxyGroup.valueChanges.pipe((0,Hn.b)(500)).subscribe(I=>{this.valueChange.emit(I.value),this.settingsFormArray.clear();const B=this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(I.value,"value"));this.settingsFormArray.push(B)}),this.renderContentSub=(0,Ln.a)([this.settings$,this.resolvedContext$,this.afterViewInit$]).pipe((0,Ke.w)(([I,B])=>this.handler.toObject(I)),(0,Ke.w)(I=>this.resolveContexts().pipe((0,ye.U)(B=>[I,B])))).subscribe(([I,B])=>{if(void 0!==B&&(this.tokens=B),I.value&&null!==I.value&&""!==I.value){this.model={value:this.replaceTokens(I.value)};const V=this.tokenizerService.discoverTokens(this.model.value,!0);0!==V.length&&(this.model={value:this.tokenizerService.replaceTokens(I.value,new Map(Array.from(V).map(ce=>[ce,""])))})}else this.model={}}),this.settingsSub=(0,Ln.a)([this.settings$,this.panes$,this.originPanes$,this.init$]).pipe((0,ye.U)(([I,B,V])=>({settings:I,metadata:new Map([["panes",[...B&&Array.isArray(B)?B:[],...V&&Array.isArray(V)?V:[]]],["contexts",this.contexts]])})),(0,Ke.w)(({settings:I,metadata:B})=>this.handler.buildFieldConfig(I,B).pipe((0,Ke.w)(V=>this.handler.toObject(I).pipe((0,ye.U)(ce=>[V,ce]))),(0,ye.U)(([V,ce])=>[{...V,hooks:{afterViewInit:Ie=>{this.formlyHookAfterViewInit(Ie)}}},ce]),(0,ye.U)(([V,ce])=>[{...V,templateOptions:{...V.templateOptions,..."autocomplete"===ce.type?{filter:this.makeFilterFunction({i:ce,metadata:B})}:{},change:(Ie,he)=>{}}},ce]))),(0,ee.b)(([I,B])=>{this.fields=[{...I}]})).subscribe(),this.onTouched=()=>{},this.fields=[],this.model={}}set resolvedContext(e){this.resolvedContext$.next(e)}set settings(e){this.settings$.next(e)}set panes(e){this.panes$.next(e)}set originPanes(e){this.originPanes$.next(e)}ngOnInit(){this.init$.next(void 0)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}writeValue(e){e&&setTimeout(()=>this.settingsFormArray.setValue(e,{emitEvent:!1}))}registerOnChange(e){this.settingsFormArray.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.settingsFormArray.disable():this.settingsFormArray.enable()}validate(e){return null}formlyHookAfterViewInit(e){"autocomplete"===e.type&&e._componentRefs.find(a=>a.instance instanceof k1).instance.formControl.valueChanges.pipe((0,Hn.b)(1e3),(0,xs.x)(),(0,ee.b)(a=>this.searchChange.emit(a))).subscribe()}makeFilterFunction({i:e,metadata:n}){const a=n.get("panes").find(s=>s.name===e.datasourceBinding.id);return({term:s})=>(0,Re.of)([]).pipe((0,Ke.w)(c=>this.searchChange.pipe((0,$.h)(f=>f===s))),(0,Ke.w)(()=>Gn(()=>!!e.datasourceBinding,e.datasourceBinding?this.panelResolver.dataPanes(n.get("panes")).pipe((0,Ke.w)(c=>a?this.datasourceHandler.fetchDynamicData(a.settings,new Map([...n,["dataPanes",c],["inputparams",new Map([["term",new lr({flags:[],mapping:new kg({value:s,type:"static",testValue:s,context:void 0})})]])]])):(0,Re.of)([])),(0,ye.U)(c=>c.results)):(0,Re.of)([]),e.datasourceBinding?(0,Re.of)([]):this.urlGeneratorService.getUrl(e.rest.url,e.rest.params,new Map([["contexts",this.contexts]])).pipe((0,Ke.w)(c=>this.datasourceApi.getData(`${c}`))))),(0,ye.U)(c=>e.datasourceOptions&&""!==e.datasourceOptions.query?(0,Ro.JSONPath)({path:e.datasourceOptions.query,json:c}):c),(0,Ke.w)(c=>this.formlyHandlerHelper.mapDataOptions(e,c)))}replaceTokens(e){return void 0!==this.tokens&&this.tokens.forEach((n,a)=>{e=e.split(`[${a}]`).join(`${n}`)}),e}resolveContexts(){return new y.y(e=>{let n=new Map;if(this.resolvedContext$.value)for(const a in this.resolvedContext$.value)n=new Map([...n,...this.tokenizerService.generateGenericTokens(this.resolvedContext$.value[a],"_root"===a?"":a)]);e.next(n),e.complete()})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(jd),o.\u0275\u0275directiveInject(_0),o.\u0275\u0275directiveInject(Kl),o.\u0275\u0275directiveInject(Vh),o.\u0275\u0275directiveInject(Qc),o.\u0275\u0275directiveInject(kd),o.\u0275\u0275directiveInject(Xn))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-formly-pane-field"]],inputs:{contexts:"contexts",tokens:"tokens",resolvedContext:"resolvedContext",settings:"settings",panes:"panes",originPanes:"originPanes"},outputs:{searchChange:"searchChange",valueChange:"valueChange"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:2,vars:4,consts:[[3,"formGroup"],[3,"form","fields","model"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"formly-form",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.proxyGroup),o.\u0275\u0275advance(1),o.\u0275\u0275property("form",n.proxyGroup)("fields",n.fields)("model",n.model))},directives:[C1,d.JL,d.sg],styles:[""]}),t})(),cH=(()=>{class t{constructor(e,n,a,s){this.fb=e,this.handler=n,this.attributeSerializer=a,this.controlContainer=s,this.settings=[],this.contexts=[],this.panes=[],this.originPanes=[],this.appearance="legacy",this.resolvedContext={},this.state={},this.stateChange=new o.EventEmitter,this.fields=[],this.model={}}ngOnInit(){this.handler.toObject(this.settings).subscribe(e=>{this.fields=[{key:e.key,type:e.type}]})}onSearchChange(e){this.input=e,this.state={value:this.value,autocomplete:{input:e}},this.stateChange.emit({value:this.value,autocomplete:{input:e}})}onValueChange(e){this.value=e,this.state={value:e,autocomplete:{input:this.input}},this.stateChange.emit({value:e,autocomplete:{input:this.input}})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(jd),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(d.gN,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-formly-field-renderer"]],inputs:{settings:"settings",contexts:"contexts",panes:"panes",originPanes:"originPanes",appearance:"appearance",name:"name",label:"label",displayType:"displayType",resolvedContext:"resolvedContext",state:"state",tokens:"tokens"},outputs:{stateChange:"stateChange"},decls:2,vars:7,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts","panes","originPanes","resolvedContext","tokens","searchChange","valueChange"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"classifieds-ui-formly-pane-field",1),o.\u0275\u0275listener("searchChange",function(s){return n.onSearchChange(s)})("valueChange",function(s){return n.onValueChange(s)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",n.settings)("contexts",n.contexts)("panes",n.panes)("originPanes",n.originPanes)("resolvedContext",n.resolvedContext)("tokens",n.tokens))},directives:[lH,d.JL,d.sg,d.JJ,d.u],styles:[""]}),t})(),uH=(()=>{class t{constructor(e,n,a,s,l){this.bottomSheetRef=e,this.handler=n,this.attributeSerializer=a,this.fb=s,this.dialog=l,this.contexts=[],this.fields$=new m.X(new Map([["input","Input"],["textarea","Textarea"],["radio","Radio"],["checkbox","Checkbox"],["select","Select"],["native-select","Native Select"],["datepicker","Date picker"],["toggle","Toggle"],["slider","Slider"],["autocomplete","Autocomplete"]]))}ngOnInit(){}onItemSelect(e){const n=new y0({type:e,key:""});this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"formly_field",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array(this.handler.buildSettings(n).map(c=>this.attributeSerializer.convertToGroup(c)))}));const a=this.panelFormGroup.get("panes"),s=a.length-1,l=new mi(a.at(s).value);this.dialog.open(A1,{data:{panelFormGroup:this.panelFormGroup,pane:l,paneIndex:s,contexts:[]}}),this.bottomSheetRef.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Jl.oL),o.\u0275\u0275directiveInject(jd),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Dt.uw))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-formly-field-selector"]],inputs:{panelFormGroup:"panelFormGroup",contexts:"contexts"},decls:4,vars:5,consts:[["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-nav-list"),o.\u0275\u0275template(1,rH,3,1,"a",0),o.\u0275\u0275pipe(2,"keyvalue"),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,1,o.\u0275\u0275pipeBind1(3,3,n.fields$))))},directives:[ws.Hk,ws.Tg,x.NgForOf,ri.X2],pipes:[x.KeyValuePipe,x.AsyncPipe],styles:[""]}),t})(),dH=(()=>{class t extends G8{}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-formly-repeat-section"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:4,vars:2,consts:[["class","row",4,"ngFor","ngForOf"],[2,"margin","30px 0"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row"],[1,"col",3,"field"],[1,"col-sm-2","d-flex","align-items-center"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,oH,5,1,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"button",2),o.\u0275\u0275listener("click",function(){return n.add()}),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("ngForOf",n.field.fieldGroup),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(n.to.addText))},directives:[v0,x.NgForOf],styles:[""]}),t})(),fH=(()=>{class t{constructor(e,n,a,s,l,c,f,h,g,I,B,V,ce,Ie,he,Se){this.fb=e,this.cpm=n,this.formlyHandlerHelper=a,this.paneStateService=s,this.pageBuilderFacade=l,this.formStateConverter=c,this.attributeSerializer=f,this.formService=h,this.formGroupConverter=g,this.urlGeneratorService=I,this.datasourceApi=B,this.datasourceHandler=V,this.panelResolver=ce,this.tokenizerService=Ie,this.controlContainer=Se,this.originMappings=[],this.panes$=new m.X([]),this.panel$=new m.X(new uo),this.originPanes$=new m.X([]),this.ancestory$=new m.X([]),this.contexts$=new m.X([]),this.resolvedContext$=new m.X(void 0),this.settings$=new m.X([]),this.init$=new M.x,this.fields=[],this.model={items:[]},this.proxyGroup=this.fb.group({}),this.panesSub=(0,Ln.a)([this.panes$,this.originPanes$]).pipe((0,Ke.w)(([Oe,Be])=>(0,cn.D)(Oe.filter(et=>"formly_field"===et.contentPlugin||"panel"===et.contentPlugin).map(et=>this.cpm.getPlugin(et.contentPlugin).pipe((0,ye.U)(at=>({pane:et,plugin:at,panes:Oe,originPanes:Be}))))).pipe((0,Ei.d)([]))),(0,Ke.w)(Oe=>(0,cn.D)(Oe.map(({pane:Be,plugin:et,panes:at,originPanes:ft})=>et.handler.toObject(Be.settings).pipe((0,ye.U)(Pt=>({pane:Be,plugin:et,i:Pt,panes:at,originPanes:ft}))))).pipe((0,Ei.d)([]))),(0,Ke.w)(Oe=>(0,cn.D)(Oe.map(({pane:Be,plugin:et,i:at,panes:ft,originPanes:Pt})=>"panel"===Be.contentPlugin?(0,Re.of)({pane:Be,plugin:et,i:at,panes:ft,originPanes:Pt,f:{type:"panelpage",panelpage:at}}):this.formlyHandlerHelper.buildFieldConfig(at,new Map([["panes",[...ft&&Array.isArray(ft)?ft:[],...Pt&&Array.isArray(Pt)?Pt:[]]],["contexts",this.contexts]])).pipe((0,ye.U)(Rt=>({pane:Be,plugin:et,i:at,f:Rt,panes:ft,originPanes:Pt})),(0,hn.q)(1)))).pipe((0,Ei.d)([]),(0,hn.q)(1))),(0,Ke.w)(Oe=>(0,Ln.a)([this.panel$,this.ancestory$,this.contexts$]).pipe((0,ye.U)(([Be,et,at])=>({groups:Oe,panel:Be,ancestory:et,contexts:at})))),(0,ee.b)(({groups:Oe,panel:Be,ancestory:et,contexts:at})=>{this.fields=[{key:Be.name&&""!==Be.name?Be.name:"items",type:"repeat",templateOptions:{addText:"Add another"},fieldArray:{fieldGroup:Oe.map(({f:ft,i:Pt,pane:Rt,panes:on,originPanes:an},Vt)=>({key:Pt.key&&""!==Pt.key?Pt.key:Rt.name&&""!==Rt.name?Rt.name:ft.key,wrappers:[...ft.wrappers?ft.wrappers:[],"imaginary-pane"],pane:Rt,panelAncestory:et,indexPosition:Vt,fieldGroup:[{...ft,panelAncestory:et,indexPosition:Vt,templateOptions:{...ft.templateOptions,..."autocomplete"===Pt.type?{filter:this.makeFilterFunction({i:Pt,metadata:new Map([["panes",[...on&&Array.isArray(on)?on:[],...an&&Array.isArray(an)?an:[]]],["contexts",at]])})}:{}}}]}))},hooks:{onInit:ft=>ft.formControl.valueChanges.pipe((0,xs.x)(),(0,ee.b)(Pt=>console.log(Pt)))}}]})).subscribe(),this.forwardStateToForm=(0,Ln.a)([this.pageBuilderFacade.getPageInfo$,this.panel$,this.ancestory$,this.init$]).pipe((0,ye.U)(([Oe,Be,et])=>({p:Oe,panel:Be,ancestory:et})),(0,Ke.w)(({p:Oe,panel:Be,ancestory:et})=>this.panelPageStateService.collection$.pipe((0,Et.Ys)(this.paneStateService.selectById({id:Oe.id})),(0,ye.U)(at=>new pa(at||{id:Oe.id,panels:[]})),(0,ee.b)(at=>{const ft="$."+et.map((on,an)=>`${(an+1)%2==0?"panes":(0===an?"":"nestedPage.")+"panels"}[${on}]`).join("."),Pt=(0,Ro.JSONPath)({path:ft,json:at})[0];new di({id:"",title:"",name:"",layoutType:"",displayType:"",gridItems:[],layoutSetting:void 0,rowSettings:void 0,panels:[new uo({label:"",name:"",settings:void 0,stylePlugin:"",columnSetting:void 0,panes:Be.panes})]}),this.rebuildPanel({panel:Be,panelState:Pt}).subscribe(on=>{console.log("rebuilt panel",on),this.formStateConverter.convertPanelToForm({panel:Pt||new Zl,panel2:on,ancestory:et}).subscribe(an=>{const Vt=this.controlContainer.control.get("panes");this.formGroupConverter.makeFormGroupFromPanel(on,an).subscribe(At=>{Vt.clear();const $t=At.get("panes"),_n=$t.length;for(let Wn=0;Wn<_n;Wn++)Vt.push($t.at(Wn))})})})})))).subscribe(),this.populateDefaultValues=(0,Ln.a)([this.settings$.pipe((0,ye.U)(Oe=>Oe?new sH(this.attributeSerializer.deserializeAsObject(Oe)):void 0)),this.resolvedContext$,this.panel$]).pipe((0,ye.U)(([Oe,Be,et])=>({s:Oe,rc:Be,p:et})),(0,ye.U)(({s:Oe,rc:Be,p:et})=>Be&&Oe&&Oe.valuesMapping&&""!==Oe.valuesMapping.trim()?{items:(0,Ro.JSONPath)({path:`$.${Oe.valuesMapping}.*`,json:Be}),s:Oe,p:et}:{items:[],p:et}),(0,ee.b)(({items:Oe,p:Be})=>{const et=Oe.length,at=[],ft=Be.name&&""!==Be.name?Be.name:"items";for(let Pt=0;Pt<et;Pt++){const Rt={};Object.keys(Oe[Pt]).forEach(an=>Rt[an]={value:Oe[Pt][an]}),at.push(Rt)}this.model={[ft]:at}})).subscribe(),this.panelPageStateService=he.getEntityCollectionService("PanelPageState")}set settings(e){this.settings$.next(e)}set panes(e){this.panes$.next(e)}set panel(e){this.panel$.next(e)}set originPanes(e){this.originPanes$.next(e)}set ancestory(e){this.ancestory$.next(e)}set contexts(e){this.contexts$.next(e)}set resolvedContext(e){this.resolvedContext$.next(e)}ngOnInit(){this.init$.next(void 0)}makeFilterFunction({i:e,metadata:n}){const a=n.get("panes").find(s=>s.name===e.datasourceBinding.id);return({term:s})=>(0,Re.of)([]).pipe((0,Ke.w)(()=>Gn(()=>!!e.datasourceBinding,e.datasourceBinding?this.panelResolver.dataPanes(n.get("panes")).pipe((0,Ke.w)(c=>a?this.datasourceHandler.fetchDynamicData(a.settings,new Map([...n,["dataPanes",c],["inputparams",new Map([["term",new lr({flags:[],mapping:new kg({value:s,testValue:s,type:"static",context:void 0})})]])]])):(0,Re.of)([])),(0,ye.U)(c=>c.results)):(0,Re.of)([]),e.datasourceBinding?(0,Re.of)([]):this.urlGeneratorService.getUrl(e.rest.url,e.rest.params,n).pipe((0,Ke.w)(c=>this.datasourceApi.getData(`${c}`))))),(0,ye.U)(c=>e.datasourceOptions&&""!==e.datasourceOptions.query?(0,Ro.JSONPath)({path:e.datasourceOptions.query,json:c}):c),(0,Ke.w)(c=>this.formlyHandlerHelper.mapDataOptions(e,c)))}rebuildPanel({panel:e,panelState:n}){return(0,cn.D)(n?n.panes.map((a,s)=>"panel"===e.panes[s].contentPlugin?this.rebuildFromPanelPage({panelPage:new di(this.attributeSerializer.deserializeAsObject(e.panes[s].settings)),pane:e.panes[s],panelPageState:n&&n.panes[s]?n.panes[s].nestedPage:void 0}):(0,Re.of)(e.panes[s])):[]).pipe((0,ye.U)(a=>new di({id:"",title:"",name:"",layoutType:"",displayType:"",gridItems:[],layoutSetting:void 0,rowSettings:void 0,panels:[new uo({label:e.label,name:e.name,settings:void 0,stylePlugin:e.stylePlugin,columnSetting:void 0,panes:a})]})),(0,ye.U)(a=>new uo({...e,panes:n?n.panes.map(()=>new mi({name:e.name,label:e.label,contentPlugin:"panel",nestedPage:a,settings:this.attributeSerializer.serialize(a,"root").attributes})):[]})),(0,Ei.d)(new uo(e)))}rebuildFromPanelPage({panelPageState:e,panelPage:n,pane:a}){return(0,cn.D)(n.panels.map((s,l)=>"formly_repeating"===s.stylePlugin?this.rebuildPanel({panel:s,panelState:e?e.panels[l]:void 0}):(0,Re.of)(s))).pipe((0,ye.U)(s=>new mi({...a,nestedPage:new di({...n,panels:s.map(l=>new uo(l))})})),(0,Ei.d)(new mi({...a,nestedPage:new di(n)})))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(_0),o.\u0275\u0275directiveInject(H_),o.\u0275\u0275directiveInject(Do),o.\u0275\u0275directiveInject(W4),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(q_),o.\u0275\u0275directiveInject(K4),o.\u0275\u0275directiveInject(Kl),o.\u0275\u0275directiveInject(Vh),o.\u0275\u0275directiveInject(Qc),o.\u0275\u0275directiveInject(kd),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(li),o.\u0275\u0275directiveInject(d.gN,8))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-formly-repeating-renderer"]],inputs:{settings:"settings",panes:"panes",panel:"panel",originPanes:"originPanes",ancestory:"ancestory",contexts:"contexts",resolvedContext:"resolvedContext",originMappings:"originMappings"},decls:2,vars:4,consts:[[3,"formGroup"],[3,"form","fields","model"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"formly-form",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.proxyGroup),o.\u0275\u0275advance(1),o.\u0275\u0275property("form",n.proxyGroup)("fields",n.fields)("model",n.model))},directives:[C1,d.JL,d.sg],styles:[""]}),t})(),hH=(()=>{class t{constructor(e,n,a,s){this.data=e,this.dialogRef=n,this.fb=a,this.attributeSerializer=s,this.contexts=[],this.formGroup=this.fb.group({valuesMapping:this.fb.control("")})}ngOnInit(){}submit(){this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(e=>{console.log("formly repeating editor form"),console.log(this.attributeSerializer.convertToGroup(e)),this.data.panelFormGroup.get("settings").push(this.attributeSerializer.convertToGroup(e))})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-formly-repeating-editor"]],decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["matInput","","formControlName","valuesMapping"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Values Mapping"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"button",2),o.\u0275\u0275text(7,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(6),o.\u0275\u0275property("disabled",!n.formGroup.valid))},directives:[Wt.KE,zi.lW,d._Y,d.JL,d.sg,Wt.hX,In.Nt,d.Fj,d.JJ,d.u,Dt.ZT],styles:[""]}),t})(),gH=(()=>{class t extends w1{constructor(e,n,a){super(),this.paneStateService=e,this.cpm=n,this.valueChange$=new M.x,this.valueChangeSub=this.valueChange$.pipe((0,Hn.b)(1e3),(0,ye.U)(s=>({state:{value:s.value}})),(0,Ke.w)(({state:s})=>this.cpm.getPlugin(this.field.pane.contentPlugin).pipe((0,ye.U)(l=>({state:s,plugin:l})))),(0,Ke.w)(({state:s,plugin:l})=>this.paneStateService.mergeState({state:s,ancestory:this.panelStateAncestory,settings:this.field.pane.settings,plugin:l})),(0,ee.b)(({pageState:s})=>{this.panelPageStateService.upsert(s)})).subscribe(),this.panelPageStateService=a.getEntityCollectionService("PanelPageState")}get panelStateAncestory(){return[...this.field.panelAncestory,+this.field.parent.key,0,this.field.indexPosition]}ngOnInit(){this.formControl.valueChanges.subscribe(e=>{this.valueChange$.next(e)})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(H_),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-formly-field-wrapper"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["fieldComponent",""]],template:function(e,n){1&e&&o.\u0275\u0275elementContainer(0,null,0)},styles:[""]}),t})(),vH=(()=>{class t extends na{constructor(){super(...arguments),this.ancestoryWithSelf=[]}ngOnInit(){super.ngOnInit(),this.panelPage=this.field.panelpage,this.ancestoryWithSelf=[...this.field.panelAncestory,+this.field.parent.parent.key,0,this.field.indexPosition]}ngAfterViewInit(){super.ngAfterViewInit()}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-formly-panel-page"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:4,consts:[[3,"panelPage","nested","formControl","ancestory"]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"classifieds-ui-panel-page",0),2&e&&o.\u0275\u0275property("panelPage",n.panelPage)("nested",!0)("formControl",n.formControl)("ancestory",n.ancestoryWithSelf)},directives:[Zr,d.JJ,d.oH],encapsulation:2}),t})(),yH=(()=>{class t{constructor(e,n,a){e.register((t=>new Gt.ContentPlugin({id:"formly_field",title:"Formly Field",selectionComponent:uH,editorComponent:A1,renderComponent:cH,handler:t}))(n)),a.register(new Wh({id:"formly_repeating",name:"formly_repeating",title:"Formly Repeating",editorComponent:hH,renderComponent:fH}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(jd),o.\u0275\u0275inject(Jc))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[jd],imports:[[x.CommonModule,d.UX,sr.MaterialModule,wl,ga.forChild({types:[{name:"autocomplete",component:k1,wrappers:["form-field"]},{name:"repeat",component:dH},{name:"panelpage",component:vH}],wrappers:[{name:"imaginary-pane",component:gH}]}),L$,z$,Q$,Z$,tH,Gt.ContentModule,WS,Yl,Cw,ev]]}),t})(),I1=(()=>{class t{constructor(e,n){this.fb=e,this.controlContainer=n,this.context$=new m.X(void 0),this.formGroup=this.fb.group({value:this.fb.control("",[d.kI.required])}),this.stateCtrl=this.fb.control(""),this.stateCtrlSub=this.stateCtrl.valueChanges.pipe((0,Hn.b)(250),(0,xs.x)(),(0,$.h)(a=>{try{return JSON.parse(a),!0}catch{return!1}}),(0,ye.U)(a=>JSON.parse(a))).subscribe(a=>{console.log("write state"),console.log(a),this.formGroup.get("value").setValue(a)}),this.onTouched=()=>{}}set context(e){this.context$.next(e)}ngOnInit(){this.context$.subscribe(e=>{this.stateCtrl.setValue(e?JSON.stringify(e.data.value):"")})}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-context-state-form"]],inputs:{context:"context"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:2,vars:2,consts:[[3,"formGroup"],["cols","40","rows","20","required","",3,"formControl"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"textarea",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(1),o.\u0275\u0275property("formControl",n.stateCtrl))},directives:[d.JL,d.sg,d.Fj,d.Q7,d.JJ,d.oH],styles:[""]}),t})(),_H=(()=>{class t{constructor(e,n){this.fb=e,this.controlContainer=n}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",d.kI.required)),this.controlContainer.control.addControl("data",this.fb.control(""))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-context-state-editor"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(I1,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.contextStateFormComp=a.first)}},inputs:{context:"context"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","data",3,"context"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-context-state-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("context",n.context))},directives:[I1,d.JL,d.sg,d.JJ,d.u],styles:[""]}),t})(),P1=(()=>{class t{constructor(e,n){this.attributeSerializer=e,this.es=n}get entityCollectionService(){return this.es.getEntityCollectionService("GlobalState")}resolve(e,n,a){console.log("hookup globalstate"),console.log(n);const c=a&&a.has("name")&&a.get("name")&&null!==a.get("name")&&""!==a.get("name")?a.get("name"):void 0;return c?this.entityCollectionService.collection$.pipe((0,Et.Ys)((f=c,(0,Et.P1)(f=>f.entities,h=>h[f]?h[f]:void 0))),(0,ye.U)(f=>f?this.attributeSerializer.deserialize(f.value):n.value?n.value:{}),(0,ye.U)(f=>f.root?f.root:f),(0,ee.b)(f=>{console.log("resolve globalstate"),console.log(f)})):(0,Re.of)(n.value?n.value:{}).pipe((0,ee.b)(f=>{console.log("resolve default globalstate"),console.log(f)}));var f}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(li))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class xH{constructor(r){r&&(this.id=r.id,this.value=new Ct.AttributeValue(r.value))}}const wH={GlobalState:{entityName:"GlobalState"}};let SH=(()=>{class t{constructor(e,n,a,s,l,c,f){e.registerMetadataMap(wH),n.registerService("GlobalState",new mn.NoopDataService("GlobalState")),a.register((t=>{const r=new Ct.AttributeValue;return new nl({id:"state",name:"state",title:"State",baseObject:r,resolver:t,editorComponent:_H})})(f)),c.register(((t,r)=>new Gh({id:"state",title:"State",build:()=>{Xc.prototype.writeState=e=>new Promise(n=>{t.getEntityCollectionService("GlobalState").upsert(new xH({id:e.id,value:r.serialize(e.value,"root")})).pipe((0,ee.b)(s=>n(s))).subscribe()})}}))(s,l))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(pr),o.\u0275\u0275inject(Hr),o.\u0275\u0275inject(Ql),o.\u0275\u0275inject(li),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(bd),o.\u0275\u0275inject(P1))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[P1],imports:[[x.CommonModule,d.u5,d.UX]]}),t})();var EH=S(4382);function Oo(t){return new Promise((r,e)=>{t.oncomplete=t.onsuccess=()=>r(t.result),t.onabort=t.onerror=()=>e(t.error)})}let x0;function Ha(){return x0||(x0=function IH(t,r){const e=function AH(){var r;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};r=setInterval(n,100),n()}).finally(function(){return clearInterval(r)}):Promise.resolve()}().then(()=>{const n=indexedDB.open(t);return n.onupgradeneeded=()=>n.result.createObjectStore(r),Oo(n)});return(n,a)=>e.then(s=>a(s.transaction(r,n).objectStore(r)))}("keyval-store","keyval")),x0}function F1(t,r,e=Ha()){return e("readwrite",n=>(n.put(r,t),Oo(n.transaction)))}const DH=t=>new Kc({id:"idb_keyval",title:"Idb Keyval",create:({object:r,identity:e,params:n,parentObject:a})=>(0,Re.of)({success:!1}).pipe((0,Ke.w)(()=>e({object:r,parentObject:a}).pipe((0,ye.U)(({identity:s})=>({identity:s})))),(0,Ke.w)(({identity:s})=>n&&0!==Object.keys(n).length?(0,cn.D)(Object.keys(n).map(l=>t.paramValue(n[l],new Map).pipe((0,ye.U)(c=>({[l]:c}))))).pipe((0,ye.U)(l=>l.reduce((c,f)=>({...c,...f}),{})),(0,ye.U)(l=>({identity:s,options:l}))):(0,Re.of)({identity:s,options:{}})),(0,ye.U)(({identity:s,options:l})=>({name:l.prefix+s})),(0,Ke.w)(({name:s})=>new y.y(l=>{F1(s,r).then(c=>{console.log("idb write suceeded"),console.log(c),l.next({success:!0}),l.complete()}).catch(c=>{console.log("idb write failed"),console.log(c),l.next({success:!1}),l.complete()})}))),read:({})=>(0,Re.of)({success:!1}),update:({object:r,identity:e,params:n,parentObject:a})=>(0,Re.of)({success:!1}).pipe((0,Ke.w)(()=>e({object:r,parentObject:a}).pipe((0,ye.U)(({identity:s})=>({identity:s})))),(0,Ke.w)(({identity:s})=>n&&0!==Object.keys(n).length?(0,cn.D)(Object.keys(n).map(l=>t.paramValue(n[l],new Map).pipe((0,ye.U)(c=>({[l]:c}))))).pipe((0,ye.U)(l=>l.reduce((c,f)=>({...c,...f}),{})),(0,ye.U)(l=>({identity:s,options:l}))):(0,Re.of)({identity:s,options:{}})),(0,ye.U)(({identity:s,options:l})=>({name:l.prefix+s})),(0,Ke.w)(({name:s})=>new y.y(l=>{F1(s,r).then(c=>{console.log("idb write suceeded"),console.log(c),l.next({success:!0}),l.complete()}).catch(c=>{console.log("idb write failed"),console.log(c),l.next({success:!1}),l.complete()})}))),delete:({})=>(0,Re.of)({success:!1}),query:({params:r,rule:e,identity:n})=>t.paramValues(new Map(Object.keys(r).map(a=>[a,r[a]]))).pipe((0,Ke.w)(a=>new y.y(s=>{(function RH(t=Ha()){return t("readonly",r=>{if(r.getAllKeys)return Oo(r.getAllKeys());const e=[];return function b0(t,r){return t.openCursor().onsuccess=function(){!this.result||(r(this.result),this.result.continue())},Oo(t.transaction)}(r,n=>e.push(n.key)).then(()=>e)})})().then(l=>l.filter(c=>0===`${c}`.indexOf(a.get("prefix")))).then(l=>function FH(t,r=Ha()){return r("readonly",e=>Promise.all(t.map(n=>Oo(e.get(n)))))}(l)).then(l=>{s.next({entities:l,success:!0}),s.complete()})})),(0,Ke.w)(a=>e?new y.y(s=>{const l=new Ed.Engine;l.addOperator("startsWith",(c,f)=>"string"==typeof f&&"string"==typeof c&&0===f.indexOf(c)),l.addOperator("term||wildcard",(c,f)=>{const h=JSON.parse(decodeURIComponent(f)),g=(0,Ro.JSONPath)({path:"$.term.*.value.@string()",json:h,flatten:!0});return void 0!==h.wildcard||h.term&&0!==g.lengh&&g[0]===c}),l.addRule(e),l.addFact("identity",(c,f)=>new y.y(h=>{f.factValue("entity").then(g=>n({object:g}).pipe((0,ye.U)(({identity:I})=>I)).toPromise()).then(g=>{h.next(g),h.complete()})}).toPromise(),{cache:!1}),(0,Re.of)(...a.entities).pipe((0,Ra.b)(c=>new y.y(f=>{l.removeFact("entity"),l.addFact("entity",c,{cache:!1}),l.run().then(h=>{f.next([c,h.events.findIndex(g=>"visible"===g.type)>-1]),f.complete()})})),(0,$.h)(([c,f])=>f),(0,ye.U)(([c])=>c),function TH(t,r){return(0,ls.e)((0,EH.U)(t,r,arguments.length>=2,!1,!0))}((c,f)=>[...c,f],[]),(0,Ei.d)([])).subscribe(c=>{s.next({...a,entities:c}),s.complete()})}):(0,Re.of)(a)))}),OH=({data:t,key:r})=>e=>()=>new y.y(n=>{(0,x.isPlatformBrowser)(e)?function PH(t,r=Ha()){return r("readwrite",e=>(t.forEach(n=>e.put(n[1],n[0])),Oo(e.transaction)))}(t.map(s=>[r({data:s}),s])).then(()=>{console.log("data loaded into idb"),n.next(),n.complete()}).catch(()=>{console.log("data load into idb failure"),n.next(),n.complete()}):(n.next(),n.complete())});let MH=(()=>{class t{constructor(e,n){e.register(DH(n))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(il),o.\u0275\u0275inject(tl))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[$h]]}),t})(),LH=(()=>{class t{constructor(e,n,a,s){this.authFacade=n,this.router=a,this.title="CarbonIntense",this.menuClicked=new o.EventEmitter,(0,x.isPlatformBrowser)(e)&&(bridge=s)}ngOnInit(){this.authFacade.getUser$.subscribe(e=>{this.isAuthenticated=!!e})}login(){this.authFacade.login()}menuClick(){this.menuClicked.emit()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.PLATFORM_ID),o.\u0275\u0275directiveInject(kr),o.\u0275\u0275directiveInject(zn.Router),o.\u0275\u0275directiveInject(Xc))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["app-root"]],outputs:{menuClicked:"menuClicked"},decls:3,vars:0,consts:[["fxLayout","column","fxFill",""],[1,"outlet-wrapper"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275element(2,"router-outlet"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())},directives:[ue,Bn,zn.RouterOutlet],styles:[".outlet-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}"]}),t})();var NH=S(5242);const qa_production=!0,qa_site="carbonintense",qa_apiGatewaySettings={endpointUrl:"https://edge.hedge.earth/emissionless/rollthecloudinc/carbonintense-objects-prod/shapeshifter"},qa_mediaSettings={endpointUrl:"https://edge.hedge.earth/emissionless/media",cloudinaryUrl:"https://api.cloudinary.com/v1_1/dj4vvkgzw",uploadPreset:"i0hm4opm",imageUrl:"https://edge.hedge.earth/emissionless/carbonintense",bucket:"classifieds-ui-prod",prefix:"media/"},qa_cognitoSettings={identityPoolId:"us-east-1:51af715f-31cf-4200-b43b-6c1ea1b62f5e",region:"us-east-1",userPoolId:"us-east-1_ObsPF5JdM"},qa_panelsSettings={openSearchDomain:"search-classifieds-ui-prod-o5unofrr3c4qb3ykfrxebh2e4a",s3Bucket:"classifieds-ui-prod",objectsRootUrl:"https://rollthecloudinc.github.io/carbonintense-objects-prod"},qa_alienaliasSettings={openSearchDomain:"search-classifieds-ui-prod-o5unofrr3c4qb3ykfrxebh2e4a"},qa_rumSettings={appId:"",guestRoleArn:"",identityPoolId:"",region:""},qa_clientSettings={authority:"https://sso.druidcloud.io",client_id:"37lke0kuqac07fs1mk9mp2h471",redirect_uri:"https://carbonintense.world/auth-callback",silent_redirect_uri:"https://carbonintense.world/silent-refresh.html",response_type:"code",scope:"openid profile aws.cognito.signin.user.admin ads_api/ads_api taxonomy_api/taxonomy_api chat/chat media_api/media_api profiles_api/profiles_api",filterProtocolClaims:!0,loadUserInfo:!0,automaticSilentRenew:!0,stateStore:void 0,userStore:void 0,metadata:{issuer:"https://cognito-idp.us-east-1.amazonaws.com/us-east-1_ObsPF5JdM",authorization_endpoint:"https://sso.druidcloud.io/oauth2/authorize",userinfo_endpoint:"https://sso.druidcloud.io/oauth2/userInfo",end_session_endpoint:"https://sso.druidcloud.io/logout",token_endpoint:"https://sso.druidcloud.io/oauth2/token",jwks_uri:"https://sso.druidcloud.io/us-east-1_z8PhK3D8V"},signingKeys:[{alg:"RS256",e:"AQAB",kid:"zObBQ6QfR5HnKAJd9HhoObmJqojropaz54zqf2+1zqk=",kty:"RSA",n:"o_K4yCMajjivLFuH48oM9u2m5OXg-hAJ7wRv97lpm0o_ZZAM2rY6oFwwL7lVGVCKcH048mifadzadH1Jooa6VGPq6I4zFOey0cbMAwMCyNR-rzHN0jMlHyBEExFSgtAWF1Q0u7j28F3F8LX2zEhyaPFC7ir42e1q2zyQ6Oh8kutRQm4pkrWjajrpmOI-KnkYjpmyFOFdgDYNgdFIduGhT0kZNVPPxyoOsZ6nuIJOZP4o7yTa9vJSRIdtD9k17tzFMympQoW9ZVccVMomey1iQKinHmRkcPwVFjiU8H1gSWkfdv3WsnJPNzGo2e3gAEF8d-JlRQ_XhZpAOi1_NSaGfQ",use:"sig"},{alg:"RS256",e:"AQAB",kid:"ZxSNiLaZMDgs5ev5t0foAVvoY3qvghD8MltmUceD/0I=",kty:"RSA",n:"lzC78mzfHoxtE5KVfAvkbVUw-X6tUrBAIcVujFpdGF8He0FlWxctGnisByT1s00mdAZ44YUFSDbx4gArHRRAYlYgMlI3njFKuoRGcHIkL1w4fQcisij3OM8nWdZJXdNSueb1SzhoR5xsDhPZnRGMMs3f0QohA_gCQ0Z51cSUN0EadUBW66dCT3lVdeSwnc8jwwbTas-mKY5958u9kT9fdj69F_9HwTfaFKyYu3nnO04E2InoPD_K4xZ4_oDfCVyKyjB2HLVtwhxfx6ly4Wh_p-McXOg75WcfPgSQg6IopJ5m9AteTiLDld9kHrey0KvH4K3Sztc90SvZOiV4AWHrKQ",use:"sig"}]},BH={router:function WB(t,r){const e=r;switch(e.type){case v_:case __:case y_:return{state:e.payload.routerState,navigationId:e.payload.event.id};default:return t}}},jH=[];class R1{constructor(r){r&&(this.query=r.query)}}let zH=(()=>{class t{constructor(e,n){this.fb=e,this.attributeSerializer=n,this.settings$=new m.X(void 0),this.formGroup=this.fb.group({query:this.fb.control("",[d.kI.required])}),this.settingsSub=this.settings$.pipe((0,ye.U)(a=>a?new R1(this.attributeSerializer.deserializeAsObject(a)):void 0)).subscribe(a=>{a?this.formGroup.get("query").setValue(a.query):this.formGroup.get("query").setValue("")}),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}ngOnInit(){}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-select-source-form"]],inputs:{settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:5,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","query","required",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Query"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(4,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("formGroup",n.formGroup)},directives:[Wt.KE,d.JL,d.sg,Wt.hX,In.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),t})(),UH=(()=>{class t{constructor(e){this.controlContainer=e,this.settings=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-transform-select"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-select-source-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",n.settings))},directives:[zH,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})(),VH=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-transform-merge"]],decls:2,vars:0,template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"transform merge"),o.\u0275\u0275elementEnd())},styles:[""]}),t})();const GH=t=>new bs({id:"select",title:"Select",editor:UH,fetch:({settings:r,dataset:e})=>Gn(()=>!!e,(0,Re.of)(e).pipe((0,ye.U)(()=>new R1(t.deserializeAsObject(r))),(0,ye.U)(n=>new qn({results:(0,Ro.JSONPath)({path:n.query,json:e.results})}))),(0,Re.of)(new qn))});let HH=(()=>{class t{constructor(e,n){[GH(n),new bs({id:"merge",title:"Merge",editor:VH,fetch:({})=>(0,Re.of)(new qn)})].forEach(a=>e.register(a))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.u5,d.UX,sr.MaterialModule,Yl]]}),t})(),qH=(()=>{class t{constructor(e,n){this.fb=e,this.attributeSerializer=n,this.contexts=[],this.settings$=new m.X(void 0),this.paramValues$=new m.X([]),this.formGroup=this.fb.group({entityName:this.fb.control(""),queryString:this.fb.control(""),params:this.fb.control([])}),this.settingsSub=this.settings$.pipe((0,ye.U)(a=>a?this.attributeSerializer.deserializeAsObject(a):void 0)).subscribe(a=>{a?(this.formGroup.get("entityName").setValue(a.entityName),this.formGroup.get("queryString").setValue(a.queryString)):(this.formGroup.get("entityName").setValue(""),this.formGroup.get("queryString").setValue(""))}),this.queryStringChangeSub=this.formGroup.get("queryString").valueChanges.pipe((0,Hn.b)(500)).subscribe(a=>{const s=Fo.parse("?"+a);this.paramsParsed=s}),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}ngOnInit(){}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:this.formGroup.errors}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-entity-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:8,vars:4,consts:[[3,"formGroup"],["matInput","","placeholder","Name","formControlName","entityName","required",""],["matInput","","placeholder","Query String","formControlName","queryString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275element(3,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div"),o.\u0275\u0275elementStart(5,"mat-form-field"),o.\u0275\u0275element(6,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(7,"classifieds-ui-params-form",3),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(7),o.\u0275\u0275property("params",n.paramsParsed)("paramValues",n.paramValues$.value)("contexts",n.contexts))},directives:[Wt.KE,Bh,d.JL,d.sg,In.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),t})(),D1=(()=>{class t{constructor(e){this.controlContainer=e,this.settings=[],this.contexts=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-entity-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-entity-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",n.settings)("contexts",n.contexts))},directives:[qH,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})();class O1{constructor(r){this.params=[],r&&(this.entityName=r.entityName,this.queryString=r.queryString?r.queryString:"",r.params&&Array.isArray(r.params)&&(this.params=r.params.map(e=>new lr(e))))}}let KH=(()=>{class t{constructor(e,n,a,s,l,c){e.register(((t,r,e,n)=>new bs({id:"entity",title:"Entity",editor:D1,fetch:({settings:a,metadata:s})=>(0,Re.of)(new qn).pipe((0,ye.U)(()=>r.deserializeAsObject(a)),(0,ye.U)(l=>new O1(l)),(0,Ke.w)(l=>e.getUrl("?"+l.queryString,l.params,s).pipe((0,ye.U)(c=>({e:l,queryString:c})))),(0,ye.U)(({e:l,queryString:c})=>({e:l,queryString:c.substr(1)})),(0,Ke.w)(({e:l,queryString:c})=>c&&""!==c?n.getEntityCollectionService(l.entityName).getWithQuery(c):n.getEntityCollectionService(l.entityName).getAll()),(0,ye.U)(l=>new qn({results:l}))),editorOptions:()=>(0,Re.of)(new Ig({fullscreen:!0})),getBindings:({settings:a})=>(0,Re.of)([]).pipe((0,ye.U)(()=>r.deserializeAsObject(a)),(0,ye.U)(l=>new O1(l)),(0,Ke.w)(l=>t.extractContexts(l.params)),(0,ye.U)(l=>l.map(c=>new Gt.ContentBinding({id:c,type:"context"}))))}))(a,s,l,c)),n.register(new Lw({id:"entity",title:"Entity",editor:D1,send:t=>(0,Re.of)(new F_({}))}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(Pg),o.\u0275\u0275inject(P_),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Kl),o.\u0275\u0275inject(li))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,d.u5,sr.MaterialModule,wd,Wl]]}),t})(),YH=(()=>{class t{constructor(e){this.fb=e,this.contexts=[],this.settings$=new m.X(void 0),this.datasource$=new m.X(void 0),this.formGroup=this.fb.group({}),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}ngOnInit(){}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:this.formGroup.errors}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-loop-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:1,vars:1,consts:[[3,"formGroup"]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"div",0),2&e&&o.\u0275\u0275property("formGroup",n.formGroup)},directives:[d.JL,d.sg],styles:[""]}),t})(),QH=(()=>{class t{constructor(e){this.controlContainer=e,this.settings=[],this.contexts=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-loop-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-loop-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",n.settings)("contexts",n.contexts))},directives:[YH,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})();class JH{constructor(r){}}const ZH=(t,r)=>new bs({id:"loop",title:"loop",editor:QH,fetch:({settings:e,dataset:n,datasource:a,metadata:s,datasources:l})=>(0,Re.of)(new qn).pipe((0,ye.U)(()=>t.deserializeAsObject(e)),(0,ye.U)(c=>c?new JH(c):void 0),(0,Ke.w)(c=>(0,cn.D)(n?n.results.map(f=>r.evalDatasource({datasource:new qc({plugin:"data",renderer:a.renderer,settings:t.serialize({data:JSON.stringify(n.results)},"root").attributes}),datasources:l,metadata:new Map([...s?Array.from(s).filter(([h])=>"contexts"!==h):[],["contexts",[...s.has("contexts")&&Array.isArray(s.get("contexts"))?s.get("contexts").filter(h=>"_root"!==h.name):[],new Jr({name:"_root",adaptor:"data",data:f})]]])}).pipe((0,hn.q)(1))):[]).pipe((0,ye.U)(f=>new qn({results:f.reduce((h,g)=>[...h,...g.results],[])})),(0,Ei.d)(new qn({results:[]})))))});let eq=(()=>{class t{constructor(e,n,a){[ZH(n,a)].forEach(s=>e.register(s))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Zo),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Aw))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.UX,sr.MaterialModule,wd,Yl]]}),t})();function tq(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",6),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.value.title)}}function nq(t,r){}function iq(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275element(1,"druid-ordain-validation-validator",4),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().deleteValidator$.next(s)}),o.\u0275\u0275text(3,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.index,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("formControlName",e)("validation",n.validation$.value.validators[e])}}class al extends ln.Plugin{constructor(r){super(r),r&&(this.editor=r.editor,this.errorMessage=r.errorMessage,this.builder=r.builder)}}class rq{constructor(r){r&&(this.name=r.name,this.validator=r.validator,this.overrideErrorMessage=r.overrideErrorMessage,r.paramSettings&&"string"!=typeof r.paramSettings&&(this.paramSettings=new oq(r.paramSettings)))}}class oq{constructor(r){this.params=[],r&&(this.paramsString=r.paramsString,r.params&&Array.isArray(r.params)&&(this.params=r.params.map(e=>new lr(e))))}}class _p{constructor(r){r&&Array.isArray(r.validators)&&(this.validators=r.validators.map(e=>new rq(e)))}}let M1=(()=>{class t{constructor(e){this.viewContainerRef=e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","druidValidationRendererHost",""]]}),t})(),aq=(()=>{class t{constructor(e){this.fb=e,this.contexts=[],this.settings$=new m.X(void 0),this.afterViewInit$=new M.x,this.paramValues$=new m.X([]),this.formGroup=this.fb.group({paramsString:this.fb.control(""),params:this.fb.control([])}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,Hn.b)(500)).subscribe(n=>{const a=Fo.parse("?"+n);this.paramsParsed=a}),this.settingsSub=this.settings$.pipe((0,ee.b)(n=>{n&&this.formGroup.get("paramsString").setValue(n.paramsString?n.paramsString:"")})).subscribe(),this.settingsParamsSub=(0,Ln.a)([this.settings$,this.formGroup.get("paramsString").valueChanges]).pipe((0,$.h)(([n])=>void 0!==n),(0,ui.g)(1),(0,ee.b)(([n])=>this.paramValues$.next(n.params))).subscribe(),this.onTouched=()=>{}}set settings(e){this.settings$.next(e)}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:this.formGroup.errors}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-ordain-validation-params-editor-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:6,vars:4,consts:[[3,"formGroup"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275element(4,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"classifieds-ui-params-form",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(5),o.\u0275\u0275property("params",n.paramsParsed)("paramValues",n.paramValues$.value)("contexts",n.contexts))},directives:[Wt.KE,Bh,d.JL,d.sg,In.Nt,d.Fj,d.JJ,d.u],styles:[""]}),t})(),sl=(()=>{class t{constructor(e){this.controlContainer=e,this.settings=[],this.contexts=[]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-ordain-validation-params-editor"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","paramSettings",3,"settings","contexts"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"druid-ordain-validation-params-editor-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",n.settings)("contexts",n.contexts))},directives:[aq,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),t})();class sq{constructor(r,e){this.pluginManager=r,this.formsValidationUtils=e}loadPlugins(r,e=[]){return(0,Re.of)(!1).pipe((0,ee.b)(()=>this.pluginManager.register(this.makeRequired())),(0,ee.b)(()=>this.pluginManager.register(this.makeRequiredTrue())),(0,ee.b)(()=>{this.pluginManager.register(this.makeMin()),this.pluginManager.register(this.makeMax()),this.pluginManager.register(this.makeMinLength()),this.pluginManager.register(this.makeMaxLength())}),(0,ye.U)(()=>this.pluginManager.register(this.makeEmail())),(0,ye.U)(()=>this.pluginManager.register(this.makePattern())),(0,ye.U)(()=>this.pluginManager.register(this.nullValidator())),(0,ye.U)(()=>!0))}makeRequired(){return new al({id:"required",title:"Required",errorMessage:"Field is required",editor:sl,builder:({serialized:r})=>(0,Re.of)(e=>(0,Re.of)(d.kI.required(this.formsValidationUtils.rebuildControl({c:e,serialized:r}))))})}makeRequiredTrue(){return new al({id:"required_true",title:"Required True",errorMessage:"Field is required",editor:sl,builder:({serialized:r})=>(0,Re.of)(e=>(0,Re.of)(d.kI.requiredTrue(this.formsValidationUtils.rebuildControl({c:e,serialized:r}))))})}makeEmail(){return new al({id:"email",title:"Email",errorMessage:"Invalid email",editor:sl,builder:({serialized:r})=>(0,Re.of)(e=>(0,Re.of)(d.kI.email(this.formsValidationUtils.rebuildControl({c:e,serialized:r}))))})}nullValidator(){return new al({id:"null",title:"Null",errorMessage:"nota",editor:sl,builder:({serialized:r})=>(0,Re.of)(e=>(0,Re.of)(d.kI.nullValidator(this.formsValidationUtils.rebuildControl({c:e,serialized:r}))))})}makeMin(){return new al({id:"min",title:"Min",errorMessage:"Field min [.min]",editor:sl,builder:({v:r,serialized:e})=>(0,Re.of)(n=>this.formsValidationUtils.resolveParams({v:r}).pipe((0,ye.U)(a=>d.kI.min(+a.min)(this.formsValidationUtils.rebuildControl({c:n,serialized:e})))))})}makeMax(){return new al({id:"max",title:"Max",errorMessage:"Field max [.max]",editor:sl,builder:({v:r,serialized:e})=>(0,Re.of)(n=>this.formsValidationUtils.resolveParams({v:r}).pipe((0,ye.U)(a=>d.kI.max(+a.max)(this.formsValidationUtils.rebuildControl({c:n,serialized:e})))))})}makeMinLength(){return new al({id:"min_length",title:"Min Length",errorMessage:"minimum of [.min] characters",editor:sl,builder:({v:r,serialized:e})=>(0,Re.of)(n=>this.formsValidationUtils.resolveParams({v:r}).pipe((0,ye.U)(a=>d.kI.minLength(+a.minLength)(this.formsValidationUtils.rebuildControl({c:n,serialized:e})))))})}makeMaxLength(){return new al({id:"max_length",title:"Max Length",errorMessage:"Maximum of [.max] characters",editor:sl,builder:({v:r,serialized:e})=>(0,Re.of)(n=>this.formsValidationUtils.resolveParams({v:r}).pipe((0,ye.U)(a=>d.kI.maxLength(+a.maxLength)(this.formsValidationUtils.rebuildControl({c:n,serialized:e})))))})}makePattern(){return new al({id:"pattern",title:"Pattern",errorMessage:"Must match pattern",editor:sl,builder:({v:r,serialized:e})=>(0,Re.of)(n=>this.formsValidationUtils.resolveParams({v:r}).pipe((0,ye.U)(a=>d.kI.pattern(new RegExp(a.pattern))(this.formsValidationUtils.rebuildControl({c:n,serialized:e})))))})}}let lq=(()=>{class t{constructor(e,n){this.paramEvaluatorService=e,this.attributesSerializerService=n}resolveParams({v:e}){return(0,Re.of)({}).pipe((0,ye.U)(()=>({paramNames:e.paramSettings.paramsString?e.paramSettings.paramsString.split("&").filter(n=>-1!==n.indexOf("=:")).map(n=>n.split("=",2)[1].substr(1)):[]})),(0,Ke.w)(({paramNames:n})=>this.paramEvaluatorService.paramValues(e.paramSettings.params.reduce((a,s,l)=>new Map([...a,[n[l],s]]),new Map)).pipe((0,ye.U)(a=>Array.from(a).reduce((s,[l,c])=>({...s,[l]:c}),{})))))}rebuildControl({c:e,serialized:n}){return n?new d.NI(this.attributesSerializerService.deserializeAsObject(e.value).value):e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(tl),o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Mo=(()=>{class t extends ln.BasePluginManager{constructor(e,n,a){super(n,a),this.addDiscovery(new sq(this,e))}pluginDef(){return(0,Re.of)(new ln.PluginDef({name:"validation"}))}discovery(){super.discovery()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(lq),o.\u0275\u0275inject(ln.PluginConfigurationManager),o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),cq=(()=>{class t{constructor(e,n,a){this.fb=e,this.vpm=n,this.componentFactoryResolver=a,this.contexts=[],this.settings$=new m.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[d.kI.required]),validator:this.fb.control("",[d.kI.required]),overrideErrorMessage:this.fb.control(""),paramSettings:this.fb.control("")}),this.validationPlugins$=this.vpm.getPlugins(),this.componentRef$=new m.X(void 0),this.afterViewInit$=new M.x,this.onInit$=new M.x,this.validation$=new m.X(void 0),this.validatorChangeSub=this.formGroup.get("validator").valueChanges.pipe((0,ee.b)(s=>{console.log("validator change",s)})).subscribe(),this.validatorSub=(0,Ln.a)([this.formGroup.get("validator").valueChanges,this.afterViewInit$]).pipe((0,ye.U)(([s])=>s),(0,Ke.w)(s=>s&&""!==s?this.vpm.getPlugin(s):(0,Re.of)(void 0)),(0,ee.b)(s=>{s&&this.renderValidation(s)})).subscribe(),this.validationSub=this.validation$.pipe((0,ee.b)(s=>{s?(this.formGroup.get("name").setValue(s.name),this.formGroup.get("validator").setValue(s.validator),this.formGroup.get("overrideErrorMessage").setValue(s.overrideErrorMessage),setTimeout(()=>this.formGroup.get("paramSettings").setValue(s.paramSettings))):(this.formGroup.get("name").setValue(""),this.formGroup.get("overrideErrorMessage").setValue(""),this.formGroup.get("validator").setValue(""))})).subscribe(),this.contextForwardingSub=this.componentRef$.pipe((0,$.h)(s=>!!s)).subscribe(s=>{s.instance.contexts=this.contexts,s.instance.settings=this.validation$.value?this.validation$.value.paramSettings:void 0}),this.onTouched=()=>{}}set validation(e){this.validation$.next(e)}ngOnInit(){this.onInit$.next(void 0),this.onInit$.complete()}ngAfterViewInit(){this.afterViewInit$.next(void 0),this.afterViewInit$.complete()}writeValue(e){e&&this.formGroup.setValue({...e,settings:e.settings?e.settings:""},{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}renderValidation(e){const n=this.componentFactoryResolver.resolveComponentFactory(e.editor),a=this.validationHost.viewContainerRef;a.clear(),this.componentRef$.next(a.createComponent(n))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-ordain-validation-validator"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(M1,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.validationHost=a.first)}},inputs:{contexts:"contexts",validation:"validation"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:19,vars:6,consts:[[3,"formGroup"],["matInput","","type","text","formControlName","name"],["required","","formControlName","validator"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","overrideErrorMessage"],["druidValidationRendererHost",""],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275elementStart(7,"mat-label"),o.\u0275\u0275text(8,"Validator"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-select",2),o.\u0275\u0275template(10,tq,2,2,"mat-option",3),o.\u0275\u0275pipe(11,"keyvalue"),o.\u0275\u0275pipe(12,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"mat-form-field"),o.\u0275\u0275elementStart(14,"mat-label"),o.\u0275\u0275text(15,"Error Message"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(16,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerStart(17),o.\u0275\u0275template(18,nq,0,0,"ng-template",5),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(10),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(11,2,o.\u0275\u0275pipeBind1(12,4,n.validationPlugins$))))},directives:[Wt.KE,Hi.gD,ri.ey,d.JL,d.sg,Wt.hX,In.Nt,d.Fj,d.JJ,d.u,d.Q7,x.NgForOf,M1],pipes:[x.KeyValuePipe,x.AsyncPipe],styles:[""]}),t})(),uq=(()=>{class t{constructor(e){this.fb=e,this.formGroup=this.fb.group({validators:this.fb.array([])}),this.addValidator$=new M.x,this.deleteValidator$=new M.x,this.afterViewInit$=new M.x,this.validation$=new m.X(new _p({validators:[]})),this.addValidatorSub=this.addValidator$.pipe((0,ee.b)(()=>{this.validators.push(this.fb.control(""))})).subscribe(),this.deleteValidatorSub=this.deleteValidator$.pipe((0,ee.b)(n=>{this.validation$.value.validators.splice(n,1),this.validators.removeAt(n)})).subscribe(),this.validationSub=(0,Ln.a)([this.validation$,this.afterViewInit$]).pipe((0,ye.U)(([n])=>n),(0,$.h)(n=>0!==n.validators.length),(0,ee.b)(n=>{this.validators.clear(),n.validators.forEach((a,s)=>{this.validators.push(this.fb.control(""))})})).subscribe(),this.onTouched=()=>{}}set validation(e){this.validation$.next(e)}get validators(){return this.formGroup.get("validators")}ngAfterViewInit(){this.afterViewInit$.next(void 0),this.afterViewInit$.complete()}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-ordain-validation-editor"]],inputs:{validation:"validation"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","validators"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","validation"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275template(2,iq,4,2,"div",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("click",function(){return n.addValidator$.next(void 0)}),o.\u0275\u0275text(4,"Add Validator"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",n.validators.controls))},directives:[cq,d.JL,d.sg,d.CE,x.NgForOf,d.JJ,d.u],styles:[""]}),t})(),dq=(()=>{class t{constructor(e,n){this.vpm=e,this.tokenizerService=n,this.validators$=new m.X([]),this.errors$=new m.X(null),this.message$=new m.X("Field is invalid"),this.resolvedContext$=new m.X(void 0),this.messageSub=(0,Ln.a)([this.validators$,this.errors$,this.resolvedContext$]).pipe((0,$.h)(([a,s])=>null!==s&&0!==Object.keys(s).length),(0,ye.U)(([a,s])=>{const[l]=Object.keys(s),c=a.find(f=>f.validator===l);return{k:l,v:c,e:s[l]}}),(0,Ke.w)(({k:a,v:s,e:l})=>this.vpm.getPlugin(s.validator).pipe((0,ye.U)(c=>({k:a,v:s,p:c,e:l})))),(0,Ke.w)(({k:a,v:s,p:l,e:c})=>this.resolveContexts({errors:c}).pipe((0,ye.U)(f=>({k:a,v:s,p:l,t:f})))),(0,ee.b)(({p:a,t:s,v:l})=>{const c=this.replaceTokens({message:l.overrideErrorMessage&&""!==l.overrideErrorMessage?l.overrideErrorMessage:a.errorMessage,tokens:s});this.message$.next(c)})).subscribe()}set validators(e){this.validators$.next(e)}set errors(e){this.errors$.next(e)}set resolvedContext(e){this.resolvedContext$.next(e)}replaceTokens({message:e,tokens:n}){return void 0!==n&&n.forEach((a,s)=>{e=e.split(`[${s}]`).join(`${a}`)}),e}resolveContexts({errors:e}){return new y.y(n=>{let a=new Map(this.tokenizerService.generateGenericTokens(e,""));if(this.resolvedContext$.value)for(const s in this.resolvedContext$.value)a=new Map([...a,...this.tokenizerService.generateGenericTokens(this.resolvedContext$.value[s],"_root"===s?"":s)]);n.next(a),n.complete()})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(Xn))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-ordain-default-validation-error"]],inputs:{validators:"validators",errors:"errors",resolvedContext:"resolvedContext"},decls:1,vars:1,template:function(e,n){1&e&&o.\u0275\u0275text(0),2&e&&o.\u0275\u0275textInterpolate(n.message$.value)},styles:[""]}),t})(),L1=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.u5,d.UX,sr.MaterialModule,Wl]]}),t})();function fq(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-error"),o.\u0275\u0275element(1,"druid-ordain-default-validation-error",2),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("validators",null==e.formSettings$.value||null==e.formSettings$.value.validation?null:e.formSettings$.value.validation.validators)("errors",e.formControl.errors)("resolvedContext",e.resolvedContext$.value)}}function hq(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",2),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.label)}}function pq(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275element(1,"classifieds-ui-render-pane",4),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){const s=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().remove$.next(s)}),o.\u0275\u0275text(3,"Remove"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit,n=r.index,a=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("formControlName",n)("pluginName",e.contentPlugin)("settings",e.settings)("name",e.name)("label",e.label)("contexts",e.contexts)("panes",a.panes)("resolvedContext",e.resolvedContext)("indexPosition",n)("ancestory",a.ancestory)}}function mq(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",9),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e)}}function gq(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-radio-button",2),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.label)}}function vq(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-option",4),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit;o.\u0275\u0275property("value",e),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.label)}}function yq(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-image-preview",4),o.\u0275\u0275listener("removed",function(){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext().onRemove(a)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("file",e)("removable",!0),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",e.name," (",e.type,")")}}function _q(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-video-preview",4),o.\u0275\u0275listener("removed",function(){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext().onRemove(a)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("file",e)("removable",!0),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",e.name," (",e.type,")")}}function xq(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-preview",5),o.\u0275\u0275listener("removed",function(){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext().onRemove(a)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("removable",!0),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",e.name," (",e.type,")")}}function bq(t,r){if(1&t&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,yq,3,4,"ngx-dropzone-image-preview",2),o.\u0275\u0275template(2,_q,3,4,"ngx-dropzone-video-preview",2),o.\u0275\u0275template(3,xq,3,3,"ngx-dropzone-preview",3),o.\u0275\u0275elementContainerEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isType(e,"image")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isType(e,"video")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.isType(e,"image")&&!n.isType(e,"video"))}}class C0{constructor(r){r&&(this.value=r.value?r.value:"",r.datasourceBinding&&"object"==typeof r.datasourceBinding&&(this.datasourceBinding=new Gt.ContentBinding(r.datasourceBinding)),r.datasourceOptions&&"object"==typeof r.datasourceOptions&&(this.datasourceOptions=new C_(r.datasourceOptions)),r.validation&&(this.validation=new _p(r.validation)))}}class Cq{constructor(r){r&&(this.valuesMapping=r.valuesMapping)}}let va=(()=>{class t{constructor(e,n,a,s){this.tokenizerService=e,this.datasourceContentHandler=n,this.panelResolver=a,this.attributeSerializer=s}resolveElementOptions(e,n){return(0,Re.of)(e).pipe((0,Ke.w)(a=>{if(a.datasourceBinding&&a.datasourceBinding.id&&""!==a.datasourceBinding.id){const s=n.has("panes")?n.get("panes").find(l=>l.name===a.datasourceBinding.id):void 0;return this.panelResolver.dataPanes(n.get("panes")).pipe((0,Ke.w)(l=>s?this.datasourceContentHandler.fetchDynamicData(s.settings,new Map([...n,["dataPanes",l]])):(0,Re.of)([])),(0,ye.U)(l=>[a,l.results]))}return(0,Re.of)([a,[]])}),(0,ye.U)(([a,s])=>[a,a.datasourceOptions&&""!==a.datasourceOptions.query?(0,Ro.JSONPath)({path:a.datasourceOptions.query,json:s}):s]),(0,Ke.w)(([a,s])=>this.mapDataOptions(a,s)))}mapDataOptions(e,n){return(0,Re.of)([e,n]).pipe((0,ye.U)(([a,s])=>[a,s,s?s.map(l=>this.tokenizerService.generateGenericTokens(l)):[]]),(0,ye.U)(([a,s,l])=>l.map(c=>this.mapDataItem(a,c))))}mapDataItem(e,n){return new Ew({value:this.tokenizerService.replaceTokens(`${e.datasourceOptions.valueMapping}`,n),label:this.tokenizerService.replaceTokens(`${e.datasourceOptions.labelMapping}`,n),dataItem:void 0})}hasDataOptions(e){return e.datasourceBinding&&e.datasourceBinding.id&&""!==e.datasourceBinding.id}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Xn),o.\u0275\u0275inject(Qc),o.\u0275\u0275inject(kd),o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ya=(()=>{class t{constructor(e){this.tokenizerService=e,this.cachedResolvedContexts=[],this.scheduleResolution$=new M.x,this.scheduleResolutionSub=this.scheduleResolution$.pipe((0,ee.b)(({resolvedContext:n,index:a})=>{let s=new Map;if(n)for(const l in n)n[l]instanceof Es||(s=new Map([...s,...this.tokenizerService.generateGenericTokens(n[l],"_root"===l?"":l)]));this.cachedResolvedContexts[a].resolution$.next(s)})).subscribe()}resolveContexts({resolvedContext:e}){let n=this.cachedResolvedContexts.findIndex(({rContext:a})=>0===(0,R_.getDiff)(a,e).length);return-1===n?(console.log("resolved context no cache",e),n=this.cachedResolvedContexts.length,this.cachedResolvedContexts.push({rContext:e,resolution$:new E_.t}),this.scheduleResolution$.next({resolvedContext:e,index:n})):console.log("resolved context cache hit",e),this.cachedResolvedContexts[n].resolution$.pipe((0,hn.q)(1))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Xn))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Xa=(()=>{class t{constructor(e,n,a,s,l,c){this.attributeSerializer=e,this.optionsResolver=n,this.tokenizerService=a,this.formsContextHelper=s,this.vpm=l,this.controlContainer=c,this.formControl=new d.NI(""),this.formControlValueChangesSub=this.formControl.valueChanges.pipe((0,ee.b)(f=>console.log("serialized form value",this.attributeSerializer.serialize(f,"value"))),(0,ee.b)(f=>this.controlContainer.control.get("settings").setValue([this.attributeSerializer.serialize(f,"value")]))).subscribe(),this.formSettings$=new m.X(void 0),this.settings$=new m.X([]),this.options$=new m.X([]),this.init$=new M.x,this.afterViewInit$=new M.x,this.panes$=new m.X([]),this.originPanes$=new m.X([]),this.contexts$=new m.X([]),this.resolvedContext$=new m.X(void 0),this.value$=new M.x,this.settingsSub=this.settings$.pipe((0,ye.U)(f=>f?this.settingsToObject(this.attributeSerializer.deserializeAsObject(f)):void 0),(0,ee.b)(f=>this.formSettings$.next(f))).subscribe(),this.loadOptionsSub=(0,Ln.a)([this.formSettings$,this.panes$,this.originPanes$,this.contexts$,this.init$]).pipe((0,ye.U)(([f,h,g,I])=>({settings:f,metadata:new Map([["panes",[...h&&Array.isArray(h)?h:[],...g&&Array.isArray(g)?g:[]]],["contexts",I]])})),(0,Ke.w)(({settings:f,metadata:h})=>this.optionsResolver.resolveElementOptions(f,h)),(0,ee.b)(f=>this.options$.next(f))).subscribe(),this.renderContentSub=(0,Ln.a)([this.formSettings$,this.resolvedContext$,this.afterViewInit$]).pipe((0,ye.U)(([f,h])=>({settings:f,resolvedContext:h})),(0,Ke.w)(({settings:f,resolvedContext:h})=>this.formsContextHelper.resolveContexts({resolvedContext:h}).pipe((0,ye.U)(g=>({settings:f,tokens:g})))),(0,Ke.w)(({settings:f,tokens:h})=>(0,cn.D)(f.validation&&f.validation.validators?f.validation.validators.map(g=>this.vpm.getPlugin(g.validator).pipe((0,Ke.w)(I=>I.builder({v:g,serialized:!1}).pipe((0,ye.U)(B=>({v:g,vf:B})))))):[]).pipe((0,ye.U)(g=>({settings:f,tokens:h,validators:g})),(0,Ei.d)({settings:f,tokens:h,validators:[]}))),(0,Ke.w)(({settings:f,tokens:h,validators:g})=>(0,cn.D)(f.validation&&f.validation.validators?f.validation.validators.map(I=>this.vpm.getPlugin(I.validator).pipe((0,Ke.w)(B=>B.builder({v:I,serialized:!0}).pipe((0,ye.U)(V=>({v:I,vf:V})))))):[]).pipe((0,ye.U)(I=>({settings:f,tokens:h,validators:g,validatorsSerialized:I})),(0,Ei.d)({settings:f,tokens:h,validators:g,validatorsSerialized:[]}))),(0,ee.b)(({settings:f,tokens:h,validators:g,validatorsSerialized:I})=>{if(this.formControl.setAsyncValidators(g.map(({vf:B})=>B)),this.controlContainer.control.get("settings").setAsyncValidators(I.map(({vf:B})=>B)),this.formControl.updateValueAndValidity(),this.controlContainer.control.updateValueAndValidity(),void 0!==h&&(this.tokens=h),f.value&&null!==f.value&&""!==f.value){(-1!==f.value.indexOf(".$i.")||-1!==f.value.indexOf(".$j.")||-1!==f.value.indexOf(".$k."))&&console.log(f.value,this.ancestory);const B=f.value.split("$i"),V=B.map((Se,Oe)=>this.ancestory[1*Oe+(3+(0===Oe?0:3))]),ce=B.reduce((Se,Oe,Be)=>[...Se,0===Be?"":Be-1<V.length?`${V[Be-1]}`:"",Oe],[]).join("");console.log("path",ce);const Ie=this.replaceTokens(ce);this.formControl.setValue(Ie);const he=this.tokenizerService.discoverTokens(Ie,!0);if(0!==he.length)if(he[0].trim().lastIndexOf(".id")===he[0].trim().length-3){const Se=ai();this.formControl.setValue(Se),this.value$.next(Se)}else{const Se=Array.from(h).filter(([Oe])=>0===Oe.indexOf(ce.substr(1,ce.length-2)));if(0!==Se.length){const Oe=Se.reduce((Be,[et,at])=>({...Be,[et.substr(et.lastIndexOf(".")+1)]:at}),{});this.formControl.setValue(Oe),this.value$.next(Oe)}else{const Oe=this.tokenizerService.replaceTokens(f.value,new Map(Array.from(he).map(Be=>[Be,""])));this.formControl.setValue(Oe),this.value$.next(Oe)}}else this.value$.next(Ie)}else this.formControl.setValue("")}),(0,hn.q)(1)).subscribe()}set settings(e){this.settings$.next(e)}set panes(e){this.panes$.next(e)}set originPanes(e){this.originPanes$.next(e)}set contexts(e){this.contexts$.next(e)}set resolvedContext(e){this.resolvedContext$.next(e)}ngOnInit(){this.init$.next(void 0)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}settingsToObject(e){return new C0(e)}replaceTokens(e){return void 0!==this.tokens&&this.tokens.forEach((n,a)=>{e=e.split(`[${a}]`).join(`${n}`)}),e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","druid-forms-form-element-base",""]],inputs:{tokens:"tokens",settings:"settings",panes:"panes",originPanes:"originPanes",contexts:"contexts",resolvedContext:"resolvedContext",ancestory:"ancestory"}}),t})(),wq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-input"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["matInput","",3,"formControl"],[4,"ngIf"],[3,"validators","errors","resolvedContext"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275element(1,"input",0),o.\u0275\u0275template(2,fq,2,3,"mat-error",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("formControl",n.formControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.formControl.invalid))},directives:[Wt.KE,dq,In.Nt,d.Fj,d.JJ,d.oH,x.NgIf,Wt.TO],styles:[""]}),t})(),Sq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-select"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-select",0),o.\u0275\u0275template(2,hq,2,2,"mat-option",1),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("formControl",n.formControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(3,2,n.options$)))},directives:[Wt.KE,Hi.gD,ri.ey,d.JJ,d.oH,x.NgForOf],pipes:[x.AsyncPipe],styles:[""]}),t})(),Eq=(()=>{class t{constructor(e,n,a){this.attributeSerializer=e,this.fb=n,this.controlContainer=a,this.panes=[],this.originMappings=[],this.ancestory=[],this.add$=new M.x,this.remove$=new M.x,this.panes$=new m.X([]),this.settings$=new M.x,this.resolvedContext$=new M.x,this.panel$=new M.x,this.afterViewInit$=new M.x,this.addSub=this.add$.pipe((0,ye.U)(()=>new mi(this.panes[0])),(0,ee.b)(()=>this.panesFormArray.push(this.fb.control(""))),(0,ee.b)(s=>this.panes.push(s))).subscribe(),this.removeSub=this.remove$.pipe((0,ee.b)(s=>this.panesFormArray.removeAt(s)),(0,ee.b)(s=>this.panes.splice(s,1))).subscribe(),this.populateDefaultValues=(0,Ln.a)([this.settings$.pipe((0,ye.U)(s=>s?new Cq(this.attributeSerializer.deserializeAsObject(s)):void 0)),this.resolvedContext$,this.panel$,this.afterViewInit$]).pipe((0,ye.U)(([s,l,c])=>({s,rc:l,p:c})),(0,ee.b)(({s})=>console.log(s.valuesMapping,this.ancestory)),(0,ye.U)(({s,rc:l,p:c})=>{if(l&&s&&s.valuesMapping&&""!==s.valuesMapping.trim()){const f=s.valuesMapping.split("[$i]"),h=f.map((B,V)=>this.ancestory[1*V+3]),g=f.reduce((B,V,ce)=>[...B,0===ce?"":ce-1<h.length?`[${h[ce-1]}]`:"",V],[]).join("");return console.log("path",g),{items:(0,Ro.JSONPath)({path:`$.${g}.*`,json:l}),s,p:c}}return{items:[],p:c}}),(0,ee.b)(({items:s})=>{const l=s.length-this.panesFormArray.length;for(let c=0;c<l;c++)this.add$.next(void 0)})).subscribe()}set settings(e){this.settings$.next(e)}set resolvedContext(e){this.resolvedContext$.next(e)}set panel(e){this.panel$.next(e)}get panesFormArray(){return this.controlContainer.control.get("panes")}ngOnInit(){}ngAfterViewInit(){this.afterViewInit$.next(void 0)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-form-section"]],inputs:{panes:"panes",originPanes:"originPanes",originMappings:"originMappings",ancestory:"ancestory",settings:"settings",resolvedContext:"resolvedContext",panel:"panel"},decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","panes"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","pluginName","settings","name","label","contexts","panes","resolvedContext","indexPosition","ancestory"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275elementContainerStart(1,1),o.\u0275\u0275template(2,pq,4,10,"div",2),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("click",function(){return n.add$.next(void 0)}),o.\u0275\u0275text(4,"Add Item"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",n.panes))},directives:[cp,d.JL,d.sg,d.CE,x.NgForOf,d.JJ,d.u],styles:[""]}),t})(),Tq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c),this.cols=20,this.rows=20}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-textarea"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[3,"formControl","cols","rows"]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"textarea",0),2&e&&o.\u0275\u0275property("formControl",n.formControl)("cols",n.cols)("rows",n.rows)},directives:[d.Fj,d.JJ,d.oH],styles:[""]}),t})(),Aq=(()=>{class t{constructor(e){this.attributeSerializer=e}handleFile(e){return(0,Re.of)([])}handlesType(e){return!1}implementsRendererOverride(){return!1}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return!1}isData(e){return!1}getBindings(e,n,a){return"pane"===n?this.toObject(e).pipe((0,Ke.w)(s=>Gn(()=>s.datasourceBinding&&s.datasourceBinding.id&&null!==s.datasourceBinding.id,(0,Re.of)([s.datasourceBinding]),(0,Re.of)([])))):(0,Re.of)([])}fetchDynamicData(e,n){return(0,Re.of)(new qn)}buildDynamicItems(e,n){return(0,Re.of)([])}toObject(e){return(0,Re.of)(new C0(this.attributeSerializer.deserializeAsObject(e)))}buildSettings(e){return this.attributeSerializer.serialize(e,"root").attributes}stateDefinition(e){return(0,Re.of)({autocomplete:{input:""},value:void 0})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),N1=(()=>{class t extends Aq{}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Wa=(()=>{class t{constructor(e,n,a,s,l){this.data=e,this.dialogRef=n,this.fb=a,this.handler=s,this.attributeSerializer=l,this.datasourceOptions=Uh,this.validation=new _p({validators:[]}),this.bindableOptions=[],this.formGroup=this.fb.group({value:this.fb.control(""),datasourceOptions:this.fb.control(""),validation:this.fb.control(""),datasourceBinding:this.fb.group({id:this.fb.control(""),type:this.fb.control("pane")})}),this.paneIndex=e.paneIndex,this.pane=e.pane}get paneGroup(){return this.data.panelFormGroup.get("panes").at(this.paneIndex)}ngOnInit(){this.data.pane?this.handler.toObject(this.data.pane.settings).subscribe(e=>{this.formGroup.get("value").setValue(e.value),this.datasourceOptions=e.datasourceOptions?e.datasourceOptions:Uh,this.validation=new _p(e.validation?e.validation:{validators:[]}),this.formGroup.get("datasourceBinding").get("id").setValue(e.datasourceBinding&&e.datasourceBinding.id&&null!==e.datasourceBinding.id?e.datasourceBinding.id:"")}):(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:this.data.plugin.id,name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array([])})),this.paneIndex=this.data.panelFormGroup.get("panes").length-1,this.pane=new mi(this.data.panelFormGroup.get("panes").at(this.paneIndex).value)),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce((e,n)=>n.get("name").value?[...e,n.get("name").value]:[...e],[])}submit(){console.log(this.formGroup.value);const e=new C0(this.formGroup.value);console.log(e),this.paneGroup.get("settings").clear(),this.handler.buildSettings(e).map(a=>this.attributeSerializer.convertToGroup(a)).forEach(a=>this.paneGroup.get("settings").push(a)),this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(N1),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-element-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:17,vars:4,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","formControlName","value"],["formGroupName","datasourceBinding"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","datasourceOptions",3,"datasourceOptions"],["formControlName","validation",3,"validation"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275elementStart(4,"mat-label"),o.\u0275\u0275text(5,"Value"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(6,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-form-field",3),o.\u0275\u0275elementStart(8,"mat-label"),o.\u0275\u0275text(9,"Datasource"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-select",4),o.\u0275\u0275template(11,mq,2,2,"mat-option",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(12,"classifieds-ui-datasource-options",6),o.\u0275\u0275element(13,"druid-ordain-validation-editor",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"mat-dialog-actions"),o.\u0275\u0275elementStart(15,"button",8),o.\u0275\u0275text(16,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(11),o.\u0275\u0275property("ngForOf",n.bindableOptions),o.\u0275\u0275advance(1),o.\u0275\u0275property("datasourceOptions",n.datasourceOptions),o.\u0275\u0275advance(1),o.\u0275\u0275property("validation",n.validation))},directives:[Wt.KE,Hi.gD,ri.ey,ww,uq,zi.lW,d._Y,d.JL,d.sg,Dt.xY,Wt.hX,In.Nt,d.Fj,d.JJ,d.u,d.x0,d.Q7,x.NgForOf,Dt.H8,Dt.ZT],styles:[""]}),t})(),kq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-radiogroup"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-radio-group",0),o.\u0275\u0275template(1,gq,2,2,"mat-radio-button",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formControl",n.formControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,2,n.options$)))},directives:[ec.U0,ec.VQ,d.JJ,d.oH,x.NgForOf],pipes:[x.AsyncPipe],styles:[""]}),t})(),Iq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-slider"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"formControl"]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"mat-slider",0),2&e&&o.\u0275\u0275property("formControl",n.formControl)},directives:[uv.pH,d.JJ,d.oH],styles:[""]}),t})(),Pq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-toggle"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"formControl"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-slide-toggle",0),o.\u0275\u0275text(1,"Toggle Label"),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("formControl",n.formControl)},directives:[yp.Rr,d.JJ,d.oH],styles:[""]}),t})(),Fq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-checkbox"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"formControl"]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"mat-checkbox",0),2&e&&o.\u0275\u0275property("formControl",n.formControl)},directives:[za.oG,d.JJ,d.oH],styles:[""]}),t})(),Rq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-datepicker"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:7,vars:3,consts:[["appearance","fill"],["matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["picker",""]],template:function(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-form-field",0),o.\u0275\u0275elementStart(1,"mat-label"),o.\u0275\u0275text(2,"Choose a date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"input",1),o.\u0275\u0275element(4,"mat-datepicker-toggle",2),o.\u0275\u0275element(5,"mat-datepicker",null,3),o.\u0275\u0275elementEnd()),2&e){const a=o.\u0275\u0275reference(6);o.\u0275\u0275advance(3),o.\u0275\u0275property("matDatepicker",a)("formControl",n.formControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("for",a)}},directives:[Wt.KE,rc.nW,rc.Mq,Wt.hX,In.Nt,rc.hl,d.Fj,d.JJ,d.oH,Wt.R9],styles:[""]}),t})(),Dq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c),this.proxyControl=new d.NI(""),this.optionSelected$=new M.x,this.proxyControlValueChangesSub=this.proxyControl.valueChanges.pipe((0,Hn.b)(1e3),(0,xs.x)(),(0,Vo.M)((0,Ln.a)([this.formSettings$,this.panes$,this.originPanes$,this.contexts$]).pipe((0,ye.U)(([f,h,g,I])=>({settings:f,panes:h,originPanes:g,contexts:I})))),(0,ye.U)(([f,{settings:h,panes:g,originPanes:I,contexts:B}])=>({term:f,settings:h,metadata:new Map([["panes",[...g&&Array.isArray(g)?g:[],...I&&Array.isArray(I)?I:[]]],["contexts",B],["inputparams",new Map([["term",new lr({flags:[],mapping:new kg({value:f,testValue:f,type:"static",context:void 0})})]])]])})),(0,Ke.w)(({settings:f,metadata:h})=>this.optionsResolver.resolveElementOptions(f,h)),(0,ee.b)(f=>this.options$.next(f))).subscribe(),this.optionSelectedSub=this.optionSelected$.pipe((0,ee.b)(f=>this.formControl.setValue(f.option&&f.option.value?f.option.value.value:""))).subscribe(),this.displayAuto=f=>f.label}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-autocomplete"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:8,vars:6,consts:[["matInput","",3,"matAutocomplete","formControl"],[3,"displayWith","optionSelected"],["autocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-label"),o.\u0275\u0275text(2,"Autocomplete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"input",0),o.\u0275\u0275elementStart(4,"mat-autocomplete",1,2),o.\u0275\u0275listener("optionSelected",function(s){return n.optionSelected$.next(s)}),o.\u0275\u0275template(6,vq,2,2,"mat-option",3),o.\u0275\u0275pipe(7,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const a=o.\u0275\u0275reference(5);o.\u0275\u0275advance(3),o.\u0275\u0275property("matAutocomplete",a)("formControl",n.proxyControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("displayWith",n.displayAuto),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(7,4,n.options$))}},directives:[Wt.KE,nu.XC,ri.ey,Wt.hX,In.Nt,nu.ZL,d.Fj,d.JJ,d.oH,x.NgForOf],pipes:[x.AsyncPipe],styles:[""]}),t})(),Oq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c,f){super(e,n,s,l,c,f),this.files=[],this.select$=new M.x,this.selectSub=this.select$.pipe((0,ee.b)(h=>console.log(h)),(0,Fa.z)(h=>this.filesService.bulkUpload({files:[h.addedFiles[0]]}).pipe((0,ye.U)(g=>({mfs:g,e:h})))),(0,ee.b)(({mfs:h})=>this.formControl.setValue(h[0])),(0,ee.b)(({e:h})=>this.files.push(...h.addedFiles))).subscribe(),this.valueSub=this.value$.pipe((0,$.h)(h=>"object"==typeof h),(0,ye.U)(h=>new h_(h)),(0,ee.b)(h=>{console.log("populate value",h)}),(0,Ke.w)(h=>this.filesService.convertToFiles([h])),(0,ee.b)(h=>{console.log("populate as file",h),this.files=h})).subscribe(),this.filesService=a}onSelect(e){this.select$.next(e)}onRemove(e){console.log(e),this.formControl.setValue(""),this.files.splice(this.files.indexOf(e),1)}isType(e,n){switch(n){case"image":return this.filesService.isImage({file:e});case"video":return this.filesService.isVideo({file:e});default:return!1}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(_g),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-media"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[3,"change"],[4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngIf"],[3,"removable","removed",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"],[3,"removable","removed"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"ngx-dropzone",0),o.\u0275\u0275listener("change",function(s){return n.onSelect(s)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2,"Drop it, baby!"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,bq,4,3,"ng-container",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",n.files))},directives:[Bg,bS,oz,Fd,_S,x.NgForOf,x.NgIf],styles:[""]}),t})(),Mq=(()=>{class t extends Xa{constructor(e,n,a,s,l,c){super(e,n,a,s,l,c)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(va),o.\u0275\u0275directiveInject(Xn),o.\u0275\u0275directiveInject(ya),o.\u0275\u0275directiveInject(Mo),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-forms-form-hidden"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(e,n){},encapsulation:2}),t})(),Lq=(()=>{class t{constructor(e,n,a,s){this.data=e,this.dialogRef=n,this.fb=a,this.attributeSerializer=s,this.contexts=[],this.formGroup=this.fb.group({valuesMapping:this.fb.control("")})}ngOnInit(){}submit(){this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(e=>{console.log("formly repeating editor form"),console.log(this.attributeSerializer.convertToGroup(e)),this.data.panelFormGroup.get("settings").push(this.attributeSerializer.convertToGroup(e))})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-form-section-editor"]],decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["matInput","","formControlName","valuesMapping"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Values Mapping"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"button",2),o.\u0275\u0275text(7,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.formGroup),o.\u0275\u0275advance(6),o.\u0275\u0275property("disabled",!n.formGroup.valid))},directives:[Wt.KE,zi.lW,d._Y,d.JL,d.sg,Wt.hX,In.Nt,d.Fj,d.JJ,d.u,Dt.ZT],styles:[""]}),t})();const Nq=({handler:t})=>new Gt.ContentPlugin({id:"form_input",title:"Form Input",selectionComponent:void 0,editorComponent:Wa,renderComponent:wq,handler:t}),Bq=({handler:t})=>new Gt.ContentPlugin({id:"form_select",title:"Form Select",selectionComponent:void 0,editorComponent:Wa,renderComponent:Sq,handler:t}),jq=({handler:t})=>new Gt.ContentPlugin({id:"form_radiogroup",title:"Form Radiogroup",selectionComponent:void 0,editorComponent:Wa,renderComponent:kq,handler:t}),zq=({handler:t})=>new Gt.ContentPlugin({id:"form_textarea",title:"Form Textarea",selectionComponent:void 0,editorComponent:Wa,renderComponent:Tq,handler:t}),Uq=({handler:t})=>new Gt.ContentPlugin({id:"form_slider",title:"Form Slider",selectionComponent:void 0,editorComponent:Wa,renderComponent:Iq,handler:t}),Vq=({handler:t})=>new Gt.ContentPlugin({id:"form_toggle",title:"Form Toggle",selectionComponent:void 0,editorComponent:Wa,renderComponent:Pq,handler:t}),Gq=({handler:t})=>new Gt.ContentPlugin({id:"form_checkbox",title:"Form Checkbox",selectionComponent:void 0,editorComponent:Wa,renderComponent:Fq,handler:t}),$q=({handler:t})=>new Gt.ContentPlugin({id:"form_datepicker",title:"Form Datepicker",selectionComponent:void 0,editorComponent:Wa,renderComponent:Rq,handler:t}),Hq=({handler:t})=>new Gt.ContentPlugin({id:"form_autocomplete",title:"Form Autocomplete",selectionComponent:void 0,editorComponent:Wa,renderComponent:Dq,handler:t}),qq=({handler:t})=>new Gt.ContentPlugin({id:"form_media",title:"Form Media",selectionComponent:void 0,editorComponent:Wa,renderComponent:Oq,handler:t}),Xq=({handler:t})=>new Gt.ContentPlugin({id:"form_hidden",title:"Form Hidden",selectionComponent:void 0,editorComponent:Wa,renderComponent:Mq,handler:t});let Kq=(()=>{class t{constructor(e,n,a){[Nq({handler:a}),Bq({handler:a}),zq({handler:a}),jq({handler:a}),Uq({handler:a}),Vq({handler:a}),Gq({handler:a}),$q({handler:a}),Hq({handler:a}),qq({handler:a}),Xq({handler:a})].forEach(s=>e.register(s)),[new Wh({id:"form_section",name:"form_section",title:"Form Section",editorComponent:Lq,renderComponent:Eq})].forEach(s=>n.register(s))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(Jc),o.\u0275\u0275inject(N1))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,d.u5,d.UX,sr.MaterialModule,ev,Yl,jg,L1]]}),t})();function Yq(t){const r={};for(const e of t.keys()){const n=t.getAll(e);null!==n&&(r[e]=n)}return r}let B1=(()=>{class t{constructor(e,n){this.transferState=n,this.isCacheActive=!0,e.isStable.pipe((0,$.h)(a=>a),(0,hn.q)(1)).subscribe(()=>{this.isCacheActive=!1})}invalidateCacheEntry(e){Object.keys(this.transferState.store).forEach(n=>n.includes(e)?this.transferState.remove((0,k.Cb)(n)):null)}makeCacheKey(e,n,a){const s=a.keys().sort().map(c=>`${c}=${a.getAll(c)}`).join("&");return(0,k.Cb)(("GET"===e?"G.":"H.")+n+"?"+s)}intercept(e,n){if("GET"!==e.method&&"HEAD"!==e.method&&(this.isCacheActive=!1,this.invalidateCacheEntry(e.url)),!this.isCacheActive)return n.handle(e);const a=this.makeCacheKey(e.method,e.url,e.params);if(this.transferState.hasKey(a)){const s=this.transferState.get(a,{});return(0,Re.of)(new L.HttpResponse({body:s.body,headers:new L.HttpHeaders(s.headers),status:s.status,statusText:s.statusText,url:s.url}))}return n.handle(e).pipe((0,ee.b)(l=>{l instanceof L.HttpResponse&&this.transferState.set(a,{body:l.body,headers:Yq(l.headers),status:l.status,statusText:l.statusText,url:l.url||""})}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(o.ApplicationRef),o.\u0275\u0275inject(k.ki))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),Qq=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[B1,{provide:L.HTTP_INTERCEPTORS,useExisting:B1,multi:!0}],imports:[[k.Cu]]}),t})();const Jq=new o.InjectionToken("AlienaliasSettings");class t7{constructor(r){r&&(this.openSearchDomain=r.openSearchDomain)}}var j1=S(7628);const o7=["mfeReactComponent"];let a7=(()=>{class t{constructor(){}ngOnChanges(e){this.render()}ngAfterViewInit(){this.render()}ngOnDestroy(){j1.unmountComponentAtNode(this.containerRef.nativeElement)}render(){const e=this.component();j1.render(e,this.containerRef.nativeElement)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-mfe-react"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(o7,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.containerRef=a.first)}},inputs:{component:"component"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["mfeReactComponent",""]],template:function(e,n){1&e&&o.\u0275\u0275element(0,"span",null,0)},encapsulation:2}),t})(),s7=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[]]}),t})();const l7=["appContainer"];class w0{constructor(r){r&&(this.type=r.type&&""!==r.type?r.type:"module",this.remoteEntry=r.remoteEntry,this.componentName=r.componentName,this.exposedModule=r.exposedModule,this.remoteName=r.remoteName&&""!==r.remoteName?r.remoteName:void 0)}}let z1=(()=>{class t{constructor(e){this.attributeSerializer=e}handleFile(e){return(0,Re.of)([])}handlesType(e){return!1}implementsRendererOverride(){return!1}hasRendererOverride(e){return(0,Re.of)(!1)}isDynamic(e){return!1}isData(e){return!1}getBindings(e,n,a){return(0,Re.of)([])}fetchDynamicData(e,n){return(0,Re.of)(new qn)}buildDynamicItems(e,n){return(0,Re.of)([])}toObject(e){return(0,Re.of)(new w0(this.attributeSerializer.deserializeAsObject(e)))}buildSettings(e){return this.attributeSerializer.serialize(e,"root").attributes}stateDefinition(e){return(0,Re.of)({autocomplete:{input:""},value:void 0})}editorOptions(e){return(0,Re.of)(new Gt.ContentPluginEditorOptions)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),c7=(()=>{class t{constructor(e,n,a,s,l){this.data=e,this.dialogRef=n,this.fb=a,this.handler=s,this.attributeSerializer=l,this.bindableOptions=[],this.formGroup=this.fb.group({type:this.fb.control("module",[d.kI.required]),remoteEntry:this.fb.control("",[d.kI.required]),exposedModule:this.fb.control("",[d.kI.required]),componentName:this.fb.control("",[d.kI.required]),remoteName:this.fb.control("")}),this.paneIndex=e.paneIndex,this.pane=e.pane}get paneGroup(){return this.data.panelFormGroup.get("panes").at(this.paneIndex)}ngOnInit(){this.data.pane?this.handler.toObject(this.data.pane.settings).subscribe(e=>{this.formGroup.get("type").setValue(e.type&&""!==e.type?e.type:"module"),this.formGroup.get("remoteEntry").setValue(e.remoteEntry),this.formGroup.get("exposedModule").setValue(e.exposedModule),this.formGroup.get("componentName").setValue(e.componentName),this.formGroup.get("remoteName").setValue(e.remoteName)}):(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:this.data.plugin.id,name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array([])})),this.paneIndex=this.data.panelFormGroup.get("panes").length-1,this.pane=new mi(this.data.panelFormGroup.get("panes").at(this.paneIndex).value)),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce((e,n)=>n.get("name").value?[...e,n.get("name").value]:[...e],[])}submit(){console.log(this.formGroup.value);const e=new w0(this.formGroup.value);console.log(e),this.paneGroup.get("settings").clear(),this.handler.buildSettings(e).map(a=>this.attributeSerializer.convertToGroup(a)).forEach(a=>this.paneGroup.get("settings").push(a)),this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(z1),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-outsider-outside-app-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:32,vars:1,consts:[[3,"formGroup","ngSubmit"],["formControlName","type","required",""],["value","module"],["value","script"],["matInput","","formControlName","remoteEntry","required",""],["matInput","","formControlName","exposedModule","required",""],["matInput","","formControlName","componentName","required",""],["matInput","","formControlName","remoteName"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return n.submit()}),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Remote Entry"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-select",1),o.\u0275\u0275elementStart(6,"mat-option",2),o.\u0275\u0275text(7,"Module"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-option",3),o.\u0275\u0275text(9,"Script"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div"),o.\u0275\u0275elementStart(11,"mat-form-field"),o.\u0275\u0275elementStart(12,"mat-label"),o.\u0275\u0275text(13,"Remote Entry"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(14,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"div"),o.\u0275\u0275elementStart(16,"mat-form-field"),o.\u0275\u0275elementStart(17,"mat-label"),o.\u0275\u0275text(18,"Exposed Module"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(19,"input",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"div"),o.\u0275\u0275elementStart(21,"mat-form-field"),o.\u0275\u0275elementStart(22,"mat-label"),o.\u0275\u0275text(23,"Component Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(24,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(25,"div"),o.\u0275\u0275elementStart(26,"mat-form-field"),o.\u0275\u0275elementStart(27,"mat-label"),o.\u0275\u0275text(28,"Remote Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(29,"input",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(30,"button",8),o.\u0275\u0275text(31,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("formGroup",n.formGroup)},directives:[Wt.KE,Hi.gD,ri.ey,zi.lW,d._Y,d.JL,d.sg,Wt.hX,d.JJ,d.u,d.Q7,In.Nt,d.Fj,Dt.ZT],styles:[""]}),t})(),u7=(()=>{class t{constructor(e){this.attributeSerializer=e,this.objectSettings$=new m.X(void 0),this.contexts$=new m.X([]),this.settings$=new m.X([]),this.settingsSub=this.settings$.pipe((0,ye.U)(n=>n?new w0(this.attributeSerializer.deserializeAsObject(n)):void 0),(0,ee.b)(n=>this.objectSettings$.next(n))).subscribe(),this.renderAppSub=this.objectSettings$.pipe((0,sp.T)(1),(0,Ke.w)(n=>new y.y(a=>{Md(n.type&&"script"!==n.type?{type:"module",remoteEntry:n.remoteEntry,exposedModule:n.exposedModule}:{type:"script",remoteEntry:n.remoteEntry,exposedModule:n.exposedModule,remoteName:n.remoteName}).then(s=>{a.next(s[n.componentName&&""!==n.componentName?n.componentName:"default"]),a.complete()})}).pipe((0,ye.U)(a=>({s:n,c:a})))),(0,ee.b)(({s:n,c:a})=>{this.viewContainer.clear(),n.type&&"script"!==n.type?this.viewContainer.createComponent(a):this.viewContainer.createComponent(a7).instance.component=a})).subscribe()}set settings(e){this.settings$.next(e)}set contexts(e){this.contexts$.next(e)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["druid-outsider-outside-app-renderer"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(l7,7,o.ViewContainerRef),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.viewContainer=a.first)}},inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:0,consts:[["appContainer",""]],template:function(e,n){1&e&&o.\u0275\u0275elementContainer(0,null,0)},styles:[""]}),t})(),f7=(()=>{class t{constructor(e,n){e.register((({handler:t})=>new Gt.ContentPlugin({id:"outside_app",title:"Outside App",selectionComponent:void 0,editorComponent:c7,renderComponent:u7,handler:t}))({handler:n}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(z1))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,sr.MaterialModule,d.UX]]}),t})(),U1=(()=>{class t{constructor(e,n){this.fb=e,this.controlContainer=n,this.context$=new m.X(void 0),this.formGroup=this.fb.group({remoteEntry:this.fb.control("",[d.kI.required]),exposedModule:this.fb.control("",[d.kI.required]),moduleName:this.fb.control("",[d.kI.required])}),this.onTouched=()=>{}}set context(e){this.context$.next(e)}ngOnInit(){this.context$.subscribe(e=>{this.formGroup.setValue(e?{remoteEntry:e.data.remoteEntry,exposedModule:e.data.exposedModule,moduleName:e.data.moduleName}:{remoteEntry:"",exposedModule:"",moduleName:""})})}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.formGroup.valueChanges.subscribe(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-context-module-form"]],inputs:{context:"context"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>t),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>t),multi:!0}])],decls:16,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","remoteEntry","required",""],["matInput","","formControlName","exposedModule","required",""],["matInput","","formControlName","moduleName","required",""]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Remote Entry"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div"),o.\u0275\u0275elementStart(7,"mat-form-field"),o.\u0275\u0275elementStart(8,"mat-label"),o.\u0275\u0275text(9,"Exposed Module"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(10,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"div"),o.\u0275\u0275elementStart(12,"mat-form-field"),o.\u0275\u0275elementStart(13,"mat-label"),o.\u0275\u0275text(14,"Module Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(15,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&o.\u0275\u0275property("formGroup",n.formGroup)},directives:[Wt.KE,d.JL,d.sg,Wt.hX,In.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),t})(),h7=(()=>{class t{constructor(e,n){this.fb=e,this.controlContainer=n}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",d.kI.required)),this.controlContainer.control.addControl("data",this.fb.control(""))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["classifieds-ui-context-module-editor"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(U1,7),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.contextModuleFormComp=a.first)}},inputs:{context:"context"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","data",3,"context"]],template:function(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-context-module-form",1),o.\u0275\u0275elementContainerEnd()),2&e&&(o.\u0275\u0275property("formGroup",n.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("context",n.context))},directives:[U1,d.JL,d.sg,d.JJ,d.u],styles:[""]}),t})(),p7=(()=>{class t{constructor(e,n,a){this.actions$=e,this.moduleLoaderService=n,this.es=a,this.setPage$=Br(()=>this.actions$.pipe(so(j_),(0,ee.b)(({page:s})=>{console.log("tractor beam capture page",s),s.contexts&&Array.isArray(s.contexts)&&s.contexts.forEach(l=>{if("module"===l.plugin)return this.moduleLoaderService.loadModule(()=>Md({type:"module",remoteEntry:l.data.remoteEntry,exposedModule:l.data.exposedModule}).then(c=>c[l.data.moduleName])).subscribe()})})),{dispatch:!1}),this.setPageInfo$=Br(()=>this.actions$.pipe(so(B_),(0,ee.b)(({info:s})=>{console.log("tractor beam info",s)}),(0,Ke.w)(({info:s})=>this.es.getEntityCollectionService("PanelPage").getByKey(s.id)),(0,ee.b)(s=>{s.contexts&&Array.isArray(s.contexts)&&s.contexts.forEach(l=>{if("module"===l.plugin)return this.moduleLoaderService.loadModule(()=>Md({type:"module",remoteEntry:l.data.remoteEntry,exposedModule:l.data.exposedModule}).then(c=>c[l.data.moduleName])).subscribe()})})),{dispatch:!1})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ho),o.\u0275\u0275inject(mn.ModuleLoaderService),o.\u0275\u0275inject(li))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),V1=(()=>{class t{constructor(e){this.moduleLoaderService=e}resolve(e,n,a){return console.log("module resolver context",e,n,a),this.moduleLoaderService.loadModule(()=>Md({type:"module",remoteEntry:n.remoteEntry,exposedModule:n.exposedModule}).then(s=>s[n.moduleName]))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(mn.ModuleLoaderService))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),g7=(()=>{class t{constructor(e,n,a){this.moduleLoader=e,this.pageBuilderFacade=n,this.es=a}loadPlugins(){return this.pageBuilderFacade.getPageInfo$.pipe((0,ee.b)(()=>console.log("started loading external modules")),(0,Ke.w)(e=>(e&&e.id?this.es.getEntityCollectionService("PanelPage").getByKey(e.id):(0,Re.of)(void 0)).pipe((0,Ei.d)(void 0))),(0,Ke.w)(e=>e?(0,cn.D)(e.contexts.filter(n=>"module"===n.plugin).map(n=>this.moduleLoader.loadModule(()=>Md({type:"module",remoteEntry:n.data.remoteEntry,exposedModule:n.data.exposedModule}).then(a=>a[n.data.moduleName])))).pipe((0,ui.g)(1),(0,Ei.d)([])):(0,Re.of)([])),(0,ee.b)(()=>console.log("completed loading external modules")),(0,ye.U)(()=>!0),(0,hn.q)(1))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(mn.ModuleLoaderService),o.\u0275\u0275inject(Do),o.\u0275\u0275inject(li))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),v7=(()=>{class t{constructor(e,n,a,s){n.addDiscovery(s),e.register((({moduleResolver:t})=>new nl({id:"module",name:"module",title:"Module",baseObject:{},resolver:t,editorComponent:h7}))({moduleResolver:a}))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(Ql),o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(V1),o.\u0275\u0275inject(g7))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[V1],imports:[[x.CommonModule,d.u5,d.UX,wd,sr.MaterialModule,Xo.forFeature([p7])]]}),t})();class y7{constructor(r){r&&(this.appId=r.appId,this.guestRoleArn=r.guestRoleArn,this.region=r.region,this.identityPoolId=r.identityPoolId)}}const _7=new o.InjectionToken("RumSettings"),G1=[],x7=[{contexts:[],displayType:"page",entityPermissions:{deleteUserIds:[],readUserIds:["*"],writeUserIds:[]},gridItems:[],id:"1ab09996-17ec-4791-8a8c-4191f77f3994",interactions:{interactions:{listeners:[]}},layoutSetting:{settings:[]},layoutType:"gridless",name:"hedge-test",panels:[{columnSetting:{settings:[]},panes:[{contentPlugin:"snippet",contexts:[],label:"",locked:!1,name:"",rule:{condition:"",rules:[]},settings:[{attributes:[],computedValue:"text/html",displayName:"Content Type",name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:"Hedge rod test v2 mod",displayName:"Content",name:"content",type:1,value:"Hedge rod test v2 mod"},{attributes:[],computedValue:null,displayName:"jsScript",name:"jsScript",type:1,value:null}]}],settings:[],stylePlugin:""}],path:"/hedge-test",persistence:{dataduct:{settings:[]}},rowSettings:[{settings:[]}],site:"spearhead",title:"Hedge Test",userId:"c3579436-66eb-44aa-af8a-f158c9d77c31"}];var $1=S(7520),b7=S(3280),Ii=S(4851);function C7(){}function S0(t){return null==t?C7:function(){return this.querySelector(t)}}function H1(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function S7(){return[]}function q1(t){return null==t?S7:function(){return this.querySelectorAll(t)}}function X1(t){return function(){return this.matches(t)}}function W1(t){return function(r){return r.matches(t)}}var A7=Array.prototype.find;function I7(){return this.firstElementChild}var F7=Array.prototype.filter;function R7(){return this.children}function K1(t){return new Array(t.length)}function dv(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}function N7(t){return function(){return t}}function B7(t,r,e,n,a,s){for(var c,l=0,f=r.length,h=s.length;l<h;++l)(c=r[l])?(c.__data__=s[l],n[l]=c):e[l]=new dv(t,s[l]);for(;l<f;++l)(c=r[l])&&(a[l]=c)}function j7(t,r,e,n,a,s,l){var c,f,V,h=new Map,g=r.length,I=s.length,B=new Array(g);for(c=0;c<g;++c)(f=r[c])&&(B[c]=V=l.call(f,f.__data__,c,r)+"",h.has(V)?a[c]=f:h.set(V,f));for(c=0;c<I;++c)V=l.call(t,s[c],c,s)+"",(f=h.get(V))?(n[c]=f,f.__data__=s[c],h.delete(V)):e[c]=new dv(t,s[c]);for(c=0;c<g;++c)(f=r[c])&&h.get(B[c])===f&&(a[c]=f)}function z7(t){return t.__data__}function X7(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}dv.prototype={constructor:dv,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var E0="http://www.w3.org/1999/xhtml";const Y1={svg:"http://www.w3.org/2000/svg",xhtml:E0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fv(t){var r=t+="",e=r.indexOf(":");return e>=0&&"xmlns"!==(r=t.slice(0,e))&&(t=t.slice(e+1)),Y1.hasOwnProperty(r)?{space:Y1[r],local:t}:t}function e9(t){return function(){this.removeAttribute(t)}}function t9(t){return function(){this.removeAttributeNS(t.space,t.local)}}function n9(t,r){return function(){this.setAttribute(t,r)}}function i9(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function r9(t,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function o9(t,r){return function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Q1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function s9(t){return function(){this.style.removeProperty(t)}}function l9(t,r,e){return function(){this.style.setProperty(t,r,e)}}function c9(t,r,e){return function(){var n=r.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,e)}}function zd(t,r){return t.style.getPropertyValue(r)||Q1(t).getComputedStyle(t,null).getPropertyValue(r)}function d9(t){return function(){delete this[t]}}function f9(t,r){return function(){this[t]=r}}function h9(t,r){return function(){var e=r.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function J1(t){return t.trim().split(/^|\s+/)}function T0(t){return t.classList||new Z1(t)}function Z1(t){this._node=t,this._names=J1(t.getAttribute("class")||"")}function eE(t,r){for(var e=T0(t),n=-1,a=r.length;++n<a;)e.add(r[n])}function tE(t,r){for(var e=T0(t),n=-1,a=r.length;++n<a;)e.remove(r[n])}function m9(t){return function(){eE(this,t)}}function g9(t){return function(){tE(this,t)}}function v9(t,r){return function(){(r.apply(this,arguments)?eE:tE)(this,t)}}function _9(){this.textContent=""}function x9(t){return function(){this.textContent=t}}function b9(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function w9(){this.innerHTML=""}function S9(t){return function(){this.innerHTML=t}}function E9(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function A9(){this.nextSibling&&this.parentNode.appendChild(this)}function I9(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function F9(t){return function(){var r=this.ownerDocument,e=this.namespaceURI;return e===E0&&r.documentElement.namespaceURI===E0?r.createElement(t):r.createElementNS(e,t)}}function R9(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function nE(t){var r=fv(t);return(r.local?R9:F9)(r)}function O9(){return null}function L9(){var t=this.parentNode;t&&t.removeChild(this)}function B9(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function j9(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function G9(t){return t.trim().split(/^|\s+/).map(function(r){var e="",n=r.indexOf(".");return n>=0&&(e=r.slice(n+1),r=r.slice(0,n)),{type:r,name:e}})}function $9(t){return function(){var r=this.__on;if(r){for(var s,e=0,n=-1,a=r.length;e<a;++e)s=r[e],t.type&&s.type!==t.type||s.name!==t.name?r[++n]=s:this.removeEventListener(s.type,s.listener,s.options);++n?r.length=n:delete this.__on}}}function H9(t,r,e){return function(){var a,n=this.__on,s=function V9(t){return function(r){t.call(this,r,this.__data__)}}(r);if(n)for(var l=0,c=n.length;l<c;++l)if((a=n[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=e),void(a.value=r);this.addEventListener(t.type,s,e),a={type:t.type,name:t.name,value:r,listener:s,options:e},n?n.push(a):this.__on=[a]}}function iE(t,r,e){var n=Q1(t),a=n.CustomEvent;"function"==typeof a?a=new a(r,e):(a=n.document.createEvent("Event"),e?(a.initEvent(r,e.bubbles,e.cancelable),a.detail=e.detail):a.initEvent(r,!1,!1)),t.dispatchEvent(a)}function X9(t,r){return function(){return iE(this,t,r)}}function W9(t,r){return function(){return iE(this,t,r.apply(this,arguments))}}Z1.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var rE=[null];function Lo(t,r){this._groups=t,this._parents=r}function oE(){return new Lo([[document.documentElement]],rE)}Lo.prototype=oE.prototype={constructor:Lo,select:function w7(t){"function"!=typeof t&&(t=S0(t));for(var r=this._groups,e=r.length,n=new Array(e),a=0;a<e;++a)for(var f,h,s=r[a],l=s.length,c=n[a]=new Array(l),g=0;g<l;++g)(f=s[g])&&(h=t.call(f,f.__data__,g,s))&&("__data__"in f&&(h.__data__=f.__data__),c[g]=h);return new Lo(n,this._parents)},selectAll:function T7(t){t="function"==typeof t?function E7(t){return function(){var r=t.apply(this,arguments);return null==r?[]:H1(r)}}(t):q1(t);for(var r=this._groups,e=r.length,n=[],a=[],s=0;s<e;++s)for(var f,l=r[s],c=l.length,h=0;h<c;++h)(f=l[h])&&(n.push(t.call(f,f.__data__,h,l)),a.push(f));return new Lo(n,a)},selectChild:function P7(t){return this.select(null==t?I7:function k7(t){return function(){return A7.call(this.children,t)}}("function"==typeof t?t:W1(t)))},selectChildren:function O7(t){return this.selectAll(null==t?R7:function D7(t){return function(){return F7.call(this.children,t)}}("function"==typeof t?t:W1(t)))},filter:function M7(t){"function"!=typeof t&&(t=X1(t));for(var r=this._groups,e=r.length,n=new Array(e),a=0;a<e;++a)for(var f,s=r[a],l=s.length,c=n[a]=[],h=0;h<l;++h)(f=s[h])&&t.call(f,f.__data__,h,s)&&c.push(f);return new Lo(n,this._parents)},data:function U7(t,r){if(!arguments.length)return Array.from(this,z7);var e=r?j7:B7,n=this._parents,a=this._groups;"function"!=typeof t&&(t=N7(t));for(var s=a.length,l=new Array(s),c=new Array(s),f=new Array(s),h=0;h<s;++h){var g=n[h],I=a[h],B=I.length,V=H1(t.call(g,g&&g.__data__,h,n)),ce=V.length,Ie=c[h]=new Array(ce),he=l[h]=new Array(ce),Se=f[h]=new Array(B);e(g,I,Ie,he,Se,V,r);for(var et,at,Oe=0,Be=0;Oe<ce;++Oe)if(et=Ie[Oe]){for(Oe>=Be&&(Be=Oe+1);!(at=he[Be])&&++Be<ce;);et._next=at||null}}return(l=new Lo(l,n))._enter=c,l._exit=f,l},enter:function L7(){return new Lo(this._enter||this._groups.map(K1),this._parents)},exit:function V7(){return new Lo(this._exit||this._groups.map(K1),this._parents)},join:function G7(t,r,e){var n=this.enter(),a=this,s=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=r&&(a=r(a)),null==e?s.remove():e(s),n&&a?n.merge(a).order():a},merge:function $7(t){if(!(t instanceof Lo))throw new Error("invalid merge");for(var r=this._groups,e=t._groups,n=r.length,s=Math.min(n,e.length),l=new Array(n),c=0;c<s;++c)for(var B,f=r[c],h=e[c],g=f.length,I=l[c]=new Array(g),V=0;V<g;++V)(B=f[V]||h[V])&&(I[V]=B);for(;c<n;++c)l[c]=r[c];return new Lo(l,this._parents)},selection:function Q9(){return this},order:function H7(){for(var t=this._groups,r=-1,e=t.length;++r<e;)for(var l,n=t[r],a=n.length-1,s=n[a];--a>=0;)(l=n[a])&&(s&&4^l.compareDocumentPosition(s)&&s.parentNode.insertBefore(l,s),s=l);return this},sort:function q7(t){function r(I,B){return I&&B?t(I.__data__,B.__data__):!I-!B}t||(t=X7);for(var e=this._groups,n=e.length,a=new Array(n),s=0;s<n;++s){for(var h,l=e[s],c=l.length,f=a[s]=new Array(c),g=0;g<c;++g)(h=l[g])&&(f[g]=h);f.sort(r)}return new Lo(a,this._parents).order()},call:function W7(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function K7(){return Array.from(this)},node:function Y7(){for(var t=this._groups,r=0,e=t.length;r<e;++r)for(var n=t[r],a=0,s=n.length;a<s;++a){var l=n[a];if(l)return l}return null},size:function Q7(){let t=0;for(const r of this)++t;return t},empty:function J7(){return!this.node()},each:function Z7(t){for(var r=this._groups,e=0,n=r.length;e<n;++e)for(var c,a=r[e],s=0,l=a.length;s<l;++s)(c=a[s])&&t.call(c,c.__data__,s,a);return this},attr:function a9(t,r){var e=fv(t);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each((null==r?e.local?t9:e9:"function"==typeof r?e.local?o9:r9:e.local?i9:n9)(e,r))},style:function u9(t,r,e){return arguments.length>1?this.each((null==r?s9:"function"==typeof r?c9:l9)(t,r,e??"")):zd(this.node(),t)},property:function p9(t,r){return arguments.length>1?this.each((null==r?d9:"function"==typeof r?h9:f9)(t,r)):this.node()[t]},classed:function y9(t,r){var e=J1(t+"");if(arguments.length<2){for(var n=T0(this.node()),a=-1,s=e.length;++a<s;)if(!n.contains(e[a]))return!1;return!0}return this.each(("function"==typeof r?v9:r?m9:g9)(e,r))},text:function C9(t){return arguments.length?this.each(null==t?_9:("function"==typeof t?b9:x9)(t)):this.node().textContent},html:function T9(t){return arguments.length?this.each(null==t?w9:("function"==typeof t?E9:S9)(t)):this.node().innerHTML},raise:function k9(){return this.each(A9)},lower:function P9(){return this.each(I9)},append:function D9(t){var r="function"==typeof t?t:nE(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})},insert:function M9(t,r){var e="function"==typeof t?t:nE(t),n=null==r?O9:"function"==typeof r?r:S0(r);return this.select(function(){return this.insertBefore(e.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function N9(){return this.each(L9)},clone:function z9(t){return this.select(t?j9:B9)},datum:function U9(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function q9(t,r,e){var a,l,n=G9(t+""),s=n.length;if(!(arguments.length<2)){for(c=r?H9:$9,a=0;a<s;++a)this.each(c(n[a],r,e));return this}var c=this.node().__on;if(c)for(var g,f=0,h=c.length;f<h;++f)for(a=0,g=c[f];a<s;++a)if((l=n[a]).type===g.type&&l.name===g.name)return g.value},dispatch:function K9(t,r){return this.each(("function"==typeof r?W9:X9)(t,r))},[Symbol.iterator]:function*Y9(){for(var t=this._groups,r=0,e=t.length;r<e;++r)for(var l,n=t[r],a=0,s=n.length;a<s;++a)(l=n[a])&&(yield l)}};const xp=oE;function _a(t){return"string"==typeof t?new Lo([[document.querySelector(t)]],[document.documentElement]):new Lo([[t]],rE)}var J9={value:()=>{}};function aE(){for(var n,t=0,r=arguments.length,e={};t<r;++t){if(!(n=arguments[t]+"")||n in e||/[\s.]/.test(n))throw new Error("illegal type: "+n);e[n]=[]}return new hv(e)}function hv(t){this._=t}function Z9(t,r){return t.trim().split(/^|\s+/).map(function(e){var n="",a=e.indexOf(".");if(a>=0&&(n=e.slice(a+1),e=e.slice(0,a)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function eX(t,r){for(var a,e=0,n=t.length;e<n;++e)if((a=t[e]).name===r)return a.value}function sE(t,r,e){for(var n=0,a=t.length;n<a;++n)if(t[n].name===r){t[n]=J9,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=e&&t.push({name:r,value:e}),t}hv.prototype=aE.prototype={constructor:hv,on:function(t,r){var a,e=this._,n=Z9(t+"",e),s=-1,l=n.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++s<l;)if(a=(t=n[s]).type)e[a]=sE(e[a],t.name,r);else if(null==r)for(a in e)e[a]=sE(e[a],t.name,null);return this}for(;++s<l;)if((a=(t=n[s]).type)&&(a=eX(e[a],t.name)))return a},copy:function(){var t={},r=this._;for(var e in r)t[e]=r[e].slice();return new hv(t)},call:function(t,r){if((a=arguments.length-2)>0)for(var a,s,e=new Array(a),n=0;n<a;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(n=0,a=(s=this._[t]).length;n<a;++n)s[n].value.apply(r,e)},apply:function(t,r,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,s=n.length;a<s;++a)n[a].value.apply(r,e)}};const lE=aE;function A0(t){t.preventDefault(),t.stopImmediatePropagation()}function tX(t){var r=t.document.documentElement,e=_a(t).on("dragstart.drag",A0,!0);"onselectstart"in r?e.on("selectstart.drag",A0,!0):(r.__noselect=r.style.MozUserSelect,r.style.MozUserSelect="none")}function nX(t,r){var e=t.document.documentElement,n=_a(t).on("dragstart.drag",null);r&&(n.on("click.drag",A0,!0),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in e?n.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function k0(t,r,e){t.prototype=r.prototype=e,e.constructor=t}function cE(t,r){var e=Object.create(t.prototype);for(var n in r)e[n]=r[n];return e}function bp(){}var pv=1/.7,Ud="\\s*([+-]?\\d+)\\s*",wp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",As="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iX=/^#([0-9a-f]{3,8})$/,rX=new RegExp("^rgb\\("+[Ud,Ud,Ud]+"\\)$"),oX=new RegExp("^rgb\\("+[As,As,As]+"\\)$"),aX=new RegExp("^rgba\\("+[Ud,Ud,Ud,wp]+"\\)$"),sX=new RegExp("^rgba\\("+[As,As,As,wp]+"\\)$"),lX=new RegExp("^hsl\\("+[wp,As,As]+"\\)$"),cX=new RegExp("^hsla\\("+[wp,As,As,wp]+"\\)$"),uE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dE(){return this.rgb().formatHex()}function fE(){return this.rgb().formatRgb()}function ou(t){var r,e;return t=(t+"").trim().toLowerCase(),(r=iX.exec(t))?(e=r[1].length,r=parseInt(r[1],16),6===e?hE(r):3===e?new ia(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===e?mv(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===e?mv(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=rX.exec(t))?new ia(r[1],r[2],r[3],1):(r=oX.exec(t))?new ia(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=aX.exec(t))?mv(r[1],r[2],r[3],r[4]):(r=sX.exec(t))?mv(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=lX.exec(t))?gE(r[1],r[2]/100,r[3]/100,1):(r=cX.exec(t))?gE(r[1],r[2]/100,r[3]/100,r[4]):uE.hasOwnProperty(t)?hE(uE[t]):"transparent"===t?new ia(NaN,NaN,NaN,0):null}function hE(t){return new ia(t>>16&255,t>>8&255,255&t,1)}function mv(t,r,e,n){return n<=0&&(t=r=e=NaN),new ia(t,r,e,n)}function dX(t){return t instanceof bp||(t=ou(t)),t?new ia((t=t.rgb()).r,t.g,t.b,t.opacity):new ia}function gv(t,r,e,n){return 1===arguments.length?dX(t):new ia(t,r,e,n??1)}function ia(t,r,e,n){this.r=+t,this.g=+r,this.b=+e,this.opacity=+n}function pE(){return"#"+I0(this.r)+I0(this.g)+I0(this.b)}function mE(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function I0(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function gE(t,r,e,n){return n<=0?t=r=e=NaN:e<=0||e>=1?t=r=NaN:r<=0&&(t=NaN),new ks(t,r,e,n)}function vE(t){if(t instanceof ks)return new ks(t.h,t.s,t.l,t.opacity);if(t instanceof bp||(t=ou(t)),!t)return new ks;if(t instanceof ks)return t;var r=(t=t.rgb()).r/255,e=t.g/255,n=t.b/255,a=Math.min(r,e,n),s=Math.max(r,e,n),l=NaN,c=s-a,f=(s+a)/2;return c?(l=r===s?(e-n)/c+6*(e<n):e===s?(n-r)/c+2:(r-e)/c+4,c/=f<.5?s+a:2-s-a,l*=60):c=f>0&&f<1?0:l,new ks(l,c,f,t.opacity)}function ks(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}function P0(t,r,e){return 255*(t<60?r+(e-r)*t/60:t<180?e:t<240?r+(e-r)*(240-t)/60:r)}function yE(t,r,e,n,a){var s=t*t,l=s*t;return((1-3*t+3*s-l)*r+(4-6*s+3*l)*e+(1+3*t+3*s-3*l)*n+l*a)/6}k0(bp,ou,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:dE,formatHex:dE,formatHsl:function uX(){return vE(this).formatHsl()},formatRgb:fE,toString:fE}),k0(ia,gv,cE(bp,{brighter:function(t){return t=null==t?pv:Math.pow(pv,t),new ia(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ia(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pE,formatHex:pE,formatRgb:mE,toString:mE})),k0(ks,function fX(t,r,e,n){return 1===arguments.length?vE(t):new ks(t,r,e,n??1)},cE(bp,{brighter:function(t){return t=null==t?pv:Math.pow(pv,t),new ks(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ks(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),r=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,a=2*e-n;return new ia(P0(t>=240?t-240:t+120,a,n),P0(t,a,n),P0(t<120?t+240:t-120,a,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const F0=t=>()=>t;function xE(t,r){var e=r-t;return e?function _E(t,r){return function(e){return t+e*r}}(t,e):F0(isNaN(t)?r:t)}const vv=function t(r){var e=function gX(t){return 1==(t=+t)?xE:function(r,e){return e-r?function mX(t,r,e){return t=Math.pow(t,e),r=Math.pow(r,e)-t,e=1/e,function(n){return Math.pow(t+n*r,e)}}(r,e,t):F0(isNaN(r)?e:r)}}(r);function n(a,s){var l=e((a=gv(a)).r,(s=gv(s)).r),c=e(a.g,s.g),f=e(a.b,s.b),h=xE(a.opacity,s.opacity);return function(g){return a.r=l(g),a.g=c(g),a.b=f(g),a.opacity=h(g),a+""}}return n.gamma=t,n}(1);function bE(t){return function(r){var l,c,e=r.length,n=new Array(e),a=new Array(e),s=new Array(e);for(l=0;l<e;++l)c=gv(r[l]),n[l]=c.r||0,a[l]=c.g||0,s[l]=c.b||0;return n=t(n),a=t(a),s=t(s),c.opacity=1,function(f){return c.r=n(f),c.g=a(f),c.b=s(f),c+""}}}function CE(t,r){var l,e=r?r.length:0,n=t?Math.min(e,t.length):0,a=new Array(n),s=new Array(e);for(l=0;l<n;++l)a[l]=yv(t[l],r[l]);for(;l<e;++l)s[l]=r[l];return function(c){for(l=0;l<n;++l)s[l]=a[l](c);return s}}function vX(t,r){var e=new Date;return t=+t,r=+r,function(n){return e.setTime(t*(1-n)+r*n),e}}function Ka(t,r){return t=+t,r=+r,function(e){return t*(1-e)+r*e}}function yX(t,r){var a,e={},n={};for(a in(null===t||"object"!=typeof t)&&(t={}),(null===r||"object"!=typeof r)&&(r={}),r)a in t?e[a]=yv(t[a],r[a]):n[a]=r[a];return function(s){for(a in e)n[a]=e[a](s);return n}}bE(function hX(t){var r=t.length-1;return function(e){var n=e<=0?e=0:e>=1?(e=1,r-1):Math.floor(e*r),a=t[n],s=t[n+1];return yE((e-n/r)*r,n>0?t[n-1]:2*a-s,a,s,n<r-1?t[n+2]:2*s-a)}}),bE(function pX(t){var r=t.length;return function(e){var n=Math.floor(((e%=1)<0?++e:e)*r);return yE((e-n/r)*r,t[(n+r-1)%r],t[n%r],t[(n+1)%r],t[(n+2)%r])}});var R0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,D0=new RegExp(R0.source,"g");function wE(t,r){var n,a,s,e=R0.lastIndex=D0.lastIndex=0,l=-1,c=[],f=[];for(t+="",r+="";(n=R0.exec(t))&&(a=D0.exec(r));)(s=a.index)>e&&(s=r.slice(e,s),c[l]?c[l]+=s:c[++l]=s),(n=n[0])===(a=a[0])?c[l]?c[l]+=a:c[++l]=a:(c[++l]=null,f.push({i:l,x:Ka(n,a)})),e=D0.lastIndex;return e<r.length&&(s=r.slice(e),c[l]?c[l]+=s:c[++l]=s),c.length<2?f[0]?function xX(t){return function(r){return t(r)+""}}(f[0].x):function _X(t){return function(){return t}}(r):(r=f.length,function(h){for(var I,g=0;g<r;++g)c[(I=f[g]).i]=I.x(h);return c.join("")})}function bX(t,r){r||(r=[]);var a,e=t?Math.min(r.length,t.length):0,n=r.slice();return function(s){for(a=0;a<e;++a)n[a]=t[a]*(1-s)+r[a]*s;return n}}function yv(t,r){var n,e=typeof r;return null==r||"boolean"===e?F0(r):("number"===e?Ka:"string"===e?(n=ou(r))?(r=n,vv):wE:r instanceof ou?vv:r instanceof Date?vX:function CX(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(r)?bX:Array.isArray(r)?CE:"function"!=typeof r.valueOf&&"function"!=typeof r.toString||isNaN(r)?yX:Ka)(t,r)}function SE(t,r){if(t=function wX(t){let r;for(;r=t.sourceEvent;)t=r;return t}(t),void 0===r&&(r=t.currentTarget),r){var e=r.ownerSVGElement||r;if(e.createSVGPoint){var n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(r.getScreenCTM().inverse())).x,n.y]}if(r.getBoundingClientRect){var a=r.getBoundingClientRect();return[t.clientX-a.left-r.clientLeft,t.clientY-a.top-r.clientTop]}}return[t.pageX,t.pageY]}var _v,Tp,Vd=0,Sp=0,Ep=0,xv=0,au=0,bv=0,Ap="object"==typeof performance&&performance.now?performance:Date,TE="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function O0(){return au||(TE(SX),au=Ap.now()+bv)}function SX(){au=0}function Cv(){this._call=this._time=this._next=null}function AE(t,r,e){var n=new Cv;return n.restart(t,r,e),n}function kE(){au=(xv=Ap.now())+bv,Vd=Sp=0;try{!function EX(){O0(),++Vd;for(var r,t=_v;t;)(r=au-t._time)>=0&&t._call.call(null,r),t=t._next;--Vd}()}finally{Vd=0,function AX(){for(var t,e,r=_v,n=1/0;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:_v=e);Tp=t,M0(n)}(),au=0}}function TX(){var t=Ap.now(),r=t-xv;r>1e3&&(bv-=r,xv=t)}function M0(t){Vd||(Sp&&(Sp=clearTimeout(Sp)),t-au>24?(t<1/0&&(Sp=setTimeout(kE,t-Ap.now()-bv)),Ep&&(Ep=clearInterval(Ep))):(Ep||(xv=Ap.now(),Ep=setInterval(TX,1e3)),Vd=1,TE(kE)))}function IE(t,r,e){var n=new Cv;return n.restart(a=>{n.stop(),t(a+r)},r=null==r?0:+r,e),n}Cv.prototype=AE.prototype={constructor:Cv,restart:function(t,r,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?O0():+e)+(null==r?0:+r),!this._next&&Tp!==this&&(Tp?Tp._next=this:_v=this,Tp=this),this._call=t,this._time=e,M0()},stop:function(){this._call&&(this._call=null,this._time=1/0,M0())}};var kX=lE("start","end","cancel","interrupt"),IX=[];function Ev(t,r,e,n,a,s){var l=t.__transition;if(l){if(e in l)return}else t.__transition={};!function PX(t,r,e){var a,n=t.__transition;function l(h){var g,I,B,V;if(1!==e.state)return f();for(g in n)if((V=n[g]).name===e.name){if(3===V.state)return IE(l);4===V.state?(V.state=6,V.timer.stop(),V.on.call("interrupt",t,t.__data__,V.index,V.group),delete n[g]):+g<r&&(V.state=6,V.timer.stop(),V.on.call("cancel",t,t.__data__,V.index,V.group),delete n[g])}if(IE(function(){3===e.state&&(e.state=4,e.timer.restart(c,e.delay,e.time),c(h))}),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,a=new Array(B=e.tween.length),g=0,I=-1;g<B;++g)(V=e.tween[g].value.call(t,t.__data__,e.index,e.group))&&(a[++I]=V);a.length=I+1}}function c(h){for(var g=h<e.duration?e.ease.call(null,h/e.duration):(e.timer.restart(f),e.state=5,1),I=-1,B=a.length;++I<B;)a[I].call(t,g);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),f())}function f(){for(var h in e.state=6,e.timer.stop(),delete n[r],n)return;delete t.__transition}n[r]=e,e.timer=AE(function s(h){e.state=1,e.timer.restart(l,e.delay,e.time),e.delay<=h&&l(h-e.delay)},0,e.time)}(t,e,{name:r,index:n,group:a,on:kX,tween:IX,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function B0(t,r){var e=Ya(t,r);if(e.state>0)throw new Error("too late; already scheduled");return e}function Is(t,r){var e=Ya(t,r);if(e.state>3)throw new Error("too late; already running");return e}function Ya(t,r){var e=t.__transition;if(!e||!(e=e[r]))throw new Error("transition not found");return e}function j0(t,r){var n,a,l,e=t.__transition,s=!0;if(e){for(l in r=null==r?null:r+"",e)(n=e[l]).name===r?(a=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete e[l]):s=!1;s&&delete t.__transition}}var Tv,DE=180/Math.PI,z0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function OE(t,r,e,n,a,s){var l,c,f;return(l=Math.sqrt(t*t+r*r))&&(t/=l,r/=l),(f=t*e+r*n)&&(e-=t*f,n-=r*f),(c=Math.sqrt(e*e+n*n))&&(e/=c,n/=c,f/=c),t*n<r*e&&(t=-t,r=-r,f=-f,l=-l),{translateX:a,translateY:s,rotate:Math.atan2(r,t)*DE,skewX:Math.atan(f)*DE,scaleX:l,scaleY:c}}function ME(t,r,e,n){function a(h){return h.length?h.pop()+" ":""}return function(h,g){var I=[],B=[];return h=t(h),g=t(g),function s(h,g,I,B,V,ce){if(h!==I||g!==B){var Ie=V.push("translate(",null,r,null,e);ce.push({i:Ie-4,x:Ka(h,I)},{i:Ie-2,x:Ka(g,B)})}else(I||B)&&V.push("translate("+I+r+B+e)}(h.translateX,h.translateY,g.translateX,g.translateY,I,B),function l(h,g,I,B){h!==g?(h-g>180?g+=360:g-h>180&&(h+=360),B.push({i:I.push(a(I)+"rotate(",null,n)-2,x:Ka(h,g)})):g&&I.push(a(I)+"rotate("+g+n)}(h.rotate,g.rotate,I,B),function c(h,g,I,B){h!==g?B.push({i:I.push(a(I)+"skewX(",null,n)-2,x:Ka(h,g)}):g&&I.push(a(I)+"skewX("+g+n)}(h.skewX,g.skewX,I,B),function f(h,g,I,B,V,ce){if(h!==I||g!==B){var Ie=V.push(a(V)+"scale(",null,",",null,")");ce.push({i:Ie-4,x:Ka(h,I)},{i:Ie-2,x:Ka(g,B)})}else(1!==I||1!==B)&&V.push(a(V)+"scale("+I+","+B+")")}(h.scaleX,h.scaleY,g.scaleX,g.scaleY,I,B),h=g=null,function(V){for(var he,ce=-1,Ie=B.length;++ce<Ie;)I[(he=B[ce]).i]=he.x(V);return I.join("")}}}var OX=ME(function RX(t){const r=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?z0:OE(r.a,r.b,r.c,r.d,r.e,r.f)},"px, ","px)","deg)"),MX=ME(function DX(t){return null!=t&&(Tv||(Tv=document.createElementNS("http://www.w3.org/2000/svg","g")),Tv.setAttribute("transform",t),t=Tv.transform.baseVal.consolidate())?OE((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):z0},", ",")",")");function LX(t,r){var e,n;return function(){var a=Is(this,t),s=a.tween;if(s!==e)for(var l=0,c=(n=e=s).length;l<c;++l)if(n[l].name===r){(n=n.slice()).splice(l,1);break}a.tween=n}}function NX(t,r,e){var n,a;if("function"!=typeof e)throw new Error;return function(){var s=Is(this,t),l=s.tween;if(l!==n){a=(n=l).slice();for(var c={name:r,value:e},f=0,h=a.length;f<h;++f)if(a[f].name===r){a[f]=c;break}f===h&&a.push(c)}s.tween=a}}function U0(t,r,e){var n=t._id;return t.each(function(){var a=Is(this,n);(a.value||(a.value={}))[r]=e.apply(this,arguments)}),function(a){return Ya(a,n).value[r]}}function LE(t,r){var e;return("number"==typeof r?Ka:r instanceof ou?vv:(e=ou(r))?(r=e,vv):wE)(t,r)}function jX(t){return function(){this.removeAttribute(t)}}function zX(t){return function(){this.removeAttributeNS(t.space,t.local)}}function UX(t,r,e){var n,s,a=e+"";return function(){var l=this.getAttribute(t);return l===a?null:l===n?s:s=r(n=l,e)}}function VX(t,r,e){var n,s,a=e+"";return function(){var l=this.getAttributeNS(t.space,t.local);return l===a?null:l===n?s:s=r(n=l,e)}}function GX(t,r,e){var n,a,s;return function(){var l,f,c=e(this);return null==c?void this.removeAttribute(t):(l=this.getAttribute(t))===(f=c+"")?null:l===n&&f===a?s:(a=f,s=r(n=l,c))}}function $X(t,r,e){var n,a,s;return function(){var l,f,c=e(this);return null==c?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local))===(f=c+"")?null:l===n&&f===a?s:(a=f,s=r(n=l,c))}}function qX(t,r){return function(e){this.setAttribute(t,r.call(this,e))}}function XX(t,r){return function(e){this.setAttributeNS(t.space,t.local,r.call(this,e))}}function WX(t,r){var e,n;function a(){var s=r.apply(this,arguments);return s!==n&&(e=(n=s)&&XX(t,s)),e}return a._value=r,a}function KX(t,r){var e,n;function a(){var s=r.apply(this,arguments);return s!==n&&(e=(n=s)&&qX(t,s)),e}return a._value=r,a}function QX(t,r){return function(){B0(this,t).delay=+r.apply(this,arguments)}}function JX(t,r){return r=+r,function(){B0(this,t).delay=r}}function eW(t,r){return function(){Is(this,t).duration=+r.apply(this,arguments)}}function tW(t,r){return r=+r,function(){Is(this,t).duration=r}}function iW(t,r){if("function"!=typeof r)throw new Error;return function(){Is(this,t).ease=r}}function uW(t,r,e){var n,a,s=function cW(t){return(t+"").trim().split(/^|\s+/).every(function(r){var e=r.indexOf(".");return e>=0&&(r=r.slice(0,e)),!r||"start"===r})}(r)?B0:Is;return function(){var l=s(this,t),c=l.on;c!==n&&(a=(n=c).copy()).on(r,e),l.on=a}}var gW=xp.prototype.constructor;function NE(t){return function(){this.style.removeProperty(t)}}function wW(t,r,e){return function(n){this.style.setProperty(t,r.call(this,n),e)}}function SW(t,r,e){var n,a;function s(){var l=r.apply(this,arguments);return l!==a&&(n=(a=l)&&wW(t,l,e)),n}return s._value=r,s}function IW(t){return function(r){this.textContent=t.call(this,r)}}function PW(t){var r,e;function n(){var a=t.apply(this,arguments);return a!==e&&(r=(e=a)&&IW(a)),r}return n._value=t,n}var OW=0;function ll(t,r,e,n){this._groups=t,this._parents=r,this._name=e,this._id=n}function BE(){return++OW}var su=xp.prototype;ll.prototype=function MW(t){return xp().transition(t)}.prototype={constructor:ll,select:function pW(t){var r=this._name,e=this._id;"function"!=typeof t&&(t=S0(t));for(var n=this._groups,a=n.length,s=new Array(a),l=0;l<a;++l)for(var g,I,c=n[l],f=c.length,h=s[l]=new Array(f),B=0;B<f;++B)(g=c[B])&&(I=t.call(g,g.__data__,B,c))&&("__data__"in g&&(I.__data__=g.__data__),h[B]=I,Ev(h[B],r,e,B,h,Ya(g,e)));return new ll(s,this._parents,r,e)},selectAll:function mW(t){var r=this._name,e=this._id;"function"!=typeof t&&(t=q1(t));for(var n=this._groups,a=n.length,s=[],l=[],c=0;c<a;++c)for(var g,f=n[c],h=f.length,I=0;I<h;++I)if(g=f[I]){for(var V,B=t.call(g,g.__data__,I,f),ce=Ya(g,e),Ie=0,he=B.length;Ie<he;++Ie)(V=B[Ie])&&Ev(V,r,e,Ie,B,ce);s.push(B),l.push(g)}return new ll(s,l,r,e)},filter:function sW(t){"function"!=typeof t&&(t=X1(t));for(var r=this._groups,e=r.length,n=new Array(e),a=0;a<e;++a)for(var f,s=r[a],l=s.length,c=n[a]=[],h=0;h<l;++h)(f=s[h])&&t.call(f,f.__data__,h,s)&&c.push(f);return new ll(n,this._parents,this._name,this._id)},merge:function lW(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,e=t._groups,n=r.length,s=Math.min(n,e.length),l=new Array(n),c=0;c<s;++c)for(var B,f=r[c],h=e[c],g=f.length,I=l[c]=new Array(g),V=0;V<g;++V)(B=f[V]||h[V])&&(I[V]=B);for(;c<n;++c)l[c]=r[c];return new ll(l,this._parents,this._name,this._id)},selection:function vW(){return new gW(this._groups,this._parents)},transition:function RW(){for(var t=this._name,r=this._id,e=BE(),n=this._groups,a=n.length,s=0;s<a;++s)for(var f,l=n[s],c=l.length,h=0;h<c;++h)if(f=l[h]){var g=Ya(f,r);Ev(f,t,e,h,l,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new ll(n,this._parents,t,e)},call:su.call,nodes:su.nodes,node:su.node,size:su.size,empty:su.empty,each:su.each,on:function dW(t,r){var e=this._id;return arguments.length<2?Ya(this.node(),e).on.on(t):this.each(uW(e,t,r))},attr:function HX(t,r){var e=fv(t),n="transform"===e?MX:LE;return this.attrTween(t,"function"==typeof r?(e.local?$X:GX)(e,n,U0(this,"attr."+t,r)):null==r?(e.local?zX:jX)(e):(e.local?VX:UX)(e,n,r))},attrTween:function YX(t,r){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==r)return this.tween(e,null);if("function"!=typeof r)throw new Error;var n=fv(t);return this.tween(e,(n.local?WX:KX)(n,r))},style:function CW(t,r,e){var n="transform"==(t+="")?OX:LE;return null==r?this.styleTween(t,function yW(t,r){var e,n,a;return function(){var s=zd(this,t),l=(this.style.removeProperty(t),zd(this,t));return s===l?null:s===e&&l===n?a:a=r(e=s,n=l)}}(t,n)).on("end.style."+t,NE(t)):"function"==typeof r?this.styleTween(t,function xW(t,r,e){var n,a,s;return function(){var l=zd(this,t),c=e(this),f=c+"";return null==c&&(this.style.removeProperty(t),f=c=zd(this,t)),l===f?null:l===n&&f===a?s:(a=f,s=r(n=l,c))}}(t,n,U0(this,"style."+t,r))).each(function bW(t,r){var e,n,a,c,s="style."+r,l="end."+s;return function(){var f=Is(this,t),h=f.on,g=null==f.value[s]?c||(c=NE(r)):void 0;(h!==e||a!==g)&&(n=(e=h).copy()).on(l,a=g),f.on=n}}(this._id,t)):this.styleTween(t,function _W(t,r,e){var n,s,a=e+"";return function(){var l=zd(this,t);return l===a?null:l===n?s:s=r(n=l,e)}}(t,n,r),e).on("end.style."+t,null)},styleTween:function EW(t,r,e){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==r)return this.tween(n,null);if("function"!=typeof r)throw new Error;return this.tween(n,SW(t,r,e??""))},text:function kW(t){return this.tween("text","function"==typeof t?function AW(t){return function(){var r=t(this);this.textContent=r??""}}(U0(this,"text",t)):function TW(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function FW(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,PW(t))},remove:function hW(){return this.on("end.remove",function fW(t){return function(){var r=this.parentNode;for(var e in this.__transition)if(+e!==t)return;r&&r.removeChild(this)}}(this._id))},tween:function BX(t,r){var e=this._id;if(t+="",arguments.length<2){for(var l,n=Ya(this.node(),e).tween,a=0,s=n.length;a<s;++a)if((l=n[a]).name===t)return l.value;return null}return this.each((null==r?LX:NX)(e,t,r))},delay:function ZX(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?QX:JX)(r,t)):Ya(this.node(),r).delay},duration:function nW(t){var r=this._id;return arguments.length?this.each(("function"==typeof t?eW:tW)(r,t)):Ya(this.node(),r).duration},ease:function rW(t){var r=this._id;return arguments.length?this.each(iW(r,t)):Ya(this.node(),r).ease},easeVarying:function aW(t){if("function"!=typeof t)throw new Error;return this.each(function oW(t,r){return function(){var e=r.apply(this,arguments);if("function"!=typeof e)throw new Error;Is(this,t).ease=e}}(this._id,t))},end:function DW(){var t,r,e=this,n=e._id,a=e.size();return new Promise(function(s,l){var c={value:l},f={value:function(){0==--a&&s()}};e.each(function(){var h=Is(this,n),g=h.on;g!==t&&((r=(t=g).copy())._.cancel.push(c),r._.interrupt.push(c),r._.end.push(f)),h.on=r}),0===a&&s()})},[Symbol.iterator]:su[Symbol.iterator]};var NW={time:null,delay:0,duration:250,ease:function LW(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function BW(t,r){for(var e;!(e=t.__transition)||!(e=e[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return e}xp.prototype.interrupt=function FX(t){return this.each(function(){j0(this,t)})},xp.prototype.transition=function jW(t){var r,e;t instanceof ll?(r=t._id,t=t._name):(r=BE(),(e=NW).time=O0(),t=null==t?null:t+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var f,l=n[s],c=l.length,h=0;h<c;++h)(f=l[h])&&Ev(f,t,r,h,l,e||BW(f,r));return new ll(n,this._parents,t,r)};const V0=t=>()=>t;function UW(t,{sourceEvent:r,target:e,selection:n,mode:a,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:r,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:n,enumerable:!0,configurable:!0},mode:{value:a,enumerable:!0,configurable:!0},_:{value:s}})}function VW(t){t.stopImmediatePropagation()}function G0(t){t.preventDefault(),t.stopImmediatePropagation()}var jE={name:"drag"},$0={name:"space"},Gd={name:"handle"},$d={name:"center"};const{abs:zE,max:eo,min:to}=Math;function UE(t){return[+t[0],+t[1]]}function H0(t){return[UE(t[0]),UE(t[1])]}var Av={name:"x",handles:["w","e"].map(kp),input:function(t,r){return null==t?null:[[+t[0],r[0][1]],[+t[1],r[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},kv={name:"y",handles:["n","s"].map(kp),input:function(t,r){return null==t?null:[[r[0][0],+t[0]],[r[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},cl=(["n","w","e","s","nw","ne","sw","se"].map(kp),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),VE={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},GE={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},$W={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},HW={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function kp(t){return{type:t}}function qW(t){return!t.ctrlKey&&!t.button}function XW(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function WW(){return navigator.maxTouchPoints||"ontouchstart"in this}function q0(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function KW(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function W0(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function K0(t){let r=t,e=t;function n(l,c,f,h){for(null==f&&(f=0),null==h&&(h=l.length);f<h;){const g=f+h>>>1;e(l[g],c)<0?f=g+1:h=g}return f}return 1===t.length&&(r=(l,c)=>t(l)-c,e=function QW(t){return(r,e)=>W0(t(r),e)}(t)),{left:n,center:function s(l,c,f,h){null==f&&(f=0),null==h&&(h=l.length);const g=n(l,c,f,h-1);return g>f&&r(l[g-1],c)>-r(l[g],c)?g-1:g},right:function a(l,c,f,h){for(null==f&&(f=0),null==h&&(h=l.length);f<h;){const g=f+h>>>1;e(l[g],c)>0?h=g:f=g+1}return f}}}var Y0=Math.sqrt(50),Q0=Math.sqrt(10),J0=Math.sqrt(2);function $E(t,r,e){var n=(r-t)/Math.max(0,e),a=Math.floor(Math.log(n)/Math.LN10),s=n/Math.pow(10,a);return a>=0?(s>=Y0?10:s>=Q0?5:s>=J0?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(s>=Y0?10:s>=Q0?5:s>=J0?2:1)}function Z0(t,r,e){var n=Math.abs(r-t)/Math.max(0,e),a=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),s=n/a;return s>=Y0?a*=10:s>=Q0?a*=5:s>=J0&&(a*=2),r<t?-a:a}const ul=1e3,xa=6e4,dl=60*xa,lu=24*dl,ex=7*lu,HE=30*lu,tx=365*lu;var nx=new Date,ix=new Date;function Rr(t,r,e,n){function a(s){return t(s=0===arguments.length?new Date:new Date(+s)),s}return a.floor=function(s){return t(s=new Date(+s)),s},a.ceil=function(s){return t(s=new Date(s-1)),r(s,1),t(s),s},a.round=function(s){var l=a(s),c=a.ceil(s);return s-l<c-s?l:c},a.offset=function(s,l){return r(s=new Date(+s),null==l?1:Math.floor(l)),s},a.range=function(s,l,c){var h,f=[];if(s=a.ceil(s),c=null==c?1:Math.floor(c),!(s<l&&c>0))return f;do{f.push(h=new Date(+s)),r(s,c),t(s)}while(h<s&&s<l);return f},a.filter=function(s){return Rr(function(l){if(l>=l)for(;t(l),!s(l);)l.setTime(l-1)},function(l,c){if(l>=l)if(c<0)for(;++c<=0;)for(;r(l,-1),!s(l););else for(;--c>=0;)for(;r(l,1),!s(l););})},e&&(a.count=function(s,l){return nx.setTime(+s),ix.setTime(+l),t(nx),t(ix),Math.floor(e(nx,ix))},a.every=function(s){return s=Math.floor(s),isFinite(s)&&s>0?s>1?a.filter(n?function(l){return n(l)%s==0}:function(l){return a.count(0,l)%s==0}):a:null}),a}var Iv=Rr(function(){},function(t,r){t.setTime(+t+r)},function(t,r){return r-t});Iv.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Rr(function(r){r.setTime(Math.floor(r/t)*t)},function(r,e){r.setTime(+r+e*t)},function(r,e){return(e-r)/t}):Iv:null};const ZW=Iv;var qE=Rr(function(t){t.setTime(t-t.getMilliseconds())},function(t,r){t.setTime(+t+r*ul)},function(t,r){return(r-t)/ul},function(t){return t.getUTCSeconds()});const Ip=qE;var XE=Rr(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ul)},function(t,r){t.setTime(+t+r*xa)},function(t,r){return(r-t)/xa},function(t){return t.getMinutes()});const WE=XE;var KE=Rr(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ul-t.getMinutes()*xa)},function(t,r){t.setTime(+t+r*dl)},function(t,r){return(r-t)/dl},function(t){return t.getHours()});const YE=KE;var QE=Rr(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*xa)/lu,t=>t.getDate()-1);const Pv=QE;function cu(t){return Rr(function(r){r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},function(r,e){r.setDate(r.getDate()+7*e)},function(r,e){return(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*xa)/ex})}var Fv=cu(0),Rv=cu(1),Hd=(cu(2),cu(3),cu(4)),JE=(cu(5),cu(6),Rr(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,r){t.setMonth(t.getMonth()+r)},function(t,r){return r.getMonth()-t.getMonth()+12*(r.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}));const ZE=JE;var rx=Rr(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,r){t.setFullYear(t.getFullYear()+r)},function(t,r){return r.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});rx.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rr(function(r){r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,e){r.setFullYear(r.getFullYear()+e*t)}):null};const uu=rx;var eT=Rr(function(t){t.setUTCSeconds(0,0)},function(t,r){t.setTime(+t+r*xa)},function(t,r){return(r-t)/xa},function(t){return t.getUTCMinutes()});const rK=eT;var tT=Rr(function(t){t.setUTCMinutes(0,0,0)},function(t,r){t.setTime(+t+r*dl)},function(t,r){return(r-t)/dl},function(t){return t.getUTCHours()});const oK=tT;var nT=Rr(function(t){t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCDate(t.getUTCDate()+r)},function(t,r){return(r-t)/lu},function(t){return t.getUTCDate()-1});const ox=nT;function du(t){return Rr(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCDate(r.getUTCDate()+7*e)},function(r,e){return(e-r)/ex})}var ax=du(0),Dv=du(1),qd=(du(2),du(3),du(4)),iT=(du(5),du(6),Rr(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCMonth(t.getUTCMonth()+r)},function(t,r){return r.getUTCMonth()-t.getUTCMonth()+12*(r.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}));const uK=iT;var sx=Rr(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r)},function(t,r){return r.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});sx.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rr(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,e){r.setUTCFullYear(r.getUTCFullYear()+e*t)}):null};const Xd=sx;function rT(t,r,e,n,a,s){const l=[[Ip,1,ul],[Ip,5,5e3],[Ip,15,15e3],[Ip,30,3e4],[s,1,xa],[s,5,5*xa],[s,15,15*xa],[s,30,30*xa],[a,1,dl],[a,3,3*dl],[a,6,6*dl],[a,12,12*dl],[n,1,lu],[n,2,2*lu],[e,1,ex],[r,1,HE],[r,3,3*HE],[t,1,tx]];function f(h,g,I){const B=Math.abs(g-h)/I,V=K0(([,,he])=>he).right(l,B);if(V===l.length)return t.every(Z0(h/tx,g/tx,I));if(0===V)return ZW.every(Math.max(Z0(h,g,I),1));const[ce,Ie]=l[B/l[V-1][2]<l[V][2]/B?V-1:V];return ce.every(Ie)}return[function c(h,g,I){const B=g<h;B&&([h,g]=[g,h]);const V=I&&"function"==typeof I.range?I:f(h,g,I),ce=V?V.range(h,+g+1):[];return B?ce.reverse():ce},f]}const[uhe,dhe]=rT(Xd,uK,ax,ox,oK,rK),[dK,fK]=rT(uu,ZE,Fv,Pv,YE,WE);function lx(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function cx(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Pp(t,r,e){return{y:t,m:r,d:e,H:0,M:0,S:0,L:0}}var Wd,_T,oT={"-":"",_:" ",0:"0"},Dr=/^\s*\d+/,pK=/^%/,mK=/[\\^$*+?|[\]().{}]/g;function Jn(t,r,e){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<e?new Array(e-s+1).join(r)+a:a)}function gK(t){return t.replace(mK,"\\$&")}function Fp(t){return new RegExp("^(?:"+t.map(gK).join("|")+")","i")}function Rp(t){return new Map(t.map((r,e)=>[r.toLowerCase(),e]))}function vK(t,r,e){var n=Dr.exec(r.slice(e,e+1));return n?(t.w=+n[0],e+n[0].length):-1}function yK(t,r,e){var n=Dr.exec(r.slice(e,e+1));return n?(t.u=+n[0],e+n[0].length):-1}function _K(t,r,e){var n=Dr.exec(r.slice(e,e+2));return n?(t.U=+n[0],e+n[0].length):-1}function xK(t,r,e){var n=Dr.exec(r.slice(e,e+2));return n?(t.V=+n[0],e+n[0].length):-1}function bK(t,r,e){var n=Dr.exec(r.slice(e,e+2));return n?(t.W=+n[0],e+n[0].length):-1}function aT(t,r,e){var n=Dr.exec(r.slice(e,e+4));return n?(t.y=+n[0],e+n[0].length):-1}function sT(t,r,e){var n=Dr.exec(r.slice(e,e+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),e+n[0].length):-1}function CK(t,r,e){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(e,e+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function wK(t,r,e){var n=Dr.exec(r.slice(e,e+1));return n?(t.q=3*n[0]-3,e+n[0].length):-1}function SK(t,r,e){var n=Dr.exec(r.slice(e,e+2));return n?(t.m=n[0]-1,e+n[0].length):-1}function lT(t,r,e){var n=Dr.exec(r.slice(e,e+2));return n?(t.d=+n[0],e+n[0].length):-1}function EK(t,r,e){var n=Dr.exec(r.slice(e,e+3));return n?(t.m=0,t.d=+n[0],e+n[0].length):-1}function cT(t,r,e){var n=Dr.exec(r.slice(e,e+2));return n?(t.H=+n[0],e+n[0].length):-1}function TK(t,r,e){var n=Dr.exec(r.slice(e,e+2));return n?(t.M=+n[0],e+n[0].length):-1}function AK(t,r,e){var n=Dr.exec(r.slice(e,e+2));return n?(t.S=+n[0],e+n[0].length):-1}function kK(t,r,e){var n=Dr.exec(r.slice(e,e+3));return n?(t.L=+n[0],e+n[0].length):-1}function IK(t,r,e){var n=Dr.exec(r.slice(e,e+6));return n?(t.L=Math.floor(n[0]/1e3),e+n[0].length):-1}function PK(t,r,e){var n=pK.exec(r.slice(e,e+1));return n?e+n[0].length:-1}function FK(t,r,e){var n=Dr.exec(r.slice(e));return n?(t.Q=+n[0],e+n[0].length):-1}function RK(t,r,e){var n=Dr.exec(r.slice(e));return n?(t.s=+n[0],e+n[0].length):-1}function uT(t,r){return Jn(t.getDate(),r,2)}function DK(t,r){return Jn(t.getHours(),r,2)}function OK(t,r){return Jn(t.getHours()%12||12,r,2)}function MK(t,r){return Jn(1+Pv.count(uu(t),t),r,3)}function dT(t,r){return Jn(t.getMilliseconds(),r,3)}function LK(t,r){return dT(t,r)+"000"}function NK(t,r){return Jn(t.getMonth()+1,r,2)}function BK(t,r){return Jn(t.getMinutes(),r,2)}function jK(t,r){return Jn(t.getSeconds(),r,2)}function zK(t){var r=t.getDay();return 0===r?7:r}function UK(t,r){return Jn(Fv.count(uu(t)-1,t),r,2)}function fT(t){var r=t.getDay();return r>=4||0===r?Hd(t):Hd.ceil(t)}function VK(t,r){return t=fT(t),Jn(Hd.count(uu(t),t)+(4===uu(t).getDay()),r,2)}function GK(t){return t.getDay()}function $K(t,r){return Jn(Rv.count(uu(t)-1,t),r,2)}function HK(t,r){return Jn(t.getFullYear()%100,r,2)}function qK(t,r){return Jn((t=fT(t)).getFullYear()%100,r,2)}function XK(t,r){return Jn(t.getFullYear()%1e4,r,4)}function WK(t,r){var e=t.getDay();return Jn((t=e>=4||0===e?Hd(t):Hd.ceil(t)).getFullYear()%1e4,r,4)}function KK(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+Jn(r/60|0,"0",2)+Jn(r%60,"0",2)}function hT(t,r){return Jn(t.getUTCDate(),r,2)}function YK(t,r){return Jn(t.getUTCHours(),r,2)}function QK(t,r){return Jn(t.getUTCHours()%12||12,r,2)}function JK(t,r){return Jn(1+ox.count(Xd(t),t),r,3)}function pT(t,r){return Jn(t.getUTCMilliseconds(),r,3)}function ZK(t,r){return pT(t,r)+"000"}function eY(t,r){return Jn(t.getUTCMonth()+1,r,2)}function tY(t,r){return Jn(t.getUTCMinutes(),r,2)}function nY(t,r){return Jn(t.getUTCSeconds(),r,2)}function iY(t){var r=t.getUTCDay();return 0===r?7:r}function rY(t,r){return Jn(ax.count(Xd(t)-1,t),r,2)}function mT(t){var r=t.getUTCDay();return r>=4||0===r?qd(t):qd.ceil(t)}function oY(t,r){return t=mT(t),Jn(qd.count(Xd(t),t)+(4===Xd(t).getUTCDay()),r,2)}function aY(t){return t.getUTCDay()}function sY(t,r){return Jn(Dv.count(Xd(t)-1,t),r,2)}function lY(t,r){return Jn(t.getUTCFullYear()%100,r,2)}function cY(t,r){return Jn((t=mT(t)).getUTCFullYear()%100,r,2)}function uY(t,r){return Jn(t.getUTCFullYear()%1e4,r,4)}function dY(t,r){var e=t.getUTCDay();return Jn((t=e>=4||0===e?qd(t):qd.ceil(t)).getUTCFullYear()%1e4,r,4)}function fY(){return"+0000"}function gT(){return"%"}function vT(t){return+t}function yT(t){return Math.floor(+t/1e3)}function xT(t){return null===t?NaN:+t}!function gY(t){Wd=function hK(t){var r=t.dateTime,e=t.date,n=t.time,a=t.periods,s=t.days,l=t.shortDays,c=t.months,f=t.shortMonths,h=Fp(a),g=Rp(a),I=Fp(s),B=Rp(s),V=Fp(l),ce=Rp(l),Ie=Fp(c),he=Rp(c),Se=Fp(f),Oe=Rp(f),Be={a:function fi(Kt){return l[Kt.getDay()]},A:function ur(Kt){return s[Kt.getDay()]},b:function Zn(Kt){return f[Kt.getMonth()]},B:function xr(Kt){return c[Kt.getMonth()]},c:null,d:uT,e:uT,f:LK,g:qK,G:WK,H:DK,I:OK,j:MK,L:dT,m:NK,M:BK,p:function er(Kt){return a[+(Kt.getHours()>=12)]},q:function tr(Kt){return 1+~~(Kt.getMonth()/3)},Q:vT,s:yT,S:jK,u:zK,U:UK,V:VK,w:GK,W:$K,x:null,X:null,y:HK,Y:XK,Z:KK,"%":gT},et={a:function Mp(Kt){return l[Kt.getUTCDay()]},A:function tf(Kt){return s[Kt.getUTCDay()]},b:function nf(Kt){return f[Kt.getUTCMonth()]},B:function rf(Kt){return c[Kt.getUTCMonth()]},c:null,d:hT,e:hT,f:ZK,g:cY,G:dY,H:YK,I:QK,j:JK,L:pT,m:eY,M:tY,p:function no(Kt){return a[+(Kt.getUTCHours()>=12)]},q:function Bv(Kt){return 1+~~(Kt.getUTCMonth()/3)},Q:vT,s:yT,S:nY,u:iY,U:rY,V:oY,w:aY,W:sY,x:null,X:null,y:lY,Y:uY,Z:fY,"%":gT},at={a:function an(Kt,Pn,$n){var Lt=V.exec(Pn.slice($n));return Lt?(Kt.w=ce.get(Lt[0].toLowerCase()),$n+Lt[0].length):-1},A:function Vt(Kt,Pn,$n){var Lt=I.exec(Pn.slice($n));return Lt?(Kt.w=B.get(Lt[0].toLowerCase()),$n+Lt[0].length):-1},b:function At(Kt,Pn,$n){var Lt=Se.exec(Pn.slice($n));return Lt?(Kt.m=Oe.get(Lt[0].toLowerCase()),$n+Lt[0].length):-1},B:function $t(Kt,Pn,$n){var Lt=Ie.exec(Pn.slice($n));return Lt?(Kt.m=he.get(Lt[0].toLowerCase()),$n+Lt[0].length):-1},c:function _n(Kt,Pn,$n){return Rt(Kt,r,Pn,$n)},d:lT,e:lT,f:IK,g:sT,G:aT,H:cT,I:cT,j:EK,L:kK,m:SK,M:TK,p:function on(Kt,Pn,$n){var Lt=h.exec(Pn.slice($n));return Lt?(Kt.p=g.get(Lt[0].toLowerCase()),$n+Lt[0].length):-1},q:wK,Q:FK,s:RK,S:AK,u:yK,U:_K,V:xK,w:vK,W:bK,x:function Wn(Kt,Pn,$n){return Rt(Kt,e,Pn,$n)},X:function fn(Kt,Pn,$n){return Rt(Kt,n,Pn,$n)},y:sT,Y:aT,Z:CK,"%":PK};function ft(Kt,Pn){return function($n){var go,wn,Xi,Lt=[],qi=-1,hi=0,mo=Kt.length;for($n instanceof Date||($n=new Date(+$n));++qi<mo;)37===Kt.charCodeAt(qi)&&(Lt.push(Kt.slice(hi,qi)),null!=(wn=oT[go=Kt.charAt(++qi)])?go=Kt.charAt(++qi):wn="e"===go?" ":"0",(Xi=Pn[go])&&(go=Xi($n,wn)),Lt.push(go),hi=qi+1);return Lt.push(Kt.slice(hi,qi)),Lt.join("")}}function Pt(Kt,Pn){return function($n){var hi,mo,Lt=Pp(1900,void 0,1);if(Rt(Lt,Kt,$n+="",0)!=$n.length)return null;if("Q"in Lt)return new Date(Lt.Q);if("s"in Lt)return new Date(1e3*Lt.s+("L"in Lt?Lt.L:0));if(Pn&&!("Z"in Lt)&&(Lt.Z=0),"p"in Lt&&(Lt.H=Lt.H%12+12*Lt.p),void 0===Lt.m&&(Lt.m="q"in Lt?Lt.q:0),"V"in Lt){if(Lt.V<1||Lt.V>53)return null;"w"in Lt||(Lt.w=1),"Z"in Lt?(mo=(hi=cx(Pp(Lt.y,0,1))).getUTCDay(),hi=mo>4||0===mo?Dv.ceil(hi):Dv(hi),hi=ox.offset(hi,7*(Lt.V-1)),Lt.y=hi.getUTCFullYear(),Lt.m=hi.getUTCMonth(),Lt.d=hi.getUTCDate()+(Lt.w+6)%7):(mo=(hi=lx(Pp(Lt.y,0,1))).getDay(),hi=mo>4||0===mo?Rv.ceil(hi):Rv(hi),hi=Pv.offset(hi,7*(Lt.V-1)),Lt.y=hi.getFullYear(),Lt.m=hi.getMonth(),Lt.d=hi.getDate()+(Lt.w+6)%7)}else("W"in Lt||"U"in Lt)&&("w"in Lt||(Lt.w="u"in Lt?Lt.u%7:"W"in Lt?1:0),mo="Z"in Lt?cx(Pp(Lt.y,0,1)).getUTCDay():lx(Pp(Lt.y,0,1)).getDay(),Lt.m=0,Lt.d="W"in Lt?(Lt.w+6)%7+7*Lt.W-(mo+5)%7:Lt.w+7*Lt.U-(mo+6)%7);return"Z"in Lt?(Lt.H+=Lt.Z/100|0,Lt.M+=Lt.Z%100,cx(Lt)):lx(Lt)}}function Rt(Kt,Pn,$n,Lt){for(var go,wn,qi=0,hi=Pn.length,mo=$n.length;qi<hi;){if(Lt>=mo)return-1;if(37===(go=Pn.charCodeAt(qi++))){if(go=Pn.charAt(qi++),!(wn=at[go in oT?Pn.charAt(qi++):go])||(Lt=wn(Kt,$n,Lt))<0)return-1}else if(go!=$n.charCodeAt(Lt++))return-1}return Lt}return Be.x=ft(e,Be),Be.X=ft(n,Be),Be.c=ft(r,Be),et.x=ft(e,et),et.X=ft(n,et),et.c=ft(r,et),{format:function(Kt){var Pn=ft(Kt+="",Be);return Pn.toString=function(){return Kt},Pn},parse:function(Kt){var Pn=Pt(Kt+="",!1);return Pn.toString=function(){return Kt},Pn},utcFormat:function(Kt){var Pn=ft(Kt+="",et);return Pn.toString=function(){return Kt},Pn},utcParse:function(Kt){var Pn=Pt(Kt+="",!0);return Pn.toString=function(){return Kt},Pn}}}(t),_T=Wd.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const vY=K0(W0).right,CT=(K0(xT),vY);function yY(t,r){return t=+t,r=+r,function(e){return Math.round(t*(1-e)+r*e)}}function xY(t){return+t}var wT=[0,1];function Kd(t){return t}function ux(t,r){return(r-=t=+t)?function(e){return(e-t)/r}:function _Y(t){return function(){return t}}(isNaN(r)?NaN:.5)}function CY(t,r,e){var n=t[0],a=t[1],s=r[0],l=r[1];return a<n?(n=ux(a,n),s=e(l,s)):(n=ux(n,a),s=e(s,l)),function(c){return s(n(c))}}function wY(t,r,e){var n=Math.min(t.length,r.length)-1,a=new Array(n),s=new Array(n),l=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++l<n;)a[l]=ux(t[l],t[l+1]),s[l]=e(r[l],r[l+1]);return function(c){var f=CT(t,c,1,n)-1;return s[f](a[f](c))}}function ST(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ET(){return function SY(){var n,a,s,c,f,h,t=wT,r=wT,e=yv,l=Kd;function g(){var B=Math.min(t.length,r.length);return l!==Kd&&(l=function bY(t,r){var e;return t>r&&(e=t,t=r,r=e),function(n){return Math.max(t,Math.min(r,n))}}(t[0],t[B-1])),c=B>2?wY:CY,f=h=null,I}function I(B){return null==B||isNaN(B=+B)?s:(f||(f=c(t.map(n),r,e)))(n(l(B)))}return I.invert=function(B){return l(a((h||(h=c(r,t.map(n),Ka)))(B)))},I.domain=function(B){return arguments.length?(t=Array.from(B,xY),g()):t.slice()},I.range=function(B){return arguments.length?(r=Array.from(B),g()):r.slice()},I.rangeRound=function(B){return r=Array.from(B),e=yY,g()},I.clamp=function(B){return arguments.length?(l=!!B||Kd,g()):l!==Kd},I.interpolate=function(B){return arguments.length?(e=B,g()):e},I.unknown=function(B){return arguments.length?(s=B,I):s},function(B,V){return n=B,a=V,g()}}()(Kd,Kd)}function Dp(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t)}return this}function TY(t){return new Date(t)}function AY(t){return t instanceof Date?+t:+new Date(+t)}function TT(t,r,e,n,a,s,l,c,f,h){var g=ET(),I=g.invert,B=g.domain,V=h(".%L"),ce=h(":%S"),Ie=h("%I:%M"),he=h("%I %p"),Se=h("%a %d"),Oe=h("%b %d"),Be=h("%B"),et=h("%Y");function at(ft){return(f(ft)<ft?V:c(ft)<ft?ce:l(ft)<ft?Ie:s(ft)<ft?he:n(ft)<ft?a(ft)<ft?Se:Oe:e(ft)<ft?Be:et)(ft)}return g.invert=function(ft){return new Date(I(ft))},g.domain=function(ft){return arguments.length?B(Array.from(ft,AY)):B().map(TY)},g.ticks=function(ft){var Pt=B();return t(Pt[0],Pt[Pt.length-1],ft??10)},g.tickFormat=function(ft,Pt){return null==Pt?at:h(Pt)},g.nice=function(ft){var Pt=B();return(!ft||"function"!=typeof ft.range)&&(ft=r(Pt[0],Pt[Pt.length-1],ft??10)),ft?B(function EY(t,r){var l,e=0,n=(t=t.slice()).length-1,a=t[e],s=t[n];return s<a&&(l=e,e=n,n=l,l=a,a=s,s=l),t[e]=r.floor(a),t[n]=r.ceil(s),t}(Pt,ft)):g},g.copy=function(){return ST(g,TT(t,r,e,n,a,s,l,c,f,h))},g}function AT(){return Dp.apply(TT(dK,fK,uu,ZE,Fv,Pv,YE,WE,Ip,_T).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var kT,kY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ov(t){if(!(r=kY.exec(t)))throw new Error("invalid format: "+t);var r;return new dx({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function dx(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Mv(t,r){if((e=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var e,n=t.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+t.slice(e+1)]}function Yd(t){return(t=Mv(Math.abs(t)))?t[1]:NaN}function IT(t,r){var e=Mv(t,r);if(!e)return t+"";var n=e[0],a=e[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}Ov.prototype=dx.prototype,dx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const PT={"%":(t,r)=>(100*t).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function IY(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>IT(100*t,r),r:IT,s:function OY(t,r){var e=Mv(t,r);if(!e)return t+"";var n=e[0],a=e[1],s=a-(kT=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,l=n.length;return s===l?n:s>l?n+new Array(s-l+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Mv(t,Math.max(0,r+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function FT(t){return t}var Lv,OT,MT,RT=Array.prototype.map,DT=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function zY(t){var r=t.domain;return t.ticks=function(e){var n=r();return function JW(t,r,e){var n,s,l,c,a=-1;if(e=+e,(t=+t)==(r=+r)&&e>0)return[t];if((n=r<t)&&(s=t,t=r,r=s),0===(c=$E(t,r,e))||!isFinite(c))return[];if(c>0){let f=Math.round(t/c),h=Math.round(r/c);for(f*c<t&&++f,h*c>r&&--h,l=new Array(s=h-f+1);++a<s;)l[a]=(f+a)*c}else{c=-c;let f=Math.round(t*c),h=Math.round(r*c);for(f/c<t&&++f,h/c>r&&--h,l=new Array(s=h-f+1);++a<s;)l[a]=(f+a)/c}return n&&l.reverse(),l}(n[0],n[n.length-1],e??10)},t.tickFormat=function(e,n){var a=r();return function jY(t,r,e,n){var s,a=Z0(t,r,e);switch((n=Ov(n??",f")).type){case"s":var l=Math.max(Math.abs(t),Math.abs(r));return null==n.precision&&!isNaN(s=function PY(t,r){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Yd(r)/3)))-Yd(Math.abs(t)))}(a,l))&&(n.precision=s),MT(n,l);case"":case"e":case"g":case"p":case"r":null==n.precision&&!isNaN(s=function NY(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,Yd(r)-Yd(t))+1}(a,Math.max(Math.abs(t),Math.abs(r))))&&(n.precision=s-("e"===n.type));break;case"f":case"%":null==n.precision&&!isNaN(s=function BY(t){return Math.max(0,-Yd(Math.abs(t)))}(a))&&(n.precision=s-2*("%"===n.type))}return OT(n)}(a[0],a[a.length-1],e??10,n)},t.nice=function(e){null==e&&(e=10);var f,h,n=r(),a=0,s=n.length-1,l=n[a],c=n[s],g=10;for(c<l&&(h=l,l=c,c=h,h=a,a=s,s=h);g-- >0;){if((h=$E(l,c,e))===f)return n[a]=l,n[s]=c,r(n);if(h>0)l=Math.floor(l/h)*h,c=Math.ceil(c/h)*h;else{if(!(h<0))break;l=Math.ceil(l*h)/h,c=Math.floor(c*h)/h}f=h}return t},t}function fu(){var t=ET();return t.copy=function(){return ST(t,fu())},Dp.apply(t,arguments),zY(t)}function LT(t,r,e){t=+t,r=+r,e=(a=arguments.length)<2?(r=t,t=0,1):a<3?1:+e;for(var n=-1,a=0|Math.max(0,Math.ceil((r-t)/e)),s=new Array(a);++n<a;)s[n]=t+n*e;return s}!function LY(t){Lv=function MY(t){var r=void 0===t.grouping||void 0===t.thousands?FT:function FY(t,r){return function(e,n){for(var a=e.length,s=[],l=0,c=t[0],f=0;a>0&&c>0&&(f+c+1>n&&(c=Math.max(1,n-f)),s.push(e.substring(a-=c,a+c)),!((f+=c+1)>n));)c=t[l=(l+1)%t.length];return s.reverse().join(r)}}(RT.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",n=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?FT:function RY(t){return function(r){return r.replace(/[0-9]/g,function(e){return t[+e]})}}(RT.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"\u2212":t.minus+"",f=void 0===t.nan?"NaN":t.nan+"";function h(I){var B=(I=Ov(I)).fill,V=I.align,ce=I.sign,Ie=I.symbol,he=I.zero,Se=I.width,Oe=I.comma,Be=I.precision,et=I.trim,at=I.type;"n"===at?(Oe=!0,at="g"):PT[at]||(void 0===Be&&(Be=12),et=!0,at="g"),(he||"0"===B&&"="===V)&&(he=!0,B="0",V="=");var ft="$"===Ie?e:"#"===Ie&&/[boxX]/.test(at)?"0"+at.toLowerCase():"",Pt="$"===Ie?n:/[%p]/.test(at)?l:"",Rt=PT[at],on=/[defgprs%]/.test(at);function an(Vt){var _n,Wn,fn,At=ft,$t=Pt;if("c"===at)$t=Rt(Vt)+$t,Vt="";else{var fi=(Vt=+Vt)<0||1/Vt<0;if(Vt=isNaN(Vt)?f:Rt(Math.abs(Vt),Be),et&&(Vt=function DY(t){e:for(var a,r=t.length,e=1,n=-1;e<r;++e)switch(t[e]){case".":n=a=e;break;case"0":0===n&&(n=e),a=e;break;default:if(!+t[e])break e;n>0&&(n=0)}return n>0?t.slice(0,n)+t.slice(a+1):t}(Vt)),fi&&0==+Vt&&"+"!==ce&&(fi=!1),At=(fi?"("===ce?ce:c:"-"===ce||"("===ce?"":ce)+At,$t=("s"===at?DT[8+kT/3]:"")+$t+(fi&&"("===ce?")":""),on)for(_n=-1,Wn=Vt.length;++_n<Wn;)if(48>(fn=Vt.charCodeAt(_n))||fn>57){$t=(46===fn?a+Vt.slice(_n+1):Vt.slice(_n))+$t,Vt=Vt.slice(0,_n);break}}Oe&&!he&&(Vt=r(Vt,1/0));var ur=At.length+Vt.length+$t.length,Zn=ur<Se?new Array(Se-ur+1).join(B):"";switch(Oe&&he&&(Vt=r(Zn+Vt,Zn.length?Se-$t.length:1/0),Zn=""),V){case"<":Vt=At+Vt+$t+Zn;break;case"=":Vt=At+Zn+Vt+$t;break;case"^":Vt=Zn.slice(0,ur=Zn.length>>1)+At+Vt+$t+Zn.slice(ur);break;default:Vt=Zn+At+Vt+$t}return s(Vt)}return Be=void 0===Be?6:/[gprs]/.test(at)?Math.max(1,Math.min(21,Be)):Math.max(0,Math.min(20,Be)),an.toString=function(){return I+""},an}return{format:h,formatPrefix:function g(I,B){var V=h(((I=Ov(I)).type="f",I)),ce=3*Math.max(-8,Math.min(8,Math.floor(Yd(B)/3))),Ie=Math.pow(10,-ce),he=DT[8+ce/3];return function(Se){return V(Ie*Se)+he}}}}(t),OT=Lv.format,MT=Lv.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});const NT=Symbol("implicit");function fx(){var t=new Map,r=[],e=[],n=NT;function a(s){var l=s+"",c=t.get(l);if(!c){if(n!==NT)return n;t.set(l,c=r.push(s))}return e[(c-1)%e.length]}return a.domain=function(s){if(!arguments.length)return r.slice();r=[],t=new Map;for(const l of s){const c=l+"";t.has(c)||t.set(c,r.push(l))}return a},a.range=function(s){return arguments.length?(e=Array.from(s),a):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return fx(r,e).unknown(n)},Dp.apply(a,arguments),a}function hx(){var s,l,t=fx().unknown(void 0),r=t.domain,e=t.range,n=0,a=1,c=!1,f=0,h=0,g=.5;function I(){var B=r().length,V=a<n,ce=V?a:n,Ie=V?n:a;s=(Ie-ce)/Math.max(1,B-f+2*h),c&&(s=Math.floor(s)),ce+=(Ie-ce-s*(B-f))*g,l=s*(1-f),c&&(ce=Math.round(ce),l=Math.round(l));var he=LT(B).map(function(Se){return ce+s*Se});return e(V?he.reverse():he)}return delete t.unknown,t.domain=function(B){return arguments.length?(r(B),I()):r()},t.range=function(B){return arguments.length?([n,a]=B,n=+n,a=+a,I()):[n,a]},t.rangeRound=function(B){return[n,a]=B,n=+n,a=+a,c=!0,I()},t.bandwidth=function(){return l},t.step=function(){return s},t.round=function(B){return arguments.length?(c=!!B,I()):c},t.padding=function(B){return arguments.length?(f=Math.min(1,h=+B),I()):f},t.paddingInner=function(B){return arguments.length?(f=Math.min(1,B),I()):f},t.paddingOuter=function(B){return arguments.length?(h=+B,I()):h},t.align=function(B){return arguments.length?(g=Math.max(0,Math.min(1,B)),I()):g},t.copy=function(){return hx(r(),[n,a]).round(c).paddingInner(f).paddingOuter(h).align(g)},Dp.apply(I(),arguments)}function BT(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return BT(r())},t}function jT(){return BT(hx.apply(null,arguments).paddingInner(1))}function UY(t,r,e=xT){if(n=t.length){if((r=+r)<=0||n<2)return+e(t[0],0,t);if(r>=1)return+e(t[n-1],n-1,t);var n,a=(n-1)*r,s=Math.floor(a),l=+e(t[s],s,t);return l+(+e(t[s+1],s+1,t)-l)*(a-s)}}function zT(){var n,t=[],r=[],e=[];function a(){var l=0,c=Math.max(1,r.length);for(e=new Array(c-1);++l<c;)e[l-1]=UY(t,l/c);return s}function s(l){return null==l||isNaN(l=+l)?n:r[CT(e,l)]}return s.invertExtent=function(l){var c=r.indexOf(l);return c<0?[NaN,NaN]:[c>0?e[c-1]:t[0],c<e.length?e[c]:t[t.length-1]]},s.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let c of l)null!=c&&!isNaN(c=+c)&&t.push(c);return t.sort(W0),a()},s.range=function(l){return arguments.length?(r=Array.from(l),a()):r.slice()},s.unknown=function(l){return arguments.length?(n=l,s):n},s.quantiles=function(){return e.slice()},s.copy=function(){return zT().domain(t).range(r).unknown(n)},Dp.apply(s,arguments)}const px=Math.PI,mx=2*px,hu=1e-6,VY=mx-hu;function gx(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function UT(){return new gx}gx.prototype=UT.prototype={constructor:gx,moveTo:function(t,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,r){this._+="L"+(this._x1=+t)+","+(this._y1=+r)},quadraticCurveTo:function(t,r,e,n){this._+="Q"+ +t+","+ +r+","+(this._x1=+e)+","+(this._y1=+n)},bezierCurveTo:function(t,r,e,n,a,s){this._+="C"+ +t+","+ +r+","+ +e+","+ +n+","+(this._x1=+a)+","+(this._y1=+s)},arcTo:function(t,r,e,n,a){var s=this._x1,l=this._y1,c=(e=+e)-(t=+t),f=(n=+n)-(r=+r),h=s-t,g=l-r,I=h*h+g*g;if((a=+a)<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=r);else if(I>hu)if(Math.abs(g*c-f*h)>hu&&a){var B=e-s,V=n-l,ce=c*c+f*f,Ie=B*B+V*V,he=Math.sqrt(ce),Se=Math.sqrt(I),Oe=a*Math.tan((px-Math.acos((ce+I-Ie)/(2*he*Se)))/2),Be=Oe/Se,et=Oe/he;Math.abs(Be-1)>hu&&(this._+="L"+(t+Be*h)+","+(r+Be*g)),this._+="A"+a+","+a+",0,0,"+ +(g*B>h*V)+","+(this._x1=t+et*c)+","+(this._y1=r+et*f)}else this._+="L"+(this._x1=t)+","+(this._y1=r)},arc:function(t,r,e,n,a,s){t=+t,r=+r,s=!!s;var l=(e=+e)*Math.cos(n),c=e*Math.sin(n),f=t+l,h=r+c,g=1^s,I=s?n-a:a-n;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+f+","+h:(Math.abs(this._x1-f)>hu||Math.abs(this._y1-h)>hu)&&(this._+="L"+f+","+h),e&&(I<0&&(I=I%mx+mx),I>VY?this._+="A"+e+","+e+",0,1,"+g+","+(t-l)+","+(r-c)+"A"+e+","+e+",0,1,"+g+","+(this._x1=f)+","+(this._y1=h):I>hu&&(this._+="A"+e+","+e+",0,"+ +(I>=px)+","+g+","+(this._x1=t+e*Math.cos(a))+","+(this._y1=r+e*Math.sin(a))))},rect:function(t,r,e,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+r)+"h"+ +e+"v"+ +n+"h"+-e+"Z"},toString:function(){return this._}};const VT=UT;function GT(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Or(t){return function(){return t}}function $T(t){this._context=t}function vx(t){return new $T(t)}function HT(t){return t[0]}function qT(t){return t[1]}function XT(t,r){var e=Or(!0),n=null,a=vx,s=null;function l(c){var f,g,B,h=(c=GT(c)).length,I=!1;for(null==n&&(s=a(B=VT())),f=0;f<=h;++f)!(f<h&&e(g=c[f],f,c))===I&&((I=!I)?s.lineStart():s.lineEnd()),I&&s.point(+t(g,f,c),+r(g,f,c));if(B)return s=null,B+""||null}return t="function"==typeof t?t:void 0===t?HT:Or(t),r="function"==typeof r?r:void 0===r?qT:Or(r),l.x=function(c){return arguments.length?(t="function"==typeof c?c:Or(+c),l):t},l.y=function(c){return arguments.length?(r="function"==typeof c?c:Or(+c),l):r},l.defined=function(c){return arguments.length?(e="function"==typeof c?c:Or(!!c),l):e},l.curve=function(c){return arguments.length?(a=c,null!=n&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(null==c?n=s=null:s=a(n=c),l):n},l}function WT(t,r,e){var n=null,a=Or(!0),s=null,l=vx,c=null;function f(g){var I,B,V,Ie,Se,ce=(g=GT(g)).length,he=!1,Oe=new Array(ce),Be=new Array(ce);for(null==s&&(c=l(Se=VT())),I=0;I<=ce;++I){if(!(I<ce&&a(Ie=g[I],I,g))===he)if(he=!he)B=I,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),V=I-1;V>=B;--V)c.point(Oe[V],Be[V]);c.lineEnd(),c.areaEnd()}he&&(Oe[I]=+t(Ie,I,g),Be[I]=+r(Ie,I,g),c.point(n?+n(Ie,I,g):Oe[I],e?+e(Ie,I,g):Be[I]))}if(Se)return c=null,Se+""||null}function h(){return XT().defined(a).curve(l).context(s)}return t="function"==typeof t?t:void 0===t?HT:Or(+t),r="function"==typeof r?r:Or(void 0===r?0:+r),e="function"==typeof e?e:void 0===e?qT:Or(+e),f.x=function(g){return arguments.length?(t="function"==typeof g?g:Or(+g),n=null,f):t},f.x0=function(g){return arguments.length?(t="function"==typeof g?g:Or(+g),f):t},f.x1=function(g){return arguments.length?(n=null==g?null:"function"==typeof g?g:Or(+g),f):n},f.y=function(g){return arguments.length?(r="function"==typeof g?g:Or(+g),e=null,f):r},f.y0=function(g){return arguments.length?(r="function"==typeof g?g:Or(+g),f):r},f.y1=function(g){return arguments.length?(e=null==g?null:"function"==typeof g?g:Or(+g),f):e},f.lineX0=f.lineY0=function(){return h().x(t).y(r)},f.lineY1=function(){return h().x(t).y(e)},f.lineX1=function(){return h().x(n).y(r)},f.defined=function(g){return arguments.length?(a="function"==typeof g?g:Or(!!g),f):a},f.curve=function(g){return arguments.length?(l=g,null!=s&&(c=l(s)),f):l},f.context=function(g){return arguments.length?(null==g?s=c=null:c=l(s=g),f):s},f}$T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r)}}},S(1381);const GY=["caretElm"];function $Y(t,r){}const HY=function(t){return{model:t}};function qY(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275template(1,$Y,0,0,"ng-template",5),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",e.template)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,HY,e.context))}}function XY(t,r){if(1&t&&o.\u0275\u0275element(0,"span",6),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("innerHTML",e.title,o.\u0275\u0275sanitizeHtml)}}function WY(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"header",4),o.\u0275\u0275elementStart(1,"span",5),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.title)}}function KY(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li",6),o.\u0275\u0275elementStart(1,"ngx-charts-legend-entry",7),o.\u0275\u0275listener("select",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().labelClick.emit(a)})("activate",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().activate(a)})("deactivate",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().deactivate(a)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("label",e.label)("formattedLabel",e.formattedLabel)("color",e.color)("isActive",n.isActive(e))}}function YY(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275element(0,"ngx-charts-scale-legend",4)),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("valueRange",e.legendOptions.domain)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)}}function QY(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275namespaceSVG(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(0,"ngx-charts-legend",5),o.\u0275\u0275listener("labelClick",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().legendLabelClick.emit(a)})("labelActivate",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().legendLabelActivate.emit(a)})("labelDeactivate",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().legendLabelDeactivate.emit(a)}),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("data",e.legendOptions.domain)("title",e.legendOptions.title)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)("activeEntries",e.activeEntries)}}const KT=["*"],JY=["ngx-charts-axis-label",""],YT=["ticksel"],ZY=["ngx-charts-x-axis-ticks",""];function eQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",3),o.\u0275\u0275elementStart(1,"title"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"text",4),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275attribute("transform",n.tickTransform(e)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(n.tickFormat(e)),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("font-size","12px"),o.\u0275\u0275attribute("text-anchor",n.textAnchor)("transform",n.textTransform),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.tickTrim(n.tickFormat(e))," ")}}function tQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275element(1,"line",6),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275attribute("transform",e.gridLineTransform()),o.\u0275\u0275advance(1),o.\u0275\u0275attribute("y1",-e.gridLineHeight)}}function nQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275template(1,tQ,2,2,"g",5),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275attribute("transform",n.tickTransform(e)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.showGridLines)}}const iQ=["ngx-charts-x-axis",""];function rQ(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",2),o.\u0275\u0275listener("dimensionsChanged",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().emitTicksHeight(a)}),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("trimTicks",e.trimTicks)("rotateTicks",e.rotateTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickStroke",e.tickStroke)("scale",e.xScale)("orient",e.xOrient)("showGridLines",e.showGridLines)("gridLineHeight",e.dims.height)("width",e.dims.width)("tickValues",e.ticks)}}function oQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"g",3)),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("label",e.labelText)("offset",e.labelOffset)("orient",e.orientation.Bottom)("height",e.dims.height)("width",e.dims.width)}}const aQ=["ngx-charts-y-axis-ticks",""];function sQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",4),o.\u0275\u0275elementStart(1,"title"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"text",5),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275attribute("transform",n.transform(e)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(n.tickFormat(e)),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("font-size","12px"),o.\u0275\u0275attribute("dy",n.dy)("x",n.x1)("y",n.y1)("text-anchor",n.textAnchor),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.tickTrim(n.tickFormat(e))," ")}}function lQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"path",6)),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275attribute("d",e.referenceAreaPath)("transform",e.gridLineTransform())}}function cQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"line",9)),2&t){const e=o.\u0275\u0275nextContext(3);o.\u0275\u0275attribute("x2",e.gridLineWidth)}}function uQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"line",9)),2&t){const e=o.\u0275\u0275nextContext(3);o.\u0275\u0275attribute("x2",-e.gridLineWidth)}}function dQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275template(1,cQ,1,1,"line",8),o.\u0275\u0275template(2,uQ,1,1,"line",8),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275attribute("transform",e.gridLineTransform()),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.orient===e.Orientation.Left),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.orient===e.Orientation.Right)}}function fQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275template(1,dQ,3,3,"g",7),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275attribute("transform",n.transform(e)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.showGridLines)}}function hQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275elementStart(1,"title"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"text",11),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext(2).$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(n.tickTrim(n.tickFormat(e.value))),o.\u0275\u0275advance(1),o.\u0275\u0275attribute("dy",n.dy)("y",-6)("x",n.gridLineWidth)("text-anchor",n.textAnchor),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.name," ")}}function pQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275element(1,"line",10),o.\u0275\u0275template(2,hQ,5,6,"g",7),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext().$implicit,n=o.\u0275\u0275nextContext();o.\u0275\u0275attribute("transform",n.transform(e.value)),o.\u0275\u0275advance(1),o.\u0275\u0275attribute("x2",n.gridLineWidth)("transform",n.gridLineTransform()),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.showRefLabels)}}function mQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275template(1,pQ,3,4,"g",7),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.showRefLines)}}const gQ=["ngx-charts-y-axis",""];function vQ(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",2),o.\u0275\u0275listener("dimensionsChanged",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().emitTicksWidth(a)}),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("trimTicks",e.trimTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickValues",e.ticks)("tickStroke",e.tickStroke)("scale",e.yScale)("orient",e.yOrient)("showGridLines",e.showGridLines)("gridLineWidth",e.dims.width)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)("height",e.dims.height)}}function yQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"g",3)),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("label",e.labelText)("offset",e.labelOffset)("orient",e.yOrient)("height",e.dims.height)("width",e.dims.width)}}const _Q=["ngx-charts-svg-linear-gradient",""];function xQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"stop")),2&t){const e=r.$implicit;o.\u0275\u0275styleProp("stop-color",e.color)("stop-opacity",e.opacity),o.\u0275\u0275attribute("offset",e.offset+"%")}}const bQ=["ngx-charts-circle",""],CQ=["ngx-charts-circle-series",""];function wQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"rect",4)),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("@animationState","active"),o.\u0275\u0275attribute("x",e.circle.cx-e.circle.radius)("y",e.circle.cy)("width",2*e.circle.radius)("height",e.circle.height)("fill",e.gradientFill)}}function SQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"rect",4)),2&t){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275attribute("x",e.circle.cx-e.circle.radius)("y",e.circle.cy)("width",2*e.circle.radius)("height",e.circle.height)("fill",e.gradientFill)}}const EQ=function(t){return{name:t}};function TQ(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275elementStart(1,"defs"),o.\u0275\u0275element(2,"g",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,wQ,1,6,"rect",2),o.\u0275\u0275template(4,SQ,1,5,"rect",2),o.\u0275\u0275elementStart(5,"g",3),o.\u0275\u0275listener("select",function(){o.\u0275\u0275restoreView(e);const a=o.\u0275\u0275nextContext();return a.onClick(a.circle.data)})("activate",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().activateCircle()})("deactivate",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().deactivateCircle()}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.circle.gradientStops),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.isSSR&&e.barVisible&&"standard"===e.type),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.isSSR&&e.barVisible&&"standard"===e.type),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("active",e.isActive(o.\u0275\u0275pureFunction1(20,EQ,e.circle.seriesName))),o.\u0275\u0275property("cx",e.circle.cx)("cy",e.circle.cy)("r",e.circle.radius)("fill",e.circle.color)("pointerEvents",0===e.circle.value?"none":"all")("data",e.circle.value)("classNames",e.circle.classNames)("tooltipDisabled",e.tooltipDisabled)("tooltipPlacement",e.placementTypes.Top)("tooltipType",e.styleTypes.tooltip)("tooltipTitle",e.tooltipTemplate?void 0:e.getTooltipText(e.circle))("tooltipTemplate",e.tooltipTemplate)("tooltipContext",e.circle.data)}}const RQ=["ngx-charts-area",""];function DQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"defs"),o.\u0275\u0275element(1,"g",2),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.gradientStops)}}const MQ=["tooltipAnchor"],LQ=["ngx-charts-tooltip-area",""];function NQ(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",6),o.\u0275\u0275element(1,"span",7),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("background-color",e.color),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.getToolTipText(e)," ")}}function BQ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(0,"div",4),o.\u0275\u0275template(1,NQ,3,3,"div",5),o.\u0275\u0275elementEnd()),2&t){const e=r.model;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e)}}const jQ=["ngx-charts-timeline",""],XQ=["tooltipTemplate"],WQ=["seriesTooltipTemplate"],Op=function(t,r){return[t,r]},wJ=["ngx-charts-line",""];function SJ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275element(1,"path",1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("@animationState","active"),o.\u0275\u0275attribute("d",e.initialPath)("fill",e.fill)("stroke",e.stroke)}}function EJ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275element(1,"path",1),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275attribute("d",e.initialPath)("fill",e.fill)("stroke",e.stroke)}}const TJ=["ngx-charts-line-series",""];function AJ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"g",4)),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.gradientStops)}}function kJ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"g",5)),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("active",e.isActive(e.data))("inactive",e.isInactive(e.data)),o.\u0275\u0275property("data",e.data)("path",e.outerPath)("fill",e.hasGradient?e.gradientUrl:e.colors.getColor(e.data.name))("opacity",e.rangeFillOpacity)("animations",e.animations)}}function IJ(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",7),o.\u0275\u0275listener("dimensionsChanged",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().updateXAxisHeight(a)}),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function PJ(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",8),o.\u0275\u0275listener("dimensionsChanged",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().updateYAxisWidth(a)}),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)}}function FJ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275element(1,"g",10),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("@animationState","active"),o.\u0275\u0275advance(1),o.\u0275\u0275property("xScale",n.xScale)("yScale",n.yScale)("colors",n.colors)("data",e)("activeEntries",n.activeEntries)("scaleType",n.scaleType)("curve",n.curve)("rangeFillOpacity",n.rangeFillOpacity)("hasRange",n.hasRange)("animations",n.animations)}}function RJ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275template(1,FJ,2,11,"g",9),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function DJ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275element(1,"g",10),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("xScale",n.xScale)("yScale",n.yScale)("colors",n.colors)("data",e)("activeEntries",n.activeEntries)("scaleType",n.scaleType)("curve",n.curve)("rangeFillOpacity",n.rangeFillOpacity)("hasRange",n.hasRange)("animations",n.animations)}}function OJ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275template(1,DJ,2,10,"g",9),o.\u0275\u0275elementEnd()),2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function MJ(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275elementStart(1,"g",14),o.\u0275\u0275listener("select",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).onClick(a)})("activate",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).onActivate(a)})("deactivate",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext(2).onDeactivate(a)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("xScale",n.xScale)("yScale",n.yScale)("colors",n.colors)("data",e)("scaleType",n.scaleType)("visibleValue",n.hoveredVertical)("activeEntries",n.activeEntries)("tooltipDisabled",n.tooltipDisabled)("tooltipTemplate",n.tooltipTemplate)}}function LJ(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",11),o.\u0275\u0275listener("mouseleave",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().hideCircles()}),o.\u0275\u0275elementStart(1,"g",12),o.\u0275\u0275listener("hover",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().updateHoveredVertical(a)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(2,MJ,2,9,"g",13),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("dims",e.dims)("xSet",e.xSet)("xScale",e.xScale)("yScale",e.yScale)("results",e.results)("colors",e.colors)("tooltipDisabled",e.tooltipDisabled)("tooltipTemplate",e.seriesTooltipTemplate),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.results)}}function NJ(t,r){if(1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275element(1,"g",16),o.\u0275\u0275elementEnd()),2&t){const e=r.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("xScale",n.timelineXScale)("yScale",n.timelineYScale)("colors",n.colors)("data",e)("scaleType",n.scaleType)("curve",n.curve)("hasRange",n.hasRange)("animations",n.animations)}}function BJ(t,r){if(1&t){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",15),o.\u0275\u0275listener("onDomainChange",function(a){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().updateDomain(a)}),o.\u0275\u0275template(1,NJ,2,8,"g",9),o.\u0275\u0275elementEnd()}if(2&t){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("results",e.results)("view",o.\u0275\u0275pureFunction2(10,Op,e.timelineWidth,e.height))("height",e.timelineHeight)("scheme",e.scheme)("customColors",e.customColors)("scaleType",e.scaleType)("legend",e.legend),o.\u0275\u0275attribute("transform",e.timelineTransform),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function QJ(t,r,e){e=e||{};let n,a,s,l=null,c=0;function f(){c=!1===e.leading?0:+new Date,l=null,s=t.apply(n,a)}return function(){const h=+new Date;!c&&!1===e.leading&&(c=h);const g=r-(h-c);return n=this,a=arguments,g<=0?(clearTimeout(l),l=null,c=h,s=t.apply(n,a)):!l&&!1!==e.trailing&&(l=setTimeout(f,g)),s}}function JJ(t,r){return function(n,a,s){return{configurable:!0,enumerable:s.enumerable,get:function(){return Object.defineProperty(this,a,{configurable:!0,enumerable:s.enumerable,value:QJ(s.value,t,r)}),this[a]}}}}var Rn=(()=>{return(t=Rn||(Rn={})).Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t.Center="center",Rn;var t})();function QT(t,r,e){return e===Rn.Top?t.top-7:e===Rn.Bottom?t.top+t.height-r.height+7:e===Rn.Center?t.top+t.height/2-r.height/2:void 0}function JT(t,r,e){return e===Rn.Left?t.left-7:e===Rn.Right?t.left+t.width-r.width+7:e===Rn.Center?t.left+t.width/2-r.width/2:void 0}class ra{static calculateVerticalAlignment(r,e,n){let a=QT(r,e,n);return a+e.height>window.innerHeight&&(a=window.innerHeight-e.height),a}static calculateVerticalCaret(r,e,n,a){let s;a===Rn.Top&&(s=r.height/2-n.height/2+7),a===Rn.Bottom&&(s=e.height-r.height/2-n.height/2-7),a===Rn.Center&&(s=e.height/2-n.height/2);const l=QT(r,e,a);return l+e.height>window.innerHeight&&(s+=l+e.height-window.innerHeight),s}static calculateHorizontalAlignment(r,e,n){let a=JT(r,e,n);return a+e.width>window.innerWidth&&(a=window.innerWidth-e.width),a}static calculateHorizontalCaret(r,e,n,a){let s;a===Rn.Left&&(s=r.width/2-n.width/2+7),a===Rn.Right&&(s=e.width-r.width/2-n.width/2-7),a===Rn.Center&&(s=e.width/2-n.width/2);const l=JT(r,e,a);return l+e.width>window.innerWidth&&(s+=l+e.width-window.innerWidth),s}static shouldFlip(r,e,n,a){let s=!1;return n===Rn.Right&&r.left+r.width+e.width+a>window.innerWidth&&(s=!0),n===Rn.Left&&r.left-e.width-a<0&&(s=!0),n===Rn.Top&&r.top-e.height-a<0&&(s=!0),n===Rn.Bottom&&r.top+r.height+e.height+a>window.innerHeight&&(s=!0),s}static positionCaret(r,e,n,a,s){let l=0,c=0;return r===Rn.Right?(c=-7,l=ra.calculateVerticalCaret(n,e,a,s)):r===Rn.Left?(c=e.width,l=ra.calculateVerticalCaret(n,e,a,s)):r===Rn.Top?(l=e.height,c=ra.calculateHorizontalCaret(n,e,a,s)):r===Rn.Bottom&&(l=-7,c=ra.calculateHorizontalCaret(n,e,a,s)),{top:l,left:c}}static positionContent(r,e,n,a,s){let l=0,c=0;return r===Rn.Right?(c=n.left+n.width+a,l=ra.calculateVerticalAlignment(n,e,s)):r===Rn.Left?(c=n.left-e.width-a,l=ra.calculateVerticalAlignment(n,e,s)):r===Rn.Top?(l=n.top-e.height-a,c=ra.calculateHorizontalAlignment(n,e,s)):r===Rn.Bottom&&(l=n.top+n.height+a,c=ra.calculateHorizontalAlignment(n,e,s)),{top:l,left:c}}static determinePlacement(r,e,n,a){if(ra.shouldFlip(n,e,r,a)){if(r===Rn.Right)return Rn.Left;if(r===Rn.Left)return Rn.Right;if(r===Rn.Top)return Rn.Bottom;if(r===Rn.Bottom)return Rn.Top}return r}}let ZJ=(()=>{class t{constructor(e,n,a){this.element=e,this.renderer=n,this.platformId=a}get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!(0,x.isPlatformBrowser)(this.platformId))return;const e=this.element.nativeElement,n=this.host.nativeElement.getBoundingClientRect();if(!n.height&&!n.width)return;const a=e.getBoundingClientRect();this.checkFlip(n,a),this.positionContent(e,n,a),this.showCaret&&this.positionCaret(n,a),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,n,a){const{top:s,left:l}=ra.positionContent(this.placement,a,n,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${s}px`),this.renderer.setStyle(e,"left",`${l}px`)}positionCaret(e,n){const a=this.caretElm.nativeElement,s=a.getBoundingClientRect(),{top:l,left:c}=ra.positionCaret(this.placement,n,e,s,this.alignment);this.renderer.setStyle(a,"top",`${l}px`),this.renderer.setStyle(a,"left",`${c}px`)}checkFlip(e,n){this.placement=ra.determinePlacement(this.placement,n,e,this.spacing)}onWindowResize(){this.position()}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.PLATFORM_ID))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-tooltip-content"]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(GY,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.caretElm=a.first)}},hostVars:2,hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("resize",function(){return n.onWindowResize()},!1,o.\u0275\u0275resolveWindow),2&e&&o.\u0275\u0275classMap(n.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275element(1,"span",0,1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275template(4,qY,2,4,"span",3),o.\u0275\u0275template(5,XY,1,1,"span",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275classMapInterpolate1("tooltip-caret position-",n.placement,""),o.\u0275\u0275property("hidden",!n.showCaret),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",!n.title),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.title))},directives:[x.NgIf,x.NgTemplateOutlet],styles:[".ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:rgba(0,0,0,.75);font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate(10px)}.ngx-charts-tooltip-content.position-left{transform:translate(-10px)}.ngx-charts-tooltip-content.position-top{transform:translateY(-10px)}.ngx-charts-tooltip-content.position-bottom{transform:translateY(10px)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translate(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}\n"],encapsulation:2}),(0,ie.gn)([JJ(100)],t.prototype,"onWindowResize",null),t})(),ZT=(()=>{class t{constructor(e,n,a){this.applicationRef=e,this.componentFactoryResolver=n,this.injector=a}static setGlobalRootViewContainer(e){t.globalRootViewContainer=e}getRootViewContainer(){if(this._container)return this._container;if(t.globalRootViewContainer)return t.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return function tZ(t){return t.element}(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,n){if(n){if(void 0!==n.inputs){const a=Object.getOwnPropertyNames(n.inputs);for(const s of a)e.instance[s]=n.inputs[s]}if(void 0!==n.outputs){const a=Object.getOwnPropertyNames(n.outputs);for(const s of a)e.instance[s]=n.outputs[s]}}return e}appendComponent(e,n={},a){a||(a=this.getRootViewContainer());const s=this.getComponentRootNode(a),l=new $1.u0(s,this.componentFactoryResolver,this.applicationRef,this.injector),c=new $1.C5(e),f=l.attach(c);return this.projectComponentBindings(f,n),f}}return t.globalRootViewContainer=null,t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(o.ApplicationRef),o.\u0275\u0275inject(o.ComponentFactoryResolver),o.\u0275\u0275inject(o.Injector))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),yx=(()=>{class t extends class eZ{constructor(r){this.injectionService=r,this.defaults={},this.components=new Map}getByType(r=this.type){return this.components.get(r)}create(r){return this.createByType(this.type,r)}createByType(r,e){e=this.assignDefaults(e);const n=this.injectComponent(r,e);return this.register(r,n),n}destroy(r){const e=this.components.get(r.componentType);if(e&&e.length){const n=e.indexOf(r);n>-1&&(e[n].destroy(),e.splice(n,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(r){const e=this.components.get(r);if(e&&e.length){let n=e.length-1;for(;n>=0;)this.destroy(e[n--])}}injectComponent(r,e){return this.injectionService.appendComponent(r,e)}assignDefaults(r){const e={...this.defaults.inputs},n={...this.defaults.outputs};return!r.inputs&&!r.outputs&&(r={inputs:r}),e&&(r.inputs={...e,...r.inputs}),n&&(r.outputs={...n,...r.outputs}),r}register(r,e){this.components.has(r)||this.components.set(r,[]),this.components.get(r).push(e)}}{constructor(e){super(e),this.type=ZJ}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(ZT))},t.\u0275prov=o.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();var fl=(()=>{return(t=fl||(fl={})).Right="right",t.Below="below",fl;var t})(),pu=(()=>{return(t=pu||(pu={})).ScaleLegend="scaleLegend",t.Legend="legend",pu;var t})(),Zt=(()=>{return(t=Zt||(Zt={})).Time="time",t.Linear="linear",t.Ordinal="ordinal",t.Quantile="quantile",Zt;var t})();let eA=(()=>{class t{constructor(){this.horizontal=!1}ngOnChanges(e){const n=this.gradientString(this.colors.range(),this.colors.domain());this.gradient=`linear-gradient(to ${this.horizontal?"right":"bottom"}, ${n})`}gradientString(e,n){n.push(1);const a=[];return e.reverse().forEach((s,l)=>{a.push(`${s} ${Math.round(100*n[l])}%`)}),a.join(", ")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-charts-scale-legend"]],inputs:{valueRange:"valueRange",colors:"colors",height:"height",width:"width",horizontal:"horizontal"},features:[o.\u0275\u0275NgOnChangesFeature],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"span"),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(4,"div",2),o.\u0275\u0275elementStart(5,"div",1),o.\u0275\u0275elementStart(6,"span"),o.\u0275\u0275text(7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275styleProp("height",n.horizontal?void 0:n.height,"px")("width",n.width,"px"),o.\u0275\u0275classProp("horizontal-legend",n.horizontal),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(n.valueRange[1].toLocaleString()),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("background",n.gradient),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(n.valueRange[0].toLocaleString()))},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{text-align:center;display:flex;flex-direction:column}.chart-legend .scale-legend-wrap{display:inline-block;flex:1;width:30px;border-radius:5px;margin:0 auto}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{width:auto;height:30px;margin:0 16px}\n"],encapsulation:2,changeDetection:0}),t})();function _x(t){return t instanceof Date?t.toLocaleDateString():t.toLocaleString()}function tA(t){return t.toLocaleString().replace(/[&'`"<>]/g,r=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[r]))}let nA=(()=>{class t{constructor(){this.isActive=!1,this.select=new o.EventEmitter,this.activate=new o.EventEmitter,this.deactivate=new o.EventEmitter,this.toggle=new o.EventEmitter}get trimmedLabel(){return this.formattedLabel||"(empty)"}onMouseEnter(){this.activate.emit({name:this.label})}onMouseLeave(){this.deactivate.emit({name:this.label})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{color:"color",label:"label",formattedLabel:"formattedLabel",isActive:"isActive"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},decls:4,vars:6,consts:[["tabindex","-1",3,"title","click"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"span",0),o.\u0275\u0275listener("click",function(){return n.select.emit(n.formattedLabel)}),o.\u0275\u0275elementStart(1,"span",1),o.\u0275\u0275listener("click",function(){return n.toggle.emit(n.formattedLabel)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"span",2),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275classProp("active",n.isActive),o.\u0275\u0275property("title",n.formattedLabel),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("background-color",n.color),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",n.trimmedLabel," "))},encapsulation:2,changeDetection:0}),t})(),iA=(()=>{class t{constructor(e){this.cd=e,this.horizontal=!1,this.labelClick=new o.EventEmitter,this.labelActivate=new o.EventEmitter,this.labelDeactivate=new o.EventEmitter,this.legendEntries=[]}ngOnChanges(e){this.update()}update(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}getLegendEntries(){const e=[];for(const n of this.data){const a=_x(n);-1===e.findIndex(l=>l.label===a)&&e.push({label:n,formattedLabel:a,color:this.colors.getColor(n)})}return e}isActive(e){return!!this.activeEntries&&void 0!==this.activeEntries.find(a=>e.label===a.name)}activate(e){this.labelActivate.emit(e)}deactivate(e){this.labelDeactivate.emit(e)}trackBy(e,n){return n.label}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ChangeDetectorRef))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-charts-legend"]],inputs:{data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries",horizontal:"horizontal"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},features:[o.\u0275\u0275NgOnChangesFeature],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"label","formattedLabel","color","isActive","select","activate","deactivate"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,WY,3,1,"header",0),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"ul",2),o.\u0275\u0275template(4,KY,2,4,"li",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275styleProp("width",n.width,"px"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",(null==n.title?null:n.title.length)>0),o.\u0275\u0275advance(2),o.\u0275\u0275styleProp("max-height",n.height-45,"px"),o.\u0275\u0275classProp("horizontal-legend",n.horizontal),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.legendEntries)("ngForTrackBy",n.trackBy))},directives:[nA,x.NgIf,x.NgForOf],styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{white-space:nowrap;overflow:hidden;margin-left:10px;margin-bottom:5px;font-size:14px;font-weight:700}.chart-legend ul,.chart-legend li{padding:0;margin:0;list-style:none}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{line-height:85%;list-style:none;text-align:left;float:left;width:100%;border-radius:3px;overflow-y:auto;overflow-x:hidden;white-space:nowrap;background:rgba(0,0,0,.05)}.chart-legend .legend-label{cursor:pointer;font-size:90%;margin:8px;color:#afb7c8}.chart-legend .legend-label:hover{color:#000;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{display:inline-block;height:15px;width:15px;margin-right:5px;color:#5b646b;border-radius:3px}.chart-legend .legend-label-text{display:inline-block;vertical-align:top;line-height:15px;font-size:12px;width:calc(100% - 20px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .legend-title-text{vertical-align:bottom;display:inline-block;line-height:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),t})(),rA=(()=>{class t{constructor(){this.showLegend=!1,this.animations=!0,this.legendLabelClick=new o.EventEmitter,this.legendLabelActivate=new o.EventEmitter,this.legendLabelDeactivate=new o.EventEmitter,this.LegendPosition=fl,this.LegendType=pu}ngOnChanges(e){this.update()}update(){let e=0;this.showLegend&&(this.legendType=this.getLegendType(),(!this.legendOptions||this.legendOptions.position===fl.Right)&&(e=this.legendType===pu.ScaleLegend?1:2)),this.chartWidth=Math.floor(this.view[0]*(12-e)/12),this.legendWidth=this.legendOptions&&this.legendOptions.position!==fl.Right?this.chartWidth:Math.floor(this.view[0]*e/12)}getLegendType(){return this.legendOptions.scaleType===Zt.Linear?pu.ScaleLegend:pu.Legend}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-charts-chart"]],inputs:{view:"view",showLegend:"showLegend",legendOptions:"legendOptions",legendType:"legendType",activeEntries:"activeEntries",animations:"animations"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},features:[o.\u0275\u0275ProvidersFeature([yx]),o.\u0275\u0275NgOnChangesFeature],ngContentSelectors:KT,decls:5,vars:6,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(1,"svg",1),o.\u0275\u0275projection(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,YY,1,5,"ngx-charts-scale-legend",2),o.\u0275\u0275template(4,QY,1,7,"ngx-charts-legend",3),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275styleProp("width",n.view[0],"px"),o.\u0275\u0275advance(1),o.\u0275\u0275attribute("width",n.chartWidth)("height",n.view[1]),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.showLegend&&n.legendType===n.LegendType.ScaleLegend),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.showLegend&&n.legendType===n.LegendType.Legend))},directives:[eA,iA,x.NgIf],encapsulation:2,changeDetection:0}),t})(),nZ=(()=>{class t{constructor(e,n){this.element=e,this.zone=n,this.visible=new o.EventEmitter,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const e=()=>{if(!this.element)return;const{offsetHeight:n,offsetWidth:a}=this.element.nativeElement;n&&a?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.NgZone))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),t})();function oA(t){return"[object Date]"===toString.call(t)}let aA=(()=>{class t{constructor(e,n,a,s){this.chartElement=e,this.zone=n,this.cd=a,this.platformId=s,this.scheme="cool",this.schemeType=Zt.Ordinal,this.animations=!0,this.select=new o.EventEmitter}ngOnInit(){(0,x.isPlatformServer)(this.platformId)&&(this.animations=!1)}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new nZ(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}ngOnChanges(e){this.update()}update(){if(this.results=this.results?this.cloneData(this.results):[],this.view)this.width=this.view[0],this.height=this.view[1];else{const e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,n;const a=this.chartElement.nativeElement;if((0,x.isPlatformBrowser)(this.platformId)&&null!==a.parentNode){const s=a.parentNode.getBoundingClientRect();e=s.width,n=s.height}return e&&n?{width:e,height:n}:null}formatDates(){for(let e=0;e<this.results.length;e++){const n=this.results[e];if(n.label=n.name,oA(n.label)&&(n.label=n.label.toLocaleDateString()),n.series)for(let a=0;a<n.series.length;a++){const s=n.series[a];s.label=s.name,oA(s.label)&&(s.label=s.label.toLocaleDateString())}}}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){if(!(0,x.isPlatformBrowser)(this.platformId))return;const n=(0,b7.R)(window,"resize").pipe((0,Hn.b)(200)).subscribe(a=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=n}cloneData(e){const n=[];for(const a of e){const s={name:a.name};if(void 0!==a.value&&(s.value=a.value),void 0!==a.series){s.series=[];for(const l of a.series){const c=Object.assign({},l);s.series.push(c)}}void 0!==a.extra&&(s.extra=JSON.parse(JSON.stringify(a.extra))),n.push(s)}return n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.PLATFORM_ID))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["base-chart"]],inputs:{results:"results",view:"view",scheme:"scheme",schemeType:"schemeType",customColors:"customColors",animations:"animations"},outputs:{select:"select"},features:[o.\u0275\u0275NgOnChangesFeature],decls:1,vars:0,template:function(e,n){1&e&&o.\u0275\u0275element(0,"div")},encapsulation:2}),t})();var _r=(()=>{return(t=_r||(_r={})).Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",_r;var t})();let sA=(()=>{class t{constructor(e){this.textHeight=25,this.margin=5,this.element=e.nativeElement}ngOnChanges(e){this.update()}update(){switch(this.strokeWidth="0.01",this.textAnchor="middle",this.transform="",this.orient){case _r.Top:case _r.Bottom:this.y=this.offset,this.x=this.width/2;break;case _r.Left:this.y=-(this.offset+this.textHeight+this.margin),this.x=-this.height/2,this.transform="rotate(270)";break;case _r.Right:this.y=this.offset+this.margin,this.x=-this.height/2,this.transform="rotate(270)"}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-axis-label",""]],inputs:{orient:"orient",label:"label",offset:"offset",width:"width",height:"height"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:JY,decls:2,vars:6,template:function(e,n){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"text"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275attribute("stroke-width",n.strokeWidth)("x",n.x)("y",n.y)("text-anchor",n.textAnchor)("transform",n.transform),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.label," "))},encapsulation:2,changeDetection:0}),t})();function xx(t,r=16){return"string"!=typeof t?"number"==typeof t?t+"":"":(t=t.trim()).length<=r?t:`${t.slice(0,r)}...`}function lA(t,r){if(t.length>r){const e=[],n=Math.floor(t.length/r);for(let a=0;a<t.length;a++)a%n==0&&e.push(t[a]);t=e}return t}var Qa=(()=>{return(t=Qa||(Qa={})).Start="start",t.Middle="middle",t.End="end",Qa;var t})();let cA=(()=>{class t{constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.rotateTicks=!0,this.dimensionsChanged=new o.EventEmitter,this.verticalSpacing=20,this.rotateLabels=!1,this.innerTickSize=6,this.outerTickSize=6,this.tickPadding=3,this.textAnchor=Qa.Middle,this.maxTicksLength=0,this.maxAllowedLength=16,this.height=0,this.approxHeight=10}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!(0,x.isPlatformBrowser)(this.platformId))return void this.dimensionsChanged.emit({height:this.approxHeight});const e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().height,10);e!==this.height&&(this.height=e,this.dimensionsChanged.emit({height:this.height}),setTimeout(()=>this.updateDims()))}update(){const e=this.scale;this.ticks=this.getTicks(),this.tickFormat=this.tickFormatting?this.tickFormatting:e.tickFormat?e.tickFormat.apply(e,this.tickArguments):function(a){return"Date"===a.constructor.name?a.toLocaleDateString():a.toLocaleString()};const n=this.rotateTicks?this.getRotationAngle(this.ticks):null;this.adjustedScale=this.scale.bandwidth?function(a){return this.scale(a)+.5*this.scale.bandwidth()}:this.scale,this.textTransform="",n&&0!==n?(this.textTransform=`rotate(${n})`,this.textAnchor=Qa.End,this.verticalSpacing=10):this.textAnchor=Qa.Middle,setTimeout(()=>this.updateDims())}getRotationAngle(e){let n=0;this.maxTicksLength=0;for(let h=0;h<e.length;h++){const g=this.tickFormat(e[h]).toString();let I=g.length;this.trimTicks&&(I=this.tickTrim(g).length),I>this.maxTicksLength&&(this.maxTicksLength=I)}const l=7*Math.min(this.maxTicksLength,this.maxAllowedLength);let c=l;const f=Math.floor(this.width/e.length);for(;c>f&&n>-90;)n-=30,c=Math.cos(n*(Math.PI/180))*l;return this.approxHeight=Math.max(Math.abs(Math.sin(n*(Math.PI/180))*l),10),n}getTicks(){let e;const n=this.getMaxTicks(20),a=this.getMaxTicks(100);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[a]):(e=this.scale.domain(),e=lA(e,n)),e}getMaxTicks(e){return Math.floor(this.width/e)}tickTransform(e){return"translate("+this.adjustedScale(e)+","+this.verticalSpacing+")"}gridLineTransform(){return`translate(0,${-this.verticalSpacing-5})`}tickTrim(e){return this.trimTicks?xx(e,this.maxTickLength):e}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.PLATFORM_ID))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-x-axis-ticks",""]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(YT,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.ticksElement=a.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineHeight:"gridLineHeight",width:"width",rotateTicks:"rotateTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:ZY,decls:4,vars:2,consts:[["ticksel",""],["class","tick",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tick"],["stroke-width","0.01"],[4,"ngIf"],["y2","0",1,"gridline-path","gridline-path-vertical"]],template:function(e,n){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",null,0),o.\u0275\u0275template(2,eQ,5,7,"g",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,nQ,2,2,"g",2)),2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",n.ticks),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.ticks))},directives:[x.NgForOf,x.NgIf],encapsulation:2,changeDetection:0}),t})(),iZ=(()=>{class t{constructor(){this.rotateTicks=!0,this.showGridLines=!1,this.xOrient=_r.Bottom,this.xAxisOffset=0,this.dimensionsChanged=new o.EventEmitter,this.xAxisClassName="x axis",this.labelOffset=0,this.fill="none",this.stroke="stroke",this.tickStroke="#ccc",this.strokeWidth="none",this.padding=5,this.orientation=_r}ngOnChanges(e){this.update()}update(){this.transform=`translate(0,${this.xAxisOffset+this.padding+this.dims.height})`,void 0!==this.xAxisTickCount&&(this.tickArguments=[this.xAxisTickCount])}emitTicksHeight({height:e}){const n=e+25+5;n!==this.labelOffset&&(this.labelOffset=n,setTimeout(()=>{this.dimensionsChanged.emit({height:e})},0))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-x-axis",""]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(cA,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.ticksComponent=a.first)}},inputs:{xScale:"xScale",dims:"dims",trimTicks:"trimTicks",rotateTicks:"rotateTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",ticks:"ticks",xAxisTickCount:"xAxisTickCount",xOrient:"xOrient",xAxisOffset:"xAxisOffset"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:iQ,decls:3,vars:4,consts:[["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","dimensionsChanged"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(e,n){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275template(1,rQ,1,12,"g",0),o.\u0275\u0275template(2,oQ,1,5,"g",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275attribute("class",n.xAxisClassName)("transform",n.transform),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.xScale),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.showLabel))},directives:[cA,sA,x.NgIf],encapsulation:2,changeDetection:0}),t})(),uA=(()=>{class t{constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.showRefLabels=!1,this.showRefLines=!1,this.dimensionsChanged=new o.EventEmitter,this.innerTickSize=6,this.tickPadding=3,this.verticalSpacing=20,this.textAnchor=Qa.Middle,this.width=0,this.outerTickSize=6,this.rotateLabels=!1,this.referenceLineLength=0,this.Orientation=_r}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!(0,x.isPlatformBrowser)(this.platformId))return this.width=this.getApproximateAxisWidth(),void this.dimensionsChanged.emit({width:this.width});const e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().width,10);e!==this.width&&(this.width=e,this.dimensionsChanged.emit({width:e}),setTimeout(()=>this.updateDims()))}update(){let e;const n=this.orient===_r.Top||this.orient===_r.Right?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,e=this.scale,this.ticks=this.getTicks(),this.tickFormat=this.tickFormatting?this.tickFormatting:e.tickFormat?e.tickFormat.apply(e,this.tickArguments):function(a){return"Date"===a.constructor.name?a.toLocaleDateString():a.toLocaleString()},this.adjustedScale=e.bandwidth?function(a){return e(a)+.5*e.bandwidth()}:e,this.showRefLines&&this.referenceLines&&this.setReferencelines(),this.orient){case _r.Top:case _r.Bottom:this.transform=function(a){return"translate("+this.adjustedScale(a)+",0)"},this.textAnchor=Qa.Middle,this.y2=this.innerTickSize*n,this.y1=this.tickSpacing*n,this.dy=n<0?"0em":".71em";break;case _r.Left:this.transform=function(a){return"translate(0,"+this.adjustedScale(a)+")"},this.textAnchor=Qa.End,this.x2=this.innerTickSize*-n,this.x1=this.tickSpacing*-n,this.dy=".32em";break;case _r.Right:this.transform=function(a){return"translate(0,"+this.adjustedScale(a)+")"},this.textAnchor=Qa.Start,this.x2=this.innerTickSize*-n,this.x1=this.tickSpacing*-n,this.dy=".32em"}setTimeout(()=>this.updateDims())}setReferencelines(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map(e=>e.value))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map(e=>e.value))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=function rZ(t,r,e,n,a,[s,l,c,f]){let h="";return h=`M${[t+a,r]}`,h+="h"+((e=0===(e=Math.floor(e))?1:e)-2*a),h+=l?`a${[a,a]} 0 0 1 ${[a,a]}`:`h${a}v${a}`,h+="v"+((n=0===(n=Math.floor(n))?1:n)-2*a),h+=f?`a${[a,a]} 0 0 1 ${[-a,a]}`:`v${a}h${-a}`,h+="h"+(2*a-e),h+=c?`a${[a,a]} 0 0 1 ${[-a,-a]}`:`h${-a}v${-a}`,h+="v"+(2*a-n),h+=s?`a${[a,a]} 0 0 1 ${[a,-a]}`:`v${-a}h${a}`,h+="z",h}(0,this.refMax,this.gridLineWidth,this.refMin-this.refMax,0,[!1,!1,!1,!1])}getTicks(){let e;const n=this.getMaxTicks(20),a=this.getMaxTicks(50);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[a]):(e=this.scale.domain(),e=lA(e,n)),e}getMaxTicks(e){return Math.floor(this.height/e)}tickTransform(e){return`translate(${this.adjustedScale(e)},${this.verticalSpacing})`}gridLineTransform(){return"translate(5,0)"}tickTrim(e){return this.trimTicks?xx(e,this.maxTickLength):e}getApproximateAxisWidth(){return 7*Math.max(...this.ticks.map(a=>this.tickTrim(this.tickFormat(a)).length))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.PLATFORM_ID))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-y-axis-ticks",""]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(YT,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.ticksElement=a.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineWidth:"gridLineWidth",height:"height",referenceLines:"referenceLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:aQ,decls:6,vars:4,consts:[["ticksel",""],["class","tick",4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tick"],["stroke-width","0.01"],[1,"reference-area"],[4,"ngIf"],["class","gridline-path gridline-path-horizontal","x1","0",4,"ngIf"],["x1","0",1,"gridline-path","gridline-path-horizontal"],["x1","0",1,"refline-path","gridline-path-horizontal"],[1,"refline-label"]],template:function(e,n){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",null,0),o.\u0275\u0275template(2,sQ,5,9,"g",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,lQ,1,2,"path",2),o.\u0275\u0275template(4,fQ,2,2,"g",3),o.\u0275\u0275template(5,mQ,2,1,"g",3)),2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",n.ticks),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.referenceLineLength>1&&n.refMax&&n.refMin&&n.showRefLines),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.ticks),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.referenceLines))},directives:[x.NgForOf,x.NgIf],encapsulation:2,changeDetection:0}),t})(),oZ=(()=>{class t{constructor(){this.showGridLines=!1,this.yOrient=_r.Left,this.yAxisOffset=0,this.dimensionsChanged=new o.EventEmitter,this.yAxisClassName="y axis",this.labelOffset=15,this.fill="none",this.stroke="#CCC",this.tickStroke="#CCC",this.strokeWidth=1,this.padding=5}ngOnChanges(e){this.update()}update(){this.offset=-(this.yAxisOffset+this.padding),this.yOrient===_r.Right?(this.labelOffset=65,this.transform=`translate(${this.offset+this.dims.width} , 0)`):(this.offset=this.offset,this.transform=`translate(${this.offset} , 0)`),void 0!==this.yAxisTickCount&&(this.tickArguments=[this.yAxisTickCount])}emitTicksWidth({width:e}){e!==this.labelOffset&&this.yOrient===_r.Right?(this.labelOffset=e+this.labelOffset,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0)):e!==this.labelOffset&&(this.labelOffset=e,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-y-axis",""]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(uA,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.ticksComponent=a.first)}},inputs:{yScale:"yScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",ticks:"ticks",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",yAxisTickCount:"yAxisTickCount",yOrient:"yOrient",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels",yAxisOffset:"yAxisOffset"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:gQ,decls:3,vars:4,consts:[["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","dimensionsChanged"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(e,n){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275template(1,vQ,1,14,"g",0),o.\u0275\u0275template(2,yQ,1,5,"g",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275attribute("class",n.yAxisClassName)("transform",n.transform),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.yScale),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.showLabel))},directives:[uA,sA,x.NgIf],encapsulation:2,changeDetection:0}),t})(),dA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule]]}),t})();var Qd=(()=>{return(t=Qd||(Qd={})).popover="popover",t.tooltip="tooltip",Qd;var t})(),ac=(()=>{return(t=ac||(ac={}))[t.all="all"]="all",t[t.focus="focus"]="focus",t[t.mouseover="mouseover"]="mouseover",ac;var t})();let fA=(()=>{class t{constructor(e,n,a){this.tooltipService=e,this.viewContainerRef=n,this.renderer=a,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=Rn.Top,this.tooltipAlignment=Rn.Center,this.tooltipType=Qd.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=ac.all,this.tooltipImmediateExit=!1,this.show=new o.EventEmitter,this.hide=new o.EventEmitter}get listensForFocus(){return this.tooltipShowEvent===ac.all||this.tooltipShowEvent===ac.focus}get listensForHover(){return this.tooltipShowEvent===ac.all||this.tooltipShowEvent===ac.mouseover}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;const n=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?300:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();const a=this.createBoundOptions();this.component=this.tooltipService.create(a),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},n)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",n=>{e.contains(n.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;const n=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?n():this.timeout=setTimeout(n,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(yx),o.\u0275\u0275directiveInject(o.ViewContainerRef),o.\u0275\u0275directiveInject(o.Renderer2))},t.\u0275dir=o.\u0275\u0275defineDirective({type:t,selectors:[["","ngx-tooltip",""]],hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("focusin",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(s){return n.onMouseLeave(s.target)})("click",function(){return n.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"}}),t})(),hA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[ZT,yx],imports:[[x.CommonModule]]}),t})();const pA={};function Jd(){let t=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return t=`a${t}`,pA[t]?Jd():(pA[t]=!0,t)}var Ja=(()=>{return(t=Ja||(Ja={})).Vertical="vertical",t.Horizontal="horizontal",Ja;var t})();let Nv=(()=>{class t{constructor(){this.orientation=Ja.Vertical}ngOnChanges(e){this.x1="0%",this.x2="0%",this.y1="0%",this.y2="0%",this.orientation===Ja.Horizontal?this.x2="100%":this.orientation===Ja.Vertical&&(this.y1="100%")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-svg-linear-gradient",""]],inputs:{orientation:"orientation",name:"name",stops:"stops"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:_Q,decls:2,vars:6,consts:[[3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"linearGradient",0),o.\u0275\u0275template(1,xQ,1,5,"stop",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("id",n.name),o.\u0275\u0275attribute("x1",n.x1)("y1",n.y1)("x2",n.x2)("y2",n.y2),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",n.stops))},directives:[x.NgForOf],encapsulation:2,changeDetection:0}),t})(),mA=(()=>{class t{constructor(){this.select=new o.EventEmitter,this.activate=new o.EventEmitter,this.deactivate=new o.EventEmitter}onClick(){this.select.emit(this.data)}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}ngOnChanges(e){this.classNames=Array.isArray(this.classNames)?this.classNames.join(" "):"",this.classNames+="circle"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-circle",""]],hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("click",function(){return n.onClick()})("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{cx:"cx",cy:"cy",r:"r",fill:"fill",stroke:"stroke",data:"data",classNames:"classNames",circleOpacity:"circleOpacity",pointerEvents:"pointerEvents"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:bQ,decls:1,vars:8,template:function(e,n){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(0,"circle")),2&e&&o.\u0275\u0275attribute("cx",n.cx)("cy",n.cy)("r",n.r)("fill",n.fill)("stroke",n.stroke)("opacity",n.circleOpacity)("class",n.classNames)("pointer-events",n.pointerEvents)},encapsulation:2,changeDetection:0}),t})();var Zd=(()=>{return(t=Zd||(Zd={})).Standard="standard",t.Stacked="stacked",Zd;var t})();let bx,gA=(()=>{class t{constructor(e){this.platformId=e,this.type=Zd.Standard,this.tooltipDisabled=!1,this.select=new o.EventEmitter,this.activate=new o.EventEmitter,this.deactivate=new o.EventEmitter,this.barVisible=!1,this.barOrientation=Ja,this.placementTypes=Rn,this.styleTypes=Qd,this.isSSR=!1}ngOnInit(){this.gradientId="grad"+Jd().toString(),this.gradientFill=`url(#${this.gradientId})`,(0,x.isPlatformServer)(this.platformId)&&(this.isSSR=!0)}ngOnChanges(){this.update()}update(){this.circle=this.getActiveCircle()}getActiveCircle(){const e=this.data.series.findIndex(n=>{const a=n.name;return a&&this.visibleValue&&a.toString()===this.visibleValue.toString()&&void 0!==n.value});if(-1!==e)return this.mapDataPointToCircle(this.data.series[e],e)}mapDataPointToCircle(e,n){const a=this.data.name,s=e.value,l=e.name,c=_x(l);let f;f=this.xScale(this.scaleType===Zt.Time?l:this.scaleType===Zt.Linear?Number(l):l);const h=this.yScale(this.type===Zd.Standard?s:e.d1),I=this.yScale.range()[0]-h;let V;return V=this.colors.getColor(this.colors.scaleType===Zt.Linear?this.type===Zd.Standard?s:e.d1:a),{classNames:[`circle-data-${n}`],value:s,label:l,data:Object.assign({},e,{series:a,value:s,name:l}),cx:f,cy:h,radius:5,height:I,tooltipLabel:c,color:V,opacity:1,seriesName:a,gradientStops:this.getGradientStops(V),min:e.min,max:e.max}}getTooltipText({tooltipLabel:e,value:n,seriesName:a,min:s,max:l}){return`\n      <span class="tooltip-label">${tA(a)} \u2022 ${tA(e)}</span>\n      <span class="tooltip-val">${n.toLocaleString()}${this.getTooltipMinMaxText(s,l)}</span>\n    `}getTooltipMinMaxText(e,n){if(void 0!==e||void 0!==n){let a=" (";return void 0!==e?(void 0===n&&(a+="\u2265"),a+=e.toLocaleString(),void 0!==n&&(a+=" - ")):void 0!==n&&(a+="\u2264"),void 0!==n&&(a+=n.toLocaleString()),a+=")",a}return""}getGradientStops(e){return[{offset:0,color:e,opacity:.2},{offset:100,color:e,opacity:1}]}onClick(e){this.select.emit(e)}isActive(e){return!!this.activeEntries&&void 0!==this.activeEntries.find(a=>e.name===a.name)}activateCircle(){this.barVisible=!0,this.activate.emit({name:this.data.name})}deactivateCircle(){this.barVisible=!1,this.circle.opacity=0,this.deactivate.emit({name:this.data.name})}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.PLATFORM_ID))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-circle-series",""]],inputs:{data:"data",type:"type",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",visibleValue:"visibleValue",activeEntries:"activeEntries",tooltipDisabled:"tooltipDisabled",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:CQ,decls:1,vars:1,consts:[[4,"ngIf"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"],["class","tooltip-bar",4,"ngIf"],["ngx-charts-circle","","ngx-tooltip","",1,"circle",3,"cx","cy","r","fill","pointerEvents","data","classNames","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate"],[1,"tooltip-bar"]],template:function(e,n){1&e&&o.\u0275\u0275template(0,TQ,6,22,"g",0),2&e&&o.\u0275\u0275property("ngIf",n.circle)},directives:[Nv,mA,x.NgIf,fA],encapsulation:2,data:{animation:[(0,Ii.X$)("animationState",[(0,Ii.eR)(":enter",[(0,Ii.oB)({opacity:0}),(0,Ii.jt)(250,(0,Ii.oB)({opacity:1}))])])]},changeDetection:0}),t})(),yA=(()=>{class t{constructor(e){this.opacity=1,this.startOpacity=.5,this.endOpacity=1,this.gradient=!1,this.animations=!0,this.select=new o.EventEmitter,this.animationsLoaded=!1,this.hasGradient=!1,this.barOrientation=Ja,this.element=e.nativeElement}ngOnChanges(){this.update(),this.animationsLoaded||(this.loadAnimation(),this.animationsLoaded=!0)}update(){this.gradientId="grad"+Jd().toString(),this.gradientFill=`url(#${this.gradientId})`,this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl()}loadAnimation(){this.areaPath=this.startingPath,setTimeout(this.updatePathEl.bind(this),100)}updatePathEl(){const e=_a(this.element).select(".area");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}getGradient(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.startOpacity},{offset:100,color:this.fill,opacity:this.endOpacity}]}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-area",""]],inputs:{data:"data",path:"path",startingPath:"startingPath",fill:"fill",opacity:"opacity",startOpacity:"startOpacity",endOpacity:"endOpacity",gradient:"gradient",stops:"stops",animations:"animations"},outputs:{select:"select"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:RQ,decls:2,vars:5,consts:[[4,"ngIf"],[1,"area"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,DQ,2,3,"defs",0),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275element(1,"path",1)),2&e&&(o.\u0275\u0275property("ngIf",n.gradient),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("opacity",n.opacity),o.\u0275\u0275attribute("d",n.areaPath)("fill",n.gradient?n.gradientFill:n.fill))},directives:[Nv,x.NgIf],encapsulation:2,changeDetection:0}),t})();"undefined"!=typeof window?bx=window:"undefined"!=typeof global&&(bx=global);const bA=bx.MouseEvent;function Cx(t,r=!1,e=!0){if("function"==typeof bA)return new bA(t,{bubbles:r,cancelable:e});{const n=document.createEvent("MouseEvent");return n.initEvent(t,r,e),n}}let CA=(()=>{class t{constructor(e){this.platformId=e,this.anchorOpacity=0,this.anchorPos=-1,this.anchorValues=[],this.placementTypes=Rn,this.styleTypes=Qd,this.showPercentage=!1,this.tooltipDisabled=!1,this.hover=new o.EventEmitter}getValues(e){const n=[];for(const a of this.results){const s=a.series.find(c=>c.name.toString()===e.toString());let l=a.name;if(l instanceof Date&&(l=l.toLocaleDateString()),s){const c=s.name;let h,f=s.value;if(this.showPercentage&&(f=(s.d1-s.d0).toFixed(2)+"%"),this.colors.scaleType===Zt.Linear){let I=f;s.d1&&(I=s.d1),h=this.colors.getColor(I)}else h=this.colors.getColor(a.name);const g=Object.assign({},s,{value:f,name:c,series:l,min:s.min,max:s.max,color:h});n.push(g)}}return n}mouseMove(e){if(!(0,x.isPlatformBrowser)(this.platformId))return;const n=e.pageX-e.target.getBoundingClientRect().left,a=this.findClosestPointIndex(n),s=this.xSet[a];if(this.anchorPos=this.xScale(s),this.anchorPos=Math.max(0,this.anchorPos),this.anchorPos=Math.min(this.dims.width,this.anchorPos),this.anchorValues=this.getValues(s),this.anchorPos!==this.lastAnchorPos){const l=Cx("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(l),this.anchorOpacity=.7,this.hover.emit({value:s}),this.showTooltip(),this.lastAnchorPos=this.anchorPos}}findClosestPointIndex(e){let n=0,a=this.xSet.length-1,s=Number.MAX_VALUE,l=0;for(;n<=a;){const c=(n+a)/2|0,f=this.xScale(this.xSet[c]),h=Math.abs(f-e);if(h<s&&(s=h,l=c),f<e)n=c+1;else{if(!(f>e)){s=0,l=c;break}a=c-1}}return l}showTooltip(){const e=Cx("mouseenter");this.tooltipAnchor.nativeElement.dispatchEvent(e)}hideTooltip(){const e=Cx("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(e),this.anchorOpacity=0,this.lastAnchorPos=-1}getToolTipText(e){let n="";return n+=void 0!==e.series?e.series:"???",n+=": ",void 0!==e.value&&(n+=e.value.toLocaleString()),(void 0!==e.min||void 0!==e.max)&&(n+=" (",void 0!==e.min?(void 0===e.max&&(n+="\u2265"),n+=e.min.toLocaleString(),void 0!==e.max&&(n+=" - ")):void 0!==e.max&&(n+="\u2264"),void 0!==e.max&&(n+=e.max.toLocaleString()),n+=")"),n}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.PLATFORM_ID))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-tooltip-area",""]],viewQuery:function(e,n){if(1&e&&o.\u0275\u0275viewQuery(MQ,5),2&e){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(n.tooltipAnchor=a.first)}},inputs:{dims:"dims",xSet:"xSet",xScale:"xScale",yScale:"yScale",results:"results",colors:"colors",showPercentage:"showPercentage",tooltipDisabled:"tooltipDisabled",tooltipTemplate:"tooltipTemplate"},outputs:{hover:"hover"},attrs:LQ,decls:6,vars:18,consts:[["y","0",1,"tooltip-area",2,"opacity","0","cursor","auto",3,"mousemove","mouseleave"],["defaultTooltipTemplate",""],["y","0","ngx-tooltip","",1,"tooltip-anchor",3,"tooltipDisabled","tooltipPlacement","tooltipType","tooltipSpacing","tooltipTemplate","tooltipContext","tooltipImmediateExit"],["tooltipAnchor",""],[1,"area-tooltip-container"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[1,"tooltip-item-color"]],template:function(e,n){if(1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275elementStart(1,"rect",0),o.\u0275\u0275listener("mousemove",function(s){return n.mouseMove(s)})("mouseleave",function(){return n.hideTooltip()}),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(2,BQ,2,1,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275element(4,"rect",2,3),o.\u0275\u0275elementEnd()),2&e){const a=o.\u0275\u0275reference(3);o.\u0275\u0275advance(1),o.\u0275\u0275attribute("x",0)("width",n.dims.width)("height",n.dims.height),o.\u0275\u0275advance(3),o.\u0275\u0275styleProp("opacity",n.anchorOpacity)("pointer-events","none"),o.\u0275\u0275property("@animationState",0!==n.anchorOpacity?"active":"inactive")("tooltipDisabled",n.tooltipDisabled)("tooltipPlacement",n.placementTypes.Right)("tooltipType",n.styleTypes.tooltip)("tooltipSpacing",15)("tooltipTemplate",n.tooltipTemplate?n.tooltipTemplate:a)("tooltipContext",n.anchorValues)("tooltipImmediateExit",!0),o.\u0275\u0275attribute("x",n.anchorPos)("width",1)("height",n.dims.height)}},directives:[x.NgForOf,fA],encapsulation:2,data:{animation:[(0,Ii.X$)("animationState",[(0,Ii.eR)("inactive => active",[(0,Ii.oB)({opacity:0}),(0,Ii.jt)(250,(0,Ii.oB)({opacity:.7}))]),(0,Ii.eR)("active => inactive",[(0,Ii.oB)({opacity:.7}),(0,Ii.jt)(250,(0,Ii.oB)({opacity:0}))])])]},changeDetection:0}),t})(),wA=(()=>{class t{constructor(e,n){this.cd=n,this.height=50,this.select=new o.EventEmitter,this.onDomainChange=new o.EventEmitter,this.initialized=!1,this.element=e.nativeElement}ngOnChanges(e){this.update(),this.initialized||(this.addBrush(),this.initialized=!0)}update(){this.dims=this.getDims(),this.height=this.dims.height;const e=this.view[1]-this.height;this.xDomain=this.getXDomain(),this.xScale=this.getXScale(),this.brush&&this.updateBrush(),this.transform=`translate(0 , ${e})`,this.filterId="filter"+Jd().toString(),this.filter=`url(#${this.filterId})`,this.cd.markForCheck()}getXDomain(){let e=[];for(const a of this.results)for(const s of a.series)e.includes(s.name)||e.push(s.name);let n=[];return this.scaleType===Zt.Time?n=[Math.min(...e),Math.max(...e)]:this.scaleType===Zt.Linear?(e=e.map(l=>Number(l)),n=[Math.min(...e),Math.max(...e)]):n=e,n}getXScale(){let e;return this.scaleType===Zt.Time?e=AT().range([0,this.dims.width]).domain(this.xDomain):this.scaleType===Zt.Linear?e=fu().range([0,this.dims.width]).domain(this.xDomain):this.scaleType===Zt.Ordinal&&(e=jT().range([0,this.dims.width]).padding(.1).domain(this.xDomain)),e}addBrush(){if(this.brush)return;const e=this.height,n=this.view[0];this.brush=function YW(){return function X0(t){var c,r=XW,e=qW,n=WW,a=!0,s=lE("start","brush","end"),l=6;function f(he){var Se=he.property("__brush",Ie).selectAll(".overlay").data([kp("overlay")]);Se.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cl.overlay).merge(Se).each(function(){var Be=q0(this).extent;_a(this).attr("x",Be[0][0]).attr("y",Be[0][1]).attr("width",Be[1][0]-Be[0][0]).attr("height",Be[1][1]-Be[0][1])}),he.selectAll(".selection").data([kp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cl.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Oe=he.selectAll(".handle").data(t.handles,function(Be){return Be.type});Oe.exit().remove(),Oe.enter().append("rect").attr("class",function(Be){return"handle handle--"+Be.type}).attr("cursor",function(Be){return cl[Be.type]}),he.each(h).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",B).filter(n).on("touchstart.brush",B).on("touchmove.brush",V).on("touchend.brush touchcancel.brush",ce).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(){var he=_a(this),Se=q0(this).selection;Se?(he.selectAll(".selection").style("display",null).attr("x",Se[0][0]).attr("y",Se[0][1]).attr("width",Se[1][0]-Se[0][0]).attr("height",Se[1][1]-Se[0][1]),he.selectAll(".handle").style("display",null).attr("x",function(Oe){return"e"===Oe.type[Oe.type.length-1]?Se[1][0]-l/2:Se[0][0]-l/2}).attr("y",function(Oe){return"s"===Oe.type[0]?Se[1][1]-l/2:Se[0][1]-l/2}).attr("width",function(Oe){return"n"===Oe.type||"s"===Oe.type?Se[1][0]-Se[0][0]+l:l}).attr("height",function(Oe){return"e"===Oe.type||"w"===Oe.type?Se[1][1]-Se[0][1]+l:l})):he.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function g(he,Se,Oe){var Be=he.__brush.emitter;return!Be||Oe&&Be.clean?new I(he,Se,Oe):Be}function I(he,Se,Oe){this.that=he,this.args=Se,this.state=he.__brush,this.active=0,this.clean=Oe}function B(he){if((!c||he.touches)&&e.apply(this,arguments)){var an,Vt,$t,_n,fn,fi,Zn,xr,Mp,nf,rf,Se=this,Oe=he.target.__data__.type,Be="selection"===(a&&he.metaKey?Oe="overlay":Oe)?jE:a&&he.altKey?$d:Gd,et=t===kv?null:$W[Oe],at=t===Av?null:HW[Oe],ft=q0(Se),Pt=ft.extent,Rt=ft.selection,on=Pt[0][0],At=Pt[0][1],Wn=Pt[1][0],ur=Pt[1][1],er=0,tr=0,tf=et&&at&&a&&he.shiftKey,no=Array.from(he.touches||[he],wn=>{const Xi=wn.identifier;return(wn=SE(wn,Se)).point0=wn.slice(),wn.identifier=Xi,wn});if("overlay"===Oe){Rt&&(Mp=!0);const wn=[no[0],no[1]||no[0]];ft.selection=Rt=[[an=t===kv?on:to(wn[0][0],wn[1][0]),$t=t===Av?At:to(wn[0][1],wn[1][1])],[fn=t===kv?Wn:eo(wn[0][0],wn[1][0]),Zn=t===Av?ur:eo(wn[0][1],wn[1][1])]],no.length>1&&qi()}else an=Rt[0][0],$t=Rt[0][1],fn=Rt[1][0],Zn=Rt[1][1];Vt=an,_n=$t,fi=fn,xr=Zn;var Bv=_a(Se).attr("pointer-events","none"),Kt=Bv.selectAll(".overlay").attr("cursor",cl[Oe]);j0(Se);var Pn=g(Se,arguments,!0).beforestart();if(he.touches)Pn.moved=Lt,Pn.ended=hi;else{var $n=_a(he.view).on("mousemove.brush",Lt,!0).on("mouseup.brush",hi,!0);a&&$n.on("keydown.brush",mo,!0).on("keyup.brush",go,!0),tX(he.view)}h.call(Se),Pn.start(he,Be.name)}function Lt(wn){for(const Xi of wn.changedTouches||[wn])for(const Lp of no)Lp.identifier===Xi.identifier&&(Lp.cur=SE(Xi,Se));if(tf&&!nf&&!rf&&1===no.length){const Xi=no[0];zE(Xi.cur[0]-Xi[0])>zE(Xi.cur[1]-Xi[1])?rf=!0:nf=!0}for(const Xi of no)Xi.cur&&(Xi[0]=Xi.cur[0],Xi[1]=Xi.cur[1]);Mp=!0,G0(wn),qi(wn)}function qi(wn){const Xi=no[0],Lp=Xi.point0;var sc;switch(er=Xi[0]-Lp[0],tr=Xi[1]-Lp[1],Be){case $0:case jE:et&&(er=eo(on-an,to(Wn-fn,er)),Vt=an+er,fi=fn+er),at&&(tr=eo(At-$t,to(ur-Zn,tr)),_n=$t+tr,xr=Zn+tr);break;case Gd:no[1]?(et&&(Vt=eo(on,to(Wn,no[0][0])),fi=eo(on,to(Wn,no[1][0])),et=1),at&&(_n=eo(At,to(ur,no[0][1])),xr=eo(At,to(ur,no[1][1])),at=1)):(et<0?(er=eo(on-an,to(Wn-an,er)),Vt=an+er,fi=fn):et>0&&(er=eo(on-fn,to(Wn-fn,er)),Vt=an,fi=fn+er),at<0?(tr=eo(At-$t,to(ur-$t,tr)),_n=$t+tr,xr=Zn):at>0&&(tr=eo(At-Zn,to(ur-Zn,tr)),_n=$t,xr=Zn+tr));break;case $d:et&&(Vt=eo(on,to(Wn,an-er*et)),fi=eo(on,to(Wn,fn+er*et))),at&&(_n=eo(At,to(ur,$t-tr*at)),xr=eo(At,to(ur,Zn+tr*at)))}fi<Vt&&(et*=-1,sc=an,an=fn,fn=sc,sc=Vt,Vt=fi,fi=sc,Oe in VE&&Kt.attr("cursor",cl[Oe=VE[Oe]])),xr<_n&&(at*=-1,sc=$t,$t=Zn,Zn=sc,sc=_n,_n=xr,xr=sc,Oe in GE&&Kt.attr("cursor",cl[Oe=GE[Oe]])),ft.selection&&(Rt=ft.selection),nf&&(Vt=Rt[0][0],fi=Rt[1][0]),rf&&(_n=Rt[0][1],xr=Rt[1][1]),(Rt[0][0]!==Vt||Rt[0][1]!==_n||Rt[1][0]!==fi||Rt[1][1]!==xr)&&(ft.selection=[[Vt,_n],[fi,xr]],h.call(Se),Pn.brush(wn,Be.name))}function hi(wn){if(VW(wn),wn.touches){if(wn.touches.length)return;c&&clearTimeout(c),c=setTimeout(function(){c=null},500)}else nX(wn.view,Mp),$n.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Bv.attr("pointer-events","all"),Kt.attr("cursor",cl.overlay),ft.selection&&(Rt=ft.selection),KW(Rt)&&(ft.selection=null,h.call(Se)),Pn.end(wn,Be.name)}function mo(wn){switch(wn.keyCode){case 16:tf=et&&at;break;case 18:Be===Gd&&(et&&(fn=fi-er*et,an=Vt+er*et),at&&(Zn=xr-tr*at,$t=_n+tr*at),Be=$d,qi());break;case 32:(Be===Gd||Be===$d)&&(et<0?fn=fi-er:et>0&&(an=Vt-er),at<0?Zn=xr-tr:at>0&&($t=_n-tr),Be=$0,Kt.attr("cursor",cl.selection),qi());break;default:return}G0(wn)}function go(wn){switch(wn.keyCode){case 16:tf&&(nf=rf=tf=!1,qi());break;case 18:Be===$d&&(et<0?fn=fi:et>0&&(an=Vt),at<0?Zn=xr:at>0&&($t=_n),Be=Gd,qi());break;case 32:Be===$0&&(wn.altKey?(et&&(fn=fi-er*et,an=Vt+er*et),at&&(Zn=xr-tr*at,$t=_n+tr*at),Be=$d):(et<0?fn=fi:et>0&&(an=Vt),at<0?Zn=xr:at>0&&($t=_n),Be=Gd),Kt.attr("cursor",cl[Oe]),qi());break;default:return}G0(wn)}}function V(he){g(this,arguments).moved(he)}function ce(he){g(this,arguments).ended(he)}function Ie(){var he=this.__brush||{selection:null};return he.extent=H0(r.apply(this,arguments)),he.dim=t,he}return f.move=function(he,Se){he.tween?he.on("start.brush",function(Oe){g(this,arguments).beforestart().start(Oe)}).on("interrupt.brush end.brush",function(Oe){g(this,arguments).end(Oe)}).tween("brush",function(){var Oe=this,Be=Oe.__brush,et=g(Oe,arguments),at=Be.selection,ft=t.input("function"==typeof Se?Se.apply(this,arguments):Se,Be.extent),Pt=yv(at,ft);function Rt(on){Be.selection=1===on&&null===ft?null:Pt(on),h.call(Oe),et.brush()}return null!==at&&null!==ft?Rt:Rt(1)}):he.each(function(){var Oe=this,Be=arguments,et=Oe.__brush,at=t.input("function"==typeof Se?Se.apply(Oe,Be):Se,et.extent),ft=g(Oe,Be).beforestart();j0(Oe),et.selection=null===at?null:at,h.call(Oe),ft.start().brush().end()})},f.clear=function(he){f.move(he,null)},I.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(he,Se){return this.starting?(this.starting=!1,this.emit("start",he,Se)):this.emit("brush",he),this},brush:function(he,Se){return this.emit("brush",he,Se),this},end:function(he,Se){return 0==--this.active&&(delete this.state.emitter,this.emit("end",he,Se)),this},emit:function(he,Se,Oe){var Be=_a(this.that).datum();s.call(he,this.that,new UW(he,{sourceEvent:Se,target:f,selection:t.output(this.state.selection),mode:Oe,dispatch:s}),Be)}},f.extent=function(he){return arguments.length?(r="function"==typeof he?he:V0(H0(he)),f):r},f.filter=function(he){return arguments.length?(e="function"==typeof he?he:V0(!!he),f):e},f.touchable=function(he){return arguments.length?(n="function"==typeof he?he:V0(!!he),f):n},f.handleSize=function(he){return arguments.length?(l=+he,f):l},f.keyModifiers=function(he){return arguments.length?(a=!!he,f):a},f.on=function(){var he=s.on.apply(s,arguments);return he===s?f:he},f}(Av)}().extent([[0,0],[n,e]]).on("brush end",({selection:a})=>{const l=(a||this.xScale.range()).map(this.xScale.invert);this.onDomainChange.emit(l),this.cd.markForCheck()}),_a(this.element).select(".brush").call(this.brush)}updateBrush(){this.brush&&(this.brush.extent([[0,0],[this.view[0],this.height]]),_a(this.element).select(".brush").call(this.brush),_a(this.element).select(".selection").attr("fill",void 0).attr("stroke",void 0).attr("fill-opacity",void 0),this.cd.markForCheck())}getDims(){return{width:this.view[0],height:this.height}}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.ChangeDetectorRef))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-timeline",""]],inputs:{view:"view",results:"results",scheme:"scheme",customColors:"customColors",legend:"legend",autoScale:"autoScale",scaleType:"scaleType",height:"height"},outputs:{select:"select",onDomainChange:"onDomainChange"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:jQ,ngContentSelectors:KT,decls:7,vars:4,consts:[[1,"timeline"],["in","SourceGraphic","type","matrix","values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"],[1,"embedded-chart"],["x","0","y","0",1,"brush-background"],[1,"brush"]],template:function(e,n){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g",0),o.\u0275\u0275elementStart(1,"filter"),o.\u0275\u0275element(2,"feColorMatrix",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"g",2),o.\u0275\u0275projection(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"rect",3),o.\u0275\u0275element(6,"g",4),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275attribute("transform",n.transform),o.\u0275\u0275advance(1),o.\u0275\u0275attribute("id",n.filterId),o.\u0275\u0275advance(4),o.\u0275\u0275attribute("width",n.view[0])("height",n.height))},styles:[".timeline .brush-background{fill:#0000000d}.timeline .brush .selection{fill:#0000001a;stroke-width:1px;stroke:#888}.timeline .brush .handle{fill-opacity:0}.timeline .embedded-chart{opacity:.6}\n"],encapsulation:2,changeDetection:0}),t})(),ba=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[x.CommonModule,dA,hA],x.CommonModule,dA,hA]}),t})(),SA=[{name:"vivid",selectable:!0,group:Zt.Ordinal,domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:Zt.Ordinal,domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:Zt.Ordinal,domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:Zt.Ordinal,domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:Zt.Linear,domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:Zt.Linear,domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:Zt.Linear,domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:Zt.Ordinal,domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:Zt.Ordinal,domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:Zt.Ordinal,domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:Zt.Ordinal,domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:Zt.Ordinal,domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:Zt.Ordinal,domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:Zt.Ordinal,domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:Zt.Ordinal,domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class dZ{constructor(r,e,n,a){"string"==typeof r&&(r=SA.find(s=>s.name===r)),this.colorDomain=r.domain,this.scaleType=e,this.domain=n,this.customColors=a,this.scale=this.generateColorScheme(r,e,this.domain)}generateColorScheme(r,e,n){let a;switch("string"==typeof r&&(r=SA.find(s=>s.name===r)),e){case Zt.Quantile:a=zT().range(r.domain).domain(n);break;case Zt.Ordinal:a=fx().range(r.domain).domain(n);break;case Zt.Linear:{const s=[...r.domain];1===s.length&&(s.push(s[0]),this.colorDomain=s);const l=LT(0,1,1/s.length);a=fu().range(s).domain(l)}}return a}getColor(r){if(null==r)throw new Error("Value can not be null");if(this.scaleType===Zt.Linear){const e=fu().domain(this.domain).range([0,1]);return this.scale(e(r))}{if("function"==typeof this.customColors)return this.customColors(r);const e=r.toString();let n;return this.customColors&&this.customColors.length>0&&(n=this.customColors.find(a=>a.name.toLowerCase()===e.toLowerCase())),n?n.value:this.scale(r)}}getLinearGradientStops(r,e){void 0===e&&(e=this.domain[0]);const n=fu().domain(this.domain).range([0,1]),a=hx().domain(this.colorDomain).range([0,1]),s=this.getColor(r),l=n(e),c=this.getColor(e),f=n(r);let h=1,g=l;const I=[];for(I.push({color:c,offset:l,originalOffset:l,opacity:1});g<f&&h<this.colorDomain.length;){const B=this.colorDomain[h],V=a(B);if(V<=l)h++;else{if(V.toFixed(4)>=(f-a.bandwidth()).toFixed(4))break;I.push({color:B,offset:V,opacity:1}),g=V,h++}}if(I[I.length-1].offset<100&&I.push({color:s,offset:f,opacity:1}),f===l)I[0].offset=0,I[1].offset=100;else if(100!==I[I.length-1].offset)for(const B of I)B.offset=(B.offset-l)/(f-l)*100;return I}}let gZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba]]}),t})(),TA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba]]}),t})(),vZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba]]}),t})(),yZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba]]}),t})(),_Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba]]}),t})(),xZ=(()=>{class t{constructor(e,n){this.element=e,this.platformId=n,this.fill="none",this.animations=!0,this.initialized=!1,this.isSSR=!1}ngOnInit(){(0,x.isPlatformServer)(this.platformId)&&(this.isSSR=!0)}ngOnChanges(e){this.initialized?this.updatePathEl():(this.initialized=!0,this.initialPath=this.path)}updatePathEl(){const e=_a(this.element.nativeElement).select(".line");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.PLATFORM_ID))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-line",""]],inputs:{path:"path",stroke:"stroke",data:"data",fill:"fill",animations:"animations"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:wJ,decls:2,vars:2,consts:[[4,"ngIf"],["stroke-width","1.5px",1,"line"]],template:function(e,n){1&e&&(o.\u0275\u0275template(0,SJ,2,4,"g",0),o.\u0275\u0275template(1,EJ,2,3,"g",0)),2&e&&(o.\u0275\u0275property("ngIf",!n.isSSR),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isSSR))},directives:[x.NgIf],encapsulation:2,data:{animation:[(0,Ii.X$)("animationState",[(0,Ii.eR)(":enter",[(0,Ii.oB)({strokeDasharray:2e3,strokeDashoffset:2e3}),(0,Ii.jt)(1e3,(0,Ii.oB)({strokeDashoffset:0}))])])]},changeDetection:0}),t})(),bZ=(()=>{class t{constructor(){this.animations=!0,this.barOrientation=Ja}ngOnChanges(e){this.update()}update(){this.updateGradients();const e=this.sortData(this.data.series),n=this.getLineGenerator();this.path=n(e)||"";const a=this.getAreaGenerator();if(this.areaPath=a(e)||"",this.hasRange){const s=this.getRangeGenerator();this.outerPath=s(e)||""}if(this.hasGradient){this.stroke=this.gradientUrl;const s=this.data.series.map(f=>f.value),l=Math.max(...s);l===Math.min(...s)&&(this.stroke=this.colors.getColor(l))}else this.stroke=this.colors.getColor(this.data.name)}getLineGenerator(){return XT().x(e=>{const n=e.name;let a;return a=this.xScale(this.scaleType===Zt.Time?n:this.scaleType===Zt.Linear?Number(n):n),a}).y(e=>this.yScale(e.value)).curve(this.curve)}getRangeGenerator(){return WT().x(e=>{const n=e.name;let a;return a=this.xScale(this.scaleType===Zt.Time?n:this.scaleType===Zt.Linear?Number(n):n),a}).y0(e=>this.yScale("number"==typeof e.min?e.min:e.value)).y1(e=>this.yScale("number"==typeof e.max?e.max:e.value)).curve(this.curve)}getAreaGenerator(){return WT().x(n=>this.xScale(n.name)).y0(()=>this.yScale.range()[0]).y1(n=>this.yScale(n.value)).curve(this.curve)}sortData(e){return e=this.scaleType===Zt.Linear?function hZ(t,r,e="asc"){return t.sort((n,a)=>"asc"===e?n[r]-a[r]:a[r]-n[r])}(e,"name"):this.scaleType===Zt.Time?function mZ(t,r,e="asc"){return t.sort((n,a)=>{const s=n[r].getTime(),l=a[r].getTime();return"asc"===e?s>l?1:l>s?-1:0:s>l?-1:l>s?1:0})}(e,"name"):function pZ(t,r,e="asc",n){return t.sort((a,s)=>{const c=s[r],f=n.indexOf(a[r]),h=n.indexOf(c);return"asc"===e?f-h:h-f})}(e,"name","asc",this.xScale.domain()),e}updateGradients(){if(this.colors.scaleType===Zt.Linear){this.hasGradient=!0,this.gradientId="grad"+Jd().toString(),this.gradientUrl=`url(#${this.gradientId})`;const e=this.data.series.map(s=>s.value),n=Math.max(...e),a=Math.min(...e);this.gradientStops=this.colors.getLinearGradientStops(n,a),this.areaGradientStops=this.colors.getLinearGradientStops(n)}else this.hasGradient=!1,this.gradientStops=void 0,this.areaGradientStops=void 0}isActive(e){return!!this.activeEntries&&void 0!==this.activeEntries.find(a=>e.name===a.name)}isInactive(e){return!(!this.activeEntries||0===this.activeEntries.length)&&void 0===this.activeEntries.find(a=>e.name===a.name)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["g","ngx-charts-line-series",""]],inputs:{data:"data",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",curve:"curve",activeEntries:"activeEntries",rangeFillOpacity:"rangeFillOpacity",hasRange:"hasRange",animations:"animations"},features:[o.\u0275\u0275NgOnChangesFeature],attrs:TJ,decls:6,vars:22,consts:[["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops",4,"ngIf"],["ngx-charts-area","",1,"line-highlight",3,"data","path","fill","opacity","startOpacity","gradient","stops","animations"],["ngx-charts-line","",1,"line-series",3,"data","path","stroke","animations"],["ngx-charts-area","","class","line-series-range",3,"data","path","fill","active","inactive","opacity","animations",4,"ngIf"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"],["ngx-charts-area","",1,"line-series-range",3,"data","path","fill","opacity","animations"]],template:function(e,n){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"g"),o.\u0275\u0275elementStart(1,"defs"),o.\u0275\u0275template(2,AJ,1,3,"g",0),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"g",1),o.\u0275\u0275element(4,"g",2),o.\u0275\u0275template(5,kJ,1,9,"g",3),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.hasGradient),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("active",n.isActive(n.data))("inactive",n.isInactive(n.data)),o.\u0275\u0275property("data",n.data)("path",n.areaPath)("fill",n.hasGradient?n.gradientUrl:n.colors.getColor(n.data.name))("opacity",.25)("startOpacity",0)("gradient",!0)("stops",n.areaGradientStops)("animations",n.animations),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("active",n.isActive(n.data))("inactive",n.isInactive(n.data)),o.\u0275\u0275property("data",n.data)("path",n.path)("stroke",n.stroke)("animations",n.animations),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.hasRange))},directives:[Nv,yA,xZ,x.NgIf],encapsulation:2,changeDetection:0}),t})(),CZ=(()=>{class t extends aA{constructor(){super(...arguments),this.legendTitle="Legend",this.legendPosition=fl.Right,this.showGridLines=!0,this.curve=vx,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.roundDomains=!1,this.tooltipDisabled=!1,this.showRefLines=!1,this.showRefLabels=!0,this.activate=new o.EventEmitter,this.deactivate=new o.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.timelineHeight=50,this.timelinePadding=10,this.isSSR=!1}ngOnInit(){(0,x.isPlatformServer)(this.platformId)&&(this.isSSR=!0)}update(){super.update(),this.dims=function uZ({width:t,height:r,margins:e,showXAxis:n=!1,showYAxis:a=!1,xAxisHeight:s=0,yAxisWidth:l=0,showXLabel:c=!1,showYLabel:f=!1,showLegend:h=!1,legendType:g=Zt.Ordinal,legendPosition:I=fl.Right,columns:B=12}){let V=e[3],ce=t,Ie=r-e[0]-e[2];if(h&&I===fl.Right&&(B-=g===Zt.Ordinal?2:1),ce=ce*B/12,ce=ce-e[1]-e[3],n&&(Ie-=5,Ie-=s,c&&(Ie-=30)),a&&(ce-=5,ce-=l,V+=l,V+=10,f)){const he=30;ce-=he,V+=he}return ce=Math.max(0,ce),Ie=Math.max(0,Ie),{width:Math.floor(ce),height:Math.floor(Ie),xOffset:Math.floor(V)}}({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.timeline&&(this.dims.height-=this.timelineHeight+this.margin[2]+this.timelinePadding),this.xDomain=this.getXDomain(),this.filteredDomain&&(this.xDomain=this.filteredDomain),this.yDomain=this.getYDomain(),this.seriesDomain=this.getSeriesDomain(),this.xScale=this.getXScale(this.xDomain,this.dims.width),this.yScale=this.getYScale(this.yDomain,this.dims.height),this.updateTimeline(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`,this.clipPathId="clip"+Jd().toString(),this.clipPath=`url(#${this.clipPathId})`}updateTimeline(){this.timeline&&(this.timelineWidth=this.dims.width,this.timelineXDomain=this.getXDomain(),this.timelineXScale=this.getXScale(this.timelineXDomain,this.timelineWidth),this.timelineYScale=this.getYScale(this.yDomain,this.timelineHeight),this.timelineTransform=`translate(${this.dims.xOffset}, ${-this.margin[2]})`)}getXDomain(){let e=function fZ(t){const r=new Set;for(const e of t)for(const n of e.series)r.add(n.name);return Array.from(r)}(this.results);this.scaleType=function EA(t,r=!0){return r&&t.every(a=>a instanceof Date)?Zt.Time:t.every(n=>"number"==typeof n)?Zt.Linear:Zt.Ordinal}(e);let a,s,n=[];return this.scaleType===Zt.Linear&&(e=e.map(l=>Number(l))),(this.scaleType===Zt.Time||this.scaleType===Zt.Linear)&&(a=this.xScaleMin?this.xScaleMin:Math.min(...e),s=this.xScaleMax?this.xScaleMax:Math.max(...e)),this.scaleType===Zt.Time?(n=[new Date(a),new Date(s)],this.xSet=[...e].sort((l,c)=>{const f=l.getTime(),h=c.getTime();return f>h?1:h>f?-1:0})):this.scaleType===Zt.Linear?(n=[a,s],this.xSet=[...e].sort((l,c)=>l-c)):(n=e,this.xSet=e),n}getYDomain(){const e=[];for(const l of this.results)for(const c of l.series)e.indexOf(c.value)<0&&e.push(c.value),void 0!==c.min&&(this.hasRange=!0,e.indexOf(c.min)<0&&e.push(c.min)),void 0!==c.max&&(this.hasRange=!0,e.indexOf(c.max)<0&&e.push(c.max));const n=[...e];return this.autoScale||n.push(0),[this.yScaleMin?this.yScaleMin:Math.min(...n),this.yScaleMax?this.yScaleMax:Math.max(...n)]}getSeriesDomain(){return this.results.map(e=>e.name)}getXScale(e,n){let a;return this.scaleType===Zt.Time?a=AT().range([0,n]).domain(e):this.scaleType===Zt.Linear?(a=fu().range([0,n]).domain(e),this.roundDomains&&(a=a.nice())):this.scaleType===Zt.Ordinal&&(a=jT().range([0,n]).padding(.1).domain(e)),a}getYScale(e,n){const a=fu().range([n,0]).domain(e);return this.roundDomains?a.nice():a}updateDomain(e){this.filteredDomain=e,this.xDomain=this.filteredDomain,this.xScale=this.getXScale(this.xDomain,this.dims.width)}updateHoveredVertical(e){this.hoveredVertical=e.value,this.deactivateAll()}hideCircles(){this.hoveredVertical=null,this.deactivateAll()}onClick(e){this.select.emit(e)}trackBy(e,n){return`${n.name}`}setColors(){let e;e=this.schemeType===Zt.Ordinal?this.seriesDomain:this.yDomain,this.colors=new dZ(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return e.scaleType===Zt.Ordinal?(e.domain=this.seriesDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e){this.deactivateAll(),!(this.activeEntries.findIndex(a=>a.name===e.name&&a.value===e.value)>-1)&&(this.activeEntries=[e],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const n=this.activeEntries.findIndex(a=>a.name===e.name&&a.value===e.value);this.activeEntries.splice(n,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}deactivateAll(){this.activeEntries=[...this.activeEntries];for(const e of this.activeEntries)this.deactivate.emit({value:e,entries:[]});this.activeEntries=[]}}return t.\u0275fac=function(){let r;return function(n){return(r||(r=o.\u0275\u0275getInheritedFactory(t)))(n||t)}}(),t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["ngx-charts-line-chart"]],contentQueries:function(e,n,a){if(1&e&&(o.\u0275\u0275contentQuery(a,XQ,5),o.\u0275\u0275contentQuery(a,WQ,5)),2&e){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.tooltipTemplate=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(n.seriesTooltipTemplate=s.first)}},hostBindings:function(e,n){1&e&&o.\u0275\u0275listener("mouseleave",function(){return n.hideCircles()})},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",autoScale:"autoScale",timeline:"timeline",gradient:"gradient",showGridLines:"showGridLines",curve:"curve",activeEntries:"activeEntries",schemeType:"schemeType",rangeFillOpacity:"rangeFillOpacity",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",roundDomains:"roundDomains",tooltipDisabled:"tooltipDisabled",showRefLines:"showRefLines",referenceLines:"referenceLines",showRefLabels:"showRefLabels",xScaleMin:"xScaleMin",xScaleMax:"xScaleMax",yScaleMin:"yScaleMin",yScaleMax:"yScaleMax"},outputs:{activate:"activate",deactivate:"deactivate"},features:[o.\u0275\u0275InheritDefinitionFeature],decls:12,vars:20,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"line-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged",4,"ngIf"],[4,"ngIf"],[3,"mouseleave",4,"ngIf"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","scaleType","legend","onDomainChange",4,"ngIf"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","activeEntries","scaleType","curve","rangeFillOpacity","hasRange","animations"],[3,"mouseleave"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","tooltipDisabled","tooltipTemplate","hover"],[4,"ngFor","ngForOf"],["ngx-charts-circle-series","",3,"xScale","yScale","colors","data","scaleType","visibleValue","activeEntries","tooltipDisabled","tooltipTemplate","select","activate","deactivate"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","scaleType","legend","onDomainChange"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","scaleType","curve","hasRange","animations"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"ngx-charts-chart",0),o.\u0275\u0275listener("legendLabelClick",function(s){return n.onClick(s)})("legendLabelActivate",function(s){return n.onActivate(s)})("legendLabelDeactivate",function(s){return n.onDeactivate(s)}),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(1,"defs"),o.\u0275\u0275elementStart(2,"clipPath"),o.\u0275\u0275element(3,"rect"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"g",1),o.\u0275\u0275template(5,IJ,1,10,"g",2),o.\u0275\u0275template(6,PJ,1,12,"g",3),o.\u0275\u0275elementStart(7,"g"),o.\u0275\u0275template(8,RJ,2,2,"g",4),o.\u0275\u0275template(9,OJ,2,2,"g",4),o.\u0275\u0275template(10,LJ,3,9,"g",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(11,BJ,2,13,"g",6),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("view",o.\u0275\u0275pureFunction2(17,Op,n.width,n.height))("showLegend",n.legend)("legendOptions",n.legendOptions)("activeEntries",n.activeEntries)("animations",n.animations),o.\u0275\u0275advance(2),o.\u0275\u0275attribute("id",n.clipPathId),o.\u0275\u0275advance(1),o.\u0275\u0275attribute("width",n.dims.width+10)("height",n.dims.height+10)("transform","translate(-5, -5)"),o.\u0275\u0275advance(1),o.\u0275\u0275attribute("transform",n.transform),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.xAxis),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.yAxis),o.\u0275\u0275advance(1),o.\u0275\u0275attribute("clip-path",n.clipPath),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.isSSR),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isSSR),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.tooltipDisabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.timeline&&"ordinal"!=n.scaleType))},directives:[rA,iZ,oZ,bZ,CA,gA,wA,x.NgIf,x.NgForOf],styles:[".ngx-charts-outer{-webkit-animation:chartFadeIn linear .6s;animation:chartFadeIn linear .6s}@-webkit-keyframes chartFadeIn{0%{opacity:0}20%{opacity:0}to{opacity:1}}@keyframes chartFadeIn{0%{opacity:0}20%{opacity:0}to{opacity:1}}.ngx-charts{float:left;overflow:visible}.ngx-charts .circle,.ngx-charts .cell,.ngx-charts .bar,.ngx-charts .arc{cursor:pointer}.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover,.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .card.active,.ngx-charts .card:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .bar:focus,.ngx-charts .cell:focus,.ngx-charts .arc:focus,.ngx-charts .card:focus{outline:none}.ngx-charts .bar.hidden,.ngx-charts .cell.hidden,.ngx-charts .arc.hidden,.ngx-charts .card.hidden{display:none}.ngx-charts g:focus{outline:none}.ngx-charts .line-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .polar-series-path.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .area-series.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:#0000000d}\n"],encapsulation:2,data:{animation:[(0,Ii.X$)("animationState",[(0,Ii.eR)(":leave",[(0,Ii.oB)({opacity:1}),(0,Ii.jt)(500,(0,Ii.oB)({opacity:0}))])])]},changeDetection:0}),t})(),AA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba]]}),t})();Math;let wx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba]]}),t})(),EZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba,wx,AA]]}),t})(),AZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba]]}),t})(),kZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba]]}),t})(),IZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[[ba,wx,TA]]}),t})(),FZ=(()=>{class t{constructor(){!function PZ(){"undefined"!=typeof SVGElement&&void 0===SVGElement.prototype.contains&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=o.\u0275\u0275defineInjector({imports:[ba,gZ,TA,vZ,yZ,_Z,AA,EZ,AZ,wx,kZ,IZ]}),t})(),RZ=(()=>{class t{constructor(e,n){this.route=e,this.view=void 0,this.legend=!0,this.showLabels=!0,this.animations=!0,this.xAxis=!0,this.yAxis=!0,this.showYAxisLabel=!0,this.showXAxisLabel=!0,this.xAxisLabel="Time",this.yAxisLabel="Rating",this.timeline=!0,this.colorScheme={domain:["#5AA454","#E44D25","#CFC0BB","#7aa3e5","#a8385d","#aae3f5"]},this.regionsService=n.getEntityCollectionService("RegionalLineChartRegion")}ngOnInit(){this.route.paramMap.pipe((0,ye.U)(e=>e.get("date")),(0,$.h)(e=>void 0!==e),(0,ee.b)(e=>{const a={value:`${e}T23:59:59.000Z`},s=`start_date=${JSON.stringify({value:`${e}T00:00:00.000Z`})}&end_date=${JSON.stringify(a)}`;this.regions$=this.regionsService.getWithQuery(s).pipe((0,ee.b)(l=>console.log("region entities",l)))})).subscribe()}onSelect(e){console.log("Item clicked",JSON.parse(JSON.stringify(e)))}onActivate(e){console.log("Activate",JSON.parse(JSON.stringify(e)))}onDeactivate(e){console.log("Deactivate",JSON.parse(JSON.stringify(e)))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275directiveInject(zn.ActivatedRoute),o.\u0275\u0275directiveInject(li))},t.\u0275cmp=o.\u0275\u0275defineComponent({type:t,selectors:[["rtc-ci-regional-grid-chart"]],decls:7,vars:13,consts:[[1,"chart-container"],[3,"view","scheme","legend","showXAxisLabel","showYAxisLabel","xAxis","yAxis","xAxisLabel","yAxisLabel","timeline","results","select","activate","deactivate"]],template:function(e,n){1&e&&(o.\u0275\u0275elementStart(0,"h1"),o.\u0275\u0275text(1,"The Daily Dose: Global Energy Carbon Intensity Report"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"p"),o.\u0275\u0275text(3,"NOTE: Dips to 0 are gaps in data set where report data isn't available."),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",0),o.\u0275\u0275elementStart(5,"ngx-charts-line-chart",1),o.\u0275\u0275listener("select",function(s){return n.onSelect(s)})("activate",function(s){return n.onActivate(s)})("deactivate",function(s){return n.onDeactivate(s)}),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(5),o.\u0275\u0275property("view",n.view)("scheme",n.colorScheme)("legend",n.legend)("showXAxisLabel",n.showXAxisLabel)("showYAxisLabel",n.showYAxisLabel)("xAxis",n.xAxis)("yAxis",n.yAxis)("xAxisLabel",n.xAxisLabel)("yAxisLabel",n.yAxisLabel)("timeline",n.timeline)("results",o.\u0275\u0275pipeBind1(6,11,n.regions$)))},directives:[CZ],pipes:[x.AsyncPipe],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.chart-container[_ngcontent-%COMP%]{flex:1}h1[_ngcontent-%COMP%]{margin:0;padding:0;text-align:center}p[_ngcontent-%COMP%]{margin:0 0 1em;padding:0;text-align:center}"]}),t})();class OZ{constructor(r){this.series=[],r&&(this.key=r.key,this.name=r.key,this.series=r.aggs.buckets.map(e=>new MZ(e)))}}class MZ{constructor(r){r&&(this.key=r.key,this.maxRating=Math.round(r.max_rating.value),this.minRating=Math.round(r.min_rating.value),this.avgRating=Math.round(r.avg_rating.value),this.name=r.key_as_string,this.value=Math.round(r.avg_rating.value))}}const NZ=[{path:"auth-callback",component:td},{path:"report/:date",component:RZ},...G1.map(([t,r])=>({matcher:u0(new di({id:t,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:r})),component:rv,data:{panelPageListItem:new di({id:t,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:r})}})),...G1.map(([t,r])=>({matcher:c0(new di({id:t,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:r})),component:iv,data:{panelPageListItem:new di({id:t,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:r})}})),{path:"**",component:Fj,canActivate:[Ow]}],BZ={root:qa_apiGatewaySettings.endpointUrl,timeout:2e4};function jZ(){const t=new Lh;return t.link=(r,e,n)=>"page"===n?`<classifieds-ui-panel-page id="${r}"></classifieds-ui-panel-page>`:`<classifieds-ui-page-router-link href="${r}" text="${n}"></classifieds-ui-page-router-link>`,{renderer:t}}let zZ=(()=>{class t{constructor(e,n,a,s,l,c){const f=(t=>({RegionalLineChartRegion:{selectId:r=>r.key,entityName:" RegionalLineChartRegion",crud:{grid_carbon_intensities_by_region:{ops:["query"],params:{id:"energy_grid_carbon_intensities_by_region_search_template",index:"energy-grid-carbon-intensity-001",hits:!1,source:!1,domain:t.openSearchDomain,region:"us-east-1"}}}}}))(e);n.registerMetadataMap(f),a.registerService("RegionalLineChartRegion",new Fg("RegionalLineChartRegion",s,l,c)),s.register((t=>new Kc({id:"grid_carbon_intensities_by_region",title:"grid_carbon_intensities_by_region",create:({})=>(0,Re.of)({success:!1}),update:({})=>(0,Re.of)({success:!1}),delete:({})=>(0,Re.of)({success:!1}),read:({})=>(0,Re.of)({success:!1}),query:({rule:r,params:e})=>(0,Re.of)({entities:[],success:!1}).pipe((0,Ke.w)(()=>t.getPlugin("aws_opensearch_template")),(0,Ke.w)(n=>n.query({rule:r,params:e,identity:void 0})),(0,ye.U)(({entities:n})=>({entities:n[0].aggregations.regions.buckets.map(a=>new OZ(a)),success:!0})))}))(s))}}return t.\u0275fac=function(e){return new(e||t)(o.\u0275\u0275inject(z_),o.\u0275\u0275inject(pr),o.\u0275\u0275inject(Hr),o.\u0275\u0275inject(il),o.\u0275\u0275inject(pr),o.\u0275\u0275inject(Td))},t.\u0275mod=o.\u0275\u0275defineNgModule({type:t,bootstrap:[LH]}),t.\u0275inj=o.\u0275\u0275defineInjector({providers:[Ow,{provide:mn.SITE_NAME,useValue:qa_site},{provide:od,useValue:new Ba(qa_clientSettings)},{provide:yg,useValue:new WN(qa_mediaSettings)},{provide:z_,useValue:new T4(qa_panelsSettings)},{provide:Jq,useValue:new t7(qa_alienaliasSettings)},{provide:d1,useValue:new y8({disableRouting:!1})},{provide:Nc,useValue:new Ay(qa_cognitoSettings)},{provide:_7,useValue:new y7(qa_rumSettings)},{provide:L.HTTP_INTERCEPTORS,useClass:Ks,multi:!0},{provide:L.HTTP_INTERCEPTORS,useClass:Xs,multi:!0},{provide:jr,useValue:BZ},{provide:o.APP_INITIALIZER,useFactory:OH({key:({data:r})=>"panelpage__"+r.id,data:x7.map(r=>new di(r))}),multi:!0,deps:[o.PLATFORM_ID]}],imports:[[k.b2.withServerTransition({appId:"serverApp"}),x.CommonModule,L.HttpClientModule,L.HttpClientJsonpModule,k.Cu,d.u5,d.UX,j.PW,wl,Au,Qq,m_.forRoot({sanitize:o.SecurityContext.NONE,markedOptions:{provide:lw,useFactory:jZ}}),zn.RouterModule.forRoot(NZ,{initialNavigation:"enabled",relativeLinkResolution:"legacy"}),qa_production?[]:NH.FT.instrument({maxAge:25,logOnly:qa_production}),YB.forRoot({serializer:x_}),Et.Aw.forRoot(BH,{metaReducers:jH,runtimeChecks:{strictActionImmutability:!0,strictStateImmutability:!0}}),Xo.forRoot([]),kw,SH,sr.MaterialModule,mn.UtilsModule,Fh,Gt.ContentModule,wd,qr.forRoot(),dh.forRoot(),qC,Qu.forRoot({}),Dj,U_,ev,I8,yH,HH,Ty,MH,KH,eq,Kq,f7,v7,Uj,R6,jg,s7,w8,L1,Wl,Kj,FZ]]}),t})();console.log("bootstrap"),qa_production&&(0,o.enableProdMode)(),k.q6().bootstrapModule(zZ).catch(t=>console.log(t))},6954:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32c=void 0;var k=S(480),o=S(1500),x=S(5423),L=function(){function j(){this.crc32c=new x.Crc32c}return j.prototype.update=function(d){(0,o.isEmptyData)(d)||this.crc32c.update((0,o.convertToBuffer)(d))},j.prototype.digest=function(){return(0,k.__awaiter)(this,void 0,void 0,function(){return(0,k.__generator)(this,function(d){return[2,(0,o.numToUint8)(this.crc32c.digest())]})})},j}();O.AwsCrc32c=L},5423:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32c=O.Crc32c=O.crc32c=void 0;var k=S(480),o=S(1500);O.crc32c=function x(y){return(new L).update(y).digest()};var L=function(){function y(){this.checksum=4294967295}return y.prototype.update=function(R){var M,z;try{for(var Y=(0,k.__values)(R),X=Y.next();!X.done;X=Y.next())this.checksum=this.checksum>>>8^d[255&(this.checksum^X.value)]}catch(W){M={error:W}}finally{try{X&&!X.done&&(z=Y.return)&&z.call(Y)}finally{if(M)throw M.error}}return this},y.prototype.digest=function(){return(4294967295^this.checksum)>>>0},y}();O.Crc32c=L;var d=(0,o.uint32ArrayFrom)([0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697]),m=S(6954);Object.defineProperty(O,"AwsCrc32c",{enumerable:!0,get:function(){return m.AwsCrc32c}})},6502:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var k=S(2093),o="undefined"!=typeof Buffer&&Buffer.from?function(L){return Buffer.from(L,"utf8")}:k.fromUtf8;O.convertToBuffer=function x(L){return L instanceof Uint8Array?L:"string"==typeof L?o(L):ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(L)}},1500:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var k=S(6502);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return k.convertToBuffer}});var o=S(3814);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var x=S(566);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return x.numToUint8}});var L=S(2700);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return L.uint32ArrayFrom}})},3814:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function S(k){return"string"==typeof k?0===k.length:0===k.byteLength}},566:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function S(k){return new Uint8Array([(4278190080&k)>>24,(16711680&k)>>16,(65280&k)>>8,255&k])}},2700:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function S(k){if(!Uint32Array.from){for(var o=new Uint32Array(k.length),x=0;x<k.length;)o[x]=k[x],x+=1;return o}return Uint32Array.from(k)}},3141:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.EMPTY_DATA_SHA_1=O.SHA_1_HMAC_ALGO=O.SHA_1_HASH=void 0,O.SHA_1_HASH={name:"SHA-1"},O.SHA_1_HMAC_ALGO={name:"HMAC",hash:O.SHA_1_HASH},O.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])},1883:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha1=void 0;var k=S(1283),o=S(2766),x=S(7506),L=S(776),j=S(5468),d=function(){function m(y){if((0,x.supportsWebCrypto)((0,j.locateWindow)()))this.hash=new o.Sha1(y);else{if(!(0,L.isMsWindow)((0,j.locateWindow)()))throw new Error("SHA1 not supported");this.hash=new k.Sha1(y)}}return m.prototype.update=function(y,R){this.hash.update(y,R)},m.prototype.digest=function(){return this.hash.digest()},m}();O.Sha1=d},1283:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha1=void 0;var k=S(3626),o=S(3141),x=S(2093),L=S(5468),j=function(){function y(R){R?(this.operation=function d(y){return new Promise(function(R,M){var z=(0,L.locateWindow)().msCrypto.subtle.importKey("raw",m(y),o.SHA_1_HMAC_ALGO,!1,["sign"]);z.oncomplete=function(){z.result&&R(z.result),M(new Error("ImportKey completed without importing key."))},z.onerror=function(){M(new Error("ImportKey failed to import key."))}})}(R).then(function(M){return(0,L.locateWindow)().msCrypto.subtle.sign(o.SHA_1_HMAC_ALGO,M)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,L.locateWindow)().msCrypto.subtle.digest("SHA-1"))}return y.prototype.update=function(R){var M=this;(0,k.isEmptyData)(R)||(this.operation=this.operation.then(function(z){return z.onerror=function(){M.operation=Promise.reject(new Error("Error encountered updating hash"))},z.process(m(R)),z}),this.operation.catch(function(){}))},y.prototype.digest=function(){return this.operation.then(function(R){return new Promise(function(M,z){R.onerror=function(){z(new Error("Error encountered finalizing hash"))},R.oncomplete=function(){R.result&&M(new Uint8Array(R.result)),z(new Error("Error encountered finalizing hash"))},R.finish()})})},y}();function m(y){return"string"==typeof y?(0,x.fromUtf8)(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y)}O.Sha1=j},6982:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.WebCryptoSha1=O.Ie11Sha1=void 0,(0,S(70).__exportStar)(S(1883),O);var o=S(1283);Object.defineProperty(O,"Ie11Sha1",{enumerable:!0,get:function(){return o.Sha1}});var x=S(2766);Object.defineProperty(O,"WebCryptoSha1",{enumerable:!0,get:function(){return x.Sha1}})},3626:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function S(k){return"string"==typeof k?0===k.length:0===k.byteLength}},2766:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha1=void 0;var k=S(2093),o=S(3626),x=S(3141),L=S(5468),j=function(){function m(y){this.toHash=new Uint8Array(0),void 0!==y&&(this.key=new Promise(function(R,M){(0,L.locateWindow)().crypto.subtle.importKey("raw",d(y),x.SHA_1_HMAC_ALGO,!1,["sign"]).then(R,M)}),this.key.catch(function(){}))}return m.prototype.update=function(y){if(!(0,o.isEmptyData)(y)){var R=d(y),M=new Uint8Array(this.toHash.byteLength+R.byteLength);M.set(this.toHash,0),M.set(R,this.toHash.byteLength),this.toHash=M}},m.prototype.digest=function(){var y=this;return this.key?this.key.then(function(R){return(0,L.locateWindow)().crypto.subtle.sign(x.SHA_1_HMAC_ALGO,R,y.toHash).then(function(M){return new Uint8Array(M)})}):(0,o.isEmptyData)(this.toHash)?Promise.resolve(x.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,L.locateWindow)().crypto.subtle.digest(x.SHA_1_HASH,y.toHash)}).then(function(R){return Promise.resolve(new Uint8Array(R))})},m}();function d(m){return"string"==typeof m?(0,k.fromUtf8)(m):ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(m)}O.Sha1=j},9189:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},2624:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},8732:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},8424:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},7705:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isMsWindow=void 0;var S=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];O.isMsWindow=function o(x){if(function k(x){return"MSInputMethodContext"in x&&"msCrypto"in x}(x)&&void 0!==x.msCrypto.subtle){var L=x.msCrypto,j=L.getRandomValues,d=L.subtle;return S.map(function(m){return d[m]}).concat(j).every(function(m){return"function"==typeof m})}return!1}},776:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0});var k=S(70);(0,k.__exportStar)(S(9189),O),(0,k.__exportStar)(S(2624),O),(0,k.__exportStar)(S(8732),O),(0,k.__exportStar)(S(8424),O),(0,k.__exportStar)(S(7705),O)},7506:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,S(70).__exportStar)(S(2398),O)},2398:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.supportsZeroByteGCM=O.supportsSubtleCrypto=O.supportsSecureRandom=O.supportsWebCrypto=void 0;var k=S(70),o=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function L(m){return"object"==typeof m&&"object"==typeof m.crypto&&"function"==typeof m.crypto.getRandomValues}function j(m){return m&&o.every(function(y){return"function"==typeof m[y]})}O.supportsWebCrypto=function x(m){return!(!L(m)||"object"!=typeof m.crypto.subtle)&&j(m.crypto.subtle)},O.supportsSecureRandom=L,O.supportsSubtleCrypto=j,O.supportsZeroByteGCM=function d(m){return(0,k.__awaiter)(this,void 0,void 0,function(){var y;return(0,k.__generator)(this,function(z){switch(z.label){case 0:if(!j(m))return[2,!1];z.label=1;case 1:return z.trys.push([1,4,,5]),[4,m.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return y=z.sent(),[4,m.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},y,new Uint8Array(0))];case 3:return[2,16===z.sent().byteLength];case 4:return z.sent(),[2,!1];case 5:return[2]}})})}},5337:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.RawSha256=void 0;var k=S(9271),o=function(){function x(){this.state=Int32Array.from(k.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return x.prototype.update=function(L){if(this.finished)throw new Error("Attempted to update an already finished hash.");var j=0,d=L.byteLength;if(this.bytesHashed+=d,8*this.bytesHashed>k.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;d>0;)this.buffer[this.bufferLength++]=L[j++],d--,this.bufferLength===k.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},x.prototype.digest=function(){if(!this.finished){var L=8*this.bytesHashed,j=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),d=this.bufferLength;if(j.setUint8(this.bufferLength++,128),d%k.BLOCK_SIZE>=k.BLOCK_SIZE-8){for(var m=this.bufferLength;m<k.BLOCK_SIZE;m++)j.setUint8(m,0);this.hashBuffer(),this.bufferLength=0}for(m=this.bufferLength;m<k.BLOCK_SIZE-8;m++)j.setUint8(m,0);j.setUint32(k.BLOCK_SIZE-8,Math.floor(L/4294967296),!0),j.setUint32(k.BLOCK_SIZE-4,L),this.hashBuffer(),this.finished=!0}var y=new Uint8Array(k.DIGEST_LENGTH);for(m=0;m<8;m++)y[4*m]=this.state[m]>>>24&255,y[4*m+1]=this.state[m]>>>16&255,y[4*m+2]=this.state[m]>>>8&255,y[4*m+3]=this.state[m]>>>0&255;return y},x.prototype.hashBuffer=function(){for(var j=this.buffer,d=this.state,m=d[0],y=d[1],R=d[2],M=d[3],z=d[4],Y=d[5],X=d[6],Q=d[7],W=0;W<k.BLOCK_SIZE;W++){if(W<16)this.temp[W]=(255&j[4*W])<<24|(255&j[4*W+1])<<16|(255&j[4*W+2])<<8|255&j[4*W+3];else{var J=this.temp[W-2];this.temp[W]=(((J>>>17|J<<15)^(J>>>19|J<<13)^J>>>10)+this.temp[W-7]|0)+((((J=this.temp[W-15])>>>7|J<<25)^(J>>>18|J<<14)^J>>>3)+this.temp[W-16]|0)}var G=(((z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7))+(z&Y^~z&X)|0)+(Q+(k.KEY[W]+this.temp[W]|0)|0)|0,$=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&y^m&R^y&R)|0;Q=X,X=Y,Y=z,z=M+G|0,M=R,R=y,y=m,m=G+$|0}d[0]+=m,d[1]+=y,d[2]+=R,d[3]+=M,d[4]+=z,d[5]+=Y,d[6]+=X,d[7]+=Q},x}();O.RawSha256=o},9271:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.MAX_HASHABLE_LENGTH=O.INIT=O.KEY=O.DIGEST_LENGTH=O.BLOCK_SIZE=void 0,O.BLOCK_SIZE=64,O.DIGEST_LENGTH=32,O.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),O.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],O.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},9984:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,S(9055).__exportStar)(S(7803),O)},7803:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var k=S(9055),o=S(9271),x=S(5337),L=S(5272),j=function(){function m(y){if(this.hash=new x.RawSha256,y){this.outer=new x.RawSha256;var R=function d(m){var y=(0,L.convertToBuffer)(m);if(y.byteLength>o.BLOCK_SIZE){var R=new x.RawSha256;R.update(y),y=R.digest()}var M=new Uint8Array(o.BLOCK_SIZE);return M.set(y),M}(y),M=new Uint8Array(o.BLOCK_SIZE);M.set(R);for(var z=0;z<o.BLOCK_SIZE;z++)R[z]^=54,M[z]^=92;for(this.hash.update(R),this.outer.update(M),z=0;z<R.byteLength;z++)R[z]=0}}return m.prototype.update=function(y){if(!(0,L.isEmptyData)(y)&&!this.error)try{this.hash.update((0,L.convertToBuffer)(y))}catch(R){this.error=R}},m.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},m.prototype.digest=function(){return(0,k.__awaiter)(this,void 0,void 0,function(){return(0,k.__generator)(this,function(y){return[2,this.digestSync()]})})},m}();O.Sha256=j},5448:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var k=S(2093),o="undefined"!=typeof Buffer&&Buffer.from?function(L){return Buffer.from(L,"utf8")}:k.fromUtf8;O.convertToBuffer=function x(L){return L instanceof Uint8Array?L:"string"==typeof L?o(L):ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(L)}},5272:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var k=S(5448);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return k.convertToBuffer}});var o=S(482);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var x=S(6203);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return x.numToUint8}});var L=S(5824);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return L.uint32ArrayFrom}})},482:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function S(k){return"string"==typeof k?0===k.length:0===k.byteLength}},6203:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function S(k){return new Uint8Array([(4278190080&k)>>24,(16711680&k)>>16,(65280&k)>>8,255&k])}},5824:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function S(k){if(!Array.from){for(var o=new Uint32Array(k.length);0<k.length;)o[0]=k[0];return o}return Uint32Array.from(k)}},4447:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},5694:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},3502:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},9710:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},3707:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isMsWindow=void 0;var S=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];O.isMsWindow=function o(x){if(function k(x){return"MSInputMethodContext"in x&&"msCrypto"in x}(x)&&void 0!==x.msCrypto.subtle){var L=x.msCrypto,j=L.getRandomValues,d=L.subtle;return S.map(function(m){return d[m]}).concat(j).every(function(m){return"function"==typeof m})}return!1}},9826:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0});var k=S(7994);(0,k.__exportStar)(S(4447),O),(0,k.__exportStar)(S(5694),O),(0,k.__exportStar)(S(3502),O),(0,k.__exportStar)(S(9710),O),(0,k.__exportStar)(S(3707),O)},4812:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.EMPTY_DATA_SHA_256=O.SHA_256_HMAC_ALGO=O.SHA_256_HASH=void 0,O.SHA_256_HASH={name:"SHA-256"},O.SHA_256_HMAC_ALGO={name:"HMAC",hash:O.SHA_256_HASH},O.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},3911:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var k=S(5912),o=S(532),x=S(7408),L=S(8284),j=S(9826),d=S(5468),m=function(){function y(R){this.hash=(0,L.supportsWebCrypto)((0,d.locateWindow)())?new o.Sha256(R):(0,j.isMsWindow)((0,d.locateWindow)())?new k.Sha256(R):new x.Sha256(R)}return y.prototype.update=function(R,M){this.hash.update(R,M)},y.prototype.digest=function(){return this.hash.digest()},y}();O.Sha256=m},5912:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var k=S(7283),o=S(4812),x=S(2093),L=S(5468),j=function(){function y(R){R?(this.operation=function d(y){return new Promise(function(R,M){var z=(0,L.locateWindow)().msCrypto.subtle.importKey("raw",m(y),o.SHA_256_HMAC_ALGO,!1,["sign"]);z.oncomplete=function(){z.result&&R(z.result),M(new Error("ImportKey completed without importing key."))},z.onerror=function(){M(new Error("ImportKey failed to import key."))}})}(R).then(function(M){return(0,L.locateWindow)().msCrypto.subtle.sign(o.SHA_256_HMAC_ALGO,M)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,L.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return y.prototype.update=function(R){var M=this;(0,k.isEmptyData)(R)||(this.operation=this.operation.then(function(z){return z.onerror=function(){M.operation=Promise.reject(new Error("Error encountered updating hash"))},z.process(m(R)),z}),this.operation.catch(function(){}))},y.prototype.digest=function(){return this.operation.then(function(R){return new Promise(function(M,z){R.onerror=function(){z(new Error("Error encountered finalizing hash"))},R.oncomplete=function(){R.result&&M(new Uint8Array(R.result)),z(new Error("Error encountered finalizing hash"))},R.finish()})})},y}();function m(y){return"string"==typeof y?(0,x.fromUtf8)(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y)}O.Sha256=j},6513:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.WebCryptoSha256=O.Ie11Sha256=void 0,(0,S(8952).__exportStar)(S(3911),O);var o=S(5912);Object.defineProperty(O,"Ie11Sha256",{enumerable:!0,get:function(){return o.Sha256}});var x=S(532);Object.defineProperty(O,"WebCryptoSha256",{enumerable:!0,get:function(){return x.Sha256}})},7283:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function S(k){return"string"==typeof k?0===k.length:0===k.byteLength}},532:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var k=S(2862),o=S(4812),x=S(5468),L=function(){function j(d){this.toHash=new Uint8Array(0),void 0!==d&&(this.key=new Promise(function(m,y){(0,x.locateWindow)().crypto.subtle.importKey("raw",(0,k.convertToBuffer)(d),o.SHA_256_HMAC_ALGO,!1,["sign"]).then(m,y)}),this.key.catch(function(){}))}return j.prototype.update=function(d){if(!(0,k.isEmptyData)(d)){var m=(0,k.convertToBuffer)(d),y=new Uint8Array(this.toHash.byteLength+m.byteLength);y.set(this.toHash,0),y.set(m,this.toHash.byteLength),this.toHash=y}},j.prototype.digest=function(){var d=this;return this.key?this.key.then(function(m){return(0,x.locateWindow)().crypto.subtle.sign(o.SHA_256_HMAC_ALGO,m,d.toHash).then(function(y){return new Uint8Array(y)})}):(0,k.isEmptyData)(this.toHash)?Promise.resolve(o.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,x.locateWindow)().crypto.subtle.digest(o.SHA_256_HASH,d.toHash)}).then(function(m){return Promise.resolve(new Uint8Array(m))})},j}();O.Sha256=L},9700:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.RawSha256=void 0;var k=S(9359),o=function(){function x(){this.state=Int32Array.from(k.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return x.prototype.update=function(L){if(this.finished)throw new Error("Attempted to update an already finished hash.");var j=0,d=L.byteLength;if(this.bytesHashed+=d,8*this.bytesHashed>k.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;d>0;)this.buffer[this.bufferLength++]=L[j++],d--,this.bufferLength===k.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},x.prototype.digest=function(){if(!this.finished){var L=8*this.bytesHashed,j=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),d=this.bufferLength;if(j.setUint8(this.bufferLength++,128),d%k.BLOCK_SIZE>=k.BLOCK_SIZE-8){for(var m=this.bufferLength;m<k.BLOCK_SIZE;m++)j.setUint8(m,0);this.hashBuffer(),this.bufferLength=0}for(m=this.bufferLength;m<k.BLOCK_SIZE-8;m++)j.setUint8(m,0);j.setUint32(k.BLOCK_SIZE-8,Math.floor(L/4294967296),!0),j.setUint32(k.BLOCK_SIZE-4,L),this.hashBuffer(),this.finished=!0}var y=new Uint8Array(k.DIGEST_LENGTH);for(m=0;m<8;m++)y[4*m]=this.state[m]>>>24&255,y[4*m+1]=this.state[m]>>>16&255,y[4*m+2]=this.state[m]>>>8&255,y[4*m+3]=this.state[m]>>>0&255;return y},x.prototype.hashBuffer=function(){for(var j=this.buffer,d=this.state,m=d[0],y=d[1],R=d[2],M=d[3],z=d[4],Y=d[5],X=d[6],Q=d[7],W=0;W<k.BLOCK_SIZE;W++){if(W<16)this.temp[W]=(255&j[4*W])<<24|(255&j[4*W+1])<<16|(255&j[4*W+2])<<8|255&j[4*W+3];else{var J=this.temp[W-2];this.temp[W]=(((J>>>17|J<<15)^(J>>>19|J<<13)^J>>>10)+this.temp[W-7]|0)+((((J=this.temp[W-15])>>>7|J<<25)^(J>>>18|J<<14)^J>>>3)+this.temp[W-16]|0)}var G=(((z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7))+(z&Y^~z&X)|0)+(Q+(k.KEY[W]+this.temp[W]|0)|0)|0,$=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&y^m&R^y&R)|0;Q=X,X=Y,Y=z,z=M+G|0,M=R,R=y,y=m,m=G+$|0}d[0]+=m,d[1]+=y,d[2]+=R,d[3]+=M,d[4]+=z,d[5]+=Y,d[6]+=X,d[7]+=Q},x}();O.RawSha256=o},9359:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.MAX_HASHABLE_LENGTH=O.INIT=O.KEY=O.DIGEST_LENGTH=O.BLOCK_SIZE=void 0,O.BLOCK_SIZE=64,O.DIGEST_LENGTH=32,O.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),O.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],O.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},7408:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,S(1707).__exportStar)(S(4319),O)},4319:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var k=S(1707),o=S(9359),x=S(9700),L=S(2862),j=function(){function m(y){if(this.hash=new x.RawSha256,y){this.outer=new x.RawSha256;var R=function d(m){var y=(0,L.convertToBuffer)(m);if(y.byteLength>o.BLOCK_SIZE){var R=new x.RawSha256;R.update(y),y=R.digest()}var M=new Uint8Array(o.BLOCK_SIZE);return M.set(y),M}(y),M=new Uint8Array(o.BLOCK_SIZE);M.set(R);for(var z=0;z<o.BLOCK_SIZE;z++)R[z]^=54,M[z]^=92;for(this.hash.update(R),this.outer.update(M),z=0;z<R.byteLength;z++)R[z]=0}}return m.prototype.update=function(y){if(!(0,L.isEmptyData)(y)&&!this.error)try{this.hash.update((0,L.convertToBuffer)(y))}catch(R){this.error=R}},m.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},m.prototype.digest=function(){return(0,k.__awaiter)(this,void 0,void 0,function(){return(0,k.__generator)(this,function(y){return[2,this.digestSync()]})})},m}();O.Sha256=j},8284:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,S(9106).__exportStar)(S(7906),O)},7906:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.supportsZeroByteGCM=O.supportsSubtleCrypto=O.supportsSecureRandom=O.supportsWebCrypto=void 0;var k=S(9106),o=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function L(m){return"object"==typeof m&&"object"==typeof m.crypto&&"function"==typeof m.crypto.getRandomValues}function j(m){return m&&o.every(function(y){return"function"==typeof m[y]})}O.supportsWebCrypto=function x(m){return!(!L(m)||"object"!=typeof m.crypto.subtle)&&j(m.crypto.subtle)},O.supportsSecureRandom=L,O.supportsSubtleCrypto=j,O.supportsZeroByteGCM=function d(m){return(0,k.__awaiter)(this,void 0,void 0,function(){var y;return(0,k.__generator)(this,function(z){switch(z.label){case 0:if(!j(m))return[2,!1];z.label=1;case 1:return z.trys.push([1,4,,5]),[4,m.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return y=z.sent(),[4,m.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},y,new Uint8Array(0))];case 3:return[2,16===z.sent().byteLength];case 4:return z.sent(),[2,!1];case 5:return[2]}})})}},3376:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var k=S(2093),o="undefined"!=typeof Buffer&&Buffer.from?function(L){return Buffer.from(L,"utf8")}:k.fromUtf8;O.convertToBuffer=function x(L){return L instanceof Uint8Array?L:"string"==typeof L?o(L):ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(L)}},2862:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var k=S(3376);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return k.convertToBuffer}});var o=S(8075);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var x=S(2127);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return x.numToUint8}});var L=S(2768);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return L.uint32ArrayFrom}})},8075:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function S(k){return"string"==typeof k?0===k.length:0===k.byteLength}},2127:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function S(k){return new Uint8Array([(4278190080&k)>>24,(16711680&k)>>16,(65280&k)>>8,255&k])}},2768:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function S(k){if(!Uint32Array.from){for(var o=new Uint32Array(k.length),x=0;x<k.length;)o[x]=k[x],x+=1;return o}return Uint32Array.from(k)}},1674:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},8645:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},2667:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},1693:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},9484:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isMsWindow=void 0;var S=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];O.isMsWindow=function o(x){if(function k(x){return"MSInputMethodContext"in x&&"msCrypto"in x}(x)&&void 0!==x.msCrypto.subtle){var L=x.msCrypto,j=L.getRandomValues,d=L.subtle;return S.map(function(m){return d[m]}).concat(j).every(function(m){return"function"==typeof m})}return!1}},6868:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0});var k=S(5298);(0,k.__exportStar)(S(1674),O),(0,k.__exportStar)(S(8645),O),(0,k.__exportStar)(S(2667),O),(0,k.__exportStar)(S(1693),O),(0,k.__exportStar)(S(9484),O)},1432:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.EMPTY_DATA_SHA_256=O.SHA_256_HMAC_ALGO=O.SHA_256_HASH=void 0,O.SHA_256_HASH={name:"SHA-256"},O.SHA_256_HMAC_ALGO={name:"HMAC",hash:O.SHA_256_HASH},O.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},1602:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var k=S(1673),o=S(5717),x=S(9985),L=S(9696),j=S(6868),d=S(5468),m=function(){function y(R){this.hash=(0,L.supportsWebCrypto)((0,d.locateWindow)())?new o.Sha256(R):(0,j.isMsWindow)((0,d.locateWindow)())?new k.Sha256(R):new x.Sha256(R)}return y.prototype.update=function(R,M){this.hash.update(R,M)},y.prototype.digest=function(){return this.hash.digest()},y}();O.Sha256=m},1673:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var k=S(7778),o=S(1432),x=S(2093),L=S(5468),j=function(){function y(R){R?(this.operation=function d(y){return new Promise(function(R,M){var z=(0,L.locateWindow)().msCrypto.subtle.importKey("raw",m(y),o.SHA_256_HMAC_ALGO,!1,["sign"]);z.oncomplete=function(){z.result&&R(z.result),M(new Error("ImportKey completed without importing key."))},z.onerror=function(){M(new Error("ImportKey failed to import key."))}})}(R).then(function(M){return(0,L.locateWindow)().msCrypto.subtle.sign(o.SHA_256_HMAC_ALGO,M)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,L.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return y.prototype.update=function(R){var M=this;(0,k.isEmptyData)(R)||(this.operation=this.operation.then(function(z){return z.onerror=function(){M.operation=Promise.reject(new Error("Error encountered updating hash"))},z.process(m(R)),z}),this.operation.catch(function(){}))},y.prototype.digest=function(){return this.operation.then(function(R){return new Promise(function(M,z){R.onerror=function(){z(new Error("Error encountered finalizing hash"))},R.oncomplete=function(){R.result&&M(new Uint8Array(R.result)),z(new Error("Error encountered finalizing hash"))},R.finish()})})},y}();function m(y){return"string"==typeof y?(0,x.fromUtf8)(y):ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(y)}O.Sha256=j},4907:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.WebCryptoSha256=O.Ie11Sha256=void 0,(0,S(9904).__exportStar)(S(1602),O);var o=S(1673);Object.defineProperty(O,"Ie11Sha256",{enumerable:!0,get:function(){return o.Sha256}});var x=S(5717);Object.defineProperty(O,"WebCryptoSha256",{enumerable:!0,get:function(){return x.Sha256}})},7778:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function S(k){return"string"==typeof k?0===k.length:0===k.byteLength}},5717:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var k=S(9248),o=S(1432),x=S(5468),L=function(){function j(d){this.toHash=new Uint8Array(0),void 0!==d&&(this.key=new Promise(function(m,y){(0,x.locateWindow)().crypto.subtle.importKey("raw",(0,k.convertToBuffer)(d),o.SHA_256_HMAC_ALGO,!1,["sign"]).then(m,y)}),this.key.catch(function(){}))}return j.prototype.update=function(d){if(!(0,k.isEmptyData)(d)){var m=(0,k.convertToBuffer)(d),y=new Uint8Array(this.toHash.byteLength+m.byteLength);y.set(this.toHash,0),y.set(m,this.toHash.byteLength),this.toHash=y}},j.prototype.digest=function(){var d=this;return this.key?this.key.then(function(m){return(0,x.locateWindow)().crypto.subtle.sign(o.SHA_256_HMAC_ALGO,m,d.toHash).then(function(y){return new Uint8Array(y)})}):(0,k.isEmptyData)(this.toHash)?Promise.resolve(o.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,x.locateWindow)().crypto.subtle.digest(o.SHA_256_HASH,d.toHash)}).then(function(m){return Promise.resolve(new Uint8Array(m))})},j}();O.Sha256=L},8313:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.RawSha256=void 0;var k=S(9210),o=function(){function x(){this.state=Int32Array.from(k.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return x.prototype.update=function(L){if(this.finished)throw new Error("Attempted to update an already finished hash.");var j=0,d=L.byteLength;if(this.bytesHashed+=d,8*this.bytesHashed>k.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;d>0;)this.buffer[this.bufferLength++]=L[j++],d--,this.bufferLength===k.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},x.prototype.digest=function(){if(!this.finished){var L=8*this.bytesHashed,j=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),d=this.bufferLength;if(j.setUint8(this.bufferLength++,128),d%k.BLOCK_SIZE>=k.BLOCK_SIZE-8){for(var m=this.bufferLength;m<k.BLOCK_SIZE;m++)j.setUint8(m,0);this.hashBuffer(),this.bufferLength=0}for(m=this.bufferLength;m<k.BLOCK_SIZE-8;m++)j.setUint8(m,0);j.setUint32(k.BLOCK_SIZE-8,Math.floor(L/4294967296),!0),j.setUint32(k.BLOCK_SIZE-4,L),this.hashBuffer(),this.finished=!0}var y=new Uint8Array(k.DIGEST_LENGTH);for(m=0;m<8;m++)y[4*m]=this.state[m]>>>24&255,y[4*m+1]=this.state[m]>>>16&255,y[4*m+2]=this.state[m]>>>8&255,y[4*m+3]=this.state[m]>>>0&255;return y},x.prototype.hashBuffer=function(){for(var j=this.buffer,d=this.state,m=d[0],y=d[1],R=d[2],M=d[3],z=d[4],Y=d[5],X=d[6],Q=d[7],W=0;W<k.BLOCK_SIZE;W++){if(W<16)this.temp[W]=(255&j[4*W])<<24|(255&j[4*W+1])<<16|(255&j[4*W+2])<<8|255&j[4*W+3];else{var J=this.temp[W-2];this.temp[W]=(((J>>>17|J<<15)^(J>>>19|J<<13)^J>>>10)+this.temp[W-7]|0)+((((J=this.temp[W-15])>>>7|J<<25)^(J>>>18|J<<14)^J>>>3)+this.temp[W-16]|0)}var G=(((z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7))+(z&Y^~z&X)|0)+(Q+(k.KEY[W]+this.temp[W]|0)|0)|0,$=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&y^m&R^y&R)|0;Q=X,X=Y,Y=z,z=M+G|0,M=R,R=y,y=m,m=G+$|0}d[0]+=m,d[1]+=y,d[2]+=R,d[3]+=M,d[4]+=z,d[5]+=Y,d[6]+=X,d[7]+=Q},x}();O.RawSha256=o},9210:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.MAX_HASHABLE_LENGTH=O.INIT=O.KEY=O.DIGEST_LENGTH=O.BLOCK_SIZE=void 0,O.BLOCK_SIZE=64,O.DIGEST_LENGTH=32,O.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),O.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],O.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},9985:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,S(7716).__exportStar)(S(769),O)},769:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var k=S(7716),o=S(9210),x=S(8313),L=S(9248),j=function(){function m(y){if(this.hash=new x.RawSha256,y){this.outer=new x.RawSha256;var R=function d(m){var y=(0,L.convertToBuffer)(m);if(y.byteLength>o.BLOCK_SIZE){var R=new x.RawSha256;R.update(y),y=R.digest()}var M=new Uint8Array(o.BLOCK_SIZE);return M.set(y),M}(y),M=new Uint8Array(o.BLOCK_SIZE);M.set(R);for(var z=0;z<o.BLOCK_SIZE;z++)R[z]^=54,M[z]^=92;for(this.hash.update(R),this.outer.update(M),z=0;z<R.byteLength;z++)R[z]=0}}return m.prototype.update=function(y){if(!(0,L.isEmptyData)(y)&&!this.error)try{this.hash.update((0,L.convertToBuffer)(y))}catch(R){this.error=R}},m.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},m.prototype.digest=function(){return(0,k.__awaiter)(this,void 0,void 0,function(){return(0,k.__generator)(this,function(y){return[2,this.digestSync()]})})},m}();O.Sha256=j},9696:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,S(6187).__exportStar)(S(8022),O)},8022:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.supportsZeroByteGCM=O.supportsSubtleCrypto=O.supportsSecureRandom=O.supportsWebCrypto=void 0;var k=S(6187),o=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function L(m){return"object"==typeof m&&"object"==typeof m.crypto&&"function"==typeof m.crypto.getRandomValues}function j(m){return m&&o.every(function(y){return"function"==typeof m[y]})}O.supportsWebCrypto=function x(m){return!(!L(m)||"object"!=typeof m.crypto.subtle)&&j(m.crypto.subtle)},O.supportsSecureRandom=L,O.supportsSubtleCrypto=j,O.supportsZeroByteGCM=function d(m){return(0,k.__awaiter)(this,void 0,void 0,function(){var y;return(0,k.__generator)(this,function(z){switch(z.label){case 0:if(!j(m))return[2,!1];z.label=1;case 1:return z.trys.push([1,4,,5]),[4,m.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return y=z.sent(),[4,m.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},y,new Uint8Array(0))];case 3:return[2,16===z.sent().byteLength];case 4:return z.sent(),[2,!1];case 5:return[2]}})})}},7388:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var k=S(2093),o="undefined"!=typeof Buffer&&Buffer.from?function(L){return Buffer.from(L,"utf8")}:k.fromUtf8;O.convertToBuffer=function x(L){return L instanceof Uint8Array?L:"string"==typeof L?o(L):ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(L)}},9248:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var k=S(7388);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return k.convertToBuffer}});var o=S(2885);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var x=S(7477);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return x.numToUint8}});var L=S(7476);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return L.uint32ArrayFrom}})},2885:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function S(k){return"string"==typeof k?0===k.length:0===k.byteLength}},7477:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function S(k){return new Uint8Array([(4278190080&k)>>24,(16711680&k)>>16,(65280&k)>>8,255&k])}},7476:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function S(k){if(!Uint32Array.from){for(var o=new Uint32Array(k.length),x=0;x<k.length;)o[x]=k[x],x+=1;return o}return Uint32Array.from(k)}},9653:function(Ce,O,S){var k=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(O,"__esModule",{value:!0}),O.decodeHTML=O.decodeHTMLStrict=O.decodeXML=void 0;var o=k(S(6086)),x=k(S(2453)),L=k(S(8161)),j=k(S(1653)),d=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function m(M){var z=R(M);return function(Y){return String(Y).replace(d,z)}}O.decodeXML=m(L.default),O.decodeHTMLStrict=m(o.default);var y=function(M,z){return M<z?1:-1};function R(M){return function(Y){if("#"===Y.charAt(1)){var X=Y.charAt(2);return j.default("X"===X||"x"===X?parseInt(Y.substr(3),16):parseInt(Y.substr(2),10))}return M[Y.slice(1,-1)]||Y}}O.decodeHTML=function(){for(var M=Object.keys(x.default).sort(y),z=Object.keys(o.default).sort(y),Y=0,X=0;Y<z.length;Y++)M[X]===z[Y]?(z[Y]+=";?",X++):z[Y]+=";";var Q=new RegExp("&(?:"+z.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),W=R(o.default);function J(le){return";"!==le.substr(-1)&&(le+=";"),W(le)}return function(le){return String(le).replace(Q,J)}}()},1653:function(Ce,O,S){var k=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(O,"__esModule",{value:!0});var o=k(S(2148)),x=String.fromCodePoint||function(j){var d="";return j>65535&&(j-=65536,d+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),d+String.fromCharCode(j)};O.default=function L(j){return j>=55296&&j<=57343||j>1114111?"\ufffd":(j in o.default&&(j=o.default[j]),x(j))}},5771:function(Ce,O,S){var k=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(O,"__esModule",{value:!0}),O.escapeUTF8=O.escape=O.encodeNonAsciiHTML=O.encodeHTML=O.encodeXML=void 0;var x=y(k(S(8161)).default),L=R(x);O.encodeXML=le(x);var d=y(k(S(6086)).default),m=R(d);function y(U){return Object.keys(U).sort().reduce(function(G,$){return G[U[$]]="&"+$+";",G},{})}function R(U){for(var G=[],$=[],ee=0,_e=Object.keys(U);ee<_e.length;ee++){var be=_e[ee];1===be.length?G.push("\\"+be):$.push(be)}G.sort();for(var me=0;me<G.length-1;me++){for(var v=me;v<G.length-1&&G[v].charCodeAt(1)+1===G[v+1].charCodeAt(1);)v+=1;var T=1+v-me;T<3||G.splice(me,T,G[me]+"-"+G[v])}return $.unshift("["+G.join("")+"]"),new RegExp($.join("|"),"g")}O.encodeHTML=function X(U,G){return function($){return $.replace(G,function(ee){return U[ee]}).replace(M,Y)}}(d,m),O.encodeNonAsciiHTML=le(d);var M=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,z=null!=String.prototype.codePointAt?function(U){return U.codePointAt(0)}:function(U){return 1024*(U.charCodeAt(0)-55296)+U.charCodeAt(1)-56320+65536};function Y(U){return"&#x"+(U.length>1?z(U):U.charCodeAt(0)).toString(16).toUpperCase()+";"}var Q=new RegExp(L.source+"|"+M.source,"g");function le(U){return function(G){return G.replace(Q,function($){return U[$]||Y($)})}}O.escape=function W(U){return U.replace(Q,Y)},O.escapeUTF8=function J(U){return U.replace(L,Y)}},1945:(Ce,O,S)=>{O.p1=void 0;S(9653),S(5771),S(5771);var y=S(9653);Object.defineProperty(O,"p1",{enumerable:!0,get:function(){return y.decodeHTML}})},5730:(Ce,O,S)=>{const k=S(9628).buildOptions,o={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(Q){return Q},attrValueProcessor:function(Q){return Q}},x=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function L(Q){this.options=k(Q,o,x),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Y),this.isCDATA=this.options.cdataTagName?X:function(){return!1},this.replaceCDATAstr=j,this.replaceCDATAarr=d,this.options.format?(this.indentate=z,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=M,this.buildObjNode=y):(this.buildTextNode=R,this.buildObjNode=m),this.buildTextValNode=R,this.buildObjectNode=m}function j(Q,W){return Q=this.options.tagValueProcessor(""+Q),""===this.options.cdataPositionChar||""===Q?Q+"<![CDATA["+W+"]]"+this.tagEndChar:Q.replace(this.options.cdataPositionChar,"<![CDATA["+W+"]]"+this.tagEndChar)}function d(Q,W){if(Q=this.options.tagValueProcessor(""+Q),""===this.options.cdataPositionChar||""===Q)return Q+"<![CDATA["+W.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let J in W)Q=Q.replace(this.options.cdataPositionChar,"<![CDATA["+W[J]+"]]>");return Q+this.newLine}function m(Q,W,J,le){return J&&!Q.includes("<")?this.indentate(le)+"<"+W+J+">"+Q+"</"+W+this.tagEndChar:this.indentate(le)+"<"+W+J+this.tagEndChar+Q+this.indentate(le)+"</"+W+this.tagEndChar}function y(Q,W,J,le){return""!==Q?this.buildObjectNode(Q,W,J,le):this.indentate(le)+"<"+W+J+"/"+this.tagEndChar}function R(Q,W,J,le){return this.indentate(le)+"<"+W+J+">"+this.options.tagValueProcessor(Q)+"</"+W+this.tagEndChar}function M(Q,W,J,le){return""!==Q?this.buildTextValNode(Q,W,J,le):this.indentate(le)+"<"+W+J+"/"+this.tagEndChar}function z(Q){return this.options.indentBy.repeat(Q)}function Y(Q){return!!Q.startsWith(this.options.attributeNamePrefix)&&Q.substr(this.attrPrefixLen)}function X(Q){return Q===this.options.cdataTagName}L.prototype.parse=function(Q){return this.j2x(Q,0).val},L.prototype.j2x=function(Q,W){let J="",le="";const U=Object.keys(Q),G=U.length;for(let $=0;$<G;$++){const ee=U[$];if(void 0!==Q[ee])if(null===Q[ee])le+=this.indentate(W)+"<"+ee+"/"+this.tagEndChar;else if(Q[ee]instanceof Date)le+=this.buildTextNode(Q[ee],ee,"",W);else if("object"!=typeof Q[ee]){const _e=this.isAttribute(ee);_e?J+=" "+_e+'="'+this.options.attrValueProcessor(""+Q[ee])+'"':this.isCDATA(ee)?le+=this.replaceCDATAstr(Q[this.options.textNodeName]?Q[this.options.textNodeName]:"",Q[ee]):ee===this.options.textNodeName?Q[this.options.cdataTagName]||(le+=this.options.tagValueProcessor(""+Q[ee])):le+=this.buildTextNode(Q[ee],ee,"",W)}else if(Array.isArray(Q[ee]))if(this.isCDATA(ee))le+=this.indentate(W),le+=this.replaceCDATAarr(Q[this.options.textNodeName]?Q[this.options.textNodeName]:"",Q[ee]);else{const _e=Q[ee].length;for(let be=0;be<_e;be++){const me=Q[ee][be];if(void 0!==me)if(null===me)le+=this.indentate(W)+"<"+ee+"/"+this.tagEndChar;else if("object"==typeof me){const v=this.j2x(me,W+1);le+=this.buildObjNode(v.val,ee,v.attrStr,W)}else le+=this.buildTextNode(me,ee,"",W)}}else if(this.options.attrNodeName&&ee===this.options.attrNodeName){const _e=Object.keys(Q[ee]),be=_e.length;for(let me=0;me<be;me++)J+=" "+_e[me]+'="'+this.options.attrValueProcessor(""+Q[ee][_e[me]])+'"'}else{const _e=this.j2x(Q[ee],W+1);le+=this.buildObjNode(_e.val,ee,_e.attrStr,W)}}return{attrStr:J,val:le}},Ce.exports=L},6380:(Ce,O,S)=>{const k=function(Y){return String.fromCharCode(Y)},o={nilChar:k(176),missingChar:k(201),nilPremitive:k(175),missingPremitive:k(200),emptyChar:k(178),emptyValue:k(177),boundryChar:k(179),objStart:k(198),arrStart:k(204),arrayEnd:k(185)},x=[o.nilChar,o.nilPremitive,o.missingChar,o.missingPremitive,o.boundryChar,o.emptyChar,o.emptyValue,o.arrayEnd,o.objStart,o.arrStart],L=function(Y,X,Q){if("string"==typeof X)return j(Y&&Y[0]&&void 0!==Y[0].val?Y[0].val:Y,X);{const W=function y(Y){return void 0===Y?o.missingChar:null===Y?o.nilChar:!(Y.child&&0===Object.keys(Y.child).length&&(!Y.attrsMap||0===Object.keys(Y.attrsMap).length))||o.emptyChar}(Y);if(!0===W){let J="";if(Array.isArray(X)){J+=o.arrStart;const le=X[0],U=Y.length;if("string"==typeof le)for(let G=0;G<U;G++){const $=j(Y[G].val,le);J=d(J,$)}else for(let G=0;G<U;G++){const $=L(Y[G],le,Q);J=d(J,$)}J+=o.arrayEnd}else{J+=o.objStart;const le=Object.keys(X);Array.isArray(Y)&&(Y=Y[0]);for(let U in le){const G=le[U];let $;$=L(!Q.ignoreAttributes&&Y.attrsMap&&Y.attrsMap[G]?Y.attrsMap[G]:G===Q.textNodeName?Y.val:Y.child[G],X[G],Q),J=d(J,$)}}return J}return W}},j=function(Y){switch(Y){case void 0:return o.missingPremitive;case null:return o.nilPremitive;case"":return o.emptyValue;default:return Y}},d=function(Y,X){return!m(X[0])&&!m(Y[Y.length-1])&&(Y+=o.boundryChar),Y+X},m=function(Y){return-1!==x.indexOf(Y)},R=S(8712),M=S(9628).buildOptions;O.convert2nimn=function(Y,X,Q){return Q=M(Q,R.defaultOptions,R.props),L(Y,X,Q)}},4376:(Ce,O,S)=>{const k=S(9628),o=function(x,L,j){const d={};if((!x.child||k.isEmptyObject(x.child))&&(!x.attrsMap||k.isEmptyObject(x.attrsMap)))return k.isExist(x.val)?x.val:"";if(k.isExist(x.val)&&("string"!=typeof x.val||""!==x.val&&x.val!==L.cdataPositionChar)){const y=k.isTagNameInArrayMode(x.tagname,L.arrayMode,j);d[L.textNodeName]=y?[x.val]:x.val}k.merge(d,x.attrsMap,L.arrayMode);const m=Object.keys(x.child);for(let y=0;y<m.length;y++){const R=m[y];if(x.child[R]&&x.child[R].length>1){d[R]=[];for(let M in x.child[R])x.child[R].hasOwnProperty(M)&&d[R].push(o(x.child[R][M],L,R))}else{const M=o(x.child[R][0],L,R),z=!0===L.arrayMode&&"object"==typeof M||k.isTagNameInArrayMode(R,L.arrayMode,j);d[R]=z?[M]:M}}return d};O.convertToJson=o},3724:(Ce,O,S)=>{const k=S(9628),o=S(9628).buildOptions,x=S(8712),j=function(y,R,M){let z="{";const Y=Object.keys(y.child);for(let W=0;W<Y.length;W++){var X=Y[W];if(y.child[X]&&y.child[X].length>1){for(var Q in z+='"'+X+'" : [ ',y.child[X])z+=j(y.child[X][Q],R)+" , ";z=z.substr(0,z.length-1)+" ] "}else z+='"'+X+'" : '+j(y.child[X][0],R)+" ,"}return k.merge(z,y.attrsMap),k.isEmptyObject(z)?k.isExist(y.val)?y.val:"":(k.isExist(y.val)&&("string"==typeof y.val&&(""===y.val||y.val===R.cdataPositionChar)||(z+='"'+R.textNodeName+'" : '+function d(y){return!0!==y&&!1!==y&&isNaN(y)?'"'+y+'"':y}(y.val))),","===z[z.length-1]&&(z=z.substr(0,z.length-2)),z+"}")};O.convertToJsonString=function(y,R){return(R=o(R,x.defaultOptions,x.props)).indentBy=R.indentBy||"",j(y,R,0)}},9083:(Ce,O,S)=>{const k=S(4376),o=S(8712),x=S(8712),L=S(9628).buildOptions,j=S(4572);O.parse=function(m,y,R){if(R){!0===R&&(R={});const z=j.validate(m,R);if(!0!==z)throw Error(z.err.msg)}y=L(y,x.defaultOptions,x.props);const M=o.getTraversalObj(m,y);return k.convertToJson(M,y)},O.convertTonimn=S(6380).convert2nimn,O.getTraversalObj=o.getTraversalObj,O.convertToJson=k.convertToJson,O.convertToJsonString=S(3724).convertToJsonString,O.validate=j.validate,O.j2xParser=S(5730),O.parseToNimn=function(m,y,R){return O.convertTonimn(O.getTraversalObj(m,R),y,R)}},9628:(Ce,O)=>{const o="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",x=new RegExp("^"+o+"$");O.isExist=function(d){return void 0!==d},O.isEmptyObject=function(d){return 0===Object.keys(d).length},O.merge=function(d,m,y){if(m){const R=Object.keys(m),M=R.length;for(let z=0;z<M;z++)d[R[z]]="strict"===y?[m[R[z]]]:m[R[z]]}},O.getValue=function(d){return O.isExist(d)?d:""},O.buildOptions=function(d,m,y){var R={};if(!d)return m;for(let M=0;M<y.length;M++)R[y[M]]=void 0!==d[y[M]]?d[y[M]]:m[y[M]];return R},O.isTagNameInArrayMode=function(d,m,y){return!1!==m&&(m instanceof RegExp?m.test(d):"function"==typeof m?!!m(d,y):"strict"===m)},O.isName=function(d){return!(null==x.exec(d))},O.getAllMatches=function(d,m){const y=[];let R=m.exec(d);for(;R;){const M=[],z=R.length;for(let Y=0;Y<z;Y++)M.push(R[Y]);y.push(M),R=m.exec(d)}return y},O.nameRegexp=o},4572:(Ce,O,S)=>{const k=S(9628),o={allowBooleanAttributes:!1},x=["allowBooleanAttributes"];function L(U,G){for(var $=G;G<U.length;G++)if("?"==U[G]||" "==U[G]){var ee=U.substr($,G-$);if(G>5&&"xml"===ee)return X("InvalidXml","XML declaration allowed only at the start of the document.",J(U,G));if("?"==U[G]&&">"==U[G+1]){G++;break}continue}return G}function j(U,G){if(U.length>G+5&&"-"===U[G+1]&&"-"===U[G+2]){for(G+=3;G<U.length;G++)if("-"===U[G]&&"-"===U[G+1]&&">"===U[G+2]){G+=2;break}}else if(U.length>G+8&&"D"===U[G+1]&&"O"===U[G+2]&&"C"===U[G+3]&&"T"===U[G+4]&&"Y"===U[G+5]&&"P"===U[G+6]&&"E"===U[G+7]){let $=1;for(G+=8;G<U.length;G++)if("<"===U[G])$++;else if(">"===U[G]&&($--,0===$))break}else if(U.length>G+9&&"["===U[G+1]&&"C"===U[G+2]&&"D"===U[G+3]&&"A"===U[G+4]&&"T"===U[G+5]&&"A"===U[G+6]&&"["===U[G+7])for(G+=8;G<U.length;G++)if("]"===U[G]&&"]"===U[G+1]&&">"===U[G+2]){G+=2;break}return G}function y(U,G){let $="",ee="",_e=!1;for(;G<U.length;G++){if('"'===U[G]||"'"===U[G])if(""===ee)ee=U[G];else{if(ee!==U[G])continue;ee=""}else if(">"===U[G]&&""===ee){_e=!0;break}$+=U[G]}return""===ee&&{value:$,index:G,tagClosed:_e}}O.validate=function(U,G){G=k.buildOptions(G,o,x);const $=[];let ee=!1,_e=!1;"\ufeff"===U[0]&&(U=U.substr(1));for(let be=0;be<U.length;be++)if("<"===U[be]&&"?"===U[be+1]){if(be+=2,be=L(U,be),be.err)return be}else{if("<"!==U[be]){if(" "===U[be]||"\t"===U[be]||"\n"===U[be]||"\r"===U[be])continue;return X("InvalidChar","char '"+U[be]+"' is not expected.",J(U,be))}if(be++,"!"===U[be]){be=j(U,be);continue}{let me=!1;"/"===U[be]&&(me=!0,be++);let v="";for(;be<U.length&&">"!==U[be]&&" "!==U[be]&&"\t"!==U[be]&&"\n"!==U[be]&&"\r"!==U[be];be++)v+=U[be];if(v=v.trim(),"/"===v[v.length-1]&&(v=v.substring(0,v.length-1),be--),!W(v)){let E;return E=0===v.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+v+"' is an invalid name.",X("InvalidTag",E,J(U,be))}const T=y(U,be);if(!1===T)return X("InvalidAttr","Attributes for '"+v+"' have open quote.",J(U,be));let _=T.value;if(be=T.index,"/"===_[_.length-1]){_=_.substring(0,_.length-1);const E=M(_,G);if(!0!==E)return X(E.err.code,E.err.msg,J(U,be-_.length+E.err.line));ee=!0}else if(me){if(!T.tagClosed)return X("InvalidTag","Closing tag '"+v+"' doesn't have proper closing.",J(U,be));if(_.trim().length>0)return X("InvalidTag","Closing tag '"+v+"' can't have attributes or invalid starting.",J(U,be));{const E=$.pop();if(v!==E)return X("InvalidTag","Closing tag '"+E+"' is expected inplace of '"+v+"'.",J(U,be));0==$.length&&(_e=!0)}}else{const E=M(_,G);if(!0!==E)return X(E.err.code,E.err.msg,J(U,be-_.length+E.err.line));if(!0===_e)return X("InvalidXml","Multiple possible root nodes found.",J(U,be));$.push(v),ee=!0}for(be++;be<U.length;be++)if("<"===U[be]){if("!"===U[be+1]){be++,be=j(U,be);continue}if("?"!==U[be+1])break;if(be=L(U,++be),be.err)return be}else if("&"===U[be]){const E=Y(U,be);if(-1==E)return X("InvalidChar","char '&' is not expected.",J(U,be));be=E}"<"===U[be]&&be--}}return ee?!($.length>0)||X("InvalidXml","Invalid '"+JSON.stringify($,null,4).replace(/\r?\n/g,"")+"' found.",1):X("InvalidXml","Start tag expected.",1)};const R=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function M(U,G){const $=k.getAllMatches(U,R),ee={};for(let _e=0;_e<$.length;_e++){if(0===$[_e][1].length)return X("InvalidAttr","Attribute '"+$[_e][2]+"' has no space in starting.",le(U,$[_e][0]));if(void 0===$[_e][3]&&!G.allowBooleanAttributes)return X("InvalidAttr","boolean attribute '"+$[_e][2]+"' is not allowed.",le(U,$[_e][0]));const be=$[_e][2];if(!Q(be))return X("InvalidAttr","Attribute '"+be+"' is an invalid name.",le(U,$[_e][0]));if(ee.hasOwnProperty(be))return X("InvalidAttr","Attribute '"+be+"' is repeated.",le(U,$[_e][0]));ee[be]=1}return!0}function Y(U,G){if(";"===U[++G])return-1;if("#"===U[G])return function z(U,G){let $=/\d/;for("x"===U[G]&&(G++,$=/[\da-fA-F]/);G<U.length;G++){if(";"===U[G])return G;if(!U[G].match($))break}return-1}(U,++G);let $=0;for(;G<U.length;G++,$++)if(!(U[G].match(/\w/)&&$<20)){if(";"===U[G])break;return-1}return G}function X(U,G,$){return{err:{code:U,msg:G,line:$}}}function Q(U){return k.isName(U)}function W(U){return k.isName(U)}function J(U,G){return U.substring(0,G).split(/\r?\n/).length}function le(U,G){return U.indexOf(G)+G.length}},2661:Ce=>{Ce.exports=function(O,S,k){this.tagname=O,this.parent=S,this.child={},this.attrsMap={},this.val=k,this.addChild=function(o){Array.isArray(this.child[o.tagname])?this.child[o.tagname].push(o):this.child[o.tagname]=[o]}}},8712:(Ce,O,S)=>{const k=S(9628),o=S(9628).buildOptions,x=S(2661);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,k.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const j={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(W,J){return W},attrValueProcessor:function(W,J){return W},stopNodes:[]};O.defaultOptions=j;const d=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function m(W,J,le){return J&&(le.trimValues&&(J=J.trim()),J=R(J=le.tagValueProcessor(J,W),le.parseNodeValue,le.parseTrueNumberOnly)),J}function y(W,J){if(J.ignoreNameSpace){const le=W.split(":"),U="/"===W.charAt(0)?"/":"";if("xmlns"===le[0])return"";2===le.length&&(W=U+le[1])}return W}function R(W,J,le){if(J&&"string"==typeof W){let U;return""===W.trim()||isNaN(W)?U="true"===W||"false"!==W&&W:(-1!==W.indexOf("0x")?U=Number.parseInt(W,16):-1!==W.indexOf(".")?(U=Number.parseFloat(W),W=W.replace(/\.?0+$/,"")):U=Number.parseInt(W,10),le&&(U=String(U)===W?U:W)),U}return k.isExist(W)?W:""}O.props=d;const M=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function z(W,J){if(!J.ignoreAttributes&&"string"==typeof W){W=W.replace(/\r?\n/g," ");const le=k.getAllMatches(W,M),U=le.length,G={};for(let $=0;$<U;$++){const ee=y(le[$][1],J);ee.length&&(void 0!==le[$][4]?(J.trimValues&&(le[$][4]=le[$][4].trim()),le[$][4]=J.attrValueProcessor(le[$][4],ee),G[J.attributeNamePrefix+ee]=R(le[$][4],J.parseAttributeValue,J.parseTrueNumberOnly)):J.allowBooleanAttributes&&(G[J.attributeNamePrefix+ee]=!0))}if(!Object.keys(G).length)return;if(J.attrNodeName){const $={};return $[J.attrNodeName]=G,$}return G}}function X(W,J){let le,U="";for(let G=J;G<W.length;G++){let $=W[G];if(le)$===le&&(le="");else if('"'===$||"'"===$)le=$;else{if(">"===$)return{data:U,index:G};"\t"===$&&($=" ")}U+=$}}function Q(W,J,le,U){const G=W.indexOf(J,le);if(-1===G)throw new Error(U);return G+J.length-1}O.getTraversalObj=function(W,J){W=W.replace(/\r\n?/g,"\n"),J=o(J,j,d);const le=new x("!xml");let U=le,G="";for(let $=0;$<W.length;$++)if("<"===W[$])if("/"===W[$+1]){const _e=Q(W,">",$,"Closing Tag is not closed.");let be=W.substring($+2,_e).trim();if(J.ignoreNameSpace){const me=be.indexOf(":");-1!==me&&(be=be.substr(me+1))}U&&(U.val=U.val?k.getValue(U.val)+""+m(be,G,J):m(be,G,J)),J.stopNodes.length&&J.stopNodes.includes(U.tagname)&&(U.child=[],null==U.attrsMap&&(U.attrsMap={}),U.val=W.substr(U.startIndex+1,$-U.startIndex-1)),U=U.parent,G="",$=_e}else if("?"===W[$+1])$=Q(W,"?>",$,"Pi Tag is not closed.");else if("!--"===W.substr($+1,3))$=Q(W,"--\x3e",$,"Comment is not closed.");else if("!D"===W.substr($+1,2)){const _e=Q(W,">",$,"DOCTYPE is not closed.");$=W.substring($,_e).indexOf("[")>=0?W.indexOf("]>",$)+1:_e}else if("!["===W.substr($+1,2)){const _e=Q(W,"]]>",$,"CDATA is not closed.")-2,be=W.substring($+9,_e);if(G&&(U.val=k.getValue(U.val)+""+m(U.tagname,G,J),G=""),J.cdataTagName){const me=new x(J.cdataTagName,U,be);U.addChild(me),U.val=k.getValue(U.val)+J.cdataPositionChar,be&&(me.val=be)}else U.val=(U.val||"")+(be||"");$=_e+2}else{const _e=X(W,$+1);let be=_e.data;const me=_e.index,v=be.indexOf(" ");let T=be,_=!0;if(-1!==v&&(T=be.substr(0,v).replace(/\s\s*$/,""),be=be.substr(v+1)),J.ignoreNameSpace){const E=T.indexOf(":");-1!==E&&(T=T.substr(E+1),_=T!==_e.data.substr(E+1))}if(U&&G&&"!xml"!==U.tagname&&(U.val=k.getValue(U.val)+""+m(U.tagname,G,J)),be.length>0&&be.lastIndexOf("/")===be.length-1){"/"===T[T.length-1]?(T=T.substr(0,T.length-1),be=T):be=be.substr(0,be.length-1);const E=new x(T,U,"");T!==be&&(E.attrsMap=z(be,J)),U.addChild(E)}else{const E=new x(T,U);J.stopNodes.length&&J.stopNodes.includes(E.tagname)&&(E.startIndex=me),T!==be&&_&&(E.attrsMap=z(be,J)),U.addChild(E),U=E}G="",$=me}else G+=W[$];return le}},325:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32=void 0;var k=S(9622),o=S(3231),x=S(7502),L=function(){function j(){this.crc32=new x.Crc32}return j.prototype.update=function(d){(0,o.isEmptyData)(d)||this.crc32.update((0,o.convertToBuffer)(d))},j.prototype.digest=function(){return(0,k.__awaiter)(this,void 0,void 0,function(){return(0,k.__generator)(this,function(d){return[2,(0,o.numToUint8)(this.crc32.digest())]})})},j}();O.AwsCrc32=L},7502:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32=O.Crc32=O.crc32=void 0;var k=S(9622),o=S(3231);O.crc32=function x(y){return(new L).update(y).digest()};var L=function(){function y(){this.checksum=4294967295}return y.prototype.update=function(R){var M,z;try{for(var Y=(0,k.__values)(R),X=Y.next();!X.done;X=Y.next())this.checksum=this.checksum>>>8^d[255&(this.checksum^X.value)]}catch(W){M={error:W}}finally{try{X&&!X.done&&(z=Y.return)&&z.call(Y)}finally{if(M)throw M.error}}return this},y.prototype.digest=function(){return(4294967295^this.checksum)>>>0},y}();O.Crc32=L;var d=(0,o.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),m=S(325);Object.defineProperty(O,"AwsCrc32",{enumerable:!0,get:function(){return m.AwsCrc32}})},927:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var k=S(2093),o="undefined"!=typeof Buffer&&Buffer.from?function(L){return Buffer.from(L,"utf8")}:k.fromUtf8;O.convertToBuffer=function x(L){return L instanceof Uint8Array?L:"string"==typeof L?o(L):ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(L)}},3231:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var k=S(927);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return k.convertToBuffer}});var o=S(3526);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var x=S(1872);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return x.numToUint8}});var L=S(6236);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return L.uint32ArrayFrom}})},3526:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function S(k){return"string"==typeof k?0===k.length:0===k.byteLength}},1872:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function S(k){return new Uint8Array([(4278190080&k)>>24,(16711680&k)>>16,(65280&k)>>8,255&k])}},6236:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function S(k){if(!Uint32Array.from){for(var o=new Uint32Array(k.length),x=0;x<k.length;)o[x]=k[x],x+=1;return o}return Uint32Array.from(k)}},2063:(Ce,O,S)=>{var o=S(2173),x=S(4920),L="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;O.lW=y,O.h2=50;var j=2147483647;function m(q){if(q>j)throw new RangeError('The value "'+q+'" is invalid for option "size"');var D=new Uint8Array(q);return Object.setPrototypeOf(D,y.prototype),D}function y(q,D,K){if("number"==typeof q){if("string"==typeof D)throw new TypeError('The "string" argument must be of type string. Received type number');return Y(q)}return R(q,D,K)}function R(q,D,K){if("string"==typeof q)return function X(q,D){if(("string"!=typeof D||""===D)&&(D="utf8"),!y.isEncoding(D))throw new TypeError("Unknown encoding: "+D);var K=0|G(q,D),ge=m(K),je=ge.write(q,D);return je!==K&&(ge=ge.slice(0,je)),ge}(q,D);if(ArrayBuffer.isView(q))return Q(q);if(null==q)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(ve(q,ArrayBuffer)||q&&ve(q.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ve(q,SharedArrayBuffer)||q&&ve(q.buffer,SharedArrayBuffer)))return function W(q,D,K){if(D<0||q.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<D+(K||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return ge=void 0===D&&void 0===K?new Uint8Array(q):void 0===K?new Uint8Array(q,D):new Uint8Array(q,D,K),Object.setPrototypeOf(ge,y.prototype),ge}(q,D,K);if("number"==typeof q)throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=q.valueOf&&q.valueOf();if(null!=ge&&ge!==q)return y.from(ge,D,K);var je=function J(q){if(y.isBuffer(q)){var D=0|le(q.length),K=m(D);return 0===K.length||q.copy(K,0,0,D),K}return void 0!==q.length?"number"!=typeof q.length||rt(q.length)?m(0):Q(q):"Buffer"===q.type&&Array.isArray(q.data)?Q(q.data):void 0}(q);if(je)return je;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof q[Symbol.toPrimitive])return y.from(q[Symbol.toPrimitive]("string"),D,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}function M(q){if("number"!=typeof q)throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function Y(q){return M(q),m(q<0?0:0|le(q))}function Q(q){for(var D=q.length<0?0:0|le(q.length),K=m(D),ge=0;ge<D;ge+=1)K[ge]=255&q[ge];return K}function le(q){if(q>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return 0|q}function G(q,D){if(y.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||ve(q,ArrayBuffer))return q.byteLength;if("string"!=typeof q)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);var K=q.length,ge=arguments.length>2&&!0===arguments[2];if(!ge&&0===K)return 0;for(var je=!1;;)switch(D){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return te(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*K;case"hex":return K>>>1;case"base64":return Ve(q).length;default:if(je)return ge?-1:te(q).length;D=(""+D).toLowerCase(),je=!0}}function $(q,D,K){var ge=!1;if((void 0===D||D<0)&&(D=0),D>this.length||((void 0===K||K>this.length)&&(K=this.length),K<=0)||(K>>>=0)<=(D>>>=0))return"";for(q||(q="utf8");;)switch(q){case"hex":return ct(this,D,K);case"utf8":case"utf-8":return ne(this,D,K);case"ascii":return oe(this,D,K);case"latin1":case"binary":return $e(this,D,K);case"base64":return A(this,D,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,D,K);default:if(ge)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),ge=!0}}function ee(q,D,K){var ge=q[D];q[D]=q[K],q[K]=ge}function _e(q,D,K,ge,je){if(0===q.length)return-1;if("string"==typeof K?(ge=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),rt(K=+K)&&(K=je?0:q.length-1),K<0&&(K=q.length+K),K>=q.length){if(je)return-1;K=q.length-1}else if(K<0){if(!je)return-1;K=0}if("string"==typeof D&&(D=y.from(D,ge)),y.isBuffer(D))return 0===D.length?-1:be(q,D,K,ge,je);if("number"==typeof D)return D&=255,"function"==typeof Uint8Array.prototype.indexOf?je?Uint8Array.prototype.indexOf.call(q,D,K):Uint8Array.prototype.lastIndexOf.call(q,D,K):be(q,[D],K,ge,je);throw new TypeError("val must be string, number or Buffer")}function be(q,D,K,ge,je){var qt,tt=1,ot=q.length,Ft=D.length;if(void 0!==ge&&("ucs2"===(ge=String(ge).toLowerCase())||"ucs-2"===ge||"utf16le"===ge||"utf-16le"===ge)){if(q.length<2||D.length<2)return-1;tt=2,ot/=2,Ft/=2,K/=2}function kt(nn,Nt){return 1===tt?nn[Nt]:nn.readUInt16BE(Nt*tt)}if(je){var tn=-1;for(qt=K;qt<ot;qt++)if(kt(q,qt)===kt(D,-1===tn?0:qt-tn)){if(-1===tn&&(tn=qt),qt-tn+1===Ft)return tn*tt}else-1!==tn&&(qt-=qt-tn),tn=-1}else for(K+Ft>ot&&(K=ot-Ft),qt=K;qt>=0;qt--){for(var Pe=!0,ei=0;ei<Ft;ei++)if(kt(q,qt+ei)!==kt(D,ei)){Pe=!1;break}if(Pe)return qt}return-1}function me(q,D,K,ge){K=Number(K)||0;var je=q.length-K;ge?(ge=Number(ge))>je&&(ge=je):ge=je;var tt=D.length;ge>tt/2&&(ge=tt/2);for(var ot=0;ot<ge;++ot){var Ft=parseInt(D.substr(2*ot,2),16);if(rt(Ft))return ot;q[K+ot]=Ft}return ot}function v(q,D,K,ge){return de(te(D,q.length-K),q,K,ge)}function T(q,D,K,ge){return de(function se(q){for(var D=[],K=0;K<q.length;++K)D.push(255&q.charCodeAt(K));return D}(D),q,K,ge)}function _(q,D,K,ge){return T(q,D,K,ge)}function E(q,D,K,ge){return de(Ve(D),q,K,ge)}function N(q,D,K,ge){return de(function De(q,D){for(var K,ge,tt=[],ot=0;ot<q.length&&!((D-=2)<0);++ot)ge=(K=q.charCodeAt(ot))>>8,tt.push(K%256),tt.push(ge);return tt}(D,q.length-K),q,K,ge)}function A(q,D,K){return o.fromByteArray(0===D&&K===q.length?q:q.slice(D,K))}function ne(q,D,K){K=Math.min(q.length,K);for(var ge=[],je=D;je<K;){var kt,qt,tn,Pe,tt=q[je],ot=null,Ft=tt>239?4:tt>223?3:tt>191?2:1;if(je+Ft<=K)switch(Ft){case 1:tt<128&&(ot=tt);break;case 2:128==(192&(kt=q[je+1]))&&(Pe=(31&tt)<<6|63&kt)>127&&(ot=Pe);break;case 3:qt=q[je+2],128==(192&(kt=q[je+1]))&&128==(192&qt)&&(Pe=(15&tt)<<12|(63&kt)<<6|63&qt)>2047&&(Pe<55296||Pe>57343)&&(ot=Pe);break;case 4:qt=q[je+2],tn=q[je+3],128==(192&(kt=q[je+1]))&&128==(192&qt)&&128==(192&tn)&&(Pe=(15&tt)<<18|(63&kt)<<12|(63&qt)<<6|63&tn)>65535&&Pe<1114112&&(ot=Pe)}null===ot?(ot=65533,Ft=1):ot>65535&&(ge.push((ot-=65536)>>>10&1023|55296),ot=56320|1023&ot),ge.push(ot),je+=Ft}return function Le(q){var D=q.length;if(D<=4096)return String.fromCharCode.apply(String,q);for(var K="",ge=0;ge<D;)K+=String.fromCharCode.apply(String,q.slice(ge,ge+=4096));return K}(ge)}function oe(q,D,K){var ge="";K=Math.min(q.length,K);for(var je=D;je<K;++je)ge+=String.fromCharCode(127&q[je]);return ge}function $e(q,D,K){var ge="";K=Math.min(q.length,K);for(var je=D;je<K;++je)ge+=String.fromCharCode(q[je]);return ge}function ct(q,D,K){var ge=q.length;(!D||D<0)&&(D=0),(!K||K<0||K>ge)&&(K=ge);for(var je="",tt=D;tt<K;++tt)je+=xe[q[tt]];return je}function Ne(q,D,K){for(var ge=q.slice(D,K),je="",tt=0;tt<ge.length;tt+=2)je+=String.fromCharCode(ge[tt]+256*ge[tt+1]);return je}function Je(q,D,K){if(q%1!=0||q<0)throw new RangeError("offset is not uint");if(q+D>K)throw new RangeError("Trying to access beyond buffer length")}function Ze(q,D,K,ge,je,tt){if(!y.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>je||D<tt)throw new RangeError('"value" argument is out of bounds');if(K+ge>q.length)throw new RangeError("Index out of range")}function mt(q,D,K,ge,je,tt){if(K+ge>q.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function nt(q,D,K,ge,je){return D=+D,K>>>=0,je||mt(q,0,K,4),x.write(q,D,K,ge,23,4),K+4}function Ge(q,D,K,ge,je){return D=+D,K>>>=0,je||mt(q,0,K,8),x.write(q,D,K,ge,52,8),K+8}!(y.TYPED_ARRAY_SUPPORT=function d(){try{var q=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(q,D),42===q.foo()}catch{return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}}),y.poolSize=8192,y.from=function(q,D,K){return R(q,D,K)},Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array),y.alloc=function(q,D,K){return function z(q,D,K){return M(q),q<=0?m(q):void 0!==D?"string"==typeof K?m(q).fill(D,K):m(q).fill(D):m(q)}(q,D,K)},y.allocUnsafe=function(q){return Y(q)},y.allocUnsafeSlow=function(q){return Y(q)},y.isBuffer=function(D){return null!=D&&!0===D._isBuffer&&D!==y.prototype},y.compare=function(D,K){if(ve(D,Uint8Array)&&(D=y.from(D,D.offset,D.byteLength)),ve(K,Uint8Array)&&(K=y.from(K,K.offset,K.byteLength)),!y.isBuffer(D)||!y.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===K)return 0;for(var ge=D.length,je=K.length,tt=0,ot=Math.min(ge,je);tt<ot;++tt)if(D[tt]!==K[tt]){ge=D[tt],je=K[tt];break}return ge<je?-1:je<ge?1:0},y.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(D,K){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(0===D.length)return y.alloc(0);var ge;if(void 0===K)for(K=0,ge=0;ge<D.length;++ge)K+=D[ge].length;var je=y.allocUnsafe(K),tt=0;for(ge=0;ge<D.length;++ge){var ot=D[ge];if(ve(ot,Uint8Array)&&(ot=y.from(ot)),!y.isBuffer(ot))throw new TypeError('"list" argument must be an Array of Buffers');ot.copy(je,tt),tt+=ot.length}return je},y.byteLength=G,y.prototype._isBuffer=!0,y.prototype.swap16=function(){var D=this.length;if(D%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var K=0;K<D;K+=2)ee(this,K,K+1);return this},y.prototype.swap32=function(){var D=this.length;if(D%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var K=0;K<D;K+=4)ee(this,K,K+3),ee(this,K+1,K+2);return this},y.prototype.swap64=function(){var D=this.length;if(D%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var K=0;K<D;K+=8)ee(this,K,K+7),ee(this,K+1,K+6),ee(this,K+2,K+5),ee(this,K+3,K+4);return this},y.prototype.toLocaleString=y.prototype.toString=function(){var D=this.length;return 0===D?"":0===arguments.length?ne(this,0,D):$.apply(this,arguments)},y.prototype.equals=function(D){if(!y.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D||0===y.compare(this,D)},y.prototype.inspect=function(){var D="",K=O.h2;return D=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(D+=" ... "),"<Buffer "+D+">"},L&&(y.prototype[L]=y.prototype.inspect),y.prototype.compare=function(D,K,ge,je,tt){if(ve(D,Uint8Array)&&(D=y.from(D,D.offset,D.byteLength)),!y.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(void 0===K&&(K=0),void 0===ge&&(ge=D?D.length:0),void 0===je&&(je=0),void 0===tt&&(tt=this.length),K<0||ge>D.length||je<0||tt>this.length)throw new RangeError("out of range index");if(je>=tt&&K>=ge)return 0;if(je>=tt)return-1;if(K>=ge)return 1;if(this===D)return 0;for(var ot=(tt>>>=0)-(je>>>=0),Ft=(ge>>>=0)-(K>>>=0),kt=Math.min(ot,Ft),qt=this.slice(je,tt),tn=D.slice(K,ge),Pe=0;Pe<kt;++Pe)if(qt[Pe]!==tn[Pe]){ot=qt[Pe],Ft=tn[Pe];break}return ot<Ft?-1:Ft<ot?1:0},y.prototype.includes=function(D,K,ge){return-1!==this.indexOf(D,K,ge)},y.prototype.indexOf=function(D,K,ge){return _e(this,D,K,ge,!0)},y.prototype.lastIndexOf=function(D,K,ge){return _e(this,D,K,ge,!1)},y.prototype.write=function(D,K,ge,je){if(void 0===K)je="utf8",ge=this.length,K=0;else if(void 0===ge&&"string"==typeof K)je=K,ge=this.length,K=0;else{if(!isFinite(K))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");K>>>=0,isFinite(ge)?(ge>>>=0,void 0===je&&(je="utf8")):(je=ge,ge=void 0)}var tt=this.length-K;if((void 0===ge||ge>tt)&&(ge=tt),D.length>0&&(ge<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");je||(je="utf8");for(var ot=!1;;)switch(je){case"hex":return me(this,D,K,ge);case"utf8":case"utf-8":return v(this,D,K,ge);case"ascii":return T(this,D,K,ge);case"latin1":case"binary":return _(this,D,K,ge);case"base64":return E(this,D,K,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,D,K,ge);default:if(ot)throw new TypeError("Unknown encoding: "+je);je=(""+je).toLowerCase(),ot=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},y.prototype.slice=function(D,K){var ge=this.length;(D=~~D)<0?(D+=ge)<0&&(D=0):D>ge&&(D=ge),(K=void 0===K?ge:~~K)<0?(K+=ge)<0&&(K=0):K>ge&&(K=ge),K<D&&(K=D);var je=this.subarray(D,K);return Object.setPrototypeOf(je,y.prototype),je},y.prototype.readUIntLE=function(D,K,ge){D>>>=0,K>>>=0,ge||Je(D,K,this.length);for(var je=this[D],tt=1,ot=0;++ot<K&&(tt*=256);)je+=this[D+ot]*tt;return je},y.prototype.readUIntBE=function(D,K,ge){D>>>=0,K>>>=0,ge||Je(D,K,this.length);for(var je=this[D+--K],tt=1;K>0&&(tt*=256);)je+=this[D+--K]*tt;return je},y.prototype.readUInt8=function(D,K){return D>>>=0,K||Je(D,1,this.length),this[D]},y.prototype.readUInt16LE=function(D,K){return D>>>=0,K||Je(D,2,this.length),this[D]|this[D+1]<<8},y.prototype.readUInt16BE=function(D,K){return D>>>=0,K||Je(D,2,this.length),this[D]<<8|this[D+1]},y.prototype.readUInt32LE=function(D,K){return D>>>=0,K||Je(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+16777216*this[D+3]},y.prototype.readUInt32BE=function(D,K){return D>>>=0,K||Je(D,4,this.length),16777216*this[D]+(this[D+1]<<16|this[D+2]<<8|this[D+3])},y.prototype.readIntLE=function(D,K,ge){D>>>=0,K>>>=0,ge||Je(D,K,this.length);for(var je=this[D],tt=1,ot=0;++ot<K&&(tt*=256);)je+=this[D+ot]*tt;return je>=(tt*=128)&&(je-=Math.pow(2,8*K)),je},y.prototype.readIntBE=function(D,K,ge){D>>>=0,K>>>=0,ge||Je(D,K,this.length);for(var je=K,tt=1,ot=this[D+--je];je>0&&(tt*=256);)ot+=this[D+--je]*tt;return ot>=(tt*=128)&&(ot-=Math.pow(2,8*K)),ot},y.prototype.readInt8=function(D,K){return D>>>=0,K||Je(D,1,this.length),128&this[D]?-1*(255-this[D]+1):this[D]},y.prototype.readInt16LE=function(D,K){D>>>=0,K||Je(D,2,this.length);var ge=this[D]|this[D+1]<<8;return 32768&ge?4294901760|ge:ge},y.prototype.readInt16BE=function(D,K){D>>>=0,K||Je(D,2,this.length);var ge=this[D+1]|this[D]<<8;return 32768&ge?4294901760|ge:ge},y.prototype.readInt32LE=function(D,K){return D>>>=0,K||Je(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},y.prototype.readInt32BE=function(D,K){return D>>>=0,K||Je(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},y.prototype.readFloatLE=function(D,K){return D>>>=0,K||Je(D,4,this.length),x.read(this,D,!0,23,4)},y.prototype.readFloatBE=function(D,K){return D>>>=0,K||Je(D,4,this.length),x.read(this,D,!1,23,4)},y.prototype.readDoubleLE=function(D,K){return D>>>=0,K||Je(D,8,this.length),x.read(this,D,!0,52,8)},y.prototype.readDoubleBE=function(D,K){return D>>>=0,K||Je(D,8,this.length),x.read(this,D,!1,52,8)},y.prototype.writeUIntLE=function(D,K,ge,je){D=+D,K>>>=0,ge>>>=0,je||Ze(this,D,K,ge,Math.pow(2,8*ge)-1,0);var ot=1,Ft=0;for(this[K]=255&D;++Ft<ge&&(ot*=256);)this[K+Ft]=D/ot&255;return K+ge},y.prototype.writeUIntBE=function(D,K,ge,je){D=+D,K>>>=0,ge>>>=0,je||Ze(this,D,K,ge,Math.pow(2,8*ge)-1,0);var ot=ge-1,Ft=1;for(this[K+ot]=255&D;--ot>=0&&(Ft*=256);)this[K+ot]=D/Ft&255;return K+ge},y.prototype.writeUInt8=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,1,255,0),this[K]=255&D,K+1},y.prototype.writeUInt16LE=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,2,65535,0),this[K]=255&D,this[K+1]=D>>>8,K+2},y.prototype.writeUInt16BE=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,2,65535,0),this[K]=D>>>8,this[K+1]=255&D,K+2},y.prototype.writeUInt32LE=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,4,4294967295,0),this[K+3]=D>>>24,this[K+2]=D>>>16,this[K+1]=D>>>8,this[K]=255&D,K+4},y.prototype.writeUInt32BE=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,4,4294967295,0),this[K]=D>>>24,this[K+1]=D>>>16,this[K+2]=D>>>8,this[K+3]=255&D,K+4},y.prototype.writeIntLE=function(D,K,ge,je){if(D=+D,K>>>=0,!je){var tt=Math.pow(2,8*ge-1);Ze(this,D,K,ge,tt-1,-tt)}var ot=0,Ft=1,kt=0;for(this[K]=255&D;++ot<ge&&(Ft*=256);)D<0&&0===kt&&0!==this[K+ot-1]&&(kt=1),this[K+ot]=(D/Ft>>0)-kt&255;return K+ge},y.prototype.writeIntBE=function(D,K,ge,je){if(D=+D,K>>>=0,!je){var tt=Math.pow(2,8*ge-1);Ze(this,D,K,ge,tt-1,-tt)}var ot=ge-1,Ft=1,kt=0;for(this[K+ot]=255&D;--ot>=0&&(Ft*=256);)D<0&&0===kt&&0!==this[K+ot+1]&&(kt=1),this[K+ot]=(D/Ft>>0)-kt&255;return K+ge},y.prototype.writeInt8=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,1,127,-128),D<0&&(D=255+D+1),this[K]=255&D,K+1},y.prototype.writeInt16LE=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,2,32767,-32768),this[K]=255&D,this[K+1]=D>>>8,K+2},y.prototype.writeInt16BE=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,2,32767,-32768),this[K]=D>>>8,this[K+1]=255&D,K+2},y.prototype.writeInt32LE=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,4,2147483647,-2147483648),this[K]=255&D,this[K+1]=D>>>8,this[K+2]=D>>>16,this[K+3]=D>>>24,K+4},y.prototype.writeInt32BE=function(D,K,ge){return D=+D,K>>>=0,ge||Ze(this,D,K,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[K]=D>>>24,this[K+1]=D>>>16,this[K+2]=D>>>8,this[K+3]=255&D,K+4},y.prototype.writeFloatLE=function(D,K,ge){return nt(this,D,K,!0,ge)},y.prototype.writeFloatBE=function(D,K,ge){return nt(this,D,K,!1,ge)},y.prototype.writeDoubleLE=function(D,K,ge){return Ge(this,D,K,!0,ge)},y.prototype.writeDoubleBE=function(D,K,ge){return Ge(this,D,K,!1,ge)},y.prototype.copy=function(D,K,ge,je){if(!y.isBuffer(D))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!je&&0!==je&&(je=this.length),K>=D.length&&(K=D.length),K||(K=0),je>0&&je<ge&&(je=ge),je===ge||0===D.length||0===this.length)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(je<0)throw new RangeError("sourceEnd out of bounds");je>this.length&&(je=this.length),D.length-K<je-ge&&(je=D.length-K+ge);var tt=je-ge;if(this===D&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(K,ge,je);else if(this===D&&ge<K&&K<je)for(var ot=tt-1;ot>=0;--ot)D[ot+K]=this[ot+ge];else Uint8Array.prototype.set.call(D,this.subarray(ge,je),K);return tt},y.prototype.fill=function(D,K,ge,je){if("string"==typeof D){if("string"==typeof K?(je=K,K=0,ge=this.length):"string"==typeof ge&&(je=ge,ge=this.length),void 0!==je&&"string"!=typeof je)throw new TypeError("encoding must be a string");if("string"==typeof je&&!y.isEncoding(je))throw new TypeError("Unknown encoding: "+je);if(1===D.length){var tt=D.charCodeAt(0);("utf8"===je&&tt<128||"latin1"===je)&&(D=tt)}}else"number"==typeof D?D&=255:"boolean"==typeof D&&(D=Number(D));if(K<0||this.length<K||this.length<ge)throw new RangeError("Out of range index");if(ge<=K)return this;var ot;if(K>>>=0,ge=void 0===ge?this.length:ge>>>0,D||(D=0),"number"==typeof D)for(ot=K;ot<ge;++ot)this[ot]=D;else{var Ft=y.isBuffer(D)?D:y.from(D,je),kt=Ft.length;if(0===kt)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(ot=0;ot<ge-K;++ot)this[ot+K]=Ft[ot%kt]}return this};var it=/[^+/0-9A-Za-z-_]/g;function te(q,D){D=D||1/0;for(var K,ge=q.length,je=null,tt=[],ot=0;ot<ge;++ot){if((K=q.charCodeAt(ot))>55295&&K<57344){if(!je){if(K>56319){(D-=3)>-1&&tt.push(239,191,189);continue}if(ot+1===ge){(D-=3)>-1&&tt.push(239,191,189);continue}je=K;continue}if(K<56320){(D-=3)>-1&&tt.push(239,191,189),je=K;continue}K=65536+(je-55296<<10|K-56320)}else je&&(D-=3)>-1&&tt.push(239,191,189);if(je=null,K<128){if((D-=1)<0)break;tt.push(K)}else if(K<2048){if((D-=2)<0)break;tt.push(K>>6|192,63&K|128)}else if(K<65536){if((D-=3)<0)break;tt.push(K>>12|224,K>>6&63|128,63&K|128)}else{if(!(K<1114112))throw new Error("Invalid code point");if((D-=4)<0)break;tt.push(K>>18|240,K>>12&63|128,K>>6&63|128,63&K|128)}}return tt}function Ve(q){return o.toByteArray(function fe(q){if((q=(q=q.split("=")[0]).trim().replace(it,"")).length<2)return"";for(;q.length%4!=0;)q+="=";return q}(q))}function de(q,D,K,ge){for(var je=0;je<ge&&!(je+K>=D.length||je>=q.length);++je)D[je+K]=q[je];return je}function ve(q,D){return q instanceof D||null!=q&&null!=q.constructor&&null!=q.constructor.name&&q.constructor.name===D.name}function rt(q){return q!=q}var xe=function(){for(var q="0123456789abcdef",D=new Array(256),K=0;K<16;++K)for(var ge=16*K,je=0;je<16;++je)D[ge+je]=q[K]+q[je];return D}()},7086:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32=void 0;var k=S(2220),o=S(2670),x=S(2562),L=function(){function j(){this.crc32=new x.Crc32}return j.prototype.update=function(d){(0,o.isEmptyData)(d)||this.crc32.update((0,o.convertToBuffer)(d))},j.prototype.digest=function(){return(0,k.__awaiter)(this,void 0,void 0,function(){return(0,k.__generator)(this,function(d){return[2,(0,o.numToUint8)(this.crc32.digest())]})})},j}();O.AwsCrc32=L},2562:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32=O.Crc32=O.crc32=void 0;var k=S(2220),o=S(2670);O.crc32=function x(y){return(new L).update(y).digest()};var L=function(){function y(){this.checksum=4294967295}return y.prototype.update=function(R){var M,z;try{for(var Y=(0,k.__values)(R),X=Y.next();!X.done;X=Y.next())this.checksum=this.checksum>>>8^d[255&(this.checksum^X.value)]}catch(W){M={error:W}}finally{try{X&&!X.done&&(z=Y.return)&&z.call(Y)}finally{if(M)throw M.error}}return this},y.prototype.digest=function(){return(4294967295^this.checksum)>>>0},y}();O.Crc32=L;var d=(0,o.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),m=S(7086);Object.defineProperty(O,"AwsCrc32",{enumerable:!0,get:function(){return m.AwsCrc32}})},6137:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var k=S(2093),o="undefined"!=typeof Buffer&&Buffer.from?function(L){return Buffer.from(L,"utf8")}:k.fromUtf8;O.convertToBuffer=function x(L){return L instanceof Uint8Array?L:"string"==typeof L?o(L):ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(L)}},2670:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var k=S(6137);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return k.convertToBuffer}});var o=S(5411);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var x=S(7186);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return x.numToUint8}});var L=S(3823);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return L.uint32ArrayFrom}})},5411:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function S(k){return"string"==typeof k?0===k.length:0===k.byteLength}},7186:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function S(k){return new Uint8Array([(4278190080&k)>>24,(16711680&k)>>16,(65280&k)>>8,255&k])}},3823:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function S(k){if(!Uint32Array.from){for(var o=new Uint32Array(k.length),x=0;x<k.length;)o[x]=k[x],x+=1;return o}return Uint32Array.from(k)}},5468:(Ce,O,S)=>{S.r(O),S.d(O,{locateWindow:()=>o});var k={};function o(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:k}},2093:(Ce,O,S)=>{S.r(O),S.d(O,{fromUtf8:()=>j,toUtf8:()=>d});var j=function(m){return"function"==typeof TextEncoder?function x(m){return(new TextEncoder).encode(m)}(m):function(m){for(var y=[],R=0,M=m.length;R<M;R++){var z=m.charCodeAt(R);if(z<128)y.push(z);else if(z<2048)y.push(z>>6|192,63&z|128);else if(R+1<m.length&&55296==(64512&z)&&56320==(64512&m.charCodeAt(R+1))){var Y=65536+((1023&z)<<10)+(1023&m.charCodeAt(++R));y.push(Y>>18|240,Y>>12&63|128,Y>>6&63|128,63&Y|128)}else y.push(z>>12|224,z>>6&63|128,63&z|128)}return Uint8Array.from(y)}(m)},d=function(m){return"function"==typeof TextDecoder?function L(m){return new TextDecoder("utf-8").decode(m)}(m):function(m){for(var y="",R=0,M=m.length;R<M;R++){var z=m[R];if(z<128)y+=String.fromCharCode(z);else if(192<=z&&z<224){var Y=m[++R];y+=String.fromCharCode((31&z)<<6|63&Y)}else if(240<=z&&z<365){var Q="%"+[z,m[++R],m[++R],m[++R]].map(function(W){return W.toString(16)}).join("%");y+=decodeURIComponent(Q)}else y+=String.fromCharCode((15&z)<<12|(63&m[++R])<<6|63&m[++R])}return y}(m)}},2173:(Ce,O)=>{O.byteLength=function m(X){var Q=d(X),J=Q[1];return 3*(Q[0]+J)/4-J},O.toByteArray=function R(X){var Q,ee,W=d(X),J=W[0],le=W[1],U=new o(function y(X,Q,W){return 3*(Q+W)/4-W}(0,J,le)),G=0,$=le>0?J-4:J;for(ee=0;ee<$;ee+=4)Q=k[X.charCodeAt(ee)]<<18|k[X.charCodeAt(ee+1)]<<12|k[X.charCodeAt(ee+2)]<<6|k[X.charCodeAt(ee+3)],U[G++]=Q>>16&255,U[G++]=Q>>8&255,U[G++]=255&Q;return 2===le&&(Q=k[X.charCodeAt(ee)]<<2|k[X.charCodeAt(ee+1)]>>4,U[G++]=255&Q),1===le&&(Q=k[X.charCodeAt(ee)]<<10|k[X.charCodeAt(ee+1)]<<4|k[X.charCodeAt(ee+2)]>>2,U[G++]=Q>>8&255,U[G++]=255&Q),U},O.fromByteArray=function Y(X){for(var Q,W=X.length,J=W%3,le=[],U=16383,G=0,$=W-J;G<$;G+=U)le.push(z(X,G,G+U>$?$:G+U));return 1===J?le.push(S[(Q=X[W-1])>>2]+S[Q<<4&63]+"=="):2===J&&le.push(S[(Q=(X[W-2]<<8)+X[W-1])>>10]+S[Q>>4&63]+S[Q<<2&63]+"="),le.join("")};for(var S=[],k=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L=0,j=x.length;L<j;++L)S[L]=x[L],k[x.charCodeAt(L)]=L;function d(X){var Q=X.length;if(Q%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var W=X.indexOf("=");return-1===W&&(W=Q),[W,W===Q?0:4-W%4]}function M(X){return S[X>>18&63]+S[X>>12&63]+S[X>>6&63]+S[63&X]}function z(X,Q,W){for(var le=[],U=Q;U<W;U+=3)le.push(M((X[U]<<16&16711680)+(X[U+1]<<8&65280)+(255&X[U+2])));return le.join("")}k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63},3962:function(Ce){Ce.exports=function(O){var S={};function k(o){if(S[o])return S[o].exports;var x=S[o]={i:o,l:!1,exports:{}};return O[o].call(x.exports,x,x.exports,k),x.l=!0,x.exports}return k.m=O,k.c=S,k.d=function(o,x,L){k.o(o,x)||Object.defineProperty(o,x,{enumerable:!0,get:L})},k.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},k.t=function(o,x){if(1&x&&(o=k(o)),8&x||4&x&&"object"==typeof o&&o&&o.__esModule)return o;var L=Object.create(null);if(k.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:o}),2&x&&"string"!=typeof o)for(var j in o)k.d(L,j,function(d){return o[d]}.bind(null,j));return L},k.n=function(o){var x=o&&o.__esModule?function(){return o.default}:function(){return o};return k.d(x,"a",x),x},k.o=function(o,x){return Object.prototype.hasOwnProperty.call(o,x)},k.p="",k(k.s=90)}({17:function(O,S,k){"use strict";S.__esModule=!0,S.default=void 0;var o=k(18),x=function(){function L(){}return L.getFirstMatch=function(j,d){var m=d.match(j);return m&&m.length>0&&m[1]||""},L.getSecondMatch=function(j,d){var m=d.match(j);return m&&m.length>1&&m[2]||""},L.matchAndReturnConst=function(j,d,m){if(j.test(d))return m},L.getWindowsVersionName=function(j){switch(j){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},L.getMacOSVersionName=function(j){var d=j.split(".").splice(0,2).map(function(m){return parseInt(m,10)||0});if(d.push(0),10===d[0])switch(d[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},L.getAndroidVersionName=function(j){var d=j.split(".").splice(0,2).map(function(m){return parseInt(m,10)||0});if(d.push(0),!(1===d[0]&&d[1]<5))return 1===d[0]&&d[1]<6?"Cupcake":1===d[0]&&d[1]>=6?"Donut":2===d[0]&&d[1]<2?"Eclair":2===d[0]&&2===d[1]?"Froyo":2===d[0]&&d[1]>2?"Gingerbread":3===d[0]?"Honeycomb":4===d[0]&&d[1]<1?"Ice Cream Sandwich":4===d[0]&&d[1]<4?"Jelly Bean":4===d[0]&&d[1]>=4?"KitKat":5===d[0]?"Lollipop":6===d[0]?"Marshmallow":7===d[0]?"Nougat":8===d[0]?"Oreo":9===d[0]?"Pie":void 0},L.getVersionPrecision=function(j){return j.split(".").length},L.compareVersions=function(j,d,m){void 0===m&&(m=!1);var y=L.getVersionPrecision(j),R=L.getVersionPrecision(d),M=Math.max(y,R),z=0,Y=L.map([j,d],function(X){var Q=M-L.getVersionPrecision(X),W=X+new Array(Q+1).join(".0");return L.map(W.split("."),function(J){return new Array(20-J.length).join("0")+J}).reverse()});for(m&&(z=M-Math.min(y,R)),M-=1;M>=z;){if(Y[0][M]>Y[1][M])return 1;if(Y[0][M]===Y[1][M]){if(M===z)return 0;M-=1}else if(Y[0][M]<Y[1][M])return-1}},L.map=function(j,d){var m,y=[];if(Array.prototype.map)return Array.prototype.map.call(j,d);for(m=0;m<j.length;m+=1)y.push(d(j[m]));return y},L.find=function(j,d){var m,y;if(Array.prototype.find)return Array.prototype.find.call(j,d);for(m=0,y=j.length;m<y;m+=1){var R=j[m];if(d(R,m))return R}},L.assign=function(j){for(var d,m,y=j,R=arguments.length,M=new Array(R>1?R-1:0),z=1;z<R;z++)M[z-1]=arguments[z];if(Object.assign)return Object.assign.apply(Object,[j].concat(M));var Y=function(){var X=M[d];"object"==typeof X&&null!==X&&Object.keys(X).forEach(function(Q){y[Q]=X[Q]})};for(d=0,m=M.length;d<m;d+=1)Y();return j},L.getBrowserAlias=function(j){return o.BROWSER_ALIASES_MAP[j]},L.getBrowserTypeByAlias=function(j){return o.BROWSER_MAP[j]||""},L}();S.default=x,O.exports=S.default},18:function(O,S,k){"use strict";S.__esModule=!0,S.ENGINE_MAP=S.OS_MAP=S.PLATFORMS_MAP=S.BROWSER_MAP=S.BROWSER_ALIASES_MAP=void 0,S.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},S.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},S.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},S.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},S.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(O,S,k){"use strict";S.__esModule=!0,S.default=void 0;var o,x=(o=k(91))&&o.__esModule?o:{default:o},L=k(18);function j(m,y){for(var R=0;R<y.length;R++){var M=y[R];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(m,M.key,M)}}var d=function(){function m(){}var y,M;return m.getParser=function(z,Y){if(void 0===Y&&(Y=!1),"string"!=typeof z)throw new Error("UserAgent should be a string");return new x.default(z,Y)},m.parse=function(z){return new x.default(z).getResult()},y=m,M=[{key:"BROWSER_MAP",get:function(){return L.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return L.ENGINE_MAP}},{key:"OS_MAP",get:function(){return L.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return L.PLATFORMS_MAP}}],null&&j(y.prototype,null),M&&j(y,M),m}();S.default=d,O.exports=S.default},91:function(O,S,k){"use strict";S.__esModule=!0,S.default=void 0;var o=m(k(92)),x=m(k(93)),L=m(k(94)),j=m(k(95)),d=m(k(17));function m(R){return R&&R.__esModule?R:{default:R}}var y=function(){function R(z,Y){if(void 0===Y&&(Y=!1),null==z||""===z)throw new Error("UserAgent parameter can't be empty");this._ua=z,this.parsedResult={},!0!==Y&&this.parse()}var M=R.prototype;return M.getUA=function(){return this._ua},M.test=function(z){return z.test(this._ua)},M.parseBrowser=function(){var z=this;this.parsedResult.browser={};var Y=d.default.find(o.default,function(X){if("function"==typeof X.test)return X.test(z);if(X.test instanceof Array)return X.test.some(function(Q){return z.test(Q)});throw new Error("Browser's test function is not valid")});return Y&&(this.parsedResult.browser=Y.describe(this.getUA())),this.parsedResult.browser},M.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},M.getBrowserName=function(z){return z?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},M.getBrowserVersion=function(){return this.getBrowser().version},M.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},M.parseOS=function(){var z=this;this.parsedResult.os={};var Y=d.default.find(x.default,function(X){if("function"==typeof X.test)return X.test(z);if(X.test instanceof Array)return X.test.some(function(Q){return z.test(Q)});throw new Error("Browser's test function is not valid")});return Y&&(this.parsedResult.os=Y.describe(this.getUA())),this.parsedResult.os},M.getOSName=function(z){var Y=this.getOS().name;return z?String(Y).toLowerCase()||"":Y||""},M.getOSVersion=function(){return this.getOS().version},M.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},M.getPlatformType=function(z){void 0===z&&(z=!1);var Y=this.getPlatform().type;return z?String(Y).toLowerCase()||"":Y||""},M.parsePlatform=function(){var z=this;this.parsedResult.platform={};var Y=d.default.find(L.default,function(X){if("function"==typeof X.test)return X.test(z);if(X.test instanceof Array)return X.test.some(function(Q){return z.test(Q)});throw new Error("Browser's test function is not valid")});return Y&&(this.parsedResult.platform=Y.describe(this.getUA())),this.parsedResult.platform},M.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},M.getEngineName=function(z){return z?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},M.parseEngine=function(){var z=this;this.parsedResult.engine={};var Y=d.default.find(j.default,function(X){if("function"==typeof X.test)return X.test(z);if(X.test instanceof Array)return X.test.some(function(Q){return z.test(Q)});throw new Error("Browser's test function is not valid")});return Y&&(this.parsedResult.engine=Y.describe(this.getUA())),this.parsedResult.engine},M.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},M.getResult=function(){return d.default.assign({},this.parsedResult)},M.satisfies=function(z){var Y=this,X={},Q=0,W={},J=0;if(Object.keys(z).forEach(function(me){var v=z[me];"string"==typeof v?(W[me]=v,J+=1):"object"==typeof v&&(X[me]=v,Q+=1)}),Q>0){var le=Object.keys(X),U=d.default.find(le,function(me){return Y.isOS(me)});if(U){var G=this.satisfies(X[U]);if(void 0!==G)return G}var $=d.default.find(le,function(me){return Y.isPlatform(me)});if($){var ee=this.satisfies(X[$]);if(void 0!==ee)return ee}}if(J>0){var _e=Object.keys(W),be=d.default.find(_e,function(me){return Y.isBrowser(me,!0)});if(void 0!==be)return this.compareVersion(W[be])}},M.isBrowser=function(z,Y){void 0===Y&&(Y=!1);var X=this.getBrowserName().toLowerCase(),Q=z.toLowerCase(),W=d.default.getBrowserTypeByAlias(Q);return Y&&W&&(Q=W.toLowerCase()),Q===X},M.compareVersion=function(z){var Y=[0],X=z,Q=!1,W=this.getBrowserVersion();if("string"==typeof W)return">"===z[0]||"<"===z[0]?(X=z.substr(1),"="===z[1]?(Q=!0,X=z.substr(2)):Y=[],Y.push(">"===z[0]?1:-1)):"="===z[0]?X=z.substr(1):"~"===z[0]&&(Q=!0,X=z.substr(1)),Y.indexOf(d.default.compareVersions(W,X,Q))>-1},M.isOS=function(z){return this.getOSName(!0)===String(z).toLowerCase()},M.isPlatform=function(z){return this.getPlatformType(!0)===String(z).toLowerCase()},M.isEngine=function(z){return this.getEngineName(!0)===String(z).toLowerCase()},M.is=function(z,Y){return void 0===Y&&(Y=!1),this.isBrowser(z,Y)||this.isOS(z)||this.isPlatform(z)},M.some=function(z){var Y=this;return void 0===z&&(z=[]),z.some(function(X){return Y.is(X)})},R}();S.default=y,O.exports=S.default},92:function(O,S,k){"use strict";S.__esModule=!0,S.default=void 0;var o,x=(o=k(17))&&o.__esModule?o:{default:o},L=/version\/(\d+(\.?_?\d+)+)/i;S.default=[{test:[/googlebot/i],describe:function(d){var m={name:"Googlebot"},y=x.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/opera/i],describe:function(d){var m={name:"Opera"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/opr\/|opios/i],describe:function(d){var m={name:"Opera"},y=x.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/SamsungBrowser/i],describe:function(d){var m={name:"Samsung Internet for Android"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/Whale/i],describe:function(d){var m={name:"NAVER Whale Browser"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/MZBrowser/i],describe:function(d){var m={name:"MZ Browser"},y=x.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/focus/i],describe:function(d){var m={name:"Focus"},y=x.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/swing/i],describe:function(d){var m={name:"Swing"},y=x.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/coast/i],describe:function(d){var m={name:"Opera Coast"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(d){var m={name:"Opera Touch"},y=x.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/yabrowser/i],describe:function(d){var m={name:"Yandex Browser"},y=x.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/ucbrowser/i],describe:function(d){var m={name:"UC Browser"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/Maxthon|mxios/i],describe:function(d){var m={name:"Maxthon"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/epiphany/i],describe:function(d){var m={name:"Epiphany"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/puffin/i],describe:function(d){var m={name:"Puffin"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/sleipnir/i],describe:function(d){var m={name:"Sleipnir"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/k-meleon/i],describe:function(d){var m={name:"K-Meleon"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/micromessenger/i],describe:function(d){var m={name:"WeChat"},y=x.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/qqbrowser/i],describe:function(d){var m={name:/qqbrowserlite/i.test(d)?"QQ Browser Lite":"QQ Browser"},y=x.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/msie|trident/i],describe:function(d){var m={name:"Internet Explorer"},y=x.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/\sedg\//i],describe:function(d){var m={name:"Microsoft Edge"},y=x.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/edg([ea]|ios)/i],describe:function(d){var m={name:"Microsoft Edge"},y=x.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/vivaldi/i],describe:function(d){var m={name:"Vivaldi"},y=x.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/seamonkey/i],describe:function(d){var m={name:"SeaMonkey"},y=x.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/sailfish/i],describe:function(d){var m={name:"Sailfish"},y=x.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,d);return y&&(m.version=y),m}},{test:[/silk/i],describe:function(d){var m={name:"Amazon Silk"},y=x.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/phantom/i],describe:function(d){var m={name:"PhantomJS"},y=x.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/slimerjs/i],describe:function(d){var m={name:"SlimerJS"},y=x.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(d){var m={name:"BlackBerry"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/(web|hpw)[o0]s/i],describe:function(d){var m={name:"WebOS Browser"},y=x.default.getFirstMatch(L,d)||x.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/bada/i],describe:function(d){var m={name:"Bada"},y=x.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/tizen/i],describe:function(d){var m={name:"Tizen"},y=x.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/qupzilla/i],describe:function(d){var m={name:"QupZilla"},y=x.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/firefox|iceweasel|fxios/i],describe:function(d){var m={name:"Firefox"},y=x.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/electron/i],describe:function(d){var m={name:"Electron"},y=x.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/MiuiBrowser/i],describe:function(d){var m={name:"Miui"},y=x.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/chromium/i],describe:function(d){var m={name:"Chromium"},y=x.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,d)||x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/chrome|crios|crmo/i],describe:function(d){var m={name:"Chrome"},y=x.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/GSA/i],describe:function(d){var m={name:"Google Search"},y=x.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:function(d){var m=!d.test(/like android/i),y=d.test(/android/i);return m&&y},describe:function(d){var m={name:"Android Browser"},y=x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/playstation 4/i],describe:function(d){var m={name:"PlayStation 4"},y=x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/safari|applewebkit/i],describe:function(d){var m={name:"Safari"},y=x.default.getFirstMatch(L,d);return y&&(m.version=y),m}},{test:[/.*/i],describe:function(d){var m=-1!==d.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:x.default.getFirstMatch(m,d),version:x.default.getSecondMatch(m,d)}}}],O.exports=S.default},93:function(O,S,k){"use strict";S.__esModule=!0,S.default=void 0;var o,x=(o=k(17))&&o.__esModule?o:{default:o},L=k(18);S.default=[{test:[/Roku\/DVP/],describe:function(d){var m=x.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,d);return{name:L.OS_MAP.Roku,version:m}}},{test:[/windows phone/i],describe:function(d){var m=x.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,d);return{name:L.OS_MAP.WindowsPhone,version:m}}},{test:[/windows /i],describe:function(d){var m=x.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,d),y=x.default.getWindowsVersionName(m);return{name:L.OS_MAP.Windows,version:m,versionName:y}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(d){var m={name:L.OS_MAP.iOS},y=x.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,d);return y&&(m.version=y),m}},{test:[/macintosh/i],describe:function(d){var m=x.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,d).replace(/[_\s]/g,"."),y=x.default.getMacOSVersionName(m),R={name:L.OS_MAP.MacOS,version:m};return y&&(R.versionName=y),R}},{test:[/(ipod|iphone|ipad)/i],describe:function(d){var m=x.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,d).replace(/[_\s]/g,".");return{name:L.OS_MAP.iOS,version:m}}},{test:function(d){var m=!d.test(/like android/i),y=d.test(/android/i);return m&&y},describe:function(d){var m=x.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,d),y=x.default.getAndroidVersionName(m),R={name:L.OS_MAP.Android,version:m};return y&&(R.versionName=y),R}},{test:[/(web|hpw)[o0]s/i],describe:function(d){var m=x.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,d),y={name:L.OS_MAP.WebOS};return m&&m.length&&(y.version=m),y}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(d){var m=x.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,d)||x.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,d)||x.default.getFirstMatch(/\bbb(\d+)/i,d);return{name:L.OS_MAP.BlackBerry,version:m}}},{test:[/bada/i],describe:function(d){var m=x.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,d);return{name:L.OS_MAP.Bada,version:m}}},{test:[/tizen/i],describe:function(d){var m=x.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,d);return{name:L.OS_MAP.Tizen,version:m}}},{test:[/linux/i],describe:function(){return{name:L.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:L.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(d){var m=x.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,d);return{name:L.OS_MAP.PlayStation4,version:m}}}],O.exports=S.default},94:function(O,S,k){"use strict";S.__esModule=!0,S.default=void 0;var o,x=(o=k(17))&&o.__esModule?o:{default:o},L=k(18);S.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(d){var m=x.default.getFirstMatch(/(can-l01)/i,d)&&"Nova",y={type:L.PLATFORMS_MAP.mobile,vendor:"Huawei"};return m&&(y.model=m),y}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:L.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:L.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:L.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:L.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:L.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:L.PLATFORMS_MAP.tablet}}},{test:function(d){var m=d.test(/ipod|iphone/i),y=d.test(/like (ipod|iphone)/i);return m&&!y},describe:function(d){var m=x.default.getFirstMatch(/(ipod|iphone)/i,d);return{type:L.PLATFORMS_MAP.mobile,vendor:"Apple",model:m}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:L.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:L.PLATFORMS_MAP.mobile}}},{test:function(d){return"blackberry"===d.getBrowserName(!0)},describe:function(){return{type:L.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(d){return"bada"===d.getBrowserName(!0)},describe:function(){return{type:L.PLATFORMS_MAP.mobile}}},{test:function(d){return"windows phone"===d.getBrowserName()},describe:function(){return{type:L.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(d){var m=Number(String(d.getOSVersion()).split(".")[0]);return"android"===d.getOSName(!0)&&m>=3},describe:function(){return{type:L.PLATFORMS_MAP.tablet}}},{test:function(d){return"android"===d.getOSName(!0)},describe:function(){return{type:L.PLATFORMS_MAP.mobile}}},{test:function(d){return"macos"===d.getOSName(!0)},describe:function(){return{type:L.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(d){return"windows"===d.getOSName(!0)},describe:function(){return{type:L.PLATFORMS_MAP.desktop}}},{test:function(d){return"linux"===d.getOSName(!0)},describe:function(){return{type:L.PLATFORMS_MAP.desktop}}},{test:function(d){return"playstation 4"===d.getOSName(!0)},describe:function(){return{type:L.PLATFORMS_MAP.tv}}},{test:function(d){return"roku"===d.getOSName(!0)},describe:function(){return{type:L.PLATFORMS_MAP.tv}}}],O.exports=S.default},95:function(O,S,k){"use strict";S.__esModule=!0,S.default=void 0;var o,x=(o=k(17))&&o.__esModule?o:{default:o},L=k(18);S.default=[{test:function(d){return"microsoft edge"===d.getBrowserName(!0)},describe:function(d){if(/\sedg\//i.test(d))return{name:L.ENGINE_MAP.Blink};var m=x.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,d);return{name:L.ENGINE_MAP.EdgeHTML,version:m}}},{test:[/trident/i],describe:function(d){var m={name:L.ENGINE_MAP.Trident},y=x.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:function(d){return d.test(/presto/i)},describe:function(d){var m={name:L.ENGINE_MAP.Presto},y=x.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:function(d){var m=d.test(/gecko/i),y=d.test(/like gecko/i);return m&&!y},describe:function(d){var m={name:L.ENGINE_MAP.Gecko},y=x.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:L.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(d){var m={name:L.ENGINE_MAP.WebKit},y=x.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,d);return y&&(m.version=y),m}}],O.exports=S.default}})},5979:Ce=>{Ce.exports=function k(o){return"[object String]"=={}.toString.call(o)?o.replace(O,".$1").replace(S,""):""};var O=/\[([^\[\]]+)\]/g,S=/^[.]*|[.]*$/g},3195:(Ce,O,S)=>{var k=S(2173),o=S(4920),x="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;O.Buffer=m,O.SlowBuffer=function U(xe){return+xe!=xe&&(xe=0),m.alloc(+xe)},O.INSPECT_MAX_BYTES=50;var L=2147483647;function d(xe){if(xe>L)throw new RangeError('The value "'+xe+'" is invalid for option "size"');var q=new Uint8Array(xe);return Object.setPrototypeOf(q,m.prototype),q}function m(xe,q,D){if("number"==typeof xe){if("string"==typeof q)throw new TypeError('The "string" argument must be of type string. Received type number');return z(xe)}return y(xe,q,D)}function y(xe,q,D){if("string"==typeof xe)return function Y(xe,q){if(("string"!=typeof q||""===q)&&(q="utf8"),!m.isEncoding(q))throw new TypeError("Unknown encoding: "+q);var D=0|G(xe,q),K=d(D),ge=K.write(xe,q);return ge!==D&&(K=K.slice(0,ge)),K}(xe,q);if(ArrayBuffer.isView(xe))return function Q(xe){if(de(xe,Uint8Array)){var q=new Uint8Array(xe);return W(q.buffer,q.byteOffset,q.byteLength)}return X(xe)}(xe);if(null==xe)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xe);if(de(xe,ArrayBuffer)||xe&&de(xe.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(de(xe,SharedArrayBuffer)||xe&&de(xe.buffer,SharedArrayBuffer)))return W(xe,q,D);if("number"==typeof xe)throw new TypeError('The "value" argument must not be of type number. Received type number');var K=xe.valueOf&&xe.valueOf();if(null!=K&&K!==xe)return m.from(K,q,D);var ge=function J(xe){if(m.isBuffer(xe)){var q=0|le(xe.length),D=d(q);return 0===D.length||xe.copy(D,0,0,q),D}return void 0!==xe.length?"number"!=typeof xe.length||ve(xe.length)?d(0):X(xe):"Buffer"===xe.type&&Array.isArray(xe.data)?X(xe.data):void 0}(xe);if(ge)return ge;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof xe[Symbol.toPrimitive])return m.from(xe[Symbol.toPrimitive]("string"),q,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xe)}function R(xe){if("number"!=typeof xe)throw new TypeError('"size" argument must be of type number');if(xe<0)throw new RangeError('The value "'+xe+'" is invalid for option "size"')}function z(xe){return R(xe),d(xe<0?0:0|le(xe))}function X(xe){for(var q=xe.length<0?0:0|le(xe.length),D=d(q),K=0;K<q;K+=1)D[K]=255&xe[K];return D}function W(xe,q,D){if(q<0||xe.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(xe.byteLength<q+(D||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=void 0===q&&void 0===D?new Uint8Array(xe):void 0===D?new Uint8Array(xe,q):new Uint8Array(xe,q,D),Object.setPrototypeOf(K,m.prototype),K}function le(xe){if(xe>=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");return 0|xe}function G(xe,q){if(m.isBuffer(xe))return xe.length;if(ArrayBuffer.isView(xe)||de(xe,ArrayBuffer))return xe.byteLength;if("string"!=typeof xe)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof xe);var D=xe.length,K=arguments.length>2&&!0===arguments[2];if(!K&&0===D)return 0;for(var ge=!1;;)switch(q){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return fe(xe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*D;case"hex":return D>>>1;case"base64":return De(xe).length;default:if(ge)return K?-1:fe(xe).length;q=(""+q).toLowerCase(),ge=!0}}function $(xe,q,D){var K=!1;if((void 0===q||q<0)&&(q=0),q>this.length||((void 0===D||D>this.length)&&(D=this.length),D<=0)||(D>>>=0)<=(q>>>=0))return"";for(xe||(xe="utf8");;)switch(xe){case"hex":return $e(this,q,D);case"utf8":case"utf-8":return A(this,q,D);case"ascii":return Le(this,q,D);case"latin1":case"binary":return oe(this,q,D);case"base64":return N(this,q,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct(this,q,D);default:if(K)throw new TypeError("Unknown encoding: "+xe);xe=(xe+"").toLowerCase(),K=!0}}function ee(xe,q,D){var K=xe[q];xe[q]=xe[D],xe[D]=K}function _e(xe,q,D,K,ge){if(0===xe.length)return-1;if("string"==typeof D?(K=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),ve(D=+D)&&(D=ge?0:xe.length-1),D<0&&(D=xe.length+D),D>=xe.length){if(ge)return-1;D=xe.length-1}else if(D<0){if(!ge)return-1;D=0}if("string"==typeof q&&(q=m.from(q,K)),m.isBuffer(q))return 0===q.length?-1:be(xe,q,D,K,ge);if("number"==typeof q)return q&=255,"function"==typeof Uint8Array.prototype.indexOf?ge?Uint8Array.prototype.indexOf.call(xe,q,D):Uint8Array.prototype.lastIndexOf.call(xe,q,D):be(xe,[q],D,K,ge);throw new TypeError("val must be string, number or Buffer")}function be(xe,q,D,K,ge){var kt,je=1,tt=xe.length,ot=q.length;if(void 0!==K&&("ucs2"===(K=String(K).toLowerCase())||"ucs-2"===K||"utf16le"===K||"utf-16le"===K)){if(xe.length<2||q.length<2)return-1;je=2,tt/=2,ot/=2,D/=2}function Ft(ei,nn){return 1===je?ei[nn]:ei.readUInt16BE(nn*je)}if(ge){var qt=-1;for(kt=D;kt<tt;kt++)if(Ft(xe,kt)===Ft(q,-1===qt?0:kt-qt)){if(-1===qt&&(qt=kt),kt-qt+1===ot)return qt*je}else-1!==qt&&(kt-=kt-qt),qt=-1}else for(D+ot>tt&&(D=tt-ot),kt=D;kt>=0;kt--){for(var tn=!0,Pe=0;Pe<ot;Pe++)if(Ft(xe,kt+Pe)!==Ft(q,Pe)){tn=!1;break}if(tn)return kt}return-1}function me(xe,q,D,K){D=Number(D)||0;var ge=xe.length-D;K?(K=Number(K))>ge&&(K=ge):K=ge;var je=q.length;K>je/2&&(K=je/2);for(var tt=0;tt<K;++tt){var ot=parseInt(q.substr(2*tt,2),16);if(ve(ot))return tt;xe[D+tt]=ot}return tt}function v(xe,q,D,K){return Ve(fe(q,xe.length-D),xe,D,K)}function T(xe,q,D,K){return Ve(function te(xe){for(var q=[],D=0;D<xe.length;++D)q.push(255&xe.charCodeAt(D));return q}(q),xe,D,K)}function _(xe,q,D,K){return Ve(De(q),xe,D,K)}function E(xe,q,D,K){return Ve(function se(xe,q){for(var D,K,je=[],tt=0;tt<xe.length&&!((q-=2)<0);++tt)K=(D=xe.charCodeAt(tt))>>8,je.push(D%256),je.push(K);return je}(q,xe.length-D),xe,D,K)}function N(xe,q,D){return k.fromByteArray(0===q&&D===xe.length?xe:xe.slice(q,D))}function A(xe,q,D){D=Math.min(xe.length,D);for(var K=[],ge=q;ge<D;){var Ft,kt,qt,tn,je=xe[ge],tt=null,ot=je>239?4:je>223?3:je>191?2:1;if(ge+ot<=D)switch(ot){case 1:je<128&&(tt=je);break;case 2:128==(192&(Ft=xe[ge+1]))&&(tn=(31&je)<<6|63&Ft)>127&&(tt=tn);break;case 3:kt=xe[ge+2],128==(192&(Ft=xe[ge+1]))&&128==(192&kt)&&(tn=(15&je)<<12|(63&Ft)<<6|63&kt)>2047&&(tn<55296||tn>57343)&&(tt=tn);break;case 4:kt=xe[ge+2],qt=xe[ge+3],128==(192&(Ft=xe[ge+1]))&&128==(192&kt)&&128==(192&qt)&&(tn=(15&je)<<18|(63&Ft)<<12|(63&kt)<<6|63&qt)>65535&&tn<1114112&&(tt=tn)}null===tt?(tt=65533,ot=1):tt>65535&&(K.push((tt-=65536)>>>10&1023|55296),tt=56320|1023&tt),K.push(tt),ge+=ot}return function pe(xe){var q=xe.length;if(q<=4096)return String.fromCharCode.apply(String,xe);for(var D="",K=0;K<q;)D+=String.fromCharCode.apply(String,xe.slice(K,K+=4096));return D}(K)}function Le(xe,q,D){var K="";D=Math.min(xe.length,D);for(var ge=q;ge<D;++ge)K+=String.fromCharCode(127&xe[ge]);return K}function oe(xe,q,D){var K="";D=Math.min(xe.length,D);for(var ge=q;ge<D;++ge)K+=String.fromCharCode(xe[ge]);return K}function $e(xe,q,D){var K=xe.length;(!q||q<0)&&(q=0),(!D||D<0||D>K)&&(D=K);for(var ge="",je=q;je<D;++je)ge+=rt[xe[je]];return ge}function ct(xe,q,D){for(var K=xe.slice(q,D),ge="",je=0;je<K.length-1;je+=2)ge+=String.fromCharCode(K[je]+256*K[je+1]);return ge}function Ne(xe,q,D){if(xe%1!=0||xe<0)throw new RangeError("offset is not uint");if(xe+q>D)throw new RangeError("Trying to access beyond buffer length")}function Je(xe,q,D,K,ge,je){if(!m.isBuffer(xe))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>ge||q<je)throw new RangeError('"value" argument is out of bounds');if(D+K>xe.length)throw new RangeError("Index out of range")}function Ze(xe,q,D,K,ge,je){if(D+K>xe.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function mt(xe,q,D,K,ge){return q=+q,D>>>=0,ge||Ze(xe,0,D,4),o.write(xe,q,D,K,23,4),D+4}function nt(xe,q,D,K,ge){return q=+q,D>>>=0,ge||Ze(xe,0,D,8),o.write(xe,q,D,K,52,8),D+8}O.kMaxLength=L,!(m.TYPED_ARRAY_SUPPORT=function j(){try{var xe=new Uint8Array(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,Uint8Array.prototype),Object.setPrototypeOf(xe,q),42===xe.foo()}catch{return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(xe,q,D){return y(xe,q,D)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(xe,q,D){return function M(xe,q,D){return R(xe),xe<=0?d(xe):void 0!==q?"string"==typeof D?d(xe).fill(q,D):d(xe).fill(q):d(xe)}(xe,q,D)},m.allocUnsafe=function(xe){return z(xe)},m.allocUnsafeSlow=function(xe){return z(xe)},m.isBuffer=function(q){return null!=q&&!0===q._isBuffer&&q!==m.prototype},m.compare=function(q,D){if(de(q,Uint8Array)&&(q=m.from(q,q.offset,q.byteLength)),de(D,Uint8Array)&&(D=m.from(D,D.offset,D.byteLength)),!m.isBuffer(q)||!m.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===D)return 0;for(var K=q.length,ge=D.length,je=0,tt=Math.min(K,ge);je<tt;++je)if(q[je]!==D[je]){K=q[je],ge=D[je];break}return K<ge?-1:ge<K?1:0},m.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(q,D){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(0===q.length)return m.alloc(0);var K;if(void 0===D)for(D=0,K=0;K<q.length;++K)D+=q[K].length;var ge=m.allocUnsafe(D),je=0;for(K=0;K<q.length;++K){var tt=q[K];if(de(tt,Uint8Array))je+tt.length>ge.length?m.from(tt).copy(ge,je):Uint8Array.prototype.set.call(ge,tt,je);else{if(!m.isBuffer(tt))throw new TypeError('"list" argument must be an Array of Buffers');tt.copy(ge,je)}je+=tt.length}return ge},m.byteLength=G,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var q=this.length;if(q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<q;D+=2)ee(this,D,D+1);return this},m.prototype.swap32=function(){var q=this.length;if(q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<q;D+=4)ee(this,D,D+3),ee(this,D+1,D+2);return this},m.prototype.swap64=function(){var q=this.length;if(q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<q;D+=8)ee(this,D,D+7),ee(this,D+1,D+6),ee(this,D+2,D+5),ee(this,D+3,D+4);return this},m.prototype.toLocaleString=m.prototype.toString=function(){var q=this.length;return 0===q?"":0===arguments.length?A(this,0,q):$.apply(this,arguments)},m.prototype.equals=function(q){if(!m.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q||0===m.compare(this,q)},m.prototype.inspect=function(){var q="",D=O.INSPECT_MAX_BYTES;return q=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(q+=" ... "),"<Buffer "+q+">"},x&&(m.prototype[x]=m.prototype.inspect),m.prototype.compare=function(q,D,K,ge,je){if(de(q,Uint8Array)&&(q=m.from(q,q.offset,q.byteLength)),!m.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(void 0===D&&(D=0),void 0===K&&(K=q?q.length:0),void 0===ge&&(ge=0),void 0===je&&(je=this.length),D<0||K>q.length||ge<0||je>this.length)throw new RangeError("out of range index");if(ge>=je&&D>=K)return 0;if(ge>=je)return-1;if(D>=K)return 1;if(this===q)return 0;for(var tt=(je>>>=0)-(ge>>>=0),ot=(K>>>=0)-(D>>>=0),Ft=Math.min(tt,ot),kt=this.slice(ge,je),qt=q.slice(D,K),tn=0;tn<Ft;++tn)if(kt[tn]!==qt[tn]){tt=kt[tn],ot=qt[tn];break}return tt<ot?-1:ot<tt?1:0},m.prototype.includes=function(q,D,K){return-1!==this.indexOf(q,D,K)},m.prototype.indexOf=function(q,D,K){return _e(this,q,D,K,!0)},m.prototype.lastIndexOf=function(q,D,K){return _e(this,q,D,K,!1)},m.prototype.write=function(q,D,K,ge){if(void 0===D)ge="utf8",K=this.length,D=0;else if(void 0===K&&"string"==typeof D)ge=D,K=this.length,D=0;else{if(!isFinite(D))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");D>>>=0,isFinite(K)?(K>>>=0,void 0===ge&&(ge="utf8")):(ge=K,K=void 0)}var je=this.length-D;if((void 0===K||K>je)&&(K=je),q.length>0&&(K<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");ge||(ge="utf8");for(var tt=!1;;)switch(ge){case"hex":return me(this,q,D,K);case"utf8":case"utf-8":return v(this,q,D,K);case"ascii":case"latin1":case"binary":return T(this,q,D,K);case"base64":return _(this,q,D,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,q,D,K);default:if(tt)throw new TypeError("Unknown encoding: "+ge);ge=(""+ge).toLowerCase(),tt=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},m.prototype.slice=function(q,D){var K=this.length;(q=~~q)<0?(q+=K)<0&&(q=0):q>K&&(q=K),(D=void 0===D?K:~~D)<0?(D+=K)<0&&(D=0):D>K&&(D=K),D<q&&(D=q);var ge=this.subarray(q,D);return Object.setPrototypeOf(ge,m.prototype),ge},m.prototype.readUintLE=m.prototype.readUIntLE=function(q,D,K){q>>>=0,D>>>=0,K||Ne(q,D,this.length);for(var ge=this[q],je=1,tt=0;++tt<D&&(je*=256);)ge+=this[q+tt]*je;return ge},m.prototype.readUintBE=m.prototype.readUIntBE=function(q,D,K){q>>>=0,D>>>=0,K||Ne(q,D,this.length);for(var ge=this[q+--D],je=1;D>0&&(je*=256);)ge+=this[q+--D]*je;return ge},m.prototype.readUint8=m.prototype.readUInt8=function(q,D){return q>>>=0,D||Ne(q,1,this.length),this[q]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(q,D){return q>>>=0,D||Ne(q,2,this.length),this[q]|this[q+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(q,D){return q>>>=0,D||Ne(q,2,this.length),this[q]<<8|this[q+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(q,D){return q>>>=0,D||Ne(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+16777216*this[q+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(q,D){return q>>>=0,D||Ne(q,4,this.length),16777216*this[q]+(this[q+1]<<16|this[q+2]<<8|this[q+3])},m.prototype.readIntLE=function(q,D,K){q>>>=0,D>>>=0,K||Ne(q,D,this.length);for(var ge=this[q],je=1,tt=0;++tt<D&&(je*=256);)ge+=this[q+tt]*je;return ge>=(je*=128)&&(ge-=Math.pow(2,8*D)),ge},m.prototype.readIntBE=function(q,D,K){q>>>=0,D>>>=0,K||Ne(q,D,this.length);for(var ge=D,je=1,tt=this[q+--ge];ge>0&&(je*=256);)tt+=this[q+--ge]*je;return tt>=(je*=128)&&(tt-=Math.pow(2,8*D)),tt},m.prototype.readInt8=function(q,D){return q>>>=0,D||Ne(q,1,this.length),128&this[q]?-1*(255-this[q]+1):this[q]},m.prototype.readInt16LE=function(q,D){q>>>=0,D||Ne(q,2,this.length);var K=this[q]|this[q+1]<<8;return 32768&K?4294901760|K:K},m.prototype.readInt16BE=function(q,D){q>>>=0,D||Ne(q,2,this.length);var K=this[q+1]|this[q]<<8;return 32768&K?4294901760|K:K},m.prototype.readInt32LE=function(q,D){return q>>>=0,D||Ne(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},m.prototype.readInt32BE=function(q,D){return q>>>=0,D||Ne(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},m.prototype.readFloatLE=function(q,D){return q>>>=0,D||Ne(q,4,this.length),o.read(this,q,!0,23,4)},m.prototype.readFloatBE=function(q,D){return q>>>=0,D||Ne(q,4,this.length),o.read(this,q,!1,23,4)},m.prototype.readDoubleLE=function(q,D){return q>>>=0,D||Ne(q,8,this.length),o.read(this,q,!0,52,8)},m.prototype.readDoubleBE=function(q,D){return q>>>=0,D||Ne(q,8,this.length),o.read(this,q,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(q,D,K,ge){q=+q,D>>>=0,K>>>=0,ge||Je(this,q,D,K,Math.pow(2,8*K)-1,0);var tt=1,ot=0;for(this[D]=255&q;++ot<K&&(tt*=256);)this[D+ot]=q/tt&255;return D+K},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(q,D,K,ge){q=+q,D>>>=0,K>>>=0,ge||Je(this,q,D,K,Math.pow(2,8*K)-1,0);var tt=K-1,ot=1;for(this[D+tt]=255&q;--tt>=0&&(ot*=256);)this[D+tt]=q/ot&255;return D+K},m.prototype.writeUint8=m.prototype.writeUInt8=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,1,255,0),this[D]=255&q,D+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,2,65535,0),this[D]=255&q,this[D+1]=q>>>8,D+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,2,65535,0),this[D]=q>>>8,this[D+1]=255&q,D+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,4,4294967295,0),this[D+3]=q>>>24,this[D+2]=q>>>16,this[D+1]=q>>>8,this[D]=255&q,D+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,4,4294967295,0),this[D]=q>>>24,this[D+1]=q>>>16,this[D+2]=q>>>8,this[D+3]=255&q,D+4},m.prototype.writeIntLE=function(q,D,K,ge){if(q=+q,D>>>=0,!ge){var je=Math.pow(2,8*K-1);Je(this,q,D,K,je-1,-je)}var tt=0,ot=1,Ft=0;for(this[D]=255&q;++tt<K&&(ot*=256);)q<0&&0===Ft&&0!==this[D+tt-1]&&(Ft=1),this[D+tt]=(q/ot>>0)-Ft&255;return D+K},m.prototype.writeIntBE=function(q,D,K,ge){if(q=+q,D>>>=0,!ge){var je=Math.pow(2,8*K-1);Je(this,q,D,K,je-1,-je)}var tt=K-1,ot=1,Ft=0;for(this[D+tt]=255&q;--tt>=0&&(ot*=256);)q<0&&0===Ft&&0!==this[D+tt+1]&&(Ft=1),this[D+tt]=(q/ot>>0)-Ft&255;return D+K},m.prototype.writeInt8=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,1,127,-128),q<0&&(q=255+q+1),this[D]=255&q,D+1},m.prototype.writeInt16LE=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,2,32767,-32768),this[D]=255&q,this[D+1]=q>>>8,D+2},m.prototype.writeInt16BE=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,2,32767,-32768),this[D]=q>>>8,this[D+1]=255&q,D+2},m.prototype.writeInt32LE=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,4,2147483647,-2147483648),this[D]=255&q,this[D+1]=q>>>8,this[D+2]=q>>>16,this[D+3]=q>>>24,D+4},m.prototype.writeInt32BE=function(q,D,K){return q=+q,D>>>=0,K||Je(this,q,D,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[D]=q>>>24,this[D+1]=q>>>16,this[D+2]=q>>>8,this[D+3]=255&q,D+4},m.prototype.writeFloatLE=function(q,D,K){return mt(this,q,D,!0,K)},m.prototype.writeFloatBE=function(q,D,K){return mt(this,q,D,!1,K)},m.prototype.writeDoubleLE=function(q,D,K){return nt(this,q,D,!0,K)},m.prototype.writeDoubleBE=function(q,D,K){return nt(this,q,D,!1,K)},m.prototype.copy=function(q,D,K,ge){if(!m.isBuffer(q))throw new TypeError("argument should be a Buffer");if(K||(K=0),!ge&&0!==ge&&(ge=this.length),D>=q.length&&(D=q.length),D||(D=0),ge>0&&ge<K&&(ge=K),ge===K||0===q.length||0===this.length)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("sourceEnd out of bounds");ge>this.length&&(ge=this.length),q.length-D<ge-K&&(ge=q.length-D+K);var je=ge-K;return this===q&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(D,K,ge):Uint8Array.prototype.set.call(q,this.subarray(K,ge),D),je},m.prototype.fill=function(q,D,K,ge){if("string"==typeof q){if("string"==typeof D?(ge=D,D=0,K=this.length):"string"==typeof K&&(ge=K,K=this.length),void 0!==ge&&"string"!=typeof ge)throw new TypeError("encoding must be a string");if("string"==typeof ge&&!m.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);if(1===q.length){var je=q.charCodeAt(0);("utf8"===ge&&je<128||"latin1"===ge)&&(q=je)}}else"number"==typeof q?q&=255:"boolean"==typeof q&&(q=Number(q));if(D<0||this.length<D||this.length<K)throw new RangeError("Out of range index");if(K<=D)return this;var tt;if(D>>>=0,K=void 0===K?this.length:K>>>0,q||(q=0),"number"==typeof q)for(tt=D;tt<K;++tt)this[tt]=q;else{var ot=m.isBuffer(q)?q:m.from(q,ge),Ft=ot.length;if(0===Ft)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(tt=0;tt<K-D;++tt)this[tt+D]=ot[tt%Ft]}return this};var Ge=/[^+/0-9A-Za-z-_]/g;function fe(xe,q){q=q||1/0;for(var D,K=xe.length,ge=null,je=[],tt=0;tt<K;++tt){if((D=xe.charCodeAt(tt))>55295&&D<57344){if(!ge){if(D>56319){(q-=3)>-1&&je.push(239,191,189);continue}if(tt+1===K){(q-=3)>-1&&je.push(239,191,189);continue}ge=D;continue}if(D<56320){(q-=3)>-1&&je.push(239,191,189),ge=D;continue}D=65536+(ge-55296<<10|D-56320)}else ge&&(q-=3)>-1&&je.push(239,191,189);if(ge=null,D<128){if((q-=1)<0)break;je.push(D)}else if(D<2048){if((q-=2)<0)break;je.push(D>>6|192,63&D|128)}else if(D<65536){if((q-=3)<0)break;je.push(D>>12|224,D>>6&63|128,63&D|128)}else{if(!(D<1114112))throw new Error("Invalid code point");if((q-=4)<0)break;je.push(D>>18|240,D>>12&63|128,D>>6&63|128,63&D|128)}}return je}function De(xe){return k.toByteArray(function it(xe){if((xe=(xe=xe.split("=")[0]).trim().replace(Ge,"")).length<2)return"";for(;xe.length%4!=0;)xe+="=";return xe}(xe))}function Ve(xe,q,D,K){for(var ge=0;ge<K&&!(ge+D>=q.length||ge>=xe.length);++ge)q[ge+D]=xe[ge];return ge}function de(xe,q){return xe instanceof q||null!=xe&&null!=xe.constructor&&null!=xe.constructor.name&&xe.constructor.name===q.name}function ve(xe){return xe!=xe}var rt=function(){for(var xe="0123456789abcdef",q=new Array(256),D=0;D<16;++D)for(var K=16*D,ge=0;ge<16;++ge)q[K+ge]=xe[D]+xe[ge];return q}()},4263:(Ce,O,S)=>{var k=S(9903),o=S(3855),x=o(k("String.prototype.indexOf"));Ce.exports=function(j,d){var m=k(j,!!d);return"function"==typeof m&&x(j,".prototype.")>-1?o(m):m}},3855:(Ce,O,S)=>{var k=S(224),o=S(9903),x=o("%Function.prototype.apply%"),L=o("%Function.prototype.call%"),j=o("%Reflect.apply%",!0)||k.call(L,x),d=o("%Object.getOwnPropertyDescriptor%",!0),m=o("%Object.defineProperty%",!0),y=o("%Math.max%");if(m)try{m({},"a",{value:1})}catch{m=null}Ce.exports=function(z){var Y=j(k,L,arguments);if(d&&m){var X=d(Y,"length");X.configurable&&m(Y,"length",{value:1+y(0,z.length-(arguments.length-1))})}return Y};var R=function(){return j(k,x,arguments)};m?m(Ce.exports,"apply",{value:R}):Ce.exports.apply=R},1381:(Ce,O,S)=>{const k=S(9046),o=S(8220),x=S(3858);Ce.exports=function L(m,y){switch(o(m)){case"object":return function j(m,y){if("function"==typeof y)return y(m);if(y||x(m)){const R=new m.constructor;for(let M in m)R[M]=L(m[M],y);return R}return m}(m,y);case"array":return function d(m,y){const R=new m.constructor(m.length);for(let M=0;M<m.length;M++)R[M]=L(m[M],y);return R}(m,y);default:return k(m)}}},1562:function(Ce,O){var o;void 0!==(o=function(){return new function(){var L=this;L.init=function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.repeat=function(U){return new Array(1+U).join(this)}},L.init();var y=/\/\*[\s\S]*?\*\//g,R=/([^\:]+):([^\;]*);/,M=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,W=function(U){return void 0===U||0==U.length||null==U};L.toJSON=function(U,G){var $={children:{},attributes:{}},ee=null,_e=0;for(void 0===G&&(G={ordered:!1,comments:!1,stripComments:!1,split:!1}),G.stripComments&&(G.comments=!1,U=U.replace(y,""));null!=(ee=M.exec(U));)if(!W(ee[1])&&G.comments){var be=ee[1].trim();$[_e++]=be}else if(W(ee[2])){if(!W(ee[3]))return $;if(!W(ee[4])){var A=ee[4].trim(),ne=R.exec(A);if(ne){var me=ne[1].trim(),pe=ne[2].trim();if(G.ordered)(T={}).name=me,T.value=pe,T.type="attr",$[_e++]=T;else if(me in $.attributes){var Le=$.attributes[me];Le instanceof Array||($.attributes[me]=[Le]),$.attributes[me].push(pe)}else $.attributes[me]=pe}else $[_e++]=A}}else{me=ee[2].trim();var v=L.toJSON(U,G);if(G.ordered){var T;(T={}).name=me,T.value=v,T.type="rule",$[_e++]=T}else{if(G.split)var _=me.split(",");else _=[me];for(i in _){var E=_[i].trim();if(E in $.children)for(var N in v.attributes)$.children[E].attributes[N]=v.attributes[N];else $.children[E]=v}}}return $},L.toCSS=function(U,G,$){var ee="";if(void 0===G&&(G=0),void 0===$&&($=!1),U.attributes)for(i in U.attributes){var _e=U.attributes[i];if(_e instanceof Array)for(var be=0;be<_e.length;be++)ee+=J(i,_e[be],G);else ee+=J(i,_e,G)}if(U.children){var me=!0;for(i in U.children)$&&!me?ee+="\n":me=!1,ee+=le(i,U.children[i],G)}return ee};var J=function(U,G,$){return"\t".repeat($)+U+": "+G+";\n"},le=function(U,G,$){var ee="\t".repeat($)+U+" {\n";return(ee+=L.toCSS(G,$+1))+("\t".repeat($)+"}\n")}}}.apply(O,[]))&&(Ce.exports=o)},6929:function(Ce,O){!function(S){"use strict";var k="function"==typeof Symbol?Symbol("curriable placeholder"):60881;function x(d,m){var y="number"==typeof m?m:d.length,R=function o(d,m){return function y(R){return function(){var J,M=R.length,z=arguments,Y=z.length,X=[],Q=0,W=m;if(M)for(var le=-1;++le<M;)X[le]=J=R[le]===k&&Q<Y?z[Q++]:R[le],J!==k&&--W;if(Q<Y)for(;Q<Y;)X[X.length]=J=z[Q],J!==k&&Q<m&&--W,++Q;return W>0?y(X):d.apply(this,X)}}([])}(d,y);return R.arity=y,R.fn=d,R}function L(d){return d===k}function j(d){return d.fn}x.__=k,x.isPlaceholder=L,x.uncurry=j,S.__=k,S.curry=x,S.default=x,S.isPlaceholder=L,S.uncurry=j,Object.defineProperty(S,"__esModule",{value:!0})}(O)},3974:(Ce,O,S)=>{var k=Function.prototype.bind||S(9683);Ce.exports=function o(x,L){var j=function(){return 0===arguments.length?j:arguments.length>1?x.apply(L,arguments):k.call(x,L,arguments[0])};return j.uncurry=function(){return x},j}},2375:function(Ce){Ce.exports=function(){"use strict";const O=(M,z)=>z,S=(M,z)=>Object.assign({},z),k=(M,z)=>z.slice(),m={$push:(M,z)=>M.concat(z),$append:(M,z)=>M.concat(z),$prepend:(M,z)=>z.concat(M),$replace:function(M,z){let Y;return M=M.slice(),Object.keys(z).forEach(X=>{if(Y=Number.parseInt(X),Y<0||Number.isNaN(Y))throw Error(`Invalid index for $replace: ${X}`);M[Y]=R(M[Y],z[X])}),M},$insert:function(M,z){let Y;return M=M.slice(),Object.keys(z).forEach(X=>{if(Y=Number.parseInt(X),Number.isNaN(Y))throw Error(`Invalid index for $insert: ${X}`);M.splice(Y,0,z[X])}),M},$set:k},y={oo:function(M,z){return M=Object.assign({},M),Object.keys(z).forEach(Y=>M[Y]=R(M[Y],z[Y])),M},oa:S,ob:O,aa:function(M,z){return M=M.slice(),z.forEach((Y,X)=>M[X]=R(M[X],Y)),M},ao:function(M,z){const Y=Object.keys(z)[0];return Y in m?m[Y](M.slice(),z[Y]):z},ab:O,bb:O,bo:S,ba:k};function R(M,z){if(!z)return z;const Y=Array.isArray(M)?"a":"object"==typeof M?"o":"b",X=Array.isArray(z)?"a":"object"==typeof z?"o":"b";return y[Y+X](M,z)}return R}()},6607:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.default=O.nthElement=O.parentElements=void 0;var S=function(m){for(var y=[];m;){var R=m.nodeName.toLowerCase(),M=m.id?"#".concat(m.id):"",z="";m.className&&"string"==typeof m.className&&(z=".".concat(m.className.replace(/\s+/g,".").replace(/[:*+?^${}()|[\]\\]/gi,"\\$&"))),y.unshift({element:m,selector:R+M+z}),m=m.parentNode!==document&&m.parentNode}return y};O.parentElements=S;var k=function(m){for(var y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],R=m,M=1;null!==R.previousElementSibling;)(!y||R.previousElementSibling.nodeName===m.nodeName)&&M++,R=R.previousElementSibling;return M};O.nthElement=k;O.default=function(m){if(!(m instanceof HTMLElement))throw new Error("element must be of type `HTMLElement`.");return function(m){var y=[];return m.forEach(function(R){(function(m,y){var R=""===y?m:"".concat(y," > ").concat(m);return document.querySelectorAll(R).length>1})(R.selector,y.join(" > "))&&(R.selector+=":nth-of-type(".concat(k(R.element),")")),y.push(R.selector)}),y.join(" > ")}(S(m))}},1934:Ce=>{var O=Object.prototype.toString;function x(L){return L.replace(/\uffff/g,".")}Ce.exports=function S(L){for(var j=-1,d=function o(L){for(var j=-1,d=L.length,m=[];++j<d;)L[j]&&m.push(L[j]);return m}(function k(L){return("[object String]"===O.call(L)?L:"").replace(/\\\./g,"\uffff")}(L).split(".")),m=d.length,y=[];++j<m;)y.push(x(d[j]));return y}},3358:Ce=>{var k,O="object"==typeof Reflect?Reflect:null,S=O&&"function"==typeof O.apply?O.apply:function($,ee,_e){return Function.prototype.apply.call($,ee,_e)};k=O&&"function"==typeof O.ownKeys?O.ownKeys:Object.getOwnPropertySymbols?function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:function($){return Object.getOwnPropertyNames($)};var x=Number.isNaN||function($){return $!=$};function L(){L.init.call(this)}Ce.exports=L,Ce.exports.once=function J(G,$){return new Promise(function(ee,_e){function be(v){G.removeListener($,me),_e(v)}function me(){"function"==typeof G.removeListener&&G.removeListener("error",be),ee([].slice.call(arguments))}U(G,$,me,{once:!0}),"error"!==$&&function le(G,$,ee){"function"==typeof G.on&&U(G,"error",$,ee)}(G,be,{once:!0})})},L.EventEmitter=L,L.prototype._events=void 0,L.prototype._eventsCount=0,L.prototype._maxListeners=void 0;var j=10;function d(G){if("function"!=typeof G)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof G)}function m(G){return void 0===G._maxListeners?L.defaultMaxListeners:G._maxListeners}function y(G,$,ee,_e){var be,me,v;if(d(ee),void 0===(me=G._events)?(me=G._events=Object.create(null),G._eventsCount=0):(void 0!==me.newListener&&(G.emit("newListener",$,ee.listener?ee.listener:ee),me=G._events),v=me[$]),void 0===v)v=me[$]=ee,++G._eventsCount;else if("function"==typeof v?v=me[$]=_e?[ee,v]:[v,ee]:_e?v.unshift(ee):v.push(ee),(be=m(G))>0&&v.length>be&&!v.warned){v.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=G,T.type=$,T.count=v.length,function o(G){console&&console.warn&&console.warn(G)}(T)}return G}function R(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(G,$,ee){var _e={fired:!1,wrapFn:void 0,target:G,type:$,listener:ee},be=R.bind(_e);return be.listener=ee,_e.wrapFn=be,be}function z(G,$,ee){var _e=G._events;if(void 0===_e)return[];var be=_e[$];return void 0===be?[]:"function"==typeof be?ee?[be.listener||be]:[be]:ee?function W(G){for(var $=new Array(G.length),ee=0;ee<$.length;++ee)$[ee]=G[ee].listener||G[ee];return $}(be):X(be,be.length)}function Y(G){var $=this._events;if(void 0!==$){var ee=$[G];if("function"==typeof ee)return 1;if(void 0!==ee)return ee.length}return 0}function X(G,$){for(var ee=new Array($),_e=0;_e<$;++_e)ee[_e]=G[_e];return ee}function U(G,$,ee,_e){if("function"==typeof G.on)_e.once?G.once($,ee):G.on($,ee);else{if("function"!=typeof G.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof G);G.addEventListener($,function be(me){_e.once&&G.removeEventListener($,be),ee(me)})}}Object.defineProperty(L,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(G){if("number"!=typeof G||G<0||x(G))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+G+".");j=G}}),L.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function($){if("number"!=typeof $||$<0||x($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this},L.prototype.getMaxListeners=function(){return m(this)},L.prototype.emit=function($){for(var ee=[],_e=1;_e<arguments.length;_e++)ee.push(arguments[_e]);var be="error"===$,me=this._events;if(void 0!==me)be=be&&void 0===me.error;else if(!be)return!1;if(be){var v;if(ee.length>0&&(v=ee[0]),v instanceof Error)throw v;var T=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw T.context=v,T}var _=me[$];if(void 0===_)return!1;if("function"==typeof _)S(_,this,ee);else{var E=_.length,N=X(_,E);for(_e=0;_e<E;++_e)S(N[_e],this,ee)}return!0},L.prototype.on=L.prototype.addListener=function($,ee){return y(this,$,ee,!1)},L.prototype.prependListener=function($,ee){return y(this,$,ee,!0)},L.prototype.once=function($,ee){return d(ee),this.on($,M(this,$,ee)),this},L.prototype.prependOnceListener=function($,ee){return d(ee),this.prependListener($,M(this,$,ee)),this},L.prototype.off=L.prototype.removeListener=function($,ee){var _e,be,me,v,T;if(d(ee),void 0===(be=this._events))return this;if(void 0===(_e=be[$]))return this;if(_e===ee||_e.listener===ee)0==--this._eventsCount?this._events=Object.create(null):(delete be[$],be.removeListener&&this.emit("removeListener",$,_e.listener||ee));else if("function"!=typeof _e){for(me=-1,v=_e.length-1;v>=0;v--)if(_e[v]===ee||_e[v].listener===ee){T=_e[v].listener,me=v;break}if(me<0)return this;0===me?_e.shift():function Q(G,$){for(;$+1<G.length;$++)G[$]=G[$+1];G.pop()}(_e,me),1===_e.length&&(be[$]=_e[0]),void 0!==be.removeListener&&this.emit("removeListener",$,T||ee)}return this},L.prototype.removeAllListeners=function($){var ee,_e,be;if(void 0===(_e=this._events))return this;if(void 0===_e.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==_e[$]&&(0==--this._eventsCount?this._events=Object.create(null):delete _e[$]),this;if(0===arguments.length){var v,me=Object.keys(_e);for(be=0;be<me.length;++be)"removeListener"!==(v=me[be])&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ee=_e[$]))this.removeListener($,ee);else if(void 0!==ee)for(be=ee.length-1;be>=0;be--)this.removeListener($,ee[be]);return this},L.prototype.listeners=function($){return z(this,$,!0)},L.prototype.rawListeners=function($){return z(this,$,!1)},L.listenerCount=function(G,$){return"function"==typeof G.listenerCount?G.listenerCount($):Y.call(G,$)},L.prototype.listenerCount=Y,L.prototype.eventNames=function(){return this._eventsCount>0?k(this._events):[]}},9683:Ce=>{Ce.exports=function(O){var k,S=this;if(arguments.length<2)k=function(){if(this instanceof k){var L=S.apply(this,arguments);return Object(L)===L?L:this}return S.apply(O,arguments)};else{for(var o=new Array(arguments.length-1),x=1;x<arguments.length;x++)o[x-1]=arguments[x];k=function(){var d,L=o.length,j=new Array(L+arguments.length);for(d=0;d<L;d++)j[d]=o[d];for(d=0;d<arguments.length;d++)j[L+d]=arguments[d];if(this instanceof k){var m=S.apply(this,j);return Object(m)===m?m:this}return S.apply(O,j)}}return k.prototype=S.prototype,k}},2199:Ce=>{var O="Function.prototype.bind called on incompatible ",S=Array.prototype.slice,k=Object.prototype.toString,o="[object Function]";Ce.exports=function(L){var j=this;if("function"!=typeof j||k.call(j)!==o)throw new TypeError(O+j);for(var m,d=S.call(arguments,1),y=function(){if(this instanceof m){var X=j.apply(this,d.concat(S.call(arguments)));return Object(X)===X?X:this}return j.apply(L,d.concat(S.call(arguments)))},R=Math.max(0,j.length-d.length),M=[],z=0;z<R;z++)M.push("$"+z);if(m=Function("binder","return function ("+M.join(",")+"){ return binder.apply(this,arguments); }")(y),j.prototype){var Y=function(){};Y.prototype=j.prototype,m.prototype=new Y,Y.prototype=null}return m}},224:(Ce,O,S)=>{var k=S(2199);Ce.exports=Function.prototype.bind||k},9903:(Ce,O,S)=>{var k,o=SyntaxError,x=Function,L=TypeError,j=function(T){try{return x('"use strict"; return ('+T+").constructor;")()}catch{}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch{d=null}var m=function(){throw new L},y=d?function(){try{return m}catch{try{return d(arguments,"callee").get}catch{return m}}}():m,R=S(524)(),M=Object.getPrototypeOf||function(T){return T.__proto__},z={},Y="undefined"==typeof Uint8Array?k:M(Uint8Array),X={"%AggregateError%":"undefined"==typeof AggregateError?k:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?k:ArrayBuffer,"%ArrayIteratorPrototype%":R?M([][Symbol.iterator]()):k,"%AsyncFromSyncIteratorPrototype%":k,"%AsyncFunction%":z,"%AsyncGenerator%":z,"%AsyncGeneratorFunction%":z,"%AsyncIteratorPrototype%":z,"%Atomics%":"undefined"==typeof Atomics?k:Atomics,"%BigInt%":"undefined"==typeof BigInt?k:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?k:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?k:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?k:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?k:FinalizationRegistry,"%Function%":x,"%GeneratorFunction%":z,"%Int8Array%":"undefined"==typeof Int8Array?k:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?k:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?k:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":R?M(M([][Symbol.iterator]())):k,"%JSON%":"object"==typeof JSON?JSON:k,"%Map%":"undefined"==typeof Map?k:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&R?M((new Map)[Symbol.iterator]()):k,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?k:Promise,"%Proxy%":"undefined"==typeof Proxy?k:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?k:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?k:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&R?M((new Set)[Symbol.iterator]()):k,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?k:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":R?M(""[Symbol.iterator]()):k,"%Symbol%":R?Symbol:k,"%SyntaxError%":o,"%ThrowTypeError%":y,"%TypedArray%":Y,"%TypeError%":L,"%Uint8Array%":"undefined"==typeof Uint8Array?k:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?k:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?k:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?k:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?k:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?k:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?k:WeakSet},Q=function T(_){var E;if("%AsyncFunction%"===_)E=j("async function () {}");else if("%GeneratorFunction%"===_)E=j("function* () {}");else if("%AsyncGeneratorFunction%"===_)E=j("async function* () {}");else if("%AsyncGenerator%"===_){var N=T("%AsyncGeneratorFunction%");N&&(E=N.prototype)}else if("%AsyncIteratorPrototype%"===_){var A=T("%AsyncGenerator%");A&&(E=M(A.prototype))}return X[_]=E,E},W={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},J=S(224),le=S(4031),U=J.call(Function.call,Array.prototype.concat),G=J.call(Function.apply,Array.prototype.splice),$=J.call(Function.call,String.prototype.replace),ee=J.call(Function.call,String.prototype.slice),_e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,be=/\\(\\)?/g,me=function(_){var E=ee(_,0,1),N=ee(_,-1);if("%"===E&&"%"!==N)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===N&&"%"!==E)throw new o("invalid intrinsic syntax, expected opening `%`");var A=[];return $(_,_e,function(ne,pe,Le,oe){A[A.length]=Le?$(oe,be,"$1"):pe||ne}),A},v=function(_,E){var A,N=_;if(le(W,N)&&(N="%"+(A=W[N])[0]+"%"),le(X,N)){var ne=X[N];if(ne===z&&(ne=Q(N)),void 0===ne&&!E)throw new L("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:A,name:N,value:ne}}throw new o("intrinsic "+_+" does not exist!")};Ce.exports=function(_,E){if("string"!=typeof _||0===_.length)throw new L("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof E)throw new L('"allowMissing" argument must be a boolean');var N=me(_),A=N.length>0?N[0]:"",ne=v("%"+A+"%",E),pe=ne.name,Le=ne.value,oe=!1,$e=ne.alias;$e&&(A=$e[0],G(N,U([0,1],$e)));for(var ct=1,Ne=!0;ct<N.length;ct+=1){var Je=N[ct],Ze=ee(Je,0,1),mt=ee(Je,-1);if(('"'===Ze||"'"===Ze||"`"===Ze||'"'===mt||"'"===mt||"`"===mt)&&Ze!==mt)throw new o("property names with quotes must have matching quotes");if(("constructor"===Je||!Ne)&&(oe=!0),le(X,pe="%"+(A+="."+Je)+"%"))Le=X[pe];else if(null!=Le){if(!(Je in Le)){if(!E)throw new L("base intrinsic for "+_+" exists, but the property is not available.");return}if(d&&ct+1>=N.length){var nt=d(Le,Je);Le=(Ne=!!nt)&&"get"in nt&&!("originalValue"in nt.get)?nt.get:Le[Je]}else Ne=le(Le,Je),Le=Le[Je];Ne&&!oe&&(X[pe]=Le)}}return Le}},524:(Ce,O,S)=>{var k="undefined"!=typeof Symbol&&Symbol,o=S(6858);Ce.exports=function(){return"function"==typeof k&&"function"==typeof Symbol&&"symbol"==typeof k("foo")&&"symbol"==typeof Symbol("bar")&&o()}},6858:Ce=>{Ce.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var S={},k=Symbol("test"),o=Object(k);if("string"==typeof k||"[object Symbol]"!==Object.prototype.toString.call(k)||"[object Symbol]"!==Object.prototype.toString.call(o))return!1;for(k in S[k]=42,S)return!1;if("function"==typeof Object.keys&&0!==Object.keys(S).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(S).length)return!1;var L=Object.getOwnPropertySymbols(S);if(1!==L.length||L[0]!==k||!Object.prototype.propertyIsEnumerable.call(S,k))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var j=Object.getOwnPropertyDescriptor(S,k);if(42!==j.value||!0!==j.enumerable)return!1}return!0}},4031:(Ce,O,S)=>{var k=S(224);Ce.exports=k.call(Function.call,Object.prototype.hasOwnProperty)},8288:(Ce,O,S)=>{S.r(O),S.d(O,{default:()=>mt,hash:()=>Ze});var o,x,L,j,k=S(6929),d="undefined"!=typeof Buffer&&"function"==typeof Buffer.from,m="function"==typeof Uint16Array,y=/\[object (HTML(.*)Element)\]/,R=/\[object (SVG(.*)Element)\]/,z=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"].reduce(function(nt,Ge){return nt["[object "+Ge+"]"]=Ge,nt},{}),Y=Object.keys(z).reduce(function(nt,Ge){return nt[z[Ge].toUpperCase()]=Ge,nt},{}),X={"[object Map]":!0,"[object Set]":!0},Q={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},W=((o={})[Y.ARGUMENTS]=!0,o[Y.ARRAY]=!0,o),J=((x={})[Y.REGEXP]=!0,x[Y.SYMBOL]=!0,x),le=((L={})[Y.FLOAT32ARRAY]=!0,L[Y.FLOAT64ARRAY]=!0,L[Y.INT8ARRAY]=!0,L[Y.INT16ARRAY]=!0,L[Y.INT32ARRAY]=!0,L[Y.UINT8ARRAY]=!0,L[Y.UINT8CLAMPEDARRAY]=!0,L[Y.UINT16ARRAY]=!0,L[Y.UINT32ARRAY]=!0,L),U=((j={})[Y.GENERATOR]=!0,j[Y.PROMISE]=!0,j[Y.WEAKMAP]=!0,j[Y.WEAKSET]=!0,j),G=/^\s*function\s*([^(]*)/i,$=Object.prototype.toString,ee=Object.keys;function v(nt,Ge){return nt>Ge}function T(nt,Ge){return nt[0]>Ge[0]}function _(nt,Ge){for(var it,fe,te=0;te<nt.length;++te){for(fe=nt[te],it=te-1;~it&&Ge(nt[it],fe);--it)nt[it+1]=nt[it];nt[it+1]=fe}return nt}var Le=d?function ne(nt){return Buffer.from(nt).toString("utf8")}:m?function A(nt){return String.fromCharCode.apply(null,new Uint16Array(nt))}:function pe(){return""};function $e(nt,Ge){for(var it=0;it<nt.length;++it)if(nt[it]===Ge)return it+1;return 0}function ct(nt,Ge,it,fe){if(void 0===fe){var te=typeof nt;if("string"===te||Q[te])return te+"|"+nt;if(null===nt)return"null|"+nt}var se=fe||$.call(nt);return W[se]?nt:se===Y.OBJECT?function N(nt){for(var fe,Ge=_(ee(nt),v),it={},te=0;te<Ge.length;++te)it[fe=Ge[te]]=nt[fe];return it}(nt):J[se]?z[se]+"|"+nt.toString():X[se]?function E(nt,Ge,it){var fe="function"==typeof nt.get,te=[];fe?(nt.forEach(function(ve,rt){te.push([Je(rt,Ge,it),Je(ve,Ge,it)])}),_(te,T)):(nt.forEach(function(ve){te.push(Je(ve,Ge,it))}),_(te,v));for(var de,se=function _e(nt){return nt.name||(nt.toString().match(G)||[])[1]||"anonymous"}(nt.constructor)+"|[",De=0,Ve=te.length;De<Ve;++De)de=te[De],se+=(De?",":"")+(fe?"["+de[0]+","+de[1]+"]":de);return se+"]"}(nt,Ge,it):se===Y.DATE?z[se]+"|"+nt.getTime():se===Y.ERROR?z[se]+"|"+nt.stack:se===Y.EVENT?function me(nt){return{bubbles:nt.bubbles,cancelBubble:nt.cancelBubble,cancelable:nt.cancelable,composed:nt.composed,currentTarget:nt.currentTarget,defaultPrevented:nt.defaultPrevented,eventPhase:nt.eventPhase,isTrusted:nt.isTrusted,returnValue:nt.returnValue,target:nt.target,type:nt.type}}(nt):U[se]?z[se]+"|NOT_ENUMERABLE":y.test(se)||R.test(se)?se.slice(8,-1)+"|"+nt.outerHTML:se===Y.DOCUMENTFRAGMENT?z[se]+"|"+function oe(nt){for(var Ge=nt.children,it="",fe=0;fe<Ge.length;++fe)it+=Ge[fe].outerHTML;return it}(nt):le[se]?z[se]+"|"+nt.join(","):se===Y.ARRAYBUFFER?z[se]+"|"+Le(nt):se===Y.DATAVIEW?z[se]+"|"+Le(nt.buffer):nt}function Je(nt,Ge,it){if(!nt||"object"!=typeof nt)return ct(nt,Ge,it);var fe=$.call(nt);return fe===Y.DATE||fe===Y.REGEXP?ct(nt,Ge,it,fe):JSON.stringify(nt,function Ne(nt,Ge){return void 0===nt&&(nt=[]),void 0===Ge&&(Ge=[]),function(it,fe){if("object"==typeof fe)if(nt.length){var te=$e(nt,this);0===te?nt.push(this):(nt.splice(te),Ge.splice(te)),Ge.push(it);var se=$e(nt,fe);if(0!==se)return"[~"+(Ge.slice(0,se).join(".")||".")+"]";nt.push(fe)}else nt[0]=fe,Ge[0]=it;return it&&this[it]instanceof Date?ct(this[it],nt,Ge,Y.DATE):ct(fe,nt,Ge)}}(Ge,it))}function Ze(nt){return function be(nt){for(var te,Ge=nt.length,it=5381,fe=52711;Ge--;)it=33*it^(te=nt.charCodeAt(Ge)),fe=33*fe^te;return 4096*(it>>>0)+(fe>>>0)}(Je(nt))}(Ze.is=(0,k.curry)(function(nt,Ge){return Ze(nt)===Ze(Ge)})).all=(0,k.curry)(function(nt){for(var Ge=Ze.is(nt),it=1;it<arguments.length;++it)if(!Ge(arguments[it]))return!1;return!0},2),Ze.is.any=(0,k.curry)(function(nt){for(var Ge=Ze.is(nt),it=1;it<arguments.length;it++)if(Ge(arguments[it]))return!0;return!1},2),Ze.is.not=(0,k.curry)(function(nt,Ge){return Ze(nt)!==Ze(Ge)});const mt=Ze},4920:(Ce,O)=>{O.read=function(S,k,o,x,L){var j,d,m=8*L-x-1,y=(1<<m)-1,R=y>>1,M=-7,z=o?L-1:0,Y=o?-1:1,X=S[k+z];for(z+=Y,j=X&(1<<-M)-1,X>>=-M,M+=m;M>0;j=256*j+S[k+z],z+=Y,M-=8);for(d=j&(1<<-M)-1,j>>=-M,M+=x;M>0;d=256*d+S[k+z],z+=Y,M-=8);if(0===j)j=1-R;else{if(j===y)return d?NaN:1/0*(X?-1:1);d+=Math.pow(2,x),j-=R}return(X?-1:1)*d*Math.pow(2,j-x)},O.write=function(S,k,o,x,L,j){var d,m,y,R=8*j-L-1,M=(1<<R)-1,z=M>>1,Y=23===L?Math.pow(2,-24)-Math.pow(2,-77):0,X=x?0:j-1,Q=x?1:-1,W=k<0||0===k&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(m=isNaN(k)?1:0,d=M):(d=Math.floor(Math.log(k)/Math.LN2),k*(y=Math.pow(2,-d))<1&&(d--,y*=2),(k+=d+z>=1?Y/y:Y*Math.pow(2,1-z))*y>=2&&(d++,y/=2),d+z>=M?(m=0,d=M):d+z>=1?(m=(k*y-1)*Math.pow(2,L),d+=z):(m=k*Math.pow(2,z-1)*Math.pow(2,L),d=0));L>=8;S[o+X]=255&m,X+=Q,m/=256,L-=8);for(d=d<<L|m,R+=L;R>0;S[o+X]=255&d,X+=Q,d/=256,R-=8);S[o+X-Q]|=128*W}},5035:Ce=>{Ce.exports="function"==typeof Object.create?function(S,k){k&&(S.super_=k,S.prototype=Object.create(k.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}))}:function(S,k){if(k){S.super_=k;var o=function(){};o.prototype=k.prototype,S.prototype=new o,S.prototype.constructor=S}}},3858:(Ce,O,S)=>{var k=S(9848);function o(x){return!0===k(x)&&"[object Object]"===Object.prototype.toString.call(x)}Ce.exports=function(L){var j,d;return!(!1===o(L)||(j=L.constructor,"function"!=typeof j)||(d=j.prototype,!1===o(d))||!1===d.hasOwnProperty("isPrototypeOf"))}},9848:Ce=>{Ce.exports=function(S){return null!=S&&"object"==typeof S&&!1===Array.isArray(S)}},7478:(Ce,O,S)=>{var k,o,x;void 0!==(o="function"==typeof(k=x=function(){function x(){for(var d=0,m={};d<arguments.length;d++){var y=arguments[d];for(var R in y)m[R]=y[R]}return m}function L(d){return d.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function j(d){function m(){}function y(M,z,Y){if("undefined"!=typeof document){"number"==typeof(Y=x({path:"/"},m.defaults,Y)).expires&&(Y.expires=new Date(1*new Date+864e5*Y.expires)),Y.expires=Y.expires?Y.expires.toUTCString():"";try{var X=JSON.stringify(z);/^[\{\[]/.test(X)&&(z=X)}catch{}z=d.write?d.write(z,M):encodeURIComponent(String(z)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),M=encodeURIComponent(String(M)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var Q="";for(var W in Y)!Y[W]||(Q+="; "+W,!0!==Y[W]&&(Q+="="+Y[W].split(";")[0]));return document.cookie=M+"="+z+Q}}function R(M,z){if("undefined"!=typeof document){for(var Y={},X=document.cookie?document.cookie.split("; "):[],Q=0;Q<X.length;Q++){var W=X[Q].split("="),J=W.slice(1).join("=");!z&&'"'===J.charAt(0)&&(J=J.slice(1,-1));try{var le=L(W[0]);if(J=(d.read||d)(J,le)||L(J),z)try{J=JSON.parse(J)}catch{}if(Y[le]=J,M===le)break}catch{}}return M?Y[M]:Y}}return m.set=y,m.get=function(M){return R(M,!1)},m.getJSON=function(M){return R(M,!0)},m.remove=function(M,z){y(M,"",x(z,{expires:-1}))},m.defaults={},m.withConverter=j,m}(function(){})})?k.call(O,S,O,Ce):k)&&(Ce.exports=o),Ce.exports=x()},3909:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0});var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},o=function(){function Q(W,J){for(var le=0;le<J.length;le++){var U=J[le];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(W,U.key,U)}}return function(W,J,le){return J&&Q(W.prototype,J),le&&Q(W,le),W}}(),L=z(S(1035)),j=S(9492),m=z(S(7416)),y=S(4567),M=z(S(7726));function z(Q){return Q&&Q.__esModule?Q:{default:Q}}function Y(Q,W){if(!(Q instanceof W))throw new TypeError("Cannot call a class as a function")}var X=function(){function Q(W){var J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},le=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var U in Y(this,Q),this.factMap=new Map(W),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(le.allowUndefinedFacts),J){var G=void 0;G=J[U]instanceof L.default?J[U]:new L.default(U,J[U]),this._addConstantFact(G),(0,m.default)("almanac::constructor initialized runtime fact:"+G.id+" with "+G.value+"<"+k(G.value)+">")}}return o(Q,[{key:"_getFact",value:function(J){return this.factMap.get(J)}},{key:"_addConstantFact",value:function(J){this.factMap.set(J.id,J),this._setFactValue(J,{},J.value)}},{key:"_setFactValue",value:function(J,le,U){var G=J.getCacheKey(le),$=Promise.resolve(U);return G&&this.factResultsCache.set(G,$),$}},{key:"addRuntimeFact",value:function(J,le){(0,m.default)("almanac::addRuntimeFact id:"+J);var U=new L.default(J,le);return this._addConstantFact(U)}},{key:"factValue",value:function(J){var le=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",G=void 0,$=this._getFact(J);if(void 0===$)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new j.UndefinedFactError("Undefined fact: "+J));if($.isConstant())G=Promise.resolve($.calculate(le,this));else{var ee=$.getCacheKey(le),_e=ee&&this.factResultsCache.get(ee);_e?(G=Promise.resolve(_e),(0,m.default)("almanac::factValue cache hit for fact:"+J)):((0,m.default)("almanac::factValue cache miss for fact:"+J+"; calculating"),G=this._setFactValue($,le,$.calculate(le,this)))}if(U){if("string"==typeof U&&U.startsWith("$"))return(0,m.default)("condition::evaluate extracting object property "+U),G.then(function(me){if((0,M.default)(me)){var v=(0,y.JSONPath)({path:U,json:me,wrap:!1});return(0,m.default)("condition::evaluate extracting object property "+U+", received: "+v),v}return(0,m.default)("condition::evaluate could not compute object path("+U+") of non-object: "+me+" <"+(void 0===me?"undefined":k(me))+">; continuing with "+me),me});var be=void 0;try{be=S(7559)}catch{throw console.error('Oops! Looks like you\'re trying to use the deprecated syntax for the ".path" property.'),console.error('Please convert your "path" properties to JsonPath syntax (ensure your path starts with "$")'),console.error('Alternatively, if you wish to continue using old syntax (provided by selectn), you may "npm install selectn" as a direct dependency.'),console.error("See https://github.com/CacheControl/json-rules-engine/blob/master/CHANGELOG.md#500--2019-10-27 for more information."),new Error('json-rules-engine: Unmet peer dependency "selectn" required for use of deprecated ".path" syntax. please "npm install selectn" or convert to json-path syntax')}return G.then(function(me){if((0,M.default)(me)){var v=be(U)(me);return(0,m.default)("condition::evaluate extracting object property "+U+", received: "+v),v}return(0,m.default)("condition::evaluate could not compute object path("+U+") of non-object: "+me+" <"+(void 0===me?"undefined":k(me))+">; continuing with "+me),me})}return G}}]),Q}();O.default=X},7396:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0});var k=function(){function R(M,z){for(var Y=0;Y<z.length;Y++){var X=z[Y];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(M,X.key,X)}}return function(M,z,Y){return z&&R(M.prototype,z),Y&&R(M,Y),M}}(),x=d(S(7416)),j=d(S(7726));function d(R){return R&&R.__esModule?R:{default:R}}var y=function(){function R(M){if(function m(R,M){if(!(R instanceof M))throw new TypeError("Cannot call a class as a function")}(this,R),!M)throw new Error("Condition: constructor options required");var z=R.booleanOperator(M);if(Object.assign(this,M),z){var Y=M[z];if(!Array.isArray(Y))throw new Error('"'+z+'" must be an array');this.operator=z,this.priority=parseInt(M.priority,10)||1,this[z]=Y.map(function(X){return new R(X)})}else{if(!Object.prototype.hasOwnProperty.call(M,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(M,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(M,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(M,"priority")&&(M.priority=parseInt(M.priority,10))}}return k(R,[{key:"toJSON",value:function(){var z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],Y={};this.priority&&(Y.priority=this.priority);var X=R.booleanOperator(this);return X?Y[X]=this[X].map(function(Q){return Q.toJSON(z)}):(Y.operator=this.operator,Y.value=this.value,Y.fact=this.fact,void 0!==this.factResult&&(Y.factResult=this.factResult),void 0!==this.result&&(Y.result=this.result),this.params&&(Y.params=this.params),this.path&&(Y.path=this.path)),z?JSON.stringify(Y):Y}},{key:"_getValue",value:function(z){var Y=this.value;return(0,j.default)(Y)&&Object.prototype.hasOwnProperty.call(Y,"fact")?z.factValue(Y.fact,Y.params,Y.path):Promise.resolve(Y)}},{key:"evaluate",value:function(z,Y){var X=this;if(!z)return Promise.reject(new Error("almanac required"));if(!Y)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var Q=Y.get(this.operator);return Q?this._getValue(z).then(function(W){return z.factValue(X.fact,X.params,X.path).then(function(J){var le=Q.evaluate(J,W);return(0,x.default)("condition::evaluate <"+J+" "+X.operator+" "+W+"?> ("+le+")"),{result:le,leftHandSideValue:J,rightHandSideValue:W,operator:X.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return R.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==R.booleanOperator(this)}}],[{key:"booleanOperator",value:function(z){return Object.prototype.hasOwnProperty.call(z,"any")?"any":Object.prototype.hasOwnProperty.call(z,"all")?"all":void 0}}]),R}();O.default=y},7416:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.default=function S(k){try{("undefined"!=typeof process&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||"undefined"!=typeof window&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(k)}catch{}}},4934:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0});var o=function x(d){return d&&d.__esModule?d:{default:d}}(S(8640)),L=[];function j(d){return"NaN"!==Number.parseFloat(d).toString()}L.push(new o.default("equal",function(d,m){return d===m})),L.push(new o.default("notEqual",function(d,m){return d!==m})),L.push(new o.default("in",function(d,m){return m.indexOf(d)>-1})),L.push(new o.default("notIn",function(d,m){return-1===m.indexOf(d)})),L.push(new o.default("contains",function(d,m){return d.indexOf(m)>-1},Array.isArray)),L.push(new o.default("doesNotContain",function(d,m){return-1===d.indexOf(m)},Array.isArray)),L.push(new o.default("lessThan",function(d,m){return d<m},j)),L.push(new o.default("lessThanInclusive",function(d,m){return d<=m},j)),L.push(new o.default("greaterThan",function(d,m){return d>m},j)),L.push(new o.default("greaterThanInclusive",function(d,m){return d>=m},j)),O.default=L},4307:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.SuccessEventFact=function(){var o=[];return function(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x.event&&o.push(x.event),o}}},7386:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.FINISHED=O.RUNNING=O.READY=void 0;var k=function(){function me(v,T){for(var _=0;_<T.length;_++){var E=T[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(v,E.key,E)}}return function(v,T,_){return T&&me(v.prototype,T),_&&me(v,_),v}}(),x=J(S(1035)),j=J(S(8847)),m=J(S(8640)),R=J(S(3909)),M=S(3358),z=S(4307),X=J(S(4934)),W=J(S(7416));function J(me){return me&&me.__esModule?me:{default:me}}function le(me,v){if(!(me instanceof v))throw new TypeError("Cannot call a class as a function")}function U(me,v){if(!me)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||"object"!=typeof v&&"function"!=typeof v?me:v}var $=O.READY="READY",ee=O.RUNNING="RUNNING",_e=O.FINISHED="FINISHED",be=function(me){function v(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};le(this,v);var E=U(this,(v.__proto__||Object.getPrototypeOf(v)).call(this));return E.rules=[],E.allowUndefinedFacts=_.allowUndefinedFacts||!1,E.operators=new Map,E.facts=new Map,E.status=$,T.map(function(N){return E.addRule(N)}),X.default.map(function(N){return E.addOperator(N)}),E}return function G(me,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);me.prototype=Object.create(v&&v.prototype,{constructor:{value:me,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(me,v):me.__proto__=v)}(v,me),k(v,[{key:"addRule",value:function(_){if(!_)throw new Error("Engine: addRule() requires options");if(!Object.prototype.hasOwnProperty.call(_,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!Object.prototype.hasOwnProperty.call(_,"event"))throw new Error('Engine: addRule() argument requires "event" property');var E=void 0;return(E=_ instanceof j.default?_:new j.default(_)).setEngine(this),this.rules.push(E),this.prioritizedRules=null,this}},{key:"removeRule",value:function(_){if(!(_ instanceof j.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var E=this.rules.indexOf(_);return-1!==E&&(this.prioritizedRules=null,Boolean(this.rules.splice(E,1).length))}},{key:"addOperator",value:function(_,E){var N;N=_ instanceof m.default?_:new m.default(_,E),(0,W.default)("engine::addOperator name:"+N.name),this.operators.set(N.name,N)}},{key:"removeOperator",value:function(_){return this.operators.delete(_ instanceof m.default?_.name:_)}},{key:"addFact",value:function(_,E,N){var A=_,ne=void 0;return _ instanceof x.default?(A=_.id,ne=_):ne=new x.default(_,E,N),(0,W.default)("engine::addFact id:"+A),this.facts.set(A,ne),this}},{key:"removeFact",value:function(_){return this.facts.delete(_ instanceof x.default?_.id:_)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var _=this.rules.reduce(function(E,N){var A=N.priority;return E[A]||(E[A]=[]),E[A].push(N),E},{});this.prioritizedRules=Object.keys(_).sort(function(E,N){return Number(E)>Number(N)?-1:1}).map(function(E){return _[E]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=_e,this}},{key:"getFact",value:function(_){return this.facts.get(_)}},{key:"evaluateRules",value:function(_,E){var N=this;return Promise.all(_.map(function(A){if(N.status===ee)return A.evaluate(E).then(function(ne){(0,W.default)("engine::run ruleResult:"+ne.result),ne.result?(N.emit("success",A.event,E,ne),N.emit(A.event.type,A.event.params,E,ne),E.factValue("success-events",{event:A.event})):N.emit("failure",A.event,E,ne)});(0,W.default)("engine::run status:"+N.status+"; skipping remaining rules")}))}},{key:"run",value:function(){var _=this,E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,W.default)("engine::run started"),(0,W.default)("engine::run runtimeFacts:",E),E["success-events"]=new x.default("success-events",(0,z.SuccessEventFact)(),{cache:!1}),this.status=ee;var N=new R.default(this.facts,E,{allowUndefinedFacts:this.allowUndefinedFacts}),A=this.prioritizeRules(),ne=Promise.resolve();return new Promise(function(pe,Le){A.map(function(oe){return ne=ne.then(function(){return _.evaluateRules(oe,N)}).catch(Le)}),ne.then(function(){return _.status=_e,(0,W.default)("engine::run completed"),N.factValue("success-events")}).then(function(oe){pe({events:oe,almanac:N})}).catch(Le)})}}]),v}(M.EventEmitter);O.default=be},9492:(Ce,O)=>{function S(L,j){if(!(L instanceof j))throw new TypeError("Cannot call a class as a function")}function k(L,j){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?L:j}Object.defineProperty(O,"__esModule",{value:!0}),O.UndefinedFactError=function(L){function j(){var d;S(this,j);for(var m=arguments.length,y=Array(m),R=0;R<m;R++)y[R]=arguments[R];var M=k(this,(d=j.__proto__||Object.getPrototypeOf(j)).call.apply(d,[this].concat(y)));return M.code="UNDEFINED_FACT",M}return function o(L,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function, not "+typeof j);L.prototype=Object.create(j&&j.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(L,j):L.__proto__=j)}(j,Error),j}()},1035:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0});var k=function(){function m(y,R){for(var M=0;M<R.length;M++){var z=R[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(y,z.key,z)}}return function(y,R,M){return R&&m(y.prototype,R),M&&m(y,M),y}}(),x=function L(m){return m&&m.__esModule?m:{default:m}}(S(8288)),d=function(){function m(y,R,M){(function j(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")})(this,m),this.id=y;var z={cache:!0};if(void 0===M&&(M=z),"function"!=typeof R?(this.value=R,this.type=this.constructor.CONSTANT):(this.calculationMethod=R,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(M.priority||1,10),this.options=Object.assign({},z,M),this.cacheKeyMethod=this.defaultCacheKeys,this}return k(m,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(R,M){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(R,M)}},{key:"defaultCacheKeys",value:function(R,M){return{params:M,id:R}}},{key:"getCacheKey",value:function(R){if(!0===this.options.cache){var M=this.cacheKeyMethod(this.id,R);return m.hashFromObject(M)}}}],[{key:"hashFromObject",value:function(R){return(0,x.default)(R)}}]),m}();d.CONSTANT="CONSTANT",d.DYNAMIC="DYNAMIC",O.default=d},78:(Ce,O,S)=>{Ce.exports=S(1412)},1412:(Ce,O,S)=>{O.Engine=O.Rule=void 0;var x=M(S(7386)),m=(M(S(1035)),M(S(8847)));M(S(8640));function M(z){return z&&z.__esModule?z:{default:z}}O.Rule=m.default,O.Engine=x.default},8640:(Ce,O)=>{Object.defineProperty(O,"__esModule",{value:!0});var S=function(){function x(L,j){for(var d=0;d<j.length;d++){var m=j[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(L,m.key,m)}}return function(L,j,d){return j&&x(L.prototype,j),d&&x(L,d),L}}(),o=function(){function x(L,j,d){if(function k(x,L){if(!(x instanceof L))throw new TypeError("Cannot call a class as a function")}(this,x),this.name=String(L),!L)throw new Error("Missing operator name");if("function"!=typeof j)throw new Error("Missing operator callback");this.cb=j,this.factValueValidator=d,this.factValueValidator||(this.factValueValidator=function(){return!0})}return S(x,[{key:"evaluate",value:function(j,d){return this.factValueValidator(j)&&this.cb(j,d)}}]),x}();O.default=o},2747:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0});var k=function(){function m(y,R){for(var M=0;M<R.length;M++){var z=R[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(y,z.key,z)}}return function(y,R,M){return R&&m(y.prototype,R),M&&m(y,M),y}}(),x=function L(m){return m&&m.__esModule?m:{default:m}}(S(741)),d=function(){function m(y,R,M,z){(function j(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")})(this,m),this.conditions=(0,x.default)(y),this.event=(0,x.default)(R),this.priority=(0,x.default)(M),this.name=(0,x.default)(z),this.result=null}return k(m,[{key:"setResult",value:function(R){this.result=R}},{key:"toJSON",value:function(){var R=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],M={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return R?JSON.stringify(M):M}}]),m}();O.default=d},8847:(Ce,O,S)=>{Object.defineProperty(O,"__esModule",{value:!0});var k=function(){function Q(W,J){for(var le=0;le<J.length;le++){var U=J[le];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(W,U.key,U)}}return function(W,J,le){return J&&Q(W.prototype,J),le&&Q(W,le),W}}(),x=R(S(7396)),j=R(S(2747)),d=S(3358),y=R(S(7416));function R(Q){return Q&&Q.__esModule?Q:{default:Q}}var X=function(Q){function W(J){!function M(Q,W){if(!(Q instanceof W))throw new TypeError("Cannot call a class as a function")}(this,W);var le=function z(Q,W){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!W||"object"!=typeof W&&"function"!=typeof W?Q:W}(this,(W.__proto__||Object.getPrototypeOf(W)).call(this));return"string"==typeof J&&(J=JSON.parse(J)),J&&J.conditions&&le.setConditions(J.conditions),J&&J.onSuccess&&le.on("success",J.onSuccess),J&&J.onFailure&&le.on("failure",J.onFailure),J&&(J.name||0===J.name)&&le.setName(J.name),le.setPriority(J&&J.priority||1),le.setEvent(J&&J.event||{type:"unknown"}),le}return function Y(Q,W){if("function"!=typeof W&&null!==W)throw new TypeError("Super expression must either be null or a function, not "+typeof W);Q.prototype=Object.create(W&&W.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,W):Q.__proto__=W)}(W,Q),k(W,[{key:"setPriority",value:function(le){if((le=parseInt(le,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=le,this}},{key:"setName",value:function(le){if(!le&&0!==le)throw new Error('Rule "name" must be defined');return this.name=le,this}},{key:"setConditions",value:function(le){if(!Object.prototype.hasOwnProperty.call(le,"all")&&!Object.prototype.hasOwnProperty.call(le,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new x.default(le),this}},{key:"setEvent",value:function(le){if(!le)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(le,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:le.type},le.params&&(this.event.params=le.params),this}},{key:"setEngine",value:function(le){return this.engine=le,this}},{key:"toJSON",value:function(){var le=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],U={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return le?JSON.stringify(U):U}},{key:"prioritizeConditions",value:function(le){var U=this,G=le.reduce(function($,ee){var _e=ee.priority;if(!_e){var be=U.engine.getFact(ee.fact);_e=be&&be.priority||1}return $[_e]||($[_e]=[]),$[_e].push(ee),$},{});return Object.keys(G).sort(function($,ee){return Number($)>Number(ee)?-1:1}).map(function($){return G[$]})}},{key:"evaluate",value:function(le){var U=this,G=new j.default(this.conditions,this.event,this.priority,this.name),_e=function(_,E){if(0===_.length)return Promise.resolve(!0);var N=Array.prototype.some;"all"===E&&(N=Array.prototype.every);for(var A=U.prioritizeConditions(_),ne=Promise.resolve(),pe=function($e){var ct=A[$e],Ne=!1;ne=ne.then(function(Je){return"any"===E&&!0===Je||Ne?((0,y.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),Ne=!0,!0):"all"===E&&!1===Je||Ne?((0,y.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),Ne=!0,!1):function(_,E){return Array.isArray(_)||(_=[_]),Promise.all(_.map(function(N){return function(_){if(_.isBooleanOperator()){var E=_[_.operator];return("all"===_.operator?me(E):be(E)).then(function(A){var ne=!0===A;return _.result=ne,ne})}return _.evaluate(le,U.engine.operators).then(function(A){var ne=A.result;return _.factResult=A.leftHandSideValue,_.result=ne,ne})}(N)})).then(function(N){return(0,y.default)("rule::evaluateConditions results",N),E.call(N,function(A){return!0===A})})}(ct,N)})},Le=0;Le<A.length;Le++)pe(Le);return ne},be=function(_){return _e(_,"any")},me=function(_){return _e(_,"all")},v=function(_){return G.setResult(_),U.emit(_?"success":"failure",G.event,le,G),G};return G.conditions.any?be(G.conditions.any).then(function(T){return v(T)}):me(G.conditions.all).then(function(T){return v(T)})}}]),W}(d.EventEmitter);O.default=X},741:Ce=>{var O=function(){"use strict";function S(M,z){return null!=z&&M instanceof z}var k,o,x;try{k=Map}catch{k=function(){}}try{o=Set}catch{o=function(){}}try{x=Promise}catch{x=function(){}}function L(M,z,Y,X,Q){"object"==typeof z&&(Y=z.depth,X=z.prototype,Q=z.includeNonEnumerable,z=z.circular);var W=[],J=[],le="undefined"!=typeof Buffer;return void 0===z&&(z=!0),void 0===Y&&(Y=1/0),function U(G,$){if(null===G)return null;if(0===$)return G;var ee,_e;if("object"!=typeof G)return G;if(S(G,k))ee=new k;else if(S(G,o))ee=new o;else if(S(G,x))ee=new x(function(ne,pe){G.then(function(Le){ne(U(Le,$-1))},function(Le){pe(U(Le,$-1))})});else if(L.__isArray(G))ee=[];else if(L.__isRegExp(G))ee=new RegExp(G.source,R(G)),G.lastIndex&&(ee.lastIndex=G.lastIndex);else if(L.__isDate(G))ee=new Date(G.getTime());else{if(le&&Buffer.isBuffer(G))return ee=Buffer.allocUnsafe?Buffer.allocUnsafe(G.length):new Buffer(G.length),G.copy(ee),ee;S(G,Error)?ee=Object.create(G):void 0===X?(_e=Object.getPrototypeOf(G),ee=Object.create(_e)):(ee=Object.create(X),_e=X)}if(z){var be=W.indexOf(G);if(-1!=be)return J[be];W.push(G),J.push(ee)}for(var me in S(G,k)&&G.forEach(function(ne,pe){var Le=U(pe,$-1),oe=U(ne,$-1);ee.set(Le,oe)}),S(G,o)&&G.forEach(function(ne){var pe=U(ne,$-1);ee.add(pe)}),G){var v;_e&&(v=Object.getOwnPropertyDescriptor(_e,me)),(!v||null!=v.set)&&(ee[me]=U(G[me],$-1))}if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(G);for(me=0;me<T.length;me++){var _=T[me];(E=Object.getOwnPropertyDescriptor(G,_))&&!E.enumerable&&!Q||(ee[_]=U(G[_],$-1),E.enumerable||Object.defineProperty(ee,_,{enumerable:!1}))}}if(Q){var N=Object.getOwnPropertyNames(G);for(me=0;me<N.length;me++){var E,A=N[me];(E=Object.getOwnPropertyDescriptor(G,A))&&E.enumerable||(ee[A]=U(G[A],$-1),Object.defineProperty(ee,A,{enumerable:!1}))}}return ee}(M,Y)}function j(M){return Object.prototype.toString.call(M)}function R(M){var z="";return M.global&&(z+="g"),M.ignoreCase&&(z+="i"),M.multiline&&(z+="m"),z}return L.clonePrototype=function(z){if(null===z)return null;var Y=function(){};return Y.prototype=z,new Y},L.__objToStr=j,L.__isDate=function d(M){return"object"==typeof M&&"[object Date]"===j(M)},L.__isArray=function m(M){return"object"==typeof M&&"[object Array]"===j(M)},L.__isRegExp=function y(M){return"object"==typeof M&&"[object RegExp]"===j(M)},L.__getRegExpFlags=R,L}();Ce.exports&&(Ce.exports=O)},4567:(Ce,O,S)=>{function k(E){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(E)}function L(E){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)})(E)}function j(E,N){return(j=Object.setPrototypeOf||function(ne,pe){return ne.__proto__=pe,ne})(E,N)}function d(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function m(E,N,A){return(m=d()?Reflect.construct:function(pe,Le,oe){var $e=[null];$e.push.apply($e,Le);var Ne=new(Function.bind.apply(pe,$e));return oe&&j(Ne,oe.prototype),Ne}).apply(null,arguments)}function R(E){var N="function"==typeof Map?new Map:void 0;return R=function(ne){if(null===ne||!function y(E){return-1!==Function.toString.call(E).indexOf("[native code]")}(ne))return ne;if("function"!=typeof ne)throw new TypeError("Super expression must either be null or a function");if(void 0!==N){if(N.has(ne))return N.get(ne);N.set(ne,pe)}function pe(){return m(ne,arguments,L(this).constructor)}return pe.prototype=Object.create(ne.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}),j(pe,ne)},R(E)}function z(E,N){return!N||"object"!=typeof N&&"function"!=typeof N?function M(E){if(void 0===E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(E):N}function X(E){return function Q(E){if(Array.isArray(E))return le(E)}(E)||function W(E){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(E))return Array.from(E)}(E)||J(E)||function U(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(E,N){if(E){if("string"==typeof E)return le(E,N);var A=Object.prototype.toString.call(E).slice(8,-1);if("Object"===A&&E.constructor&&(A=E.constructor.name),"Map"===A||"Set"===A)return Array.from(A);if("Arguments"===A||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return le(E,N)}}function le(E,N){(null==N||N>E.length)&&(N=E.length);for(var A=0,ne=new Array(N);A<N;A++)ne[A]=E[A];return ne}S.r(O),S.d(O,{JSONPath:()=>_});var ee=Object.prototype.hasOwnProperty,be=(_.nodeVMSupported=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}())?S(6989):{runInNewContext:function(N,A){var ne=Object.keys(A),pe=[];!function(N,A,ne){for(var pe=N.length,Le=0;Le<pe;Le++)ne(N[Le])&&A.push(N.splice(Le--,1)[0])}(ne,pe,function(Ne){return"function"==typeof A[Ne]});var Le=ne.map(function(Ne,Je){return A[Ne]});!(N=pe.reduce(function(Ne,Je){var Ze=A[Je].toString();return/function/.test(Ze)||(Ze="function "+Ze),"var "+Je+"="+Ze+";"+Ne},"")+N).match(/(["'])use strict\1/)&&!ne.includes("arguments")&&(N="var arguments = undefined;"+N);var $e=(N=N.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),ct=$e>-1?N.slice(0,$e+1)+" return "+N.slice($e+1):" return "+N;return m(Function,X(ne).concat([ct])).apply(void 0,X(Le))}};function me(E,N){return(E=E.slice()).push(N),E}function v(E,N){return(N=N.slice()).unshift(E),N}var T=function(E){!function x(E,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(N&&N.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),N&&j(E,N)}(A,E);var N=function Y(E){return function(){var A,N=L(E);if(d()){var ne=L(this).constructor;A=Reflect.construct(N,arguments,ne)}else A=N.apply(this,arguments);return z(this,A)}}(A);function A(ne){var pe;return function o(E,N){if(!(E instanceof N))throw new TypeError("Cannot call a class as a function")}(this,A),(pe=N.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,pe.value=ne,pe.name="NewError",pe}return A}(R(Error));function _(E,N,A,ne,pe){if(!(this instanceof _))try{return new _(E,N,A,ne,pe)}catch(ct){if(!ct.avoidNew)throw ct;return ct.value}"string"==typeof E&&(pe=ne,ne=A,A=N,N=E,E=null);var Le=E&&"object"===k(E);if(this.json=(E=E||{}).json||A,this.path=E.path||N,this.resultType=E.resultType||"value",this.flatten=E.flatten||!1,this.wrap=!ee.call(E,"wrap")||E.wrap,this.sandbox=E.sandbox||{},this.preventEval=E.preventEval||!1,this.parent=E.parent||null,this.parentProperty=E.parentProperty||null,this.callback=E.callback||ne||null,this.otherTypeCallback=E.otherTypeCallback||pe||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==E.autostart){var oe={path:Le?E.path:N};Le?"json"in E&&(oe.json=E.json):oe.json=A;var $e=this.evaluate(oe);if(!$e||"object"!==k($e))throw new T($e);return $e}}_.prototype.evaluate=function(E,N,A,ne){var pe=this,Le=this.parent,oe=this.parentProperty,$e=this.flatten,ct=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,A=A||this.callback,this.currOtherTypeCallback=ne||this.otherTypeCallback,N=N||this.json,(E=E||this.path)&&"object"===k(E)&&!Array.isArray(E)){if(!E.path&&""!==E.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!ee.call(E,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');N=E.json,$e=ee.call(E,"flatten")?E.flatten:$e,this.currResultType=ee.call(E,"resultType")?E.resultType:this.currResultType,this.currSandbox=ee.call(E,"sandbox")?E.sandbox:this.currSandbox,ct=ee.call(E,"wrap")?E.wrap:ct,this.currPreventEval=ee.call(E,"preventEval")?E.preventEval:this.currPreventEval,A=ee.call(E,"callback")?E.callback:A,this.currOtherTypeCallback=ee.call(E,"otherTypeCallback")?E.otherTypeCallback:this.currOtherTypeCallback,Le=ee.call(E,"parent")?E.parent:Le,oe=ee.call(E,"parentProperty")?E.parentProperty:oe,E=E.path}if(Le=Le||null,oe=oe||null,Array.isArray(E)&&(E=_.toPathString(E)),(E||""===E)&&N){this._obj=N;var Je=_.toPathArray(E);"$"===Je[0]&&Je.length>1&&Je.shift(),this._hasParentSelector=null;var Ze=this._trace(Je,N,["$"],Le,oe,A).filter(function(mt){return mt&&!mt.isParentSelector});return Ze.length?ct||1!==Ze.length||Ze[0].hasArrExpr?Ze.reduce(function(mt,nt){var Ge=pe._getPreferredOutput(nt);return $e&&Array.isArray(Ge)?mt=mt.concat(Ge):mt.push(Ge),mt},[]):this._getPreferredOutput(Ze[0]):ct?[]:void 0}},_.prototype._getPreferredOutput=function(E){var N=this.currResultType;switch(N){default:throw new TypeError("Unknown result type");case"all":var A=Array.isArray(E.path)?E.path:_.toPathArray(E.path);return E.pointer=_.toPointer(A),E.path="string"==typeof E.path?E.path:_.toPathString(E.path),E;case"value":case"parent":case"parentProperty":return E[N];case"path":return _.toPathString(E[N]);case"pointer":return _.toPointer(E.path)}},_.prototype._handleCallback=function(E,N,A){if(N){var ne=this._getPreferredOutput(E);E.path="string"==typeof E.path?E.path:_.toPathString(E.path),N(ne,A,E)}},_.prototype._trace=function(E,N,A,ne,pe,Le,oe,$e){var ct,Ne=this;if(!E.length)return this._handleCallback(ct={path:A,value:N,parent:ne,parentProperty:pe,hasArrExpr:oe},Le,"value"),ct;var Je=E[0],Ze=E.slice(1),mt=[];function nt(D){Array.isArray(D)?D.forEach(function(K){mt.push(K)}):mt.push(D)}if(("string"!=typeof Je||$e)&&N&&ee.call(N,Je))nt(this._trace(Ze,N[Je],me(A,Je),N,Je,Le,oe));else if("*"===Je)this._walk(Je,Ze,N,A,ne,pe,Le,function(D,K,ge,je,tt,ot,Ft,kt){nt(Ne._trace(v(D,ge),je,tt,ot,Ft,kt,!0,!0))});else if(".."===Je)nt(this._trace(Ze,N,A,ne,pe,Le,oe)),this._walk(Je,Ze,N,A,ne,pe,Le,function(D,K,ge,je,tt,ot,Ft,kt){"object"===k(je[D])&&nt(Ne._trace(v(K,ge),je[D],me(tt,D),je,D,kt,!0))});else{if("^"===Je)return this._hasParentSelector=!0,{path:A.slice(0,-1),expr:Ze,isParentSelector:!0};if("~"===Je)return ct={path:me(A,Je),value:pe,parent:ne,parentProperty:null},this._handleCallback(ct,Le,"property"),ct;if("$"===Je)nt(this._trace(Ze,N,A,null,null,Le,oe));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(Je))nt(this._slice(Je,Ze,N,A,ne,pe,Le));else if(0===Je.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(Je,Ze,N,A,ne,pe,Le,function(D,K,ge,je,tt,ot,Ft,kt){Ne._eval(K.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),je[D],D,tt,ot,Ft)&&nt(Ne._trace(v(D,ge),je,tt,ot,Ft,kt,!0))})}else if("("===Je[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");nt(this._trace(v(this._eval(Je,N,A[A.length-1],A.slice(0,-1),ne,pe),Ze),N,A,ne,pe,Le,oe))}else if("@"===Je[0]){var Ge=!1,it=Je.slice(1,-2);switch(it){default:throw new TypeError("Unknown value type "+it);case"scalar":(!N||!["object","function"].includes(k(N)))&&(Ge=!0);break;case"boolean":case"string":case"undefined":case"function":k(N)===it&&(Ge=!0);break;case"integer":Number.isFinite(N)&&!(N%1)&&(Ge=!0);break;case"number":Number.isFinite(N)&&(Ge=!0);break;case"nonFinite":"number"==typeof N&&!Number.isFinite(N)&&(Ge=!0);break;case"object":N&&k(N)===it&&(Ge=!0);break;case"array":Array.isArray(N)&&(Ge=!0);break;case"other":Ge=this.currOtherTypeCallback(N,A,ne,pe);break;case"null":null===N&&(Ge=!0)}if(Ge)return this._handleCallback(ct={path:A,value:N,parent:ne,parentProperty:pe},Le,"value"),ct}else if("`"===Je[0]&&N&&ee.call(N,Je.slice(1))){var fe=Je.slice(1);nt(this._trace(Ze,N[fe],me(A,fe),N,fe,Le,oe,!0))}else if(Je.includes(",")){var De,se=function G(E){if("undefined"==typeof Symbol||null==E[Symbol.iterator]){if(Array.isArray(E)||(E=J(E))){var N=0,A=function(){};return{s:A,n:function(){return N>=E.length?{done:!0}:{done:!1,value:E[N++]}},e:function($e){throw $e},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ne,oe,pe=!0,Le=!1;return{s:function(){ne=E[Symbol.iterator]()},n:function(){var $e=ne.next();return pe=$e.done,$e},e:function($e){Le=!0,oe=$e},f:function(){try{!pe&&null!=ne.return&&ne.return()}finally{if(Le)throw oe}}}}(Je.split(","));try{for(se.s();!(De=se.n()).done;)nt(this._trace(v(De.value,Ze),N,A,ne,pe,Le,!0))}catch(D){se.e(D)}finally{se.f()}}else!$e&&N&&ee.call(N,Je)&&nt(this._trace(Ze,N[Je],me(A,Je),N,Je,Le,oe,!0))}if(this._hasParentSelector)for(var de=0;de<mt.length;de++){var ve=mt[de];if(ve&&ve.isParentSelector){var rt=Ne._trace(ve.expr,N,ve.path,ne,pe,Le,oe);if(Array.isArray(rt)){mt[de]=rt[0];for(var xe=rt.length,q=1;q<xe;q++)de++,mt.splice(de,0,rt[q])}else mt[de]=rt}}return mt},_.prototype._walk=function(E,N,A,ne,pe,Le,oe,$e){if(Array.isArray(A))for(var ct=A.length,Ne=0;Ne<ct;Ne++)$e(Ne,E,N,A,ne,pe,Le,oe);else A&&"object"===k(A)&&Object.keys(A).forEach(function(Je){$e(Je,E,N,A,ne,pe,Le,oe)})},_.prototype._slice=function(E,N,A,ne,pe,Le,oe){if(Array.isArray(A)){var $e=A.length,ct=E.split(":"),Ne=ct[2]&&Number.parseInt(ct[2])||1,Je=ct[0]&&Number.parseInt(ct[0])||0,Ze=ct[1]&&Number.parseInt(ct[1])||$e;Je=Je<0?Math.max(0,Je+$e):Math.min($e,Je),Ze=Ze<0?Math.max(0,Ze+$e):Math.min($e,Ze);for(var mt=[],nt=Je;nt<Ze;nt+=Ne)this._trace(v(nt,N),A,ne,pe,Le,oe,!0).forEach(function(it){mt.push(it)});return mt}},_.prototype._eval=function(E,N,A,ne,pe,Le){if(!this._obj||!N)return!1;E.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=Le,E=E.replace(/@parentProperty/g,"_$_parentProperty")),E.includes("@parent")&&(this.currSandbox._$_parent=pe,E=E.replace(/@parent/g,"_$_parent")),E.includes("@property")&&(this.currSandbox._$_property=A,E=E.replace(/@property/g,"_$_property")),E.includes("@path")&&(this.currSandbox._$_path=_.toPathString(ne.concat([A])),E=E.replace(/@path/g,"_$_path")),E.includes("@root")&&(this.currSandbox._$_root=this.json,E=E.replace(/@root/g,"_$_root")),E.match(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/)&&(this.currSandbox._$_v=N,E=E.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return be.runInNewContext(E,this.currSandbox)}catch(oe){throw console.log(oe),new Error("jsonPath: "+oe.message+": "+E)}},_.cache={},_.toPathString=function(E){for(var N=E,A=N.length,ne="$",pe=1;pe<A;pe++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(N[pe])||(ne+=/^[\*0-9]+$/.test(N[pe])?"["+N[pe]+"]":"['"+N[pe]+"']");return ne},_.toPointer=function(E){for(var N=E,A=N.length,ne="",pe=1;pe<A;pe++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(N[pe])||(ne+="/"+N[pe].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return ne},_.toPathArray=function(E){var N=_.cache;if(N[E])return N[E].concat();var A=[],pe=E.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(Le,oe){return"[#"+(A.push(oe)-1)+"]"}).replace(/\['((?:[\0-&\(-\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)'\]/g,function(Le,oe){return"['"+oe.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/'?\.'?(?!(?:[\0-Z\\-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*\])|\['?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(Le,oe){return";"+oe.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(Le){var oe=Le.match(/#([0-9]+)/);return oe&&oe[1]?A[oe[1]]:Le});return N[E]=pe,N[E]}},8220:Ce=>{var O=Object.prototype.toString;function S(R){return"function"==typeof R.constructor?R.constructor.name:null}Ce.exports=function(M){if(void 0===M)return"undefined";if(null===M)return"null";var z=typeof M;if("boolean"===z)return"boolean";if("string"===z)return"string";if("number"===z)return"number";if("symbol"===z)return"symbol";if("function"===z)return function j(R,M){return"GeneratorFunction"===S(R)}(M)?"generatorfunction":"function";if(function k(R){return Array.isArray?Array.isArray(R):R instanceof Array}(M))return"array";if(function y(R){return!(!R.constructor||"function"!=typeof R.constructor.isBuffer)&&R.constructor.isBuffer(R)}(M))return"buffer";if(function m(R){try{if("number"==typeof R.length&&"function"==typeof R.callee)return!0}catch(M){if(-1!==M.message.indexOf("callee"))return!0}return!1}(M))return"arguments";if(function x(R){return R instanceof Date||"function"==typeof R.toDateString&&"function"==typeof R.getDate&&"function"==typeof R.setDate}(M))return"date";if(function o(R){return R instanceof Error||"string"==typeof R.message&&R.constructor&&"number"==typeof R.constructor.stackTraceLimit}(M))return"error";if(function L(R){return R instanceof RegExp||"string"==typeof R.flags&&"boolean"==typeof R.ignoreCase&&"boolean"==typeof R.multiline&&"boolean"==typeof R.global}(M))return"regexp";switch(S(M)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function d(R){return"function"==typeof R.throw&&"function"==typeof R.return&&"function"==typeof R.next}(M))return"generator";switch(z=O.call(M)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return z.slice(8,-1).toLowerCase().replace(/\s/g,"")}},7726:Ce=>{Ce.exports=function O(S){return!!S&&"object"==typeof S}},464:(Ce,O)=>{function k(m){return m.replace(/[-[\]/{}()*+?.\\^$]/g,"\\$&")}function o(m,y){var M=(void 0===y?{}:y).decimalMark,z=void 0===M?".":M;if("number"==typeof m)return m.toString();if("string"!=typeof m)return"NaN";var Y=k(z),X=m.trim(),Q=X.match(/^\(.*\)$|^-/),W=new RegExp("[^\\d"+Y+"]|"+Y+"(?=.*"+Y+")|^\\D*"+Y+"\\D*$","g");return""===(X=X.replace(W,"").replace(z,"."))?X="NaN":Q&&(X="-"+X),X}O.He=void 0,O.He=function x(m,y){var M=(void 0===y?{}:y).decimalMark,Y=o(m,{decimalMark:void 0===M?".":M});return"NaN"===Y?NaN:Number(Y)}},1856:Ce=>{var O=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;function o(L){if(null==L)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(L)}Ce.exports=function x(){try{if(!Object.assign)return!1;var L=new String("abc");if(L[5]="de","5"===Object.getOwnPropertyNames(L)[0])return!1;for(var j={},d=0;d<10;d++)j["_"+String.fromCharCode(d)]=d;if("0123456789"!==Object.getOwnPropertyNames(j).map(function(R){return j[R]}).join(""))return!1;var y={};return"abcdefghijklmnopqrst".split("").forEach(function(R){y[R]=R}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},y)).join("")}catch{return!1}}()?Object.assign:function(L,j){for(var d,y,m=o(L),R=1;R<arguments.length;R++){for(var M in d=Object(arguments[R]))S.call(d,M)&&(m[M]=d[M]);if(O){y=O(d);for(var z=0;z<y.length;z++)k.call(d,y[z])&&(m[y[z]]=d[y[z]])}}return m}},8597:(Ce,O,S)=>{var k="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&k?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,x=k&&o&&"function"==typeof o.get?o.get:null,L=k&&Map.prototype.forEach,j="function"==typeof Set&&Set.prototype,d=Object.getOwnPropertyDescriptor&&j?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,m=j&&d&&"function"==typeof d.get?d.get:null,y=j&&Set.prototype.forEach,M="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Y="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,Q="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,W=Boolean.prototype.valueOf,J=Object.prototype.toString,le=Function.prototype.toString,U=String.prototype.match,G=String.prototype.slice,$=String.prototype.replace,ee=String.prototype.toUpperCase,_e=String.prototype.toLowerCase,be=RegExp.prototype.test,me=Array.prototype.concat,v=Array.prototype.join,T=Array.prototype.slice,_=Math.floor,E="function"==typeof BigInt?BigInt.prototype.valueOf:null,N=Object.getOwnPropertySymbols,A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ne="function"==typeof Symbol&&"object"==typeof Symbol.iterator,pe="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,Le=Object.prototype.propertyIsEnumerable,oe=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ht){return ht.__proto__}:null);function $e(ht,_t){if(ht===1/0||ht===-1/0||ht!=ht||ht&&ht>-1e3&&ht<1e3||be.call(/e/,_t))return _t;var gn=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof ht){var En=ht<0?-_(-ht):_(ht);if(En!==ht){var Kn=String(En),Ht=G.call(_t,Kn.length+1);return $.call(Kn,gn,"$&_")+"."+$.call($.call(Ht,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $.call(_t,gn,"$&_")}var ct=S(4654).custom,Ne=ct&&De(ct)?ct:null;function Je(ht,_t,gn){var En="double"===(gn.quoteStyle||_t)?'"':"'";return En+ht+En}function Ze(ht){return $.call(String(ht),/"/g,"&quot;")}function mt(ht){return!("[object Array]"!==rt(ht)||pe&&"object"==typeof ht&&pe in ht)}function De(ht){if(ne)return ht&&"object"==typeof ht&&ht instanceof Symbol;if("symbol"==typeof ht)return!0;if(!ht||"object"!=typeof ht||!A)return!1;try{return A.call(ht),!0}catch{}return!1}Ce.exports=function ht(_t,gn,En,Kn){var Ht=gn||{};if(ve(Ht,"quoteStyle")&&"single"!==Ht.quoteStyle&&"double"!==Ht.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ve(Ht,"maxStringLength")&&("number"==typeof Ht.maxStringLength?Ht.maxStringLength<0&&Ht.maxStringLength!==1/0:null!==Ht.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Tn=!ve(Ht,"customInspect")||Ht.customInspect;if("boolean"!=typeof Tn&&"symbol"!==Tn)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ve(Ht,"indent")&&null!==Ht.indent&&"\t"!==Ht.indent&&!(parseInt(Ht.indent,10)===Ht.indent&&Ht.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ve(Ht,"numericSeparator")&&"boolean"!=typeof Ht.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Vi=Ht.numericSeparator;if(void 0===_t)return"undefined";if(null===_t)return"null";if("boolean"==typeof _t)return _t?"true":"false";if("string"==typeof _t)return Ft(_t,Ht);if("number"==typeof _t){if(0===_t)return 1/0/_t>0?"0":"-0";var Fn=String(_t);return Vi?$e(_t,Fn):Fn}if("bigint"==typeof _t){var ti=String(_t)+"n";return Vi?$e(_t,ti):ti}var Pi=void 0===Ht.depth?5:Ht.depth;if(void 0===En&&(En=0),En>=Pi&&Pi>0&&"object"==typeof _t)return mt(_t)?"[Array]":"[Object]";var br=function nn(ht,_t){var gn;if("\t"===ht.indent)gn="\t";else{if(!("number"==typeof ht.indent&&ht.indent>0))return null;gn=v.call(Array(ht.indent+1)," ")}return{base:gn,prev:v.call(Array(_t+1),gn)}}(Ht,En);if(void 0===Kn)Kn=[];else if(q(Kn,_t)>=0)return"[Circular]";function ni(Cr,Nr,xo){if(Nr&&(Kn=T.call(Kn)).push(Nr),xo){var jn={depth:Ht.depth};return ve(Ht,"quoteStyle")&&(jn.quoteStyle=Ht.quoteStyle),ht(Cr,jn,En+1,Kn)}return ht(Cr,Ht,En+1,Kn)}if("function"==typeof _t){var Wi=function xe(ht){if(ht.name)return ht.name;var _t=U.call(le.call(ht),/^function\s*([\w$]+)/);return _t?_t[1]:null}(_t),Ti=On(_t,ni);return"[Function"+(Wi?": "+Wi:" (anonymous)")+"]"+(Ti.length>0?" { "+v.call(Ti,", ")+" }":"")}if(De(_t)){var Ki=ne?$.call(String(_t),/^(Symbol\(.*\))_[^)]*$/,"$1"):A.call(_t);return"object"!=typeof _t||ne?Ki:qt(Ki)}if(function ot(ht){return!(!ht||"object"!=typeof ht)&&("undefined"!=typeof HTMLElement&&ht instanceof HTMLElement||"string"==typeof ht.nodeName&&"function"==typeof ht.getAttribute)}(_t)){for(var Mr="<"+_e.call(String(_t.nodeName)),No=_t.attributes||[],vo=0;vo<No.length;vo++)Mr+=" "+No[vo].name+"="+Je(Ze(No[vo].value),"double",Ht);return Mr+=">",_t.childNodes&&_t.childNodes.length&&(Mr+="..."),Mr+"</"+_e.call(String(_t.nodeName))+">"}if(mt(_t)){if(0===_t.length)return"[]";var Ur=On(_t,ni);return br&&!function ei(ht){for(var _t=0;_t<ht.length;_t++)if(q(ht[_t],"\n")>=0)return!1;return!0}(Ur)?"["+Nt(Ur,br)+"]":"[ "+v.call(Ur,", ")+" ]"}if(function it(ht){return!("[object Error]"!==rt(ht)||pe&&"object"==typeof ht&&pe in ht)}(_t)){var Lr=On(_t,ni);return"cause"in _t&&!Le.call(_t,"cause")?"{ ["+String(_t)+"] "+v.call(me.call("[cause]: "+ni(_t.cause),Lr),", ")+" }":0===Lr.length?"["+String(_t)+"]":"{ ["+String(_t)+"] "+v.call(Lr,", ")+" }"}if("object"==typeof _t&&Tn){if(Ne&&"function"==typeof _t[Ne])return _t[Ne]();if("symbol"!==Tn&&"function"==typeof _t.inspect)return _t.inspect()}if(function D(ht){if(!x||!ht||"object"!=typeof ht)return!1;try{x.call(ht);try{m.call(ht)}catch{return!0}return ht instanceof Map}catch{}return!1}(_t)){var io=[];return L.call(_t,function(Cr,Nr){io.push(ni(Nr,_t,!0)+" => "+ni(Cr,_t))}),Pe("Map",x.call(_t),io,br)}if(function je(ht){if(!m||!ht||"object"!=typeof ht)return!1;try{m.call(ht);try{x.call(ht)}catch{return!0}return ht instanceof Set}catch{}return!1}(_t)){var oa=[];return y.call(_t,function(Cr){oa.push(ni(Cr,_t))}),Pe("Set",m.call(_t),oa,br)}if(function K(ht){if(!M||!ht||"object"!=typeof ht)return!1;try{M.call(ht,M);try{Y.call(ht,Y)}catch{return!0}return ht instanceof WeakMap}catch{}return!1}(_t))return tn("WeakMap");if(function tt(ht){if(!Y||!ht||"object"!=typeof ht)return!1;try{Y.call(ht,Y);try{M.call(ht,M)}catch{return!0}return ht instanceof WeakSet}catch{}return!1}(_t))return tn("WeakSet");if(function ge(ht){if(!Q||!ht||"object"!=typeof ht)return!1;try{return Q.call(ht),!0}catch{}return!1}(_t))return tn("WeakRef");if(function te(ht){return!("[object Number]"!==rt(ht)||pe&&"object"==typeof ht&&pe in ht)}(_t))return qt(ni(Number(_t)));if(function Ve(ht){if(!ht||"object"!=typeof ht||!E)return!1;try{return E.call(ht),!0}catch{}return!1}(_t))return qt(ni(E.call(_t)));if(function se(ht){return!("[object Boolean]"!==rt(ht)||pe&&"object"==typeof ht&&pe in ht)}(_t))return qt(W.call(_t));if(function fe(ht){return!("[object String]"!==rt(ht)||pe&&"object"==typeof ht&&pe in ht)}(_t))return qt(ni(String(_t)));if(!function nt(ht){return!("[object Date]"!==rt(ht)||pe&&"object"==typeof ht&&pe in ht)}(_t)&&!function Ge(ht){return!("[object RegExp]"!==rt(ht)||pe&&"object"==typeof ht&&pe in ht)}(_t)){var dr=On(_t,ni),Bo=oe?oe(_t)===Object.prototype:_t instanceof Object||_t.constructor===Object,yo=_t instanceof Object?"":"null prototype",_o=!Bo&&pe&&Object(_t)===_t&&pe in _t?G.call(rt(_t),8,-1):yo?"Object":"",jo=(Bo||"function"!=typeof _t.constructor?"":_t.constructor.name?_t.constructor.name+" ":"")+(_o||yo?"["+v.call(me.call([],_o||[],yo||[]),": ")+"] ":"");return 0===dr.length?jo+"{}":br?jo+"{"+Nt(dr,br)+"}":jo+"{ "+v.call(dr,", ")+" }"}return String(_t)};var de=Object.prototype.hasOwnProperty||function(ht){return ht in this};function ve(ht,_t){return de.call(ht,_t)}function rt(ht){return J.call(ht)}function q(ht,_t){if(ht.indexOf)return ht.indexOf(_t);for(var gn=0,En=ht.length;gn<En;gn++)if(ht[gn]===_t)return gn;return-1}function Ft(ht,_t){if(ht.length>_t.maxStringLength){var gn=ht.length-_t.maxStringLength,En="... "+gn+" more character"+(gn>1?"s":"");return Ft(G.call(ht,0,_t.maxStringLength),_t)+En}return Je($.call($.call(ht,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,kt),"single",_t)}function kt(ht){var _t=ht.charCodeAt(0),gn={8:"b",9:"t",10:"n",12:"f",13:"r"}[_t];return gn?"\\"+gn:"\\x"+(_t<16?"0":"")+ee.call(_t.toString(16))}function qt(ht){return"Object("+ht+")"}function tn(ht){return ht+" { ? }"}function Pe(ht,_t,gn,En){return ht+" ("+_t+") {"+(En?Nt(gn,En):v.call(gn,", "))+"}"}function Nt(ht,_t){if(0===ht.length)return"";var gn="\n"+_t.prev+_t.base;return gn+v.call(ht,","+gn)+"\n"+_t.prev}function On(ht,_t){var gn=mt(ht),En=[];if(gn){En.length=ht.length;for(var Kn=0;Kn<ht.length;Kn++)En[Kn]=ve(ht,Kn)?_t(ht[Kn],ht):""}var Tn,Ht="function"==typeof N?N(ht):[];if(ne){Tn={};for(var Vi=0;Vi<Ht.length;Vi++)Tn["$"+Ht[Vi]]=Ht[Vi]}for(var Fn in ht)!ve(ht,Fn)||gn&&String(Number(Fn))===Fn&&Fn<ht.length||ne&&Tn["$"+Fn]instanceof Symbol||(be.call(/[^\w$]/,Fn)?En.push(_t(Fn,ht)+": "+_t(ht[Fn],ht)):En.push(Fn+": "+_t(ht[Fn],ht)));if("function"==typeof N)for(var ti=0;ti<Ht.length;ti++)Le.call(ht,Ht[ti])&&En.push("["+_t(Ht[ti])+"]: "+_t(ht[Ht[ti]],ht));return En}},2578:function(Ce){Ce.exports=function(O){var S={};function k(o){if(S[o])return S[o].exports;var x=S[o]={i:o,l:!1,exports:{}};return O[o].call(x.exports,x,x.exports,k),x.l=!0,x.exports}return k.m=O,k.c=S,k.d=function(o,x,L){k.o(o,x)||Object.defineProperty(o,x,{enumerable:!0,get:L})},k.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},k.t=function(o,x){if(1&x&&(o=k(o)),8&x||4&x&&"object"==typeof o&&o&&o.__esModule)return o;var L=Object.create(null);if(k.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:o}),2&x&&"string"!=typeof o)for(var j in o)k.d(L,j,function(d){return o[d]}.bind(null,j));return L},k.n=function(o){var x=o&&o.__esModule?function(){return o.default}:function(){return o};return k.d(x,"a",x),x},k.o=function(o,x){return Object.prototype.hasOwnProperty.call(o,x)},k.p="",k(k.s=22)}([function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var o=function(){function d(m,y){for(var R=0;R<y.length;R++){var M=y[R];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(m,M.key,M)}}return function(m,y,R){return y&&d(m.prototype,y),R&&d(m,R),m}}(),x={debug:function(){},info:function(){},warn:function(){},error:function(){}},L=void 0,j=void 0;(S.Log=function(){function d(){!function(y,R){if(!(y instanceof R))throw new TypeError("Cannot call a class as a function")}(this,d)}return d.reset=function(){j=3,L=x},d.debug=function(){if(j>=4){for(var y=arguments.length,R=Array(y),M=0;M<y;M++)R[M]=arguments[M];L.debug.apply(L,Array.from(R))}},d.info=function(){if(j>=3){for(var y=arguments.length,R=Array(y),M=0;M<y;M++)R[M]=arguments[M];L.info.apply(L,Array.from(R))}},d.warn=function(){if(j>=2){for(var y=arguments.length,R=Array(y),M=0;M<y;M++)R[M]=arguments[M];L.warn.apply(L,Array.from(R))}},d.error=function(){if(j>=1){for(var y=arguments.length,R=Array(y),M=0;M<y;M++)R[M]=arguments[M];L.error.apply(L,Array.from(R))}},o(d,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return j},set:function(y){if(!(0<=y&&y<=4))throw new Error("Invalid log level");j=y}},{key:"logger",get:function(){return L},set:function(y){if(!y.debug&&y.info&&(y.debug=y.info),!(y.debug&&y.info&&y.warn&&y.error))throw new Error("Invalid logger");L=y}}]),d}()).reset()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var o=function(){function d(m,y){for(var R=0;R<y.length;R++){var M=y[R];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(m,M.key,M)}}return function(m,y,R){return y&&d(m.prototype,y),R&&d(m,R),m}}(),x={setInterval:function(d){function m(y,R){return d.apply(this,arguments)}return m.toString=function(){return d.toString()},m}(function(d,m){return setInterval(d,m)}),clearInterval:function(d){function m(y){return d.apply(this,arguments)}return m.toString=function(){return d.toString()},m}(function(d){return clearInterval(d)})},L=!1,j=null;S.Global=function(){function d(){!function(y,R){if(!(y instanceof R))throw new TypeError("Cannot call a class as a function")}(this,d)}return d._testing=function(){L=!0},d.setXMLHttpRequest=function(y){j=y},o(d,null,[{key:"location",get:function(){if(!L)return location}},{key:"localStorage",get:function(){if(!L&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!L&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!L&&"undefined"!=typeof window)return j||XMLHttpRequest}},{key:"timer",get:function(){if(!L)return x}}]),d}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.MetadataService=void 0;var o=function(){function m(y,R){for(var M=0;M<R.length;M++){var z=R[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(y,z.key,z)}}return function(y,R,M){return R&&m(y.prototype,R),M&&m(y,M),y}}(),x=k(0),L=k(7);function j(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}var d=".well-known/openid-configuration";S.MetadataService=function(){function m(y){var R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.JsonService;if(j(this,m),!y)throw x.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=y,this._jsonService=new R(["application/jwk-set+json"])}return m.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},m.prototype.getMetadata=function(){var R=this;return this._settings.metadata?(x.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(x.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(M){return x.Log.debug("MetadataService.getMetadata: json received"),R._settings.metadata=Object.assign({},R._settings.metadataSeed||{},M),R._settings.metadata})):(x.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},m.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},m.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},m.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},m.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},m.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},m.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},m.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},m.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},m.prototype._getMetadataProperty=function(R){var M=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return x.Log.debug("MetadataService.getMetadataProperty for: "+R),this.getMetadata().then(function(z){if(x.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===z[R]){if(!0===M)return void x.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+R);throw x.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+R),new Error("Metadata does not contain property "+R)}return z[R]})},m.prototype.getSigningKeys=function(){var R=this;return this._settings.signingKeys?(x.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(M){return x.Log.debug("MetadataService.getSigningKeys: jwks_uri received",M),R._jsonService.getJson(M).then(function(z){if(x.Log.debug("MetadataService.getSigningKeys: key set received",z),!z.keys)throw x.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return R._settings.signingKeys=z.keys,R._settings.signingKeys})})},o(m,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(d)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=d))),this._metadataUrl}}]),m}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UrlUtility=void 0;var o=k(0),x=k(1);S.UrlUtility=function(){function L(){!function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,L)}return L.addQueryParam=function(d,m,y){return d.indexOf("?")<0&&(d+="?"),"?"!==d[d.length-1]&&(d+="&"),d+=encodeURIComponent(m),(d+="=")+encodeURIComponent(y)},L.parseUrlFragment=function(d){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof d&&(d=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.Global).location.href);var R=d.lastIndexOf(m);R>=0&&(d=d.substr(R+1)),"?"===m&&(R=d.indexOf("#"))>=0&&(d=d.substr(0,R));for(var M,z={},Y=/([^&=]+)=([^&]*)/g,X=0;M=Y.exec(d);)if(z[decodeURIComponent(M[1])]=decodeURIComponent(M[2].replace(/\+/g," ")),X++>50)return o.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",d),{error:"Response exceeded expected number of parameters"};for(var Q in z)return z;return{}},L}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.JoseUtil=void 0;var j,o=k(26),x=(j=k(33))&&j.__esModule?j:{default:j};S.JoseUtil=(0,x.default)({jws:o.jws,KeyUtil:o.KeyUtil,X509:o.X509,crypto:o.crypto,hextob64u:o.hextob64u,b64tohex:o.b64tohex,AllowedSigningAlgs:o.AllowedSigningAlgs})},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.OidcClientSettings=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},x=function(){function Q(W,J){for(var le=0;le<J.length;le++){var U=J[le];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(W,U.key,U)}}return function(W,J,le){return J&&Q(W.prototype,J),le&&Q(W,le),W}}(),L=k(0),j=k(23),d=k(6),m=k(24),y=k(2);function R(Q,W){if(!(Q instanceof W))throw new TypeError("Cannot call a class as a function")}var M=".well-known/openid-configuration",z="id_token",Y="openid",X="client_secret_post";S.OidcClientSettings=function(){function Q(){var W=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},J=W.authority,le=W.metadataUrl,U=W.metadata,G=W.signingKeys,$=W.metadataSeed,ee=W.client_id,_e=W.client_secret,be=W.response_type,me=void 0===be?z:be,v=W.scope,T=void 0===v?Y:v,_=W.redirect_uri,E=W.post_logout_redirect_uri,N=W.client_authentication,A=void 0===N?X:N,ne=W.prompt,pe=W.display,Le=W.max_age,oe=W.ui_locales,$e=W.acr_values,ct=W.resource,Ne=W.response_mode,Je=W.filterProtocolClaims,Ze=void 0===Je||Je,mt=W.loadUserInfo,nt=void 0===mt||mt,Ge=W.staleStateAge,it=void 0===Ge?900:Ge,fe=W.clockSkew,te=void 0===fe?300:fe,se=W.clockService,De=void 0===se?new j.ClockService:se,Ve=W.userInfoJwtIssuer,de=void 0===Ve?"OP":Ve,ve=W.mergeClaims,rt=void 0!==ve&&ve,xe=W.stateStore,q=void 0===xe?new d.WebStorageStateStore:xe,D=W.ResponseValidatorCtor,K=void 0===D?m.ResponseValidator:D,ge=W.MetadataServiceCtor,je=void 0===ge?y.MetadataService:ge,tt=W.extraQueryParams,ot=void 0===tt?{}:tt,Ft=W.extraTokenParams,kt=void 0===Ft?{}:Ft;R(this,Q),this._authority=J,this._metadataUrl=le,this._metadata=U,this._metadataSeed=$,this._signingKeys=G,this._client_id=ee,this._client_secret=_e,this._response_type=me,this._scope=T,this._redirect_uri=_,this._post_logout_redirect_uri=E,this._client_authentication=A,this._prompt=ne,this._display=pe,this._max_age=Le,this._ui_locales=oe,this._acr_values=$e,this._resource=ct,this._response_mode=Ne,this._filterProtocolClaims=!!Ze,this._loadUserInfo=!!nt,this._staleStateAge=it,this._clockSkew=te,this._clockService=De,this._userInfoJwtIssuer=de,this._mergeClaims=!!rt,this._stateStore=q,this._validator=new K(this),this._metadataService=new je(this),this._extraQueryParams="object"===(void 0===ot?"undefined":o(ot))?ot:{},this._extraTokenParams="object"===(void 0===kt?"undefined":o(kt))?kt:{}}return Q.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},x(Q,[{key:"client_id",get:function(){return this._client_id},set:function(J){if(this._client_id)throw L.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=J}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(J){if(this._authority)throw L.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=J}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(M)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=M)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(J){this._metadata=J}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(J){this._metadataSeed=J}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(J){this._signingKeys=J}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(J){this._extraQueryParams="object"===(void 0===J?"undefined":o(J))?J:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(J){this._extraTokenParams="object"===(void 0===J?"undefined":o(J))?J:{}}}]),Q}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.WebStorageStateStore=void 0;var o=k(0),x=k(1);function L(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}S.WebStorageStateStore=function(){function j(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=d.prefix,y=void 0===m?"oidc.":m,R=d.store,M=void 0===R?x.Global.localStorage:R;L(this,j),this._store=M,this._prefix=y}return j.prototype.set=function(m,y){return o.Log.debug("WebStorageStateStore.set",m),this._store.setItem(m=this._prefix+m,y),Promise.resolve()},j.prototype.get=function(m){o.Log.debug("WebStorageStateStore.get",m);var y=this._store.getItem(m=this._prefix+m);return Promise.resolve(y)},j.prototype.remove=function(m){o.Log.debug("WebStorageStateStore.remove",m);var y=this._store.getItem(m=this._prefix+m);return this._store.removeItem(m),Promise.resolve(y)},j.prototype.getAllKeys=function(){o.Log.debug("WebStorageStateStore.getAllKeys");for(var m=[],y=0;y<this._store.length;y++){var R=this._store.key(y);0===R.indexOf(this._prefix)&&m.push(R.substr(this._prefix.length))}return Promise.resolve(m)},j}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.JsonService=void 0;var o=k(0),x=k(1);function L(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}S.JsonService=function(){function j(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.Global.XMLHttpRequest,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;L(this,j),this._contentTypes=d&&Array.isArray(d)?d.slice():[],this._contentTypes.push("application/json"),y&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=m,this._jwtHandler=y}return j.prototype.getJson=function(m,y){var R=this;if(!m)throw o.Log.error("JsonService.getJson: No url passed"),new Error("url");return o.Log.debug("JsonService.getJson, url: ",m),new Promise(function(M,z){var Y=new R._XMLHttpRequest;Y.open("GET",m);var X=R._contentTypes,Q=R._jwtHandler;Y.onload=function(){if(o.Log.debug("JsonService.getJson: HTTP response received, status",Y.status),200===Y.status){var W=Y.getResponseHeader("Content-Type");if(W){var J=X.find(function(le){if(W.startsWith(le))return!0});if("application/jwt"==J)return void Q(Y).then(M,z);if(J)try{return void M(JSON.parse(Y.responseText))}catch(le){return o.Log.error("JsonService.getJson: Error parsing JSON response",le.message),void z(le)}}z(Error("Invalid response Content-Type: "+W+", from URL: "+m))}else z(Error(Y.statusText+" ("+Y.status+")"))},Y.onerror=function(){o.Log.error("JsonService.getJson: network error"),z(Error("Network Error"))},y&&(o.Log.debug("JsonService.getJson: token passed, setting Authorization header"),Y.setRequestHeader("Authorization","Bearer "+y)),Y.send()})},j.prototype.postForm=function(m,y,R){var M=this;if(!m)throw o.Log.error("JsonService.postForm: No url passed"),new Error("url");return o.Log.debug("JsonService.postForm, url: ",m),new Promise(function(z,Y){var X=new M._XMLHttpRequest;X.open("POST",m);var Q=M._contentTypes;X.onload=function(){if(o.Log.debug("JsonService.postForm: HTTP response received, status",X.status),200!==X.status){if(400===X.status&&(G=X.getResponseHeader("Content-Type"))&&Q.find(function($){if(G.startsWith($))return!0}))try{var U=JSON.parse(X.responseText);if(U&&U.error)return o.Log.error("JsonService.postForm: Error from server: ",U.error),void Y(new Error(U.error))}catch($){return o.Log.error("JsonService.postForm: Error parsing JSON response",$.message),void Y($)}Y(Error(X.statusText+" ("+X.status+")"))}else{var G;if((G=X.getResponseHeader("Content-Type"))&&Q.find(function($){if(G.startsWith($))return!0}))try{return void z(JSON.parse(X.responseText))}catch($){return o.Log.error("JsonService.postForm: Error parsing JSON response",$.message),void Y($)}Y(Error("Invalid response Content-Type: "+G+", from URL: "+m))}},X.onerror=function(){o.Log.error("JsonService.postForm: network error"),Y(Error("Network Error"))};var W="";for(var J in y){var le=y[J];le&&(W.length>0&&(W+="&"),W+=encodeURIComponent(J),W+="=",W+=encodeURIComponent(le))}X.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==R&&X.setRequestHeader("Authorization","Basic "+btoa(R)),X.send(W)})},j}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SigninRequest=void 0;var o=k(0),x=k(3),L=k(13);S.SigninRequest=function(){function j(d){var m=d.url,y=d.client_id,R=d.redirect_uri,M=d.response_type,z=d.scope,Y=d.authority,X=d.data,Q=d.prompt,W=d.display,J=d.max_age,le=d.ui_locales,U=d.id_token_hint,G=d.login_hint,$=d.acr_values,ee=d.resource,_e=d.response_mode,be=d.request,me=d.request_uri,v=d.extraQueryParams,T=d.request_type,_=d.client_secret,E=d.extraTokenParams,N=d.skipUserInfo;if(function(ct,Ne){if(!(ct instanceof Ne))throw new TypeError("Cannot call a class as a function")}(this,j),!m)throw o.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!y)throw o.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!R)throw o.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!M)throw o.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!z)throw o.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!Y)throw o.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var A=j.isOidc(M),ne=j.isCode(M);_e||(_e=j.isCode(M)?"query":null),this.state=new L.SigninState({nonce:A,data:X,client_id:y,authority:Y,redirect_uri:R,code_verifier:ne,request_type:T,response_mode:_e,client_secret:_,scope:z,extraTokenParams:E,skipUserInfo:N}),m=x.UrlUtility.addQueryParam(m,"client_id",y),m=x.UrlUtility.addQueryParam(m,"redirect_uri",R),m=x.UrlUtility.addQueryParam(m,"response_type",M),m=x.UrlUtility.addQueryParam(m,"scope",z),m=x.UrlUtility.addQueryParam(m,"state",this.state.id),A&&(m=x.UrlUtility.addQueryParam(m,"nonce",this.state.nonce)),ne&&(m=x.UrlUtility.addQueryParam(m,"code_challenge",this.state.code_challenge),m=x.UrlUtility.addQueryParam(m,"code_challenge_method","S256"));var pe={prompt:Q,display:W,max_age:J,ui_locales:le,id_token_hint:U,login_hint:G,acr_values:$,resource:ee,request:be,request_uri:me,response_mode:_e};for(var Le in pe)pe[Le]&&(m=x.UrlUtility.addQueryParam(m,Le,pe[Le]));for(var oe in v)m=x.UrlUtility.addQueryParam(m,oe,v[oe]);this.url=m}return j.isOidc=function(m){return!!m.split(/\s+/g).filter(function(y){return"id_token"===y})[0]},j.isOAuth=function(m){return!!m.split(/\s+/g).filter(function(y){return"token"===y})[0]},j.isCode=function(m){return!!m.split(/\s+/g).filter(function(y){return"code"===y})[0]},j}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.State=void 0;var m,o=function(){function d(m,y){for(var R=0;R<y.length;R++){var M=y[R];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(m,M.key,M)}}return function(m,y,R){return y&&d(m.prototype,y),R&&d(m,R),m}}(),x=k(0),L=(m=k(14))&&m.__esModule?m:{default:m};function j(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}S.State=function(){function d(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=m.id,R=m.data,M=m.created,z=m.request_type;j(this,d),this._id=y||(0,L.default)(),this._data=R,this._created="number"==typeof M&&M>0?M:parseInt(Date.now()/1e3),this._request_type=z}return d.prototype.toStorageString=function(){return x.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},d.fromStorageString=function(y){return x.Log.debug("State.fromStorageString"),new d(JSON.parse(y))},d.clearStaleState=function(y,R){var M=Date.now()/1e3-R;return y.getAllKeys().then(function(z){x.Log.debug("State.clearStaleState: got keys",z);for(var Y=[],X=function(le){var U=z[le];W=y.get(U).then(function(G){var $=!1;if(G)try{var ee=d.fromStorageString(G);x.Log.debug("State.clearStaleState: got item from key: ",U,ee.created),ee.created<=M&&($=!0)}catch(_e){x.Log.error("State.clearStaleState: Error parsing state for key",U,_e.message),$=!0}else x.Log.debug("State.clearStaleState: no item in storage for key: ",U),$=!0;if($)return x.Log.debug("State.clearStaleState: removed item for key: ",U),y.remove(U)}),Y.push(W)},Q=0;Q<z.length;Q++){var W;X(Q)}return x.Log.debug("State.clearStaleState: waiting on promise count:",Y.length),Promise.all(Y)})},o(d,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),d}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.OidcClient=void 0;var o=function(){function X(Q,W){for(var J=0;J<W.length;J++){var le=W[J];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(Q,le.key,le)}}return function(Q,W,J){return W&&X(Q.prototype,W),J&&X(Q,J),Q}}(),x=k(0),L=k(5),j=k(12),d=k(8),m=k(34),y=k(35),R=k(36),M=k(13),z=k(9);function Y(X,Q){if(!(X instanceof Q))throw new TypeError("Cannot call a class as a function")}S.OidcClient=function(){function X(){var Q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Y(this,X),this._settings=Q instanceof L.OidcClientSettings?Q:new L.OidcClientSettings(Q)}return X.prototype.createSigninRequest=function(){var W=this,J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},le=J.response_type,U=J.scope,G=J.redirect_uri,$=J.data,ee=J.state,_e=J.prompt,be=J.display,me=J.max_age,v=J.ui_locales,T=J.id_token_hint,_=J.login_hint,E=J.acr_values,N=J.resource,A=J.request,ne=J.request_uri,pe=J.response_mode,Le=J.extraQueryParams,oe=J.extraTokenParams,$e=J.request_type,ct=J.skipUserInfo,Ne=arguments[1];x.Log.debug("OidcClient.createSigninRequest");var Je=this._settings.client_id;U=U||this._settings.scope,G=G||this._settings.redirect_uri,_e=_e||this._settings.prompt,be=be||this._settings.display,me=me||this._settings.max_age,v=v||this._settings.ui_locales,E=E||this._settings.acr_values,N=N||this._settings.resource,pe=pe||this._settings.response_mode,Le=Le||this._settings.extraQueryParams,oe=oe||this._settings.extraTokenParams;var Ze=this._settings.authority;return d.SigninRequest.isCode(le=le||this._settings.response_type)&&"code"!==le?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(mt){x.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",mt);var nt=new d.SigninRequest({url:mt,client_id:Je,redirect_uri:G,response_type:le,scope:U,data:$||ee,authority:Ze,prompt:_e,display:be,max_age:me,ui_locales:v,id_token_hint:T,login_hint:_,acr_values:E,resource:N,request:A,request_uri:ne,extraQueryParams:Le,extraTokenParams:oe,request_type:$e,response_mode:pe,client_secret:W._settings.client_secret,skipUserInfo:ct}),Ge=nt.state;return(Ne=Ne||W._stateStore).set(Ge.id,Ge.toStorageString()).then(function(){return nt})})},X.prototype.readSigninResponseState=function(W,J){var le=arguments.length>2&&void 0!==arguments[2]&&arguments[2];x.Log.debug("OidcClient.readSigninResponseState");var U="query"===this._settings.response_mode||!this._settings.response_mode&&d.SigninRequest.isCode(this._settings.response_type),$=new m.SigninResponse(W,U?"?":"#");return $.state?(J=J||this._stateStore,(le?J.remove.bind(J):J.get.bind(J))($.state).then(function(_e){if(!_e)throw x.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:M.SigninState.fromStorageString(_e),response:$}})):(x.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},X.prototype.processSigninResponse=function(W,J){var le=this;return x.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(W,J,!0).then(function(U){var G=U.state,$=U.response;return x.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),le._validator.validateSigninResponse(G,$)})},X.prototype.createSignoutRequest=function(){var W=this,J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},le=J.id_token_hint,U=J.data,G=J.state,$=J.post_logout_redirect_uri,ee=J.extraQueryParams,_e=J.request_type,be=arguments[1];return x.Log.debug("OidcClient.createSignoutRequest"),$=$||this._settings.post_logout_redirect_uri,ee=ee||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(me){if(!me)throw x.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");x.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",me);var v=new y.SignoutRequest({url:me,id_token_hint:le,post_logout_redirect_uri:$,data:U||G,extraQueryParams:ee,request_type:_e}),T=v.state;return T&&(x.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(be=be||W._stateStore).set(T.id,T.toStorageString())),v})},X.prototype.readSignoutResponseState=function(W,J){var le=arguments.length>2&&void 0!==arguments[2]&&arguments[2];x.Log.debug("OidcClient.readSignoutResponseState");var U=new R.SignoutResponse(W);if(!U.state)return x.Log.debug("OidcClient.readSignoutResponseState: No state in response"),U.error?(x.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",U.error),Promise.reject(new j.ErrorResponse(U))):Promise.resolve({state:void 0,response:U});var G=U.state;return J=J||this._stateStore,(le?J.remove.bind(J):J.get.bind(J))(G).then(function(ee){if(!ee)throw x.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:z.State.fromStorageString(ee),response:U}})},X.prototype.processSignoutResponse=function(W,J){var le=this;return x.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(W,J,!0).then(function(U){var G=U.state,$=U.response;return G?(x.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),le._validator.validateSignoutResponse(G,$)):(x.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),$)})},X.prototype.clearStaleState=function(W){return x.Log.debug("OidcClient.clearStaleState"),z.State.clearStaleState(W=W||this._stateStore,this.settings.staleStateAge)},o(X,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),X}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.TokenClient=void 0;var o=k(7),x=k(2),L=k(0);function j(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}S.TokenClient=function(){function d(m){var y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.MetadataService;if(j(this,d),!m)throw L.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=m,this._jsonService=new y,this._metadataService=new R(this._settings)}return d.prototype.exchangeCode=function(){var y=this,R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(R=Object.assign({},R)).grant_type=R.grant_type||"authorization_code",R.client_id=R.client_id||this._settings.client_id,R.client_secret=R.client_secret||this._settings.client_secret,R.redirect_uri=R.redirect_uri||this._settings.redirect_uri;var M=void 0,z=R._client_authentication||this._settings._client_authentication;return delete R._client_authentication,R.code?R.redirect_uri?R.code_verifier?R.client_id?R.client_secret||"client_secret_basic"!=z?("client_secret_basic"==z&&(M=R.client_id+":"+R.client_secret,delete R.client_id,delete R.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(Y){return L.Log.debug("TokenClient.exchangeCode: Received token endpoint"),y._jsonService.postForm(Y,R,M).then(function(X){return L.Log.debug("TokenClient.exchangeCode: response received"),X})})):(L.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(L.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(L.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(L.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(L.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},d.prototype.exchangeRefreshToken=function(){var y=this,R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(R=Object.assign({},R)).grant_type=R.grant_type||"refresh_token",R.client_id=R.client_id||this._settings.client_id,R.client_secret=R.client_secret||this._settings.client_secret;var M=void 0,z=R._client_authentication||this._settings._client_authentication;return delete R._client_authentication,R.refresh_token?R.client_id?("client_secret_basic"==z&&(M=R.client_id+":"+R.client_secret,delete R.client_id,delete R.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(Y){return L.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),y._jsonService.postForm(Y,R,M).then(function(X){return L.Log.debug("TokenClient.exchangeRefreshToken: response received"),X})})):(L.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(L.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},d}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ErrorResponse=void 0;var o=k(0);function x(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}function L(j,d){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!=typeof d&&"function"!=typeof d?j:d}S.ErrorResponse=function(j){function d(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=m.error,R=m.error_description,M=m.error_uri,z=m.state,Y=m.session_state;if(x(this,d),!y)throw o.Log.error("No error passed to ErrorResponse"),new Error("error");var X=L(this,j.call(this,R||y));return X.name="ErrorResponse",X.error=y,X.error_description=R,X.error_uri=M,X.state=z,X.session_state=Y,X}return function(y,R){if("function"!=typeof R&&null!==R)throw new TypeError("Super expression must either be null or a function, not "+typeof R);y.prototype=Object.create(R&&R.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(y,R):y.__proto__=R)}(d,j),d}(Error)},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SigninState=void 0;var M,o=function(){function R(M,z){for(var Y=0;Y<z.length;Y++){var X=z[Y];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(M,X.key,X)}}return function(M,z,Y){return z&&R(M.prototype,z),Y&&R(M,Y),M}}(),x=k(0),L=k(9),j=k(4),d=(M=k(14))&&M.__esModule?M:{default:M};function m(R,M){if(!(R instanceof M))throw new TypeError("Cannot call a class as a function")}function y(R,M){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||"object"!=typeof M&&"function"!=typeof M?R:M}S.SigninState=function(R){function M(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Y=z.nonce,X=z.authority,Q=z.client_id,W=z.redirect_uri,J=z.code_verifier,le=z.response_mode,U=z.client_secret,G=z.scope,$=z.extraTokenParams,ee=z.skipUserInfo;m(this,M);var _e=y(this,R.call(this,arguments[0]));if(!0===Y?_e._nonce=(0,d.default)():Y&&(_e._nonce=Y),!0===J?_e._code_verifier=(0,d.default)()+(0,d.default)()+(0,d.default)():J&&(_e._code_verifier=J),_e.code_verifier){var be=j.JoseUtil.hashString(_e.code_verifier,"SHA256");_e._code_challenge=j.JoseUtil.hexToBase64Url(be)}return _e._redirect_uri=W,_e._authority=X,_e._client_id=Q,_e._response_mode=le,_e._client_secret=U,_e._scope=G,_e._extraTokenParams=$,_e._skipUserInfo=ee,_e}return function(Y,X){if("function"!=typeof X&&null!==X)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Y.prototype=Object.create(X&&X.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,X):Y.__proto__=X)}(M,R),M.prototype.toStorageString=function(){return x.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},M.fromStorageString=function(Y){return x.Log.debug("SigninState.fromStorageString"),new M(JSON.parse(Y))},o(M,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),M}(L.State)},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(){return("undefined"!=o&&null!==o&&void 0!==o.getRandomValues?x:L)().replace(/-/g,"")};var o="undefined"!=typeof window?window.crypto||window.msCrypto:null;function x(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(j){return(j^o.getRandomValues(new Uint8Array(1))[0]&15>>j/4).toString(16)})}function L(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(j){return(j^16*Math.random()>>j/4).toString(16)})}O.exports=S.default},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.User=void 0;var o=function(){function L(j,d){for(var m=0;m<d.length;m++){var y=d[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(j,y.key,y)}}return function(j,d,m){return d&&L(j.prototype,d),m&&L(j,m),j}}(),x=k(0);S.User=function(){function L(j){var d=j.id_token,m=j.session_state,y=j.access_token,R=j.refresh_token,M=j.token_type,z=j.scope,Y=j.profile,X=j.expires_at,Q=j.state;(function(J,le){if(!(J instanceof le))throw new TypeError("Cannot call a class as a function")})(this,L),this.id_token=d,this.session_state=m,this.access_token=y,this.refresh_token=R,this.token_type=M,this.scope=z,this.profile=Y,this.expires_at=X,this.state=Q}return L.prototype.toStorageString=function(){return x.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},L.fromStorageString=function(d){return x.Log.debug("User.fromStorageString"),new L(JSON.parse(d))},o(L,[{key:"expires_in",get:function(){if(this.expires_at){var d=parseInt(Date.now()/1e3);return this.expires_at-d}},set:function(d){var m=parseInt(d);if("number"==typeof m&&m>0){var y=parseInt(Date.now()/1e3);this.expires_at=y+m}}},{key:"expired",get:function(){var d=this.expires_in;if(void 0!==d)return d<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),L}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.AccessTokenEvents=void 0;var o=k(0),x=k(46);function L(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}S.AccessTokenEvents=function(){function j(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=d.accessTokenExpiringNotificationTime,y=void 0===m?60:m,R=d.accessTokenExpiringTimer,M=void 0===R?new x.Timer("Access token expiring"):R,z=d.accessTokenExpiredTimer,Y=void 0===z?new x.Timer("Access token expired"):z;L(this,j),this._accessTokenExpiringNotificationTime=y,this._accessTokenExpiring=M,this._accessTokenExpired=Y}return j.prototype.load=function(m){if(m.access_token&&void 0!==m.expires_in){var y=m.expires_in;if(o.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",y),y>0){var R=y-this._accessTokenExpiringNotificationTime;R<=0&&(R=1),o.Log.debug("AccessTokenEvents.load: registering expiring timer in:",R),this._accessTokenExpiring.init(R)}else o.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var M=y+1;o.Log.debug("AccessTokenEvents.load: registering expired timer in:",M),this._accessTokenExpired.init(M)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},j.prototype.unload=function(){o.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},j.prototype.addAccessTokenExpiring=function(m){this._accessTokenExpiring.addHandler(m)},j.prototype.removeAccessTokenExpiring=function(m){this._accessTokenExpiring.removeHandler(m)},j.prototype.addAccessTokenExpired=function(m){this._accessTokenExpired.addHandler(m)},j.prototype.removeAccessTokenExpired=function(m){this._accessTokenExpired.removeHandler(m)},j}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Event=void 0;var o=k(0);S.Event=function(){function x(L){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,x),this._name=L,this._callbacks=[]}return x.prototype.addHandler=function(j){this._callbacks.push(j)},x.prototype.removeHandler=function(j){var d=this._callbacks.findIndex(function(m){return m===j});d>=0&&this._callbacks.splice(d,1)},x.prototype.raise=function(){o.Log.debug("Event: Raising event: "+this._name);for(var j=0;j<this._callbacks.length;j++){var d;(d=this._callbacks)[j].apply(d,arguments)}},x}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SessionMonitor=void 0;var o=function(){function m(y,R){for(var M=0;M<R.length;M++){var z=R[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(y,z.key,z)}}return function(y,R,M){return R&&m(y.prototype,R),M&&m(y,M),y}}(),x=k(0),L=k(19),j=k(1);function d(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}S.SessionMonitor=function(){function m(y){var R=this,M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.CheckSessionIFrame,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j.Global.timer;if(d(this,m),!y)throw x.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=y,this._CheckSessionIFrameCtor=M,this._timer=z,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(Y){Y?R._start(Y):R._settings.monitorAnonymousSession&&R._userManager.querySessionStatus().then(function(X){var Q={session_state:X.session_state};X.sub&&X.sid&&(Q.profile={sub:X.sub,sid:X.sid}),R._start(Q)}).catch(function(X){x.Log.error("SessionMonitor ctor: error from querySessionStatus:",X.message)})}).catch(function(Y){x.Log.error("SessionMonitor ctor: error from getUser:",Y.message)}))}return m.prototype._start=function(R){var M=this,z=R.session_state;z&&(R.profile?(this._sub=R.profile.sub,this._sid=R.profile.sid,x.Log.debug("SessionMonitor._start: session_state:",z,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,x.Log.debug("SessionMonitor._start: session_state:",z,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(z):this._metadataService.getCheckSessionIframe().then(function(Y){if(Y){x.Log.debug("SessionMonitor._start: Initializing check session iframe");var X=M._client_id,Q=M._checkSessionInterval,W=M._stopCheckSessionOnError;M._checkSessionIFrame=new M._CheckSessionIFrameCtor(M._callback.bind(M),X,Y,Q,W),M._checkSessionIFrame.load().then(function(){M._checkSessionIFrame.start(z)})}else x.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(Y){x.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",Y.message)}))},m.prototype._stop=function(){var R=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(x.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var M=this._timer.setInterval(function(){R._timer.clearInterval(M),R._userManager.querySessionStatus().then(function(z){var Y={session_state:z.session_state};z.sub&&z.sid&&(Y.profile={sub:z.sub,sid:z.sid}),R._start(Y)}).catch(function(z){x.Log.error("SessionMonitor: error from querySessionStatus:",z.message)})},1e3)},m.prototype._callback=function(){var R=this;this._userManager.querySessionStatus().then(function(M){var z=!0;M?M.sub===R._sub?(z=!1,R._checkSessionIFrame.start(M.session_state),M.sid===R._sid?x.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",M.session_state):(x.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",M.session_state),R._userManager.events._raiseUserSessionChanged())):x.Log.debug("SessionMonitor._callback: Different subject signed into OP:",M.sub):x.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),z&&(R._sub?(x.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),R._userManager.events._raiseUserSignedOut()):(x.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),R._userManager.events._raiseUserSignedIn()))}).catch(function(M){R._sub&&(x.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",M.message),R._userManager.events._raiseUserSignedOut())})},o(m,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),m}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CheckSessionIFrame=void 0;var o=k(0);function x(L,j){if(!(L instanceof j))throw new TypeError("Cannot call a class as a function")}S.CheckSessionIFrame=function(){function L(j,d,m,y){var R=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];x(this,L),this._callback=j,this._client_id=d,this._url=m,this._interval=y||2e3,this._stopOnError=R;var M=m.indexOf("/",m.indexOf("//")+2);this._frame_origin=m.substr(0,M),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=m}return L.prototype.load=function(){var d=this;return new Promise(function(m){d._frame.onload=function(){m()},window.document.body.appendChild(d._frame),d._boundMessageEvent=d._message.bind(d),window.addEventListener("message",d._boundMessageEvent,!1)})},L.prototype._message=function(d){d.origin===this._frame_origin&&d.source===this._frame.contentWindow&&("error"===d.data?(o.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===d.data?(o.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):o.Log.debug("CheckSessionIFrame: "+d.data+" message from check session op iframe"))},L.prototype.start=function(d){var m=this;if(this._session_state!==d){o.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=d;var y=function(){m._frame.contentWindow.postMessage(m._client_id+" "+m._session_state,m._frame_origin)};y(),this._timer=window.setInterval(y,this._interval)}},L.prototype.stop=function(){this._session_state=null,this._timer&&(o.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},L}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.TokenRevocationClient=void 0;var o=k(0),x=k(2),L=k(1);function j(y,R){if(!(y instanceof R))throw new TypeError("Cannot call a class as a function")}var d="access_token",m="refresh_token";S.TokenRevocationClient=function(){function y(R){var M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.Global.XMLHttpRequest,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.MetadataService;if(j(this,y),!R)throw o.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=R,this._XMLHttpRequestCtor=M,this._metadataService=new z(this._settings)}return y.prototype.revoke=function(M,z){var Y=this,X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!M)throw o.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(X!==d&&X!=m)throw o.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(Q){if(Q)return o.Log.debug("TokenRevocationClient.revoke: Revoking "+X),Y._revoke(Q,Y._settings.client_id,Y._settings.client_secret,M,X);if(z)throw o.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},y.prototype._revoke=function(M,z,Y,X,Q){var W=this;return new Promise(function(J,le){var U=new W._XMLHttpRequestCtor;U.open("POST",M),U.onload=function(){o.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",U.status),200===U.status?J():le(Error(U.statusText+" ("+U.status+")"))},U.onerror=function(){o.Log.debug("TokenRevocationClient.revoke: Network Error."),le("Network Error")};var G="client_id="+encodeURIComponent(z);Y&&(G+="&client_secret="+encodeURIComponent(Y)),G+="&token_type_hint="+encodeURIComponent(Q),G+="&token="+encodeURIComponent(X),U.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),U.send(G)})},y}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CordovaPopupWindow=void 0;var o=function(){function L(j,d){for(var m=0;m<d.length;m++){var y=d[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(j,y.key,y)}}return function(j,d,m){return d&&L(j.prototype,d),m&&L(j,m),j}}(),x=k(0);S.CordovaPopupWindow=function(){function L(j){var d=this;(function(y,R){if(!(y instanceof R))throw new TypeError("Cannot call a class as a function")})(this,L),this._promise=new Promise(function(m,y){d._resolve=m,d._reject=y}),this.features=j.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=j.popupWindowTarget||"_blank",this.redirect_uri=j.startUrl,x.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return L.prototype._isInAppBrowserInstalled=function(d){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(m){return d.hasOwnProperty(m)})},L.prototype.navigate=function(d){if(d&&d.url){if(!window.cordova)return this._error("cordova is undefined");var m=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(m))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(d.url,this.target,this.features),this._popup?(x.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},L.prototype._loadStartCallback=function(d){0===d.url.indexOf(this.redirect_uri)&&this._success({url:d.url})},L.prototype._exitCallback=function(d){this._error(d)},L.prototype._success=function(d){this._cleanup(),x.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(d)},L.prototype._error=function(d){this._cleanup(),x.Log.error(d),this._reject(new Error(d))},L.prototype.close=function(){this._cleanup()},L.prototype._cleanup=function(){this._popup&&(x.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},o(L,[{key:"promise",get:function(){return this._promise}}]),L}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var o=k(0),x=k(10),L=k(5),j=k(6),d=k(37),m=k(38),y=k(16),R=k(2),M=k(48),z=k(49),Y=k(19),X=k(20),Q=k(18),W=k(1),J=k(15),le=k(50);S.default={Version:le.Version,Log:o.Log,OidcClient:x.OidcClient,OidcClientSettings:L.OidcClientSettings,WebStorageStateStore:j.WebStorageStateStore,InMemoryWebStorage:d.InMemoryWebStorage,UserManager:m.UserManager,AccessTokenEvents:y.AccessTokenEvents,MetadataService:R.MetadataService,CordovaPopupNavigator:M.CordovaPopupNavigator,CordovaIFrameNavigator:z.CordovaIFrameNavigator,CheckSessionIFrame:Y.CheckSessionIFrame,TokenRevocationClient:X.TokenRevocationClient,SessionMonitor:Q.SessionMonitor,Global:W.Global,User:J.User},O.exports=S.default},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ClockService=function(){function o(){!function(L,j){if(!(L instanceof j))throw new TypeError("Cannot call a class as a function")}(this,o)}return o.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},o}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ResponseValidator=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(z){return typeof z}:function(z){return z&&"function"==typeof Symbol&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},x=k(0),L=k(2),j=k(25),d=k(11),m=k(12),y=k(4);function R(z,Y){if(!(z instanceof Y))throw new TypeError("Cannot call a class as a function")}var M=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];S.ResponseValidator=function(){function z(Y){var X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.MetadataService,Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j.UserInfoService,W=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.JoseUtil,J=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.TokenClient;if(R(this,z),!Y)throw x.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=Y,this._metadataService=new X(this._settings),this._userInfoService=new Q(this._settings),this._joseUtil=W,this._tokenClient=new J(this._settings)}return z.prototype.validateSigninResponse=function(X,Q){var W=this;return x.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(X,Q).then(function(J){return x.Log.debug("ResponseValidator.validateSigninResponse: state processed"),W._validateTokens(X,J).then(function(le){return x.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),W._processClaims(X,le).then(function(U){return x.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),U})})})},z.prototype.validateSignoutResponse=function(X,Q){return X.id!==Q.state?(x.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(x.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),Q.state=X.data,Q.error?(x.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",Q.error),Promise.reject(new m.ErrorResponse(Q))):Promise.resolve(Q))},z.prototype._processSigninParams=function(X,Q){if(X.id!==Q.state)return x.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!X.client_id)return x.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!X.authority)return x.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==X.authority)return x.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=X.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==X.client_id)return x.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=X.client_id;return x.Log.debug("ResponseValidator._processSigninParams: state validated"),Q.state=X.data,Q.error?(x.Log.warn("ResponseValidator._processSigninParams: Response was error",Q.error),Promise.reject(new m.ErrorResponse(Q))):X.nonce&&!Q.id_token?(x.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!X.nonce&&Q.id_token?(x.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):X.code_verifier&&!Q.code?(x.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!X.code_verifier&&Q.code?(x.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(Q.scope||(Q.scope=X.scope),Promise.resolve(Q))},z.prototype._processClaims=function(X,Q){var W=this;if(Q.isOpenIdConnect){if(x.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),Q.profile=this._filterProtocolClaims(Q.profile),!0!==X.skipUserInfo&&this._settings.loadUserInfo&&Q.access_token)return x.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(Q.access_token).then(function(J){return x.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),J.sub!==Q.profile.sub?(x.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(Q.profile=W._mergeClaims(Q.profile,J),x.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",Q.profile),Q)});x.Log.debug("ResponseValidator._processClaims: not loading user info")}else x.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(Q)},z.prototype._mergeClaims=function(X,Q){var W=Object.assign({},X);for(var J in Q){var le=Q[J];Array.isArray(le)||(le=[le]);for(var U=0;U<le.length;U++){var G=le[U];W[J]?Array.isArray(W[J])?W[J].indexOf(G)<0&&W[J].push(G):W[J]!==G&&(W[J]="object"===(void 0===G?"undefined":o(G))&&this._settings.mergeClaims?this._mergeClaims(W[J],G):[W[J],G]):W[J]=G}}return W},z.prototype._filterProtocolClaims=function(X){x.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",X);var Q=Object.assign({},X);return this._settings._filterProtocolClaims?(M.forEach(function(W){delete Q[W]}),x.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",Q)):x.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),Q},z.prototype._validateTokens=function(X,Q){return Q.code?(x.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(X,Q)):Q.id_token?Q.access_token?(x.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(X,Q)):(x.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(X,Q)):(x.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(Q))},z.prototype._processCode=function(X,Q){var W=this,J={client_id:X.client_id,client_secret:X.client_secret,code:Q.code,redirect_uri:X.redirect_uri,code_verifier:X.code_verifier};return X.extraTokenParams&&"object"===o(X.extraTokenParams)&&Object.assign(J,X.extraTokenParams),this._tokenClient.exchangeCode(J).then(function(le){for(var U in le)Q[U]=le[U];return Q.id_token?(x.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),W._validateIdTokenAttributes(X,Q)):(x.Log.debug("ResponseValidator._processCode: token response successful, returning response"),Q)})},z.prototype._validateIdTokenAttributes=function(X,Q){var W=this;return this._metadataService.getIssuer().then(function(J){var le=X.client_id,U=W._settings.clockSkew;return x.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",U),W._settings.getEpochTime().then(function(G){return W._joseUtil.validateJwtAttributes(Q.id_token,J,le,U,G).then(function($){return X.nonce&&X.nonce!==$.nonce?(x.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):$.sub?(Q.profile=$,Q):(x.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},z.prototype._validateIdTokenAndAccessToken=function(X,Q){var W=this;return this._validateIdToken(X,Q).then(function(J){return W._validateAccessToken(J)})},z.prototype._getSigningKeyForJwt=function(X){var Q=this;return this._metadataService.getSigningKeys().then(function(W){var J=X.header.kid;if(!W)return x.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));x.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var le=void 0;if(J)le=W.filter(function(U){return U.kid===J})[0];else{if((W=Q._filterByAlg(W,X.header.alg)).length>1)return x.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));le=W[0]}return Promise.resolve(le)})},z.prototype._getSigningKeyForJwtWithSingleRetry=function(X){var Q=this;return this._getSigningKeyForJwt(X).then(function(W){return W?Promise.resolve(W):(Q._metadataService.resetSigningKeys(),Q._getSigningKeyForJwt(X))})},z.prototype._validateIdToken=function(X,Q){var W=this;if(!X.nonce)return x.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var J=this._joseUtil.parseJwt(Q.id_token);return J&&J.header&&J.payload?X.nonce!==J.payload.nonce?(x.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(le){return x.Log.debug("ResponseValidator._validateIdToken: Received issuer"),W._getSigningKeyForJwtWithSingleRetry(J).then(function(U){if(!U)return x.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var G=X.client_id,$=W._settings.clockSkew;return x.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",$),W._joseUtil.validateJwt(Q.id_token,U,le,G,$).then(function(){return x.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),J.payload.sub?(Q.profile=J.payload,Q):(x.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(x.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",J),Promise.reject(new Error("Failed to parse id_token")))},z.prototype._filterByAlg=function(X,Q){var W=null;if(Q.startsWith("RS"))W="RSA";else if(Q.startsWith("PS"))W="PS";else{if(!Q.startsWith("ES"))return x.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",Q),[];W="EC"}return x.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",W),X=X.filter(function(J){return J.kty===W}),x.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",W,X.length),X},z.prototype._validateAccessToken=function(X){if(!X.profile)return x.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!X.profile.at_hash)return x.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!X.id_token)return x.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var Q=this._joseUtil.parseJwt(X.id_token);if(!Q||!Q.header)return x.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",Q),Promise.reject(new Error("Failed to parse id_token"));var W=Q.header.alg;if(!W||5!==W.length)return x.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",W),Promise.reject(new Error("Unsupported alg: "+W));var J=W.substr(2,3);if(!J)return x.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",W,J),Promise.reject(new Error("Unsupported alg: "+W));if(256!==(J=parseInt(J))&&384!==J&&512!==J)return x.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",W,J),Promise.reject(new Error("Unsupported alg: "+W));var le="sha"+J,U=this._joseUtil.hashString(X.access_token,le);if(!U)return x.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",le),Promise.reject(new Error("Failed to validate at_hash"));var G=U.substr(0,U.length/2),$=this._joseUtil.hexToBase64Url(G);return $!==X.profile.at_hash?(x.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",$,X.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(x.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(X))},z}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UserInfoService=void 0;var o=k(7),x=k(2),L=k(0),j=k(4);function d(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}S.UserInfoService=function(){function m(y){var R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.MetadataService,z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:j.JoseUtil;if(d(this,m),!y)throw L.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=y,this._jsonService=new R(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new M(this._settings),this._joseUtil=z}return m.prototype.getClaims=function(R){var M=this;return R?this._metadataService.getUserInfoEndpoint().then(function(z){return L.Log.debug("UserInfoService.getClaims: received userinfo url",z),M._jsonService.getJson(z,R).then(function(Y){return L.Log.debug("UserInfoService.getClaims: claims received",Y),Y})}):(L.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},m.prototype._getClaimsFromJwt=function(R){var M=this;try{var z=this._joseUtil.parseJwt(R.responseText);if(!z||!z.header||!z.payload)return L.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",z),Promise.reject(new Error("Failed to parse id_token"));var Y=z.header.kid,X=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":X=this._metadataService.getIssuer();break;case"ANY":X=Promise.resolve(z.payload.iss);break;default:X=Promise.resolve(this._settings.userInfoJwtIssuer)}return X.then(function(Q){return L.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+Q),M._metadataService.getSigningKeys().then(function(W){if(!W)return L.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));L.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var J=void 0;if(Y)J=W.filter(function(G){return G.kid===Y})[0];else{if((W=M._filterByAlg(W,z.header.alg)).length>1)return L.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));J=W[0]}if(!J)return L.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var le=M._settings.client_id,U=M._settings.clockSkew;return L.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",U),M._joseUtil.validateJwt(R.responseText,J,Q,le,U,void 0,!0).then(function(){return L.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),z.payload})})})}catch(Q){return L.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",Q.message),void reject(Q)}},m.prototype._filterByAlg=function(R,M){var z=null;if(M.startsWith("RS"))z="RSA";else if(M.startsWith("PS"))z="PS";else{if(!M.startsWith("ES"))return L.Log.debug("UserInfoService._filterByAlg: alg not supported: ",M),[];z="EC"}return L.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",z),R=R.filter(function(Y){return Y.kty===z}),L.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",z,R.length),R},m}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.AllowedSigningAlgs=S.b64tohex=S.hextob64u=S.crypto=S.X509=S.KeyUtil=S.jws=void 0;var o=k(27);S.jws=o.jws,S.KeyUtil=o.KEYUTIL,S.X509=o.X509,S.crypto=o.crypto,S.hextob64u=o.hextob64u,S.b64tohex=o.b64tohex,S.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(O,S,k){"use strict";(function(o){Object.defineProperty(S,"__esModule",{value:!0});var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},L={userAgent:!1},j={};if(void 0===d)var d={};d.lang={extend:function(b,F,P){if(!F||!b)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Z=function(){};if(Z.prototype=F.prototype,b.prototype=new Z,b.prototype.constructor=b,b.superclass=F.prototype,F.prototype.constructor==Object.prototype.constructor&&(F.prototype.constructor=F),P){var ae;for(ae in P)b.prototype[ae]=P[ae];var ue=function(){},Te=["toString","valueOf"];try{/MSIE/.test(L.userAgent)&&(ue=function(Me,ze){for(ae=0;ae<Te.length;ae+=1){var Ue=Te[ae],qe=ze[Ue];"function"==typeof qe&&qe!=Object.prototype[Ue]&&(Me[Ue]=qe)}})}catch{}ue(b.prototype,P)}}};var m,y,R,M,z,Y,X,Q,W,J,le,b,F,P,Z,U=U||(m=Math,R=(y={}).lib={},M=R.Base=function(){function C(){}return{extend:function(F){C.prototype=this;var P=new C;return F&&P.mixIn(F),P.hasOwnProperty("init")||(P.init=function(){P.$super.init.apply(this,arguments)}),P.init.prototype=P,P.$super=this,P},create:function(){var F=this.extend();return F.init.apply(F,arguments),F},init:function(){},mixIn:function(F){for(var P in F)F.hasOwnProperty(P)&&(this[P]=F[P]);F.hasOwnProperty("toString")&&(this.toString=F.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),z=R.WordArray=M.extend({init:function(b,F){b=this.words=b||[],this.sigBytes=F??4*b.length},toString:function(b){return(b||X).stringify(this)},concat:function(b){var F=this.words,P=b.words,Z=this.sigBytes,ae=b.sigBytes;if(this.clamp(),Z%4)for(var ue=0;ue<ae;ue++)F[Z+ue>>>2]|=(P[ue>>>2]>>>24-ue%4*8&255)<<24-(Z+ue)%4*8;else for(ue=0;ue<ae;ue+=4)F[Z+ue>>>2]=P[ue>>>2];return this.sigBytes+=ae,this},clamp:function(){var b=this.words,F=this.sigBytes;b[F>>>2]&=4294967295<<32-F%4*8,b.length=m.ceil(F/4)},clone:function(){var b=M.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var F=[],P=0;P<b;P+=4)F.push(4294967296*m.random()|0);return new z.init(F,b)}}),Y=y.enc={},X=Y.Hex={stringify:function(b){for(var F=b.words,P=b.sigBytes,Z=[],ae=0;ae<P;ae++){var ue=F[ae>>>2]>>>24-ae%4*8&255;Z.push((ue>>>4).toString(16)),Z.push((15&ue).toString(16))}return Z.join("")},parse:function(b){for(var F=b.length,P=[],Z=0;Z<F;Z+=2)P[Z>>>3]|=parseInt(b.substr(Z,2),16)<<24-Z%8*4;return new z.init(P,F/2)}},Q=Y.Latin1={stringify:function(b){for(var F=b.words,P=b.sigBytes,Z=[],ae=0;ae<P;ae++)Z.push(String.fromCharCode(F[ae>>>2]>>>24-ae%4*8&255));return Z.join("")},parse:function(b){for(var F=b.length,P=[],Z=0;Z<F;Z++)P[Z>>>2]|=(255&b.charCodeAt(Z))<<24-Z%4*8;return new z.init(P,F)}},W=Y.Utf8={stringify:function(b){try{return decodeURIComponent(escape(Q.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return Q.parse(unescape(encodeURIComponent(b)))}},J=R.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new z.init,this._nDataBytes=0},_append:function(b){"string"==typeof b&&(b=W.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var F=this._data,P=F.words,Z=F.sigBytes,ae=this.blockSize,ue=Z/(4*ae),Te=(ue=b?m.ceil(ue):m.max((0|ue)-this._minBufferSize,0))*ae,we=m.min(4*Te,Z);if(Te){for(var Me=0;Me<Te;Me+=ae)this._doProcessBlock(P,Me);var ze=P.splice(0,Te);F.sigBytes-=we}return new z.init(ze,we)},clone:function(){var b=M.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0}),R.Hasher=J.extend({cfg:M.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){J.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){return b&&this._append(b),this._doFinalize()},blockSize:16,_createHelper:function(b){return function(F,P){return new b.init(P).finalize(F)}},_createHmacHelper:function(b){return function(F,P){return new le.HMAC.init(b,P).finalize(F)}}}),le=y.algo={},y);F=(b=U).lib,P=F.Base,Z=F.WordArray,(b=b.x64={}).Word=P.extend({init:function(ue,Te){this.high=ue,this.low=Te}}),b.WordArray=P.extend({init:function(ue,Te){ue=this.words=ue||[],this.sigBytes=Te??8*ue.length},toX32:function(){for(var ue=this.words,Te=ue.length,we=[],Me=0;Me<Te;Me++){var ze=ue[Me];we.push(ze.high),we.push(ze.low)}return Z.create(we,this.sigBytes)},clone:function(){for(var ue=P.clone.call(this),Te=ue.words=this.words.slice(0),we=Te.length,Me=0;Me<we;Me++)Te[Me]=Te[Me].clone();return ue}}),function(){var b=U.lib.WordArray;U.enc.Base64={stringify:function(P){var Z=P.words,ae=P.sigBytes,ue=this._map;P.clamp(),P=[];for(var Te=0;Te<ae;Te+=3)for(var we=(Z[Te>>>2]>>>24-Te%4*8&255)<<16|(Z[Te+1>>>2]>>>24-(Te+1)%4*8&255)<<8|Z[Te+2>>>2]>>>24-(Te+2)%4*8&255,Me=0;4>Me&&Te+.75*Me<ae;Me++)P.push(ue.charAt(we>>>6*(3-Me)&63));if(Z=ue.charAt(64))for(;P.length%4;)P.push(Z);return P.join("")},parse:function(P){var Z=P.length,ae=this._map;(ue=ae.charAt(64))&&-1!=(ue=P.indexOf(ue))&&(Z=ue);for(var ue=[],Te=0,we=0;we<Z;we++)if(we%4){var Me=ae.indexOf(P.charAt(we-1))<<we%4*2,ze=ae.indexOf(P.charAt(we))>>>6-we%4*2;ue[Te>>>2]|=(Me|ze)<<24-Te%4*8,Te++}return b.create(ue,Te)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(C){for(var b=U,F=(Z=b.lib).WordArray,P=Z.Hasher,Z=b.algo,ae=[],ue=[],Te=function(gt){return 4294967296*(gt-(0|gt))|0},we=2,Me=0;64>Me;){var ze;e:{for(var Ue=C.sqrt(ze=we),qe=2;qe<=Ue;qe++)if(!(ze%qe)){ze=!1;break e}ze=!0}ze&&(8>Me&&(ae[Me]=Te(C.pow(we,.5))),ue[Me]=Te(C.pow(we,1/3)),Me++),we++}var Ye=[];Z=Z.SHA256=P.extend({_doReset:function(){this._hash=new F.init(ae.slice(0))},_doProcessBlock:function(gt,vt){for(var ke=this._hash.words,He=ke[0],Xe=ke[1],Qe=ke[2],dt=ke[3],yt=ke[4],zt=ke[5],It=ke[6],xn=ke[7],Bt=0;64>Bt;Bt++){if(16>Bt)Ye[Bt]=0|gt[vt+Bt];else{var Xt=Ye[Bt-15],Yn=Ye[Bt-2];Ye[Bt]=((Xt<<25|Xt>>>7)^(Xt<<14|Xt>>>18)^Xt>>>3)+Ye[Bt-7]+((Yn<<15|Yn>>>17)^(Yn<<13|Yn>>>19)^Yn>>>10)+Ye[Bt-16]}Xt=xn+((yt<<26|yt>>>6)^(yt<<21|yt>>>11)^(yt<<7|yt>>>25))+(yt&zt^~yt&It)+ue[Bt]+Ye[Bt],Yn=((He<<30|He>>>2)^(He<<19|He>>>13)^(He<<10|He>>>22))+(He&Xe^He&Qe^Xe&Qe),xn=It,It=zt,zt=yt,yt=dt+Xt|0,dt=Qe,Qe=Xe,Xe=He,He=Xt+Yn|0}ke[0]=ke[0]+He|0,ke[1]=ke[1]+Xe|0,ke[2]=ke[2]+Qe|0,ke[3]=ke[3]+dt|0,ke[4]=ke[4]+yt|0,ke[5]=ke[5]+zt|0,ke[6]=ke[6]+It|0,ke[7]=ke[7]+xn|0},_doFinalize:function(){var gt=this._data,vt=gt.words,ke=8*this._nDataBytes,He=8*gt.sigBytes;return vt[He>>>5]|=128<<24-He%32,vt[14+(He+64>>>9<<4)]=C.floor(ke/4294967296),vt[15+(He+64>>>9<<4)]=ke,gt.sigBytes=4*vt.length,this._process(),this._hash},clone:function(){var gt=P.clone.call(this);return gt._hash=this._hash.clone(),gt}}),b.SHA256=P._createHelper(Z),b.HmacSHA256=P._createHmacHelper(Z)}(Math),function(){function C(){return P.create.apply(P,arguments)}for(var b=U,F=b.lib.Hasher,P=(ae=b.x64).Word,Z=ae.WordArray,ae=b.algo,ue=[C(1116352408,3609767458),C(1899447441,602891725),C(3049323471,3964484399),C(3921009573,2173295548),C(961987163,4081628472),C(1508970993,3053834265),C(2453635748,2937671579),C(2870763221,3664609560),C(3624381080,2734883394),C(310598401,1164996542),C(607225278,1323610764),C(1426881987,3590304994),C(1925078388,4068182383),C(2162078206,991336113),C(2614888103,633803317),C(3248222580,3479774868),C(3835390401,2666613458),C(4022224774,944711139),C(264347078,2341262773),C(604807628,2007800933),C(770255983,1495990901),C(1249150122,1856431235),C(1555081692,3175218132),C(1996064986,2198950837),C(2554220882,3999719339),C(2821834349,766784016),C(2952996808,2566594879),C(3210313671,3203337956),C(3336571891,1034457026),C(3584528711,2466948901),C(113926993,3758326383),C(338241895,168717936),C(666307205,1188179964),C(773529912,1546045734),C(1294757372,1522805485),C(1396182291,2643833823),C(1695183700,2343527390),C(1986661051,1014477480),C(2177026350,1206759142),C(2456956037,344077627),C(2730485921,1290863460),C(2820302411,3158454273),C(3259730800,3505952657),C(3345764771,106217008),C(3516065817,3606008344),C(3600352804,1432725776),C(4094571909,1467031594),C(275423344,851169720),C(430227734,3100823752),C(506948616,1363258195),C(659060556,3750685593),C(883997877,3785050280),C(958139571,3318307427),C(1322822218,3812723403),C(1537002063,2003034995),C(1747873779,3602036899),C(1955562222,1575990012),C(2024104815,1125592928),C(2227730452,2716904306),C(2361852424,442776044),C(2428436474,593698344),C(2756734187,3733110249),C(3204031479,2999351573),C(3329325298,3815920427),C(3391569614,3928383900),C(3515267271,566280711),C(3940187606,3454069534),C(4118630271,4000239992),C(116418474,1914138554),C(174292421,2731055270),C(289380356,3203993006),C(460393269,320620315),C(685471733,587496836),C(852142971,1086792851),C(1017036298,365543100),C(1126000580,2618297676),C(1288033470,3409855158),C(1501505948,4234509866),C(1607167915,987167468),C(1816402316,1246189591)],Te=[],we=0;80>we;we++)Te[we]=C();ae=ae.SHA512=F.extend({_doReset:function(){this._hash=new Z.init([new P.init(1779033703,4089235720),new P.init(3144134277,2227873595),new P.init(1013904242,4271175723),new P.init(2773480762,1595750129),new P.init(1359893119,2917565137),new P.init(2600822924,725511199),new P.init(528734635,4215389547),new P.init(1541459225,327033209)])},_doProcessBlock:function(ze,Ue){for(var qe=(Xe=this._hash.words)[0],Ye=Xe[1],lt=Xe[2],gt=Xe[3],vt=Xe[4],ke=Xe[5],He=Xe[6],Xe=Xe[7],Qe=qe.high,dt=qe.low,yt=Ye.high,zt=Ye.low,It=lt.high,xn=lt.low,Bt=gt.high,Xt=gt.low,Yn=vt.high,pi=vt.low,ci=ke.high,nr=ke.low,Yi=He.high,Fi=He.low,Ai=Xe.high,Ri=Xe.low,ki=Qe,ir=dt,Rs=yt,bo=zt,Ds=It,Ca=xn,gl=Bt,wa=Xt,ro=Yn,wr=pi,Os=ci,Sa=nr,vl=Yi,yl=Fi,ts=Ai,ii=Ri,fr=0;80>fr;fr++){var Ea=Te[fr];if(16>fr)var Uo=Ea.high=0|ze[Ue+2*fr],Bn=Ea.low=0|ze[Ue+2*fr+1];else{Uo=((Bn=(Uo=Te[fr-15]).high)>>>1|(oo=Uo.low)<<31)^(Bn>>>8|oo<<24)^Bn>>>7;var oo=(oo>>>1|Bn<<31)^(oo>>>8|Bn<<24)^(oo>>>7|Bn<<25),Co=((Bn=(Co=Te[fr-2]).high)>>>19|(Di=Co.low)<<13)^(Bn<<3|Di>>>29)^Bn>>>6,Di=(Di>>>19|Bn<<13)^(Di<<3|Bn>>>29)^(Di>>>6|Bn<<26),cc=(Bn=Te[fr-7]).high,sa=(Ta=Te[fr-16]).high,Ta=Ta.low;Uo=(Uo=(Uo=Uo+cc+((Bn=oo+Bn.low)>>>0<oo>>>0?1:0))+Co+((Bn+=Di)>>>0<Di>>>0?1:0))+sa+((Bn+=Ta)>>>0<Ta>>>0?1:0),Ea.high=Uo,Ea.low=Bn}cc=ro&Os^~ro&vl,Ta=wr&Sa^~wr&yl,Ea=ki&Rs^ki&Ds^Rs&Ds;var uc=ir&bo^ir&Ca^bo&Ca,dc=(oo=(ki>>>28|ir<<4)^(ki<<30|ir>>>2)^(ki<<25|ir>>>7),Co=(ir>>>28|ki<<4)^(ir<<30|ki>>>2)^(ir<<25|ki>>>7),(Di=ue[fr]).high),fc=Di.low;sa=ts+((ro>>>14|wr<<18)^(ro>>>18|wr<<14)^(ro<<23|wr>>>9))+((Di=ii+((wr>>>14|ro<<18)^(wr>>>18|ro<<14)^(wr<<23|ro>>>9)))>>>0<ii>>>0?1:0),ts=vl,ii=yl,vl=Os,yl=Sa,Os=ro,Sa=wr,ro=gl+(sa=(sa=(sa=sa+cc+((Di+=Ta)>>>0<Ta>>>0?1:0))+dc+((Di+=fc)>>>0<fc>>>0?1:0))+Uo+((Di+=Bn)>>>0<Bn>>>0?1:0))+((wr=wa+Di|0)>>>0<wa>>>0?1:0)|0,gl=Ds,wa=Ca,Ds=Rs,Ca=bo,Rs=ki,bo=ir,ki=sa+(Ea=oo+Ea+((Bn=Co+uc)>>>0<Co>>>0?1:0))+((ir=Di+Bn|0)>>>0<Di>>>0?1:0)|0}dt=qe.low=dt+ir,qe.high=Qe+ki+(dt>>>0<ir>>>0?1:0),zt=Ye.low=zt+bo,Ye.high=yt+Rs+(zt>>>0<bo>>>0?1:0),xn=lt.low=xn+Ca,lt.high=It+Ds+(xn>>>0<Ca>>>0?1:0),Xt=gt.low=Xt+wa,gt.high=Bt+gl+(Xt>>>0<wa>>>0?1:0),pi=vt.low=pi+wr,vt.high=Yn+ro+(pi>>>0<wr>>>0?1:0),nr=ke.low=nr+Sa,ke.high=ci+Os+(nr>>>0<Sa>>>0?1:0),Fi=He.low=Fi+yl,He.high=Yi+vl+(Fi>>>0<yl>>>0?1:0),Ri=Xe.low=Ri+ii,Xe.high=Ai+ts+(Ri>>>0<ii>>>0?1:0)},_doFinalize:function(){var ze=this._data,Ue=ze.words,qe=8*this._nDataBytes,Ye=8*ze.sigBytes;return Ue[Ye>>>5]|=128<<24-Ye%32,Ue[30+(Ye+128>>>10<<5)]=Math.floor(qe/4294967296),Ue[31+(Ye+128>>>10<<5)]=qe,ze.sigBytes=4*Ue.length,this._process(),this._hash.toX32()},clone:function(){var ze=F.clone.call(this);return ze._hash=this._hash.clone(),ze},blockSize:32}),b.SHA512=F._createHelper(ae),b.HmacSHA512=F._createHmacHelper(ae)}(),function(){var C=U,b=(Z=C.x64).Word,F=Z.WordArray,P=(Z=C.algo).SHA512,Z=Z.SHA384=P.extend({_doReset:function(){this._hash=new F.init([new b.init(3418070365,3238371032),new b.init(1654270250,914150663),new b.init(2438529370,812702999),new b.init(355462360,4144912697),new b.init(1731405415,4290775857),new b.init(2394180231,1750603025),new b.init(3675008525,1694076839),new b.init(1203062813,3204075428)])},_doFinalize:function(){var ue=P._doFinalize.call(this);return ue.sigBytes-=16,ue}});C.SHA384=P._createHelper(Z),C.HmacSHA384=P._createHmacHelper(Z)}();var G,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function ee(C){var b,F,P="";for(b=0;b+3<=C.length;b+=3)F=parseInt(C.substring(b,b+3),16),P+=$.charAt(F>>6)+$.charAt(63&F);for(b+1==C.length?(F=parseInt(C.substring(b,b+1),16),P+=$.charAt(F<<2)):b+2==C.length&&(F=parseInt(C.substring(b,b+2),16),P+=$.charAt(F>>2)+$.charAt((3&F)<<4));(3&P.length)>0;)P+="=";return P}function _e(C){var b,F,P,Z="",ae=0;for(b=0;b<C.length&&"="!=C.charAt(b);++b)(P=$.indexOf(C.charAt(b)))<0||(0==ae?(Z+=N(P>>2),F=3&P,ae=1):1==ae?(Z+=N(F<<2|P>>4),F=15&P,ae=2):2==ae?(Z+=N(F),Z+=N(P>>2),F=3&P,ae=3):(Z+=N(F<<2|P>>4),Z+=N(15&P),ae=0));return 1==ae&&(Z+=N(F<<2)),Z}function be(C){var b,F=_e(C),P=new Array;for(b=0;2*b<F.length;++b)P[b]=parseInt(F.substring(2*b,2*b+2),16);return P}function me(C,b,F){null!=C&&("number"==typeof C?this.fromNumber(C,b,F):this.fromString(C,null==b&&"string"!=typeof C?256:b))}function v(){return new me(null)}"Microsoft Internet Explorer"==L.appName?(me.prototype.am=function(b,F,P,Z,ae,ue){for(var Te=32767&F,we=F>>15;--ue>=0;){var Me=32767&this[b],ze=this[b++]>>15,Ue=we*Me+ze*Te;ae=((Me=Te*Me+((32767&Ue)<<15)+P[Z]+(1073741823&ae))>>>30)+(Ue>>>15)+we*ze+(ae>>>30),P[Z++]=1073741823&Me}return ae},G=30):"Netscape"!=L.appName?(me.prototype.am=function(b,F,P,Z,ae,ue){for(;--ue>=0;){var Te=F*this[b++]+P[Z]+ae;ae=Math.floor(Te/67108864),P[Z++]=67108863&Te}return ae},G=26):(me.prototype.am=function(b,F,P,Z,ae,ue){for(var Te=16383&F,we=F>>14;--ue>=0;){var Me=16383&this[b],ze=this[b++]>>14,Ue=we*Me+ze*Te;ae=((Me=Te*Me+((16383&Ue)<<14)+P[Z]+ae)>>28)+(Ue>>14)+we*ze,P[Z++]=268435455&Me}return ae},G=28),me.prototype.DB=G,me.prototype.DM=(1<<G)-1,me.prototype.DV=1<<G,me.prototype.FV=Math.pow(2,52),me.prototype.F1=52-G,me.prototype.F2=2*G-52;var T,_,E=new Array;for(T="0".charCodeAt(0),_=0;_<=9;++_)E[T++]=_;for(T="a".charCodeAt(0),_=10;_<36;++_)E[T++]=_;for(T="A".charCodeAt(0),_=10;_<36;++_)E[T++]=_;function N(C){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(C)}function A(C,b){return E[C.charCodeAt(b)]??-1}function ne(C){var b=v();return b.fromInt(C),b}function pe(C){var b,F=1;return 0!=(b=C>>>16)&&(C=b,F+=16),0!=(b=C>>8)&&(C=b,F+=8),0!=(b=C>>4)&&(C=b,F+=4),0!=(b=C>>2)&&(C=b,F+=2),0!=(b=C>>1)&&(C=b,F+=1),F}function Le(C){this.m=C}function oe(C){this.m=C,this.mp=C.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<C.DB-15)-1,this.mt2=2*C.t}function $e(C,b){return C&b}function ct(C,b){return C|b}function Ne(C,b){return C^b}function Je(C,b){return C&~b}function Ze(C){if(0==C)return-1;var b=0;return 0==(65535&C)&&(C>>=16,b+=16),0==(255&C)&&(C>>=8,b+=8),0==(15&C)&&(C>>=4,b+=4),0==(3&C)&&(C>>=2,b+=2),0==(1&C)&&++b,b}function mt(C){for(var b=0;0!=C;)C&=C-1,++b;return b}function nt(){}function Ge(C){return C}function it(C){this.r2=v(),this.q3=v(),me.ONE.dlShiftTo(2*C.t,this.r2),this.mu=this.r2.divide(C),this.m=C}Le.prototype.convert=function(b){return b.s<0||b.compareTo(this.m)>=0?b.mod(this.m):b},Le.prototype.revert=function(b){return b},Le.prototype.reduce=function(b){b.divRemTo(this.m,null,b)},Le.prototype.mulTo=function(b,F,P){b.multiplyTo(F,P),this.reduce(P)},Le.prototype.sqrTo=function(b,F){b.squareTo(F),this.reduce(F)},oe.prototype.convert=function(b){var F=v();return b.abs().dlShiftTo(this.m.t,F),F.divRemTo(this.m,null,F),b.s<0&&F.compareTo(me.ZERO)>0&&this.m.subTo(F,F),F},oe.prototype.revert=function(b){var F=v();return b.copyTo(F),this.reduce(F),F},oe.prototype.reduce=function(b){for(;b.t<=this.mt2;)b[b.t++]=0;for(var F=0;F<this.m.t;++F){var P=32767&b[F],Z=P*this.mpl+((P*this.mph+(b[F]>>15)*this.mpl&this.um)<<15)&b.DM;for(b[P=F+this.m.t]+=this.m.am(0,Z,b,F,0,this.m.t);b[P]>=b.DV;)b[P]-=b.DV,b[++P]++}b.clamp(),b.drShiftTo(this.m.t,b),b.compareTo(this.m)>=0&&b.subTo(this.m,b)},oe.prototype.mulTo=function(b,F,P){b.multiplyTo(F,P),this.reduce(P)},oe.prototype.sqrTo=function(b,F){b.squareTo(F),this.reduce(F)},me.prototype.copyTo=function(b){for(var F=this.t-1;F>=0;--F)b[F]=this[F];b.t=this.t,b.s=this.s},me.prototype.fromInt=function(b){this.t=1,this.s=b<0?-1:0,b>0?this[0]=b:b<-1?this[0]=b+this.DV:this.t=0},me.prototype.fromString=function(b,F){var P;if(16==F)P=4;else if(8==F)P=3;else if(256==F)P=8;else if(2==F)P=1;else if(32==F)P=5;else{if(4!=F)return void this.fromRadix(b,F);P=2}this.t=0,this.s=0;for(var Z=b.length,ae=!1,ue=0;--Z>=0;){var Te=8==P?255&b[Z]:A(b,Z);Te<0?"-"==b.charAt(Z)&&(ae=!0):(ae=!1,0==ue?this[this.t++]=Te:ue+P>this.DB?(this[this.t-1]|=(Te&(1<<this.DB-ue)-1)<<ue,this[this.t++]=Te>>this.DB-ue):this[this.t-1]|=Te<<ue,(ue+=P)>=this.DB&&(ue-=this.DB))}8==P&&0!=(128&b[0])&&(this.s=-1,ue>0&&(this[this.t-1]|=(1<<this.DB-ue)-1<<ue)),this.clamp(),ae&&me.ZERO.subTo(this,this)},me.prototype.clamp=function(){for(var b=this.s&this.DM;this.t>0&&this[this.t-1]==b;)--this.t},me.prototype.dlShiftTo=function(b,F){var P;for(P=this.t-1;P>=0;--P)F[P+b]=this[P];for(P=b-1;P>=0;--P)F[P]=0;F.t=this.t+b,F.s=this.s},me.prototype.drShiftTo=function(b,F){for(var P=b;P<this.t;++P)F[P-b]=this[P];F.t=Math.max(this.t-b,0),F.s=this.s},me.prototype.lShiftTo=function(b,F){var P,Z=b%this.DB,ae=this.DB-Z,ue=(1<<ae)-1,Te=Math.floor(b/this.DB),we=this.s<<Z&this.DM;for(P=this.t-1;P>=0;--P)F[P+Te+1]=this[P]>>ae|we,we=(this[P]&ue)<<Z;for(P=Te-1;P>=0;--P)F[P]=0;F[Te]=we,F.t=this.t+Te+1,F.s=this.s,F.clamp()},me.prototype.rShiftTo=function(b,F){F.s=this.s;var P=Math.floor(b/this.DB);if(P>=this.t)F.t=0;else{var Z=b%this.DB,ae=this.DB-Z,ue=(1<<Z)-1;F[0]=this[P]>>Z;for(var Te=P+1;Te<this.t;++Te)F[Te-P-1]|=(this[Te]&ue)<<ae,F[Te-P]=this[Te]>>Z;Z>0&&(F[this.t-P-1]|=(this.s&ue)<<ae),F.t=this.t-P,F.clamp()}},me.prototype.subTo=function(b,F){for(var P=0,Z=0,ae=Math.min(b.t,this.t);P<ae;)Z+=this[P]-b[P],F[P++]=Z&this.DM,Z>>=this.DB;if(b.t<this.t){for(Z-=b.s;P<this.t;)Z+=this[P],F[P++]=Z&this.DM,Z>>=this.DB;Z+=this.s}else{for(Z+=this.s;P<b.t;)Z-=b[P],F[P++]=Z&this.DM,Z>>=this.DB;Z-=b.s}F.s=Z<0?-1:0,Z<-1?F[P++]=this.DV+Z:Z>0&&(F[P++]=Z),F.t=P,F.clamp()},me.prototype.multiplyTo=function(b,F){var P=this.abs(),Z=b.abs(),ae=P.t;for(F.t=ae+Z.t;--ae>=0;)F[ae]=0;for(ae=0;ae<Z.t;++ae)F[ae+P.t]=P.am(0,Z[ae],F,ae,0,P.t);F.s=0,F.clamp(),this.s!=b.s&&me.ZERO.subTo(F,F)},me.prototype.squareTo=function(b){for(var F=this.abs(),P=b.t=2*F.t;--P>=0;)b[P]=0;for(P=0;P<F.t-1;++P){var Z=F.am(P,F[P],b,2*P,0,1);(b[P+F.t]+=F.am(P+1,2*F[P],b,2*P+1,Z,F.t-P-1))>=F.DV&&(b[P+F.t]-=F.DV,b[P+F.t+1]=1)}b.t>0&&(b[b.t-1]+=F.am(P,F[P],b,2*P,0,1)),b.s=0,b.clamp()},me.prototype.divRemTo=function(b,F,P){var Z=b.abs();if(!(Z.t<=0)){var ae=this.abs();if(ae.t<Z.t)return null!=F&&F.fromInt(0),void(null!=P&&this.copyTo(P));null==P&&(P=v());var ue=v(),Te=this.s,we=b.s,Me=this.DB-pe(Z[Z.t-1]);Me>0?(Z.lShiftTo(Me,ue),ae.lShiftTo(Me,P)):(Z.copyTo(ue),ae.copyTo(P));var ze=ue.t,Ue=ue[ze-1];if(0!=Ue){var qe=Ue*(1<<this.F1)+(ze>1?ue[ze-2]>>this.F2:0),Ye=this.FV/qe,lt=(1<<this.F1)/qe,gt=1<<this.F2,vt=P.t,ke=vt-ze,He=F??v();for(ue.dlShiftTo(ke,He),P.compareTo(He)>=0&&(P[P.t++]=1,P.subTo(He,P)),me.ONE.dlShiftTo(ze,He),He.subTo(ue,ue);ue.t<ze;)ue[ue.t++]=0;for(;--ke>=0;){var Xe=P[--vt]==Ue?this.DM:Math.floor(P[vt]*Ye+(P[vt-1]+gt)*lt);if((P[vt]+=ue.am(0,Xe,P,ke,0,ze))<Xe)for(ue.dlShiftTo(ke,He),P.subTo(He,P);P[vt]<--Xe;)P.subTo(He,P)}null!=F&&(P.drShiftTo(ze,F),Te!=we&&me.ZERO.subTo(F,F)),P.t=ze,P.clamp(),Me>0&&P.rShiftTo(Me,P),Te<0&&me.ZERO.subTo(P,P)}}},me.prototype.invDigit=function(){if(this.t<1)return 0;var b=this[0];if(0==(1&b))return 0;var F=3&b;return(F=(F=(F=(F=F*(2-(15&b)*F)&15)*(2-(255&b)*F)&255)*(2-((65535&b)*F&65535))&65535)*(2-b*F%this.DV)%this.DV)>0?this.DV-F:-F},me.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},me.prototype.exp=function(b,F){if(b>4294967295||b<1)return me.ONE;var P=v(),Z=v(),ae=F.convert(this),ue=pe(b)-1;for(ae.copyTo(P);--ue>=0;)if(F.sqrTo(P,Z),(b&1<<ue)>0)F.mulTo(Z,ae,P);else{var Te=P;P=Z,Z=Te}return F.revert(P)},me.prototype.toString=function(b){if(this.s<0)return"-"+this.negate().toString(b);var F;if(16==b)F=4;else if(8==b)F=3;else if(2==b)F=1;else if(32==b)F=5;else{if(4!=b)return this.toRadix(b);F=2}var P,Z=(1<<F)-1,ae=!1,ue="",Te=this.t,we=this.DB-Te*this.DB%F;if(Te-- >0)for(we<this.DB&&(P=this[Te]>>we)>0&&(ae=!0,ue=N(P));Te>=0;)we<F?(P=(this[Te]&(1<<we)-1)<<F-we,P|=this[--Te]>>(we+=this.DB-F)):(P=this[Te]>>(we-=F)&Z,we<=0&&(we+=this.DB,--Te)),P>0&&(ae=!0),ae&&(ue+=N(P));return ae?ue:"0"},me.prototype.negate=function(){var b=v();return me.ZERO.subTo(this,b),b},me.prototype.abs=function(){return this.s<0?this.negate():this},me.prototype.compareTo=function(b){var F=this.s-b.s;if(0!=F)return F;var P=this.t;if(0!=(F=P-b.t))return this.s<0?-F:F;for(;--P>=0;)if(0!=(F=this[P]-b[P]))return F;return 0},me.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+pe(this[this.t-1]^this.s&this.DM)},me.prototype.mod=function(b){var F=v();return this.abs().divRemTo(b,null,F),this.s<0&&F.compareTo(me.ZERO)>0&&b.subTo(F,F),F},me.prototype.modPowInt=function(b,F){var P;return P=b<256||F.isEven()?new Le(F):new oe(F),this.exp(b,P)},me.ZERO=ne(0),me.ONE=ne(1),nt.prototype.convert=Ge,nt.prototype.revert=Ge,nt.prototype.mulTo=function(b,F,P){b.multiplyTo(F,P)},nt.prototype.sqrTo=function(b,F){b.squareTo(F)},it.prototype.convert=function(b){if(b.s<0||b.t>2*this.m.t)return b.mod(this.m);if(b.compareTo(this.m)<0)return b;var F=v();return b.copyTo(F),this.reduce(F),F},it.prototype.revert=function(b){return b},it.prototype.reduce=function(b){for(b.drShiftTo(this.m.t-1,this.r2),b.t>this.m.t+1&&(b.t=this.m.t+1,b.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);b.compareTo(this.r2)<0;)b.dAddOffset(1,this.m.t+1);for(b.subTo(this.r2,b);b.compareTo(this.m)>=0;)b.subTo(this.m,b)},it.prototype.mulTo=function(b,F,P){b.multiplyTo(F,P),this.reduce(P)},it.prototype.sqrTo=function(b,F){b.squareTo(F),this.reduce(F)};var De,Ve,de,fe=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],te=(1<<26)/fe[fe.length-1];function se(){this.i=0,this.j=0,this.S=new Array}function ve(){!function(b){Ve[de++]^=255&b,Ve[de++]^=b>>8&255,Ve[de++]^=b>>16&255,Ve[de++]^=b>>24&255,de>=256&&(de-=256)}((new Date).getTime())}if(me.prototype.chunkSize=function(b){return Math.floor(Math.LN2*this.DB/Math.log(b))},me.prototype.toRadix=function(b){if(null==b&&(b=10),0==this.signum()||b<2||b>36)return"0";var F=this.chunkSize(b),P=Math.pow(b,F),Z=ne(P),ae=v(),ue=v(),Te="";for(this.divRemTo(Z,ae,ue);ae.signum()>0;)Te=(P+ue.intValue()).toString(b).substr(1)+Te,ae.divRemTo(Z,ae,ue);return ue.intValue().toString(b)+Te},me.prototype.fromRadix=function(b,F){this.fromInt(0),null==F&&(F=10);for(var P=this.chunkSize(F),Z=Math.pow(F,P),ae=!1,ue=0,Te=0,we=0;we<b.length;++we){var Me=A(b,we);Me<0?"-"==b.charAt(we)&&0==this.signum()&&(ae=!0):(Te=F*Te+Me,++ue>=P&&(this.dMultiply(Z),this.dAddOffset(Te,0),ue=0,Te=0))}ue>0&&(this.dMultiply(Math.pow(F,ue)),this.dAddOffset(Te,0)),ae&&me.ZERO.subTo(this,this)},me.prototype.fromNumber=function(b,F,P){if("number"==typeof F)if(b<2)this.fromInt(1);else for(this.fromNumber(b,P),this.testBit(b-1)||this.bitwiseTo(me.ONE.shiftLeft(b-1),ct,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(F);)this.dAddOffset(2,0),this.bitLength()>b&&this.subTo(me.ONE.shiftLeft(b-1),this);else{var Z=new Array,ae=7&b;Z.length=1+(b>>3),F.nextBytes(Z),ae>0?Z[0]&=(1<<ae)-1:Z[0]=0,this.fromString(Z,256)}},me.prototype.bitwiseTo=function(b,F,P){var Z,ae,ue=Math.min(b.t,this.t);for(Z=0;Z<ue;++Z)P[Z]=F(this[Z],b[Z]);if(b.t<this.t){for(ae=b.s&this.DM,Z=ue;Z<this.t;++Z)P[Z]=F(this[Z],ae);P.t=this.t}else{for(ae=this.s&this.DM,Z=ue;Z<b.t;++Z)P[Z]=F(ae,b[Z]);P.t=b.t}P.s=F(this.s,b.s),P.clamp()},me.prototype.changeBit=function(b,F){var P=me.ONE.shiftLeft(b);return this.bitwiseTo(P,F,P),P},me.prototype.addTo=function(b,F){for(var P=0,Z=0,ae=Math.min(b.t,this.t);P<ae;)Z+=this[P]+b[P],F[P++]=Z&this.DM,Z>>=this.DB;if(b.t<this.t){for(Z+=b.s;P<this.t;)Z+=this[P],F[P++]=Z&this.DM,Z>>=this.DB;Z+=this.s}else{for(Z+=this.s;P<b.t;)Z+=b[P],F[P++]=Z&this.DM,Z>>=this.DB;Z+=b.s}F.s=Z<0?-1:0,Z>0?F[P++]=Z:Z<-1&&(F[P++]=this.DV+Z),F.t=P,F.clamp()},me.prototype.dMultiply=function(b){this[this.t]=this.am(0,b-1,this,0,0,this.t),++this.t,this.clamp()},me.prototype.dAddOffset=function(b,F){if(0!=b){for(;this.t<=F;)this[this.t++]=0;for(this[F]+=b;this[F]>=this.DV;)this[F]-=this.DV,++F>=this.t&&(this[this.t++]=0),++this[F]}},me.prototype.multiplyLowerTo=function(b,F,P){var Z,ae=Math.min(this.t+b.t,F);for(P.s=0,P.t=ae;ae>0;)P[--ae]=0;for(Z=P.t-this.t;ae<Z;++ae)P[ae+this.t]=this.am(0,b[ae],P,ae,0,this.t);for(Z=Math.min(b.t,F);ae<Z;++ae)this.am(0,b[ae],P,ae,0,F-ae);P.clamp()},me.prototype.multiplyUpperTo=function(b,F,P){--F;var Z=P.t=this.t+b.t-F;for(P.s=0;--Z>=0;)P[Z]=0;for(Z=Math.max(F-this.t,0);Z<b.t;++Z)P[this.t+Z-F]=this.am(F-Z,b[Z],P,0,0,this.t+Z-F);P.clamp(),P.drShiftTo(1,P)},me.prototype.modInt=function(b){if(b<=0)return 0;var F=this.DV%b,P=this.s<0?b-1:0;if(this.t>0)if(0==F)P=this[0]%b;else for(var Z=this.t-1;Z>=0;--Z)P=(F*P+this[Z])%b;return P},me.prototype.millerRabin=function(b){var F=this.subtract(me.ONE),P=F.getLowestSetBit();if(P<=0)return!1;var Z=F.shiftRight(P);(b=b+1>>1)>fe.length&&(b=fe.length);for(var ae=v(),ue=0;ue<b;++ue){ae.fromInt(fe[Math.floor(Math.random()*fe.length)]);var Te=ae.modPow(Z,this);if(0!=Te.compareTo(me.ONE)&&0!=Te.compareTo(F)){for(var we=1;we++<P&&0!=Te.compareTo(F);)if(0==(Te=Te.modPowInt(2,this)).compareTo(me.ONE))return!1;if(0!=Te.compareTo(F))return!1}}return!0},me.prototype.clone=function(){var b=v();return this.copyTo(b),b},me.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},me.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},me.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},me.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},me.prototype.toByteArray=function(){var b=this.t,F=new Array;F[0]=this.s;var P,Z=this.DB-b*this.DB%8,ae=0;if(b-- >0)for(Z<this.DB&&(P=this[b]>>Z)!=(this.s&this.DM)>>Z&&(F[ae++]=P|this.s<<this.DB-Z);b>=0;)Z<8?(P=(this[b]&(1<<Z)-1)<<8-Z,P|=this[--b]>>(Z+=this.DB-8)):(P=this[b]>>(Z-=8)&255,Z<=0&&(Z+=this.DB,--b)),0!=(128&P)&&(P|=-256),0==ae&&(128&this.s)!=(128&P)&&++ae,(ae>0||P!=this.s)&&(F[ae++]=P);return F},me.prototype.equals=function(b){return 0==this.compareTo(b)},me.prototype.min=function(b){return this.compareTo(b)<0?this:b},me.prototype.max=function(b){return this.compareTo(b)>0?this:b},me.prototype.and=function(b){var F=v();return this.bitwiseTo(b,$e,F),F},me.prototype.or=function(b){var F=v();return this.bitwiseTo(b,ct,F),F},me.prototype.xor=function(b){var F=v();return this.bitwiseTo(b,Ne,F),F},me.prototype.andNot=function(b){var F=v();return this.bitwiseTo(b,Je,F),F},me.prototype.not=function(){for(var b=v(),F=0;F<this.t;++F)b[F]=this.DM&~this[F];return b.t=this.t,b.s=~this.s,b},me.prototype.shiftLeft=function(b){var F=v();return b<0?this.rShiftTo(-b,F):this.lShiftTo(b,F),F},me.prototype.shiftRight=function(b){var F=v();return b<0?this.lShiftTo(-b,F):this.rShiftTo(b,F),F},me.prototype.getLowestSetBit=function(){for(var b=0;b<this.t;++b)if(0!=this[b])return b*this.DB+Ze(this[b]);return this.s<0?this.t*this.DB:-1},me.prototype.bitCount=function(){for(var b=0,F=this.s&this.DM,P=0;P<this.t;++P)b+=mt(this[P]^F);return b},me.prototype.testBit=function(b){var F=Math.floor(b/this.DB);return F>=this.t?0!=this.s:0!=(this[F]&1<<b%this.DB)},me.prototype.setBit=function(b){return this.changeBit(b,ct)},me.prototype.clearBit=function(b){return this.changeBit(b,Je)},me.prototype.flipBit=function(b){return this.changeBit(b,Ne)},me.prototype.add=function(b){var F=v();return this.addTo(b,F),F},me.prototype.subtract=function(b){var F=v();return this.subTo(b,F),F},me.prototype.multiply=function(b){var F=v();return this.multiplyTo(b,F),F},me.prototype.divide=function(b){var F=v();return this.divRemTo(b,F,null),F},me.prototype.remainder=function(b){var F=v();return this.divRemTo(b,null,F),F},me.prototype.divideAndRemainder=function(b){var F=v(),P=v();return this.divRemTo(b,F,P),new Array(F,P)},me.prototype.modPow=function(b,F){var P,Z,ae=b.bitLength(),ue=ne(1);if(ae<=0)return ue;P=ae<18?1:ae<48?3:ae<144?4:ae<768?5:6,Z=ae<8?new Le(F):F.isEven()?new it(F):new oe(F);var Te=new Array,we=3,Me=P-1,ze=(1<<P)-1;if(Te[1]=Z.convert(this),P>1){var Ue=v();for(Z.sqrTo(Te[1],Ue);we<=ze;)Te[we]=v(),Z.mulTo(Ue,Te[we-2],Te[we]),we+=2}var qe,Ye,lt=b.t-1,gt=!0,vt=v();for(ae=pe(b[lt])-1;lt>=0;){for(ae>=Me?qe=b[lt]>>ae-Me&ze:(qe=(b[lt]&(1<<ae+1)-1)<<Me-ae,lt>0&&(qe|=b[lt-1]>>this.DB+ae-Me)),we=P;0==(1&qe);)qe>>=1,--we;if((ae-=we)<0&&(ae+=this.DB,--lt),gt)Te[qe].copyTo(ue),gt=!1;else{for(;we>1;)Z.sqrTo(ue,vt),Z.sqrTo(vt,ue),we-=2;we>0?Z.sqrTo(ue,vt):(Ye=ue,ue=vt,vt=Ye),Z.mulTo(vt,Te[qe],ue)}for(;lt>=0&&0==(b[lt]&1<<ae);)Z.sqrTo(ue,vt),Ye=ue,ue=vt,vt=Ye,--ae<0&&(ae=this.DB-1,--lt)}return Z.revert(ue)},me.prototype.modInverse=function(b){var F=b.isEven();if(this.isEven()&&F||0==b.signum())return me.ZERO;for(var P=b.clone(),Z=this.clone(),ae=ne(1),ue=ne(0),Te=ne(0),we=ne(1);0!=P.signum();){for(;P.isEven();)P.rShiftTo(1,P),F?(ae.isEven()&&ue.isEven()||(ae.addTo(this,ae),ue.subTo(b,ue)),ae.rShiftTo(1,ae)):ue.isEven()||ue.subTo(b,ue),ue.rShiftTo(1,ue);for(;Z.isEven();)Z.rShiftTo(1,Z),F?(Te.isEven()&&we.isEven()||(Te.addTo(this,Te),we.subTo(b,we)),Te.rShiftTo(1,Te)):we.isEven()||we.subTo(b,we),we.rShiftTo(1,we);P.compareTo(Z)>=0?(P.subTo(Z,P),F&&ae.subTo(Te,ae),ue.subTo(we,ue)):(Z.subTo(P,Z),F&&Te.subTo(ae,Te),we.subTo(ue,we))}return 0!=Z.compareTo(me.ONE)?me.ZERO:we.compareTo(b)>=0?we.subtract(b):we.signum()<0?(we.addTo(b,we),we.signum()<0?we.add(b):we):we},me.prototype.pow=function(b){return this.exp(b,new nt)},me.prototype.gcd=function(b){var F=this.s<0?this.negate():this.clone(),P=b.s<0?b.negate():b.clone();if(F.compareTo(P)<0){var Z=F;F=P,P=Z}var ae=F.getLowestSetBit(),ue=P.getLowestSetBit();if(ue<0)return F;for(ae<ue&&(ue=ae),ue>0&&(F.rShiftTo(ue,F),P.rShiftTo(ue,P));F.signum()>0;)(ae=F.getLowestSetBit())>0&&F.rShiftTo(ae,F),(ae=P.getLowestSetBit())>0&&P.rShiftTo(ae,P),F.compareTo(P)>=0?(F.subTo(P,F),F.rShiftTo(1,F)):(P.subTo(F,P),P.rShiftTo(1,P));return ue>0&&P.lShiftTo(ue,P),P},me.prototype.isProbablePrime=function(b){var F,P=this.abs();if(1==P.t&&P[0]<=fe[fe.length-1]){for(F=0;F<fe.length;++F)if(P[0]==fe[F])return!0;return!1}if(P.isEven())return!1;for(F=1;F<fe.length;){for(var Z=fe[F],ae=F+1;ae<fe.length&&Z<te;)Z*=fe[ae++];for(Z=P.modInt(Z);F<ae;)if(Z%fe[F++]==0)return!1}return P.millerRabin(b)},me.prototype.square=function(){var b=v();return this.squareTo(b),b},se.prototype.init=function(b){var F,P,Z;for(F=0;F<256;++F)this.S[F]=F;for(P=0,F=0;F<256;++F)Z=this.S[F],this.S[F]=this.S[P=P+this.S[F]+b[F%b.length]&255],this.S[P]=Z;this.i=0,this.j=0},se.prototype.next=function(){var b;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,b=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=b,this.S[b+this.S[this.i]&255]},null==Ve){var rt;if(Ve=new Array,de=0,void 0!==j&&(void 0!==j.crypto||void 0!==j.msCrypto)){var xe=j.crypto||j.msCrypto;if(xe.getRandomValues){var q=new Uint8Array(32);for(xe.getRandomValues(q),rt=0;rt<32;++rt)Ve[de++]=q[rt]}else if("Netscape"==L.appName&&L.appVersion<"5"){var D=j.crypto.random(32);for(rt=0;rt<D.length;++rt)Ve[de++]=255&D.charCodeAt(rt)}}for(;de<256;)rt=Math.floor(65536*Math.random()),Ve[de++]=rt>>>8,Ve[de++]=255&rt;de=0,ve()}function K(){if(null==De){for(ve(),(De=new se).init(Ve),de=0;de<Ve.length;++de)Ve[de]=0;de=0}return De.next()}function ge(){}function je(C,b){return new me(C,b)}function tt(C,b,F){for(var P="",Z=0;P.length<b;)P+=F(String.fromCharCode.apply(String,C.concat([(4278190080&Z)>>24,(16711680&Z)>>16,(65280&Z)>>8,255&Z]))),Z+=1;return P}function ot(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Ft(C,b){this.x=b,this.q=C}function kt(C,b,F,P){this.curve=C,this.x=b,this.y=F,this.z=P??me.ONE,this.zinv=null}function qt(C,b,F){this.q=C,this.a=this.fromBigInteger(b),this.b=this.fromBigInteger(F),this.infinity=new kt(this,null,null)}ge.prototype.nextBytes=function(b){var F;for(F=0;F<b.length;++F)b[F]=K()},ot.prototype.doPublic=function(b){return b.modPowInt(this.e,this.n)},ot.prototype.setPublic=function(b,F){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof b)this.n=b,this.e=F;else{if(!(null!=b&&null!=F&&b.length>0&&F.length>0))throw"Invalid RSA public key";this.n=je(b,16),this.e=parseInt(F,16)}},ot.prototype.encrypt=function(b){var F=function(ue,Te){if(Te<ue.length+11)throw"Message too long for RSA";for(var we=new Array,Me=ue.length-1;Me>=0&&Te>0;){var ze=ue.charCodeAt(Me--);ze<128?we[--Te]=ze:ze>127&&ze<2048?(we[--Te]=63&ze|128,we[--Te]=ze>>6|192):(we[--Te]=63&ze|128,we[--Te]=ze>>6&63|128,we[--Te]=ze>>12|224)}we[--Te]=0;for(var Ue=new ge,qe=new Array;Te>2;){for(qe[0]=0;0==qe[0];)Ue.nextBytes(qe);we[--Te]=qe[0]}return we[--Te]=2,we[--Te]=0,new me(we)}(b,this.n.bitLength()+7>>3);if(null==F)return null;var P=this.doPublic(F);if(null==P)return null;var Z=P.toString(16);return 0==(1&Z.length)?Z:"0"+Z},ot.prototype.encryptOAEP=function(b,F,P){var Z=function(we,Me,ze,Ue){var qe=Pe.crypto.MessageDigest,Ye=Pe.crypto.Util,lt=null;if(ze||(ze="sha1"),"string"==typeof ze&&(lt=qe.getCanonicalAlgName(ze),Ue=qe.getHashLength(lt),ze=function(It){return ti(Ye.hashHex(Pi(It),lt))}),we.length+2*Ue+2>Me)throw"Message too long for RSA";var gt,vt="";for(gt=0;gt<Me-we.length-2*Ue-2;gt+=1)vt+="\0";var ke=ze("")+vt+"\x01"+we,He=new Array(Ue);(new ge).nextBytes(He);var Xe=tt(He,ke.length,ze),Qe=[];for(gt=0;gt<ke.length;gt+=1)Qe[gt]=ke.charCodeAt(gt)^Xe.charCodeAt(gt);var dt=tt(Qe,He.length,ze),yt=[0];for(gt=0;gt<He.length;gt+=1)yt[gt+1]=He[gt]^dt.charCodeAt(gt);return new me(yt.concat(Qe))}(b,this.n.bitLength()+7>>3,F,P);if(null==Z)return null;var ae=this.doPublic(Z);if(null==ae)return null;var ue=ae.toString(16);return 0==(1&ue.length)?ue:"0"+ue},ot.prototype.type="RSA",Ft.prototype.equals=function(b){return b==this||this.q.equals(b.q)&&this.x.equals(b.x)},Ft.prototype.toBigInteger=function(){return this.x},Ft.prototype.negate=function(){return new Ft(this.q,this.x.negate().mod(this.q))},Ft.prototype.add=function(b){return new Ft(this.q,this.x.add(b.toBigInteger()).mod(this.q))},Ft.prototype.subtract=function(b){return new Ft(this.q,this.x.subtract(b.toBigInteger()).mod(this.q))},Ft.prototype.multiply=function(b){return new Ft(this.q,this.x.multiply(b.toBigInteger()).mod(this.q))},Ft.prototype.square=function(){return new Ft(this.q,this.x.square().mod(this.q))},Ft.prototype.divide=function(b){return new Ft(this.q,this.x.multiply(b.toBigInteger().modInverse(this.q)).mod(this.q))},kt.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},kt.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},kt.prototype.equals=function(b){return b==this||(this.isInfinity()?b.isInfinity():b.isInfinity()?this.isInfinity():!!b.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(b.z)).mod(this.curve.q).equals(me.ZERO)&&b.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(b.z)).mod(this.curve.q).equals(me.ZERO))},kt.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(me.ZERO)&&!this.y.toBigInteger().equals(me.ZERO)},kt.prototype.negate=function(){return new kt(this.curve,this.x,this.y.negate(),this.z)},kt.prototype.add=function(b){if(this.isInfinity())return b;if(b.isInfinity())return this;var F=b.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(b.z)).mod(this.curve.q),P=b.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(b.z)).mod(this.curve.q);if(me.ZERO.equals(P))return me.ZERO.equals(F)?this.twice():this.curve.getInfinity();var Z=new me("3"),ae=this.x.toBigInteger(),ue=this.y.toBigInteger(),Te=(b.x.toBigInteger(),b.y.toBigInteger(),P.square()),we=Te.multiply(P),Me=ae.multiply(Te),ze=F.square().multiply(this.z),Ue=ze.subtract(Me.shiftLeft(1)).multiply(b.z).subtract(we).multiply(P).mod(this.curve.q),qe=Me.multiply(Z).multiply(F).subtract(ue.multiply(we)).subtract(ze.multiply(F)).multiply(b.z).add(F.multiply(we)).mod(this.curve.q),Ye=we.multiply(this.z).multiply(b.z).mod(this.curve.q);return new kt(this.curve,this.curve.fromBigInteger(Ue),this.curve.fromBigInteger(qe),Ye)},kt.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var b=new me("3"),F=this.x.toBigInteger(),P=this.y.toBigInteger(),Z=P.multiply(this.z),ae=Z.multiply(P).mod(this.curve.q),ue=this.curve.a.toBigInteger(),Te=F.square().multiply(b);me.ZERO.equals(ue)||(Te=Te.add(this.z.square().multiply(ue)));var we=(Te=Te.mod(this.curve.q)).square().subtract(F.shiftLeft(3).multiply(ae)).shiftLeft(1).multiply(Z).mod(this.curve.q),Me=Te.multiply(b).multiply(F).subtract(ae.shiftLeft(1)).shiftLeft(2).multiply(ae).subtract(Te.square().multiply(Te)).mod(this.curve.q),ze=Z.square().multiply(Z).shiftLeft(3).mod(this.curve.q);return new kt(this.curve,this.curve.fromBigInteger(we),this.curve.fromBigInteger(Me),ze)},kt.prototype.multiply=function(b){if(this.isInfinity())return this;if(0==b.signum())return this.curve.getInfinity();var F,P=b,Z=P.multiply(new me("3")),ae=this.negate(),ue=this,Te=this.curve.q.subtract(b),we=Te.multiply(new me("3")),Me=new kt(this.curve,this.x,this.y),ze=Me.negate();for(F=Z.bitLength()-2;F>0;--F){ue=ue.twice();var Ue=Z.testBit(F);Ue!=P.testBit(F)&&(ue=ue.add(Ue?this:ae))}for(F=we.bitLength()-2;F>0;--F){Me=Me.twice();var qe=we.testBit(F);qe!=Te.testBit(F)&&(Me=Me.add(qe?Me:ze))}return ue},kt.prototype.multiplyTwo=function(b,F,P){var Z;Z=b.bitLength()>P.bitLength()?b.bitLength()-1:P.bitLength()-1;for(var ae=this.curve.getInfinity(),ue=this.add(F);Z>=0;)ae=ae.twice(),b.testBit(Z)?ae=P.testBit(Z)?ae.add(ue):ae.add(this):P.testBit(Z)&&(ae=ae.add(F)),--Z;return ae},qt.prototype.getQ=function(){return this.q},qt.prototype.getA=function(){return this.a},qt.prototype.getB=function(){return this.b},qt.prototype.equals=function(b){return b==this||this.q.equals(b.q)&&this.a.equals(b.a)&&this.b.equals(b.b)},qt.prototype.getInfinity=function(){return this.infinity},qt.prototype.fromBigInteger=function(b){return new Ft(this.q,b)},qt.prototype.decodePointHex=function(b){switch(parseInt(b.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var F=(b.length-2)/2,P=b.substr(2,F),Z=b.substr(F+2,F);return new kt(this,this.fromBigInteger(new me(P,16)),this.fromBigInteger(new me(Z,16)))}},Ft.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},kt.prototype.getEncoded=function(C){var b=function(ue,Te){var we=ue.toByteArrayUnsigned();if(Te<we.length)we=we.slice(we.length-Te);else for(;Te>we.length;)we.unshift(0);return we},F=this.getX().toBigInteger(),P=this.getY().toBigInteger(),Z=b(F,32);return C?P.isEven()?Z.unshift(2):Z.unshift(3):(Z.unshift(4),Z=Z.concat(b(P,32))),Z},kt.decodeFrom=function(C,b){var F=b.length-1,P=b.slice(1,1+F/2),Z=b.slice(1+F/2,1+F);P.unshift(0),Z.unshift(0);var ae=new me(P),ue=new me(Z);return new kt(C,C.fromBigInteger(ae),C.fromBigInteger(ue))},kt.decodeFromHex=function(C,b){b.substr(0,2);var F=b.length-2,P=b.substr(2,F/2),Z=b.substr(2+F/2,F/2),ae=new me(P,16),ue=new me(Z,16);return new kt(C,C.fromBigInteger(ae),C.fromBigInteger(ue))},kt.prototype.add2D=function(C){if(this.isInfinity())return C;if(C.isInfinity())return this;if(this.x.equals(C.x))return this.y.equals(C.y)?this.twice():this.curve.getInfinity();var b=C.x.subtract(this.x),F=C.y.subtract(this.y).divide(b),P=F.square().subtract(this.x).subtract(C.x),Z=F.multiply(this.x.subtract(P)).subtract(this.y);return new kt(this.curve,P,Z)},kt.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var C=this.curve.fromBigInteger(me.valueOf(2)),b=this.curve.fromBigInteger(me.valueOf(3)),F=this.x.square().multiply(b).add(this.curve.a).divide(this.y.multiply(C)),P=F.square().subtract(this.x.multiply(C)),Z=F.multiply(this.x.subtract(P)).subtract(this.y);return new kt(this.curve,P,Z)},kt.prototype.multiply2D=function(C){if(this.isInfinity())return this;if(0==C.signum())return this.curve.getInfinity();var b,F=C,P=F.multiply(new me("3")),Z=this.negate(),ae=this;for(b=P.bitLength()-2;b>0;--b){ae=ae.twice();var ue=P.testBit(b);ue!=F.testBit(b)&&(ae=ae.add2D(ue?this:Z))}return ae},kt.prototype.isOnCurve=function(){var C=this.getX().toBigInteger(),b=this.getY().toBigInteger(),F=this.curve.getA().toBigInteger(),P=this.curve.getB().toBigInteger(),Z=this.curve.getQ(),ae=b.multiply(b).mod(Z),ue=C.multiply(C).multiply(C).add(F.multiply(C)).add(P).mod(Z);return ae.equals(ue)},kt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},kt.prototype.validate=function(){var C=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var b=this.getX().toBigInteger(),F=this.getY().toBigInteger();if(b.compareTo(me.ONE)<0||b.compareTo(C.subtract(me.ONE))>0)throw new Error("x coordinate out of bounds");if(F.compareTo(me.ONE)<0||F.compareTo(C.subtract(me.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(C).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var tn=function(){var C=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),b=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),F={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function P(ue,Te,we){return Te?F[Te]:String.fromCharCode(parseInt(we,16))}var Z=new String(""),ae=Object.hasOwnProperty;return function(ue,Te){var we,Me,ze=ue.match(C),Ue=ze[0],qe=!1;"{"===Ue?we={}:"["===Ue?we=[]:(we=[],qe=!0);for(var Ye=[we],lt=1-qe,gt=ze.length;lt<gt;++lt){var vt;switch((Ue=ze[lt]).charCodeAt(0)){default:(vt=Ye[0])[Me||vt.length]=+Ue,Me=void 0;break;case 34:if(-1!==(Ue=Ue.substring(1,Ue.length-1)).indexOf("\\")&&(Ue=Ue.replace(b,P)),vt=Ye[0],!Me){if(!(vt instanceof Array)){Me=Ue||Z;break}Me=vt.length}vt[Me]=Ue,Me=void 0;break;case 91:Ye.unshift((vt=Ye[0])[Me||vt.length]=[]),Me=void 0;break;case 93:case 125:Ye.shift();break;case 102:(vt=Ye[0])[Me||vt.length]=!1,Me=void 0;break;case 110:(vt=Ye[0])[Me||vt.length]=null,Me=void 0;break;case 116:(vt=Ye[0])[Me||vt.length]=!0,Me=void 0;break;case 123:Ye.unshift((vt=Ye[0])[Me||vt.length]={}),Me=void 0}}if(qe){if(1!==Ye.length)throw new Error;we=we[0]}else if(Ye.length)throw new Error;return Te&&(we=function ke(He,Xe){var Qe=He[Xe];if(Qe&&"object"===(void 0===Qe?"undefined":x(Qe))){var dt=null;for(var yt in Qe)if(ae.call(Qe,yt)&&Qe!==He){var zt=ke(Qe,yt);void 0!==zt?Qe[yt]=zt:(dt||(dt=[]),dt.push(yt))}if(dt)for(var It=dt.length;--It>=0;)delete Qe[dt[It]]}return Te.call(He,Xe,Qe)}({"":we},"")),we}}();void 0!==Pe&&Pe||(S.KJUR=Pe={}),void 0!==Pe.asn1&&Pe.asn1||(Pe.asn1={}),Pe.asn1.ASN1Util=new function(){this.integerToByteHex=function(C){var b=C.toString(16);return b.length%2==1&&(b="0"+b),b},this.bigIntToMinTwosComplementsHex=function(C){var b=C.toString(16);if("-"!=b.substr(0,1))b.length%2==1?b="0"+b:b.match(/^[0-7]/)||(b="00"+b);else{var F=b.substr(1).length;F%2==1?F+=1:b.match(/^[0-7]/)||(F+=2);for(var P="",Z=0;Z<F;Z++)P+="f";b=new me(P,16).xor(C).add(me.ONE).toString(16).replace(/^-/,"")}return b},this.getPEMStringFromHex=function(C,b){return Ti(C,b)},this.newObject=function(C){var b=Pe.asn1,F=b.ASN1Object,P=b.DERBoolean,Z=b.DERInteger,ae=b.DERBitString,ue=b.DEROctetString,Te=b.DERNull,we=b.DERObjectIdentifier,Me=b.DEREnumerated,ze=b.DERUTF8String,Ue=b.DERNumericString,qe=b.DERPrintableString,Ye=b.DERTeletexString,lt=b.DERIA5String,gt=b.DERUTCTime,vt=b.DERGeneralizedTime,ke=b.DERVisibleString,He=b.DERBMPString,Xe=b.DERSequence,Qe=b.DERSet,dt=b.DERTaggedObject,yt=b.ASN1Util.newObject;if(C instanceof b.ASN1Object)return C;var zt=Object.keys(C);if(1!=zt.length)throw new Error("key of param shall be only one.");var It=zt[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+It+":"))throw new Error("undefined key: "+It);if("bool"==It)return new P(C[It]);if("int"==It)return new Z(C[It]);if("bitstr"==It)return new ae(C[It]);if("octstr"==It)return new ue(C[It]);if("null"==It)return new Te(C[It]);if("oid"==It)return new we(C[It]);if("enum"==It)return new Me(C[It]);if("utf8str"==It)return new ze(C[It]);if("numstr"==It)return new Ue(C[It]);if("prnstr"==It)return new qe(C[It]);if("telstr"==It)return new Ye(C[It]);if("ia5str"==It)return new lt(C[It]);if("utctime"==It)return new gt(C[It]);if("gentime"==It)return new vt(C[It]);if("visstr"==It)return new ke(C[It]);if("bmpstr"==It)return new He(C[It]);if("asn1"==It)return new F(C[It]);if("seq"==It){for(var xn=C[It],Bt=[],Xt=0;Xt<xn.length;Xt++){var Yn=yt(xn[Xt]);Bt.push(Yn)}return new Xe({array:Bt})}if("set"==It){for(xn=C[It],Bt=[],Xt=0;Xt<xn.length;Xt++)Yn=yt(xn[Xt]),Bt.push(Yn);return new Qe({array:Bt})}if("tag"==It){var pi=C[It];if("[object Array]"===Object.prototype.toString.call(pi)&&3==pi.length){var ci=yt(pi[2]);return new dt({tag:pi[0],explicit:pi[1],obj:ci})}return new dt(pi)}},this.jsonToASN1HEX=function(C){return this.newObject(C).getEncodedHex()}},Pe.asn1.ASN1Util.oidHexToInt=function(C){for(var b="",F=parseInt(C.substr(0,2),16),P=(b=Math.floor(F/40)+"."+F%40,""),Z=2;Z<C.length;Z+=2){var ae=("00000000"+parseInt(C.substr(Z,2),16).toString(2)).slice(-8);P+=ae.substr(1,7),"0"==ae.substr(0,1)&&(b=b+"."+new me(P,2).toString(10),P="")}return b},Pe.asn1.ASN1Util.oidIntToHex=function(C){var b=function(we){var Me=we.toString(16);return 1==Me.length&&(Me="0"+Me),Me},F=function(we){var Me="",ze=new me(we,10).toString(2),Ue=7-ze.length%7;7==Ue&&(Ue=0);for(var qe="",Ye=0;Ye<Ue;Ye++)qe+="0";for(ze=qe+ze,Ye=0;Ye<ze.length-1;Ye+=7){var lt=ze.substr(Ye,7);Ye!=ze.length-7&&(lt="1"+lt),Me+=b(parseInt(lt,2))}return Me};if(!C.match(/^[0-9.]+$/))throw"malformed oid string: "+C;var P="",Z=C.split("."),ae=40*parseInt(Z[0])+parseInt(Z[1]);P+=b(ae),Z.splice(0,2);for(var ue=0;ue<Z.length;ue++)P+=F(Z[ue]);return P},Pe.asn1.ASN1Object=function(C){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var b=this.hV.length/2,F=b.toString(16);if(F.length%2==1&&(F="0"+F),b<128)return F;var P=F.length/2;if(P>15)throw"ASN.1 length too long to represent by 8x: n = "+b.toString(16);return(128+P).toString(16)+F},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(b){this.params=b},null!=C&&null!=C.tlv&&(this.hTLV=C.tlv,this.isModified=!1)},Pe.asn1.DERAbstractString=function(C){Pe.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(b){this.hTLV=null,this.isModified=!0,this.s=b,this.hV=Vi(this.s).toLowerCase()},this.setStringHex=function(b){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=b},this.getFreshValueHex=function(){return this.hV},void 0!==C&&("string"==typeof C?this.setString(C):void 0!==C.str?this.setString(C.str):void 0!==C.hex&&this.setStringHex(C.hex))},d.lang.extend(Pe.asn1.DERAbstractString,Pe.asn1.ASN1Object),Pe.asn1.DERAbstractTime=function(C){Pe.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(b){var F=b.getTime()+6e4*b.getTimezoneOffset();return new Date(F)},this.formatDate=function(b,F,P){var Z=this.zeroPadding,ae=this.localDateToUTC(b),ue=String(ae.getFullYear());"utc"==F&&(ue=ue.substr(2,2));var Te=ue+Z(String(ae.getMonth()+1),2)+Z(String(ae.getDate()),2)+Z(String(ae.getHours()),2)+Z(String(ae.getMinutes()),2)+Z(String(ae.getSeconds()),2);if(!0===P){var we=ae.getMilliseconds();if(0!=we){var Me=Z(String(we),3);Te=Te+"."+(Me=Me.replace(/[0]+$/,""))}}return Te+"Z"},this.zeroPadding=function(b,F){return b.length>=F?b:new Array(F-b.length+1).join("0")+b},this.getString=function(){return this.s},this.setString=function(b){this.hTLV=null,this.isModified=!0,this.s=b,this.hV=gn(b)},this.setByDateValue=function(b,F,P,Z,ae,ue){var Te=new Date(Date.UTC(b,F-1,P,Z,ae,ue,0));this.setByDate(Te)},this.getFreshValueHex=function(){return this.hV}},d.lang.extend(Pe.asn1.DERAbstractTime,Pe.asn1.ASN1Object),Pe.asn1.DERAbstractStructured=function(C){Pe.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(b){this.hTLV=null,this.isModified=!0,this.asn1Array=b},this.appendASN1Object=function(b){this.hTLV=null,this.isModified=!0,this.asn1Array.push(b)},this.asn1Array=new Array,void 0!==C&&void 0!==C.array&&(this.asn1Array=C.array)},d.lang.extend(Pe.asn1.DERAbstractStructured,Pe.asn1.ASN1Object),Pe.asn1.DERBoolean=function(C){Pe.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==C?"010100":"0101ff"},d.lang.extend(Pe.asn1.DERBoolean,Pe.asn1.ASN1Object),Pe.asn1.DERInteger=function(C){Pe.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(b){this.hTLV=null,this.isModified=!0,this.hV=Pe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(b)},this.setByInteger=function(b){var F=new me(String(b),10);this.setByBigInteger(F)},this.setValueHex=function(b){this.hV=b},this.getFreshValueHex=function(){return this.hV},void 0!==C&&(void 0!==C.bigint?this.setByBigInteger(C.bigint):void 0!==C.int?this.setByInteger(C.int):"number"==typeof C?this.setByInteger(C):void 0!==C.hex&&this.setValueHex(C.hex))},d.lang.extend(Pe.asn1.DERInteger,Pe.asn1.ASN1Object),Pe.asn1.DERBitString=function(C){if(void 0!==C&&void 0!==C.obj){var b=Pe.asn1.ASN1Util.newObject(C.obj);C.hex="00"+b.getEncodedHex()}Pe.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(F){this.hTLV=null,this.isModified=!0,this.hV=F},this.setUnusedBitsAndHexValue=function(F,P){if(F<0||7<F)throw"unused bits shall be from 0 to 7: u = "+F;var Z="0"+F;this.hTLV=null,this.isModified=!0,this.hV=Z+P},this.setByBinaryString=function(F){var P=8-(F=F.replace(/0+$/,"")).length%8;8==P&&(P=0);for(var Z=0;Z<=P;Z++)F+="0";var ae="";for(Z=0;Z<F.length-1;Z+=8){var ue=F.substr(Z,8),Te=parseInt(ue,2).toString(16);1==Te.length&&(Te="0"+Te),ae+=Te}this.hTLV=null,this.isModified=!0,this.hV="0"+P+ae},this.setByBooleanArray=function(F){for(var P="",Z=0;Z<F.length;Z++)P+=1==F[Z]?"1":"0";this.setByBinaryString(P)},this.newFalseArray=function(F){for(var P=new Array(F),Z=0;Z<F;Z++)P[Z]=!1;return P},this.getFreshValueHex=function(){return this.hV},void 0!==C&&("string"==typeof C&&C.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(C):void 0!==C.hex?this.setHexValueIncludingUnusedBits(C.hex):void 0!==C.bin?this.setByBinaryString(C.bin):void 0!==C.array&&this.setByBooleanArray(C.array))},d.lang.extend(Pe.asn1.DERBitString,Pe.asn1.ASN1Object),Pe.asn1.DEROctetString=function(C){if(void 0!==C&&void 0!==C.obj){var b=Pe.asn1.ASN1Util.newObject(C.obj);C.hex=b.getEncodedHex()}Pe.asn1.DEROctetString.superclass.constructor.call(this,C),this.hT="04"},d.lang.extend(Pe.asn1.DEROctetString,Pe.asn1.DERAbstractString),Pe.asn1.DERNull=function(){Pe.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},d.lang.extend(Pe.asn1.DERNull,Pe.asn1.ASN1Object),Pe.asn1.DERObjectIdentifier=function(C){Pe.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(b){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=b},this.setValueOidString=function(b){var F=function(Z){var ae=function(qe){var Ye=qe.toString(16);return 1==Ye.length&&(Ye="0"+Ye),Ye},ue=function(qe){var Ye="",lt=parseInt(qe,10).toString(2),gt=7-lt.length%7;7==gt&&(gt=0);for(var vt="",ke=0;ke<gt;ke++)vt+="0";for(lt=vt+lt,ke=0;ke<lt.length-1;ke+=7){var He=lt.substr(ke,7);ke!=lt.length-7&&(He="1"+He),Ye+=ae(parseInt(He,2))}return Ye};try{if(!Z.match(/^[0-9.]+$/))return null;var Te="",we=Z.split("."),Me=40*parseInt(we[0],10)+parseInt(we[1],10);Te+=ae(Me),we.splice(0,2);for(var ze=0;ze<we.length;ze++)Te+=ue(we[ze]);return Te}catch{return null}}(b);if(null==F)throw new Error("malformed oid string: "+b);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=F},this.setValueName=function(b){var F=Pe.asn1.x509.OID.name2oid(b);if(""===F)throw new Error("DERObjectIdentifier oidName undefined: "+b);this.setValueOidString(F)},this.setValueNameOrOid=function(b){b.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(b):this.setValueName(b)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(b){"string"==typeof b?this.setValueNameOrOid(b):void 0!==b.oid?this.setValueNameOrOid(b.oid):void 0!==b.name?this.setValueNameOrOid(b.name):void 0!==b.hex&&this.setValueHex(b.hex)},void 0!==C&&this.setByParam(C)},d.lang.extend(Pe.asn1.DERObjectIdentifier,Pe.asn1.ASN1Object),Pe.asn1.DEREnumerated=function(C){Pe.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(b){this.hTLV=null,this.isModified=!0,this.hV=Pe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(b)},this.setByInteger=function(b){var F=new me(String(b),10);this.setByBigInteger(F)},this.setValueHex=function(b){this.hV=b},this.getFreshValueHex=function(){return this.hV},void 0!==C&&(void 0!==C.int?this.setByInteger(C.int):"number"==typeof C?this.setByInteger(C):void 0!==C.hex&&this.setValueHex(C.hex))},d.lang.extend(Pe.asn1.DEREnumerated,Pe.asn1.ASN1Object),Pe.asn1.DERUTF8String=function(C){Pe.asn1.DERUTF8String.superclass.constructor.call(this,C),this.hT="0c"},d.lang.extend(Pe.asn1.DERUTF8String,Pe.asn1.DERAbstractString),Pe.asn1.DERNumericString=function(C){Pe.asn1.DERNumericString.superclass.constructor.call(this,C),this.hT="12"},d.lang.extend(Pe.asn1.DERNumericString,Pe.asn1.DERAbstractString),Pe.asn1.DERPrintableString=function(C){Pe.asn1.DERPrintableString.superclass.constructor.call(this,C),this.hT="13"},d.lang.extend(Pe.asn1.DERPrintableString,Pe.asn1.DERAbstractString),Pe.asn1.DERTeletexString=function(C){Pe.asn1.DERTeletexString.superclass.constructor.call(this,C),this.hT="14"},d.lang.extend(Pe.asn1.DERTeletexString,Pe.asn1.DERAbstractString),Pe.asn1.DERIA5String=function(C){Pe.asn1.DERIA5String.superclass.constructor.call(this,C),this.hT="16"},d.lang.extend(Pe.asn1.DERIA5String,Pe.asn1.DERAbstractString),Pe.asn1.DERVisibleString=function(C){Pe.asn1.DERIA5String.superclass.constructor.call(this,C),this.hT="1a"},d.lang.extend(Pe.asn1.DERVisibleString,Pe.asn1.DERAbstractString),Pe.asn1.DERBMPString=function(C){Pe.asn1.DERBMPString.superclass.constructor.call(this,C),this.hT="1e"},d.lang.extend(Pe.asn1.DERBMPString,Pe.asn1.DERAbstractString),Pe.asn1.DERUTCTime=function(C){Pe.asn1.DERUTCTime.superclass.constructor.call(this,C),this.hT="17",this.setByDate=function(b){this.hTLV=null,this.isModified=!0,this.date=b,this.s=this.formatDate(this.date,"utc"),this.hV=gn(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=gn(this.s)),this.hV},void 0!==C&&(void 0!==C.str?this.setString(C.str):"string"==typeof C&&C.match(/^[0-9]{12}Z$/)?this.setString(C):void 0!==C.hex?this.setStringHex(C.hex):void 0!==C.date&&this.setByDate(C.date))},d.lang.extend(Pe.asn1.DERUTCTime,Pe.asn1.DERAbstractTime),Pe.asn1.DERGeneralizedTime=function(C){Pe.asn1.DERGeneralizedTime.superclass.constructor.call(this,C),this.hT="18",this.withMillis=!1,this.setByDate=function(b){this.hTLV=null,this.isModified=!0,this.date=b,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=gn(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=gn(this.s)),this.hV},void 0!==C&&(void 0!==C.str?this.setString(C.str):"string"==typeof C&&C.match(/^[0-9]{14}Z$/)?this.setString(C):void 0!==C.hex?this.setStringHex(C.hex):void 0!==C.date&&this.setByDate(C.date),!0===C.millis&&(this.withMillis=!0))},d.lang.extend(Pe.asn1.DERGeneralizedTime,Pe.asn1.DERAbstractTime),Pe.asn1.DERSequence=function(C){Pe.asn1.DERSequence.superclass.constructor.call(this,C),this.hT="30",this.getFreshValueHex=function(){for(var b="",F=0;F<this.asn1Array.length;F++)b+=this.asn1Array[F].getEncodedHex();return this.hV=b,this.hV}},d.lang.extend(Pe.asn1.DERSequence,Pe.asn1.DERAbstractStructured),Pe.asn1.DERSet=function(C){Pe.asn1.DERSet.superclass.constructor.call(this,C),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var b=new Array,F=0;F<this.asn1Array.length;F++)b.push(this.asn1Array[F].getEncodedHex());return 1==this.sortFlag&&b.sort(),this.hV=b.join(""),this.hV},void 0!==C&&void 0!==C.sortflag&&0==C.sortflag&&(this.sortFlag=!1)},d.lang.extend(Pe.asn1.DERSet,Pe.asn1.DERAbstractStructured),Pe.asn1.DERTaggedObject=function(C){Pe.asn1.DERTaggedObject.superclass.constructor.call(this);var b=Pe.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(F,P,Z){this.hT=P,this.isExplicit=F,this.asn1Object=Z,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Z.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,P),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(F){null!=F.tag&&(this.hT=F.tag),null!=F.explicit&&(this.isExplicit=F.explicit),null!=F.tage&&(this.hT=F.tage,this.isExplicit=!0),null!=F.tagi&&(this.hT=F.tagi,this.isExplicit=!1),null!=F.obj&&(F.obj instanceof b.ASN1Object?(this.asn1Object=F.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==x(F.obj)&&(this.asn1Object=b.ASN1Util.newObject(F.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=C&&this.setByParam(C)},d.lang.extend(Pe.asn1.DERTaggedObject,Pe.asn1.ASN1Object);var Pe,ei,nn,Nt=new function(){};function On(C){for(var b=new Array,F=0;F<C.length;F++)b[F]=C.charCodeAt(F);return b}function ht(C){for(var b="",F=0;F<C.length;F++)b+=String.fromCharCode(C[F]);return b}function _t(C){for(var b="",F=0;F<C.length;F++){var P=C[F].toString(16);1==P.length&&(P="0"+P),b+=P}return b}function gn(C){return _t(On(C))}function En(C){return(C=(C=C.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Kn(C){return C.length%4==2?C+="==":C.length%4==3&&(C+="="),(C=C.replace(/-/g,"+")).replace(/_/g,"/")}function Ht(C){return C.length%2==1&&(C="0"+C),En(ee(C))}function Tn(C){return _e(Kn(C))}function Vi(C){return vo(dr(C))}function Fn(C){return decodeURIComponent(Ur(C))}function ti(C){for(var b="",F=0;F<C.length-1;F+=2)b+=String.fromCharCode(parseInt(C.substr(F,2),16));return b}function Pi(C){for(var b="",F=0;F<C.length;F++)b+=("0"+C.charCodeAt(F).toString(16)).slice(-2);return b}function br(C){return ee(C)}function ni(C){return br(C).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Wi(C){return _e(C.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Ti(C,b){return"-----BEGIN "+b+"-----\r\n"+ni(C)+"\r\n-----END "+b+"-----\r\n"}function Ki(C,b){if(-1==C.indexOf("-----BEGIN "))throw"can't find PEM header: "+b;return Wi(C=void 0!==b?(C=C.replace(new RegExp("^[^]*-----BEGIN "+b+"-----"),"")).replace(new RegExp("-----END "+b+"-----[^]*$"),""):(C=C.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Mr(C){var b,F,P,Z,ae,ue,Te,we,Me,ze,Ue;if(Ue=C.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return we=Ue[1],b=parseInt(we),2===we.length&&(50<=b&&b<100?b=1900+b:0<=b&&b<50&&(b=2e3+b)),F=parseInt(Ue[2])-1,P=parseInt(Ue[3]),Z=parseInt(Ue[4]),ae=parseInt(Ue[5]),ue=parseInt(Ue[6]),Te=0,""!==(Me=Ue[7])&&(ze=(Me.substr(1)+"00").substr(0,3),Te=parseInt(ze)),Date.UTC(b,F,P,Z,ae,ue,Te);throw"unsupported zulu format: "+C}function No(C){return~~(Mr(C)/1e3)}function vo(C){return C.replace(/%/g,"")}function Ur(C){return C.replace(/(..)/g,"%$1")}function Lr(C){var b="malformed IPv6 address";if(!C.match(/^[0-9A-Fa-f:]+$/))throw b;var F=(C=C.toLowerCase()).split(":").length-1;if(F<2)throw b;var P=":".repeat(7-F+2),Z=(C=C.replace("::",P)).split(":");if(8!=Z.length)throw b;for(var ae=0;ae<8;ae++)Z[ae]=("0000"+Z[ae]).slice(-4);return Z.join("")}function io(C){if(!C.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var b=(C=C.toLowerCase()).match(/.{1,4}/g),F=0;F<8;F++)b[F]=b[F].replace(/^0+/,""),""==b[F]&&(b[F]="0");var P=(C=":"+b.join(":")+":").match(/:(0:){2,}/g);if(null===P)return C.slice(1,-1);var Z="";for(F=0;F<P.length;F++)P[F].length>Z.length&&(Z=P[F]);return(C=C.replace(Z,"::")).slice(1,-1)}function oa(C){var b="malformed hex value";if(!C.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw b;if(8!=C.length)return 32==C.length?io(C):C;try{return parseInt(C.substr(0,2),16)+"."+parseInt(C.substr(2,2),16)+"."+parseInt(C.substr(4,2),16)+"."+parseInt(C.substr(6,2),16)}catch{throw b}}function dr(C){for(var b=encodeURIComponent(C),F="",P=0;P<b.length;P++)"%"==b[P]?(F+=b.substr(P,3),P+=2):F=F+"%"+gn(b[P]);return F}function Bo(C){return!(C.length%2!=0||!C.match(/^[0-9a-f]+$/)&&!C.match(/^[0-9A-F]+$/))}function yo(C){return C.length%2==1?"0"+C:C.substr(0,1)>"7"?"00"+C:C}Nt.getLblen=function(C,b){if("8"!=C.substr(b+2,1))return 1;var F=parseInt(C.substr(b+3,1));return 0==F?-1:0<F&&F<10?F+1:-2},Nt.getL=function(C,b){var F=Nt.getLblen(C,b);return F<1?"":C.substr(b+2,2*F)},Nt.getVblen=function(C,b){var F;return""==(F=Nt.getL(C,b))?-1:("8"===F.substr(0,1)?new me(F.substr(2),16):new me(F,16)).intValue()},Nt.getVidx=function(C,b){var F=Nt.getLblen(C,b);return F<0?F:b+2*(F+1)},Nt.getV=function(C,b){var F=Nt.getVidx(C,b),P=Nt.getVblen(C,b);return C.substr(F,2*P)},Nt.getTLV=function(C,b){return C.substr(b,2)+Nt.getL(C,b)+Nt.getV(C,b)},Nt.getTLVblen=function(C,b){return 2+2*Nt.getLblen(C,b)+2*Nt.getVblen(C,b)},Nt.getNextSiblingIdx=function(C,b){return Nt.getVidx(C,b)+2*Nt.getVblen(C,b)},Nt.getChildIdx=function(C,b){var F,P,Z,ae=Nt,ue=[];F=ae.getVidx(C,b),P=2*ae.getVblen(C,b),"03"==C.substr(b,2)&&(F+=2,P-=2),Z=0;for(var Te=F;Z<=P;){var we=ae.getTLVblen(C,Te);if((Z+=we)<=P&&ue.push(Te),Te+=we,Z>=P)break}return ue},Nt.getNthChildIdx=function(C,b,F){return Nt.getChildIdx(C,b)[F]},Nt.getIdxbyList=function(C,b,F,P){var Z,ae,ue=Nt;return 0==F.length?void 0!==P&&C.substr(b,2)!==P?-1:b:(Z=F.shift())>=(ae=ue.getChildIdx(C,b)).length?-1:ue.getIdxbyList(C,ae[Z],F,P)},Nt.getIdxbyListEx=function(C,b,F,P){var Z,ae,ue=Nt;if(0==F.length)return void 0!==P&&C.substr(b,2)!==P?-1:b;Z=F.shift(),ae=ue.getChildIdx(C,b);for(var Te=0,we=0;we<ae.length;we++){var Me=C.substr(ae[we],2);if("number"==typeof Z&&!ue.isContextTag(Me)&&Te==Z||"string"==typeof Z&&ue.isContextTag(Me,Z))return ue.getIdxbyListEx(C,ae[we],F,P);ue.isContextTag(Me)||Te++}return-1},Nt.getTLVbyList=function(C,b,F,P){var Z=Nt,ae=Z.getIdxbyList(C,b,F,P);return-1==ae||ae>=C.length?null:Z.getTLV(C,ae)},Nt.getTLVbyListEx=function(C,b,F,P){var Z=Nt,ae=Z.getIdxbyListEx(C,b,F,P);return-1==ae?null:Z.getTLV(C,ae)},Nt.getVbyList=function(C,b,F,P,Z){var ae,ue,Te=Nt;return-1==(ae=Te.getIdxbyList(C,b,F,P))||ae>=C.length?null:(ue=Te.getV(C,ae),!0===Z&&(ue=ue.substr(2)),ue)},Nt.getVbyListEx=function(C,b,F,P,Z){var ae,ue,Te=Nt;return-1==(ae=Te.getIdxbyListEx(C,b,F,P))?null:(ue=Te.getV(C,ae),"03"==C.substr(ae,2)&&!1!==Z&&(ue=ue.substr(2)),ue)},Nt.getInt=function(C,b,F){null==F&&(F=-1);try{var P=C.substr(b,2);if("02"!=P&&"03"!=P)return F;var Z=Nt.getV(C,b);return"02"==P?parseInt(Z,16):function(ue){try{var Te=ue.substr(0,2);if("00"==Te)return parseInt(ue.substr(2),16);var we=parseInt(Te,16),Me=ue.substr(2),ze=parseInt(Me,16).toString(2);return"0"==ze&&(ze="00000000"),ze=ze.slice(0,0-we),parseInt(ze,2)}catch{return-1}}(Z)}catch{return F}},Nt.getOID=function(C,b,F){null==F&&(F=null);try{return"06"!=C.substr(b,2)?F:function(Z){if(!Bo(Z))return null;try{var ae=[],ue=Z.substr(0,2),Te=parseInt(ue,16);ae[0]=new String(Math.floor(Te/40)),ae[1]=new String(Te%40);for(var we=Z.substr(2),Me=[],ze=0;ze<we.length/2;ze++)Me.push(parseInt(we.substr(2*ze,2),16));var Ue=[],qe="";for(ze=0;ze<Me.length;ze++)128&Me[ze]?qe+=_o((127&Me[ze]).toString(2),7):(qe+=_o((127&Me[ze]).toString(2),7),Ue.push(new String(parseInt(qe,2))),qe="");var Ye=ae.join(".");return Ue.length>0&&(Ye=Ye+"."+Ue.join(".")),Ye}catch{return null}}(Nt.getV(C,b))}catch{return F}},Nt.getOIDName=function(C,b,F){null==F&&(F=null);try{var P=Nt.getOID(C,b,F);if(P==F)return F;var Z=Pe.asn1.x509.OID.oid2name(P);return""==Z?P:Z}catch{return F}},Nt.getString=function(C,b,F){null==F&&(F=null);try{return ti(Nt.getV(C,b))}catch{return F}},Nt.hextooidstr=function(C){var b=function(qe,Ye){return qe.length>=Ye?qe:new Array(Ye-qe.length+1).join("0")+qe},F=[],P=C.substr(0,2),Z=parseInt(P,16);F[0]=new String(Math.floor(Z/40)),F[1]=new String(Z%40);for(var ae=C.substr(2),ue=[],Te=0;Te<ae.length/2;Te++)ue.push(parseInt(ae.substr(2*Te,2),16));var we=[],Me="";for(Te=0;Te<ue.length;Te++)128&ue[Te]?Me+=b((127&ue[Te]).toString(2),7):(Me+=b((127&ue[Te]).toString(2),7),we.push(new String(parseInt(Me,2))),Me="");var ze=F.join(".");return we.length>0&&(ze=ze+"."+we.join(".")),ze},Nt.dump=function(C,b,F,P){var Z=Nt,ae=Z.getV,ue=Z.dump,Te=Z.getChildIdx,we=C;C instanceof Pe.asn1.ASN1Object&&(we=C.getEncodedHex());var Me=function(It,xn){return It.length<=2*xn?It:It.substr(0,xn)+"..(total "+It.length/2+"bytes).."+It.substr(It.length-xn,xn)};void 0===b&&(b={ommit_long_octet:32}),void 0===F&&(F=0),void 0===P&&(P="");var ze,Ue=b.ommit_long_octet;if("01"==(ze=we.substr(F,2)))return"00"==(qe=ae(we,F))?P+"BOOLEAN FALSE\n":P+"BOOLEAN TRUE\n";if("02"==ze)return P+"INTEGER "+Me(qe=ae(we,F),Ue)+"\n";if("03"==ze){var qe=ae(we,F);return Z.isASN1HEX(qe.substr(2))?(Ye=P+"BITSTRING, encapsulates\n")+ue(qe.substr(2),b,0,P+"  "):P+"BITSTRING "+Me(qe,Ue)+"\n"}if("04"==ze)return qe=ae(we,F),Z.isASN1HEX(qe)?(Ye=P+"OCTETSTRING, encapsulates\n",Ye+=ue(qe,b,0,P+"  ")):P+"OCTETSTRING "+Me(qe,Ue)+"\n";if("05"==ze)return P+"NULL\n";if("06"==ze){var lt=ae(we,F),gt=Pe.asn1.ASN1Util.oidHexToInt(lt),vt=Pe.asn1.x509.OID.oid2name(gt),ke=gt.replace(/\./g," ");return""!=vt?P+"ObjectIdentifier "+vt+" ("+ke+")\n":P+"ObjectIdentifier ("+ke+")\n"}if("0a"==ze)return P+"ENUMERATED "+parseInt(ae(we,F))+"\n";if("0c"==ze)return P+"UTF8String '"+Fn(ae(we,F))+"'\n";if("13"==ze)return P+"PrintableString '"+Fn(ae(we,F))+"'\n";if("14"==ze)return P+"TeletexString '"+Fn(ae(we,F))+"'\n";if("16"==ze)return P+"IA5String '"+Fn(ae(we,F))+"'\n";if("17"==ze)return P+"UTCTime "+Fn(ae(we,F))+"\n";if("18"==ze)return P+"GeneralizedTime "+Fn(ae(we,F))+"\n";if("1a"==ze)return P+"VisualString '"+Fn(ae(we,F))+"'\n";if("1e"==ze)return P+"BMPString '"+Fn(ae(we,F))+"'\n";if("30"==ze){if("3000"==we.substr(F,4))return P+"SEQUENCE {}\n";Ye=P+"SEQUENCE\n";var He=b;if((2==(dt=Te(we,F)).length||3==dt.length)&&"06"==we.substr(dt[0],2)&&"04"==we.substr(dt[dt.length-1],2)){vt=Z.oidname(ae(we,dt[0]));var Xe=JSON.parse(JSON.stringify(b));Xe.x509ExtName=vt,He=Xe}for(var Qe=0;Qe<dt.length;Qe++)Ye+=ue(we,He,dt[Qe],P+"  ");return Ye}if("31"==ze){Ye=P+"SET\n";var dt=Te(we,F);for(Qe=0;Qe<dt.length;Qe++)Ye+=ue(we,b,dt[Qe],P+"  ");return Ye}if(0!=(128&(ze=parseInt(ze,16)))){var Ye,yt=31&ze;if(0!=(32&ze)){for(Ye=P+"["+yt+"]\n",dt=Te(we,F),Qe=0;Qe<dt.length;Qe++)Ye+=ue(we,b,dt[Qe],P+"  ");return Ye}return qe=ae(we,F),Nt.isASN1HEX(qe)?(Ye=P+"["+yt+"]\n")+ue(qe,b,0,P+"  "):(("68747470"==qe.substr(0,8)||"subjectAltName"===b.x509ExtName&&2==yt)&&(qe=Fn(qe)),P+"["+yt+"] "+qe+"\n")}return P+"UNKNOWN("+ze+") "+ae(we,F)+"\n"},Nt.isContextTag=function(C,b){var F,P;C=C.toLowerCase();try{F=parseInt(C,16)}catch{return-1}if(void 0===b)return 128==(192&F);try{return null!=b.match(/^\[[0-9]+\]$/)&&!((P=parseInt(b.substr(1,b.length-1),10))>31)&&128==(192&F)&&(31&F)==P}catch{return!1}},Nt.isASN1HEX=function(C){var b=Nt;if(C.length%2==1)return!1;var F=b.getVblen(C,0),P=C.substr(0,2),Z=b.getL(C,0);return C.length-P.length-Z.length==2*F},Nt.checkStrictDER=function(C,b,F,P,Z){var ae=Nt;if(void 0===F){if("string"!=typeof C)throw new Error("not hex string");if(C=C.toLowerCase(),!Pe.lang.String.isHex(C))throw new Error("not hex string");F=C.length,Z=(P=C.length/2)<128?1:Math.ceil(P.toString(16))+1}if(ae.getL(C,b).length>2*Z)throw new Error("L of TLV too long: idx="+b);var ue=ae.getVblen(C,b);if(ue>P)throw new Error("value of L too long than hex: idx="+b);var Te=ae.getTLV(C,b),we=Te.length-2-ae.getL(C,b).length;if(we!==2*ue)throw new Error("V string length and L's value not the same:"+we+"/"+2*ue);if(0===b&&C.length!=Te.length)throw new Error("total length and TLV length unmatch:"+C.length+"!="+Te.length);var Me=C.substr(b,2);if("02"===Me){var ze=ae.getVidx(C,b);if("00"==C.substr(ze,2)&&C.charCodeAt(ze+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(Me,16)){for(var Ue=ae.getVblen(C,b),qe=0,Ye=ae.getChildIdx(C,b),lt=0;lt<Ye.length;lt++)qe+=ae.getTLV(C,Ye[lt]).length,ae.checkStrictDER(C,Ye[lt],F,P,Z);if(2*Ue!=qe)throw new Error("sum of children's TLV length and L unmatch: "+2*Ue+"!="+qe)}},Nt.oidname=function(C){var b=Pe.asn1;Pe.lang.String.isHex(C)&&(C=b.ASN1Util.oidHexToInt(C));var F=b.x509.OID.oid2name(C);return""===F&&(F=C),F},void 0!==Pe&&Pe||(S.KJUR=Pe={}),void 0!==Pe.lang&&Pe.lang||(Pe.lang={}),Pe.lang.String=function(){},"function"==typeof o?(S.utf8tob64u=ei=function(b){return En(o.from(b,"utf8").toString("base64"))},S.b64utoutf8=nn=function(b){return o.from(Kn(b),"base64").toString("utf8")}):(S.utf8tob64u=ei=function(b){return Ht(vo(dr(b)))},S.b64utoutf8=nn=function(b){return decodeURIComponent(Ur(Tn(b)))}),Pe.lang.String.isInteger=function(C){return!!C.match(/^[0-9]+$/)||!!C.match(/^-[0-9]+$/)},Pe.lang.String.isHex=function(C){return Bo(C)},Pe.lang.String.isBase64=function(C){return!(!(C=C.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||C.length%4!=0)},Pe.lang.String.isBase64URL=function(C){return!C.match(/[+/=]/)&&(C=Kn(C),Pe.lang.String.isBase64(C))},Pe.lang.String.isIntegerArray=function(C){return!!(C=C.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},Pe.lang.String.isPrintable=function(C){return null!==C.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},Pe.lang.String.isIA5=function(C){return null!==C.match(/^[\x20-\x21\x23-\x7f]*$/)},Pe.lang.String.isMail=function(C){return null!==C.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var _o=function(b,F,P){return null==P&&(P="0"),b.length>=F?b:new Array(F-b.length+1).join(P)+b};void 0!==Pe&&Pe||(S.KJUR=Pe={}),void 0!==Pe.crypto&&Pe.crypto||(Pe.crypto={}),Pe.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:U.algo.MD5,sha1:U.algo.SHA1,sha224:U.algo.SHA224,sha256:U.algo.SHA256,sha384:U.algo.SHA384,sha512:U.algo.SHA512,ripemd160:U.algo.RIPEMD160},this.getDigestInfoHex=function(C,b){if(void 0===this.DIGESTINFOHEAD[b])throw"alg not supported in Util.DIGESTINFOHEAD: "+b;return this.DIGESTINFOHEAD[b]+C},this.getPaddedDigestInfoHex=function(C,b,F){var P=this.getDigestInfoHex(C,b),Z=F/4;if(P.length+22>Z)throw"key is too short for SigAlg: keylen="+F+","+b;for(var ue="00"+P,Te="",we=Z-"0001".length-ue.length,Me=0;Me<we;Me+=2)Te+="ff";return"0001"+Te+ue},this.hashString=function(C,b){return new Pe.crypto.MessageDigest({alg:b}).digestString(C)},this.hashHex=function(C,b){return new Pe.crypto.MessageDigest({alg:b}).digestHex(C)},this.sha1=function(C){return this.hashString(C,"sha1")},this.sha256=function(C){return this.hashString(C,"sha256")},this.sha256Hex=function(C){return this.hashHex(C,"sha256")},this.sha512=function(C){return this.hashString(C,"sha512")},this.sha512Hex=function(C){return this.hashHex(C,"sha512")},this.isKey=function(C){return C instanceof ot||C instanceof Pe.crypto.DSA||C instanceof Pe.crypto.ECDSA}},Pe.crypto.Util.md5=function(C){return new Pe.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(C)},Pe.crypto.Util.ripemd160=function(C){return new Pe.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(C)},Pe.crypto.Util.SECURERANDOMGEN=new ge,Pe.crypto.Util.getRandomHexOfNbytes=function(C){var b=new Array(C);return Pe.crypto.Util.SECURERANDOMGEN.nextBytes(b),_t(b)},Pe.crypto.Util.getRandomBigIntegerOfNbytes=function(C){return new me(Pe.crypto.Util.getRandomHexOfNbytes(C),16)},Pe.crypto.Util.getRandomHexOfNbits=function(C){var b=C%8,F=new Array((C-b)/8+1);return Pe.crypto.Util.SECURERANDOMGEN.nextBytes(F),F[0]=(255<<b&255^255)&F[0],_t(F)},Pe.crypto.Util.getRandomBigIntegerOfNbits=function(C){return new me(Pe.crypto.Util.getRandomHexOfNbits(C),16)},Pe.crypto.Util.getRandomBigIntegerZeroToMax=function(C){for(var b=C.bitLength();;){var F=Pe.crypto.Util.getRandomBigIntegerOfNbits(b);if(-1!=C.compareTo(F))return F}},Pe.crypto.Util.getRandomBigIntegerMinToMax=function(C,b){var F=C.compareTo(b);if(1==F)throw"biMin is greater than biMax";if(0==F)return C;var P=b.subtract(C);return Pe.crypto.Util.getRandomBigIntegerZeroToMax(P).add(C)},Pe.crypto.MessageDigest=function(C){this.setAlgAndProvider=function(b,F){if(null!==(b=Pe.crypto.MessageDigest.getCanonicalAlgName(b))&&void 0===F&&(F=Pe.crypto.Util.DEFAULTPROVIDER[b]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(b)&&"cryptojs"==F){try{this.md=Pe.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[b].create()}catch(P){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+P}this.updateString=function(P){this.md.update(P)},this.updateHex=function(P){var Z=U.enc.Hex.parse(P);this.md.update(Z)},this.digest=function(){return this.md.finalize().toString(U.enc.Hex)},this.digestString=function(P){return this.updateString(P),this.digest()},this.digestHex=function(P){return this.updateHex(P),this.digest()}}if(-1!=":sha256:".indexOf(b)&&"sjcl"==F){try{this.md=new sjcl.hash.sha256}catch(P){throw"setAlgAndProvider hash alg set fail alg="+b+"/"+P}this.updateString=function(P){this.md.update(P)},this.updateHex=function(P){var Z=sjcl.codec.hex.toBits(P);this.md.update(Z)},this.digest=function(){var P=this.md.finalize();return sjcl.codec.hex.fromBits(P)},this.digestString=function(P){return this.updateString(P),this.digest()},this.digestHex=function(P){return this.updateHex(P),this.digest()}}},this.updateString=function(b){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(b){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(b){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(b){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==C&&void 0!==C.alg&&(this.algName=C.alg,void 0===C.prov&&(this.provName=Pe.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},Pe.crypto.MessageDigest.getCanonicalAlgName=function(C){return"string"==typeof C&&(C=(C=C.toLowerCase()).replace(/-/,"")),C},Pe.crypto.MessageDigest.getHashLength=function(C){var b=Pe.crypto.MessageDigest,F=b.getCanonicalAlgName(C);if(void 0===b.HASHLENGTH[F])throw"not supported algorithm: "+C;return b.HASHLENGTH[F]},Pe.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},Pe.crypto.Mac=function(C){this.setAlgAndProvider=function(b,F){if(null==(b=b.toLowerCase())&&(b="hmacsha1"),"hmac"!=(b=b.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+b;void 0===F&&(F=Pe.crypto.Util.DEFAULTPROVIDER[b]),this.algProv=b+"/"+F;var P=b.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(P)&&"cryptojs"==F){try{this.mac=U.algo.HMAC.create(Pe.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[P],this.pass)}catch(ae){throw"setAlgAndProvider hash alg set fail hashAlg="+P+"/"+ae}this.updateString=function(ae){this.mac.update(ae)},this.updateHex=function(ae){var ue=U.enc.Hex.parse(ae);this.mac.update(ue)},this.doFinal=function(){return this.mac.finalize().toString(U.enc.Hex)},this.doFinalString=function(ae){return this.updateString(ae),this.doFinal()},this.doFinalHex=function(ae){return this.updateHex(ae),this.doFinal()}}},this.updateString=function(b){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(b){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(b){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(b){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(b){if("string"==typeof b){var F=b;return b.length%2!=1&&b.match(/^[0-9A-Fa-f]+$/)||(F=Pi(b)),void(this.pass=U.enc.Hex.parse(F))}if("object"!=(void 0===b?"undefined":x(b)))throw"KJUR.crypto.Mac unsupported password type: "+b;if(F=null,void 0!==b.hex){if(b.hex.length%2!=0||!b.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+b.hex;F=b.hex}if(void 0!==b.utf8&&(F=Vi(b.utf8)),void 0!==b.rstr&&(F=Pi(b.rstr)),void 0!==b.b64&&(F=_e(b.b64)),void 0!==b.b64u&&(F=Tn(b.b64u)),null==F)throw"KJUR.crypto.Mac unsupported password type: "+b;this.pass=U.enc.Hex.parse(F)},void 0!==C&&(void 0!==C.pass&&this.setPassword(C.pass),void 0!==C.alg&&(this.algName=C.alg,void 0===C.prov&&(this.provName=Pe.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},Pe.crypto.Signature=function(C){var b=null;if(this._setAlgNames=function(){var F=this.algName.match(/^(.+)with(.+)$/);F&&(this.mdAlgName=F[1].toLowerCase(),this.pubkeyAlgName=F[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(F,P){for(var Z="",ae=P/4-F.length,ue=0;ue<ae;ue++)Z+="0";return Z+F},this.setAlgAndProvider=function(F,P){if(this._setAlgNames(),"cryptojs/jsrsa"!=P)throw new Error("provider not supported: "+P);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new Pe.crypto.MessageDigest({alg:this.mdAlgName})}catch(Z){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Z)}this.init=function(Z,ae){var ue=null;try{ue=void 0===ae?oi.getKey(Z):oi.getKey(Z,ae)}catch(Te){throw"init failed:"+Te}if(!0===ue.isPrivate)this.prvKey=ue,this.state="SIGN";else{if(!0!==ue.isPublic)throw"init failed.:"+ue;this.pubKey=ue,this.state="VERIFY"}},this.updateString=function(Z){this.md.updateString(Z)},this.updateHex=function(Z){this.md.updateHex(Z)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==Pe.crypto.ECDSA&&(this.prvKey=new Pe.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ot&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ot&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof Pe.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof Pe.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Z){return this.updateString(Z),this.sign()},this.signHex=function(Z){return this.updateHex(Z),this.sign()},this.verify=function(Z){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==Pe.crypto.ECDSA&&(this.pubKey=new Pe.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ot&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Z,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ot&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,Z);if(void 0!==Pe.crypto.ECDSA&&this.pubKey instanceof Pe.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Z);if(void 0!==Pe.crypto.DSA&&this.pubKey instanceof Pe.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Z);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(F,P){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(F){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(F){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(F){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(F){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(F){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=C,void 0!==C&&(void 0!==C.alg&&(this.algName=C.alg,this.provName=void 0===C.prov?Pe.crypto.Util.DEFAULTPROVIDER[this.algName]:C.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==C.psssaltlen&&(this.pssSaltLen=C.psssaltlen),void 0!==C.prvkeypem)){if(void 0!==C.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{b=oi.getKey(C.prvkeypem),this.init(b)}catch(F){throw"fatal error to load pem private key: "+F}}},Pe.crypto.Cipher=function(C){},Pe.crypto.Cipher.encrypt=function(C,b,F){if(b instanceof ot&&b.isPublic){var P=Pe.crypto.Cipher.getAlgByKeyAndName(b,F);if("RSA"===P)return b.encrypt(C);if("RSAOAEP"===P)return b.encryptOAEP(C,"sha1");var Z=P.match(/^RSAOAEP(\d+)$/);if(null!==Z)return b.encryptOAEP(C,"sha"+Z[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+F}throw"Cipher.encrypt: unsupported key or algorithm"},Pe.crypto.Cipher.decrypt=function(C,b,F){if(b instanceof ot&&b.isPrivate){var P=Pe.crypto.Cipher.getAlgByKeyAndName(b,F);if("RSA"===P)return b.decrypt(C);if("RSAOAEP"===P)return b.decryptOAEP(C,"sha1");var Z=P.match(/^RSAOAEP(\d+)$/);if(null!==Z)return b.decryptOAEP(C,"sha"+Z[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+F}throw"Cipher.decrypt: unsupported key or algorithm"},Pe.crypto.Cipher.getAlgByKeyAndName=function(C,b){if(C instanceof ot){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(b))return b;if(null==b)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+b}throw"getAlgByKeyAndName: not supported algorithm name: "+b},Pe.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==Pe&&Pe||(S.KJUR=Pe={}),void 0!==Pe.crypto&&Pe.crypto||(Pe.crypto={}),Pe.crypto.ECDSA=function(C){var b=Error,F=me,P=kt,Z=Pe.crypto.ECDSA,ae=Pe.crypto.ECParameterDB,ue=Z.getName,we=Nt.getVbyListEx,Me=Nt.isASN1HEX,ze=new ge;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(Ue){return new F(Ue.bitLength(),ze).mod(Ue.subtract(F.ONE)).add(F.ONE)},this.setNamedCurve=function(Ue){this.ecparams=ae.getByName(Ue),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=Ue},this.setPrivateKeyHex=function(Ue){this.isPrivate=!0,this.prvKeyHex=Ue},this.setPublicKeyHex=function(Ue){this.isPublic=!0,this.pubKeyHex=Ue},this.getPublicKeyXYHex=function(){var Ue=this.pubKeyHex;if("04"!==Ue.substr(0,2))throw"this method supports uncompressed format(04) only";var qe=this.ecparams.keylen/4;if(Ue.length!==2+2*qe)throw"malformed public key hex length";var Ye={};return Ye.x=Ue.substr(2,qe),Ye.y=Ue.substr(2+qe),Ye},this.getShortNISTPCurveName=function(){var Ue=this.curveName;return"secp256r1"===Ue||"NIST P-256"===Ue||"P-256"===Ue||"prime256v1"===Ue?"P-256":"secp384r1"===Ue||"NIST P-384"===Ue||"P-384"===Ue?"P-384":null},this.generateKeyPairHex=function(){var qe=this.getBigRandom(this.ecparams.n),Ye=this.ecparams.G.multiply(qe),lt=Ye.getX().toBigInteger(),gt=Ye.getY().toBigInteger(),vt=this.ecparams.keylen/4,ke=("0000000000"+qe.toString(16)).slice(-vt),He="04"+("0000000000"+lt.toString(16)).slice(-vt)+("0000000000"+gt.toString(16)).slice(-vt);return this.setPrivateKeyHex(ke),this.setPublicKeyHex(He),{ecprvhex:ke,ecpubhex:He}},this.signWithMessageHash=function(Ue){return this.signHex(Ue,this.prvKeyHex)},this.signHex=function(Ue,qe){var Ye=new F(qe,16),lt=this.ecparams.n,gt=new F(Ue.substring(0,this.ecparams.keylen/4),16);do{var vt=this.getBigRandom(lt),ke=this.ecparams.G.multiply(vt).getX().toBigInteger().mod(lt)}while(ke.compareTo(F.ZERO)<=0);var He=vt.modInverse(lt).multiply(gt.add(Ye.multiply(ke))).mod(lt);return Z.biRSSigToASN1Sig(ke,He)},this.sign=function(Ue,qe){var Ye=qe,lt=this.ecparams.n,gt=F.fromByteArrayUnsigned(Ue);do{var vt=this.getBigRandom(lt),ke=this.ecparams.G.multiply(vt).getX().toBigInteger().mod(lt)}while(ke.compareTo(me.ZERO)<=0);var He=vt.modInverse(lt).multiply(gt.add(Ye.multiply(ke))).mod(lt);return this.serializeSig(ke,He)},this.verifyWithMessageHash=function(Ue,qe){return this.verifyHex(Ue,qe,this.pubKeyHex)},this.verifyHex=function(Ue,qe,Ye){try{var lt,gt,vt=Z.parseSigHex(qe);lt=vt.r,gt=vt.s;var ke=P.decodeFromHex(this.ecparams.curve,Ye),He=new F(Ue.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(He,lt,gt,ke)}catch{return!1}},this.verify=function(Ue,qe,Ye){var lt,gt,vt;if(Bitcoin.Util.isArray(qe)){var ke=this.parseSig(qe);lt=ke.r,gt=ke.s}else{if("object"!==(void 0===qe?"undefined":x(qe))||!qe.r||!qe.s)throw"Invalid value for signature";lt=qe.r,gt=qe.s}if(Ye instanceof kt)vt=Ye;else{if(!Bitcoin.Util.isArray(Ye))throw"Invalid format for pubkey value, must be byte array or ECPointFp";vt=P.decodeFrom(this.ecparams.curve,Ye)}var He=F.fromByteArrayUnsigned(Ue);return this.verifyRaw(He,lt,gt,vt)},this.verifyRaw=function(Ue,qe,Ye,lt){var gt=this.ecparams.n,vt=this.ecparams.G;if(qe.compareTo(F.ONE)<0||qe.compareTo(gt)>=0||Ye.compareTo(F.ONE)<0||Ye.compareTo(gt)>=0)return!1;var ke=Ye.modInverse(gt),He=Ue.multiply(ke).mod(gt),Xe=qe.multiply(ke).mod(gt);return vt.multiply(He).add(lt.multiply(Xe)).getX().toBigInteger().mod(gt).equals(qe)},this.serializeSig=function(Ue,qe){var Ye=Ue.toByteArraySigned(),lt=qe.toByteArraySigned(),gt=[];return gt.push(2),gt.push(Ye.length),(gt=gt.concat(Ye)).push(2),gt.push(lt.length),(gt=gt.concat(lt)).unshift(gt.length),gt.unshift(48),gt},this.parseSig=function(Ue){var qe;if(48!=Ue[0])throw new Error("Signature not a valid DERSequence");if(2!=Ue[qe=2])throw new Error("First element in signature must be a DERInteger");var Ye=Ue.slice(qe+2,qe+2+Ue[qe+1]);if(2!=Ue[qe+=2+Ue[qe+1]])throw new Error("Second element in signature must be a DERInteger");var lt=Ue.slice(qe+2,qe+2+Ue[qe+1]);return qe+=2+Ue[qe+1],{r:F.fromByteArrayUnsigned(Ye),s:F.fromByteArrayUnsigned(lt)}},this.parseSigCompact=function(Ue){if(65!==Ue.length)throw"Signature has the wrong length";var qe=Ue[0]-27;if(qe<0||qe>7)throw"Invalid signature type";var Ye=this.ecparams.n;return{r:F.fromByteArrayUnsigned(Ue.slice(1,33)).mod(Ye),s:F.fromByteArrayUnsigned(Ue.slice(33,65)).mod(Ye),i:qe}},this.readPKCS5PrvKeyHex=function(Ue){if(!1===Me(Ue))throw new Error("not ASN.1 hex string");var qe,Ye,lt;try{qe=we(Ue,0,["[0]",0],"06"),Ye=we(Ue,0,[1],"04");try{lt=we(Ue,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=ue(qe),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(lt),this.setPrivateKeyHex(Ye),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(Ue){if(!1===Me(Ue))throw new b("not ASN.1 hex string");var qe,Ye,lt;try{we(Ue,0,[1,0],"06"),qe=we(Ue,0,[1,1],"06"),Ye=we(Ue,0,[2,0,1],"04");try{lt=we(Ue,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new b("malformed PKCS#8 plain ECC private key")}if(this.curveName=ue(qe),void 0===this.curveName)throw new b("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(lt),this.setPrivateKeyHex(Ye),this.isPublic=!1},this.readPKCS8PubKeyHex=function(Ue){if(!1===Me(Ue))throw new b("not ASN.1 hex string");var qe,Ye;try{we(Ue,0,[0,0],"06"),qe=we(Ue,0,[0,1],"06"),Ye=we(Ue,0,[1],"03")}catch{throw new b("malformed PKCS#8 ECC public key")}if(this.curveName=ue(qe),null===this.curveName)throw new b("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ye)},this.readCertPubKeyHex=function(Ue,qe){if(!1===Me(Ue))throw new b("not ASN.1 hex string");var Ye,lt;try{Ye=we(Ue,0,[0,5,0,1],"06"),lt=we(Ue,0,[0,5,1],"03")}catch{throw new b("malformed X.509 certificate ECC public key")}if(this.curveName=ue(Ye),null===this.curveName)throw new b("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(lt)},void 0!==C&&void 0!==C.curve&&(this.curveName=C.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==C&&(void 0!==C.prv&&this.setPrivateKeyHex(C.prv),void 0!==C.pub&&this.setPublicKeyHex(C.pub))},Pe.crypto.ECDSA.parseSigHex=function(C){var b=Pe.crypto.ECDSA.parseSigHexInHexRS(C);return{r:new me(b.r,16),s:new me(b.s,16)}},Pe.crypto.ECDSA.parseSigHexInHexRS=function(C){var F=Nt.getChildIdx,P=Nt.getV;if(Nt.checkStrictDER(C,0),"30"!=C.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var Z=F(C,0);if(2!=Z.length)throw new Error("signature shall have two elements");var ae=Z[0],ue=Z[1];if("02"!=C.substr(ae,2))throw new Error("1st item not ASN.1 integer");if("02"!=C.substr(ue,2))throw new Error("2nd item not ASN.1 integer");return{r:P(C,ae),s:P(C,ue)}},Pe.crypto.ECDSA.asn1SigToConcatSig=function(C){var b=Pe.crypto.ECDSA.parseSigHexInHexRS(C),F=b.r,P=b.s;if("00"==F.substr(0,2)&&F.length%32==2&&(F=F.substr(2)),"00"==P.substr(0,2)&&P.length%32==2&&(P=P.substr(2)),F.length%32==30&&(F="00"+F),P.length%32==30&&(P="00"+P),F.length%32!=0)throw"unknown ECDSA sig r length error";if(P.length%32!=0)throw"unknown ECDSA sig s length error";return F+P},Pe.crypto.ECDSA.concatSigToASN1Sig=function(C){if(C.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var b=C.substr(0,C.length/2),F=C.substr(C.length/2);return Pe.crypto.ECDSA.hexRSSigToASN1Sig(b,F)},Pe.crypto.ECDSA.hexRSSigToASN1Sig=function(C,b){var F=new me(C,16),P=new me(b,16);return Pe.crypto.ECDSA.biRSSigToASN1Sig(F,P)},Pe.crypto.ECDSA.biRSSigToASN1Sig=function(C,b){var F=Pe.asn1,P=new F.DERInteger({bigint:C}),Z=new F.DERInteger({bigint:b});return new F.DERSequence({array:[P,Z]}).getEncodedHex()},Pe.crypto.ECDSA.getName=function(C){return"2b8104001f"===C?"secp192k1":"2a8648ce3d030107"===C?"secp256r1":"2b8104000a"===C?"secp256k1":"2b81040021"===C?"secp224r1":"2b81040022"===C?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(C)?"secp256r1":-1!=="|secp256k1|".indexOf(C)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(C)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(C)?"secp384r1":null},void 0!==Pe&&Pe||(S.KJUR=Pe={}),void 0!==Pe.crypto&&Pe.crypto||(Pe.crypto={}),Pe.crypto.ECParameterDB=new function(){var C={},b={};function F(P){return new me(P,16)}this.getByName=function(P){var Z=P;if(void 0!==b[Z]&&(Z=b[P]),void 0!==C[Z])return C[Z];throw"unregistered EC curve name: "+Z},this.regist=function(P,Z,ae,ue,Te,we,Me,ze,Ue,qe,Ye,lt){C[P]={};var gt=F(ae),vt=F(ue),ke=F(Te),He=F(we),Xe=F(Me),Qe=new qt(gt,vt,ke),dt=Qe.decodePointHex("04"+ze+Ue);C[P].name=P,C[P].keylen=Z,C[P].curve=Qe,C[P].G=dt,C[P].n=He,C[P].h=Xe,C[P].oid=Ye,C[P].info=lt;for(var yt=0;yt<qe.length;yt++)b[qe[yt]]=P}},Pe.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),Pe.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),Pe.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),Pe.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),Pe.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),Pe.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),Pe.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),Pe.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),Pe.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),Pe.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var oi=function(){var C=function(Me,ze,Ue){return b(U.AES,Me,ze,Ue)},b=function(Me,ze,Ue,qe){var Ye=U.enc.Hex.parse(ze),lt=U.enc.Hex.parse(Ue),gt=U.enc.Hex.parse(qe),vt={};vt.key=lt,vt.iv=gt,vt.ciphertext=Ye;var ke=Me.decrypt(vt,lt,{iv:gt});return U.enc.Hex.stringify(ke)},F=function(Me,ze,Ue){return P(U.AES,Me,ze,Ue)},P=function(Me,ze,Ue,qe){var Ye=U.enc.Hex.parse(ze),lt=U.enc.Hex.parse(Ue),gt=U.enc.Hex.parse(qe),vt=Me.encrypt(Ye,lt,{iv:gt}),ke=U.enc.Hex.parse(vt.toString());return U.enc.Base64.stringify(ke)},Z={"AES-256-CBC":{proc:C,eproc:F,keylen:32,ivlen:16},"AES-192-CBC":{proc:C,eproc:F,keylen:24,ivlen:16},"AES-128-CBC":{proc:C,eproc:F,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(Me,ze,Ue){return b(U.TripleDES,Me,ze,Ue)},eproc:function(Me,ze,Ue){return P(U.TripleDES,Me,ze,Ue)},keylen:24,ivlen:8},"DES-CBC":{proc:function(Me,ze,Ue){return b(U.DES,Me,ze,Ue)},eproc:function(Me,ze,Ue){return P(U.DES,Me,ze,Ue)},keylen:8,ivlen:8}},ae=function(Me){var ze={},Ue=Me.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Ue&&(ze.cipher=Ue[1],ze.ivsalt=Ue[2]);var qe=Me.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));qe&&(ze.type=qe[1]);var Ye=-1,lt=0;-1!=Me.indexOf("\r\n\r\n")&&(Ye=Me.indexOf("\r\n\r\n"),lt=2),-1!=Me.indexOf("\n\n")&&(Ye=Me.indexOf("\n\n"),lt=1);var gt=Me.indexOf("-----END");if(-1!=Ye&&-1!=gt){var vt=Me.substring(Ye+2*lt,gt-lt);vt=vt.replace(/\s+/g,""),ze.data=vt}return ze},ue=function(Me,ze,Ue){for(var qe=Ue.substring(0,16),Ye=U.enc.Hex.parse(qe),lt=U.enc.Utf8.parse(ze),gt=Z[Me].keylen+Z[Me].ivlen,vt="",ke=null;;){var He=U.algo.MD5.create();if(null!=ke&&He.update(ke),He.update(lt),He.update(Ye),ke=He.finalize(),(vt+=U.enc.Hex.stringify(ke)).length>=2*gt)break}var Xe={};return Xe.keyhex=vt.substr(0,2*Z[Me].keylen),Xe.ivhex=vt.substr(2*Z[Me].keylen,2*Z[Me].ivlen),Xe},Te=function(Me,ze,Ue,qe){var Ye=U.enc.Base64.parse(Me),lt=U.enc.Hex.stringify(Ye);return(0,Z[ze].proc)(lt,Ue,qe)};return{version:"1.0.0",parsePKCS5PEM:function(Me){return ae(Me)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(Me,ze,Ue){return ue(Me,ze,Ue)},decryptKeyB64:function(Me,ze,Ue,qe){return Te(Me,ze,Ue,qe)},getDecryptedKeyHex:function(Me,ze){var Ue=ae(Me),qe=Ue.cipher,Ye=Ue.ivsalt,lt=Ue.data,gt=ue(qe,ze,Ye).keyhex;return Te(lt,qe,gt,Ye)},getEncryptedPKCS5PEMFromPrvKeyHex:function(Me,ze,Ue,qe,Ye){var ke,He,lt="";if(void 0!==qe&&null!=qe||(qe="AES-256-CBC"),void 0===Z[qe])throw"KEYUTIL unsupported algorithm: "+qe;void 0!==Ye&&null!=Ye||(Ye=(ke=Z[qe].ivlen,He=U.lib.WordArray.random(ke),U.enc.Hex.stringify(He)).toUpperCase());var gt=function(ke,He,Xe,Qe){return(0,Z[He].eproc)(ke,Xe,Qe)}(ze,qe,ue(qe,Ue,Ye).keyhex,Ye);return lt="-----BEGIN "+Me+" PRIVATE KEY-----\r\n",lt+="Proc-Type: 4,ENCRYPTED\r\n",lt+="DEK-Info: "+qe+","+Ye+"\r\n",lt+="\r\n",(lt+=gt.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+Me+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(Me){var Ue=Nt.getChildIdx,qe=Nt.getV,Ye={},lt=Ue(Me,0);if(2!=lt.length)throw"malformed format: SEQUENCE(0).items != 2: "+lt.length;Ye.ciphertext=qe(Me,lt[1]);var gt=Ue(Me,lt[0]);if(2!=gt.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+gt.length;if("2a864886f70d01050d"!=qe(Me,gt[0]))throw"this only supports pkcs5PBES2";var vt=Ue(Me,gt[1]);if(2!=gt.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+vt.length;var ke=Ue(Me,vt[1]);if(2!=ke.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+ke.length;if("2a864886f70d0307"!=qe(Me,ke[0]))throw"this only supports TripleDES";Ye.encryptionSchemeAlg="TripleDES",Ye.encryptionSchemeIV=qe(Me,ke[1]);var He=Ue(Me,vt[0]);if(2!=He.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+He.length;if("2a864886f70d01050c"!=qe(Me,He[0]))throw"this only supports pkcs5PBKDF2";var Xe=Ue(Me,He[1]);if(Xe.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+Xe.length;Ye.pbkdf2Salt=qe(Me,Xe[0]);var Qe=qe(Me,Xe[1]);try{Ye.pbkdf2Iter=parseInt(Qe,16)}catch{throw"malformed format pbkdf2Iter: "+Qe}return Ye},getPBKDF2KeyHexFromParam:function(Me,ze){var Ue=U.enc.Hex.parse(Me.pbkdf2Salt),Ye=U.PBKDF2(ze,Ue,{keySize:6,iterations:Me.pbkdf2Iter});return U.enc.Hex.stringify(Ye)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(Me,ze){var Ue=Ki(Me,"ENCRYPTED PRIVATE KEY"),qe=this.parseHexOfEncryptedPKCS8(Ue),Ye=oi.getPBKDF2KeyHexFromParam(qe,ze),lt={};lt.ciphertext=U.enc.Hex.parse(qe.ciphertext);var gt=U.enc.Hex.parse(Ye),vt=U.enc.Hex.parse(qe.encryptionSchemeIV),ke=U.TripleDES.decrypt(lt,gt,{iv:vt});return U.enc.Hex.stringify(ke)},getKeyFromEncryptedPKCS8PEM:function(Me,ze){var Ue=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(Me,ze);return this.getKeyFromPlainPrivatePKCS8Hex(Ue)},parsePlainPrivatePKCS8Hex:function(Me){var ze=Nt,Ue=ze.getChildIdx,qe=ze.getV,Ye={algparam:null};if("30"!=Me.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var lt=Ue(Me,0);if(3!=lt.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=Me.substr(lt[1],2))throw"malformed PKCS8 private key(code:003)";var gt=Ue(Me,lt[1]);if(2!=gt.length)throw"malformed PKCS8 private key(code:004)";if("06"!=Me.substr(gt[0],2))throw"malformed PKCS8 private key(code:005)";if(Ye.algoid=qe(Me,gt[0]),"06"==Me.substr(gt[1],2)&&(Ye.algparam=qe(Me,gt[1])),"04"!=Me.substr(lt[2],2))throw"malformed PKCS8 private key(code:006)";return Ye.keyidx=ze.getVidx(Me,lt[2]),Ye},getKeyFromPlainPrivatePKCS8PEM:function(Me){var ze=Ki(Me,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(ze)},getKeyFromPlainPrivatePKCS8Hex:function(Me){var ze,Ue=this.parsePlainPrivatePKCS8Hex(Me);if("2a864886f70d010101"==Ue.algoid)ze=new ot;else if("2a8648ce380401"==Ue.algoid)ze=new Pe.crypto.DSA;else{if("2a8648ce3d0201"!=Ue.algoid)throw"unsupported private key algorithm";ze=new Pe.crypto.ECDSA}return ze.readPKCS8PrvKeyHex(Me),ze},_getKeyFromPublicPKCS8Hex:function(Me){var ze,Ue=Nt.getVbyList(Me,0,[0,0],"06");if("2a864886f70d010101"===Ue)ze=new ot;else if("2a8648ce380401"===Ue)ze=new Pe.crypto.DSA;else{if("2a8648ce3d0201"!==Ue)throw"unsupported PKCS#8 public key hex";ze=new Pe.crypto.ECDSA}return ze.readPKCS8PubKeyHex(Me),ze},parsePublicRawRSAKeyHex:function(Me){var Ue=Nt.getChildIdx,qe=Nt.getV,Ye={};if("30"!=Me.substr(0,2))throw"malformed RSA key(code:001)";var lt=Ue(Me,0);if(2!=lt.length)throw"malformed RSA key(code:002)";if("02"!=Me.substr(lt[0],2))throw"malformed RSA key(code:003)";if(Ye.n=qe(Me,lt[0]),"02"!=Me.substr(lt[1],2))throw"malformed RSA key(code:004)";return Ye.e=qe(Me,lt[1]),Ye},parsePublicPKCS8Hex:function(Me){var ze=Nt,Ue=ze.getChildIdx,qe=ze.getV,Ye={algparam:null},lt=Ue(Me,0);if(2!=lt.length)throw"outer DERSequence shall have 2 elements: "+lt.length;var gt=lt[0];if("30"!=Me.substr(gt,2))throw"malformed PKCS8 public key(code:001)";var vt=Ue(Me,gt);if(2!=vt.length)throw"malformed PKCS8 public key(code:002)";if("06"!=Me.substr(vt[0],2))throw"malformed PKCS8 public key(code:003)";if(Ye.algoid=qe(Me,vt[0]),"06"==Me.substr(vt[1],2)?Ye.algparam=qe(Me,vt[1]):"30"==Me.substr(vt[1],2)&&(Ye.algparam={},Ye.algparam.p=ze.getVbyList(Me,vt[1],[0],"02"),Ye.algparam.q=ze.getVbyList(Me,vt[1],[1],"02"),Ye.algparam.g=ze.getVbyList(Me,vt[1],[2],"02")),"03"!=Me.substr(lt[1],2))throw"malformed PKCS8 public key(code:004)";return Ye.key=qe(Me,lt[1]).substr(2),Ye}}}();oi.getKey=function(C,b,F){var ci,P=(vt=Nt).getChildIdx,Z=vt.getVbyList,ae=Pe.crypto,ue=ae.ECDSA,Te=ae.DSA,we=ot,Me=Ki,ze=oi;if(void 0!==we&&C instanceof we||void 0!==ue&&C instanceof ue||void 0!==Te&&C instanceof Te)return C;if(void 0!==C.curve&&void 0!==C.xy&&void 0===C.d)return new ue({pub:C.xy,curve:C.curve});if(void 0!==C.curve&&void 0!==C.d)return new ue({prv:C.d,curve:C.curve});if(void 0===C.kty&&void 0!==C.n&&void 0!==C.e&&void 0===C.d)return(Xt=new we).setPublic(C.n,C.e),Xt;if(void 0===C.kty&&void 0!==C.n&&void 0!==C.e&&void 0!==C.d&&void 0!==C.p&&void 0!==C.q&&void 0!==C.dp&&void 0!==C.dq&&void 0!==C.co&&void 0===C.qi)return(Xt=new we).setPrivateEx(C.n,C.e,C.d,C.p,C.q,C.dp,C.dq,C.co),Xt;if(void 0===C.kty&&void 0!==C.n&&void 0!==C.e&&void 0!==C.d&&void 0===C.p)return(Xt=new we).setPrivate(C.n,C.e,C.d),Xt;if(void 0!==C.p&&void 0!==C.q&&void 0!==C.g&&void 0!==C.y&&void 0===C.x)return(Xt=new Te).setPublic(C.p,C.q,C.g,C.y),Xt;if(void 0!==C.p&&void 0!==C.q&&void 0!==C.g&&void 0!==C.y&&void 0!==C.x)return(Xt=new Te).setPrivate(C.p,C.q,C.g,C.y,C.x),Xt;if("RSA"===C.kty&&void 0!==C.n&&void 0!==C.e&&void 0===C.d)return(Xt=new we).setPublic(Tn(C.n),Tn(C.e)),Xt;if("RSA"===C.kty&&void 0!==C.n&&void 0!==C.e&&void 0!==C.d&&void 0!==C.p&&void 0!==C.q&&void 0!==C.dp&&void 0!==C.dq&&void 0!==C.qi)return(Xt=new we).setPrivateEx(Tn(C.n),Tn(C.e),Tn(C.d),Tn(C.p),Tn(C.q),Tn(C.dp),Tn(C.dq),Tn(C.qi)),Xt;if("RSA"===C.kty&&void 0!==C.n&&void 0!==C.e&&void 0!==C.d)return(Xt=new we).setPrivate(Tn(C.n),Tn(C.e),Tn(C.d)),Xt;if("EC"===C.kty&&void 0!==C.crv&&void 0!==C.x&&void 0!==C.y&&void 0===C.d){var Ue=(Bt=new ue({curve:C.crv})).ecparams.keylen/4,qe="04"+("0000000000"+Tn(C.x)).slice(-Ue)+("0000000000"+Tn(C.y)).slice(-Ue);return Bt.setPublicKeyHex(qe),Bt}if("EC"===C.kty&&void 0!==C.crv&&void 0!==C.x&&void 0!==C.y&&void 0!==C.d){Ue=(Bt=new ue({curve:C.crv})).ecparams.keylen/4,qe="04"+("0000000000"+Tn(C.x)).slice(-Ue)+("0000000000"+Tn(C.y)).slice(-Ue);var Ye=("0000000000"+Tn(C.d)).slice(-Ue);return Bt.setPublicKeyHex(qe),Bt.setPrivateKeyHex(Ye),Bt}if("pkcs5prv"===F){var lt,gt=C,vt=Nt;if(9===(lt=P(gt,0)).length)(Xt=new we).readPKCS5PrvKeyHex(gt);else if(6===lt.length)(Xt=new Te).readPKCS5PrvKeyHex(gt);else{if(!(lt.length>2&&"04"===gt.substr(lt[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(Xt=new ue).readPKCS5PrvKeyHex(gt)}return Xt}if("pkcs8prv"===F)return ze.getKeyFromPlainPrivatePKCS8Hex(C);if("pkcs8pub"===F)return ze._getKeyFromPublicPKCS8Hex(C);if("x509pub"===F)return jn.getPublicKeyFromCertHex(C);if(-1!=C.indexOf("-END CERTIFICATE-",0)||-1!=C.indexOf("-END X509 CERTIFICATE-",0)||-1!=C.indexOf("-END TRUSTED CERTIFICATE-",0))return jn.getPublicKeyFromCertPEM(C);if(-1!=C.indexOf("-END PUBLIC KEY-")){var ke=Ki(C,"PUBLIC KEY");return ze._getKeyFromPublicPKCS8Hex(ke)}if(-1!=C.indexOf("-END RSA PRIVATE KEY-")&&-1==C.indexOf("4,ENCRYPTED")){var He=Me(C,"RSA PRIVATE KEY");return ze.getKey(He,null,"pkcs5prv")}if(-1!=C.indexOf("-END DSA PRIVATE KEY-")&&-1==C.indexOf("4,ENCRYPTED")){var Xe=Z(ci=Me(C,"DSA PRIVATE KEY"),0,[1],"02"),Qe=Z(ci,0,[2],"02"),dt=Z(ci,0,[3],"02"),yt=Z(ci,0,[4],"02"),zt=Z(ci,0,[5],"02");return(Xt=new Te).setPrivate(new me(Xe,16),new me(Qe,16),new me(dt,16),new me(yt,16),new me(zt,16)),Xt}if(-1!=C.indexOf("-END EC PRIVATE KEY-")&&-1==C.indexOf("4,ENCRYPTED"))return He=Me(C,"EC PRIVATE KEY"),ze.getKey(He,null,"pkcs5prv");if(-1!=C.indexOf("-END PRIVATE KEY-"))return ze.getKeyFromPlainPrivatePKCS8PEM(C);if(-1!=C.indexOf("-END RSA PRIVATE KEY-")&&-1!=C.indexOf("4,ENCRYPTED")){var It=ze.getDecryptedKeyHex(C,b),xn=new ot;return xn.readPKCS5PrvKeyHex(It),xn}if(-1!=C.indexOf("-END EC PRIVATE KEY-")&&-1!=C.indexOf("4,ENCRYPTED")){var Bt,Xt=Z(ci=ze.getDecryptedKeyHex(C,b),0,[1],"04"),Yn=Z(ci,0,[2,0],"06"),pi=Z(ci,0,[3,0],"03").substr(2);if(void 0===Pe.crypto.OID.oidhex2name[Yn])throw"undefined OID(hex) in KJUR.crypto.OID: "+Yn;return(Bt=new ue({curve:Pe.crypto.OID.oidhex2name[Yn]})).setPublicKeyHex(pi),Bt.setPrivateKeyHex(Xt),Bt.isPublic=!1,Bt}if(-1!=C.indexOf("-END DSA PRIVATE KEY-")&&-1!=C.indexOf("4,ENCRYPTED"))return Xe=Z(ci=ze.getDecryptedKeyHex(C,b),0,[1],"02"),Qe=Z(ci,0,[2],"02"),dt=Z(ci,0,[3],"02"),yt=Z(ci,0,[4],"02"),zt=Z(ci,0,[5],"02"),(Xt=new Te).setPrivate(new me(Xe,16),new me(Qe,16),new me(dt,16),new me(yt,16),new me(zt,16)),Xt;if(-1!=C.indexOf("-END ENCRYPTED PRIVATE KEY-"))return ze.getKeyFromEncryptedPKCS8PEM(C,b);throw new Error("not supported argument")},oi.generateKeypair=function(C,b){if("RSA"==C){var F=b;(ue=new ot).generate(F,"10001"),ue.isPrivate=!0,ue.isPublic=!0;var P=new ot,Z=ue.n.toString(16),ae=ue.e.toString(16);return P.setPublic(Z,ae),P.isPrivate=!1,P.isPublic=!0,(Te={}).prvKeyObj=ue,Te.pubKeyObj=P,Te}if("EC"==C){var ue,Te,we=b,Me=new Pe.crypto.ECDSA({curve:we}).generateKeyPairHex();return(ue=new Pe.crypto.ECDSA({curve:we})).setPublicKeyHex(Me.ecpubhex),ue.setPrivateKeyHex(Me.ecprvhex),ue.isPrivate=!0,ue.isPublic=!1,(P=new Pe.crypto.ECDSA({curve:we})).setPublicKeyHex(Me.ecpubhex),P.isPrivate=!1,P.isPublic=!0,(Te={}).prvKeyObj=ue,Te.pubKeyObj=P,Te}throw"unknown algorithm: "+C},oi.getPEM=function(C,b,F,P,Z,ae){var Te=Pe.asn1,we=Te.DERObjectIdentifier,Me=Te.DERInteger,ze=Te.ASN1Util.newObject,qe=Pe.crypto,Ye=qe.DSA,lt=qe.ECDSA,gt=ot;function vt(Bt){return ze({seq:[{int:0},{int:{bigint:Bt.n}},{int:Bt.e},{int:{bigint:Bt.d}},{int:{bigint:Bt.p}},{int:{bigint:Bt.q}},{int:{bigint:Bt.dmp1}},{int:{bigint:Bt.dmq1}},{int:{bigint:Bt.coeff}}]})}function ke(Bt){return ze({seq:[{int:1},{octstr:{hex:Bt.prvKeyHex}},{tag:["a0",!0,{oid:{name:Bt.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Bt.pubKeyHex}}]}]})}function He(Bt){return ze({seq:[{int:0},{int:{bigint:Bt.p}},{int:{bigint:Bt.q}},{int:{bigint:Bt.g}},{int:{bigint:Bt.y}},{int:{bigint:Bt.x}}]})}if((void 0!==gt&&C instanceof gt||void 0!==Ye&&C instanceof Ye||void 0!==lt&&C instanceof lt)&&1==C.isPublic&&(void 0===b||"PKCS8PUB"==b))return Ti(yt=new(0,Te.x509.SubjectPublicKeyInfo)(C).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==b&&void 0!==gt&&C instanceof gt&&(void 0===F||null==F)&&1==C.isPrivate)return Ti(yt=vt(C).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==b&&void 0!==lt&&C instanceof lt&&(void 0===F||null==F)&&1==C.isPrivate){var Xe=new we({name:C.curveName}).getEncodedHex(),Qe=ke(C).getEncodedHex(),dt="";return(dt+=Ti(Xe,"EC PARAMETERS"))+Ti(Qe,"EC PRIVATE KEY")}if("PKCS1PRV"==b&&void 0!==Ye&&C instanceof Ye&&(void 0===F||null==F)&&1==C.isPrivate)return Ti(yt=He(C).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==b&&void 0!==gt&&C instanceof gt&&void 0!==F&&null!=F&&1==C.isPrivate){var yt=vt(C).getEncodedHex();return void 0===P&&(P="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",yt,F,P,ae)}if("PKCS5PRV"==b&&void 0!==lt&&C instanceof lt&&void 0!==F&&null!=F&&1==C.isPrivate)return yt=ke(C).getEncodedHex(),void 0===P&&(P="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",yt,F,P,ae);if("PKCS5PRV"==b&&void 0!==Ye&&C instanceof Ye&&void 0!==F&&null!=F&&1==C.isPrivate)return yt=He(C).getEncodedHex(),void 0===P&&(P="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",yt,F,P,ae);var zt=function(Xt,Yn){var pi=It(Xt,Yn);return new ze({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:pi.pbkdf2Salt}},{int:pi.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:pi.encryptionSchemeIV}}]}]}]},{octstr:{hex:pi.ciphertext}}]}).getEncodedHex()},It=function(Xt,Yn){var pi=U.lib.WordArray.random(8),ci=U.lib.WordArray.random(8),nr=U.PBKDF2(Yn,pi,{keySize:6,iterations:100}),Yi=U.enc.Hex.parse(Xt),Fi=U.TripleDES.encrypt(Yi,nr,{iv:ci})+"",Ai={};return Ai.ciphertext=Fi,Ai.pbkdf2Salt=U.enc.Hex.stringify(pi),Ai.pbkdf2Iter=100,Ai.encryptionSchemeAlg="DES-EDE3-CBC",Ai.encryptionSchemeIV=U.enc.Hex.stringify(ci),Ai};if("PKCS8PRV"==b&&null!=gt&&C instanceof gt&&1==C.isPrivate){var xn=vt(C).getEncodedHex();return yt=ze({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:xn}}]}).getEncodedHex(),void 0===F||null==F?Ti(yt,"PRIVATE KEY"):Ti(Qe=zt(yt,F),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==b&&void 0!==lt&&C instanceof lt&&1==C.isPrivate)return xn=new ze({seq:[{int:1},{octstr:{hex:C.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+C.pubKeyHex}}]}]}).getEncodedHex(),yt=ze({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:C.curveName}}]},{octstr:{hex:xn}}]}).getEncodedHex(),void 0===F||null==F?Ti(yt,"PRIVATE KEY"):Ti(Qe=zt(yt,F),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==b&&void 0!==Ye&&C instanceof Ye&&1==C.isPrivate)return xn=new Me({bigint:C.x}).getEncodedHex(),yt=ze({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:C.p}},{int:{bigint:C.q}},{int:{bigint:C.g}}]}]},{octstr:{hex:xn}}]}).getEncodedHex(),void 0===F||null==F?Ti(yt,"PRIVATE KEY"):Ti(Qe=zt(yt,F),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},oi.getKeyFromCSRPEM=function(C){var b=Ki(C,"CERTIFICATE REQUEST");return oi.getKeyFromCSRHex(b)},oi.getKeyFromCSRHex=function(C){var b=oi.parseCSRHex(C);return oi.getKey(b.p8pubkeyhex,null,"pkcs8pub")},oi.parseCSRHex=function(C){var F=Nt.getChildIdx,P=Nt.getTLV,Z={},ae=C;if("30"!=ae.substr(0,2))throw"malformed CSR(code:001)";var ue=F(ae,0);if(ue.length<1)throw"malformed CSR(code:002)";if("30"!=ae.substr(ue[0],2))throw"malformed CSR(code:003)";var Te=F(ae,ue[0]);if(Te.length<3)throw"malformed CSR(code:004)";return Z.p8pubkeyhex=P(ae,Te[2]),Z},oi.getKeyID=function(C){var b=oi,F=Nt;"string"==typeof C&&-1!=C.indexOf("BEGIN ")&&(C=b.getKey(C));var P=Ki(b.getPEM(C)),Z=F.getIdxbyList(P,0,[1]),ae=F.getV(P,Z).substring(2);return Pe.crypto.Util.hashHex(ae,"sha1")},oi.getJWKFromKey=function(C){var b={};if(C instanceof ot&&C.isPrivate)return b.kty="RSA",b.n=Ht(C.n.toString(16)),b.e=Ht(C.e.toString(16)),b.d=Ht(C.d.toString(16)),b.p=Ht(C.p.toString(16)),b.q=Ht(C.q.toString(16)),b.dp=Ht(C.dmp1.toString(16)),b.dq=Ht(C.dmq1.toString(16)),b.qi=Ht(C.coeff.toString(16)),b;if(C instanceof ot&&C.isPublic)return b.kty="RSA",b.n=Ht(C.n.toString(16)),b.e=Ht(C.e.toString(16)),b;if(C instanceof Pe.crypto.ECDSA&&C.isPrivate){if("P-256"!==(P=C.getShortNISTPCurveName())&&"P-384"!==P)throw"unsupported curve name for JWT: "+P;var F=C.getPublicKeyXYHex();return b.kty="EC",b.crv=P,b.x=Ht(F.x),b.y=Ht(F.y),b.d=Ht(C.prvKeyHex),b}if(C instanceof Pe.crypto.ECDSA&&C.isPublic){var P;if("P-256"!==(P=C.getShortNISTPCurveName())&&"P-384"!==P)throw"unsupported curve name for JWT: "+P;return F=C.getPublicKeyXYHex(),b.kty="EC",b.crv=P,b.x=Ht(F.x),b.y=Ht(F.y),b}throw"not supported key object"},ot.getPosArrayOfChildrenFromHex=function(C){return Nt.getChildIdx(C,0)},ot.getHexValueArrayOfChildrenFromHex=function(C){var b,F=Nt.getV,P=F(C,(b=ot.getPosArrayOfChildrenFromHex(C))[0]),Z=F(C,b[1]),ae=F(C,b[2]),ue=F(C,b[3]),Te=F(C,b[4]),we=F(C,b[5]),Me=F(C,b[6]),ze=F(C,b[7]),Ue=F(C,b[8]);return(b=new Array).push(P,Z,ae,ue,Te,we,Me,ze,Ue),b},ot.prototype.readPrivateKeyFromPEMString=function(C){var b=Ki(C),F=ot.getHexValueArrayOfChildrenFromHex(b);this.setPrivateEx(F[1],F[2],F[3],F[4],F[5],F[6],F[7],F[8])},ot.prototype.readPKCS5PrvKeyHex=function(C){var b=ot.getHexValueArrayOfChildrenFromHex(C);this.setPrivateEx(b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},ot.prototype.readPKCS8PrvKeyHex=function(C){var b,F,P,Z,ae,ue,Te,we,ze=Nt.getVbyListEx;if(!1===Nt.isASN1HEX(C))throw new Error("not ASN.1 hex string");try{b=ze(C,0,[2,0,1],"02"),F=ze(C,0,[2,0,2],"02"),P=ze(C,0,[2,0,3],"02"),Z=ze(C,0,[2,0,4],"02"),ae=ze(C,0,[2,0,5],"02"),ue=ze(C,0,[2,0,6],"02"),Te=ze(C,0,[2,0,7],"02"),we=ze(C,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(b,F,P,Z,ae,ue,Te,we)},ot.prototype.readPKCS5PubKeyHex=function(C){var b=Nt,F=b.getV;if(!1===b.isASN1HEX(C))throw new Error("keyHex is not ASN.1 hex string");var P=b.getChildIdx(C,0);if(2!==P.length||"02"!==C.substr(P[0],2)||"02"!==C.substr(P[1],2))throw new Error("wrong hex for PKCS#5 public key");var Z=F(C,P[0]),ae=F(C,P[1]);this.setPublic(Z,ae)},ot.prototype.readPKCS8PubKeyHex=function(C){var b=Nt;if(!1===b.isASN1HEX(C))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==b.getTLVbyListEx(C,0,[0,0]))throw new Error("not PKCS8 RSA public key");var F=b.getTLVbyListEx(C,0,[1,0]);this.readPKCS5PubKeyHex(F)},ot.prototype.readCertPubKeyHex=function(C,b){var F,P;(F=new jn).readCertHex(C),P=F.getPublicKeyHex(),this.readPKCS8PubKeyHex(P)};var jo=new RegExp("[^0-9a-f]","gi");function Cr(C,b){for(var F="",P=b/4-C.length,Z=0;Z<P;Z++)F+="0";return F+C}function Nr(C,b,F){for(var P="",Z=0;P.length<b;)P+=ti(F(Pi(C+String.fromCharCode.apply(String,[(4278190080&Z)>>24,(16711680&Z)>>16,(65280&Z)>>8,255&Z])))),Z+=1;return P}function xo(C){for(var b in Pe.crypto.Util.DIGESTINFOHEAD){var F=Pe.crypto.Util.DIGESTINFOHEAD[b],P=F.length;if(C.substring(0,P)==F)return[b,C.substring(P)]}return[]}function jn(C){var b,F=Nt,P=F.getChildIdx,Z=F.getV,ae=F.getTLV,ue=F.getVbyList,Te=F.getVbyListEx,we=F.getTLVbyList,Me=F.getTLVbyListEx,ze=F.getIdxbyList,Ue=F.getIdxbyListEx,qe=F.getVidx,Ye=F.oidname,lt=F.hextooidstr,gt=jn,vt=Ki;try{b=Pe.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==we(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return Te(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var ke=Me(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(ke)},this.getAlgorithmIdentifierName=function(ke){for(var He in b)if(ke===b[He])return He;return Ye(Te(ke,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return we(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return gt.hex2dn(this.getIssuerHex())},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return we(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return gt.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var ke=ue(this.hex,0,[0,4+this.foffset,0]);return ke=ke.replace(/(..)/g,"%$1"),decodeURIComponent(ke)},this.getNotAfter=function(){var ke=ue(this.hex,0,[0,4+this.foffset,1]);return ke=ke.replace(/(..)/g,"%$1"),decodeURIComponent(ke)},this.getPublicKeyHex=function(){return F.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return ze(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var ke=this.getPublicKeyIdx();return ze(this.hex,ke,[1,0],"30")},this.getPublicKey=function(){return oi.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var ke=we(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(ke)},this.getSignatureValueHex=function(){return ue(this.hex,0,[2],"03",!0)},this.verifySignature=function(ke){var He=this.getSignatureAlgorithmField(),Xe=this.getSignatureValueHex(),Qe=we(this.hex,0,[0],"30"),dt=new Pe.crypto.Signature({alg:He});return dt.init(ke),dt.updateHex(Qe),dt.verify(Xe)},this.parseExt=function(ke){var He,Xe,Qe;if(void 0===ke){if(3!==this.version)return-1;He=ze(Qe=this.hex,0,[0,7,0],"30"),Xe=P(Qe,He)}else{Qe=Ki(ke);var dt=ze(Qe,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=Z(Qe,dt))return void(this.aExtInfo=new Array);He=ze(Qe,0,[0,3,0,1,0],"30"),Xe=P(Qe,He),this.hex=Qe}this.aExtInfo=new Array;for(var yt=0;yt<Xe.length;yt++){var zt={critical:!1},It=0;3===P(Qe,Xe[yt]).length&&(zt.critical=!0,It=1),zt.oid=F.hextooidstr(ue(Qe,Xe[yt],[0],"06"));var xn=ze(Qe,Xe[yt],[1+It]);zt.vidx=qe(Qe,xn),this.aExtInfo.push(zt)}},this.getExtInfo=function(ke){var He=this.aExtInfo,Xe=ke;if(ke.match(/^[0-9.]+$/)||(Xe=Pe.asn1.x509.OID.name2oid(ke)),""!==Xe)for(var Qe=0;Qe<He.length;Qe++)if(He[Qe].oid===Xe)return He[Qe]},this.getExtBasicConstraints=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("basicConstraints");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"basicConstraints"};if(He&&(Qe.critical=!0),"3000"===ke)return Qe;if("30030101ff"===ke)return Qe.cA=!0,Qe;if("30060101ff02"===ke.substr(0,12)){var dt=Z(ke,10),yt=parseInt(dt,16);return Qe.cA=!0,Qe.pathLen=yt,Qe}throw new Error("hExtV parse error: "+ke)},this.getExtKeyUsage=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("keyUsage");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"keyUsage"};return He&&(Qe.critical=!0),Qe.names=this.getExtKeyUsageString(ke).split(","),Qe},this.getExtKeyUsageBin=function(ke){if(void 0===ke){var He=this.getExtInfo("keyUsage");if(void 0===He)return"";ke=ae(this.hex,He.vidx)}if(8!=ke.length&&10!=ke.length)throw new Error("malformed key usage value: "+ke);var Xe="000000000000000"+parseInt(ke.substr(6),16).toString(2);return 8==ke.length&&(Xe=Xe.slice(-8)),10==ke.length&&(Xe=Xe.slice(-16)),""==(Xe=Xe.replace(/0+$/,""))&&(Xe="0"),Xe},this.getExtKeyUsageString=function(ke){for(var He=this.getExtKeyUsageBin(ke),Xe=new Array,Qe=0;Qe<He.length;Qe++)"1"==He.substr(Qe,1)&&Xe.push(jn.KEYUSAGE_NAME[Qe]);return Xe.join(",")},this.getExtSubjectKeyIdentifier=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("subjectKeyIdentifier");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"subjectKeyIdentifier"};He&&(Qe.critical=!0);var dt=Z(ke,0);return Qe.kid={hex:dt},Qe},this.getExtAuthorityKeyIdentifier=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("authorityKeyIdentifier");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"authorityKeyIdentifier"};He&&(Qe.critical=!0);for(var dt=P(ke,0),yt=0;yt<dt.length;yt++){var zt=ke.substr(dt[yt],2);if("80"===zt&&(Qe.kid={hex:Z(ke,dt[yt])}),"a1"===zt){var It=ae(ke,dt[yt]),xn=this.getGeneralNames(It);Qe.issuer=xn[0].dn}"82"===zt&&(Qe.sn={hex:Z(ke,dt[yt])})}return Qe},this.getExtExtKeyUsage=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("extKeyUsage");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"extKeyUsage",array:[]};He&&(Qe.critical=!0);for(var dt=P(ke,0),yt=0;yt<dt.length;yt++)Qe.array.push(Ye(Z(ke,dt[yt])));return Qe},this.getExtExtKeyUsageName=function(){var ke=this.getExtInfo("extKeyUsage");if(void 0===ke)return ke;var He=new Array,Xe=ae(this.hex,ke.vidx);if(""===Xe)return He;for(var Qe=P(Xe,0),dt=0;dt<Qe.length;dt++)He.push(Ye(Z(Xe,Qe[dt])));return He},this.getExtSubjectAltName=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("subjectAltName");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"subjectAltName",array:[]};return He&&(Qe.critical=!0),Qe.array=this.getGeneralNames(ke),Qe},this.getExtIssuerAltName=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("issuerAltName");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"issuerAltName",array:[]};return He&&(Qe.critical=!0),Qe.array=this.getGeneralNames(ke),Qe},this.getGeneralNames=function(ke){for(var He=P(ke,0),Xe=[],Qe=0;Qe<He.length;Qe++){var dt=this.getGeneralName(ae(ke,He[Qe]));void 0!==dt&&Xe.push(dt)}return Xe},this.getGeneralName=function(ke){var He=ke.substr(0,2),Xe=Z(ke,0),Qe=ti(Xe);return"81"==He?{rfc822:Qe}:"82"==He?{dns:Qe}:"86"==He?{uri:Qe}:"87"==He?{ip:oa(Xe)}:"a4"==He?{dn:this.getX500Name(Xe)}:void 0},this.getExtSubjectAltName2=function(){var ke,He,Xe,Qe=this.getExtInfo("subjectAltName");if(void 0===Qe)return Qe;for(var dt=new Array,yt=ae(this.hex,Qe.vidx),zt=P(yt,0),It=0;It<zt.length;It++)Xe=yt.substr(zt[It],2),ke=Z(yt,zt[It]),"81"===Xe&&(He=Fn(ke),dt.push(["MAIL",He])),"82"===Xe&&(He=Fn(ke),dt.push(["DNS",He])),"84"===Xe&&(He=jn.hex2dn(ke,0),dt.push(["DN",He])),"86"===Xe&&(He=Fn(ke),dt.push(["URI",He])),"87"===Xe&&(He=oa(ke),dt.push(["IP",He]));return dt},this.getExtCRLDistributionPoints=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("cRLDistributionPoints");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"cRLDistributionPoints",array:[]};He&&(Qe.critical=!0);for(var dt=P(ke,0),yt=0;yt<dt.length;yt++){var zt=ae(ke,dt[yt]);Qe.array.push(this.getDistributionPoint(zt))}return Qe},this.getDistributionPoint=function(ke){for(var He={},Xe=P(ke,0),Qe=0;Qe<Xe.length;Qe++){var dt=ke.substr(Xe[Qe],2),yt=ae(ke,Xe[Qe]);"a0"==dt&&(He.dpname=this.getDistributionPointName(yt))}return He},this.getDistributionPointName=function(ke){for(var He={},Xe=P(ke,0),Qe=0;Qe<Xe.length;Qe++){var dt=ke.substr(Xe[Qe],2),yt=ae(ke,Xe[Qe]);"a0"==dt&&(He.full=this.getGeneralNames(yt))}return He},this.getExtCRLDistributionPointsURI=function(){var ke=this.getExtInfo("cRLDistributionPoints");if(void 0===ke)return ke;for(var He=new Array,Xe=P(this.hex,ke.vidx),Qe=0;Qe<Xe.length;Qe++)try{var dt=Fn(ue(this.hex,Xe[Qe],[0,0,0],"86"));He.push(dt)}catch{}return He},this.getExtAIAInfo=function(){var ke=this.getExtInfo("authorityInfoAccess");if(void 0===ke)return ke;for(var He={ocsp:[],caissuer:[]},Xe=P(this.hex,ke.vidx),Qe=0;Qe<Xe.length;Qe++){var dt=ue(this.hex,Xe[Qe],[0],"06"),yt=ue(this.hex,Xe[Qe],[1],"86");"2b06010505073001"===dt&&He.ocsp.push(Fn(yt)),"2b06010505073002"===dt&&He.caissuer.push(Fn(yt))}return He},this.getExtAuthorityInfoAccess=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("authorityInfoAccess");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"authorityInfoAccess",array:[]};He&&(Qe.critical=!0);for(var dt=P(ke,0),yt=0;yt<dt.length;yt++){var zt=Te(ke,dt[yt],[0],"06"),It=Fn(ue(ke,dt[yt],[1],"86"));if("2b06010505073001"==zt)Qe.array.push({ocsp:It});else{if("2b06010505073002"!=zt)throw new Error("unknown method: "+zt);Qe.array.push({caissuer:It})}}return Qe},this.getExtCertificatePolicies=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("certificatePolicies");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"certificatePolicies",array:[]};He&&(Qe.critical=!0);for(var dt=P(ke,0),yt=0;yt<dt.length;yt++){var zt=ae(ke,dt[yt]),It=this.getPolicyInformation(zt);Qe.array.push(It)}return Qe},this.getPolicyInformation=function(ke){var He={},Xe=ue(ke,0,[0],"06");He.policyoid=Ye(Xe);var Qe=Ue(ke,0,[1],"30");if(-1!=Qe){He.array=[];for(var dt=P(ke,Qe),yt=0;yt<dt.length;yt++){var zt=ae(ke,dt[yt]),It=this.getPolicyQualifierInfo(zt);He.array.push(It)}}return He},this.getPolicyQualifierInfo=function(ke){var He={},Xe=ue(ke,0,[0],"06");if("2b06010505070201"===Xe){var Qe=Te(ke,0,[1],"16");He.cps=ti(Qe)}else if("2b06010505070202"===Xe){var dt=we(ke,0,[1],"30");He.unotice=this.getUserNotice(dt)}return He},this.getUserNotice=function(ke){for(var He={},Xe=P(ke,0),Qe=0;Qe<Xe.length;Qe++){var dt=ae(ke,Xe[Qe]);"30"!=dt.substr(0,2)&&(He.exptext=this.getDisplayText(dt))}return He},this.getDisplayText=function(ke){var He={};return He.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[ke.substr(0,2)],He.str=ti(Z(ke,0)),He},this.getExtCRLNumber=function(ke,He){var Xe={extname:"cRLNumber"};if(He&&(Xe.critical=!0),"02"==ke.substr(0,2))return Xe.num={hex:Z(ke,0)},Xe;throw new Error("hExtV parse error: "+ke)},this.getExtCRLReason=function(ke,He){var Xe={extname:"cRLReason"};if(He&&(Xe.critical=!0),"0a"==ke.substr(0,2))return Xe.code=parseInt(Z(ke,0),16),Xe;throw new Error("hExtV parse error: "+ke)},this.getExtOcspNonce=function(ke,He){var Xe={extname:"ocspNonce"};He&&(Xe.critical=!0);var Qe=Z(ke,0);return Xe.hex=Qe,Xe},this.getExtOcspNoCheck=function(ke,He){var Xe={extname:"ocspNoCheck"};return He&&(Xe.critical=!0),Xe},this.getExtAdobeTimeStamp=function(ke,He){if(void 0===ke&&void 0===He){var Xe=this.getExtInfo("adobeTimeStamp");if(void 0===Xe)return;ke=ae(this.hex,Xe.vidx),He=Xe.critical}var Qe={extname:"adobeTimeStamp"};He&&(Qe.critical=!0);var dt=P(ke,0);if(dt.length>1){var yt=ae(ke,dt[1]),zt=this.getGeneralName(yt);null!=zt.uri&&(Qe.uri=zt.uri)}if(dt.length>2){var It=ae(ke,dt[2]);"0101ff"==It&&(Qe.reqauth=!0),"010100"==It&&(Qe.reqauth=!1)}return Qe},this.getX500NameRule=function(ke){for(var He=null,Xe=[],Qe=0;Qe<ke.length;Qe++)for(var dt=ke[Qe],yt=0;yt<dt.length;yt++)Xe.push(dt[yt]);for(Qe=0;Qe<Xe.length;Qe++){var zt=Xe[Qe],It=zt.ds,Bt=zt.type;if("prn"!=It&&"utf8"!=It&&"ia5"!=It)return"mixed";if("ia5"==It){if("CN"!=Bt)return"mixed";if(Pe.lang.String.isMail(zt.value))continue;return"mixed"}if("C"==Bt){if("prn"==It)continue;return"mixed"}if(null==He)He=It;else if(He!==It)return"mixed"}return He??"prn"},this.getX500Name=function(ke){var He=this.getX500NameArray(ke);return{array:He,str:this.dnarraytostr(He)}},this.getX500NameArray=function(ke){for(var He=[],Xe=P(ke,0),Qe=0;Qe<Xe.length;Qe++)He.push(this.getRDN(ae(ke,Xe[Qe])));return He},this.getRDN=function(ke){for(var He=[],Xe=P(ke,0),Qe=0;Qe<Xe.length;Qe++)He.push(this.getAttrTypeAndValue(ae(ke,Xe[Qe])));return He},this.getAttrTypeAndValue=function(ke){var He={type:null,value:null,ds:null},Xe=P(ke,0),Qe=ue(ke,Xe[0],[],"06"),dt=ue(ke,Xe[1],[]),yt=Pe.asn1.ASN1Util.oidHexToInt(Qe);return He.type=Pe.asn1.x509.OID.oid2atype(yt),He.value=ti(dt),He.ds=this.HEX2STAG[ke.substr(Xe[1],2)],He},this.readCertPEM=function(ke){this.readCertHex(vt(ke))},this.readCertHex=function(ke){this.hex=ke,this.getVersion();try{ze(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var ke={};return ke.version=this.getVersion(),ke.serial={hex:this.getSerialNumberHex()},ke.sigalg=this.getSignatureAlgorithmField(),ke.issuer=this.getIssuer(),ke.notbefore=this.getNotBefore(),ke.notafter=this.getNotAfter(),ke.subject=this.getSubject(),ke.sbjpubkey=Ti(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(ke.ext=this.getExtParamArray()),ke.sighex=this.getSignatureValueHex(),ke},this.getExtParamArray=function(ke){null==ke&&-1!=Ue(this.hex,0,[0,"[3]"])&&(ke=Me(this.hex,0,[0,"[3]",0],"30"));for(var He=[],Xe=P(ke,0),Qe=0;Qe<Xe.length;Qe++){var dt=ae(ke,Xe[Qe]),yt=this.getExtParam(dt);null!=yt&&He.push(yt)}return He},this.getExtParam=function(ke){var He=P(ke,0).length;if(2!=He&&3!=He)throw new Error("wrong number elements in Extension: "+He+" "+ke);var Xe=lt(ue(ke,0,[0],"06")),Qe=!1;3==He&&"0101ff"==we(ke,0,[1])&&(Qe=!0);var dt=we(ke,0,[He-1,0]),yt=void 0;if("2.5.29.14"==Xe?yt=this.getExtSubjectKeyIdentifier(dt,Qe):"2.5.29.15"==Xe?yt=this.getExtKeyUsage(dt,Qe):"2.5.29.17"==Xe?yt=this.getExtSubjectAltName(dt,Qe):"2.5.29.18"==Xe?yt=this.getExtIssuerAltName(dt,Qe):"2.5.29.19"==Xe?yt=this.getExtBasicConstraints(dt,Qe):"2.5.29.31"==Xe?yt=this.getExtCRLDistributionPoints(dt,Qe):"2.5.29.32"==Xe?yt=this.getExtCertificatePolicies(dt,Qe):"2.5.29.35"==Xe?yt=this.getExtAuthorityKeyIdentifier(dt,Qe):"2.5.29.37"==Xe?yt=this.getExtExtKeyUsage(dt,Qe):"1.3.6.1.5.5.7.1.1"==Xe?yt=this.getExtAuthorityInfoAccess(dt,Qe):"2.5.29.20"==Xe?yt=this.getExtCRLNumber(dt,Qe):"2.5.29.21"==Xe?yt=this.getExtCRLReason(dt,Qe):"1.3.6.1.5.5.7.48.1.2"==Xe?yt=this.getExtOcspNonce(dt,Qe):"1.3.6.1.5.5.7.48.1.5"==Xe?yt=this.getExtOcspNoCheck(dt,Qe):"1.2.840.113583.1.1.9.1"==Xe&&(yt=this.getExtAdobeTimeStamp(dt,Qe)),null!=yt)return yt;var zt={extname:Xe,extn:dt};return Qe&&(zt.critical=!0),zt},this.findExt=function(ke,He){for(var Xe=0;Xe<ke.length;Xe++)if(ke[Xe].extname==He)return ke[Xe];return null},this.updateExtCDPFullURI=function(ke,He){var Xe=this.findExt(ke,"cRLDistributionPoints");if(null!=Xe&&null!=Xe.array)for(var Qe=Xe.array,dt=0;dt<Qe.length;dt++)if(null!=Qe[dt].dpname&&null!=Qe[dt].dpname.full)for(var yt=Qe[dt].dpname.full,zt=0;zt<yt.length;zt++){var It=yt[dt];null!=It.uri&&(It.uri=He)}},this.updateExtAIAOCSP=function(ke,He){var Xe=this.findExt(ke,"authorityInfoAccess");if(null!=Xe&&null!=Xe.array)for(var Qe=Xe.array,dt=0;dt<Qe.length;dt++)null!=Qe[dt].ocsp&&(Qe[dt].ocsp=He)},this.updateExtAIACAIssuer=function(ke,He){var Xe=this.findExt(ke,"authorityInfoAccess");if(null!=Xe&&null!=Xe.array)for(var Qe=Xe.array,dt=0;dt<Qe.length;dt++)null!=Qe[dt].caissuer&&(Qe[dt].caissuer=He)},this.dnarraytostr=function(ke){return"/"+ke.map(function(He){return He.map(function(dt){return(zt=dt).type+"="+zt.value;var zt}).join("+")}).join("/")},this.getInfo=function(){var ke,He,Xe,nr,dt=function(nr){for(var Yi="",Fi=nr.array,Ai=0;Ai<Fi.length;Ai++){var Ri=Fi[Ai];if(Yi+="    policy oid: "+Ri.policyoid+"\n",void 0!==Ri.array)for(var ki=0;ki<Ri.array.length;ki++){var ir=Ri.array[ki];void 0!==ir.cps&&(Yi+="    cps: "+ir.cps+"\n")}}return Yi},yt=function(nr){for(var Yi="",Fi=nr.array,Ai=0;Ai<Fi.length;Ai++){var Ri=Fi[Ai];try{void 0!==Ri.dpname.full[0].uri&&(Yi+="    "+Ri.dpname.full[0].uri+"\n")}catch{}try{void 0!==Ri.dname.full[0].dn.hex&&(Yi+="    "+jn.hex2dn(Ri.dpname.full[0].dn.hex)+"\n")}catch{}}return Yi},zt=function(nr){for(var Yi="",Fi=nr.array,Ai=0;Ai<Fi.length;Ai++){var Ri=Fi[Ai];void 0!==Ri.caissuer&&(Yi+="    caissuer: "+Ri.caissuer+"\n"),void 0!==Ri.ocsp&&(Yi+="    ocsp: "+Ri.ocsp+"\n")}return Yi};if(ke="Basic Fields\n",ke+="  serial number: "+this.getSerialNumberHex()+"\n",ke+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",ke+="  issuer: "+this.getIssuerString()+"\n",ke+="  notBefore: "+this.getNotBefore()+"\n",ke+="  notAfter: "+this.getNotAfter()+"\n",ke+="  subject: "+this.getSubjectString()+"\n",ke+="  subject public key info: \n",ke+="    key algorithm: "+(He=this.getPublicKey()).type+"\n","RSA"===He.type&&(ke+="    n="+yo(He.n.toString(16)).substr(0,16)+"...\n",ke+="    e="+yo(He.e.toString(16))+"\n"),null!=(Xe=this.aExtInfo)){ke+="X509v3 Extensions:\n";for(var It=0;It<Xe.length;It++){var xn=Xe[It],Bt=Pe.asn1.x509.OID.oid2name(xn.oid);""===Bt&&(Bt=xn.oid);var Xt="";if(!0===xn.critical&&(Xt="CRITICAL"),ke+="  "+Bt+" "+Xt+":\n","basicConstraints"===Bt){var Yn=this.getExtBasicConstraints();void 0===Yn.cA?ke+="    {}\n":(ke+="    cA=true",void 0!==Yn.pathLen&&(ke+=", pathLen="+Yn.pathLen),ke+="\n")}else if("keyUsage"===Bt)ke+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===Bt)ke+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===Bt){var pi=this.getExtAuthorityKeyIdentifier();void 0!==pi.kid&&(ke+="    kid="+pi.kid.hex+"\n")}else"extKeyUsage"===Bt?ke+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===Bt?ke+="    "+(nr=this.getExtSubjectAltName(),JSON.stringify(nr.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===Bt?ke+=yt(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===Bt?ke+=zt(this.getExtAuthorityInfoAccess()):"certificatePolicies"===Bt&&(ke+=dt(this.getExtCertificatePolicies()))}}return(ke+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof C&&(-1!=C.indexOf("-----BEGIN")?this.readCertPEM(C):Pe.lang.String.isHex(C)&&this.readCertHex(C))}ot.prototype.sign=function(C,b){var F=function(Z){return Pe.crypto.Util.hashString(Z,b)}(C);return this.signWithMessageHash(F,b)},ot.prototype.signWithMessageHash=function(C,b){var F=je(Pe.crypto.Util.getPaddedDigestInfoHex(C,b,this.n.bitLength()),16);return Cr(this.doPrivate(F).toString(16),this.n.bitLength())},ot.prototype.signPSS=function(C,b,F){var ae,P=(ae=Pi(C),Pe.crypto.Util.hashHex(ae,b));return void 0===F&&(F=-1),this.signWithMessageHashPSS(P,b,F)},ot.prototype.signWithMessageHashPSS=function(C,b,F){var P,Z=ti(C),ae=Z.length,ue=this.n.bitLength()-1,Te=Math.ceil(ue/8),we=function(ke){return Pe.crypto.Util.hashHex(ke,b)};if(-1===F||void 0===F)F=ae;else if(-2===F)F=Te-ae-2;else if(F<-2)throw new Error("invalid salt length");if(Te<ae+F+2)throw new Error("data too long");var Me="";F>0&&(Me=new Array(F),(new ge).nextBytes(Me),Me=String.fromCharCode.apply(String,Me));var ze=ti(we(Pi("\0\0\0\0\0\0\0\0"+Z+Me))),Ue=[];for(P=0;P<Te-F-ae-2;P+=1)Ue[P]=0;var qe=String.fromCharCode.apply(String,Ue)+"\x01"+Me,Ye=Nr(ze,qe.length,we),lt=[];for(P=0;P<qe.length;P+=1)lt[P]=qe.charCodeAt(P)^Ye.charCodeAt(P);for(lt[0]&=~(65280>>8*Te-ue&255),P=0;P<ae;P++)lt.push(ze.charCodeAt(P));return lt.push(188),Cr(this.doPrivate(new me(lt)).toString(16),this.n.bitLength())},ot.prototype.verify=function(C,b){var F=je(b=(b=b.replace(jo,"")).replace(/[ \n]+/g,""),16);if(F.bitLength()>this.n.bitLength())return 0;var P=xo(this.doPublic(F).toString(16).replace(/^1f+00/,""));return 0!=P.length&&P[1]==Pe.crypto.Util.hashString(C,P[0])},ot.prototype.verifyWithMessageHash=function(C,b){if(b.length!=Math.ceil(this.n.bitLength()/4))return!1;var F=je(b,16);if(F.bitLength()>this.n.bitLength())return 0;var P=xo(this.doPublic(F).toString(16).replace(/^1f+00/,""));return 0!=P.length&&P[1]==C},ot.prototype.verifyPSS=function(C,b,F,P){var ue,Z=(ue=Pi(C),Pe.crypto.Util.hashHex(ue,F));return void 0===P&&(P=-1),this.verifyWithMessageHashPSS(Z,b,F,P)},ot.prototype.verifyWithMessageHashPSS=function(C,b,F,P){if(b.length!=Math.ceil(this.n.bitLength()/4))return!1;var Z,ae=new me(b,16),ue=function(Xe){return Pe.crypto.Util.hashHex(Xe,F)},Te=ti(C),we=Te.length,Me=this.n.bitLength()-1,ze=Math.ceil(Me/8);if(-1===P||void 0===P)P=we;else if(-2===P)P=ze-we-2;else if(P<-2)throw new Error("invalid salt length");if(ze<we+P+2)throw new Error("data too long");var Ue=this.doPublic(ae).toByteArray();for(Z=0;Z<Ue.length;Z+=1)Ue[Z]&=255;for(;Ue.length<ze;)Ue.unshift(0);if(188!==Ue[ze-1])throw new Error("encoded message does not end in 0xbc");var qe=(Ue=String.fromCharCode.apply(String,Ue)).substr(0,ze-we-1),Ye=Ue.substr(qe.length,we),lt=65280>>8*ze-Me&255;if(0!=(qe.charCodeAt(0)&lt))throw new Error("bits beyond keysize not zero");var gt=Nr(Ye,qe.length,ue),vt=[];for(Z=0;Z<qe.length;Z+=1)vt[Z]=qe.charCodeAt(Z)^gt.charCodeAt(Z);vt[0]&=~lt;var ke=ze-we-P-2;for(Z=0;Z<ke;Z+=1)if(0!==vt[Z])throw new Error("leftmost octets not zero");if(1!==vt[ke])throw new Error("0x01 marker not found");return Ye===ti(ue(Pi("\0\0\0\0\0\0\0\0"+Te+String.fromCharCode.apply(String,vt.slice(-P)))))},ot.SALT_LEN_HLEN=-1,ot.SALT_LEN_MAX=-2,ot.SALT_LEN_RECOVER=-2,jn.hex2dn=function(C,b){if(void 0===b&&(b=0),"30"!==C.substr(b,2))throw new Error("malformed DN");for(var F=new Array,P=Nt.getChildIdx(C,b),Z=0;Z<P.length;Z++)F.push(jn.hex2rdn(C,P[Z]));return"/"+(F=F.map(function(ae){return ae.replace("/","\\/")})).join("/")},jn.hex2rdn=function(C,b){if(void 0===b&&(b=0),"31"!==C.substr(b,2))throw new Error("malformed RDN");for(var F=new Array,P=Nt.getChildIdx(C,b),Z=0;Z<P.length;Z++)F.push(jn.hex2attrTypeValue(C,P[Z]));return(F=F.map(function(ae){return ae.replace("+","\\+")})).join("+")},jn.hex2attrTypeValue=function(C,b){var F=Nt,P=F.getV;if(void 0===b&&(b=0),"30"!==C.substr(b,2))throw new Error("malformed attribute type and value");var Z=F.getChildIdx(C,b);2!==Z.length||C.substr(Z[0],2);var ae=P(C,Z[0]),ue=Pe.asn1.ASN1Util.oidHexToInt(ae);return Pe.asn1.x509.OID.oid2atype(ue)+"="+ti(P(C,Z[1]))},jn.getPublicKeyFromCertHex=function(C){var b=new jn;return b.readCertHex(C),b.getPublicKey()},jn.getPublicKeyFromCertPEM=function(C){var b=new jn;return b.readCertPEM(C),b.getPublicKey()},jn.getPublicKeyInfoPropOfCertPEM=function(C){var b,F,P=Nt.getVbyList,Z={algparam:null};return(b=new jn).readCertPEM(C),F=b.getPublicKeyHex(),Z.keyhex=P(F,0,[1],"03").substr(2),Z.algoid=P(F,0,[0,0],"06"),"2a8648ce3d0201"===Z.algoid&&(Z.algparam=P(F,0,[0,1],"06")),Z},jn.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==Pe&&Pe||(S.KJUR=Pe={}),void 0!==Pe.jws&&Pe.jws||(Pe.jws={}),Pe.jws.JWS=function(){var C=Pe.jws.JWS.isSafeJSONString;this.parseJWS=function(b,F){if(void 0===this.parsedJWS||!F&&void 0===this.parsedJWS.sigvalH){var P=b.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==P)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var Z=P[1],ae=P[2],ue=P[3],Te=Z+"."+ae;if(this.parsedJWS={},this.parsedJWS.headB64U=Z,this.parsedJWS.payloadB64U=ae,this.parsedJWS.sigvalB64U=ue,this.parsedJWS.si=Te,!F){var we=Tn(ue),Me=je(we,16);this.parsedJWS.sigvalH=we,this.parsedJWS.sigvalBI=Me}var ze=nn(Z),Ue=nn(ae);if(this.parsedJWS.headS=ze,this.parsedJWS.payloadS=Ue,!C(ze,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+ze}}},Pe.jws.JWS.sign=function(C,b,F,P,Z){var ae,ue,Te,Me=Pe.jws.JWS,ze=Me.readSafeJSONString,Ue=Me.isSafeJSONString,qe=Pe.crypto,Ye=qe.Mac,lt=qe.Signature,gt=JSON;if("string"!=typeof b&&"object"!=(void 0===b?"undefined":x(b)))throw"spHeader must be JSON string or object: "+b;if("object"==(void 0===b?"undefined":x(b))&&(ae=gt.stringify(ue=b)),"string"==typeof b){if(!Ue(ae=b))throw"JWS Head is not safe JSON string: "+ae;ue=ze(ae)}if(Te=F,"object"==(void 0===F?"undefined":x(F))&&(Te=gt.stringify(F)),""!=C&&null!=C||void 0===ue.alg||(C=ue.alg),""!=C&&null!=C&&void 0===ue.alg&&(ue.alg=C,ae=gt.stringify(ue)),C!==ue.alg)throw"alg and sHeader.alg doesn't match: "+C+"!="+ue.alg;var vt=null;if(void 0===Me.jwsalg2sigalg[C])throw"unsupported alg name: "+C;vt=Me.jwsalg2sigalg[C];var ke=ei(ae)+"."+ei(Te),He="";if("Hmac"==vt.substr(0,4)){if(void 0===P)throw"mac key shall be specified for HS* alg";var Xe=new Ye({alg:vt,prov:"cryptojs",pass:P});Xe.updateString(ke),He=Xe.doFinal()}else if(-1!=vt.indexOf("withECDSA")){(dt=new lt({alg:vt})).init(P,Z),dt.updateString(ke);var Qe=dt.sign();He=Pe.crypto.ECDSA.asn1SigToConcatSig(Qe)}else{var dt;"none"!=vt&&((dt=new lt({alg:vt})).init(P,Z),dt.updateString(ke),He=dt.sign())}return ke+"."+Ht(He)},Pe.jws.JWS.verify=function(C,b,F){var P,ae=Pe.jws.JWS,ue=ae.readSafeJSONString,Te=Pe.crypto,we=Te.ECDSA,Me=Te.Mac,ze=Te.Signature;void 0!==x(ot)&&(P=ot);var Ue=C.split(".");if(3!==Ue.length)return!1;var vt,qe=Ue[0]+"."+Ue[1],Ye=Tn(Ue[2]),lt=ue(nn(Ue[0])),gt=null;if(void 0===lt.alg)throw"algorithm not specified in header";if(vt=(gt=lt.alg).substr(0,2),null!=F&&"[object Array]"===Object.prototype.toString.call(F)&&F.length>0&&-1==(":"+F.join(":")+":").indexOf(":"+gt+":"))throw"algorithm '"+gt+"' not accepted in the list";if("none"!=gt&&null===b)throw"key shall be specified to verify.";if("string"==typeof b&&-1!=b.indexOf("-----BEGIN ")&&(b=oi.getKey(b)),!("RS"!=vt&&"PS"!=vt||b instanceof P))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==vt&&!(b instanceof we))throw"key shall be a ECDSA obj for ES* algs";var ke=null;if(void 0===ae.jwsalg2sigalg[lt.alg])throw"unsupported alg name: "+gt;if("none"==(ke=ae.jwsalg2sigalg[gt]))throw"not supported";if("Hmac"==ke.substr(0,4)){if(void 0===b)throw"hexadecimal key shall be specified for HMAC";var He=new Me({alg:ke,pass:b});return He.updateString(qe),Ye==He.doFinal()}if(-1!=ke.indexOf("withECDSA")){var Xe,Qe=null;try{Qe=we.concatSigToASN1Sig(Ye)}catch{return!1}return(Xe=new ze({alg:ke})).init(b),Xe.updateString(qe),Xe.verify(Qe)}return(Xe=new ze({alg:ke})).init(b),Xe.updateString(qe),Xe.verify(Ye)},Pe.jws.JWS.parse=function(C){var F,P,Z=C.split("."),ae={};if(2!=Z.length&&3!=Z.length)throw"malformed sJWS: wrong number of '.' splitted elements";return F=Z[1],3==Z.length&&(P=Z[2]),ae.headerObj=Pe.jws.JWS.readSafeJSONString(nn(Z[0])),ae.payloadObj=Pe.jws.JWS.readSafeJSONString(nn(F)),ae.headerPP=JSON.stringify(ae.headerObj,null,"  "),ae.payloadPP=null==ae.payloadObj?nn(F):JSON.stringify(ae.payloadObj,null,"  "),void 0!==P&&(ae.sigHex=Tn(P)),ae},Pe.jws.JWS.verifyJWT=function(C,b,F){var P=Pe.jws,Z=P.JWS,ae=Z.readSafeJSONString,ue=Z.inArray,Te=Z.includedArray,we=C.split("."),Me=we[0],ze=we[1],Ue=(Tn(we[2]),ae(nn(Me))),qe=ae(nn(ze));if(void 0===Ue.alg)return!1;if(void 0===F.alg)throw"acceptField.alg shall be specified";if(!ue(Ue.alg,F.alg)||void 0!==qe.iss&&"object"===x(F.iss)&&!ue(qe.iss,F.iss)||void 0!==qe.sub&&"object"===x(F.sub)&&!ue(qe.sub,F.sub))return!1;if(void 0!==qe.aud&&"object"===x(F.aud))if("string"==typeof qe.aud){if(!ue(qe.aud,F.aud))return!1}else if("object"==x(qe.aud)&&!Te(qe.aud,F.aud))return!1;var Ye=P.IntDate.getNow();return void 0!==F.verifyAt&&"number"==typeof F.verifyAt&&(Ye=F.verifyAt),void 0!==F.gracePeriod&&"number"==typeof F.gracePeriod||(F.gracePeriod=0),!(void 0!==qe.exp&&"number"==typeof qe.exp&&qe.exp+F.gracePeriod<Ye||void 0!==qe.nbf&&"number"==typeof qe.nbf&&Ye<qe.nbf-F.gracePeriod||void 0!==qe.iat&&"number"==typeof qe.iat&&Ye<qe.iat-F.gracePeriod||void 0!==qe.jti&&void 0!==F.jti&&qe.jti!==F.jti||!Z.verify(C,b,F.alg))},Pe.jws.JWS.includedArray=function(C,b){var F=Pe.jws.JWS.inArray;if(null===C||"object"!==(void 0===C?"undefined":x(C))||"number"!=typeof C.length)return!1;for(var P=0;P<C.length;P++)if(!F(C[P],b))return!1;return!0},Pe.jws.JWS.inArray=function(C,b){if(null===b||"object"!==(void 0===b?"undefined":x(b))||"number"!=typeof b.length)return!1;for(var F=0;F<b.length;F++)if(b[F]==C)return!0;return!1},Pe.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},Pe.jws.JWS.isSafeJSONString=function(C,b,F){var P=null;try{return"object"!=(void 0===(P=tn(C))?"undefined":x(P))||P.constructor===Array?0:(b&&(b[F]=P),1)}catch{return 0}},Pe.jws.JWS.readSafeJSONString=function(C){var b=null;try{return"object"!=(void 0===(b=tn(C))?"undefined":x(b))||b.constructor===Array?null:b}catch{return null}},Pe.jws.JWS.getEncodedSignatureValueFromJWS=function(C){var b=C.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==b)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return b[1]},Pe.jws.JWS.getJWKthumbprint=function(C){if("RSA"!==C.kty&&"EC"!==C.kty&&"oct"!==C.kty)throw"unsupported algorithm for JWK Thumprint";var b="{";if("RSA"===C.kty){if("string"!=typeof C.n||"string"!=typeof C.e)throw"wrong n and e value for RSA key";b+='"e":"'+C.e+'",',b+='"kty":"'+C.kty+'",',b+='"n":"'+C.n+'"}'}else if("EC"===C.kty){if("string"!=typeof C.crv||"string"!=typeof C.x||"string"!=typeof C.y)throw"wrong crv, x and y value for EC key";b+='"crv":"'+C.crv+'",',b+='"kty":"'+C.kty+'",',b+='"x":"'+C.x+'",',b+='"y":"'+C.y+'"}'}else if("oct"===C.kty){if("string"!=typeof C.k)throw"wrong k value for oct(symmetric) key";b+='"kty":"'+C.kty+'",',b+='"k":"'+C.k+'"}'}var F=Pi(b);return Ht(Pe.crypto.Util.hashHex(F,"sha256"))},Pe.jws.IntDate={},Pe.jws.IntDate.get=function(C){var b=Pe.jws.IntDate,F=b.getNow,P=b.getZulu;if("now"==C)return F();if("now + 1hour"==C)return F()+3600;if("now + 1day"==C)return F()+86400;if("now + 1month"==C)return F()+2592e3;if("now + 1year"==C)return F()+31536e3;if(C.match(/Z$/))return P(C);if(C.match(/^[0-9]+$/))return parseInt(C);throw"unsupported format: "+C},Pe.jws.IntDate.getZulu=function(C){return No(C)},Pe.jws.IntDate.getNow=function(){return~~(new Date/1e3)},Pe.jws.IntDate.intDate2UTCString=function(C){return new Date(1e3*C).toUTCString()},Pe.jws.IntDate.intDate2Zulu=function(C){var b=new Date(1e3*C);return("0000"+b.getUTCFullYear()).slice(-4)+("00"+(b.getUTCMonth()+1)).slice(-2)+("00"+b.getUTCDate()).slice(-2)+("00"+b.getUTCHours()).slice(-2)+("00"+b.getUTCMinutes()).slice(-2)+("00"+b.getUTCSeconds()).slice(-2)+"Z"},S.SecureRandom=ge,S.rng_seed_time=ve,S.BigInteger=me,S.RSAKey=ot,S.EDSA=Pe.crypto.EDSA,S.DSA=Pe.crypto.DSA,S.Signature=Pe.crypto.Signature,S.MessageDigest=Pe.crypto.MessageDigest,S.Mac=Pe.crypto.Mac,S.Cipher=Pe.crypto.Cipher,S.KEYUTIL=oi,S.ASN1HEX=Nt,S.X509=jn,S.CryptoJS=U,S.b64tohex=_e,S.b64toBA=be,S.stoBA=On,S.BAtos=ht,S.BAtohex=_t,S.stohex=gn,S.stob64=function(b){return ee(gn(b))},S.stob64u=function(b){return En(ee(gn(b)))},S.b64utos=function(b){return ht(be(Kn(b)))},S.b64tob64u=En,S.b64utob64=Kn,S.hex2b64=ee,S.hextob64u=Ht,S.b64utohex=Tn,S.utf8tob64u=ei,S.b64utoutf8=nn,S.utf8tob64=function(b){return ee(vo(dr(b)))},S.b64toutf8=function(b){return decodeURIComponent(Ur(_e(b)))},S.utf8tohex=Vi,S.hextoutf8=Fn,S.hextorstr=ti,S.rstrtohex=Pi,S.hextob64=br,S.hextob64nl=ni,S.b64nltohex=Wi,S.hextopem=Ti,S.pemtohex=Ki,S.hextoArrayBuffer=function(b){if(b.length%2!=0)throw"input is not even length";if(null==b.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var F=new ArrayBuffer(b.length/2),P=new DataView(F),Z=0;Z<b.length/2;Z++)P.setUint8(Z,parseInt(b.substr(2*Z,2),16));return F},S.ArrayBuffertohex=function(b){for(var F="",P=new DataView(b),Z=0;Z<b.byteLength;Z++)F+=("00"+P.getUint8(Z).toString(16)).slice(-2);return F},S.zulutomsec=Mr,S.zulutosec=No,S.zulutodate=function(b){return new Date(Mr(b))},S.datetozulu=function(b,F,P){var Z,ae=b.getUTCFullYear();if(F){if(ae<1950||2049<ae)throw"not proper year for UTCTime: "+ae;Z=(""+ae).slice(-2)}else Z=("000"+ae).slice(-4);if(Z+=("0"+(b.getUTCMonth()+1)).slice(-2),Z+=("0"+b.getUTCDate()).slice(-2),Z+=("0"+b.getUTCHours()).slice(-2),Z+=("0"+b.getUTCMinutes()).slice(-2),Z+=("0"+b.getUTCSeconds()).slice(-2),P){var ue=b.getUTCMilliseconds();0!==ue&&(Z+="."+(ue=(ue=("00"+ue).slice(-3)).replace(/0+$/g,"")))}return Z+"Z"},S.uricmptohex=vo,S.hextouricmp=Ur,S.ipv6tohex=Lr,S.hextoipv6=io,S.hextoip=oa,S.iptohex=function(b){var F="malformed IP address";if(!(b=b.toLowerCase(b)).match(/^[0-9.]+$/)){if(b.match(/^[0-9a-f:]+$/)&&-1!==b.indexOf(":"))return Lr(b);throw F}var P=b.split(".");if(4!==P.length)throw F;var Z="";try{for(var ae=0;ae<4;ae++)Z+=("0"+parseInt(P[ae]).toString(16)).slice(-2);return Z}catch{throw F}},S.encodeURIComponentAll=dr,S.newline_toUnix=function(b){return b.replace(/\r\n/gm,"\n")},S.newline_toDos=function(b){return(b=b.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},S.hextoposhex=yo,S.intarystrtohex=function(b){b=(b=(b=b.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return b.split(/,/).map(function(F,P,Z){var ae=parseInt(F);if(ae<0||255<ae)throw"integer not in range 0-255";return("00"+ae.toString(16)).slice(-2)}).join("")}catch(F){throw"malformed integer array string: "+F}},S.strdiffidx=function(b,F){var P=b.length;b.length>F.length&&(P=F.length);for(var Z=0;Z<P;Z++)if(b.charCodeAt(Z)!=F.charCodeAt(Z))return Z;return b.length!=F.length?P:-1},S.KJUR=Pe,S.crypto=Pe.crypto,S.asn1=Pe.asn1,S.jws=Pe.jws,S.lang=Pe.lang}).call(this,k(28).Buffer)},function(O,S,k){"use strict";(function(o){var x=k(30),L=k(31),j=k(32);function d(){return y.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function m(fe,te){if(d()<te)throw new RangeError("Invalid typed array length");return y.TYPED_ARRAY_SUPPORT?(fe=new Uint8Array(te)).__proto__=y.prototype:(null===fe&&(fe=new y(te)),fe.length=te),fe}function y(fe,te,se){if(!(y.TYPED_ARRAY_SUPPORT||this instanceof y))return new y(fe,te,se);if("number"==typeof fe){if("string"==typeof te)throw new Error("If encoding is specified then the first argument must be a string");return z(this,fe)}return R(this,fe,te,se)}function R(fe,te,se,De){if("number"==typeof te)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&te instanceof ArrayBuffer?function(de,ve,rt,xe){if(rt<0||ve.byteLength<rt)throw new RangeError("'offset' is out of bounds");if(ve.byteLength<rt+(xe||0))throw new RangeError("'length' is out of bounds");return ve=void 0===rt&&void 0===xe?new Uint8Array(ve):void 0===xe?new Uint8Array(ve,rt):new Uint8Array(ve,rt,xe),y.TYPED_ARRAY_SUPPORT?(de=ve).__proto__=y.prototype:de=Y(de,ve),de}(fe,te,se,De):"string"==typeof te?function(de,ve,rt){if("string"==typeof rt&&""!==rt||(rt="utf8"),!y.isEncoding(rt))throw new TypeError('"encoding" must be a valid string encoding');var xe=0|Q(ve,rt),q=(de=m(de,xe)).write(ve,rt);return q!==xe&&(de=de.slice(0,q)),de}(fe,te,se):function(de,ve){if(y.isBuffer(ve)){var rt=0|X(ve.length);return 0===(de=m(de,rt)).length||ve.copy(de,0,0,rt),de}if(ve){if("undefined"!=typeof ArrayBuffer&&ve.buffer instanceof ArrayBuffer||"length"in ve)return"number"!=typeof ve.length||(q=ve.length)!=q?m(de,0):Y(de,ve);if("Buffer"===ve.type&&j(ve.data))return Y(de,ve.data)}var q;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(fe,te)}function M(fe){if("number"!=typeof fe)throw new TypeError('"size" argument must be a number');if(fe<0)throw new RangeError('"size" argument must not be negative')}function z(fe,te){if(M(te),fe=m(fe,te<0?0:0|X(te)),!y.TYPED_ARRAY_SUPPORT)for(var se=0;se<te;++se)fe[se]=0;return fe}function Y(fe,te){var se=te.length<0?0:0|X(te.length);fe=m(fe,se);for(var De=0;De<se;De+=1)fe[De]=255&te[De];return fe}function X(fe){if(fe>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|fe}function Q(fe,te){if(y.isBuffer(fe))return fe.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(fe)||fe instanceof ArrayBuffer))return fe.byteLength;"string"!=typeof fe&&(fe=""+fe);var se=fe.length;if(0===se)return 0;for(var De=!1;;)switch(te){case"ascii":case"latin1":case"binary":return se;case"utf8":case"utf-8":case void 0:return nt(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*se;case"hex":return se>>>1;case"base64":return Ge(fe).length;default:if(De)return nt(fe).length;te=(""+te).toLowerCase(),De=!0}}function W(fe,te,se){var De=!1;if((void 0===te||te<0)&&(te=0),te>this.length||((void 0===se||se>this.length)&&(se=this.length),se<=0)||(se>>>=0)<=(te>>>=0))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return A(this,te,se);case"utf8":case"utf-8":return T(this,te,se);case"ascii":return E(this,te,se);case"latin1":case"binary":return N(this,te,se);case"base64":return v(this,te,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,te,se);default:if(De)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),De=!0}}function J(fe,te,se){var De=fe[te];fe[te]=fe[se],fe[se]=De}function le(fe,te,se,De,Ve){if(0===fe.length)return-1;if("string"==typeof se?(De=se,se=0):se>2147483647?se=2147483647:se<-2147483648&&(se=-2147483648),se=+se,isNaN(se)&&(se=Ve?0:fe.length-1),se<0&&(se=fe.length+se),se>=fe.length){if(Ve)return-1;se=fe.length-1}else if(se<0){if(!Ve)return-1;se=0}if("string"==typeof te&&(te=y.from(te,De)),y.isBuffer(te))return 0===te.length?-1:U(fe,te,se,De,Ve);if("number"==typeof te)return te&=255,y.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?Ve?Uint8Array.prototype.indexOf.call(fe,te,se):Uint8Array.prototype.lastIndexOf.call(fe,te,se):U(fe,[te],se,De,Ve);throw new TypeError("val must be string, number or Buffer")}function U(fe,te,se,De,Ve){var de,ve=1,rt=fe.length,xe=te.length;if(void 0!==De&&("ucs2"===(De=String(De).toLowerCase())||"ucs-2"===De||"utf16le"===De||"utf-16le"===De)){if(fe.length<2||te.length<2)return-1;ve=2,rt/=2,xe/=2,se/=2}function q(je,tt){return 1===ve?je[tt]:je.readUInt16BE(tt*ve)}if(Ve){var D=-1;for(de=se;de<rt;de++)if(q(fe,de)===q(te,-1===D?0:de-D)){if(-1===D&&(D=de),de-D+1===xe)return D*ve}else-1!==D&&(de-=de-D),D=-1}else for(se+xe>rt&&(se=rt-xe),de=se;de>=0;de--){for(var K=!0,ge=0;ge<xe;ge++)if(q(fe,de+ge)!==q(te,ge)){K=!1;break}if(K)return de}return-1}function G(fe,te,se,De){se=Number(se)||0;var Ve=fe.length-se;De?(De=Number(De))>Ve&&(De=Ve):De=Ve;var de=te.length;if(de%2!=0)throw new TypeError("Invalid hex string");De>de/2&&(De=de/2);for(var ve=0;ve<De;++ve){var rt=parseInt(te.substr(2*ve,2),16);if(isNaN(rt))return ve;fe[se+ve]=rt}return ve}function $(fe,te,se,De){return it(nt(te,fe.length-se),fe,se,De)}function ee(fe,te,se,De){return it(function(de){for(var ve=[],rt=0;rt<de.length;++rt)ve.push(255&de.charCodeAt(rt));return ve}(te),fe,se,De)}function _e(fe,te,se,De){return ee(fe,te,se,De)}function be(fe,te,se,De){return it(Ge(te),fe,se,De)}function me(fe,te,se,De){return it(function(de,ve){for(var rt,xe,D=[],K=0;K<de.length&&!((ve-=2)<0);++K)xe=(rt=de.charCodeAt(K))>>8,D.push(rt%256),D.push(xe);return D}(te,fe.length-se),fe,se,De)}function v(fe,te,se){return x.fromByteArray(0===te&&se===fe.length?fe:fe.slice(te,se))}function T(fe,te,se){se=Math.min(fe.length,se);for(var De=[],Ve=te;Ve<se;){var de,ve,rt,xe,q=fe[Ve],D=null,K=q>239?4:q>223?3:q>191?2:1;if(Ve+K<=se)switch(K){case 1:q<128&&(D=q);break;case 2:128==(192&(de=fe[Ve+1]))&&(xe=(31&q)<<6|63&de)>127&&(D=xe);break;case 3:ve=fe[Ve+2],128==(192&(de=fe[Ve+1]))&&128==(192&ve)&&(xe=(15&q)<<12|(63&de)<<6|63&ve)>2047&&(xe<55296||xe>57343)&&(D=xe);break;case 4:ve=fe[Ve+2],rt=fe[Ve+3],128==(192&(de=fe[Ve+1]))&&128==(192&ve)&&128==(192&rt)&&(xe=(15&q)<<18|(63&de)<<12|(63&ve)<<6|63&rt)>65535&&xe<1114112&&(D=xe)}null===D?(D=65533,K=1):D>65535&&(De.push((D-=65536)>>>10&1023|55296),D=56320|1023&D),De.push(D),Ve+=K}return function(je){var tt=je.length;if(tt<=_)return String.fromCharCode.apply(String,je);for(var ot="",Ft=0;Ft<tt;)ot+=String.fromCharCode.apply(String,je.slice(Ft,Ft+=_));return ot}(De)}S.Buffer=y,S.SlowBuffer=function(te){return+te!=te&&(te=0),y.alloc(+te)},S.INSPECT_MAX_BYTES=50,y.TYPED_ARRAY_SUPPORT=void 0!==o.TYPED_ARRAY_SUPPORT?o.TYPED_ARRAY_SUPPORT:function(){try{var te=new Uint8Array(1);return te.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===te.foo()&&"function"==typeof te.subarray&&0===te.subarray(1,1).byteLength}catch{return!1}}(),S.kMaxLength=d(),y.poolSize=8192,y._augment=function(fe){return fe.__proto__=y.prototype,fe},y.from=function(fe,te,se){return R(null,fe,te,se)},y.TYPED_ARRAY_SUPPORT&&(y.prototype.__proto__=Uint8Array.prototype,y.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&y[Symbol.species]===y&&Object.defineProperty(y,Symbol.species,{value:null,configurable:!0})),y.alloc=function(fe,te,se){return null,ve=te,rt=se,M(de=fe),de<=0?m(null,de):void 0!==ve?"string"==typeof rt?m(null,de).fill(ve,rt):m(null,de).fill(ve):m(null,de);var de,ve,rt},y.allocUnsafe=function(fe){return z(null,fe)},y.allocUnsafeSlow=function(fe){return z(null,fe)},y.isBuffer=function(te){return!(null==te||!te._isBuffer)},y.compare=function(te,se){if(!y.isBuffer(te)||!y.isBuffer(se))throw new TypeError("Arguments must be Buffers");if(te===se)return 0;for(var De=te.length,Ve=se.length,de=0,ve=Math.min(De,Ve);de<ve;++de)if(te[de]!==se[de]){De=te[de],Ve=se[de];break}return De<Ve?-1:Ve<De?1:0},y.isEncoding=function(te){switch(String(te).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(te,se){if(!j(te))throw new TypeError('"list" argument must be an Array of Buffers');if(0===te.length)return y.alloc(0);var De;if(void 0===se)for(se=0,De=0;De<te.length;++De)se+=te[De].length;var Ve=y.allocUnsafe(se),de=0;for(De=0;De<te.length;++De){var ve=te[De];if(!y.isBuffer(ve))throw new TypeError('"list" argument must be an Array of Buffers');ve.copy(Ve,de),de+=ve.length}return Ve},y.byteLength=Q,y.prototype._isBuffer=!0,y.prototype.swap16=function(){var te=this.length;if(te%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var se=0;se<te;se+=2)J(this,se,se+1);return this},y.prototype.swap32=function(){var te=this.length;if(te%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var se=0;se<te;se+=4)J(this,se,se+3),J(this,se+1,se+2);return this},y.prototype.swap64=function(){var te=this.length;if(te%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var se=0;se<te;se+=8)J(this,se,se+7),J(this,se+1,se+6),J(this,se+2,se+5),J(this,se+3,se+4);return this},y.prototype.toString=function(){var te=0|this.length;return 0===te?"":0===arguments.length?T(this,0,te):W.apply(this,arguments)},y.prototype.equals=function(te){if(!y.isBuffer(te))throw new TypeError("Argument must be a Buffer");return this===te||0===y.compare(this,te)},y.prototype.inspect=function(){var te="",se=S.INSPECT_MAX_BYTES;return this.length>0&&(te=this.toString("hex",0,se).match(/.{2}/g).join(" "),this.length>se&&(te+=" ... ")),"<Buffer "+te+">"},y.prototype.compare=function(te,se,De,Ve,de){if(!y.isBuffer(te))throw new TypeError("Argument must be a Buffer");if(void 0===se&&(se=0),void 0===De&&(De=te?te.length:0),void 0===Ve&&(Ve=0),void 0===de&&(de=this.length),se<0||De>te.length||Ve<0||de>this.length)throw new RangeError("out of range index");if(Ve>=de&&se>=De)return 0;if(Ve>=de)return-1;if(se>=De)return 1;if(this===te)return 0;for(var ve=(de>>>=0)-(Ve>>>=0),rt=(De>>>=0)-(se>>>=0),xe=Math.min(ve,rt),q=this.slice(Ve,de),D=te.slice(se,De),K=0;K<xe;++K)if(q[K]!==D[K]){ve=q[K],rt=D[K];break}return ve<rt?-1:rt<ve?1:0},y.prototype.includes=function(te,se,De){return-1!==this.indexOf(te,se,De)},y.prototype.indexOf=function(te,se,De){return le(this,te,se,De,!0)},y.prototype.lastIndexOf=function(te,se,De){return le(this,te,se,De,!1)},y.prototype.write=function(te,se,De,Ve){if(void 0===se)Ve="utf8",De=this.length,se=0;else if(void 0===De&&"string"==typeof se)Ve=se,De=this.length,se=0;else{if(!isFinite(se))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");se|=0,isFinite(De)?(De|=0,void 0===Ve&&(Ve="utf8")):(Ve=De,De=void 0)}var de=this.length-se;if((void 0===De||De>de)&&(De=de),te.length>0&&(De<0||se<0)||se>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ve||(Ve="utf8");for(var ve=!1;;)switch(Ve){case"hex":return G(this,te,se,De);case"utf8":case"utf-8":return $(this,te,se,De);case"ascii":return ee(this,te,se,De);case"latin1":case"binary":return _e(this,te,se,De);case"base64":return be(this,te,se,De);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,te,se,De);default:if(ve)throw new TypeError("Unknown encoding: "+Ve);Ve=(""+Ve).toLowerCase(),ve=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function E(fe,te,se){var De="";se=Math.min(fe.length,se);for(var Ve=te;Ve<se;++Ve)De+=String.fromCharCode(127&fe[Ve]);return De}function N(fe,te,se){var De="";se=Math.min(fe.length,se);for(var Ve=te;Ve<se;++Ve)De+=String.fromCharCode(fe[Ve]);return De}function A(fe,te,se){var De=fe.length;(!te||te<0)&&(te=0),(!se||se<0||se>De)&&(se=De);for(var Ve="",de=te;de<se;++de)Ve+=mt(fe[de]);return Ve}function ne(fe,te,se){for(var De=fe.slice(te,se),Ve="",de=0;de<De.length;de+=2)Ve+=String.fromCharCode(De[de]+256*De[de+1]);return Ve}function pe(fe,te,se){if(fe%1!=0||fe<0)throw new RangeError("offset is not uint");if(fe+te>se)throw new RangeError("Trying to access beyond buffer length")}function Le(fe,te,se,De,Ve,de){if(!y.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>Ve||te<de)throw new RangeError('"value" argument is out of bounds');if(se+De>fe.length)throw new RangeError("Index out of range")}function oe(fe,te,se,De){te<0&&(te=65535+te+1);for(var Ve=0,de=Math.min(fe.length-se,2);Ve<de;++Ve)fe[se+Ve]=(te&255<<8*(De?Ve:1-Ve))>>>8*(De?Ve:1-Ve)}function $e(fe,te,se,De){te<0&&(te=4294967295+te+1);for(var Ve=0,de=Math.min(fe.length-se,4);Ve<de;++Ve)fe[se+Ve]=te>>>8*(De?Ve:3-Ve)&255}function ct(fe,te,se,De,Ve,de){if(se+De>fe.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("Index out of range")}function Ne(fe,te,se,De,Ve){return Ve||ct(fe,0,se,4),L.write(fe,te,se,De,23,4),se+4}function Je(fe,te,se,De,Ve){return Ve||ct(fe,0,se,8),L.write(fe,te,se,De,52,8),se+8}y.prototype.slice=function(te,se){var De,Ve=this.length;if((te=~~te)<0?(te+=Ve)<0&&(te=0):te>Ve&&(te=Ve),(se=void 0===se?Ve:~~se)<0?(se+=Ve)<0&&(se=0):se>Ve&&(se=Ve),se<te&&(se=te),y.TYPED_ARRAY_SUPPORT)(De=this.subarray(te,se)).__proto__=y.prototype;else{var de=se-te;De=new y(de,void 0);for(var ve=0;ve<de;++ve)De[ve]=this[ve+te]}return De},y.prototype.readUIntLE=function(te,se,De){te|=0,se|=0,De||pe(te,se,this.length);for(var Ve=this[te],de=1,ve=0;++ve<se&&(de*=256);)Ve+=this[te+ve]*de;return Ve},y.prototype.readUIntBE=function(te,se,De){te|=0,se|=0,De||pe(te,se,this.length);for(var Ve=this[te+--se],de=1;se>0&&(de*=256);)Ve+=this[te+--se]*de;return Ve},y.prototype.readUInt8=function(te,se){return se||pe(te,1,this.length),this[te]},y.prototype.readUInt16LE=function(te,se){return se||pe(te,2,this.length),this[te]|this[te+1]<<8},y.prototype.readUInt16BE=function(te,se){return se||pe(te,2,this.length),this[te]<<8|this[te+1]},y.prototype.readUInt32LE=function(te,se){return se||pe(te,4,this.length),(this[te]|this[te+1]<<8|this[te+2]<<16)+16777216*this[te+3]},y.prototype.readUInt32BE=function(te,se){return se||pe(te,4,this.length),16777216*this[te]+(this[te+1]<<16|this[te+2]<<8|this[te+3])},y.prototype.readIntLE=function(te,se,De){te|=0,se|=0,De||pe(te,se,this.length);for(var Ve=this[te],de=1,ve=0;++ve<se&&(de*=256);)Ve+=this[te+ve]*de;return Ve>=(de*=128)&&(Ve-=Math.pow(2,8*se)),Ve},y.prototype.readIntBE=function(te,se,De){te|=0,se|=0,De||pe(te,se,this.length);for(var Ve=se,de=1,ve=this[te+--Ve];Ve>0&&(de*=256);)ve+=this[te+--Ve]*de;return ve>=(de*=128)&&(ve-=Math.pow(2,8*se)),ve},y.prototype.readInt8=function(te,se){return se||pe(te,1,this.length),128&this[te]?-1*(255-this[te]+1):this[te]},y.prototype.readInt16LE=function(te,se){se||pe(te,2,this.length);var De=this[te]|this[te+1]<<8;return 32768&De?4294901760|De:De},y.prototype.readInt16BE=function(te,se){se||pe(te,2,this.length);var De=this[te+1]|this[te]<<8;return 32768&De?4294901760|De:De},y.prototype.readInt32LE=function(te,se){return se||pe(te,4,this.length),this[te]|this[te+1]<<8|this[te+2]<<16|this[te+3]<<24},y.prototype.readInt32BE=function(te,se){return se||pe(te,4,this.length),this[te]<<24|this[te+1]<<16|this[te+2]<<8|this[te+3]},y.prototype.readFloatLE=function(te,se){return se||pe(te,4,this.length),L.read(this,te,!0,23,4)},y.prototype.readFloatBE=function(te,se){return se||pe(te,4,this.length),L.read(this,te,!1,23,4)},y.prototype.readDoubleLE=function(te,se){return se||pe(te,8,this.length),L.read(this,te,!0,52,8)},y.prototype.readDoubleBE=function(te,se){return se||pe(te,8,this.length),L.read(this,te,!1,52,8)},y.prototype.writeUIntLE=function(te,se,De,Ve){te=+te,se|=0,De|=0,Ve||Le(this,te,se,De,Math.pow(2,8*De)-1,0);var de=1,ve=0;for(this[se]=255&te;++ve<De&&(de*=256);)this[se+ve]=te/de&255;return se+De},y.prototype.writeUIntBE=function(te,se,De,Ve){te=+te,se|=0,De|=0,Ve||Le(this,te,se,De,Math.pow(2,8*De)-1,0);var de=De-1,ve=1;for(this[se+de]=255&te;--de>=0&&(ve*=256);)this[se+de]=te/ve&255;return se+De},y.prototype.writeUInt8=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,1,255,0),y.TYPED_ARRAY_SUPPORT||(te=Math.floor(te)),this[se]=255&te,se+1},y.prototype.writeUInt16LE=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[se]=255&te,this[se+1]=te>>>8):oe(this,te,se,!0),se+2},y.prototype.writeUInt16BE=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,2,65535,0),y.TYPED_ARRAY_SUPPORT?(this[se]=te>>>8,this[se+1]=255&te):oe(this,te,se,!1),se+2},y.prototype.writeUInt32LE=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[se+3]=te>>>24,this[se+2]=te>>>16,this[se+1]=te>>>8,this[se]=255&te):$e(this,te,se,!0),se+4},y.prototype.writeUInt32BE=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,4,4294967295,0),y.TYPED_ARRAY_SUPPORT?(this[se]=te>>>24,this[se+1]=te>>>16,this[se+2]=te>>>8,this[se+3]=255&te):$e(this,te,se,!1),se+4},y.prototype.writeIntLE=function(te,se,De,Ve){if(te=+te,se|=0,!Ve){var de=Math.pow(2,8*De-1);Le(this,te,se,De,de-1,-de)}var ve=0,rt=1,xe=0;for(this[se]=255&te;++ve<De&&(rt*=256);)te<0&&0===xe&&0!==this[se+ve-1]&&(xe=1),this[se+ve]=(te/rt>>0)-xe&255;return se+De},y.prototype.writeIntBE=function(te,se,De,Ve){if(te=+te,se|=0,!Ve){var de=Math.pow(2,8*De-1);Le(this,te,se,De,de-1,-de)}var ve=De-1,rt=1,xe=0;for(this[se+ve]=255&te;--ve>=0&&(rt*=256);)te<0&&0===xe&&0!==this[se+ve+1]&&(xe=1),this[se+ve]=(te/rt>>0)-xe&255;return se+De},y.prototype.writeInt8=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,1,127,-128),y.TYPED_ARRAY_SUPPORT||(te=Math.floor(te)),te<0&&(te=255+te+1),this[se]=255&te,se+1},y.prototype.writeInt16LE=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[se]=255&te,this[se+1]=te>>>8):oe(this,te,se,!0),se+2},y.prototype.writeInt16BE=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,2,32767,-32768),y.TYPED_ARRAY_SUPPORT?(this[se]=te>>>8,this[se+1]=255&te):oe(this,te,se,!1),se+2},y.prototype.writeInt32LE=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,4,2147483647,-2147483648),y.TYPED_ARRAY_SUPPORT?(this[se]=255&te,this[se+1]=te>>>8,this[se+2]=te>>>16,this[se+3]=te>>>24):$e(this,te,se,!0),se+4},y.prototype.writeInt32BE=function(te,se,De){return te=+te,se|=0,De||Le(this,te,se,4,2147483647,-2147483648),te<0&&(te=4294967295+te+1),y.TYPED_ARRAY_SUPPORT?(this[se]=te>>>24,this[se+1]=te>>>16,this[se+2]=te>>>8,this[se+3]=255&te):$e(this,te,se,!1),se+4},y.prototype.writeFloatLE=function(te,se,De){return Ne(this,te,se,!0,De)},y.prototype.writeFloatBE=function(te,se,De){return Ne(this,te,se,!1,De)},y.prototype.writeDoubleLE=function(te,se,De){return Je(this,te,se,!0,De)},y.prototype.writeDoubleBE=function(te,se,De){return Je(this,te,se,!1,De)},y.prototype.copy=function(te,se,De,Ve){if(De||(De=0),Ve||0===Ve||(Ve=this.length),se>=te.length&&(se=te.length),se||(se=0),Ve>0&&Ve<De&&(Ve=De),Ve===De||0===te.length||0===this.length)return 0;if(se<0)throw new RangeError("targetStart out of bounds");if(De<0||De>=this.length)throw new RangeError("sourceStart out of bounds");if(Ve<0)throw new RangeError("sourceEnd out of bounds");Ve>this.length&&(Ve=this.length),te.length-se<Ve-De&&(Ve=te.length-se+De);var de,ve=Ve-De;if(this===te&&De<se&&se<Ve)for(de=ve-1;de>=0;--de)te[de+se]=this[de+De];else if(ve<1e3||!y.TYPED_ARRAY_SUPPORT)for(de=0;de<ve;++de)te[de+se]=this[de+De];else Uint8Array.prototype.set.call(te,this.subarray(De,De+ve),se);return ve},y.prototype.fill=function(te,se,De,Ve){if("string"==typeof te){if("string"==typeof se?(Ve=se,se=0,De=this.length):"string"==typeof De&&(Ve=De,De=this.length),1===te.length){var de=te.charCodeAt(0);de<256&&(te=de)}if(void 0!==Ve&&"string"!=typeof Ve)throw new TypeError("encoding must be a string");if("string"==typeof Ve&&!y.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve)}else"number"==typeof te&&(te&=255);if(se<0||this.length<se||this.length<De)throw new RangeError("Out of range index");if(De<=se)return this;var ve;if(se>>>=0,De=void 0===De?this.length:De>>>0,te||(te=0),"number"==typeof te)for(ve=se;ve<De;++ve)this[ve]=te;else{var rt=y.isBuffer(te)?te:nt(new y(te,Ve).toString()),xe=rt.length;for(ve=0;ve<De-se;++ve)this[ve+se]=rt[ve%xe]}return this};var Ze=/[^+\/0-9A-Za-z-_]/g;function mt(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function nt(fe,te){var se;te=te||1/0;for(var De=fe.length,Ve=null,de=[],ve=0;ve<De;++ve){if((se=fe.charCodeAt(ve))>55295&&se<57344){if(!Ve){if(se>56319){(te-=3)>-1&&de.push(239,191,189);continue}if(ve+1===De){(te-=3)>-1&&de.push(239,191,189);continue}Ve=se;continue}if(se<56320){(te-=3)>-1&&de.push(239,191,189),Ve=se;continue}se=65536+(Ve-55296<<10|se-56320)}else Ve&&(te-=3)>-1&&de.push(239,191,189);if(Ve=null,se<128){if((te-=1)<0)break;de.push(se)}else if(se<2048){if((te-=2)<0)break;de.push(se>>6|192,63&se|128)}else if(se<65536){if((te-=3)<0)break;de.push(se>>12|224,se>>6&63|128,63&se|128)}else{if(!(se<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;de.push(se>>18|240,se>>12&63|128,se>>6&63|128,63&se|128)}}return de}function Ge(fe){return x.toByteArray(function(se){if((se=(Ve=se,Ve.trim?Ve.trim():Ve.replace(/^\s+|\s+$/g,"")).replace(Ze,"")).length<2)return"";for(var Ve;se.length%4!=0;)se+="=";return se}(fe))}function it(fe,te,se,De){for(var Ve=0;Ve<De&&!(Ve+se>=te.length||Ve>=fe.length);++Ve)te[Ve+se]=fe[Ve];return Ve}}).call(this,k(29))},function(O,S){var k;k=function(){return this}();try{k=k||new Function("return this")()}catch{"object"==typeof window&&(k=window)}O.exports=k},function(O,S,k){"use strict";S.byteLength=function(z){var Y=y(z),Q=Y[1];return 3*(Y[0]+Q)/4-Q},S.toByteArray=function(z){var Y,X,be,Q=y(z),W=Q[0],J=Q[1],le=new L(3*(W+(be=J))/4-be),U=0,G=J>0?W-4:W;for(X=0;X<G;X+=4)Y=x[z.charCodeAt(X)]<<18|x[z.charCodeAt(X+1)]<<12|x[z.charCodeAt(X+2)]<<6|x[z.charCodeAt(X+3)],le[U++]=Y>>16&255,le[U++]=Y>>8&255,le[U++]=255&Y;return 2===J&&(Y=x[z.charCodeAt(X)]<<2|x[z.charCodeAt(X+1)]>>4,le[U++]=255&Y),1===J&&(Y=x[z.charCodeAt(X)]<<10|x[z.charCodeAt(X+1)]<<4|x[z.charCodeAt(X+2)]>>2,le[U++]=Y>>8&255,le[U++]=255&Y),le},S.fromByteArray=function(z){for(var Y,X=z.length,Q=X%3,W=[],J=16383,le=0,U=X-Q;le<U;le+=J)W.push(R(z,le,le+J>U?U:le+J));return 1===Q?W.push(o[(Y=z[X-1])>>2]+o[Y<<4&63]+"=="):2===Q&&W.push(o[(Y=(z[X-2]<<8)+z[X-1])>>10]+o[Y>>4&63]+o[Y<<2&63]+"="),W.join("")};for(var o=[],x=[],L="undefined"!=typeof Uint8Array?Uint8Array:Array,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,m=j.length;d<m;++d)o[d]=j[d],x[j.charCodeAt(d)]=d;function y(M){var z=M.length;if(z%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var Y=M.indexOf("=");return-1===Y&&(Y=z),[Y,Y===z?0:4-Y%4]}function R(M,z,Y){for(var Q,W=[],J=z;J<Y;J+=3)W.push(o[(Q=(M[J]<<16&16711680)+(M[J+1]<<8&65280)+(255&M[J+2]))>>18&63]+o[Q>>12&63]+o[Q>>6&63]+o[63&Q]);return W.join("")}x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63},function(O,S){S.read=function(k,o,x,L,j){var d,m,y=8*j-L-1,R=(1<<y)-1,M=R>>1,z=-7,Y=x?j-1:0,X=x?-1:1,Q=k[o+Y];for(Y+=X,d=Q&(1<<-z)-1,Q>>=-z,z+=y;z>0;d=256*d+k[o+Y],Y+=X,z-=8);for(m=d&(1<<-z)-1,d>>=-z,z+=L;z>0;m=256*m+k[o+Y],Y+=X,z-=8);if(0===d)d=1-M;else{if(d===R)return m?NaN:1/0*(Q?-1:1);m+=Math.pow(2,L),d-=M}return(Q?-1:1)*m*Math.pow(2,d-L)},S.write=function(k,o,x,L,j,d){var m,y,R,M=8*d-j-1,z=(1<<M)-1,Y=z>>1,X=23===j?Math.pow(2,-24)-Math.pow(2,-77):0,Q=L?0:d-1,W=L?1:-1,J=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(y=isNaN(o)?1:0,m=z):(m=Math.floor(Math.log(o)/Math.LN2),o*(R=Math.pow(2,-m))<1&&(m--,R*=2),(o+=m+Y>=1?X/R:X*Math.pow(2,1-Y))*R>=2&&(m++,R/=2),m+Y>=z?(y=0,m=z):m+Y>=1?(y=(o*R-1)*Math.pow(2,j),m+=Y):(y=o*Math.pow(2,Y-1)*Math.pow(2,j),m=0));j>=8;k[x+Q]=255&y,Q+=W,y/=256,j-=8);for(m=m<<j|y,M+=j;M>0;k[x+Q]=255&m,Q+=W,m/=256,M-=8);k[x+Q-W]|=128*J}},function(O,S){var k={}.toString;O.exports=Array.isArray||function(o){return"[object Array]"==k.call(o)}},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(L){var j=L.jws,d=L.KeyUtil,m=L.X509,y=L.crypto,R=L.hextob64u,M=L.b64tohex,z=L.AllowedSigningAlgs;return function(){function Y(){!function(Q,W){if(!(Q instanceof W))throw new TypeError("Cannot call a class as a function")}(this,Y)}return Y.parseJwt=function(Q){o.Log.debug("JoseUtil.parseJwt");try{var W=j.JWS.parse(Q);return{header:W.headerObj,payload:W.payloadObj}}catch(J){o.Log.error(J)}},Y.validateJwt=function(Q,W,J,le,U,G,$){o.Log.debug("JoseUtil.validateJwt");try{if("RSA"===W.kty)if(W.e&&W.n)W=d.getKey(W);else{if(!W.x5c||!W.x5c.length)return o.Log.error("JoseUtil.validateJwt: RSA key missing key material",W),Promise.reject(new Error("RSA key missing key material"));var ee=M(W.x5c[0]);W=m.getPublicKeyFromCertHex(ee)}else{if("EC"!==W.kty)return o.Log.error("JoseUtil.validateJwt: Unsupported key type",W&&W.kty),Promise.reject(new Error(W.kty));if(!(W.crv&&W.x&&W.y))return o.Log.error("JoseUtil.validateJwt: EC key missing key material",W),Promise.reject(new Error("EC key missing key material"));W=d.getKey(W)}return Y._validateJwt(Q,W,J,le,U,G,$)}catch(_e){return o.Log.error(_e&&_e.message||_e),Promise.reject("JWT validation failed")}},Y.validateJwtAttributes=function(Q,W,J,le,U,G){le||(le=0),U||(U=parseInt(Date.now()/1e3));var $=Y.parseJwt(Q).payload;if(!$.iss)return o.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if($.iss!==W)return o.Log.error("JoseUtil._validateJwt: Invalid issuer in token",$.iss),Promise.reject(new Error("Invalid issuer in token: "+$.iss));if(!$.aud)return o.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!($.aud===J||Array.isArray($.aud)&&$.aud.indexOf(J)>=0))return o.Log.error("JoseUtil._validateJwt: Invalid audience in token",$.aud),Promise.reject(new Error("Invalid audience in token: "+$.aud));if($.azp&&$.azp!==J)return o.Log.error("JoseUtil._validateJwt: Invalid azp in token",$.azp),Promise.reject(new Error("Invalid azp in token: "+$.azp));if(!G){var ee=U+le,_e=U-le;if(!$.iat)return o.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(ee<$.iat)return o.Log.error("JoseUtil._validateJwt: iat is in the future",$.iat),Promise.reject(new Error("iat is in the future: "+$.iat));if($.nbf&&ee<$.nbf)return o.Log.error("JoseUtil._validateJwt: nbf is in the future",$.nbf),Promise.reject(new Error("nbf is in the future: "+$.nbf));if(!$.exp)return o.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if($.exp<_e)return o.Log.error("JoseUtil._validateJwt: exp is in the past",$.exp),Promise.reject(new Error("exp is in the past:"+$.exp))}return Promise.resolve($)},Y._validateJwt=function(Q,W,J,le,U,G,$){return Y.validateJwtAttributes(Q,J,le,U,G,$).then(function(ee){try{return j.JWS.verify(Q,W,z)?ee:(o.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(_e){return o.Log.error(_e&&_e.message||_e),Promise.reject(new Error("signature validation failed"))}})},Y.hashString=function(Q,W){try{return y.Util.hashString(Q,W)}catch(J){o.Log.error(J)}},Y.hexToBase64Url=function(Q){try{return R(Q)}catch(W){o.Log.error(W)}},Y}()};var o=k(0);O.exports=S.default},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SigninResponse=void 0;var o=function(){function j(d,m){for(var y=0;y<m.length;y++){var R=m[y];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(d,R.key,R)}}return function(d,m,y){return m&&j(d.prototype,m),y&&j(d,y),d}}(),x=k(3);function L(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}S.SigninResponse=function(){function j(d){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";L(this,j);var y=x.UrlUtility.parseUrlFragment(d,m);this.error=y.error,this.error_description=y.error_description,this.error_uri=y.error_uri,this.code=y.code,this.state=y.state,this.id_token=y.id_token,this.session_state=y.session_state,this.access_token=y.access_token,this.token_type=y.token_type,this.scope=y.scope,this.profile=void 0,this.expires_in=y.expires_in}return o(j,[{key:"expires_in",get:function(){if(this.expires_at){var m=parseInt(Date.now()/1e3);return this.expires_at-m}},set:function(m){var y=parseInt(m);if("number"==typeof y&&y>0){var R=parseInt(Date.now()/1e3);this.expires_at=R+y}}},{key:"expired",get:function(){var m=this.expires_in;if(void 0!==m)return m<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),j}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SignoutRequest=void 0;var o=k(0),x=k(3),L=k(9);S.SignoutRequest=function j(d){var m=d.url,y=d.id_token_hint,R=d.post_logout_redirect_uri,M=d.data,z=d.extraQueryParams,Y=d.request_type;if(function(W,J){if(!(W instanceof J))throw new TypeError("Cannot call a class as a function")}(this,j),!m)throw o.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var X in y&&(m=x.UrlUtility.addQueryParam(m,"id_token_hint",y)),R&&(m=x.UrlUtility.addQueryParam(m,"post_logout_redirect_uri",R),M&&(this.state=new L.State({data:M,request_type:Y}),m=x.UrlUtility.addQueryParam(m,"state",this.state.id))),z)m=x.UrlUtility.addQueryParam(m,X,z[X]);this.url=m}},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SignoutResponse=void 0;var o=k(3);S.SignoutResponse=function x(L){!function(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}(this,x);var j=o.UrlUtility.parseUrlFragment(L,"?");this.error=j.error,this.error_description=j.error_description,this.error_uri=j.error_uri,this.state=j.state}},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.InMemoryWebStorage=void 0;var o=function(){function L(j,d){for(var m=0;m<d.length;m++){var y=d[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(j,y.key,y)}}return function(j,d,m){return d&&L(j.prototype,d),m&&L(j,m),j}}(),x=k(0);S.InMemoryWebStorage=function(){function L(){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,L),this._data={}}return L.prototype.getItem=function(d){return x.Log.debug("InMemoryWebStorage.getItem",d),this._data[d]},L.prototype.setItem=function(d,m){x.Log.debug("InMemoryWebStorage.setItem",d),this._data[d]=m},L.prototype.removeItem=function(d){x.Log.debug("InMemoryWebStorage.removeItem",d),delete this._data[d]},L.prototype.key=function(d){return Object.getOwnPropertyNames(this._data)[d]},o(L,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),L}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UserManager=void 0;var o=function(){function J(le,U){for(var G=0;G<U.length;G++){var $=U[G];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(le,$.key,$)}}return function(le,U,G){return U&&J(le.prototype,U),G&&J(le,G),le}}(),x=k(0),L=k(10),j=k(39),d=k(15),m=k(45),y=k(47),R=k(18),M=k(8),z=k(20),Y=k(11),X=k(4);function Q(J,le){if(!(J instanceof le))throw new TypeError("Cannot call a class as a function")}function W(J,le){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!le||"object"!=typeof le&&"function"!=typeof le?J:le}S.UserManager=function(J){function le(){var U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.SilentRenewService,$=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.SessionMonitor,ee=arguments.length>3&&void 0!==arguments[3]?arguments[3]:z.TokenRevocationClient,_e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Y.TokenClient,be=arguments.length>5&&void 0!==arguments[5]?arguments[5]:X.JoseUtil;Q(this,le),U instanceof j.UserManagerSettings||(U=new j.UserManagerSettings(U));var me=W(this,J.call(this,U));return me._events=new m.UserManagerEvents(U),me._silentRenewService=new G(me),me.settings.automaticSilentRenew&&(x.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),me.startSilentRenew()),me.settings.monitorSession&&(x.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),me._sessionMonitor=new $(me)),me._tokenRevocationClient=new ee(me._settings),me._tokenClient=new _e(me._settings),me._joseUtil=be,me}return function(G,$){if("function"!=typeof $&&null!==$)throw new TypeError("Super expression must either be null or a function, not "+typeof $);G.prototype=Object.create($&&$.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(G,$):G.__proto__=$)}(le,J),le.prototype.getUser=function(){var G=this;return this._loadUser().then(function($){return $?(x.Log.info("UserManager.getUser: user loaded"),G._events.load($,!1),$):(x.Log.info("UserManager.getUser: user not found in storage"),null)})},le.prototype.removeUser=function(){var G=this;return this.storeUser(null).then(function(){x.Log.info("UserManager.removeUser: user removed from storage"),G._events.unload()})},le.prototype.signinRedirect=function(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(G=Object.assign({},G)).request_type="si:r",this._signinStart(G,this._redirectNavigator,{useReplaceToNavigate:G.useReplaceToNavigate}).then(function(){x.Log.info("UserManager.signinRedirect: successful")})},le.prototype.signinRedirectCallback=function(G){return this._signinEnd(G||this._redirectNavigator.url).then(function($){return $.profile&&$.profile.sub?x.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",$.profile.sub):x.Log.info("UserManager.signinRedirectCallback: no sub"),$})},le.prototype.signinPopup=function(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(G=Object.assign({},G)).request_type="si:p";var $=G.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return $?(G.redirect_uri=$,G.display="popup",this._signin(G,this._popupNavigator,{startUrl:$,popupWindowFeatures:G.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:G.popupWindowTarget||this.settings.popupWindowTarget}).then(function(ee){return ee&&(ee.profile&&ee.profile.sub?x.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",ee.profile.sub):x.Log.info("UserManager.signinPopup: no sub")),ee})):(x.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},le.prototype.signinPopupCallback=function(G){return this._signinCallback(G,this._popupNavigator).then(function($){return $&&($.profile&&$.profile.sub?x.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",$.profile.sub):x.Log.info("UserManager.signinPopupCallback: no sub")),$}).catch(function($){x.Log.error($.message)})},le.prototype.signinSilent=function(){var G=this,$=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $=Object.assign({},$),this._loadUser().then(function(ee){return ee&&ee.refresh_token?($.refresh_token=ee.refresh_token,G._useRefreshToken($)):($.request_type="si:s",$.id_token_hint=$.id_token_hint||G.settings.includeIdTokenInSilentRenew&&ee&&ee.id_token,ee&&G._settings.validateSubOnSilentRenew&&(x.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",ee.profile.sub),$.current_sub=ee.profile.sub),G._signinSilentIframe($))})},le.prototype._useRefreshToken=function(){var G=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(ee){return ee?ee.access_token?G._loadUser().then(function(_e){if(_e){var be=Promise.resolve();return ee.id_token&&(be=G._validateIdTokenFromTokenRefreshToken(_e.profile,ee.id_token)),be.then(function(){return x.Log.debug("UserManager._useRefreshToken: refresh token response success"),_e.id_token=ee.id_token||_e.id_token,_e.access_token=ee.access_token,_e.refresh_token=ee.refresh_token||_e.refresh_token,_e.expires_in=ee.expires_in,G.storeUser(_e).then(function(){return G._events.load(_e),_e})})}return null}):(x.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(x.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},le.prototype._validateIdTokenFromTokenRefreshToken=function(G,$){var ee=this;return this._metadataService.getIssuer().then(function(_e){return ee.settings.getEpochTime().then(function(be){return ee._joseUtil.validateJwtAttributes($,_e,ee._settings.client_id,ee._settings.clockSkew,be).then(function(me){return me?me.sub!==G.sub?(x.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):me.auth_time&&me.auth_time!==G.auth_time?(x.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):me.azp&&me.azp!==G.azp?(x.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!me.azp&&G.azp?(x.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(x.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},le.prototype._signinSilentIframe=function(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},$=G.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return $?(G.redirect_uri=$,G.prompt=G.prompt||"none",this._signin(G,this._iframeNavigator,{startUrl:$,silentRequestTimeout:G.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ee){return ee&&(ee.profile&&ee.profile.sub?x.Log.info("UserManager.signinSilent: successful, signed in sub: ",ee.profile.sub):x.Log.info("UserManager.signinSilent: no sub")),ee})):(x.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},le.prototype.signinSilentCallback=function(G){return this._signinCallback(G,this._iframeNavigator).then(function($){return $&&($.profile&&$.profile.sub?x.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",$.profile.sub):x.Log.info("UserManager.signinSilentCallback: no sub")),$})},le.prototype.signinCallback=function(G){var $=this;return this.readSigninResponseState(G).then(function(ee){var _e=ee.state;return"si:r"===_e.request_type?$.signinRedirectCallback(G):"si:p"===_e.request_type?$.signinPopupCallback(G):"si:s"===_e.request_type?$.signinSilentCallback(G):Promise.reject(new Error("invalid response_type in state"))})},le.prototype.signoutCallback=function(G,$){var ee=this;return this.readSignoutResponseState(G).then(function(_e){var be=_e.state,me=_e.response;return be?"so:r"===be.request_type?ee.signoutRedirectCallback(G):"so:p"===be.request_type?ee.signoutPopupCallback(G,$):Promise.reject(new Error("invalid response_type in state")):me})},le.prototype.querySessionStatus=function(){var G=this,$=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};($=Object.assign({},$)).request_type="si:s";var ee=$.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ee?($.redirect_uri=ee,$.prompt="none",$.response_type=$.response_type||this.settings.query_status_response_type,$.scope=$.scope||"openid",$.skipUserInfo=!0,this._signinStart($,this._iframeNavigator,{startUrl:ee,silentRequestTimeout:$.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(_e){return G.processSigninResponse(_e.url).then(function(be){if(x.Log.debug("UserManager.querySessionStatus: got signin response"),be.session_state&&be.profile.sub)return x.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",be.profile.sub),{session_state:be.session_state,sub:be.profile.sub,sid:be.profile.sid};x.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(be){if(be.session_state&&G.settings.monitorAnonymousSession&&("login_required"==be.message||"consent_required"==be.message||"interaction_required"==be.message||"account_selection_required"==be.message))return x.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:be.session_state};throw be})})):(x.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},le.prototype._signin=function(G,$){var ee=this;return this._signinStart(G,$,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(be){return ee._signinEnd(be.url,G)})},le.prototype._signinStart=function(G,$){var ee=this,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $.prepare(_e).then(function(be){return x.Log.debug("UserManager._signinStart: got navigator window handle"),ee.createSigninRequest(G).then(function(me){return x.Log.debug("UserManager._signinStart: got signin request"),_e.url=me.url,_e.id=me.state.id,be.navigate(_e)}).catch(function(me){throw be.close&&(x.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),be.close()),me})})},le.prototype._signinEnd=function(G){var $=this,ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(G).then(function(_e){x.Log.debug("UserManager._signinEnd: got signin response");var be=new d.User(_e);if(ee.current_sub){if(ee.current_sub!==be.profile.sub)return x.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",be.profile.sub),Promise.reject(new Error("login_required"));x.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return $.storeUser(be).then(function(){return x.Log.debug("UserManager._signinEnd: user stored"),$._events.load(be),be})})},le.prototype._signinCallback=function(G,$){x.Log.debug("UserManager._signinCallback");var ee="query"===this._settings.response_mode||!this._settings.response_mode&&M.SigninRequest.isCode(this._settings.response_type)?"?":"#";return $.callback(G,void 0,ee)},le.prototype.signoutRedirect=function(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(G=Object.assign({},G)).request_type="so:r";var $=G.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return $&&(G.post_logout_redirect_uri=$),this._signoutStart(G,this._redirectNavigator,{useReplaceToNavigate:G.useReplaceToNavigate}).then(function(){x.Log.info("UserManager.signoutRedirect: successful")})},le.prototype.signoutRedirectCallback=function(G){return this._signoutEnd(G||this._redirectNavigator.url).then(function($){return x.Log.info("UserManager.signoutRedirectCallback: successful"),$})},le.prototype.signoutPopup=function(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(G=Object.assign({},G)).request_type="so:p";var $=G.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return G.post_logout_redirect_uri=$,G.display="popup",G.post_logout_redirect_uri&&(G.state=G.state||{}),this._signout(G,this._popupNavigator,{startUrl:$,popupWindowFeatures:G.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:G.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){x.Log.info("UserManager.signoutPopup: successful")})},le.prototype.signoutPopupCallback=function(G,$){return void 0===$&&"boolean"==typeof G&&($=G,G=null),this._popupNavigator.callback(G,$,"?").then(function(){x.Log.info("UserManager.signoutPopupCallback: successful")})},le.prototype._signout=function(G,$){var ee=this;return this._signoutStart(G,$,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(be){return ee._signoutEnd(be.url)})},le.prototype._signoutStart=function(){var G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},$=this,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(_e).then(function(be){return x.Log.debug("UserManager._signoutStart: got navigator window handle"),$._loadUser().then(function(me){return x.Log.debug("UserManager._signoutStart: loaded current user from storage"),($._settings.revokeAccessTokenOnSignout?$._revokeInternal(me):Promise.resolve()).then(function(){var v=G.id_token_hint||me&&me.id_token;return v&&(x.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),G.id_token_hint=v),$.removeUser().then(function(){return x.Log.debug("UserManager._signoutStart: user removed, creating signout request"),$.createSignoutRequest(G).then(function(T){return x.Log.debug("UserManager._signoutStart: got signout request"),_e.url=T.url,T.state&&(_e.id=T.state.id),be.navigate(_e)})})})}).catch(function(me){throw be.close&&(x.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),be.close()),me})})},le.prototype._signoutEnd=function(G){return this.processSignoutResponse(G).then(function($){return x.Log.debug("UserManager._signoutEnd: got signout response"),$})},le.prototype.revokeAccessToken=function(){var G=this;return this._loadUser().then(function($){return G._revokeInternal($,!0).then(function(ee){if(ee)return x.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),$.access_token=null,$.refresh_token=null,$.expires_at=null,$.token_type=null,G.storeUser($).then(function(){x.Log.debug("UserManager.revokeAccessToken: user stored"),G._events.load($)})})}).then(function(){x.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},le.prototype._revokeInternal=function(G,$){var ee=this;if(G){var be=G.refresh_token;return this._revokeAccessTokenInternal(G.access_token,$).then(function(me){return ee._revokeRefreshTokenInternal(be,$).then(function(v){return me||v||x.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),me||v})})}return Promise.resolve(!1)},le.prototype._revokeAccessTokenInternal=function(G,$){return!G||G.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(G,$).then(function(){return!0})},le.prototype._revokeRefreshTokenInternal=function(G,$){return G?this._tokenRevocationClient.revoke(G,$,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},le.prototype.startSilentRenew=function(){this._silentRenewService.start()},le.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},le.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(G){return G?(x.Log.debug("UserManager._loadUser: user storageString loaded"),d.User.fromStorageString(G)):(x.Log.debug("UserManager._loadUser: no user storageString"),null)})},le.prototype.storeUser=function(G){if(G){x.Log.debug("UserManager.storeUser: storing user");var $=G.toStorageString();return this._userStore.set(this._userStoreKey,$)}return x.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},o(le,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),le}(L.OidcClient)},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UserManagerSettings=void 0;var o=function(){function Y(X,Q){for(var W=0;W<Q.length;W++){var J=Q[W];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(X,J.key,J)}}return function(X,Q,W){return Q&&Y(X.prototype,Q),W&&Y(X,W),X}}(),x=(k(0),k(5)),L=k(40),j=k(41),d=k(43),m=k(6),y=k(1),R=k(8);function M(Y,X){if(!(Y instanceof X))throw new TypeError("Cannot call a class as a function")}function z(Y,X){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!X||"object"!=typeof X&&"function"!=typeof X?Y:X}S.UserManagerSettings=function(Y){function X(){var Q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},W=Q.popup_redirect_uri,J=Q.popup_post_logout_redirect_uri,le=Q.popupWindowFeatures,U=Q.popupWindowTarget,G=Q.silent_redirect_uri,$=Q.silentRequestTimeout,ee=Q.automaticSilentRenew,_e=void 0!==ee&&ee,be=Q.validateSubOnSilentRenew,me=void 0!==be&&be,v=Q.includeIdTokenInSilentRenew,T=void 0===v||v,_=Q.monitorSession,E=void 0===_||_,N=Q.monitorAnonymousSession,A=void 0!==N&&N,ne=Q.checkSessionInterval,pe=void 0===ne?2e3:ne,Le=Q.stopCheckSessionOnError,oe=void 0===Le||Le,$e=Q.query_status_response_type,ct=Q.revokeAccessTokenOnSignout,Ne=void 0!==ct&&ct,Je=Q.accessTokenExpiringNotificationTime,Ze=void 0===Je?60:Je,mt=Q.redirectNavigator,nt=void 0===mt?new L.RedirectNavigator:mt,Ge=Q.popupNavigator,it=void 0===Ge?new j.PopupNavigator:Ge,fe=Q.iframeNavigator,te=void 0===fe?new d.IFrameNavigator:fe,se=Q.userStore,De=void 0===se?new m.WebStorageStateStore({store:y.Global.sessionStorage}):se;M(this,X);var Ve=z(this,Y.call(this,arguments[0]));return Ve._popup_redirect_uri=W,Ve._popup_post_logout_redirect_uri=J,Ve._popupWindowFeatures=le,Ve._popupWindowTarget=U,Ve._silent_redirect_uri=G,Ve._silentRequestTimeout=$,Ve._automaticSilentRenew=_e,Ve._validateSubOnSilentRenew=me,Ve._includeIdTokenInSilentRenew=T,Ve._accessTokenExpiringNotificationTime=Ze,Ve._monitorSession=E,Ve._monitorAnonymousSession=A,Ve._checkSessionInterval=pe,Ve._stopCheckSessionOnError=oe,Ve._query_status_response_type=$e||(arguments[0]&&arguments[0].response_type?R.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),Ve._revokeAccessTokenOnSignout=Ne,Ve._redirectNavigator=nt,Ve._popupNavigator=it,Ve._iframeNavigator=te,Ve._userStore=De,Ve}return function(W,J){if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function, not "+typeof J);W.prototype=Object.create(J&&J.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(W,J):W.__proto__=J)}(X,Y),o(X,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),X}(x.OidcClientSettings)},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.RedirectNavigator=void 0;var o=function(){function L(j,d){for(var m=0;m<d.length;m++){var y=d[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(j,y.key,y)}}return function(j,d,m){return d&&L(j.prototype,d),m&&L(j,m),j}}(),x=k(0);S.RedirectNavigator=function(){function L(){!function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,L)}return L.prototype.prepare=function(){return Promise.resolve(this)},L.prototype.navigate=function(d){return d&&d.url?(d.useReplaceToNavigate?window.location.replace(d.url):window.location=d.url,Promise.resolve()):(x.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},o(L,[{key:"url",get:function(){return window.location.href}}]),L}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.PopupNavigator=void 0;var o=k(0),x=k(42);S.PopupNavigator=function(){function L(){!function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,L)}return L.prototype.prepare=function(d){var m=new x.PopupWindow(d);return Promise.resolve(m)},L.prototype.callback=function(d,m,y){o.Log.debug("PopupNavigator.callback");try{return x.PopupWindow.notifyOpener(d,m,y),Promise.resolve()}catch(R){return Promise.reject(R)}},L}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.PopupWindow=void 0;var o=function(){function j(d,m){for(var y=0;y<m.length;y++){var R=m[y];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(d,R.key,R)}}return function(d,m,y){return m&&j(d.prototype,m),y&&j(d,y),d}}(),x=k(0),L=k(3);S.PopupWindow=function(){function j(d){var m=this;(function(z,Y){if(!(z instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,j),this._promise=new Promise(function(M,z){m._resolve=M,m._reject=z}),this._popup=window.open("",d.popupWindowTarget||"_blank",d.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(x.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return j.prototype.navigate=function(m){return this._popup?m&&m.url?(x.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=m.id,this._id&&(window["popupCallback_"+m.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=m.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},j.prototype._success=function(m){x.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(m)},j.prototype._error=function(m){x.Log.error("PopupWindow.error: ",m),this._cleanup(),this._reject(new Error(m))},j.prototype.close=function(){this._cleanup(!1)},j.prototype._cleanup=function(m){x.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!m&&this._popup.close(),this._popup=null},j.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},j.prototype._callback=function(m,y){this._cleanup(y),m?(x.Log.debug("PopupWindow.callback success"),this._success({url:m})):(x.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},j.notifyOpener=function(m,y,R){if(window.opener){if(m=m||window.location.href){var M=L.UrlUtility.parseUrlFragment(m,R);if(M.state){var Y=window.opener["popupCallback_"+M.state];Y?(x.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),Y(m,y)):x.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else x.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else x.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},o(j,[{key:"promise",get:function(){return this._promise}}]),j}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.IFrameNavigator=void 0;var o=k(0),x=k(44);S.IFrameNavigator=function(){function L(){!function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,L)}return L.prototype.prepare=function(d){var m=new x.IFrameWindow(d);return Promise.resolve(m)},L.prototype.callback=function(d){o.Log.debug("IFrameNavigator.callback");try{return x.IFrameWindow.notifyParent(d),Promise.resolve()}catch(m){return Promise.reject(m)}},L}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.IFrameWindow=void 0;var o=function(){function L(j,d){for(var m=0;m<d.length;m++){var y=d[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(j,y.key,y)}}return function(j,d,m){return d&&L(j.prototype,d),m&&L(j,m),j}}(),x=k(0);S.IFrameWindow=function(){function L(j){var d=this;(function(y,R){if(!(y instanceof R))throw new TypeError("Cannot call a class as a function")})(this,L),this._promise=new Promise(function(m,y){d._resolve=m,d._reject=y}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return L.prototype.navigate=function(d){if(d&&d.url){var m=d.silentRequestTimeout||1e4;x.Log.debug("IFrameWindow.navigate: Using timeout of:",m),this._timer=window.setTimeout(this._timeout.bind(this),m),this._frame.src=d.url}else this._error("No url provided");return this.promise},L.prototype._success=function(d){this._cleanup(),x.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(d)},L.prototype._error=function(d){this._cleanup(),x.Log.error(d),this._reject(new Error(d))},L.prototype.close=function(){this._cleanup()},L.prototype._cleanup=function(){this._frame&&(x.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},L.prototype._timeout=function(){x.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},L.prototype._message=function(d){if(x.Log.debug("IFrameWindow.message"),this._timer&&d.origin===this._origin&&d.source===this._frame.contentWindow&&"string"==typeof d.data&&(d.data.startsWith("http://")||d.data.startsWith("https://"))){var m=d.data;m?this._success({url:m}):this._error("Invalid response from frame")}},L.notifyParent=function(d){x.Log.debug("IFrameWindow.notifyParent"),(d=d||window.location.href)&&(x.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(d,location.protocol+"//"+location.host))},o(L,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),L}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UserManagerEvents=void 0;var o=k(0),x=k(16),L=k(17);S.UserManagerEvents=function(j){function d(m){!function(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")}(this,d);var y=function(M,z){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!z||"object"!=typeof z&&"function"!=typeof z?M:z}(this,j.call(this,m));return y._userLoaded=new L.Event("User loaded"),y._userUnloaded=new L.Event("User unloaded"),y._silentRenewError=new L.Event("Silent renew error"),y._userSignedIn=new L.Event("User signed in"),y._userSignedOut=new L.Event("User signed out"),y._userSessionChanged=new L.Event("User session changed"),y}return function(y,R){if("function"!=typeof R&&null!==R)throw new TypeError("Super expression must either be null or a function, not "+typeof R);y.prototype=Object.create(R&&R.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(y,R):y.__proto__=R)}(d,j),d.prototype.load=function(y){var R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.Log.debug("UserManagerEvents.load"),j.prototype.load.call(this,y),R&&this._userLoaded.raise(y)},d.prototype.unload=function(){o.Log.debug("UserManagerEvents.unload"),j.prototype.unload.call(this),this._userUnloaded.raise()},d.prototype.addUserLoaded=function(y){this._userLoaded.addHandler(y)},d.prototype.removeUserLoaded=function(y){this._userLoaded.removeHandler(y)},d.prototype.addUserUnloaded=function(y){this._userUnloaded.addHandler(y)},d.prototype.removeUserUnloaded=function(y){this._userUnloaded.removeHandler(y)},d.prototype.addSilentRenewError=function(y){this._silentRenewError.addHandler(y)},d.prototype.removeSilentRenewError=function(y){this._silentRenewError.removeHandler(y)},d.prototype._raiseSilentRenewError=function(y){o.Log.debug("UserManagerEvents._raiseSilentRenewError",y.message),this._silentRenewError.raise(y)},d.prototype.addUserSignedIn=function(y){this._userSignedIn.addHandler(y)},d.prototype.removeUserSignedIn=function(y){this._userSignedIn.removeHandler(y)},d.prototype._raiseUserSignedIn=function(){o.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},d.prototype.addUserSignedOut=function(y){this._userSignedOut.addHandler(y)},d.prototype.removeUserSignedOut=function(y){this._userSignedOut.removeHandler(y)},d.prototype._raiseUserSignedOut=function(){o.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},d.prototype.addUserSessionChanged=function(y){this._userSessionChanged.addHandler(y)},d.prototype.removeUserSessionChanged=function(y){this._userSessionChanged.removeHandler(y)},d.prototype._raiseUserSessionChanged=function(){o.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},d}(x.AccessTokenEvents)},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Timer=void 0;var o=function(){function y(R,M){for(var z=0;z<M.length;z++){var Y=M[z];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(R,Y.key,Y)}}return function(R,M,z){return M&&y(R.prototype,M),z&&y(R,z),R}}(),x=k(0),L=k(1),j=k(17);function d(y,R){if(!(y instanceof R))throw new TypeError("Cannot call a class as a function")}function m(y,R){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!R||"object"!=typeof R&&"function"!=typeof R?y:R}S.Timer=function(y){function R(M){var z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.Global.timer,Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;d(this,R);var X=m(this,y.call(this,M));return X._timer=z,X._nowFunc=Y||function(){return Date.now()/1e3},X}return function(z,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(z,Y):z.__proto__=Y)}(R,y),R.prototype.init=function(z){z<=0&&(z=1),z=parseInt(z);var Y=this.now+z;if(this.expiration===Y&&this._timerHandle)x.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),x.Log.debug("Timer.init timer "+this._name+" for duration:",z),this._expiration=Y;var X=5;z<X&&(X=z),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*X)}},R.prototype.cancel=function(){this._timerHandle&&(x.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},R.prototype._callback=function(){x.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),y.prototype.raise.call(this))},o(R,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),R}(j.Event)},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.SilentRenewService=void 0;var o=k(0);S.SilentRenewService=function(){function x(L){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,x),this._userManager=L}return x.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(j){}).catch(function(j){o.Log.error("SilentRenewService.start: Error from getUser:",j.message)}))},x.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},x.prototype._tokenExpiring=function(){var j=this;this._userManager.signinSilent().then(function(d){o.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(d){o.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",d.message),j._userManager.events._raiseSilentRenewError(d)})},x}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CordovaPopupNavigator=void 0;var o=k(21);S.CordovaPopupNavigator=function(){function x(){!function(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}(this,x)}return x.prototype.prepare=function(j){var d=new o.CordovaPopupWindow(j);return Promise.resolve(d)},x}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CordovaIFrameNavigator=void 0;var o=k(21);S.CordovaIFrameNavigator=function(){function x(){!function(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}(this,x)}return x.prototype.prepare=function(j){j.popupWindowFeatures="hidden=yes";var d=new o.CordovaPopupWindow(j);return Promise.resolve(d)},x}()},function(O,S,k){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Version="1.11.5"}])},7434:Ce=>{var O=String.prototype.replace,S=/%20/g;Ce.exports={default:"RFC3986",formatters:{RFC1738:function(o){return O.call(o,S,"+")},RFC3986:function(o){return String(o)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},3670:(Ce,O,S)=>{var k=S(1799),o=S(364),x=S(7434);Ce.exports={formats:x,parse:o,stringify:k}},364:(Ce,O,S)=>{var k=S(8477),o=Object.prototype.hasOwnProperty,x=Array.isArray,L={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:k.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},d=function(X,Q){return X&&"string"==typeof X&&Q.comma&&X.indexOf(",")>-1?X.split(","):X},z=function(Q,W,J,le){if(Q){var U=J.allowDots?Q.replace(/\.([^.[]+)/g,"[$1]"):Q,$=/(\[[^[\]]*])/g,ee=J.depth>0&&/(\[[^[\]]*])/.exec(U),_e=ee?U.slice(0,ee.index):U,be=[];if(_e){if(!J.plainObjects&&o.call(Object.prototype,_e)&&!J.allowPrototypes)return;be.push(_e)}for(var me=0;J.depth>0&&null!==(ee=$.exec(U))&&me<J.depth;){if(me+=1,!J.plainObjects&&o.call(Object.prototype,ee[1].slice(1,-1))&&!J.allowPrototypes)return;be.push(ee[1])}return ee&&be.push("["+U.slice(ee.index)+"]"),function(X,Q,W,J){for(var le=J?Q:d(Q,W),U=X.length-1;U>=0;--U){var G,$=X[U];if("[]"===$&&W.parseArrays)G=[].concat(le);else{G=W.plainObjects?Object.create(null):{};var ee="["===$.charAt(0)&&"]"===$.charAt($.length-1)?$.slice(1,-1):$,_e=parseInt(ee,10);W.parseArrays||""!==ee?!isNaN(_e)&&$!==ee&&String(_e)===ee&&_e>=0&&W.parseArrays&&_e<=W.arrayLimit?(G=[])[_e]=le:"__proto__"!==ee&&(G[ee]=le):G={0:le}}le=G}return le}(be,W,J,le)}};Ce.exports=function(X,Q){var W=function(Q){if(!Q)return L;if(null!=Q.decoder&&"function"!=typeof Q.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==Q.charset&&"utf-8"!==Q.charset&&"iso-8859-1"!==Q.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===Q.allowDots?L.allowDots:!!Q.allowDots,allowPrototypes:"boolean"==typeof Q.allowPrototypes?Q.allowPrototypes:L.allowPrototypes,allowSparse:"boolean"==typeof Q.allowSparse?Q.allowSparse:L.allowSparse,arrayLimit:"number"==typeof Q.arrayLimit?Q.arrayLimit:L.arrayLimit,charset:void 0===Q.charset?L.charset:Q.charset,charsetSentinel:"boolean"==typeof Q.charsetSentinel?Q.charsetSentinel:L.charsetSentinel,comma:"boolean"==typeof Q.comma?Q.comma:L.comma,decoder:"function"==typeof Q.decoder?Q.decoder:L.decoder,delimiter:"string"==typeof Q.delimiter||k.isRegExp(Q.delimiter)?Q.delimiter:L.delimiter,depth:"number"==typeof Q.depth||!1===Q.depth?+Q.depth:L.depth,ignoreQueryPrefix:!0===Q.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof Q.interpretNumericEntities?Q.interpretNumericEntities:L.interpretNumericEntities,parameterLimit:"number"==typeof Q.parameterLimit?Q.parameterLimit:L.parameterLimit,parseArrays:!1!==Q.parseArrays,plainObjects:"boolean"==typeof Q.plainObjects?Q.plainObjects:L.plainObjects,strictNullHandling:"boolean"==typeof Q.strictNullHandling?Q.strictNullHandling:L.strictNullHandling}}(Q);if(""===X||null==X)return W.plainObjects?Object.create(null):{};for(var J="string"==typeof X?function(Q,W){var ee,J={},G=(W.ignoreQueryPrefix?Q.replace(/^\?/,""):Q).split(W.delimiter,W.parameterLimit===1/0?void 0:W.parameterLimit),$=-1,_e=W.charset;if(W.charsetSentinel)for(ee=0;ee<G.length;++ee)0===G[ee].indexOf("utf8=")&&("utf8=%E2%9C%93"===G[ee]?_e="utf-8":"utf8=%26%2310003%3B"===G[ee]&&(_e="iso-8859-1"),$=ee,ee=G.length);for(ee=0;ee<G.length;++ee)if(ee!==$){var T,_,be=G[ee],me=be.indexOf("]="),v=-1===me?be.indexOf("="):me+1;-1===v?(T=W.decoder(be,L.decoder,_e,"key"),_=W.strictNullHandling?null:""):(T=W.decoder(be.slice(0,v),L.decoder,_e,"key"),_=k.maybeMap(d(be.slice(v+1),W),function(E){return W.decoder(E,L.decoder,_e,"value")})),_&&W.interpretNumericEntities&&"iso-8859-1"===_e&&(_=_.replace(/&#(\d+);/g,function(Q,W){return String.fromCharCode(parseInt(W,10))})),be.indexOf("[]=")>-1&&(_=x(_)?[_]:_),J[T]=o.call(J,T)?k.combine(J[T],_):_}return J}(X,W):X,le=W.plainObjects?Object.create(null):{},U=Object.keys(J),G=0;G<U.length;++G){var $=U[G],ee=z($,J[$],W,"string"==typeof X);le=k.merge(le,ee,W)}return!0===W.allowSparse?le:k.compact(le)}},1799:(Ce,O,S)=>{var k=S(8432),o=S(8477),x=S(7434),L=Object.prototype.hasOwnProperty,j={brackets:function(U){return U+"[]"},comma:"comma",indices:function(U,G){return U+"["+G+"]"},repeat:function(U){return U}},d=Array.isArray,m=String.prototype.split,y=Array.prototype.push,R=function(le,U){y.apply(le,d(U)?U:[U])},M=Date.prototype.toISOString,z=x.default,Y={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:z,formatter:x.formatters[z],indices:!1,serializeDate:function(U){return M.call(U)},skipNulls:!1,strictNullHandling:!1},Q={},W=function le(U,G,$,ee,_e,be,me,v,T,_,E,N,A,ne,pe){for(var Le=U,oe=pe,$e=0,ct=!1;void 0!==(oe=oe.get(Q))&&!ct;){var Ne=oe.get(U);if($e+=1,void 0!==Ne){if(Ne===$e)throw new RangeError("Cyclic object value");ct=!0}void 0===oe.get(Q)&&($e=0)}if("function"==typeof me?Le=me(G,Le):Le instanceof Date?Le=_(Le):"comma"===$&&d(Le)&&(Le=o.maybeMap(Le,function(ve){return ve instanceof Date?_(ve):ve})),null===Le){if(ee)return be&&!A?be(G,Y.encoder,ne,"key",E):G;Le=""}if(function(U){return"string"==typeof U||"number"==typeof U||"boolean"==typeof U||"symbol"==typeof U||"bigint"==typeof U}(Le)||o.isBuffer(Le)){if(be){var Je=A?G:be(G,Y.encoder,ne,"key",E);if("comma"===$&&A){for(var Ze=m.call(String(Le),","),mt="",nt=0;nt<Ze.length;++nt)mt+=(0===nt?"":",")+N(be(Ze[nt],Y.encoder,ne,"value",E));return[N(Je)+"="+mt]}return[N(Je)+"="+N(be(Le,Y.encoder,ne,"value",E))]}return[N(G)+"="+N(String(Le))]}var it,Ge=[];if(void 0===Le)return Ge;if("comma"===$&&d(Le))it=[{value:Le.length>0?Le.join(",")||null:void 0}];else if(d(me))it=me;else{var fe=Object.keys(Le);it=v?fe.sort(v):fe}for(var te=0;te<it.length;++te){var se=it[te],De="object"==typeof se&&void 0!==se.value?se.value:Le[se];if(!_e||null!==De){var Ve=d(Le)?"function"==typeof $?$(G,se):G:G+(T?"."+se:"["+se+"]");pe.set(U,$e);var de=k();de.set(Q,pe),R(Ge,le(De,Ve,$,ee,_e,be,me,v,T,_,E,N,A,ne,de))}}return Ge};Ce.exports=function(le,U){var ee,G=le,$=function(U){if(!U)return Y;if(null!=U.encoder&&"function"!=typeof U.encoder)throw new TypeError("Encoder has to be a function.");var G=U.charset||Y.charset;if(void 0!==U.charset&&"utf-8"!==U.charset&&"iso-8859-1"!==U.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var $=x.default;if(void 0!==U.format){if(!L.call(x.formatters,U.format))throw new TypeError("Unknown format option provided.");$=U.format}var ee=x.formatters[$],_e=Y.filter;return("function"==typeof U.filter||d(U.filter))&&(_e=U.filter),{addQueryPrefix:"boolean"==typeof U.addQueryPrefix?U.addQueryPrefix:Y.addQueryPrefix,allowDots:void 0===U.allowDots?Y.allowDots:!!U.allowDots,charset:G,charsetSentinel:"boolean"==typeof U.charsetSentinel?U.charsetSentinel:Y.charsetSentinel,delimiter:void 0===U.delimiter?Y.delimiter:U.delimiter,encode:"boolean"==typeof U.encode?U.encode:Y.encode,encoder:"function"==typeof U.encoder?U.encoder:Y.encoder,encodeValuesOnly:"boolean"==typeof U.encodeValuesOnly?U.encodeValuesOnly:Y.encodeValuesOnly,filter:_e,format:$,formatter:ee,serializeDate:"function"==typeof U.serializeDate?U.serializeDate:Y.serializeDate,skipNulls:"boolean"==typeof U.skipNulls?U.skipNulls:Y.skipNulls,sort:"function"==typeof U.sort?U.sort:null,strictNullHandling:"boolean"==typeof U.strictNullHandling?U.strictNullHandling:Y.strictNullHandling}}(U);"function"==typeof $.filter?G=(0,$.filter)("",G):d($.filter)&&(ee=$.filter);var be=[];if("object"!=typeof G||null===G)return"";var v=j[U&&U.arrayFormat in j?U.arrayFormat:U&&"indices"in U?U.indices?"indices":"repeat":"indices"];ee||(ee=Object.keys(G)),$.sort&&ee.sort($.sort);for(var T=k(),_=0;_<ee.length;++_){var E=ee[_];$.skipNulls&&null===G[E]||R(be,W(G[E],E,v,$.strictNullHandling,$.skipNulls,$.encode?$.encoder:null,$.filter,$.sort,$.allowDots,$.serializeDate,$.format,$.formatter,$.encodeValuesOnly,$.charset,T))}var N=be.join($.delimiter),A=!0===$.addQueryPrefix?"?":"";return $.charsetSentinel&&(A+="iso-8859-1"===$.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),N.length>0?A+N:""}},8477:(Ce,O,S)=>{var k=S(7434),o=Object.prototype.hasOwnProperty,x=Array.isArray,L=function(){for(var J=[],le=0;le<256;++le)J.push("%"+((le<16?"0":"")+le.toString(16)).toUpperCase());return J}(),d=function(le,U){for(var G=U&&U.plainObjects?Object.create(null):{},$=0;$<le.length;++$)void 0!==le[$]&&(G[$]=le[$]);return G};Ce.exports={arrayToObject:d,assign:function(le,U){return Object.keys(U).reduce(function(G,$){return G[$]=U[$],G},le)},combine:function(le,U){return[].concat(le,U)},compact:function(le){for(var U=[{obj:{o:le},prop:"o"}],G=[],$=0;$<U.length;++$)for(var ee=U[$],_e=ee.obj[ee.prop],be=Object.keys(_e),me=0;me<be.length;++me){var v=be[me],T=_e[v];"object"==typeof T&&null!==T&&-1===G.indexOf(T)&&(U.push({obj:_e,prop:v}),G.push(T))}return function(le){for(;le.length>1;){var U=le.pop(),G=U.obj[U.prop];if(x(G)){for(var $=[],ee=0;ee<G.length;++ee)void 0!==G[ee]&&$.push(G[ee]);U.obj[U.prop]=$}}}(U),le},decode:function(J,le,U){var G=J.replace(/\+/g," ");if("iso-8859-1"===U)return G.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(G)}catch{return G}},encode:function(le,U,G,$,ee){if(0===le.length)return le;var _e=le;if("symbol"==typeof le?_e=Symbol.prototype.toString.call(le):"string"!=typeof le&&(_e=String(le)),"iso-8859-1"===G)return escape(_e).replace(/%u[0-9a-f]{4}/gi,function(T){return"%26%23"+parseInt(T.slice(2),16)+"%3B"});for(var be="",me=0;me<_e.length;++me){var v=_e.charCodeAt(me);45===v||46===v||95===v||126===v||v>=48&&v<=57||v>=65&&v<=90||v>=97&&v<=122||ee===k.RFC1738&&(40===v||41===v)?be+=_e.charAt(me):v<128?be+=L[v]:v<2048?be+=L[192|v>>6]+L[128|63&v]:v<55296||v>=57344?be+=L[224|v>>12]+L[128|v>>6&63]+L[128|63&v]:(v=65536+((1023&v)<<10|1023&_e.charCodeAt(me+=1)),be+=L[240|v>>18]+L[128|v>>12&63]+L[128|v>>6&63]+L[128|63&v])}return be},isBuffer:function(le){return!(!le||"object"!=typeof le||!(le.constructor&&le.constructor.isBuffer&&le.constructor.isBuffer(le)))},isRegExp:function(le){return"[object RegExp]"===Object.prototype.toString.call(le)},maybeMap:function(le,U){if(x(le)){for(var G=[],$=0;$<le.length;$+=1)G.push(U(le[$]));return G}return U(le)},merge:function J(le,U,G){if(!U)return le;if("object"!=typeof U){if(x(le))le.push(U);else{if(!le||"object"!=typeof le)return[le,U];(G&&(G.plainObjects||G.allowPrototypes)||!o.call(Object.prototype,U))&&(le[U]=!0)}return le}if(!le||"object"!=typeof le)return[le].concat(U);var $=le;return x(le)&&!x(U)&&($=d(le,G)),x(le)&&x(U)?(U.forEach(function(ee,_e){if(o.call(le,_e)){var be=le[_e];be&&"object"==typeof be&&ee&&"object"==typeof ee?le[_e]=J(be,ee,G):le.push(ee)}else le[_e]=ee}),le):Object.keys(U).reduce(function(ee,_e){var be=U[_e];return ee[_e]=o.call(ee,_e)?J(ee[_e],be,G):be,ee},$)}}},9877:(Ce,O,S)=>{var o=S(6712),x=S(1856),L=S(5381);function j(u){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+u,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+u+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!o)throw Error(j(227));function d(u,p,w,H,re,Ee,Fe,We,xt){var bt=Array.prototype.slice.call(arguments,3);try{p.apply(w,bt)}catch(Ut){this.onError(Ut)}}var m=!1,y=null,R=!1,M=null,z={onError:function(u){m=!0,y=u}};function Y(u,p,w,H,re,Ee,Fe,We,xt){m=!1,y=null,d.apply(z,arguments)}var Q=null,W=null,J=null;function le(u,p,w){var H=u.type||"unknown-event";u.currentTarget=J(w),function X(u,p,w,H,re,Ee,Fe,We,xt){if(Y.apply(this,arguments),m){if(!m)throw Error(j(198));var bt=y;m=!1,y=null,R||(R=!0,M=bt)}}(H,p,void 0,u),u.currentTarget=null}var U=null,G={};function $(){if(U)for(var u in G){var p=G[u],w=U.indexOf(u);if(!(-1<w))throw Error(j(96,u));if(!_e[w]){if(!p.extractEvents)throw Error(j(97,u));for(var H in _e[w]=p,w=p.eventTypes){var re=void 0,Ee=w[H],Fe=p,We=H;if(be.hasOwnProperty(We))throw Error(j(99,We));be[We]=Ee;var xt=Ee.phasedRegistrationNames;if(xt){for(re in xt)xt.hasOwnProperty(re)&&ee(xt[re],Fe,We);re=!0}else Ee.registrationName?(ee(Ee.registrationName,Fe,We),re=!0):re=!1;if(!re)throw Error(j(98,H,u))}}}}function ee(u,p,w){if(me[u])throw Error(j(100,u));me[u]=p,v[u]=p.eventTypes[w].dependencies}var _e=[],be={},me={},v={};function T(u){var w,p=!1;for(w in u)if(u.hasOwnProperty(w)){var H=u[w];if(!G.hasOwnProperty(w)||G[w]!==H){if(G[w])throw Error(j(102,w));G[w]=H,p=!0}}p&&$()}var _=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),E=null,N=null,A=null;function ne(u){if(u=W(u)){if("function"!=typeof E)throw Error(j(280));var p=u.stateNode;p&&(p=Q(p),E(u.stateNode,u.type,p))}}function pe(u){N?A?A.push(u):A=[u]:N=u}function Le(){if(N){var u=N,p=A;if(A=N=null,ne(u),p)for(u=0;u<p.length;u++)ne(p[u])}}function oe(u,p){return u(p)}function $e(u,p,w,H,re){return u(p,w,H,re)}function ct(){}var Ne=oe,Je=!1,Ze=!1;function mt(){(null!==N||null!==A)&&(ct(),Le())}function nt(u,p,w){if(Ze)return u(p,w);Ze=!0;try{return Ne(u,p,w)}finally{Ze=!1,mt()}}var Ge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,it=Object.prototype.hasOwnProperty,fe={},te={};function de(u,p,w,H,re,Ee){this.acceptsBooleans=2===p||3===p||4===p,this.attributeName=H,this.attributeNamespace=re,this.mustUseProperty=w,this.propertyName=u,this.type=p,this.sanitizeURL=Ee}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){ve[u]=new de(u,0,!1,u,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var p=u[0];ve[p]=new de(p,1,!1,u[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){ve[u]=new de(u,2,!1,u.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){ve[u]=new de(u,2,!1,u,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){ve[u]=new de(u,3,!1,u.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(u){ve[u]=new de(u,3,!0,u,null,!1)}),["capture","download"].forEach(function(u){ve[u]=new de(u,4,!1,u,null,!1)}),["cols","rows","size","span"].forEach(function(u){ve[u]=new de(u,6,!1,u,null,!1)}),["rowSpan","start"].forEach(function(u){ve[u]=new de(u,5,!1,u.toLowerCase(),null,!1)});var rt=/[\-:]([a-z])/g;function xe(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var p=u.replace(rt,xe);ve[p]=new de(p,1,!1,u,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var p=u.replace(rt,xe);ve[p]=new de(p,1,!1,u,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var p=u.replace(rt,xe);ve[p]=new de(p,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(u){ve[u]=new de(u,1,!1,u.toLowerCase(),null,!1)}),ve.xlinkHref=new de("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(u){ve[u]=new de(u,1,!1,u.toLowerCase(),null,!0)});var q=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function D(u,p,w,H){var re=ve.hasOwnProperty(p)?ve[p]:null;(null!==re?0===re.type:!H&&2<p.length&&("o"===p[0]||"O"===p[0])&&("n"===p[1]||"N"===p[1]))||(function Ve(u,p,w,H){if(null==p||function De(u,p,w,H){if(null!==w&&0===w.type)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return!H&&(null!==w?!w.acceptsBooleans:"data-"!==(u=u.toLowerCase().slice(0,5))&&"aria-"!==u);default:return!1}}(u,p,w,H))return!0;if(H)return!1;if(null!==w)switch(w.type){case 3:return!p;case 4:return!1===p;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}(p,w,re,H)&&(w=null),H||null===re?function se(u){return!!it.call(te,u)||!it.call(fe,u)&&(Ge.test(u)?te[u]=!0:(fe[u]=!0,!1))}(p)&&(null===w?u.removeAttribute(p):u.setAttribute(p,""+w)):re.mustUseProperty?u[re.propertyName]=null===w?3!==re.type&&"":w:(p=re.attributeName,H=re.attributeNamespace,null===w?u.removeAttribute(p):(w=3===(re=re.type)||4===re&&!0===w?"":""+w,H?u.setAttributeNS(H,p,w):u.setAttribute(p,w))))}q.hasOwnProperty("ReactCurrentDispatcher")||(q.ReactCurrentDispatcher={current:null}),q.hasOwnProperty("ReactCurrentBatchConfig")||(q.ReactCurrentBatchConfig={suspense:null});var K=/^(.*)[\\\/]/,ge="function"==typeof Symbol&&Symbol.for,je=ge?Symbol.for("react.element"):60103,tt=ge?Symbol.for("react.portal"):60106,ot=ge?Symbol.for("react.fragment"):60107,Ft=ge?Symbol.for("react.strict_mode"):60108,kt=ge?Symbol.for("react.profiler"):60114,qt=ge?Symbol.for("react.provider"):60109,tn=ge?Symbol.for("react.context"):60110,Pe=ge?Symbol.for("react.concurrent_mode"):60111,ei=ge?Symbol.for("react.forward_ref"):60112,nn=ge?Symbol.for("react.suspense"):60113,Nt=ge?Symbol.for("react.suspense_list"):60120,On=ge?Symbol.for("react.memo"):60115,ht=ge?Symbol.for("react.lazy"):60116,_t=ge?Symbol.for("react.block"):60121,gn="function"==typeof Symbol&&Symbol.iterator;function En(u){return null===u||"object"!=typeof u?null:"function"==typeof(u=gn&&u[gn]||u["@@iterator"])?u:null}function Ht(u){if(null==u)return null;if("function"==typeof u)return u.displayName||u.name||null;if("string"==typeof u)return u;switch(u){case ot:return"Fragment";case tt:return"Portal";case kt:return"Profiler";case Ft:return"StrictMode";case nn:return"Suspense";case Nt:return"SuspenseList"}if("object"==typeof u)switch(u.$$typeof){case tn:return"Context.Consumer";case qt:return"Context.Provider";case ei:var p=u.render;return p=p.displayName||p.name||"",u.displayName||(""!==p?"ForwardRef("+p+")":"ForwardRef");case On:return Ht(u.type);case _t:return Ht(u.render);case ht:if(u=1===u._status?u._result:null)return Ht(u)}return null}function Tn(u){var p="";do{e:switch(u.tag){case 3:case 4:case 6:case 7:case 10:case 9:var w="";break e;default:var H=u._debugOwner,re=u._debugSource,Ee=Ht(u.type);w=null,H&&(w=Ht(H.type)),H=Ee,Ee="",re?Ee=" (at "+re.fileName.replace(K,"")+":"+re.lineNumber+")":w&&(Ee=" (created by "+w+")"),w="\n    in "+(H||"Unknown")+Ee}p+=w,u=u.return}while(u);return p}function Vi(u){switch(typeof u){case"boolean":case"number":case"object":case"string":case"undefined":return u;default:return""}}function Fn(u){var p=u.type;return(u=u.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===p||"radio"===p)}function Pi(u){u._valueTracker||(u._valueTracker=function ti(u){var p=Fn(u)?"checked":"value",w=Object.getOwnPropertyDescriptor(u.constructor.prototype,p),H=""+u[p];if(!u.hasOwnProperty(p)&&void 0!==w&&"function"==typeof w.get&&"function"==typeof w.set){var re=w.get,Ee=w.set;return Object.defineProperty(u,p,{configurable:!0,get:function(){return re.call(this)},set:function(Fe){H=""+Fe,Ee.call(this,Fe)}}),Object.defineProperty(u,p,{enumerable:w.enumerable}),{getValue:function(){return H},setValue:function(Fe){H=""+Fe},stopTracking:function(){u._valueTracker=null,delete u[p]}}}}(u))}function br(u){if(!u)return!1;var p=u._valueTracker;if(!p)return!0;var w=p.getValue(),H="";return u&&(H=Fn(u)?u.checked?"true":"false":u.value),(u=H)!==w&&(p.setValue(u),!0)}function ni(u,p){return x({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p.checked??u._wrapperState.initialChecked})}function Wi(u,p){var w=p.defaultValue??"",H=null!=p.checked?p.checked:p.defaultChecked;w=Vi(null!=p.value?p.value:w),u._wrapperState={initialChecked:H,initialValue:w,controlled:"checkbox"===p.type||"radio"===p.type?null!=p.checked:null!=p.value}}function Ti(u,p){null!=(p=p.checked)&&D(u,"checked",p,!1)}function Ki(u,p){Ti(u,p);var w=Vi(p.value),H=p.type;if(null!=w)"number"===H?(0===w&&""===u.value||u.value!=w)&&(u.value=""+w):u.value!==""+w&&(u.value=""+w);else if("submit"===H||"reset"===H)return void u.removeAttribute("value");p.hasOwnProperty("value")?No(u,p.type,w):p.hasOwnProperty("defaultValue")&&No(u,p.type,Vi(p.defaultValue)),null==p.checked&&null!=p.defaultChecked&&(u.defaultChecked=!!p.defaultChecked)}function Mr(u,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var H=p.type;if(("submit"===H||"reset"===H)&&null==p.value)return;p=""+u._wrapperState.initialValue,w||p===u.value||(u.value=p),u.defaultValue=p}""!==(w=u.name)&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,""!==w&&(u.name=w)}function No(u,p,w){("number"!==p||u.ownerDocument.activeElement!==u)&&(null==w?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+w&&(u.defaultValue=""+w))}function Ur(u,p){return u=x({children:void 0},p),(p=function vo(u){var p="";return o.Children.forEach(u,function(w){null!=w&&(p+=w)}),p}(p.children))&&(u.children=p),u}function Lr(u,p,w,H){if(u=u.options,p){p={};for(var re=0;re<w.length;re++)p["$"+w[re]]=!0;for(w=0;w<u.length;w++)re=p.hasOwnProperty("$"+u[w].value),u[w].selected!==re&&(u[w].selected=re),re&&H&&(u[w].defaultSelected=!0)}else{for(w=""+Vi(w),p=null,re=0;re<u.length;re++){if(u[re].value===w)return u[re].selected=!0,void(H&&(u[re].defaultSelected=!0));null!==p||u[re].disabled||(p=u[re])}null!==p&&(p.selected=!0)}}function io(u,p){if(null!=p.dangerouslySetInnerHTML)throw Error(j(91));return x({},p,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function oa(u,p){var w=p.value;if(null==w){if(w=p.children,p=p.defaultValue,null!=w){if(null!=p)throw Error(j(92));if(Array.isArray(w)){if(!(1>=w.length))throw Error(j(93));w=w[0]}p=w}null==p&&(p=""),w=p}u._wrapperState={initialValue:Vi(w)}}function dr(u,p){var w=Vi(p.value),H=Vi(p.defaultValue);null!=w&&((w=""+w)!==u.value&&(u.value=w),null==p.defaultValue&&u.defaultValue!==w&&(u.defaultValue=w)),null!=H&&(u.defaultValue=""+H)}function Bo(u){var p=u.textContent;p===u._wrapperState.initialValue&&""!==p&&null!==p&&(u.value=p)}function _o(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oi(u,p){return null==u||"http://www.w3.org/1999/xhtml"===u?_o(p):"http://www.w3.org/2000/svg"===u&&"foreignObject"===p?"http://www.w3.org/1999/xhtml":u}var jo,u,Cr=(u=function(u,p){if("http://www.w3.org/2000/svg"!==u.namespaceURI||"innerHTML"in u)u.innerHTML=p;else{for((jo=jo||document.createElement("div")).innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=jo.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;p.firstChild;)u.appendChild(p.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(p,w,H,re){MSApp.execUnsafeLocalFunction(function(){return u(p,w)})}:u);function Nr(u,p){if(p){var w=u.firstChild;if(w&&w===u.lastChild&&3===w.nodeType)return void(w.nodeValue=p)}u.textContent=p}function xo(u,p){var w={};return w[u.toLowerCase()]=p.toLowerCase(),w["Webkit"+u]="webkit"+p,w["Moz"+u]="moz"+p,w}var jn={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionend:xo("Transition","TransitionEnd")},Ps={},Fs={};function zo(u){if(Ps[u])return Ps[u];if(!jn[u])return u;var w,p=jn[u];for(w in p)if(p.hasOwnProperty(w)&&w in Fs)return Ps[u]=p[w];return u}_&&(Fs=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);var Za=zo("animationend"),hl=zo("animationiteration"),pl=zo("animationstart"),lc=zo("transitionend"),aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),es=new("function"==typeof WeakMap?WeakMap:Map);function ml(u){var p=es.get(u);return void 0===p&&es.set(u,p=new Map),p}function C(u){var p=u,w=u;if(u.alternate)for(;p.return;)p=p.return;else{u=p;do{0!=(1026&(p=u).effectTag)&&(w=p.return),u=p.return}while(u)}return 3===p.tag?w:null}function b(u){if(13===u.tag){var p=u.memoizedState;if(null===p&&null!==(u=u.alternate)&&(p=u.memoizedState),null!==p)return p.dehydrated}return null}function F(u){if(C(u)!==u)throw Error(j(188))}function ae(u,p){if(null==p)throw Error(j(30));return null==u?p:Array.isArray(u)?Array.isArray(p)?(u.push.apply(u,p),u):(u.push(p),u):Array.isArray(p)?[u].concat(p):[u,p]}function ue(u,p,w){Array.isArray(u)?u.forEach(p,w):u&&p.call(w,u)}var Te=null;function we(u){if(u){var p=u._dispatchListeners,w=u._dispatchInstances;if(Array.isArray(p))for(var H=0;H<p.length&&!u.isPropagationStopped();H++)le(u,p[H],w[H]);else p&&le(u,p,w);u._dispatchListeners=null,u._dispatchInstances=null,u.isPersistent()||u.constructor.release(u)}}function Me(u){if(null!==u&&(Te=ae(Te,u)),u=Te,Te=null,u){if(ue(u,we),Te)throw Error(j(95));if(R)throw u=M,R=!1,M=null,u}}function ze(u){return(u=u.target||u.srcElement||window).correspondingUseElement&&(u=u.correspondingUseElement),3===u.nodeType?u.parentNode:u}function Ue(u){if(!_)return!1;var p=(u="on"+u)in document;return p||((p=document.createElement("div")).setAttribute(u,"return;"),p="function"==typeof p[u]),p}var qe=[];function Ye(u){u.topLevelType=null,u.nativeEvent=null,u.targetInst=null,u.ancestors.length=0,10>qe.length&&qe.push(u)}function lt(u,p,w,H){if(qe.length){var re=qe.pop();return re.topLevelType=u,re.eventSystemFlags=H,re.nativeEvent=p,re.targetInst=w,re}return{topLevelType:u,eventSystemFlags:H,nativeEvent:p,targetInst:w,ancestors:[]}}function gt(u){var p=u.targetInst,w=p;do{if(!w){u.ancestors.push(w);break}var H=w;if(3===H.tag)H=H.stateNode.containerInfo;else{for(;H.return;)H=H.return;H=3!==H.tag?null:H.stateNode.containerInfo}if(!H)break;5!==(p=w.tag)&&6!==p||u.ancestors.push(w),w=hc(H)}while(w);for(w=0;w<u.ancestors.length;w++){p=u.ancestors[w];var re=ze(u.nativeEvent);H=u.topLevelType;var Ee=u.nativeEvent,Fe=u.eventSystemFlags;0===w&&(Fe|=64);for(var We=null,xt=0;xt<_e.length;xt++){var bt=_e[xt];bt&&(bt=bt.extractEvents(H,p,Ee,re,Fe))&&(We=ae(We,bt))}Me(We)}}function vt(u,p,w){if(!w.has(u)){switch(u){case"scroll":fr(p,"scroll",!0);break;case"focus":case"blur":fr(p,"focus",!0),fr(p,"blur",!0),w.set("blur",null),w.set("focus",null);break;case"cancel":case"close":Ue(u)&&fr(p,u,!0);break;case"invalid":case"submit":case"reset":break;default:-1===aa.indexOf(u)&&ii(u,p)}w.set(u,null)}}var ke,He,Xe,Qe=!1,dt=[],yt=null,zt=null,It=null,xn=new Map,Bt=new Map,Xt=[],Yn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),pi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function nr(u,p,w,H,re){return{blockedOn:u,topLevelType:p,eventSystemFlags:32|w,nativeEvent:re,container:H}}function Yi(u,p){switch(u){case"focus":case"blur":yt=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":xn.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(p.pointerId)}}function Fi(u,p,w,H,re,Ee){return null===u||u.nativeEvent!==Ee?(u=nr(p,w,H,re,Ee),null!==p&&null!==(p=pc(p))&&He(p),u):(u.eventSystemFlags|=H,u)}function Ri(u){var p=hc(u.target);if(null!==p){var w=C(p);if(null!==w)if(13===(p=w.tag)){if(null!==(p=b(w)))return u.blockedOn=p,void L.unstable_runWithPriority(u.priority,function(){Xe(w)})}else if(3===p&&w.stateNode.hydrate)return void(u.blockedOn=3===w.tag?w.stateNode.containerInfo:null)}u.blockedOn=null}function ki(u){if(null!==u.blockedOn)return!1;var p=oo(u.topLevelType,u.eventSystemFlags,u.container,u.nativeEvent);if(null!==p){var w=pc(p);return null!==w&&He(w),u.blockedOn=p,!1}return!0}function ir(u,p,w){ki(u)&&w.delete(p)}function Rs(){for(Qe=!1;0<dt.length;){var u=dt[0];if(null!==u.blockedOn){null!==(u=pc(u.blockedOn))&&ke(u);break}var p=oo(u.topLevelType,u.eventSystemFlags,u.container,u.nativeEvent);null!==p?u.blockedOn=p:dt.shift()}null!==yt&&ki(yt)&&(yt=null),null!==zt&&ki(zt)&&(zt=null),null!==It&&ki(It)&&(It=null),xn.forEach(ir),Bt.forEach(ir)}function bo(u,p){u.blockedOn===p&&(u.blockedOn=null,Qe||(Qe=!0,L.unstable_scheduleCallback(L.unstable_NormalPriority,Rs)))}function Ds(u){function p(re){return bo(re,u)}if(0<dt.length){bo(dt[0],u);for(var w=1;w<dt.length;w++){var H=dt[w];H.blockedOn===u&&(H.blockedOn=null)}}for(null!==yt&&bo(yt,u),null!==zt&&bo(zt,u),null!==It&&bo(It,u),xn.forEach(p),Bt.forEach(p),w=0;w<Xt.length;w++)(H=Xt[w]).blockedOn===u&&(H.blockedOn=null);for(;0<Xt.length&&null===(w=Xt[0]).blockedOn;)Ri(w),null===w.blockedOn&&Xt.shift()}var Ca={},gl=new Map,wa=new Map,ro=["abort","abort",Za,"animationEnd",hl,"animationIteration",pl,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",lc,"transitionEnd","waiting","waiting"];function wr(u,p){for(var w=0;w<u.length;w+=2){var H=u[w],re=u[w+1],Ee="on"+(re[0].toUpperCase()+re.slice(1));Ee={phasedRegistrationNames:{bubbled:Ee,captured:Ee+"Capture"},dependencies:[H],eventPriority:p},wa.set(H,p),gl.set(H,Ee),Ca[re]=Ee}}wr("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),wr("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),wr(ro,2);for(var Os="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sa=0;Sa<Os.length;Sa++)wa.set(Os[Sa],0);var vl=L.unstable_UserBlockingPriority,yl=L.unstable_runWithPriority,ts=!0;function ii(u,p){fr(p,u,!1)}function fr(u,p,w){var H=wa.get(p);switch(void 0===H?2:H){case 0:H=Ea.bind(null,p,1,u);break;case 1:H=Uo.bind(null,p,1,u);break;default:H=Bn.bind(null,p,1,u)}u.addEventListener(p,H,!!w)}function Ea(u,p,w,H){Je||ct();var re=Bn,Ee=Je;Je=!0;try{$e(re,u,p,w,H)}finally{(Je=Ee)||mt()}}function Uo(u,p,w,H){yl(vl,Bn.bind(null,u,p,w,H))}function Bn(u,p,w,H){if(ts)if(0<dt.length&&-1<Yn.indexOf(u))u=nr(null,u,p,w,H),dt.push(u);else{var re=oo(u,p,w,H);if(null===re)Yi(u,H);else if(-1<Yn.indexOf(u))u=nr(re,u,p,w,H),dt.push(u);else if(!function Ai(u,p,w,H,re){switch(p){case"focus":return yt=Fi(yt,u,p,w,H,re),!0;case"dragenter":return zt=Fi(zt,u,p,w,H,re),!0;case"mouseover":return It=Fi(It,u,p,w,H,re),!0;case"pointerover":var Ee=re.pointerId;return xn.set(Ee,Fi(xn.get(Ee)||null,u,p,w,H,re)),!0;case"gotpointercapture":return Bt.set(Ee=re.pointerId,Fi(Bt.get(Ee)||null,u,p,w,H,re)),!0}return!1}(re,u,p,w,H)){Yi(u,H),u=lt(u,H,null,p);try{nt(gt,u)}finally{Ye(u)}}}}function oo(u,p,w,H){if(null!==(w=hc(w=ze(H)))){var re=C(w);if(null===re)w=null;else{var Ee=re.tag;if(13===Ee){if(null!==(w=b(re)))return w;w=null}else if(3===Ee){if(re.stateNode.hydrate)return 3===re.tag?re.stateNode.containerInfo:null;w=null}else re!==w&&(w=null)}}u=lt(u,H,w,p);try{nt(gt,u)}finally{Ye(u)}return null}var Co={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Di=["Webkit","ms","Moz","O"];function cc(u,p,w){return null==p||"boolean"==typeof p||""===p?"":w||"number"!=typeof p||0===p||Co.hasOwnProperty(u)&&Co[u]?(""+p).trim():p+"px"}function sa(u,p){for(var w in u=u.style,p)if(p.hasOwnProperty(w)){var H=0===w.indexOf("--"),re=cc(w,p[w],H);"float"===w&&(w="cssFloat"),H?u.setProperty(w,re):u[w]=re}}Object.keys(Co).forEach(function(u){Di.forEach(function(p){p=p+u.charAt(0).toUpperCase()+u.substring(1),Co[p]=Co[u]})});var Ta=x({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uc(u,p){if(p){if(Ta[u]&&(null!=p.children||null!=p.dangerouslySetInnerHTML))throw Error(j(137,u,""));if(null!=p.dangerouslySetInnerHTML){if(null!=p.children)throw Error(j(60));if("object"!=typeof p.dangerouslySetInnerHTML||!("__html"in p.dangerouslySetInnerHTML))throw Error(j(61))}if(null!=p.style&&"object"!=typeof p.style)throw Error(j(62,""))}}function dc(u,p){if(-1===u.indexOf("-"))return"string"==typeof p.is;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fc="http://www.w3.org/1999/xhtml";function Aa(u,p){var w=ml(u=9===u.nodeType||11===u.nodeType?u:u.ownerDocument);p=v[p];for(var H=0;H<p.length;H++)vt(p[H],u,w)}function mu(){}function af(u){if(void 0===(u=u||("undefined"!=typeof document?document:void 0)))return null;try{return u.activeElement||u.body}catch{return u.body}}function Np(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Bp(u,p){var H,w=Np(u);for(u=0;w;){if(3===w.nodeType){if(H=u+w.textContent.length,u<=p&&H>=p)return{node:w,offset:p-u};u=H}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Np(w)}}function jv(u,p){return!(!u||!p)&&(u===p||(!u||3!==u.nodeType)&&(p&&3===p.nodeType?jv(u,p.parentNode):"contains"in u?u.contains(p):!!u.compareDocumentPosition&&!!(16&u.compareDocumentPosition(p))))}function sf(){for(var u=window,p=af();p instanceof u.HTMLIFrameElement;){try{var w="string"==typeof p.contentWindow.location.href}catch{w=!1}if(!w)break;p=af((u=p.contentWindow).document)}return p}function gu(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return p&&("input"===p&&("text"===u.type||"search"===u.type||"tel"===u.type||"url"===u.type||"password"===u.type)||"textarea"===p||"true"===u.contentEditable)}var uf=null,Up=null;function Vp(u,p){switch(u){case"button":case"input":case"select":case"textarea":return!!p.autoFocus}return!1}function df(u,p){return"textarea"===u||"option"===u||"noscript"===u||"string"==typeof p.children||"number"==typeof p.children||"object"==typeof p.dangerouslySetInnerHTML&&null!==p.dangerouslySetInnerHTML&&null!=p.dangerouslySetInnerHTML.__html}var vu="function"==typeof setTimeout?setTimeout:void 0,Gp="function"==typeof clearTimeout?clearTimeout:void 0;function _l(u){for(;null!=u;u=u.nextSibling){var p=u.nodeType;if(1===p||3===p)break}return u}function $p(u){u=u.previousSibling;for(var p=0;u;){if(8===u.nodeType){var w=u.data;if("$"===w||"$!"===w||"$?"===w){if(0===p)return u;p--}else"/$"===w&&p++}u=u.previousSibling}return null}var ff=Math.random().toString(36).slice(2),ns="__reactInternalInstance$"+ff,yu="__reactEventHandlers$"+ff,_u="__reactContainere$"+ff;function hc(u){var p=u[ns];if(p)return p;for(var w=u.parentNode;w;){if(p=w[_u]||w[ns]){if(w=p.alternate,null!==p.child||null!==w&&null!==w.child)for(u=$p(u);null!==u;){if(w=u[ns])return w;u=$p(u)}return p}w=(u=w).parentNode}return null}function pc(u){return!(u=u[ns]||u[_u])||5!==u.tag&&6!==u.tag&&13!==u.tag&&3!==u.tag?null:u}function is(u){if(5===u.tag||6===u.tag)return u.stateNode;throw Error(j(33))}function xu(u){return u[yu]||null}function ka(u){do{u=u.return}while(u&&5!==u.tag);return u||null}function Hp(u,p){var w=u.stateNode;if(!w)return null;var H=Q(w);if(!H)return null;w=H[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(H=!H.disabled)||(H=!("button"===(u=u.type)||"input"===u||"select"===u||"textarea"===u)),u=!H;break e;default:u=!1}if(u)return null;if(w&&"function"!=typeof w)throw Error(j(231,p,typeof w));return w}function qp(u,p,w){(p=Hp(u,w.dispatchConfig.phasedRegistrationNames[p]))&&(w._dispatchListeners=ae(w._dispatchListeners,p),w._dispatchInstances=ae(w._dispatchInstances,u))}function zv(u){if(u&&u.dispatchConfig.phasedRegistrationNames){for(var p=u._targetInst,w=[];p;)w.push(p),p=ka(p);for(p=w.length;0<p--;)qp(w[p],"captured",u);for(p=0;p<w.length;p++)qp(w[p],"bubbled",u)}}function hf(u,p,w){u&&w&&w.dispatchConfig.registrationName&&(p=Hp(u,w.dispatchConfig.registrationName))&&(w._dispatchListeners=ae(w._dispatchListeners,p),w._dispatchInstances=ae(w._dispatchInstances,u))}function xl(u){ue(u,zv)}var rs=null,pf=null,bu=null;function Xp(){if(bu)return bu;var u,H,p=pf,w=p.length,re="value"in rs?rs.value:rs.textContent,Ee=re.length;for(u=0;u<w&&p[u]===re[u];u++);var Fe=w-u;for(H=1;H<=Fe&&p[w-H]===re[Ee-H];H++);return bu=re.slice(u,1<H?1-H:void 0)}function Cu(){return!0}function wu(){return!1}function wo(u,p,w,H){for(var re in this.dispatchConfig=u,this._targetInst=p,this.nativeEvent=w,u=this.constructor.Interface)u.hasOwnProperty(re)&&((p=u[re])?this[re]=p(w):"target"===re?this.target=H:this[re]=w[re]);return this.isDefaultPrevented=(null!=w.defaultPrevented?w.defaultPrevented:!1===w.returnValue)?Cu:wu,this.isPropagationStopped=wu,this}function Uv(u,p,w,H){if(this.eventPool.length){var re=this.eventPool.pop();return this.call(re,u,p,w,H),re}return new this(u,p,w,H)}function Vv(u){if(!(u instanceof this))throw Error(j(279));u.destructor(),10>this.eventPool.length&&this.eventPool.push(u)}function Wp(u){u.eventPool=[],u.getPooled=Uv,u.release=Vv}x(wo.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():"unknown"!=typeof u.returnValue&&(u.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():"unknown"!=typeof u.cancelBubble&&(u.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){this.isPersistent=Cu},isPersistent:wu,destructor:function(){var p,u=this.constructor.Interface;for(p in u)this[p]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=wu,this._dispatchInstances=this._dispatchListeners=null}}),wo.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},wo.extend=function(u){function p(){}function w(){return H.apply(this,arguments)}var H=this;p.prototype=H.prototype;var re=new p;return x(re,w.prototype),(w.prototype=re).constructor=w,w.Interface=x({},H.Interface,u),w.extend=H.extend,Wp(w),w},Wp(wo);var Gv=wo.extend({data:null}),$v=wo.extend({data:null}),Hv=[9,13,27,32],mf=_&&"CompositionEvent"in window,mc=null;_&&"documentMode"in document&&(mc=document.documentMode);var Ex=_&&"TextEvent"in window&&!mc,Kp=_&&(!mf||mc&&8<mc&&11>=mc),Yp=String.fromCharCode(32),Ia={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Qp=!1;function Jp(u,p){switch(u){case"keyup":return-1!==Hv.indexOf(p.keyCode);case"keydown":return 229!==p.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Zp(u){return"object"==typeof(u=u.detail)&&"data"in u?u.data:null}var bl=!1,Xv={eventTypes:Ia,extractEvents:function(u,p,w,H){var re;if(mf)e:{switch(u){case"compositionstart":var Ee=Ia.compositionStart;break e;case"compositionend":Ee=Ia.compositionEnd;break e;case"compositionupdate":Ee=Ia.compositionUpdate;break e}Ee=void 0}else bl?Jp(u,w)&&(Ee=Ia.compositionEnd):"keydown"===u&&229===w.keyCode&&(Ee=Ia.compositionStart);return Ee?(Kp&&"ko"!==w.locale&&(bl||Ee!==Ia.compositionStart?Ee===Ia.compositionEnd&&bl&&(re=Xp()):(pf="value"in(rs=H)?rs.value:rs.textContent,bl=!0)),Ee=Gv.getPooled(Ee,p,w,H),(re||null!==(re=Zp(w)))&&(Ee.data=re),xl(Ee),re=Ee):re=null,(u=Ex?function Tx(u,p){switch(u){case"compositionend":return Zp(p);case"keypress":return 32!==p.which?null:(Qp=!0,Yp);case"textInput":return(u=p.data)===Yp&&Qp?null:u;default:return null}}(u,w):function qv(u,p){if(bl)return"compositionend"===u||!mf&&Jp(u,p)?(u=Xp(),bu=pf=rs=null,bl=!1,u):null;switch(u){case"paste":default:return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Kp&&"ko"!==p.locale?null:p.data}}(u,w))?((p=$v.getPooled(Ia.beforeInput,p,w,H)).data=u,xl(p)):p=null,null===re?p:null===p?re:[re,p]}},Wv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(u){var p=u&&u.nodeName&&u.nodeName.toLowerCase();return"input"===p?!!Wv[u.type]:"textarea"===p}var tm={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function nm(u,p,w){return(u=wo.getPooled(tm.change,u,p,w)).type="change",pe(w),xl(u),u}var Su=null,gc=null;function Kv(u){Me(u)}function vc(u){if(br(is(u)))return u}function Yv(u,p){if("change"===u)return p}var gf=!1;function im(){Su&&(Su.detachEvent("onpropertychange",rm),gc=Su=null)}function rm(u){if("value"===u.propertyName&&vc(gc))if(u=nm(gc,u,ze(u)),Je)Me(u);else{Je=!0;try{oe(Kv,u)}finally{Je=!1,mt()}}}function Qv(u,p,w){"focus"===u?(im(),gc=w,(Su=p).attachEvent("onpropertychange",rm)):"blur"===u&&im()}function Ax(u){if("selectionchange"===u||"keyup"===u||"keydown"===u)return vc(gc)}function Jv(u,p){if("click"===u)return vc(p)}function Zv(u,p){if("input"===u||"change"===u)return vc(p)}_&&(gf=Ue("input")&&(!document.documentMode||9<document.documentMode));var ey={eventTypes:tm,_isInputEventSupported:gf,extractEvents:function(u,p,w,H){var re=p?is(p):window,Ee=re.nodeName&&re.nodeName.toLowerCase();if("select"===Ee||"input"===Ee&&"file"===re.type)var Fe=Yv;else if(em(re))if(gf)Fe=Zv;else{Fe=Ax;var We=Qv}else(Ee=re.nodeName)&&"input"===Ee.toLowerCase()&&("checkbox"===re.type||"radio"===re.type)&&(Fe=Jv);if(Fe&&(Fe=Fe(u,p)))return nm(Fe,w,H);We&&We(u,re,p),"blur"===u&&(u=re._wrapperState)&&u.controlled&&"number"===re.type&&No(re,"number",re.value)}},yc=wo.extend({view:null,detail:null}),ty={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ny(u){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(u):!!(u=ty[u])&&!!p[u]}function vf(){return ny}var iy=0,om=0,am=!1,sm=!1,_c=yc.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:vf,button:null,buttons:null,relatedTarget:function(u){return u.relatedTarget||(u.fromElement===u.srcElement?u.toElement:u.fromElement)},movementX:function(u){if("movementX"in u)return u.movementX;var p=iy;return iy=u.screenX,am?"mousemove"===u.type?u.screenX-p:0:(am=!0,0)},movementY:function(u){if("movementY"in u)return u.movementY;var p=om;return om=u.screenY,sm?"mousemove"===u.type?u.screenY-p:0:(sm=!0,0)}}),lm=_c.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),xc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},kx={eventTypes:xc,extractEvents:function(u,p,w,H,re){var Ee="mouseover"===u||"pointerover"===u,Fe="mouseout"===u||"pointerout"===u;if(Ee&&0==(32&re)&&(w.relatedTarget||w.fromElement)||!Fe&&!Ee)return null;if(Ee=H.window===H?H:(Ee=H.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,Fe?(Fe=p,null!==(p=(p=w.relatedTarget||w.toElement)?hc(p):null)&&(p!==C(p)||5!==p.tag&&6!==p.tag)&&(p=null)):Fe=null,Fe===p)return null;if("mouseout"===u||"mouseover"===u)var xt=_c,bt=xc.mouseLeave,Ut=xc.mouseEnter,Yt="mouse";else("pointerout"===u||"pointerover"===u)&&(xt=lm,bt=xc.pointerLeave,Ut=xc.pointerEnter,Yt="pointer");if(u=null==Fe?Ee:is(Fe),Ee=null==p?Ee:is(p),(bt=xt.getPooled(bt,Fe,w,H)).type=Yt+"leave",bt.target=u,bt.relatedTarget=Ee,(w=xt.getPooled(Ut,p,w,H)).type=Yt+"enter",w.target=Ee,w.relatedTarget=u,Yt=p,(H=Fe)&&Yt)e:{for(Ut=Yt,Fe=0,u=xt=H;u;u=ka(u))Fe++;for(u=0,p=Ut;p;p=ka(p))u++;for(;0<Fe-u;)xt=ka(xt),Fe--;for(;0<u-Fe;)Ut=ka(Ut),u--;for(;Fe--;){if(xt===Ut||xt===Ut.alternate)break e;xt=ka(xt),Ut=ka(Ut)}xt=null}else xt=null;for(Ut=xt,xt=[];H&&H!==Ut&&(null===(Fe=H.alternate)||Fe!==Ut);)xt.push(H),H=ka(H);for(H=[];Yt&&Yt!==Ut&&(null===(Fe=Yt.alternate)||Fe!==Ut);)H.push(Yt),Yt=ka(Yt);for(Yt=0;Yt<xt.length;Yt++)hf(xt[Yt],"bubbled",bt);for(Yt=H.length;0<Yt--;)hf(H[Yt],"captured",w);return 0==(64&re)?[bt]:[bt,w]}},Ms="function"==typeof Object.is?Object.is:function ry(u,p){return u===p&&(0!==u||1/u==1/p)||u!=u&&p!=p},cm=Object.prototype.hasOwnProperty;function bc(u,p){if(Ms(u,p))return!0;if("object"!=typeof u||null===u||"object"!=typeof p||null===p)return!1;var w=Object.keys(u),H=Object.keys(p);if(w.length!==H.length)return!1;for(H=0;H<w.length;H++)if(!cm.call(p,w[H])||!Ms(u[w[H]],p[w[H]]))return!1;return!0}var oy=_&&"documentMode"in document&&11>=document.documentMode,um={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Cl=null,yf=null,Eu=null,_f=!1;function ay(u,p){var w=p.window===p?p.document:9===p.nodeType?p:p.ownerDocument;return _f||null==Cl||Cl!==af(w)?null:(w="selectionStart"in(w=Cl)&&gu(w)?{start:w.selectionStart,end:w.selectionEnd}:{anchorNode:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset},Eu&&bc(Eu,w)?null:(Eu=w,(u=wo.getPooled(um.select,yf,u,p)).type="select",u.target=Cl,xl(u),u))}var dm={eventTypes:um,extractEvents:function(u,p,w,H,re,Ee){if(!(Ee=!(re=Ee||(H.window===H?H.document:9===H.nodeType?H:H.ownerDocument)))){e:{re=ml(re),Ee=v.onSelect;for(var Fe=0;Fe<Ee.length;Fe++)if(!re.has(Ee[Fe])){re=!1;break e}re=!0}Ee=!re}if(Ee)return null;switch(re=p?is(p):window,u){case"focus":(em(re)||"true"===re.contentEditable)&&(Cl=re,yf=p,Eu=null);break;case"blur":Eu=yf=Cl=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":return _f=!1,ay(w,H);case"selectionchange":if(oy)break;case"keydown":case"keyup":return ay(w,H)}return null}},Ix=wo.extend({animationName:null,elapsedTime:null,pseudoElement:null}),wl=wo.extend({clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),sy=yc.extend({relatedTarget:null});function Tu(u){var p=u.keyCode;return"charCode"in u?0===(u=u.charCode)&&13===p&&(u=13):u=p,10===u&&(u=13),32<=u||13===u?u:0}var ly={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uy=yc.extend({key:function(u){if(u.key){var p=ly[u.key]||u.key;if("Unidentified"!==p)return p}return"keypress"===u.type?13===(u=Tu(u))?"Enter":String.fromCharCode(u):"keydown"===u.type||"keyup"===u.type?cy[u.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:vf,charCode:function(u){return"keypress"===u.type?Tu(u):0},keyCode:function(u){return"keydown"===u.type||"keyup"===u.type?u.keyCode:0},which:function(u){return"keypress"===u.type?Tu(u):"keydown"===u.type||"keyup"===u.type?u.keyCode:0}}),dy=_c.extend({dataTransfer:null}),fy=yc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:vf}),Au=wo.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),fm=_c.extend({deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:null,deltaMode:null}),ku={eventTypes:Ca,extractEvents:function(u,p,w,H){var re=gl.get(u);if(!re)return null;switch(u){case"keypress":if(0===Tu(w))return null;case"keydown":case"keyup":u=uy;break;case"blur":case"focus":u=sy;break;case"click":if(2===w.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=_c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=fy;break;case Za:case hl:case pl:u=Ix;break;case lc:u=Au;break;case"scroll":u=yc;break;case"wheel":u=fm;break;case"copy":case"cut":case"paste":u=wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=lm;break;default:u=wo}return xl(p=u.getPooled(re,p,w,H)),p}};if(U)throw Error(j(101));U=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),$(),Q=xu,W=pc,J=is,T({SimpleEventPlugin:ku,EnterLeaveEventPlugin:kx,ChangeEventPlugin:ey,SelectEventPlugin:dm,BeforeInputEventPlugin:Xv});var ye=[],Pa=-1;function xi(u){0>Pa||(u.current=ye[Pa],ye[Pa]=null,Pa--)}function Oi(u,p){Pa++,ye[Pa]=u.current,u.current=p}var os={},Sr={current:os},Vr={current:!1},Ci=os;function as(u,p){var w=u.type.contextTypes;if(!w)return os;var H=u.stateNode;if(H&&H.__reactInternalMemoizedUnmaskedChildContext===p)return H.__reactInternalMemoizedMaskedChildContext;var Ee,re={};for(Ee in w)re[Ee]=p[Ee];return H&&((u=u.stateNode).__reactInternalMemoizedUnmaskedChildContext=p,u.__reactInternalMemoizedMaskedChildContext=re),re}function Gr(u){return null!=u.childContextTypes}function Iu(){xi(Vr),xi(Sr)}function hm(u,p,w){if(Sr.current!==os)throw Error(j(168));Oi(Sr,p),Oi(Vr,w)}function ai(u,p,w){var H=u.stateNode;if(u=p.childContextTypes,"function"!=typeof H.getChildContext)return w;for(var re in H=H.getChildContext())if(!(re in u))throw Error(j(108,Ht(p)||"Unknown",re));return x({},w,{},H)}function zn(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||os,Ci=Sr.current,Oi(Sr,u),Oi(Vr,Vr.current),!0}function ui(u,p,w){var H=u.stateNode;if(!H)throw Error(j(169));w?(u=ai(u,p,Ci),H.__reactInternalMemoizedMergedChildContext=u,xi(Vr),xi(Sr),Oi(Sr,u)):xi(Vr),Oi(Vr,w)}var xf=L.unstable_runWithPriority,Qi=L.unstable_scheduleCallback,ao=L.unstable_cancelCallback,hn=L.unstable_requestPaint,Fa=L.unstable_now,Vo=L.unstable_getCurrentPriorityLevel,Ra=L.unstable_ImmediatePriority,Go=L.unstable_UserBlockingPriority,Re=L.unstable_NormalPriority,Sl=L.unstable_LowPriority,pm=L.unstable_IdlePriority,mm={},ss=L.unstable_shouldYield,gm=void 0!==hn?hn:function(){},Da=null,Ls=null,bf=!1,vm=Fa(),So=1e4>vm?Fa:function(){return Fa()-vm};function sn(){switch(Vo()){case Ra:return 99;case Go:return 98;case Re:return 97;case Sl:return 96;case pm:return 95;default:throw Error(j(332))}}function vi(u){switch(u){case 99:return Ra;case 98:return Go;case 97:return Re;case 96:return Sl;case 95:return pm;default:throw Error(j(332))}}function Er(u,p){return u=vi(u),xf(u,p)}function Cf(u,p,w){return u=vi(u),Qi(u,p,w)}function ym(u){return null===Da?(Da=[u],Ls=Qi(Ra,hy)):Da.push(u),mm}function la(){if(null!==Ls){var u=Ls;Ls=null,ao(u)}hy()}function hy(){if(!bf&&null!==Da){bf=!0;var u=0;try{var p=Da;Er(99,function(){for(;u<p.length;u++){var w=p[u];do{w=w(!0)}while(null!==w)}}),Da=null}catch(w){throw null!==Da&&(Da=Da.slice(u+1)),Qi(Ra,la),w}finally{bf=!1}}}function Pu(u,p,w){return 1073741821-(1+((1073741821-u+p/10)/(w/=10)|0))*w}function $o(u,p){if(u&&u.defaultProps)for(var w in p=x({},p),u=u.defaultProps)void 0===p[w]&&(p[w]=u[w]);return p}var Fu={current:null},wf=null,$r=null,Cc=null;function ls(){Cc=$r=wf=null}function Sf(u){var p=Fu.current;xi(Fu),u.type._context._currentValue=p}function Ef(u,p){for(;null!==u;){var w=u.alternate;if(u.childExpirationTime<p)u.childExpirationTime=p,null!==w&&w.childExpirationTime<p&&(w.childExpirationTime=p);else{if(!(null!==w&&w.childExpirationTime<p))break;w.childExpirationTime=p}u=u.return}}function Ns(u,p){wf=u,Cc=$r=null,null!==(u=u.dependencies)&&null!==u.firstContext&&(u.expirationTime>=p&&(jr=!0),u.firstContext=null)}function Eo(u,p){if(Cc!==u&&!1!==p&&0!==p)if(("number"!=typeof p||1073741823===p)&&(Cc=u,p=1073741823),p={context:u,observedBits:p,next:null},null===$r){if(null===wf)throw Error(j(308));$r=p,wf.dependencies={expirationTime:0,firstContext:p,responders:null}}else $r=$r.next=p;return u._currentValue}var Oa=!1;function El(u){u.updateQueue={baseState:u.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Br(u,p){p.updateQueue===(u=u.updateQueue)&&(p.updateQueue={baseState:u.baseState,baseQueue:u.baseQueue,shared:u.shared,effects:u.effects})}function cs(u,p){return(u={expirationTime:u,suspenseConfig:p,tag:0,payload:null,callback:null,next:null}).next=u}function ca(u,p){if(null!==(u=u.updateQueue)){var w=(u=u.shared).pending;null===w?p.next=p:(p.next=w.next,w.next=p),u.pending=p}}function wc(u,p){var w=u.alternate;null!==w&&Br(w,u),null===(w=(u=u.updateQueue).baseQueue)?(u.baseQueue=p.next=p,p.next=p):(p.next=w.next,w.next=p)}function Ru(u,p,w,H){var re=u.updateQueue;Oa=!1;var Ee=re.baseQueue,Fe=re.shared.pending;if(null!==Fe){if(null!==Ee){var We=Ee.next;Ee.next=Fe.next,Fe.next=We}Ee=Fe,re.shared.pending=null,null!==(We=u.alternate)&&null!==(We=We.updateQueue)&&(We.baseQueue=Fe)}if(null!==Ee){var xt=re.baseState,bt=0,Ut=null,Yt=null,Mn=null;if(null!==(We=Ee.next))for(var Un=We;;){if((Fe=Un.expirationTime)<H){var ko={expirationTime:Un.expirationTime,suspenseConfig:Un.suspenseConfig,tag:Un.tag,payload:Un.payload,callback:Un.callback,next:null};null===Mn?(Yt=Mn=ko,Ut=xt):Mn=Mn.next=ko,Fe>bt&&(bt=Fe)}else{null!==Mn&&(Mn=Mn.next={expirationTime:1073741823,suspenseConfig:Un.suspenseConfig,tag:Un.tag,payload:Un.payload,callback:Un.callback,next:null}),Lm(Fe,Un.suspenseConfig);e:{var gr=u,pt=Un;switch(Fe=p,ko=w,pt.tag){case 1:if("function"==typeof(gr=pt.payload)){xt=gr.call(ko,xt,Fe);break e}xt=gr;break e;case 3:gr.effectTag=-4097&gr.effectTag|64;case 0:if(null==(Fe="function"==typeof(gr=pt.payload)?gr.call(ko,xt,Fe):gr))break e;xt=x({},xt,Fe);break e;case 2:Oa=!0}}null!==Un.callback&&(u.effectTag|=32,null===(Fe=re.effects)?re.effects=[Un]:Fe.push(Un))}if(null===(Un=Un.next)||Un===We){if(null===(Fe=re.shared.pending))break;Un=Ee.next=Fe.next,Fe.next=We,re.baseQueue=Ee=Fe,re.shared.pending=null}}null===Mn?Ut=xt:Mn.next=Yt,re.baseState=Ut,re.baseQueue=Mn,rd(bt),u.expirationTime=bt,u.memoizedState=xt}}function _m(u,p,w){if(u=p.effects,p.effects=null,null!==u)for(p=0;p<u.length;p++){var H=u[p],re=H.callback;if(null!==re){if(H.callback=null,H=re,re=w,"function"!=typeof H)throw Error(j(191,H));H.call(re)}}}var Tl=q.ReactCurrentBatchConfig,xm=(new o.Component).refs;function Du(u,p,w,H){w=null==(w=w(H,p=u.memoizedState))?p:x({},p,w),u.memoizedState=w,0===u.expirationTime&&(u.updateQueue.baseState=w)}var Tf={isMounted:function(u){return!!(u=u._reactInternalFiber)&&C(u)===u},enqueueSetState:function(u,p,w){u=u._reactInternalFiber;var H=qr(),re=Tl.suspense;(re=cs(H=Xs(H,u,re),re)).payload=p,null!=w&&(re.callback=w),ca(u,re),Ws(u,H)},enqueueReplaceState:function(u,p,w){u=u._reactInternalFiber;var H=qr(),re=Tl.suspense;(re=cs(H=Xs(H,u,re),re)).tag=1,re.payload=p,null!=w&&(re.callback=w),ca(u,re),Ws(u,H)},enqueueForceUpdate:function(u,p){u=u._reactInternalFiber;var w=qr(),H=Tl.suspense;(H=cs(w=Xs(w,u,H),H)).tag=2,null!=p&&(H.callback=p),ca(u,H),Ws(u,w)}};function Af(u,p,w,H,re,Ee,Fe){return"function"==typeof(u=u.stateNode).shouldComponentUpdate?u.shouldComponentUpdate(H,Ee,Fe):!(p.prototype&&p.prototype.isPureReactComponent&&bc(w,H)&&bc(re,Ee))}function bm(u,p,w){var H=!1,re=os,Ee=p.contextType;return"object"==typeof Ee&&null!==Ee?Ee=Eo(Ee):(re=Gr(p)?Ci:Sr.current,Ee=(H=null!=(H=p.contextTypes))?as(u,re):os),p=new p(w,Ee),u.memoizedState=null!=p.state?p.state:null,p.updater=Tf,u.stateNode=p,p._reactInternalFiber=u,H&&((u=u.stateNode).__reactInternalMemoizedUnmaskedChildContext=re,u.__reactInternalMemoizedMaskedChildContext=Ee),p}function Cm(u,p,w,H){u=p.state,"function"==typeof p.componentWillReceiveProps&&p.componentWillReceiveProps(w,H),"function"==typeof p.UNSAFE_componentWillReceiveProps&&p.UNSAFE_componentWillReceiveProps(w,H),p.state!==u&&Tf.enqueueReplaceState(p,p.state,null)}function Ou(u,p,w,H){var re=u.stateNode;re.props=w,re.state=u.memoizedState,re.refs=xm,El(u);var Ee=p.contextType;"object"==typeof Ee&&null!==Ee?re.context=Eo(Ee):(Ee=Gr(p)?Ci:Sr.current,re.context=as(u,Ee)),Ru(u,w,re,H),re.state=u.memoizedState,"function"==typeof(Ee=p.getDerivedStateFromProps)&&(Du(u,p,Ee,w),re.state=u.memoizedState),"function"==typeof p.getDerivedStateFromProps||"function"==typeof re.getSnapshotBeforeUpdate||"function"!=typeof re.UNSAFE_componentWillMount&&"function"!=typeof re.componentWillMount||(p=re.state,"function"==typeof re.componentWillMount&&re.componentWillMount(),"function"==typeof re.UNSAFE_componentWillMount&&re.UNSAFE_componentWillMount(),p!==re.state&&Tf.enqueueReplaceState(re,re.state,null),Ru(u,w,re,H),re.state=u.memoizedState),"function"==typeof re.componentDidMount&&(u.effectTag|=4)}var Ho=Array.isArray;function so(u,p,w){if(null!==(u=w.ref)&&"function"!=typeof u&&"object"!=typeof u){if(w._owner){if(w=w._owner){if(1!==w.tag)throw Error(j(309));var H=w.stateNode}if(!H)throw Error(j(147,u));var re=""+u;return null!==p&&null!==p.ref&&"function"==typeof p.ref&&p.ref._stringRef===re?p.ref:((p=function(Ee){var Fe=H.refs;Fe===xm&&(Fe=H.refs={}),null===Ee?delete Fe[re]:Fe[re]=Ee})._stringRef=re,p)}if("string"!=typeof u)throw Error(j(284));if(!w._owner)throw Error(j(290,u))}return u}function Mu(u,p){if("textarea"!==u.type)throw Error(j(31,"[object Object]"===Object.prototype.toString.call(p)?"object with keys {"+Object.keys(p).join(", ")+"}":p,""))}function wm(u){function p(pt,ut){if(u){var St=pt.lastEffect;null!==St?(St.nextEffect=ut,pt.lastEffect=ut):pt.firstEffect=pt.lastEffect=ut,ut.nextEffect=null,ut.effectTag=8}}function w(pt,ut){if(!u)return null;for(;null!==ut;)p(pt,ut),ut=ut.sibling;return null}function H(pt,ut){for(pt=new Map;null!==ut;)pt.set(null!==ut.key?ut.key:ut.index,ut),ut=ut.sibling;return pt}function re(pt,ut){return(pt=Nl(pt,ut)).index=0,pt.sibling=null,pt}function Ee(pt,ut,St){return pt.index=St,u?null!==(St=pt.alternate)?(St=St.index)<ut?(pt.effectTag=2,ut):St:(pt.effectTag=2,ut):ut}function Fe(pt){return u&&null===pt.alternate&&(pt.effectTag=2),pt}function We(pt,ut,St,Ot){return null===ut||6!==ut.tag?((ut=Bm(St,pt.mode,Ot)).return=pt,ut):((ut=re(ut,St)).return=pt,ut)}function xt(pt,ut,St,Ot){return null!==ut&&ut.elementType===St.type?((Ot=re(ut,St.props)).ref=so(pt,ut,St),Ot.return=pt,Ot):((Ot=sd(St.type,St.key,St.props,null,pt.mode,Ot)).ref=so(pt,ut,St),Ot.return=pt,Ot)}function bt(pt,ut,St,Ot){return null===ut||4!==ut.tag||ut.stateNode.containerInfo!==St.containerInfo||ut.stateNode.implementation!==St.implementation?((ut=Gi(St,pt.mode,Ot)).return=pt,ut):((ut=re(ut,St.children||[])).return=pt,ut)}function Ut(pt,ut,St,Ot,jt){return null===ut||7!==ut.tag?((ut=gs(St,pt.mode,Ot,jt)).return=pt,ut):((ut=re(ut,St)).return=pt,ut)}function Yt(pt,ut,St){if("string"==typeof ut||"number"==typeof ut)return(ut=Bm(""+ut,pt.mode,St)).return=pt,ut;if("object"==typeof ut&&null!==ut){switch(ut.$$typeof){case je:return(St=sd(ut.type,ut.key,ut.props,null,pt.mode,St)).ref=so(pt,null,ut),St.return=pt,St;case tt:return(ut=Gi(ut,pt.mode,St)).return=pt,ut}if(Ho(ut)||En(ut))return(ut=gs(ut,pt.mode,St,null)).return=pt,ut;Mu(pt,ut)}return null}function Mn(pt,ut,St,Ot){var jt=null!==ut?ut.key:null;if("string"==typeof St||"number"==typeof St)return null!==jt?null:We(pt,ut,""+St,Ot);if("object"==typeof St&&null!==St){switch(St.$$typeof){case je:return St.key===jt?St.type===ot?Ut(pt,ut,St.props.children,Ot,jt):xt(pt,ut,St,Ot):null;case tt:return St.key===jt?bt(pt,ut,St,Ot):null}if(Ho(St)||En(St))return null!==jt?null:Ut(pt,ut,St,Ot,null);Mu(pt,St)}return null}function Un(pt,ut,St,Ot,jt){if("string"==typeof Ot||"number"==typeof Ot)return We(ut,pt=pt.get(St)||null,""+Ot,jt);if("object"==typeof Ot&&null!==Ot){switch(Ot.$$typeof){case je:return pt=pt.get(null===Ot.key?St:Ot.key)||null,Ot.type===ot?Ut(ut,pt,Ot.props.children,jt,Ot.key):xt(ut,pt,Ot,jt);case tt:return bt(ut,pt=pt.get(null===Ot.key?St:Ot.key)||null,Ot,jt)}if(Ho(Ot)||En(Ot))return Ut(ut,pt=pt.get(St)||null,Ot,jt,null);Mu(ut,Ot)}return null}return function(pt,ut,St,Ot){var jt="object"==typeof St&&null!==St&&St.type===ot&&null===St.key;jt&&(St=St.props.children);var Qt="object"==typeof St&&null!==St;if(Qt)switch(St.$$typeof){case je:e:{for(Qt=St.key,jt=ut;null!==jt;){if(jt.key===Qt){if(7===jt.tag){if(St.type===ot){w(pt,jt.sibling),(ut=re(jt,St.props.children)).return=pt,pt=ut;break e}}else if(jt.elementType===St.type){w(pt,jt.sibling),(ut=re(jt,St.props)).ref=so(pt,jt,St),ut.return=pt,pt=ut;break e}w(pt,jt);break}p(pt,jt),jt=jt.sibling}St.type===ot?((ut=gs(St.props.children,pt.mode,Ot,St.key)).return=pt,pt=ut):((Ot=sd(St.type,St.key,St.props,null,pt.mode,Ot)).ref=so(pt,ut,St),Ot.return=pt,pt=Ot)}return Fe(pt);case tt:e:{for(jt=St.key;null!==ut;){if(ut.key===jt){if(4===ut.tag&&ut.stateNode.containerInfo===St.containerInfo&&ut.stateNode.implementation===St.implementation){w(pt,ut.sibling),(ut=re(ut,St.children||[])).return=pt,pt=ut;break e}w(pt,ut);break}p(pt,ut),ut=ut.sibling}(ut=Gi(St,pt.mode,Ot)).return=pt,pt=ut}return Fe(pt)}if("string"==typeof St||"number"==typeof St)return St=""+St,null!==ut&&6===ut.tag?(w(pt,ut.sibling),(ut=re(ut,St)).return=pt,pt=ut):(w(pt,ut),(ut=Bm(St,pt.mode,Ot)).return=pt,pt=ut),Fe(pt);if(Ho(St))return function ko(pt,ut,St,Ot){for(var jt=null,Qt=null,un=ut,Vn=ut=0,wi=null;null!==un&&Vn<St.length;Vn++){un.index>Vn?(wi=un,un=null):wi=un.sibling;var bn=Mn(pt,un,St[Vn],Ot);if(null===bn){null===un&&(un=wi);break}u&&un&&null===bn.alternate&&p(pt,un),ut=Ee(bn,ut,Vn),null===Qt?jt=bn:Qt.sibling=bn,Qt=bn,un=wi}if(Vn===St.length)return w(pt,un),jt;if(null===un){for(;Vn<St.length;Vn++)null!==(un=Yt(pt,St[Vn],Ot))&&(ut=Ee(un,ut,Vn),null===Qt?jt=un:Qt.sibling=un,Qt=un);return jt}for(un=H(pt,un);Vn<St.length;Vn++)null!==(wi=Un(un,pt,Vn,St[Vn],Ot))&&(u&&null!==wi.alternate&&un.delete(null===wi.key?Vn:wi.key),ut=Ee(wi,ut,Vn),null===Qt?jt=wi:Qt.sibling=wi,Qt=wi);return u&&un.forEach(function(ys){return p(pt,ys)}),jt}(pt,ut,St,Ot);if(En(St))return function gr(pt,ut,St,Ot){var jt=En(St);if("function"!=typeof jt)throw Error(j(150));if(null==(St=jt.call(St)))throw Error(j(151));for(var Qt=jt=null,un=ut,Vn=ut=0,wi=null,bn=St.next();null!==un&&!bn.done;Vn++,bn=St.next()){un.index>Vn?(wi=un,un=null):wi=un.sibling;var ys=Mn(pt,un,bn.value,Ot);if(null===ys){null===un&&(un=wi);break}u&&un&&null===ys.alternate&&p(pt,un),ut=Ee(ys,ut,Vn),null===Qt?jt=ys:Qt.sibling=ys,Qt=ys,un=wi}if(bn.done)return w(pt,un),jt;if(null===un){for(;!bn.done;Vn++,bn=St.next())null!==(bn=Yt(pt,bn.value,Ot))&&(ut=Ee(bn,ut,Vn),null===Qt?jt=bn:Qt.sibling=bn,Qt=bn);return jt}for(un=H(pt,un);!bn.done;Vn++,bn=St.next())null!==(bn=Un(un,pt,Vn,bn.value,Ot))&&(u&&null!==bn.alternate&&un.delete(null===bn.key?Vn:bn.key),ut=Ee(bn,ut,Vn),null===Qt?jt=bn:Qt.sibling=bn,Qt=bn);return u&&un.forEach(function(Vm){return p(pt,Vm)}),jt}(pt,ut,St,Ot);if(Qt&&Mu(pt,St),void 0===St&&!jt)switch(pt.tag){case 1:case 0:throw pt=pt.type,Error(j(152,pt.displayName||pt.name||"Component"))}return w(pt,ut)}}var Al=wm(!0),kf=wm(!1),Sc={},ua={current:Sc},Ec={current:Sc},Tc={current:Sc};function Bs(u){if(u===Sc)throw Error(j(174));return u}function If(u,p){switch(Oi(Tc,p),Oi(Ec,u),Oi(ua,Sc),u=p.nodeType){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:oi(null,"");break;default:p=oi(p=(u=8===u?p.parentNode:p).namespaceURI||null,u=u.tagName)}xi(ua),Oi(ua,p)}function us(){xi(ua),xi(Ec),xi(Tc)}function Pf(u){Bs(Tc.current);var p=Bs(ua.current),w=oi(p,u.type);p!==w&&(Oi(Ec,u),Oi(ua,w))}function kl(u){Ec.current===u&&(xi(ua),xi(Ec))}var bi={current:0};function Ac(u){for(var p=u;null!==p;){if(13===p.tag){var w=p.memoizedState;if(null!==w&&(null===(w=w.dehydrated)||"$?"===w.data||"$!"===w.data))return p}else if(19===p.tag&&void 0!==p.memoizedProps.revealOrder){if(0!=(64&p.effectTag))return p}else if(null!==p.child){p.child.return=p,p=p.child;continue}if(p===u)break;for(;null===p.sibling;){if(null===p.return||p.return===u)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function Lu(u,p){return{responder:u,props:p}}var kc=q.ReactCurrentDispatcher,lo=q.ReactCurrentBatchConfig,qo=0,Ji=null,Tr=null,rr=null,Ic=!1;function To(){throw Error(j(321))}function Nu(u,p){if(null===p)return!1;for(var w=0;w<p.length&&w<u.length;w++)if(!Ms(u[w],p[w]))return!1;return!0}function Ff(u,p,w,H,re,Ee){if(qo=Ee,Ji=p,p.memoizedState=null,p.updateQueue=null,p.expirationTime=0,kc.current=null===u||null===u.memoizedState?py:my,u=w(H,re),p.expirationTime===qo){Ee=0;do{if(p.expirationTime=0,!(25>Ee))throw Error(j(301));Ee+=1,rr=Tr=null,p.updateQueue=null,kc.current=gy,u=w(H,re)}while(p.expirationTime===qo)}if(kc.current=zu,p=null!==Tr&&null!==Tr.next,qo=0,rr=Tr=Ji=null,Ic=!1,p)throw Error(j(300));return u}function Xo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===rr?Ji.memoizedState=rr=u:rr=rr.next=u,rr}function js(){if(null===Tr){var u=Ji.alternate;u=null!==u?u.memoizedState:null}else u=Tr.next;var p=null===rr?Ji.memoizedState:rr.next;if(null!==p)rr=p,Tr=u;else{if(null===u)throw Error(j(310));u={memoizedState:(Tr=u).memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},null===rr?Ji.memoizedState=rr=u:rr=rr.next=u}return rr}function zs(u,p){return"function"==typeof p?p(u):p}function Bu(u){var p=js(),w=p.queue;if(null===w)throw Error(j(311));w.lastRenderedReducer=u;var H=Tr,re=H.baseQueue,Ee=w.pending;if(null!==Ee){if(null!==re){var Fe=re.next;re.next=Ee.next,Ee.next=Fe}H.baseQueue=re=Ee,w.pending=null}if(null!==re){H=H.baseState;var We=Fe=Ee=null,xt=re=re.next;do{var bt=xt.expirationTime;if(bt<qo){var Ut={expirationTime:xt.expirationTime,suspenseConfig:xt.suspenseConfig,action:xt.action,eagerReducer:xt.eagerReducer,eagerState:xt.eagerState,next:null};null===We?(Fe=We=Ut,Ee=H):We=We.next=Ut,bt>Ji.expirationTime&&(Ji.expirationTime=bt,rd(bt))}else null!==We&&(We=We.next={expirationTime:1073741823,suspenseConfig:xt.suspenseConfig,action:xt.action,eagerReducer:xt.eagerReducer,eagerState:xt.eagerState,next:null}),Lm(bt,xt.suspenseConfig),H=xt.eagerReducer===u?xt.eagerState:u(H,xt.action);xt=xt.next}while(null!==xt&&xt!==re);null===We?Ee=H:We.next=Fe,Ms(H,p.memoizedState)||(jr=!0),p.memoizedState=H,p.baseState=Ee,p.baseQueue=We,w.lastRenderedState=H}return[p.memoizedState,w.dispatch]}function Rf(u){var p=js(),w=p.queue;if(null===w)throw Error(j(311));w.lastRenderedReducer=u;var H=w.dispatch,re=w.pending,Ee=p.memoizedState;if(null!==re){w.pending=null;var Fe=re=re.next;do{Ee=u(Ee,Fe.action),Fe=Fe.next}while(Fe!==re);Ms(Ee,p.memoizedState)||(jr=!0),p.memoizedState=Ee,null===p.baseQueue&&(p.baseState=Ee),w.lastRenderedState=Ee}return[Ee,H]}function Sm(u){var p=Xo();return"function"==typeof u&&(u=u()),p.memoizedState=p.baseState=u,u=(u=p.queue={pending:null,dispatch:null,lastRenderedReducer:zs,lastRenderedState:u}).dispatch=Am.bind(null,Ji,u),[p.memoizedState,u]}function Ma(u,p,w,H){return u={tag:u,create:p,destroy:w,deps:H,next:null},null===(p=Ji.updateQueue)?(Ji.updateQueue=p={lastEffect:null},p.lastEffect=u.next=u):null===(w=p.lastEffect)?p.lastEffect=u.next=u:(H=w.next,w.next=u,u.next=H,p.lastEffect=u),u}function Df(){return js().memoizedState}function Us(u,p,w,H){var re=Xo();Ji.effectTag|=u,re.memoizedState=Ma(1|p,w,void 0,void 0===H?null:H)}function ju(u,p,w,H){var re=js();H=void 0===H?null:H;var Ee=void 0;if(null!==Tr){var Fe=Tr.memoizedState;if(Ee=Fe.destroy,null!==H&&Nu(H,Fe.deps))return void Ma(p,w,Ee,H)}Ji.effectTag|=u,re.memoizedState=Ma(1|p,w,Ee,H)}function Of(u,p){return Us(516,4,u,p)}function Vs(u,p){return ju(516,4,u,p)}function Pc(u,p){return ju(4,2,u,p)}function hr(u,p){return"function"==typeof p?(u=u(),p(u),function(){p(null)}):null!=p?(u=u(),p.current=u,function(){p.current=null}):void 0}function Em(u,p,w){return w=null!=w?w.concat([u]):null,ju(4,2,hr.bind(null,p,u),w)}function Tm(){}function Mf(u,p){return Xo().memoizedState=[u,void 0===p?null:p],u}function yi(u,p){var w=js();p=void 0===p?null:p;var H=w.memoizedState;return null!==H&&null!==p&&Nu(p,H[1])?H[0]:(w.memoizedState=[u,p],u)}function si(u,p){var w=js();p=void 0===p?null:p;var H=w.memoizedState;return null!==H&&null!==p&&Nu(p,H[1])?H[0]:(u=u(),w.memoizedState=[u,p],u)}function Lf(u,p,w){var H=sn();Er(98>H?98:H,function(){u(!0)}),Er(97<H?97:H,function(){var re=lo.suspense;lo.suspense=void 0===p?null:p;try{u(!1),w()}finally{lo.suspense=re}})}function Am(u,p,w){var H=qr(),re=Tl.suspense;re={expirationTime:H=Xs(H,u,re),suspenseConfig:re,action:w,eagerReducer:null,eagerState:null,next:null};var Ee=p.pending;if(null===Ee?re.next=re:(re.next=Ee.next,Ee.next=re),p.pending=re,Ee=u.alternate,u===Ji||null!==Ee&&Ee===Ji)Ic=!0,re.expirationTime=qo,Ji.expirationTime=qo;else{if(0===u.expirationTime&&(null===Ee||0===Ee.expirationTime)&&null!==(Ee=p.lastRenderedReducer))try{var Fe=p.lastRenderedState,We=Ee(Fe,w);if(re.eagerReducer=Ee,re.eagerState=We,Ms(We,Fe))return}catch{}Ws(u,H)}}var zu={readContext:Eo,useCallback:To,useContext:To,useEffect:To,useImperativeHandle:To,useLayoutEffect:To,useMemo:To,useReducer:To,useRef:To,useState:To,useDebugValue:To,useResponder:To,useDeferredValue:To,useTransition:To},py={readContext:Eo,useCallback:Mf,useContext:Eo,useEffect:Of,useImperativeHandle:function(u,p,w){return w=null!=w?w.concat([u]):null,Us(4,2,hr.bind(null,p,u),w)},useLayoutEffect:function(u,p){return Us(4,2,u,p)},useMemo:function(u,p){var w=Xo();return p=void 0===p?null:p,u=u(),w.memoizedState=[u,p],u},useReducer:function(u,p,w){var H=Xo();return p=void 0!==w?w(p):p,H.memoizedState=H.baseState=p,u=(u=H.queue={pending:null,dispatch:null,lastRenderedReducer:u,lastRenderedState:p}).dispatch=Am.bind(null,Ji,u),[H.memoizedState,u]},useRef:function(u){return Xo().memoizedState={current:u}},useState:Sm,useDebugValue:Tm,useResponder:Lu,useDeferredValue:function(u,p){var w=Sm(u),H=w[0],re=w[1];return Of(function(){var Ee=lo.suspense;lo.suspense=void 0===p?null:p;try{re(u)}finally{lo.suspense=Ee}},[u,p]),H},useTransition:function(u){var p=Sm(!1),w=p[0];return[Mf(Lf.bind(null,p=p[1],u),[p,u]),w]}},my={readContext:Eo,useCallback:yi,useContext:Eo,useEffect:Vs,useImperativeHandle:Em,useLayoutEffect:Pc,useMemo:si,useReducer:Bu,useRef:Df,useState:function(){return Bu(zs)},useDebugValue:Tm,useResponder:Lu,useDeferredValue:function(u,p){var w=Bu(zs),H=w[0],re=w[1];return Vs(function(){var Ee=lo.suspense;lo.suspense=void 0===p?null:p;try{re(u)}finally{lo.suspense=Ee}},[u,p]),H},useTransition:function(u){var p=Bu(zs),w=p[0];return[yi(Lf.bind(null,p=p[1],u),[p,u]),w]}},gy={readContext:Eo,useCallback:yi,useContext:Eo,useEffect:Vs,useImperativeHandle:Em,useLayoutEffect:Pc,useMemo:si,useReducer:Rf,useRef:Df,useState:function(){return Rf(zs)},useDebugValue:Tm,useResponder:Lu,useDeferredValue:function(u,p){var w=Rf(zs),H=w[0],re=w[1];return Vs(function(){var Ee=lo.suspense;lo.suspense=void 0===p?null:p;try{re(u)}finally{lo.suspense=Ee}},[u,p]),H},useTransition:function(u){var p=Rf(zs),w=p[0];return[yi(Lf.bind(null,p=p[1],u),[p,u]),w]}},La=null,ds=null,Na=!1;function Tt(u,p){var w=mr(5,null,null,0);w.elementType="DELETED",w.type="DELETED",w.stateNode=p,w.return=u,w.effectTag=8,null!==u.lastEffect?(u.lastEffect.nextEffect=w,u.lastEffect=w):u.firstEffect=u.lastEffect=w}function Uu(u,p){switch(u.tag){case 5:return null!==(p=1!==p.nodeType||u.type.toLowerCase()!==p.nodeName.toLowerCase()?null:p)&&(u.stateNode=p,!0);case 6:return null!==(p=""===u.pendingProps||3!==p.nodeType?null:p)&&(u.stateNode=p,!0);default:return!1}}function Fc(u){if(Na){var p=ds;if(p){var w=p;if(!Uu(u,p)){if(!(p=_l(w.nextSibling))||!Uu(u,p))return u.effectTag=-1025&u.effectTag|2,Na=!1,void(La=u);Tt(La,w)}La=u,ds=_l(p.firstChild)}else u.effectTag=-1025&u.effectTag|2,Na=!1,La=u}}function km(u){for(u=u.return;null!==u&&5!==u.tag&&3!==u.tag&&13!==u.tag;)u=u.return;La=u}function Rc(u){if(u!==La)return!1;if(!Na)return km(u),Na=!0,!1;var p=u.type;if(5!==u.tag||"head"!==p&&"body"!==p&&!df(p,u.memoizedProps))for(p=ds;p;)Tt(u,p),p=_l(p.nextSibling);if(km(u),13===u.tag){if(!(u=null!==(u=u.memoizedState)?u.dehydrated:null))throw Error(j(317));e:{for(u=u.nextSibling,p=0;u;){if(8===u.nodeType){var w=u.data;if("/$"===w){if(0===p){ds=_l(u.nextSibling);break e}p--}else"$"!==w&&"$!"!==w&&"$?"!==w||p++}u=u.nextSibling}ds=null}}else ds=La?_l(u.stateNode.nextSibling):null;return!0}function fs(){ds=La=null,Na=!1}var vy=q.ReactCurrentOwner,jr=!1;function Ar(u,p,w,H){p.child=null===u?kf(p,null,w,H):Al(p,u.child,w,H)}function Vu(u,p,w,H,re){w=w.render;var Ee=p.ref;return Ns(p,re),H=Ff(u,p,w,H,Ee,re),null===u||jr?(p.effectTag|=1,Ar(u,p,H,re),p.child):(p.updateQueue=u.updateQueue,p.effectTag&=-517,u.expirationTime<=re&&(u.expirationTime=0),Hr(u,p,re))}function Il(u,p,w,H,re,Ee){if(null===u){var Fe=w.type;return"function"!=typeof Fe||hh(Fe)||void 0!==Fe.defaultProps||null!==w.compare||void 0!==w.defaultProps?((u=sd(w.type,null,H,null,p.mode,Ee)).ref=p.ref,u.return=p,p.child=u):(p.tag=15,p.type=Fe,yy(u,p,Fe,H,re,Ee))}return Fe=u.child,re<Ee&&(w=null!==(w=w.compare)?w:bc)(re=Fe.memoizedProps,H)&&u.ref===p.ref?Hr(u,p,Ee):(p.effectTag|=1,(u=Nl(Fe,H)).ref=p.ref,u.return=p,p.child=u)}function yy(u,p,w,H,re,Ee){return null!==u&&bc(u.memoizedProps,H)&&u.ref===p.ref&&(jr=!1,re<Ee)?(p.expirationTime=u.expirationTime,Hr(u,p,Ee)):Gu(u,p,w,H,Ee)}function Nf(u,p){var w=p.ref;(null===u&&null!==w||null!==u&&u.ref!==w)&&(p.effectTag|=128)}function Gu(u,p,w,H,re){var Ee=Gr(w)?Ci:Sr.current;return Ee=as(p,Ee),Ns(p,re),w=Ff(u,p,w,H,Ee,re),null===u||jr?(p.effectTag|=1,Ar(u,p,w,re),p.child):(p.updateQueue=u.updateQueue,p.effectTag&=-517,u.expirationTime<=re&&(u.expirationTime=0),Hr(u,p,re))}function Bf(u,p,w,H,re){if(Gr(w)){var Ee=!0;zn(p)}else Ee=!1;if(Ns(p,re),null===p.stateNode)null!==u&&(u.alternate=null,p.alternate=null,p.effectTag|=2),bm(p,w,H),Ou(p,w,H,re),H=!0;else if(null===u){var Fe=p.stateNode,We=p.memoizedProps;Fe.props=We;var xt=Fe.context,bt=w.contextType;bt="object"==typeof bt&&null!==bt?Eo(bt):as(p,bt=Gr(w)?Ci:Sr.current);var Ut=w.getDerivedStateFromProps,Yt="function"==typeof Ut||"function"==typeof Fe.getSnapshotBeforeUpdate;Yt||"function"!=typeof Fe.UNSAFE_componentWillReceiveProps&&"function"!=typeof Fe.componentWillReceiveProps||(We!==H||xt!==bt)&&Cm(p,Fe,H,bt),Oa=!1;var Mn=p.memoizedState;Fe.state=Mn,Ru(p,H,Fe,re),xt=p.memoizedState,We!==H||Mn!==xt||Vr.current||Oa?("function"==typeof Ut&&(Du(p,w,Ut,H),xt=p.memoizedState),(We=Oa||Af(p,w,We,H,Mn,xt,bt))?(Yt||"function"!=typeof Fe.UNSAFE_componentWillMount&&"function"!=typeof Fe.componentWillMount||("function"==typeof Fe.componentWillMount&&Fe.componentWillMount(),"function"==typeof Fe.UNSAFE_componentWillMount&&Fe.UNSAFE_componentWillMount()),"function"==typeof Fe.componentDidMount&&(p.effectTag|=4)):("function"==typeof Fe.componentDidMount&&(p.effectTag|=4),p.memoizedProps=H,p.memoizedState=xt),Fe.props=H,Fe.state=xt,Fe.context=bt,H=We):("function"==typeof Fe.componentDidMount&&(p.effectTag|=4),H=!1)}else Fe=p.stateNode,Br(u,p),We=p.memoizedProps,Fe.props=p.type===p.elementType?We:$o(p.type,We),xt=Fe.context,bt="object"==typeof(bt=w.contextType)&&null!==bt?Eo(bt):as(p,bt=Gr(w)?Ci:Sr.current),(Yt="function"==typeof(Ut=w.getDerivedStateFromProps)||"function"==typeof Fe.getSnapshotBeforeUpdate)||"function"!=typeof Fe.UNSAFE_componentWillReceiveProps&&"function"!=typeof Fe.componentWillReceiveProps||(We!==H||xt!==bt)&&Cm(p,Fe,H,bt),Oa=!1,Fe.state=xt=p.memoizedState,Ru(p,H,Fe,re),Mn=p.memoizedState,We!==H||xt!==Mn||Vr.current||Oa?("function"==typeof Ut&&(Du(p,w,Ut,H),Mn=p.memoizedState),(Ut=Oa||Af(p,w,We,H,xt,Mn,bt))?(Yt||"function"!=typeof Fe.UNSAFE_componentWillUpdate&&"function"!=typeof Fe.componentWillUpdate||("function"==typeof Fe.componentWillUpdate&&Fe.componentWillUpdate(H,Mn,bt),"function"==typeof Fe.UNSAFE_componentWillUpdate&&Fe.UNSAFE_componentWillUpdate(H,Mn,bt)),"function"==typeof Fe.componentDidUpdate&&(p.effectTag|=4),"function"==typeof Fe.getSnapshotBeforeUpdate&&(p.effectTag|=256)):("function"!=typeof Fe.componentDidUpdate||We===u.memoizedProps&&xt===u.memoizedState||(p.effectTag|=4),"function"!=typeof Fe.getSnapshotBeforeUpdate||We===u.memoizedProps&&xt===u.memoizedState||(p.effectTag|=256),p.memoizedProps=H,p.memoizedState=Mn),Fe.props=H,Fe.state=Mn,Fe.context=bt,H=Ut):("function"!=typeof Fe.componentDidUpdate||We===u.memoizedProps&&xt===u.memoizedState||(p.effectTag|=4),"function"!=typeof Fe.getSnapshotBeforeUpdate||We===u.memoizedProps&&xt===u.memoizedState||(p.effectTag|=256),H=!1);return jf(u,p,w,H,Ee,re)}function jf(u,p,w,H,re,Ee){Nf(u,p);var Fe=0!=(64&p.effectTag);if(!H&&!Fe)return re&&ui(p,w,!1),Hr(u,p,Ee);H=p.stateNode,vy.current=p;var We=Fe&&"function"!=typeof w.getDerivedStateFromError?null:H.render();return p.effectTag|=1,null!==u&&Fe?(p.child=Al(p,u.child,null,Ee),p.child=Al(p,null,We,Ee)):Ar(u,p,We,Ee),p.memoizedState=H.state,re&&ui(p,w,!0),p.child}function zf(u){var p=u.stateNode;p.pendingContext?hm(0,p.pendingContext,p.pendingContext!==p.context):p.context&&hm(0,p.context,!1),If(u,p.containerInfo)}var $f,qf,Hu,Uf={dehydrated:null,retryTime:0};function Vf(u,p,w){var We,H=p.mode,re=p.pendingProps,Ee=bi.current,Fe=!1;if((We=0!=(64&p.effectTag))||(We=0!=(2&Ee)&&(null===u||null!==u.memoizedState)),We?(Fe=!0,p.effectTag&=-65):null!==u&&null===u.memoizedState||void 0===re.fallback||!0===re.unstable_avoidThisFallback||(Ee|=1),Oi(bi,1&Ee),null===u){if(void 0!==re.fallback&&Fc(p),Fe){if(Fe=re.fallback,(re=gs(null,H,0,null)).return=p,0==(2&p.mode))for(re.child=u=null!==p.memoizedState?p.child.child:p.child;null!==u;)u.return=re,u=u.sibling;return(w=gs(Fe,H,w,null)).return=p,re.sibling=w,p.memoizedState=Uf,p.child=re,w}return H=re.children,p.memoizedState=null,p.child=kf(p,null,H,w)}if(null!==u.memoizedState){if(H=(u=u.child).sibling,Fe){if(re=re.fallback,(w=Nl(u,u.pendingProps)).return=p,0==(2&p.mode)&&(Fe=null!==p.memoizedState?p.child.child:p.child)!==u.child)for(w.child=Fe;null!==Fe;)Fe.return=w,Fe=Fe.sibling;return(H=Nl(H,re)).return=p,w.sibling=H,w.childExpirationTime=0,p.memoizedState=Uf,p.child=w,H}return w=Al(p,u.child,re.children,w),p.memoizedState=null,p.child=w}if(u=u.child,Fe){if(Fe=re.fallback,(re=gs(null,H,0,null)).return=p,re.child=u,null!==u&&(u.return=re),0==(2&p.mode))for(re.child=u=null!==p.memoizedState?p.child.child:p.child;null!==u;)u.return=re,u=u.sibling;return(w=gs(Fe,H,w,null)).return=p,re.sibling=w,w.effectTag|=2,re.childExpirationTime=0,p.memoizedState=Uf,p.child=re,w}return p.memoizedState=null,p.child=Al(p,u,re.children,w)}function pr(u,p){u.expirationTime<p&&(u.expirationTime=p);var w=u.alternate;null!==w&&w.expirationTime<p&&(w.expirationTime=p),Ef(u.return,p)}function $u(u,p,w,H,re,Ee){var Fe=u.memoizedState;null===Fe?u.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:H,tail:w,tailExpiration:0,tailMode:re,lastEffect:Ee}:(Fe.isBackwards=p,Fe.rendering=null,Fe.renderingStartTime=0,Fe.last=H,Fe.tail=w,Fe.tailExpiration=0,Fe.tailMode=re,Fe.lastEffect=Ee)}function Gf(u,p,w){var H=p.pendingProps,re=H.revealOrder,Ee=H.tail;if(Ar(u,p,H.children,w),0!=(2&(H=bi.current)))H=1&H|2,p.effectTag|=64;else{if(null!==u&&0!=(64&u.effectTag))e:for(u=p.child;null!==u;){if(13===u.tag)null!==u.memoizedState&&pr(u,w);else if(19===u.tag)pr(u,w);else if(null!==u.child){u.child.return=u,u=u.child;continue}if(u===p)break e;for(;null===u.sibling;){if(null===u.return||u.return===p)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}H&=1}if(Oi(bi,H),0==(2&p.mode))p.memoizedState=null;else switch(re){case"forwards":for(w=p.child,re=null;null!==w;)null!==(u=w.alternate)&&null===Ac(u)&&(re=w),w=w.sibling;null===(w=re)?(re=p.child,p.child=null):(re=w.sibling,w.sibling=null),$u(p,!1,re,w,Ee,p.lastEffect);break;case"backwards":for(w=null,re=p.child,p.child=null;null!==re;){if(null!==(u=re.alternate)&&null===Ac(u)){p.child=re;break}u=re.sibling,re.sibling=w,w=re,re=u}$u(p,!0,w,null,Ee,p.lastEffect);break;case"together":$u(p,!1,null,null,void 0,p.lastEffect);break;default:p.memoizedState=null}return p.child}function Hr(u,p,w){null!==u&&(p.dependencies=u.dependencies);var H=p.expirationTime;if(0!==H&&rd(H),p.childExpirationTime<w)return null;if(null!==u&&p.child!==u.child)throw Error(j(153));if(null!==p.child){for(w=Nl(u=p.child,u.pendingProps),p.child=w,w.return=p;null!==u.sibling;)(w=w.sibling=Nl(u=u.sibling,u.pendingProps)).return=p;w.sibling=null}return p.child}function Pl(u,p){switch(u.tailMode){case"hidden":p=u.tail;for(var w=null;null!==p;)null!==p.alternate&&(w=p),p=p.sibling;null===w?u.tail=null:w.sibling=null;break;case"collapsed":w=u.tail;for(var H=null;null!==w;)null!==w.alternate&&(H=w),w=w.sibling;null===H?p||null===u.tail?u.tail=null:u.tail.sibling=null:H.sibling=null}}function _y(u,p,w){var H=p.pendingProps;switch(p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Gr(p.type)&&Iu(),null;case 3:return us(),xi(Vr),xi(Sr),(w=p.stateNode).pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),null!==u&&null!==u.child||!Rc(p)||(p.effectTag|=4),null;case 5:kl(p),w=Bs(Tc.current);var re=p.type;if(null!==u&&null!=p.stateNode)qf(u,p,re,H,w),u.ref!==p.ref&&(p.effectTag|=128);else{if(!H){if(null===p.stateNode)throw Error(j(166));return null}if(u=Bs(ua.current),Rc(p)){re=p.type;var Ee=p.memoizedProps;switch((H=p.stateNode)[ns]=p,H[yu]=Ee,re){case"iframe":case"object":case"embed":ii("load",H);break;case"video":case"audio":for(u=0;u<aa.length;u++)ii(aa[u],H);break;case"source":ii("error",H);break;case"img":case"image":case"link":ii("error",H),ii("load",H);break;case"form":ii("reset",H),ii("submit",H);break;case"details":ii("toggle",H);break;case"input":Wi(H,Ee),ii("invalid",H),Aa(w,"onChange");break;case"select":H._wrapperState={wasMultiple:!!Ee.multiple},ii("invalid",H),Aa(w,"onChange");break;case"textarea":oa(H,Ee),ii("invalid",H),Aa(w,"onChange")}for(var Fe in uc(re,Ee),u=null,Ee)if(Ee.hasOwnProperty(Fe)){var We=Ee[Fe];"children"===Fe?"string"==typeof We?H.textContent!==We&&(u=["children",We]):"number"==typeof We&&H.textContent!==""+We&&(u=["children",""+We]):me.hasOwnProperty(Fe)&&null!=We&&Aa(w,Fe)}switch(re){case"input":Pi(H),Mr(H,Ee,!0);break;case"textarea":Pi(H),Bo(H);break;case"select":case"option":break;default:"function"==typeof Ee.onClick&&(H.onclick=mu)}p.updateQueue=w=u,null!==w&&(p.effectTag|=4)}else{switch(Fe=9===w.nodeType?w:w.ownerDocument,u===fc&&(u=_o(re)),u===fc?"script"===re?((u=Fe.createElement("div")).innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):"string"==typeof H.is?u=Fe.createElement(re,{is:H.is}):(u=Fe.createElement(re),"select"===re&&(Fe=u,H.multiple?Fe.multiple=!0:H.size&&(Fe.size=H.size))):u=Fe.createElementNS(u,re),u[ns]=p,u[yu]=H,$f(u,p),p.stateNode=u,Fe=dc(re,H),re){case"iframe":case"object":case"embed":ii("load",u),We=H;break;case"video":case"audio":for(We=0;We<aa.length;We++)ii(aa[We],u);We=H;break;case"source":ii("error",u),We=H;break;case"img":case"image":case"link":ii("error",u),ii("load",u),We=H;break;case"form":ii("reset",u),ii("submit",u),We=H;break;case"details":ii("toggle",u),We=H;break;case"input":Wi(u,H),We=ni(u,H),ii("invalid",u),Aa(w,"onChange");break;case"option":We=Ur(u,H);break;case"select":u._wrapperState={wasMultiple:!!H.multiple},We=x({},H,{value:void 0}),ii("invalid",u),Aa(w,"onChange");break;case"textarea":oa(u,H),We=io(u,H),ii("invalid",u),Aa(w,"onChange");break;default:We=H}uc(re,We);var xt=We;for(Ee in xt)if(xt.hasOwnProperty(Ee)){var bt=xt[Ee];"style"===Ee?sa(u,bt):"dangerouslySetInnerHTML"===Ee?null!=(bt=bt?bt.__html:void 0)&&Cr(u,bt):"children"===Ee?"string"==typeof bt?("textarea"!==re||""!==bt)&&Nr(u,bt):"number"==typeof bt&&Nr(u,""+bt):"suppressContentEditableWarning"!==Ee&&"suppressHydrationWarning"!==Ee&&"autoFocus"!==Ee&&(me.hasOwnProperty(Ee)?null!=bt&&Aa(w,Ee):null!=bt&&D(u,Ee,bt,Fe))}switch(re){case"input":Pi(u),Mr(u,H,!1);break;case"textarea":Pi(u),Bo(u);break;case"option":null!=H.value&&u.setAttribute("value",""+Vi(H.value));break;case"select":u.multiple=!!H.multiple,null!=(w=H.value)?Lr(u,!!H.multiple,w,!1):null!=H.defaultValue&&Lr(u,!!H.multiple,H.defaultValue,!0);break;default:"function"==typeof We.onClick&&(u.onclick=mu)}Vp(re,H)&&(p.effectTag|=4)}null!==p.ref&&(p.effectTag|=128)}return null;case 6:if(u&&null!=p.stateNode)Hu(0,p,u.memoizedProps,H);else{if("string"!=typeof H&&null===p.stateNode)throw Error(j(166));w=Bs(Tc.current),Bs(ua.current),Rc(p)?(H=p.memoizedProps,(w=p.stateNode)[ns]=p,w.nodeValue!==H&&(p.effectTag|=4)):((w=(9===w.nodeType?w:w.ownerDocument).createTextNode(H))[ns]=p,p.stateNode=w)}return null;case 13:return xi(bi),H=p.memoizedState,0!=(64&p.effectTag)?(p.expirationTime=w,p):(w=null!==H,H=!1,null===u?void 0!==p.memoizedProps.fallback&&Rc(p):(H=null!==(re=u.memoizedState),w||null===re||null!==(re=u.child.sibling)&&(null!==(Ee=p.firstEffect)?(p.firstEffect=re,re.nextEffect=Ee):(p.firstEffect=p.lastEffect=re,re.nextEffect=null),re.effectTag=8)),w&&!H&&0!=(2&p.mode)&&(null===u&&!0!==p.memoizedProps.unstable_avoidThisFallback||0!=(1&bi.current)?or===hs&&(or=Wu):((or===hs||or===Wu)&&(or=Ku),0!==$s&&null!==Ao&&(vs(Ao,co),jm(Ao,$s)))),(w||H)&&(p.effectTag|=4),null);case 4:return us(),null;case 10:return Sf(p),null;case 19:if(xi(bi),null===(H=p.memoizedState))return null;if(re=0!=(64&p.effectTag),null===(Ee=H.rendering)){if(re)Pl(H,!1);else if(or!==hs||null!==u&&0!=(64&u.effectTag))for(Ee=p.child;null!==Ee;){if(null!==(u=Ac(Ee))){for(p.effectTag|=64,Pl(H,!1),null!==(re=u.updateQueue)&&(p.updateQueue=re,p.effectTag|=4),null===H.lastEffect&&(p.firstEffect=null),p.lastEffect=H.lastEffect,H=p.child;null!==H;)Ee=w,(re=H).effectTag&=2,re.nextEffect=null,re.firstEffect=null,re.lastEffect=null,null===(u=re.alternate)?(re.childExpirationTime=0,re.expirationTime=Ee,re.child=null,re.memoizedProps=null,re.memoizedState=null,re.updateQueue=null,re.dependencies=null):(re.childExpirationTime=u.childExpirationTime,re.expirationTime=u.expirationTime,re.child=u.child,re.memoizedProps=u.memoizedProps,re.memoizedState=u.memoizedState,re.updateQueue=u.updateQueue,re.dependencies=null===(Ee=u.dependencies)?null:{expirationTime:Ee.expirationTime,firstContext:Ee.firstContext,responders:Ee.responders}),H=H.sibling;return Oi(bi,1&bi.current|2),p.child}Ee=Ee.sibling}}else{if(!re)if(null!==(u=Ac(Ee))){if(p.effectTag|=64,re=!0,null!==(w=u.updateQueue)&&(p.updateQueue=w,p.effectTag|=4),Pl(H,!0),null===H.tail&&"hidden"===H.tailMode&&!Ee.alternate)return null!==(p=p.lastEffect=H.lastEffect)&&(p.nextEffect=null),null}else 2*So()-H.renderingStartTime>H.tailExpiration&&1<w&&(p.effectTag|=64,re=!0,Pl(H,!1),p.expirationTime=p.childExpirationTime=w-1);H.isBackwards?(Ee.sibling=p.child,p.child=Ee):(null!==(w=H.last)?w.sibling=Ee:p.child=Ee,H.last=Ee)}return null!==H.tail?(0===H.tailExpiration&&(H.tailExpiration=So()+500),H.rendering=w=H.tail,H.tail=w.sibling,H.lastEffect=p.lastEffect,H.renderingStartTime=So(),w.sibling=null,p=bi.current,Oi(bi,re?1&p|2:1&p),w):null}throw Error(j(156,p.tag))}function xy(u){switch(u.tag){case 1:Gr(u.type)&&Iu();var p=u.effectTag;return 4096&p?(u.effectTag=-4097&p|64,u):null;case 3:if(us(),xi(Vr),xi(Sr),0!=(64&(p=u.effectTag)))throw Error(j(285));return u.effectTag=-4097&p|64,u;case 5:return kl(u),null;case 13:return xi(bi),4096&(p=u.effectTag)?(u.effectTag=-4097&p|64,u):null;case 19:return xi(bi),null;case 4:return us(),null;case 10:return Sf(u),null;default:return null}}function Fl(u,p){return{value:u,source:p,stack:Tn(p)}}$f=function(u,p){for(var w=p.child;null!==w;){if(5===w.tag||6===w.tag)u.appendChild(w.stateNode);else if(4!==w.tag&&null!==w.child){w.child.return=w,w=w.child;continue}if(w===p)break;for(;null===w.sibling;){if(null===w.return||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},qf=function(u,p,w,H,re){var Ee=u.memoizedProps;if(Ee!==H){var We,xt,Fe=p.stateNode;switch(Bs(ua.current),u=null,w){case"input":Ee=ni(Fe,Ee),H=ni(Fe,H),u=[];break;case"option":Ee=Ur(Fe,Ee),H=Ur(Fe,H),u=[];break;case"select":Ee=x({},Ee,{value:void 0}),H=x({},H,{value:void 0}),u=[];break;case"textarea":Ee=io(Fe,Ee),H=io(Fe,H),u=[];break;default:"function"!=typeof Ee.onClick&&"function"==typeof H.onClick&&(Fe.onclick=mu)}for(We in uc(w,H),w=null,Ee)if(!H.hasOwnProperty(We)&&Ee.hasOwnProperty(We)&&null!=Ee[We])if("style"===We)for(xt in Fe=Ee[We])Fe.hasOwnProperty(xt)&&(w||(w={}),w[xt]="");else"dangerouslySetInnerHTML"!==We&&"children"!==We&&"suppressContentEditableWarning"!==We&&"suppressHydrationWarning"!==We&&"autoFocus"!==We&&(me.hasOwnProperty(We)?u||(u=[]):(u=u||[]).push(We,null));for(We in H){var bt=H[We];if(Fe=null!=Ee?Ee[We]:void 0,H.hasOwnProperty(We)&&bt!==Fe&&(null!=bt||null!=Fe))if("style"===We)if(Fe){for(xt in Fe)!Fe.hasOwnProperty(xt)||bt&&bt.hasOwnProperty(xt)||(w||(w={}),w[xt]="");for(xt in bt)bt.hasOwnProperty(xt)&&Fe[xt]!==bt[xt]&&(w||(w={}),w[xt]=bt[xt])}else w||(u||(u=[]),u.push(We,w)),w=bt;else"dangerouslySetInnerHTML"===We?(Fe=Fe?Fe.__html:void 0,null!=(bt=bt?bt.__html:void 0)&&Fe!==bt&&(u=u||[]).push(We,bt)):"children"===We?Fe===bt||"string"!=typeof bt&&"number"!=typeof bt||(u=u||[]).push(We,""+bt):"suppressContentEditableWarning"!==We&&"suppressHydrationWarning"!==We&&(me.hasOwnProperty(We)?(null!=bt&&Aa(re,We),u||Fe===bt||(u=[])):(u=u||[]).push(We,bt))}w&&(u=u||[]).push("style",w),(p.updateQueue=re=u)&&(p.effectTag|=4)}},Hu=function(u,p,w,H){w!==H&&(p.effectTag|=4)};var Xf="function"==typeof WeakSet?WeakSet:Set;function Dc(u,p){var w=p.source,H=p.stack;null===H&&null!==w&&(H=Tn(w)),null!==w&&Ht(w.type),p=p.value,null!==u&&1===u.tag&&Ht(u.type);try{console.error(p)}catch(re){setTimeout(function(){throw re})}}function Im(u){var p=u.ref;if(null!==p)if("function"==typeof p)try{p(null)}catch(w){Ys(u,w)}else p.current=null}function qu(u,p){switch(p.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&p.effectTag&&null!==u){var w=u.memoizedProps,H=u.memoizedState;p=(u=p.stateNode).getSnapshotBeforeUpdate(p.elementType===p.type?w:$o(p.type,w),H),u.__reactInternalSnapshotBeforeUpdate=p}return}throw Error(j(163))}function Pm(u,p){if(null!==(p=null!==(p=p.updateQueue)?p.lastEffect:null)){var w=p=p.next;do{if((w.tag&u)===u){var H=w.destroy;w.destroy=void 0,void 0!==H&&H()}w=w.next}while(w!==p)}}function Kf(u,p){if(null!==(p=null!==(p=p.updateQueue)?p.lastEffect:null)){var w=p=p.next;do{(w.tag&u)===u&&(w.destroy=(0,w.create)()),w=w.next}while(w!==p)}}function Yf(u,p,w){switch(w.tag){case 0:case 11:case 15:case 22:return void Kf(3,w);case 1:if(u=w.stateNode,4&w.effectTag)if(null===p)u.componentDidMount();else{var H=w.elementType===w.type?p.memoizedProps:$o(w.type,p.memoizedProps);u.componentDidUpdate(H,p.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}return void(null!==(p=w.updateQueue)&&_m(w,p,u));case 3:if(null!==(p=w.updateQueue)){if(u=null,null!==w.child)switch(w.child.tag){case 5:case 1:u=w.child.stateNode}_m(w,p,u)}return;case 5:return u=w.stateNode,void(null===p&&4&w.effectTag&&Vp(w.type,w.memoizedProps)&&u.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===w.memoizedState&&(w=w.alternate,null!==w&&(w=w.memoizedState,null!==w&&(w=w.dehydrated,null!==w&&Ds(w)))))}throw Error(j(163))}function Qf(u,p,w){switch("function"==typeof fh&&fh(p),p.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(u=p.updateQueue)&&null!==(u=u.lastEffect)){var H=u.next;Er(97<w?97:w,function(){var re=H;do{var Ee=re.destroy;if(void 0!==Ee){var Fe=p;try{Ee()}catch(We){Ys(Fe,We)}}re=re.next}while(re!==H)})}break;case 1:Im(p),"function"==typeof(w=p.stateNode).componentWillUnmount&&function Wf(u,p){try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(w){Ys(u,w)}}(p,w);break;case 5:Im(p);break;case 4:Oc(u,p,w)}}function Jf(u){var p=u.alternate;u.return=null,u.child=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.alternate=null,u.firstEffect=null,u.lastEffect=null,u.pendingProps=null,u.memoizedProps=null,u.stateNode=null,null!==p&&Jf(p)}function Fm(u){return 5===u.tag||3===u.tag||4===u.tag}function Zf(u){e:{for(var p=u.return;null!==p;){if(Fm(p)){var w=p;break e}p=p.return}throw Error(j(160))}switch(p=w.stateNode,w.tag){case 5:var H=!1;break;case 3:case 4:p=p.containerInfo,H=!0;break;default:throw Error(j(161))}16&w.effectTag&&(Nr(p,""),w.effectTag&=-17);e:t:for(w=u;;){for(;null===w.sibling;){if(null===w.return||Fm(w.return)){w=null;break e}w=w.return}for(w.sibling.return=w.return,w=w.sibling;5!==w.tag&&6!==w.tag&&18!==w.tag;){if(2&w.effectTag||null===w.child||4===w.tag)continue t;w.child.return=w,w=w.child}if(!(2&w.effectTag)){w=w.stateNode;break e}}H?Rm(u,w,p):eh(u,w,p)}function Rm(u,p,w){var H=u.tag,re=5===H||6===H;if(re)u=re?u.stateNode:u.stateNode.instance,p?8===w.nodeType?w.parentNode.insertBefore(u,p):w.insertBefore(u,p):(8===w.nodeType?(p=w.parentNode).insertBefore(u,w):(p=w).appendChild(u),null!=(w=w._reactRootContainer)||null!==p.onclick||(p.onclick=mu));else if(4!==H&&null!==(u=u.child))for(Rm(u,p,w),u=u.sibling;null!==u;)Rm(u,p,w),u=u.sibling}function eh(u,p,w){var H=u.tag,re=5===H||6===H;if(re)u=re?u.stateNode:u.stateNode.instance,p?w.insertBefore(u,p):w.appendChild(u);else if(4!==H&&null!==(u=u.child))for(eh(u,p,w),u=u.sibling;null!==u;)eh(u,p,w),u=u.sibling}function Oc(u,p,w){for(var Ee,Fe,H=p,re=!1;;){if(!re){re=H.return;e:for(;;){if(null===re)throw Error(j(160));switch(Ee=re.stateNode,re.tag){case 5:Fe=!1;break e;case 3:case 4:Ee=Ee.containerInfo,Fe=!0;break e}re=re.return}re=!0}if(5===H.tag||6===H.tag){e:for(var We=u,xt=H,bt=w,Ut=xt;;)if(Qf(We,Ut,bt),null!==Ut.child&&4!==Ut.tag)Ut.child.return=Ut,Ut=Ut.child;else{if(Ut===xt)break e;for(;null===Ut.sibling;){if(null===Ut.return||Ut.return===xt)break e;Ut=Ut.return}Ut.sibling.return=Ut.return,Ut=Ut.sibling}Fe?(xt=H.stateNode,8===(We=Ee).nodeType?We.parentNode.removeChild(xt):We.removeChild(xt)):Ee.removeChild(H.stateNode)}else if(4===H.tag){if(null!==H.child){Ee=H.stateNode.containerInfo,Fe=!0,H.child.return=H,H=H.child;continue}}else if(Qf(u,H,w),null!==H.child){H.child.return=H,H=H.child;continue}if(H===p)break;for(;null===H.sibling;){if(null===H.return||H.return===p)return;4===(H=H.return).tag&&(re=!1)}H.sibling.return=H.return,H=H.sibling}}function th(u,p){switch(p.tag){case 0:case 11:case 14:case 15:case 22:return void Pm(3,p);case 1:case 12:case 17:return;case 5:var w=p.stateNode;if(null!=w){var H=p.memoizedProps,re=null!==u?u.memoizedProps:H;u=p.type;var Ee=p.updateQueue;if(p.updateQueue=null,null!==Ee){for(w[yu]=H,"input"===u&&"radio"===H.type&&null!=H.name&&Ti(w,H),dc(u,re),p=dc(u,H),re=0;re<Ee.length;re+=2){var Fe=Ee[re],We=Ee[re+1];"style"===Fe?sa(w,We):"dangerouslySetInnerHTML"===Fe?Cr(w,We):"children"===Fe?Nr(w,We):D(w,Fe,We,p)}switch(u){case"input":Ki(w,H);break;case"textarea":dr(w,H);break;case"select":p=w._wrapperState.wasMultiple,w._wrapperState.wasMultiple=!!H.multiple,null!=(u=H.value)?Lr(w,!!H.multiple,u,!1):p!==!!H.multiple&&(null!=H.defaultValue?Lr(w,!!H.multiple,H.defaultValue,!0):Lr(w,!!H.multiple,H.multiple?[]:"",!1))}}}return;case 6:if(null===p.stateNode)throw Error(j(162));return void(p.stateNode.nodeValue=p.memoizedProps);case 3:return void((p=p.stateNode).hydrate&&(p.hydrate=!1,Ds(p.containerInfo)));case 13:if(w=p,null===p.memoizedState?H=!1:(H=!0,w=p.child,Om=So()),null!==w)e:for(u=w;;){if(5===u.tag)Ee=u.stateNode,H?"function"==typeof(Ee=Ee.style).setProperty?Ee.setProperty("display","none","important"):Ee.display="none":(Ee=u.stateNode,re=null!=(re=u.memoizedProps.style)&&re.hasOwnProperty("display")?re.display:null,Ee.style.display=cc("display",re));else if(6===u.tag)u.stateNode.nodeValue=H?"":u.memoizedProps;else{if(13===u.tag&&null!==u.memoizedState&&null===u.memoizedState.dehydrated){(Ee=u.child.sibling).return=u,u=Ee;continue}if(null!==u.child){u.child.return=u,u=u.child;continue}}if(u===w)break;for(;null===u.sibling;){if(null===u.return||u.return===w)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}return void nh(p);case 19:return void nh(p)}throw Error(j(163))}function nh(u){var p=u.updateQueue;if(null!==p){u.updateQueue=null;var w=u.stateNode;null===w&&(w=u.stateNode=new Xf),p.forEach(function(H){var re=Ay.bind(null,u,H);w.has(H)||(w.add(H),H.then(re,re))})}}var ih="function"==typeof WeakMap?WeakMap:Map;function rh(u,p,w){(w=cs(w,null)).tag=3,w.payload={element:null};var H=p.value;return w.callback=function(){Lc||(Lc=!0,Ju=H),Dc(u,p)},w}function oh(u,p,w){(w=cs(w,null)).tag=3;var H=u.type.getDerivedStateFromError;if("function"==typeof H){var re=p.value;w.payload=function(){return Dc(u,p),H(re)}}var Ee=u.stateNode;return null!==Ee&&"function"==typeof Ee.componentDidCatch&&(w.callback=function(){"function"!=typeof H&&(null===Hs?Hs=new Set([this]):Hs.add(this),Dc(u,p));var Fe=p.stack;this.componentDidCatch(p.value,{componentStack:null!==Fe?Fe:""})}),w}var Nc,Dm=Math.ceil,Xu=q.ReactCurrentDispatcher,li=q.ReactCurrentOwner,hs=0,Wu=3,Ku=4,vn=0,Ao=null,An=null,co=0,or=hs,Qu=null,ar=1073741823,Gs=1073741823,Rl=null,$s=0,Dl=!1,Om=0,en=null,Lc=!1,Ju=null,Hs=null,Zu=!1,ed=null,ps=90,Ml=null,kr=0,lh=null,td=0;function qr(){return 0!=(48&vn)?1073741821-(So()/10|0):0!==td?td:td=1073741821-(So()/10|0)}function Xs(u,p,w){if(0==(2&(p=p.mode)))return 1073741823;var H=sn();if(0==(4&p))return 99===H?1073741823:1073741822;if(0!=(16&vn))return co;if(null!==w)u=Pu(u,0|w.timeoutMs||5e3,250);else switch(H){case 99:u=1073741823;break;case 98:u=Pu(u,150,100);break;case 97:case 96:u=Pu(u,5e3,250);break;case 95:u=2;break;default:throw Error(j(326))}return null!==Ao&&u===co&&--u,u}function Ws(u,p){if(50<kr)throw kr=0,lh=null,Error(j(185));if(null!==(u=ch(u,p))){var w=sn();1073741823===p?0!=(8&vn)&&0==(48&vn)?ms(u):(Ir(u),0===vn&&la()):Ir(u),0==(4&vn)||98!==w&&99!==w||(null===Ml?Ml=new Map([[u,p]]):(void 0===(w=Ml.get(u))||w>p)&&Ml.set(u,p))}}function ch(u,p){u.expirationTime<p&&(u.expirationTime=p);var w=u.alternate;null!==w&&w.expirationTime<p&&(w.expirationTime=p);var H=u.return,re=null;if(null===H&&3===u.tag)re=u.stateNode;else for(;null!==H;){if(w=H.alternate,H.childExpirationTime<p&&(H.childExpirationTime=p),null!==w&&w.childExpirationTime<p&&(w.childExpirationTime=p),null===H.return&&3===H.tag){re=H.stateNode;break}H=H.return}return null!==re&&(Ao===re&&(rd(p),or===Ku&&vs(re,co)),jm(re,p)),re}function uh(u){var p=u.lastExpiredTime;if(0!==p||!Bc(u,p=u.firstPendingTime))return p;var w=u.lastPingedTime;return 2>=(u=w>(u=u.nextKnownPendingLevel)?w:u)&&p!==u?0:u}function Ir(u){if(0!==u.lastExpiredTime)u.callbackExpirationTime=1073741823,u.callbackPriority=99,u.callbackNode=ym(ms.bind(null,u));else{var p=uh(u),w=u.callbackNode;if(0===p)null!==w&&(u.callbackNode=null,u.callbackExpirationTime=0,u.callbackPriority=90);else{var H=qr();if(H=1073741823===p?99:1===p||2===p?95:0>=(H=10*(1073741821-p)-10*(1073741821-H))?99:250>=H?98:5250>=H?97:95,null!==w){if(u.callbackExpirationTime===p&&u.callbackPriority>=H)return;w!==mm&&ao(w)}u.callbackExpirationTime=p,u.callbackPriority=H,p=1073741823===p?ym(ms.bind(null,u)):Cf(H,Mm.bind(null,u),{timeout:10*(1073741821-p)-So()}),u.callbackNode=p}}}function Mm(u,p){if(td=0,p)return zm(u,p=qr()),Ir(u),null;var w=uh(u);if(0!==w){if(p=u.callbackNode,0!=(48&vn))throw Error(j(327));if(Ll(),u===Ao&&w===co||Ba(u,w),null!==An){var H=vn;vn|=16;for(var re=id();;)try{Sy();break}catch(We){nd(u,We)}if(ls(),vn=H,Xu.current=re,1===or)throw p=Qu,Ba(u,w),vs(u,w),Ir(u),p;if(null===An)switch(re=u.finishedWork=u.current.alternate,u.finishedExpirationTime=w,H=or,Ao=null,H){case hs:case 1:throw Error(j(345));case 2:zm(u,2<w?2:w);break;case Wu:if(vs(u,w),w===(H=u.lastSuspendedTime)&&(u.nextKnownPendingLevel=dh(re)),1073741823===ar&&10<(re=Om+500-So())){if(Dl){var Ee=u.lastPingedTime;if(0===Ee||Ee>=w){u.lastPingedTime=w,Ba(u,w);break}}if(0!==(Ee=uh(u))&&Ee!==w)break;if(0!==H&&H!==w){u.lastPingedTime=H;break}u.timeoutHandle=vu(Ks.bind(null,u),re);break}Ks(u);break;case Ku:if(vs(u,w),w===(H=u.lastSuspendedTime)&&(u.nextKnownPendingLevel=dh(re)),Dl&&(0===(re=u.lastPingedTime)||re>=w)){u.lastPingedTime=w,Ba(u,w);break}if(0!==(re=uh(u))&&re!==w)break;if(0!==H&&H!==w){u.lastPingedTime=H;break}if(1073741823!==Gs?H=10*(1073741821-Gs)-So():1073741823===ar?H=0:(H=10*(1073741821-ar)-5e3,0>(H=(re=So())-H)&&(H=0),(w=10*(1073741821-w)-re)<(H=(120>H?120:480>H?480:1080>H?1080:1920>H?1920:3e3>H?3e3:4320>H?4320:1960*Dm(H/1960))-H)&&(H=w)),10<H){u.timeoutHandle=vu(Ks.bind(null,u),H);break}Ks(u);break;case 5:if(1073741823!==ar&&null!==Rl){Ee=ar;var Fe=Rl;if(0>=(H=0|Fe.busyMinDurationMs)?H=0:(re=0|Fe.busyDelayMs,H=(Ee=So()-(10*(1073741821-Ee)-(0|Fe.timeoutMs||5e3)))<=re?0:re+H-Ee),10<H){vs(u,w),u.timeoutHandle=vu(Ks.bind(null,u),H);break}}Ks(u);break;default:throw Error(j(329))}if(Ir(u),u.callbackNode===p)return Mm.bind(null,u)}}return null}function ms(u){var p=u.lastExpiredTime;if(p=0!==p?p:1073741823,0!=(48&vn))throw Error(j(327));if(Ll(),u===Ao&&p===co||Ba(u,p),null!==An){var w=vn;vn|=16;for(var H=id();;)try{wy();break}catch(re){nd(u,re)}if(ls(),vn=w,Xu.current=H,1===or)throw w=Qu,Ba(u,p),vs(u,p),Ir(u),w;if(null!==An)throw Error(j(261));u.finishedWork=u.current.alternate,u.finishedExpirationTime=p,Ao=null,Ks(u),Ir(u)}return null}function Ke(u,p){var w=vn;vn&=-2,vn|=8;try{return u(p)}finally{0===(vn=w)&&la()}}function Ba(u,p){u.finishedWork=null,u.finishedExpirationTime=0;var w=u.timeoutHandle;if(-1!==w&&(u.timeoutHandle=-1,Gp(w)),null!==An)for(w=An.return;null!==w;){var H=w;switch(H.tag){case 1:null!=(H=H.type.childContextTypes)&&Iu();break;case 3:us(),xi(Vr),xi(Sr);break;case 5:kl(H);break;case 4:us();break;case 13:case 19:xi(bi);break;case 10:Sf(H)}w=w.return}Ao=u,An=Nl(u.current,null),co=p,or=hs,Qu=null,Gs=ar=1073741823,Rl=null,$s=0,Dl=!1}function nd(u,p){for(;;){try{if(ls(),kc.current=zu,Ic)for(var w=Ji.memoizedState;null!==w;){var H=w.queue;null!==H&&(H.pending=null),w=w.next}if(qo=0,rr=Tr=Ji=null,Ic=!1,null===An||null===An.return)return or=1,Qu=p,An=null;e:{var re=u,Ee=An.return,Fe=An,We=p;if(p=co,Fe.effectTag|=2048,Fe.firstEffect=Fe.lastEffect=null,null!==We&&"object"==typeof We&&"function"==typeof We.then){var xt=We;if(0==(2&Fe.mode)){var bt=Fe.alternate;bt?(Fe.updateQueue=bt.updateQueue,Fe.memoizedState=bt.memoizedState,Fe.expirationTime=bt.expirationTime):(Fe.updateQueue=null,Fe.memoizedState=null)}var Ut=0!=(1&bi.current),Yt=Ee;do{var Mn;if(Mn=13===Yt.tag){var Un=Yt.memoizedState;if(null!==Un)Mn=null!==Un.dehydrated;else{var ko=Yt.memoizedProps;Mn=void 0!==ko.fallback&&(!0!==ko.unstable_avoidThisFallback||!Ut)}}if(Mn){var gr=Yt.updateQueue;if(null===gr){var pt=new Set;pt.add(xt),Yt.updateQueue=pt}else gr.add(xt);if(0==(2&Yt.mode)){if(Yt.effectTag|=64,Fe.effectTag&=-2981,1===Fe.tag)if(null===Fe.alternate)Fe.tag=17;else{var ut=cs(1073741823,null);ut.tag=2,ca(Fe,ut)}Fe.expirationTime=1073741823;break e}We=void 0,Fe=p;var St=re.pingCache;if(null===St?(St=re.pingCache=new ih).set(xt,We=new Set):void 0===(We=St.get(xt))&&St.set(xt,We=new Set),!We.has(Fe)){We.add(Fe);var Ot=Ty.bind(null,re,xt,Fe);xt.then(Ot,Ot)}Yt.effectTag|=4096,Yt.expirationTime=p;break e}Yt=Yt.return}while(null!==Yt);We=Error((Ht(Fe.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Tn(Fe))}5!==or&&(or=2),We=Fl(We,Fe),Yt=Ee;do{switch(Yt.tag){case 3:xt=We,Yt.effectTag|=4096,Yt.expirationTime=p,wc(Yt,rh(Yt,xt,p));break e;case 1:xt=We;var un=Yt.stateNode;if(0==(64&Yt.effectTag)&&("function"==typeof Yt.type.getDerivedStateFromError||null!==un&&"function"==typeof un.componentDidCatch&&(null===Hs||!Hs.has(un)))){Yt.effectTag|=4096,Yt.expirationTime=p,wc(Yt,oh(Yt,xt,p));break e}}Yt=Yt.return}while(null!==Yt)}An=od(An)}catch(wi){p=wi;continue}break}}function id(){var u=Xu.current;return Xu.current=zu,null===u?zu:u}function Lm(u,p){u<ar&&2<u&&(ar=u),null!==p&&u<Gs&&2<u&&(Gs=u,Rl=p)}function rd(u){u>$s&&($s=u)}function wy(){for(;null!==An;)An=Nm(An)}function Sy(){for(;null!==An&&!ss();)An=Nm(An)}function Nm(u){var p=Nc(u.alternate,u,co);return u.memoizedProps=u.pendingProps,null===p&&(p=od(u)),li.current=null,p}function od(u){An=u;do{var p=An.alternate;if(u=An.return,0==(2048&An.effectTag)){if(p=_y(p,An,co),1===co||1!==An.childExpirationTime){for(var w=0,H=An.child;null!==H;){var re=H.expirationTime,Ee=H.childExpirationTime;re>w&&(w=re),Ee>w&&(w=Ee),H=H.sibling}An.childExpirationTime=w}if(null!==p)return p;null!==u&&0==(2048&u.effectTag)&&(null===u.firstEffect&&(u.firstEffect=An.firstEffect),null!==An.lastEffect&&(null!==u.lastEffect&&(u.lastEffect.nextEffect=An.firstEffect),u.lastEffect=An.lastEffect),1<An.effectTag&&(null!==u.lastEffect?u.lastEffect.nextEffect=An:u.firstEffect=An,u.lastEffect=An))}else{if(null!==(p=xy(An)))return p.effectTag&=2047,p;null!==u&&(u.firstEffect=u.lastEffect=null,u.effectTag|=2048)}if(null!==(p=An.sibling))return p;An=u}while(null!==An);return or===hs&&(or=5),null}function dh(u){var p=u.expirationTime;return p>(u=u.childExpirationTime)?p:u}function Ks(u){var p=sn();return Er(99,Gt.bind(null,u,p)),null}function Gt(u,p){do{Ll()}while(null!==ed);if(0!=(48&vn))throw Error(j(327));var w=u.finishedWork,H=u.finishedExpirationTime;if(null===w)return null;if(u.finishedWork=null,u.finishedExpirationTime=0,w===u.current)throw Error(j(177));u.callbackNode=null,u.callbackExpirationTime=0,u.callbackPriority=90,u.nextKnownPendingLevel=0;var re=dh(w);if(u.firstPendingTime=re,H<=u.lastSuspendedTime?u.firstSuspendedTime=u.lastSuspendedTime=u.nextKnownPendingLevel=0:H<=u.firstSuspendedTime&&(u.firstSuspendedTime=H-1),H<=u.lastPingedTime&&(u.lastPingedTime=0),H<=u.lastExpiredTime&&(u.lastExpiredTime=0),u===Ao&&(An=Ao=null,co=0),1<w.effectTag?null!==w.lastEffect?(w.lastEffect.nextEffect=w,re=w.firstEffect):re=w:re=w.firstEffect,null!==re){var Ee=vn;vn|=32,li.current=null,uf=ts;var Fe=sf();if(gu(Fe)){if("selectionStart"in Fe)var We={start:Fe.selectionStart,end:Fe.selectionEnd};else{var xt=(We=(We=Fe.ownerDocument)&&We.defaultView||window).getSelection&&We.getSelection();if(xt&&0!==xt.rangeCount){We=xt.anchorNode;var bt=xt.anchorOffset,Ut=xt.focusNode;xt=xt.focusOffset;var Yt=0,Mn=-1,Un=-1,ko=0,gr=0,pt=Fe,ut=null;t:for(;;){for(var St;pt!==We||0!==bt&&3!==pt.nodeType||(Mn=Yt+bt),pt!==Ut||0!==xt&&3!==pt.nodeType||(Un=Yt+xt),3===pt.nodeType&&(Yt+=pt.nodeValue.length),null!==(St=pt.firstChild);)ut=pt,pt=St;for(;;){if(pt===Fe)break t;if(ut===We&&++ko===bt&&(Mn=Yt),ut===Ut&&++gr===xt&&(Un=Yt),null!==(St=pt.nextSibling))break;ut=(pt=ut).parentNode}pt=St}We=-1===Mn||-1===Un?null:{start:Mn,end:Un}}else We=null}We=We||{start:0,end:0}}else We=null;Up={activeElementDetached:null,focusedElem:Fe,selectionRange:We},ts=!1,en=re;do{try{cn()}catch(bn){if(null===en)throw Error(j(330));Ys(en,bn),en=en.nextEffect}}while(null!==en);en=re;do{try{for(Fe=u,We=p;null!==en;){var Ot=en.effectTag;if(16&Ot&&Nr(en.stateNode,""),128&Ot){var jt=en.alternate;if(null!==jt){var Qt=jt.ref;null!==Qt&&("function"==typeof Qt?Qt(null):Qt.current=null)}}switch(1038&Ot){case 2:Zf(en),en.effectTag&=-3;break;case 6:Zf(en),en.effectTag&=-3,th(en.alternate,en);break;case 1024:en.effectTag&=-1025;break;case 1028:en.effectTag&=-1025,th(en.alternate,en);break;case 4:th(en.alternate,en);break;case 8:Oc(Fe,bt=en,We),Jf(bt)}en=en.nextEffect}}catch(bn){if(null===en)throw Error(j(330));Ys(en,bn),en=en.nextEffect}}while(null!==en);if(Qt=Up,jt=sf(),We=Qt.selectionRange,jt!==(Ot=Qt.focusedElem)&&Ot&&Ot.ownerDocument&&jv(Ot.ownerDocument.documentElement,Ot)){for((null!==We&&gu(Ot)&&(jt=We.start,void 0===(Qt=We.end)&&(Qt=jt),"selectionStart"in Ot?(Ot.selectionStart=jt,Ot.selectionEnd=Math.min(Qt,Ot.value.length)):(Qt=(jt=Ot.ownerDocument||document)&&jt.defaultView||window).getSelection&&(Qt=Qt.getSelection(),bt=Ot.textContent.length,Fe=Math.min(We.start,bt),We=void 0===We.end?Fe:Math.min(We.end,bt),!Qt.extend&&Fe>We&&(bt=We,We=Fe,Fe=bt),bt=Bp(Ot,Fe),Ut=Bp(Ot,We),bt&&Ut&&(1!==Qt.rangeCount||Qt.anchorNode!==bt.node||Qt.anchorOffset!==bt.offset||Qt.focusNode!==Ut.node||Qt.focusOffset!==Ut.offset)&&((jt=jt.createRange()).setStart(bt.node,bt.offset),Qt.removeAllRanges(),Fe>We?(Qt.addRange(jt),Qt.extend(Ut.node,Ut.offset)):(jt.setEnd(Ut.node,Ut.offset),Qt.addRange(jt))))),jt=[],Qt=Ot);Qt=Qt.parentNode;)1===Qt.nodeType&&jt.push({element:Qt,left:Qt.scrollLeft,top:Qt.scrollTop});for("function"==typeof Ot.focus&&Ot.focus(),Ot=0;Ot<jt.length;Ot++)(Qt=jt[Ot]).element.scrollLeft=Qt.left,Qt.element.scrollTop=Qt.top}ts=!!uf,Up=uf=null,u.current=w,en=re;do{try{for(Ot=u;null!==en;){var un=en.effectTag;if(36&un&&Yf(Ot,en.alternate,en),128&un){jt=void 0;var Vn=en.ref;if(null!==Vn)jt=en.stateNode,"function"==typeof Vn?Vn(jt):Vn.current=jt}en=en.nextEffect}}catch(bn){if(null===en)throw Error(j(330));Ys(en,bn),en=en.nextEffect}}while(null!==en);en=null,gm(),vn=Ee}else u.current=w;if(Zu)Zu=!1,ed=u,ps=p;else for(en=re;null!==en;)p=en.nextEffect,en.nextEffect=null,en=p;if(0===(p=u.firstPendingTime)&&(Hs=null),1073741823===p?u===lh?kr++:(kr=0,lh=u):kr=0,"function"==typeof ie&&ie(w.stateNode,H),Ir(u),Lc)throw Lc=!1,u=Ju,Ju=null,u;return 0!=(8&vn)||la(),null}function cn(){for(;null!==en;){var u=en.effectTag;0!=(256&u)&&qu(en.alternate,en),0==(512&u)||Zu||(Zu=!0,Cf(97,function(){return Ll(),null})),en=en.nextEffect}}function Ll(){if(90!==ps){var u=97<ps?97:ps;return ps=90,Er(u,Ey)}}function Ey(){if(null===ed)return!1;var u=ed;if(ed=null,0!=(48&vn))throw Error(j(331));var p=vn;for(vn|=32,u=u.current.firstEffect;null!==u;){try{var w=u;if(0!=(512&w.effectTag))switch(w.tag){case 0:case 11:case 15:case 22:Pm(5,w),Kf(5,w)}}catch(H){if(null===u)throw Error(j(330));Ys(u,H)}w=u.nextEffect,u.nextEffect=null,u=w}return vn=p,la(),!0}function ad(u,p,w){ca(u,p=rh(u,p=Fl(w,p),1073741823)),null!==(u=ch(u,1073741823))&&Ir(u)}function Ys(u,p){if(3===u.tag)ad(u,u,p);else for(var w=u.return;null!==w;){if(3===w.tag){ad(w,u,p);break}if(1===w.tag){var H=w.stateNode;if("function"==typeof w.type.getDerivedStateFromError||"function"==typeof H.componentDidCatch&&(null===Hs||!Hs.has(H))){ca(w,u=oh(w,u=Fl(p,u),1073741823)),null!==(w=ch(w,1073741823))&&Ir(w);break}}w=w.return}}function Ty(u,p,w){var H=u.pingCache;null!==H&&H.delete(p),Ao===u&&co===w?or===Ku||or===Wu&&1073741823===ar&&So()-Om<500?Ba(u,co):Dl=!0:Bc(u,w)&&(0!==(p=u.lastPingedTime)&&p<w||(u.lastPingedTime=w,Ir(u)))}function Ay(u,p){var w=u.stateNode;null!==w&&w.delete(p),0==(p=0)&&(p=Xs(p=qr(),u,null)),null!==(u=ch(u,p))&&Ir(u)}Nc=function(u,p,w){var H=p.expirationTime;if(null!==u){var re=p.pendingProps;if(u.memoizedProps!==re||Vr.current)jr=!0;else{if(H<w){switch(jr=!1,p.tag){case 3:zf(p),fs();break;case 5:if(Pf(p),4&p.mode&&1!==w&&re.hidden)return p.expirationTime=p.childExpirationTime=1,null;break;case 1:Gr(p.type)&&zn(p);break;case 4:If(p,p.stateNode.containerInfo);break;case 10:H=p.memoizedProps.value,Oi(Fu,(re=p.type._context)._currentValue),re._currentValue=H;break;case 13:if(null!==p.memoizedState)return 0!==(H=p.child.childExpirationTime)&&H>=w?Vf(u,p,w):(Oi(bi,1&bi.current),null!==(p=Hr(u,p,w))?p.sibling:null);Oi(bi,1&bi.current);break;case 19:if(H=p.childExpirationTime>=w,0!=(64&u.effectTag)){if(H)return Gf(u,p,w);p.effectTag|=64}if(null!==(re=p.memoizedState)&&(re.rendering=null,re.tail=null),Oi(bi,bi.current),!H)return null}return Hr(u,p,w)}jr=!1}}else jr=!1;switch(p.expirationTime=0,p.tag){case 2:if(H=p.type,null!==u&&(u.alternate=null,p.alternate=null,p.effectTag|=2),u=p.pendingProps,re=as(p,Sr.current),Ns(p,w),re=Ff(null,p,H,u,re,w),p.effectTag|=1,"object"==typeof re&&null!==re&&"function"==typeof re.render&&void 0===re.$$typeof){if(p.tag=1,p.memoizedState=null,p.updateQueue=null,Gr(H)){var Ee=!0;zn(p)}else Ee=!1;p.memoizedState=null!=re.state?re.state:null,El(p);var Fe=H.getDerivedStateFromProps;"function"==typeof Fe&&Du(p,H,Fe,u),re.updater=Tf,p.stateNode=re,re._reactInternalFiber=p,Ou(p,H,u,w),p=jf(null,p,H,!0,Ee,w)}else p.tag=0,Ar(null,p,re,w),p=p.child;return p;case 16:e:{if(re=p.elementType,null!==u&&(u.alternate=null,p.alternate=null,p.effectTag|=2),u=p.pendingProps,function Kn(u){if(-1===u._status){u._status=0;var p=u._ctor;p=p(),u._result=p,p.then(function(w){0===u._status&&(w=w.default,u._status=1,u._result=w)},function(w){0===u._status&&(u._status=2,u._result=w)})}}(re),1!==re._status)throw re._result;switch(p.type=re=re._result,Ee=p.tag=function Iy(u){if("function"==typeof u)return hh(u)?1:0;if(null!=u){if((u=u.$$typeof)===ei)return 11;if(u===On)return 14}return 2}(re),u=$o(re,u),Ee){case 0:p=Gu(null,p,re,u,w);break e;case 1:p=Bf(null,p,re,u,w);break e;case 11:p=Vu(null,p,re,u,w);break e;case 14:p=Il(null,p,re,$o(re.type,u),H,w);break e}throw Error(j(306,re,""))}return p;case 0:return re=p.pendingProps,Gu(u,p,H=p.type,re=p.elementType===H?re:$o(H,re),w);case 1:return re=p.pendingProps,Bf(u,p,H=p.type,re=p.elementType===H?re:$o(H,re),w);case 3:if(zf(p),H=p.updateQueue,null===u||null===H)throw Error(j(282));if(H=p.pendingProps,re=null!==(re=p.memoizedState)?re.element:null,Br(u,p),Ru(p,H,null,w),(H=p.memoizedState.element)===re)fs(),p=Hr(u,p,w);else{if((re=p.stateNode.hydrate)&&(ds=_l(p.stateNode.containerInfo.firstChild),La=p,re=Na=!0),re)for(w=kf(p,null,H,w),p.child=w;w;)w.effectTag=-3&w.effectTag|1024,w=w.sibling;else Ar(u,p,H,w),fs();p=p.child}return p;case 5:return Pf(p),null===u&&Fc(p),Ee=null!==u?u.memoizedProps:null,Fe=(re=p.pendingProps).children,df(H=p.type,re)?Fe=null:null!==Ee&&df(H,Ee)&&(p.effectTag|=16),Nf(u,p),4&p.mode&&1!==w&&re.hidden?(p.expirationTime=p.childExpirationTime=1,p=null):(Ar(u,p,Fe,w),p=p.child),p;case 6:return null===u&&Fc(p),null;case 13:return Vf(u,p,w);case 4:return If(p,p.stateNode.containerInfo),H=p.pendingProps,null===u?p.child=Al(p,null,H,w):Ar(u,p,H,w),p.child;case 11:return re=p.pendingProps,Vu(u,p,H=p.type,re=p.elementType===H?re:$o(H,re),w);case 7:return Ar(u,p,p.pendingProps,w),p.child;case 8:case 12:return Ar(u,p,p.pendingProps.children,w),p.child;case 10:e:{H=p.type._context,Fe=p.memoizedProps,Ee=(re=p.pendingProps).value;var We=p.type._context;if(Oi(Fu,We._currentValue),We._currentValue=Ee,null!==Fe)if(0==(Ee=Ms(We=Fe.value,Ee)?0:0|("function"==typeof H._calculateChangedBits?H._calculateChangedBits(We,Ee):1073741823))){if(Fe.children===re.children&&!Vr.current){p=Hr(u,p,w);break e}}else for(null!==(We=p.child)&&(We.return=p);null!==We;){var xt=We.dependencies;if(null!==xt){Fe=We.child;for(var bt=xt.firstContext;null!==bt;){if(bt.context===H&&0!=(bt.observedBits&Ee)){1===We.tag&&((bt=cs(w,null)).tag=2,ca(We,bt)),We.expirationTime<w&&(We.expirationTime=w),null!==(bt=We.alternate)&&bt.expirationTime<w&&(bt.expirationTime=w),Ef(We.return,w),xt.expirationTime<w&&(xt.expirationTime=w);break}bt=bt.next}}else Fe=10===We.tag&&We.type===p.type?null:We.child;if(null!==Fe)Fe.return=We;else for(Fe=We;null!==Fe;){if(Fe===p){Fe=null;break}if(null!==(We=Fe.sibling)){We.return=Fe.return,Fe=We;break}Fe=Fe.return}We=Fe}Ar(u,p,re.children,w),p=p.child}return p;case 9:return re=p.type,H=(Ee=p.pendingProps).children,Ns(p,w),H=H(re=Eo(re,Ee.unstable_observedBits)),p.effectTag|=1,Ar(u,p,H,w),p.child;case 14:return Ee=$o(re=p.type,p.pendingProps),Il(u,p,re,Ee=$o(re.type,Ee),H,w);case 15:return yy(u,p,p.type,p.pendingProps,H,w);case 17:return re=p.pendingProps,re=p.elementType===(H=p.type)?re:$o(H,re),null!==u&&(u.alternate=null,p.alternate=null,p.effectTag|=2),p.tag=1,Gr(H)?(u=!0,zn(p)):u=!1,Ns(p,w),bm(p,H,re),Ou(p,H,re,w),jf(null,p,H,!0,u,w);case 19:return Gf(u,p,w)}throw Error(j(156,p.tag))};var ie=null,fh=null;function Yo(u,p,w,H){this.tag=u,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=H,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function mr(u,p,w,H){return new Yo(u,p,w,H)}function hh(u){return!(!(u=u.prototype)||!u.isReactComponent)}function Nl(u,p){var w=u.alternate;return null===w?((w=mr(u.tag,p,u.key,u.mode)).elementType=u.elementType,w.type=u.type,w.stateNode=u.stateNode,w.alternate=u,u.alternate=w):(w.pendingProps=p,w.effectTag=0,w.nextEffect=null,w.firstEffect=null,w.lastEffect=null),w.childExpirationTime=u.childExpirationTime,w.expirationTime=u.expirationTime,w.child=u.child,w.memoizedProps=u.memoizedProps,w.memoizedState=u.memoizedState,w.updateQueue=u.updateQueue,w.dependencies=null===(p=u.dependencies)?null:{expirationTime:p.expirationTime,firstContext:p.firstContext,responders:p.responders},w.sibling=u.sibling,w.index=u.index,w.ref=u.ref,w}function sd(u,p,w,H,re,Ee){var Fe=2;if(H=u,"function"==typeof u)hh(u)&&(Fe=1);else if("string"==typeof u)Fe=5;else e:switch(u){case ot:return gs(w.children,re,Ee,p);case Pe:Fe=8,re|=7;break;case Ft:Fe=8,re|=1;break;case kt:return(u=mr(12,w,p,8|re)).elementType=kt,u.type=kt,u.expirationTime=Ee,u;case nn:return(u=mr(13,w,p,re)).type=nn,u.elementType=nn,u.expirationTime=Ee,u;case Nt:return(u=mr(19,w,p,re)).elementType=Nt,u.expirationTime=Ee,u;default:if("object"==typeof u&&null!==u)switch(u.$$typeof){case qt:Fe=10;break e;case tn:Fe=9;break e;case ei:Fe=11;break e;case On:Fe=14;break e;case ht:Fe=16,H=null;break e;case _t:Fe=22;break e}throw Error(j(130,null==u?u:typeof u,""))}return(p=mr(Fe,w,p,re)).elementType=u,p.type=H,p.expirationTime=Ee,p}function gs(u,p,w,H){return(u=mr(7,u,H,p)).expirationTime=w,u}function Bm(u,p,w){return(u=mr(6,u,null,p)).expirationTime=w,u}function Gi(u,p,w){return(p=mr(4,null!==u.children?u.children:[],u.key,p)).expirationTime=w,p.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},p}function Py(u,p,w){this.tag=p,this.current=null,this.containerInfo=u,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=w,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Bc(u,p){var w=u.firstSuspendedTime;return u=u.lastSuspendedTime,0!==w&&w>=p&&u<=p}function vs(u,p){var w=u.firstSuspendedTime,H=u.lastSuspendedTime;w<p&&(u.firstSuspendedTime=p),(H>p||0===w)&&(u.lastSuspendedTime=p),p<=u.lastPingedTime&&(u.lastPingedTime=0),p<=u.lastExpiredTime&&(u.lastExpiredTime=0)}function jm(u,p){p>u.firstPendingTime&&(u.firstPendingTime=p);var w=u.firstSuspendedTime;0!==w&&(p>=w?u.firstSuspendedTime=u.lastSuspendedTime=u.nextKnownPendingLevel=0:p>=u.lastSuspendedTime&&(u.lastSuspendedTime=p+1),p>u.nextKnownPendingLevel&&(u.nextKnownPendingLevel=p))}function zm(u,p){var w=u.lastExpiredTime;(0===w||w>p)&&(u.lastExpiredTime=p)}function ld(u,p,w,H){var re=p.current,Ee=qr(),Fe=Tl.suspense;Ee=Xs(Ee,re,Fe);e:if(w){t:{if(C(w=w._reactInternalFiber)!==w||1!==w.tag)throw Error(j(170));var We=w;do{switch(We.tag){case 3:We=We.stateNode.context;break t;case 1:if(Gr(We.type)){We=We.stateNode.__reactInternalMemoizedMergedChildContext;break t}}We=We.return}while(null!==We);throw Error(j(171))}if(1===w.tag){var xt=w.type;if(Gr(xt)){w=ai(w,xt,We);break e}}w=We}else w=os;return null===p.context?p.context=w:p.pendingContext=w,(p=cs(Ee,Fe)).payload={element:u},null!==(H=void 0===H?null:H)&&(p.callback=H),ca(re,p),Ws(re,Ee),Ee}function ph(u){return(u=u.current).child?u.child.stateNode:null}function Um(u,p){null!==(u=u.memoizedState)&&null!==u.dehydrated&&u.retryTime<p&&(u.retryTime=p)}function cd(u,p){Um(u,p),(u=u.alternate)&&Um(u,p)}function mh(u,p,w){var H=new Py(u,p,w=null!=w&&!0===w.hydrate),re=mr(3,null,null,2===p?7:1===p?3:0);H.current=re,re.stateNode=H,El(re),u[_u]=H.current,w&&0!==p&&function ci(u,p){var w=ml(p);Yn.forEach(function(H){vt(H,p,w)}),pi.forEach(function(H){vt(H,p,w)})}(0,9===u.nodeType?u:u.ownerDocument),this._internalRoot=H}function Bl(u){return!(!u||1!==u.nodeType&&9!==u.nodeType&&11!==u.nodeType&&(8!==u.nodeType||" react-mount-point-unstable "!==u.nodeValue))}function ud(u,p,w,H,re){var Ee=w._reactRootContainer;if(Ee){var Fe=Ee._internalRoot;if("function"==typeof re){var We=re;re=function(){var bt=ph(Fe);We.call(bt)}}ld(p,Fe,u,re)}else{if(Ee=w._reactRootContainer=function gh(u,p){if(p||(p=!(!(p=u?9===u.nodeType?u.documentElement:u.firstChild:null)||1!==p.nodeType||!p.hasAttribute("data-reactroot"))),!p)for(var w;w=u.lastChild;)u.removeChild(w);return new mh(u,0,p?{hydrate:!0}:void 0)}(w,H),Fe=Ee._internalRoot,"function"==typeof re){var xt=re;re=function(){var bt=ph(Fe);xt.call(bt)}}Ke(function(){ld(p,Fe,u,re)})}return ph(Fe)}mh.prototype.render=function(u){ld(u,this._internalRoot,null,null)},mh.prototype.unmount=function(){var u=this._internalRoot,p=u.containerInfo;ld(null,u,null,function(){p[_u]=null})},ke=function(u){if(13===u.tag){var p=Pu(qr(),150,100);Ws(u,p),cd(u,p)}},He=function(u){13===u.tag&&(Ws(u,3),cd(u,3))},Xe=function(u){if(13===u.tag){var p=qr();Ws(u,p=Xs(p,u,null)),cd(u,p)}},E=function(u,p,w){switch(p){case"input":if(Ki(u,w),p=w.name,"radio"===w.type&&null!=p){for(w=u;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var H=w[p];if(H!==u&&H.form===u.form){var re=xu(H);if(!re)throw Error(j(90));br(H),Ki(H,re)}}}break;case"textarea":dr(u,w);break;case"select":null!=(p=w.value)&&Lr(u,!!w.multiple,p,!1)}},oe=function Cy(u,p){var w=vn;vn|=1;try{return u(p)}finally{0===(vn=w)&&la()}},$e=function(u,p,w,H,re){var Ee=vn;vn|=4;try{return Er(98,u.bind(null,p,w,H,re))}finally{0===(vn=Ee)&&la()}},ct=function(){0==(49&vn)&&(function by(){if(null!==Ml){var u=Ml;Ml=null,u.forEach(function(p,w){zm(w,p),Ir(w)}),la()}}(),Ll())},Ne=function(u,p){var w=vn;vn|=2;try{return u(p)}finally{0===(vn=w)&&la()}};(function(u){var p=u.findFiberByHostInstance;!function ky(u){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)return!0;try{var w=p.inject(u);ie=function(H){try{p.onCommitFiberRoot(w,H,void 0,64==(64&H.current.effectTag))}catch{}},fh=function(H){try{p.onCommitFiberUnmount(w,H)}catch{}}}catch{}}(x({},u,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(w){return null===(w=function Z(u){if(u=function P(u){var p=u.alternate;if(!p){if(null===(p=C(u)))throw Error(j(188));return p!==u?null:u}for(var w=u,H=p;;){var re=w.return;if(null===re)break;var Ee=re.alternate;if(null===Ee){if(null!==(H=re.return)){w=H;continue}break}if(re.child===Ee.child){for(Ee=re.child;Ee;){if(Ee===w)return F(re),u;if(Ee===H)return F(re),p;Ee=Ee.sibling}throw Error(j(188))}if(w.return!==H.return)w=re,H=Ee;else{for(var Fe=!1,We=re.child;We;){if(We===w){Fe=!0,w=re,H=Ee;break}if(We===H){Fe=!0,H=re,w=Ee;break}We=We.sibling}if(!Fe){for(We=Ee.child;We;){if(We===w){Fe=!0,w=Ee,H=re;break}if(We===H){Fe=!0,H=Ee,w=re;break}We=We.sibling}if(!Fe)throw Error(j(189))}}if(w.alternate!==H)throw Error(j(190))}if(3!==w.tag)throw Error(j(188));return w.stateNode.current===w?u:p}(u),!u)return null;for(var p=u;;){if(5===p.tag||6===p.tag)return p;if(p.child)p.child.return=p,p=p.child;else{if(p===u)break;for(;!p.sibling;){if(!p.return||p.return===u)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}}return null}(w))?null:w.stateNode},findFiberByHostInstance:function(w){return p?p(w):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:hc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),O.render=function(u,p,w){if(!Bl(p))throw Error(j(200));return ud(null,u,p,!1,w)},O.unmountComponentAtNode=function(u){if(!Bl(u))throw Error(j(40));return!!u._reactRootContainer&&(Ke(function(){ud(null,null,u,!1,function(){u._reactRootContainer=null,u[_u]=null})}),!0)}},7628:(Ce,O,S)=>{(function k(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k)}catch(o){console.error(o)}})(),Ce.exports=S(9877)},298:(Ce,O,S)=>{var k=S(1856),o="function"==typeof Symbol&&Symbol.for,x=o?Symbol.for("react.element"):60103,L=o?Symbol.for("react.portal"):60106,j=o?Symbol.for("react.fragment"):60107,d=o?Symbol.for("react.strict_mode"):60108,m=o?Symbol.for("react.profiler"):60114,y=o?Symbol.for("react.provider"):60109,R=o?Symbol.for("react.context"):60110,M=o?Symbol.for("react.forward_ref"):60112,z=o?Symbol.for("react.suspense"):60113,Y=o?Symbol.for("react.memo"):60115,X=o?Symbol.for("react.lazy"):60116,Q="function"==typeof Symbol&&Symbol.iterator;function W(Ge){for(var it="https://reactjs.org/docs/error-decoder.html?invariant="+Ge,fe=1;fe<arguments.length;fe++)it+="&args[]="+encodeURIComponent(arguments[fe]);return"Minified React error #"+Ge+"; visit "+it+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},le={};function U(Ge,it,fe){this.props=Ge,this.context=it,this.refs=le,this.updater=fe||J}function G(){}function $(Ge,it,fe){this.props=Ge,this.context=it,this.refs=le,this.updater=fe||J}U.prototype.isReactComponent={},U.prototype.setState=function(Ge,it){if("object"!=typeof Ge&&"function"!=typeof Ge&&null!=Ge)throw Error(W(85));this.updater.enqueueSetState(this,Ge,it,"setState")},U.prototype.forceUpdate=function(Ge){this.updater.enqueueForceUpdate(this,Ge,"forceUpdate")},G.prototype=U.prototype;var ee=$.prototype=new G;ee.constructor=$,k(ee,U.prototype),ee.isPureReactComponent=!0;var _e={current:null},be=Object.prototype.hasOwnProperty,me={key:!0,ref:!0,__self:!0,__source:!0};function v(Ge,it,fe){var te,se={},De=null,Ve=null;if(null!=it)for(te in void 0!==it.ref&&(Ve=it.ref),void 0!==it.key&&(De=""+it.key),it)be.call(it,te)&&!me.hasOwnProperty(te)&&(se[te]=it[te]);var de=arguments.length-2;if(1===de)se.children=fe;else if(1<de){for(var ve=Array(de),rt=0;rt<de;rt++)ve[rt]=arguments[rt+2];se.children=ve}if(Ge&&Ge.defaultProps)for(te in de=Ge.defaultProps)void 0===se[te]&&(se[te]=de[te]);return{$$typeof:x,type:Ge,key:De,ref:Ve,props:se,_owner:_e.current}}function _(Ge){return"object"==typeof Ge&&null!==Ge&&Ge.$$typeof===x}var N=/\/+/g,A=[];function ne(Ge,it,fe,te){if(A.length){var se=A.pop();return se.result=Ge,se.keyPrefix=it,se.func=fe,se.context=te,se.count=0,se}return{result:Ge,keyPrefix:it,func:fe,context:te,count:0}}function pe(Ge){Ge.result=null,Ge.keyPrefix=null,Ge.func=null,Ge.context=null,Ge.count=0,10>A.length&&A.push(Ge)}function Le(Ge,it,fe,te){var se=typeof Ge;("undefined"===se||"boolean"===se)&&(Ge=null);var De=!1;if(null===Ge)De=!0;else switch(se){case"string":case"number":De=!0;break;case"object":switch(Ge.$$typeof){case x:case L:De=!0}}if(De)return fe(te,Ge,""===it?"."+$e(Ge,0):it),1;if(De=0,it=""===it?".":it+":",Array.isArray(Ge))for(var Ve=0;Ve<Ge.length;Ve++){var de=it+$e(se=Ge[Ve],Ve);De+=Le(se,de,fe,te)}else if("function"==typeof(de=null===Ge||"object"!=typeof Ge?null:"function"==typeof(de=Q&&Ge[Q]||Ge["@@iterator"])?de:null))for(Ge=de.call(Ge),Ve=0;!(se=Ge.next()).done;)De+=Le(se=se.value,de=it+$e(se,Ve++),fe,te);else if("object"===se)throw fe=""+Ge,Error(W(31,"[object Object]"===fe?"object with keys {"+Object.keys(Ge).join(", ")+"}":fe,""));return De}function oe(Ge,it,fe){return null==Ge?0:Le(Ge,"",it,fe)}function $e(Ge,it){return"object"==typeof Ge&&null!==Ge&&null!=Ge.key?function E(Ge){var it={"=":"=0",":":"=2"};return"$"+(""+Ge).replace(/[=:]/g,function(fe){return it[fe]})}(Ge.key):it.toString(36)}function ct(Ge,it){Ge.func.call(Ge.context,it,Ge.count++)}function Ne(Ge,it,fe){var te=Ge.result,se=Ge.keyPrefix;Ge=Ge.func.call(Ge.context,it,Ge.count++),Array.isArray(Ge)?Je(Ge,te,fe,function(De){return De}):null!=Ge&&(_(Ge)&&(Ge=function T(Ge,it){return{$$typeof:x,type:Ge.type,key:it,ref:Ge.ref,props:Ge.props,_owner:Ge._owner}}(Ge,se+(!Ge.key||it&&it.key===Ge.key?"":(""+Ge.key).replace(N,"$&/")+"/")+fe)),te.push(Ge))}function Je(Ge,it,fe,te,se){var De="";null!=fe&&(De=(""+fe).replace(N,"$&/")+"/"),oe(Ge,Ne,it=ne(it,De,te,se)),pe(it)}var Ze={current:null};function mt(){var Ge=Ze.current;if(null===Ge)throw Error(W(321));return Ge}var nt={ReactCurrentDispatcher:Ze,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:_e,IsSomeRendererActing:{current:!1},assign:k};O.Children={map:function(Ge,it,fe){if(null==Ge)return Ge;var te=[];return Je(Ge,te,null,it,fe),te},forEach:function(Ge,it,fe){if(null==Ge)return Ge;oe(Ge,ct,it=ne(null,null,it,fe)),pe(it)},count:function(Ge){return oe(Ge,function(){return null},null)},toArray:function(Ge){var it=[];return Je(Ge,it,null,function(fe){return fe}),it},only:function(Ge){if(!_(Ge))throw Error(W(143));return Ge}},O.Component=U,O.Fragment=j,O.Profiler=m,O.PureComponent=$,O.StrictMode=d,O.Suspense=z,O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nt,O.cloneElement=function(Ge,it,fe){if(null==Ge)throw Error(W(267,Ge));var te=k({},Ge.props),se=Ge.key,De=Ge.ref,Ve=Ge._owner;if(null!=it){if(void 0!==it.ref&&(De=it.ref,Ve=_e.current),void 0!==it.key&&(se=""+it.key),Ge.type&&Ge.type.defaultProps)var de=Ge.type.defaultProps;for(ve in it)be.call(it,ve)&&!me.hasOwnProperty(ve)&&(te[ve]=void 0===it[ve]&&void 0!==de?de[ve]:it[ve])}var ve=arguments.length-2;if(1===ve)te.children=fe;else if(1<ve){de=Array(ve);for(var rt=0;rt<ve;rt++)de[rt]=arguments[rt+2];te.children=de}return{$$typeof:x,type:Ge.type,key:se,ref:De,props:te,_owner:Ve}},O.createContext=function(Ge,it){return void 0===it&&(it=null),(Ge={$$typeof:R,_calculateChangedBits:it,_currentValue:Ge,_currentValue2:Ge,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:y,_context:Ge},Ge.Consumer=Ge},O.createElement=v,O.createFactory=function(Ge){var it=v.bind(null,Ge);return it.type=Ge,it},O.createRef=function(){return{current:null}},O.forwardRef=function(Ge){return{$$typeof:M,render:Ge}},O.isValidElement=_,O.lazy=function(Ge){return{$$typeof:X,_ctor:Ge,_status:-1,_result:null}},O.memo=function(Ge,it){return{$$typeof:Y,type:Ge,compare:void 0===it?null:it}},O.useCallback=function(Ge,it){return mt().useCallback(Ge,it)},O.useContext=function(Ge,it){return mt().useContext(Ge,it)},O.useDebugValue=function(){},O.useEffect=function(Ge,it){return mt().useEffect(Ge,it)},O.useImperativeHandle=function(Ge,it,fe){return mt().useImperativeHandle(Ge,it,fe)},O.useLayoutEffect=function(Ge,it){return mt().useLayoutEffect(Ge,it)},O.useMemo=function(Ge,it){return mt().useMemo(Ge,it)},O.useReducer=function(Ge,it,fe){return mt().useReducer(Ge,it,fe)},O.useRef=function(Ge){return mt().useRef(Ge)},O.useState=function(Ge){return mt().useState(Ge)},O.version="16.14.0"},6712:(Ce,O,S)=>{Ce.exports=S(298)},7446:Ce=>{var S={};function k(d,m,y){y||(y=Error);var M=function(z){function Y(X,Q,W){return z.call(this,function R(z,Y,X){return"string"==typeof m?m:m(z,Y,X)}(X,Q,W))||this}return function O(d,m){d.prototype=Object.create(m.prototype),d.prototype.constructor=d,d.__proto__=m}(Y,z),Y}(y);M.prototype.name=y.name,M.prototype.code=d,S[d]=M}function o(d,m){if(Array.isArray(d)){var y=d.length;return d=d.map(function(R){return String(R)}),y>2?"one of ".concat(m," ").concat(d.slice(0,y-1).join(", "),", or ")+d[y-1]:2===y?"one of ".concat(m," ").concat(d[0]," or ").concat(d[1]):"of ".concat(m," ").concat(d[0])}return"of ".concat(m," ").concat(String(d))}k("ERR_INVALID_OPT_VALUE",function(d,m){return'The value "'+m+'" is invalid for option "'+d+'"'},TypeError),k("ERR_INVALID_ARG_TYPE",function(d,m,y){var R,M;if("string"==typeof m&&function x(d,m,y){return d.substr(!y||y<0?0:+y,m.length)===m}(m,"not ")?(R="must not be",m=m.replace(/^not /,"")):R="must be",function L(d,m,y){return(void 0===y||y>d.length)&&(y=d.length),d.substring(y-m.length,y)===m}(d," argument"))M="The ".concat(d," ").concat(R," ").concat(o(m,"type"));else{var z=function j(d,m,y){return"number"!=typeof y&&(y=0),!(y+m.length>d.length)&&-1!==d.indexOf(m,y)}(d,".")?"property":"argument";M='The "'.concat(d,'" ').concat(z," ").concat(R," ").concat(o(m,"type"))}return M+". Received type ".concat(typeof y)},TypeError),k("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),k("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),k("ERR_STREAM_PREMATURE_CLOSE","Premature close"),k("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),k("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),k("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),k("ERR_STREAM_WRITE_AFTER_END","write after end"),k("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),k("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),k("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ce.exports.q=S},9800:(Ce,O,S)=>{var k=Object.keys||function(M){var z=[];for(var Y in M)z.push(Y);return z};Ce.exports=m;var o=S(1396),x=S(1120);S(5035)(m,o);for(var L=k(x.prototype),j=0;j<L.length;j++){var d=L[j];m.prototype[d]||(m.prototype[d]=x.prototype[d])}function m(M){if(!(this instanceof m))return new m(M);o.call(this,M),x.call(this,M),this.allowHalfOpen=!0,M&&(!1===M.readable&&(this.readable=!1),!1===M.writable&&(this.writable=!1),!1===M.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",y)))}function y(){this._writableState.ended||process.nextTick(R,this)}function R(M){M.end()}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(m.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(m.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(z){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=z,this._writableState.destroyed=z)}})},1908:(Ce,O,S)=>{Ce.exports=o;var k=S(8157);function o(x){if(!(this instanceof o))return new o(x);k.call(this,x)}S(5035)(o,k),o.prototype._transform=function(x,L,j){j(null,x)}},1396:(Ce,O,S)=>{var k;Ce.exports=_,_.ReadableState=T,S(3358);var M,x=function(ve,rt){return ve.listeners(rt).length},L=S(8431),j=S(3195).Buffer,d=global.Uint8Array||function(){},R=S(4616);M=R&&R.debuglog?R.debuglog("stream"):function(){};var $,ee,_e,z=S(350),Y=S(5923),Q=S(1561).getHighWaterMark,W=S(7446).q,J=W.ERR_INVALID_ARG_TYPE,le=W.ERR_STREAM_PUSH_AFTER_EOF,U=W.ERR_METHOD_NOT_IMPLEMENTED,G=W.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;S(5035)(_,L);var be=Y.errorOrDestroy,me=["error","close","destroy","pause","resume"];function T(de,ve,rt){k=k||S(9800),"boolean"!=typeof rt&&(rt=ve instanceof k),this.objectMode=!!(de=de||{}).objectMode,rt&&(this.objectMode=this.objectMode||!!de.readableObjectMode),this.highWaterMark=Q(this,de,"readableHighWaterMark",rt),this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==de.emitClose,this.autoDestroy=!!de.autoDestroy,this.destroyed=!1,this.defaultEncoding=de.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,de.encoding&&($||($=S(4547).s),this.decoder=new $(de.encoding),this.encoding=de.encoding)}function _(de){if(k=k||S(9800),!(this instanceof _))return new _(de);this._readableState=new T(de,this,this instanceof k),this.readable=!0,de&&("function"==typeof de.read&&(this._read=de.read),"function"==typeof de.destroy&&(this._destroy=de.destroy)),L.call(this)}function E(de,ve,rt,xe,q){M("readableAddChunk",ve);var K,D=de._readableState;if(null===ve)D.reading=!1,function oe(de,ve){if(M("onEofChunk"),!ve.ended){if(ve.decoder){var rt=ve.decoder.end();rt&&rt.length&&(ve.buffer.push(rt),ve.length+=ve.objectMode?1:rt.length)}ve.ended=!0,ve.sync?$e(de):(ve.needReadable=!1,ve.emittedReadable||(ve.emittedReadable=!0,ct(de)))}}(de,D);else if(q||(K=function A(de,ve){var rt;return!function y(de){return j.isBuffer(de)||de instanceof d}(ve)&&"string"!=typeof ve&&void 0!==ve&&!de.objectMode&&(rt=new J("chunk",["string","Buffer","Uint8Array"],ve)),rt}(D,ve)),K)be(de,K);else if(D.objectMode||ve&&ve.length>0)if("string"!=typeof ve&&!D.objectMode&&Object.getPrototypeOf(ve)!==j.prototype&&(ve=function m(de){return j.from(de)}(ve)),xe)D.endEmitted?be(de,new G):N(de,D,ve,!0);else if(D.ended)be(de,new le);else{if(D.destroyed)return!1;D.reading=!1,D.decoder&&!rt?(ve=D.decoder.write(ve),D.objectMode||0!==ve.length?N(de,D,ve,!1):Ne(de,D)):N(de,D,ve,!1)}else xe||(D.reading=!1,Ne(de,D));return!D.ended&&(D.length<D.highWaterMark||0===D.length)}function N(de,ve,rt,xe){ve.flowing&&0===ve.length&&!ve.sync?(ve.awaitDrain=0,de.emit("data",rt)):(ve.length+=ve.objectMode?1:rt.length,xe?ve.buffer.unshift(rt):ve.buffer.push(rt),ve.needReadable&&$e(de)),Ne(de,ve)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ve){!this._readableState||(this._readableState.destroyed=ve)}}),_.prototype.destroy=Y.destroy,_.prototype._undestroy=Y.undestroy,_.prototype._destroy=function(de,ve){ve(de)},_.prototype.push=function(de,ve){var xe,rt=this._readableState;return rt.objectMode?xe=!0:"string"==typeof de&&((ve=ve||rt.defaultEncoding)!==rt.encoding&&(de=j.from(de,ve),ve=""),xe=!0),E(this,de,ve,!1,xe)},_.prototype.unshift=function(de){return E(this,de,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(de){$||($=S(4547).s);var ve=new $(de);this._readableState.decoder=ve,this._readableState.encoding=this._readableState.decoder.encoding;for(var rt=this._readableState.buffer.head,xe="";null!==rt;)xe+=ve.write(rt.data),rt=rt.next;return this._readableState.buffer.clear(),""!==xe&&this._readableState.buffer.push(xe),this._readableState.length=xe.length,this};var ne=1073741824;function Le(de,ve){return de<=0||0===ve.length&&ve.ended?0:ve.objectMode?1:de!=de?ve.flowing&&ve.length?ve.buffer.head.data.length:ve.length:(de>ve.highWaterMark&&(ve.highWaterMark=function pe(de){return de>=ne?de=ne:(de--,de|=de>>>1,de|=de>>>2,de|=de>>>4,de|=de>>>8,de|=de>>>16,de++),de}(de)),de<=ve.length?de:ve.ended?ve.length:(ve.needReadable=!0,0))}function $e(de){var ve=de._readableState;M("emitReadable",ve.needReadable,ve.emittedReadable),ve.needReadable=!1,ve.emittedReadable||(M("emitReadable",ve.flowing),ve.emittedReadable=!0,process.nextTick(ct,de))}function ct(de){var ve=de._readableState;M("emitReadable_",ve.destroyed,ve.length,ve.ended),!ve.destroyed&&(ve.length||ve.ended)&&(de.emit("readable"),ve.emittedReadable=!1),ve.needReadable=!ve.flowing&&!ve.ended&&ve.length<=ve.highWaterMark,fe(de)}function Ne(de,ve){ve.readingMore||(ve.readingMore=!0,process.nextTick(Je,de,ve))}function Je(de,ve){for(;!ve.reading&&!ve.ended&&(ve.length<ve.highWaterMark||ve.flowing&&0===ve.length);){var rt=ve.length;if(M("maybeReadMore read 0"),de.read(0),rt===ve.length)break}ve.readingMore=!1}function mt(de){var ve=de._readableState;ve.readableListening=de.listenerCount("readable")>0,ve.resumeScheduled&&!ve.paused?ve.flowing=!0:de.listenerCount("data")>0&&de.resume()}function nt(de){M("readable nexttick read 0"),de.read(0)}function it(de,ve){M("resume",ve.reading),ve.reading||de.read(0),ve.resumeScheduled=!1,de.emit("resume"),fe(de),ve.flowing&&!ve.reading&&de.read(0)}function fe(de){var ve=de._readableState;for(M("flow",ve.flowing);ve.flowing&&null!==de.read(););}function te(de,ve){return 0===ve.length?null:(ve.objectMode?rt=ve.buffer.shift():!de||de>=ve.length?(rt=ve.decoder?ve.buffer.join(""):1===ve.buffer.length?ve.buffer.first():ve.buffer.concat(ve.length),ve.buffer.clear()):rt=ve.buffer.consume(de,ve.decoder),rt);var rt}function se(de){var ve=de._readableState;M("endReadable",ve.endEmitted),ve.endEmitted||(ve.ended=!0,process.nextTick(De,ve,de))}function De(de,ve){if(M("endReadableNT",de.endEmitted,de.length),!de.endEmitted&&0===de.length&&(de.endEmitted=!0,ve.readable=!1,ve.emit("end"),de.autoDestroy)){var rt=ve._writableState;(!rt||rt.autoDestroy&&rt.finished)&&ve.destroy()}}function Ve(de,ve){for(var rt=0,xe=de.length;rt<xe;rt++)if(de[rt]===ve)return rt;return-1}_.prototype.read=function(de){M("read",de),de=parseInt(de,10);var ve=this._readableState,rt=de;if(0!==de&&(ve.emittedReadable=!1),0===de&&ve.needReadable&&((0!==ve.highWaterMark?ve.length>=ve.highWaterMark:ve.length>0)||ve.ended))return M("read: emitReadable",ve.length,ve.ended),0===ve.length&&ve.ended?se(this):$e(this),null;if(0===(de=Le(de,ve))&&ve.ended)return 0===ve.length&&se(this),null;var q,xe=ve.needReadable;return M("need readable",xe),(0===ve.length||ve.length-de<ve.highWaterMark)&&M("length less than watermark",xe=!0),ve.ended||ve.reading?M("reading or ended",xe=!1):xe&&(M("do read"),ve.reading=!0,ve.sync=!0,0===ve.length&&(ve.needReadable=!0),this._read(ve.highWaterMark),ve.sync=!1,ve.reading||(de=Le(rt,ve))),null===(q=de>0?te(de,ve):null)?(ve.needReadable=ve.length<=ve.highWaterMark,de=0):(ve.length-=de,ve.awaitDrain=0),0===ve.length&&(ve.ended||(ve.needReadable=!0),rt!==de&&ve.ended&&se(this)),null!==q&&this.emit("data",q),q},_.prototype._read=function(de){be(this,new U("_read()"))},_.prototype.pipe=function(de,ve){var rt=this,xe=this._readableState;switch(xe.pipesCount){case 0:xe.pipes=de;break;case 1:xe.pipes=[xe.pipes,de];break;default:xe.pipes.push(de)}xe.pipesCount+=1,M("pipe count=%d opts=%j",xe.pipesCount,ve);var D=ve&&!1===ve.end||de===process.stdout||de===process.stderr?Pe:ge;function ge(){M("onend"),de.end()}xe.endEmitted?process.nextTick(D):rt.once("end",D),de.on("unpipe",function K(ei,nn){M("onunpipe"),ei===rt&&nn&&!1===nn.hasUnpiped&&(nn.hasUnpiped=!0,function ot(){M("cleanup"),de.removeListener("close",qt),de.removeListener("finish",tn),de.removeListener("drain",je),de.removeListener("error",kt),de.removeListener("unpipe",K),rt.removeListener("end",ge),rt.removeListener("end",Pe),rt.removeListener("data",Ft),tt=!0,xe.awaitDrain&&(!de._writableState||de._writableState.needDrain)&&je()}())});var je=function Ze(de){return function(){var rt=de._readableState;M("pipeOnDrain",rt.awaitDrain),rt.awaitDrain&&rt.awaitDrain--,0===rt.awaitDrain&&x(de,"data")&&(rt.flowing=!0,fe(de))}}(rt);de.on("drain",je);var tt=!1;function Ft(ei){M("ondata");var nn=de.write(ei);M("dest.write",nn),!1===nn&&((1===xe.pipesCount&&xe.pipes===de||xe.pipesCount>1&&-1!==Ve(xe.pipes,de))&&!tt&&(M("false write response, pause",xe.awaitDrain),xe.awaitDrain++),rt.pause())}function kt(ei){M("onerror",ei),Pe(),de.removeListener("error",kt),0===x(de,"error")&&be(de,ei)}function qt(){de.removeListener("finish",tn),Pe()}function tn(){M("onfinish"),de.removeListener("close",qt),Pe()}function Pe(){M("unpipe"),rt.unpipe(de)}return rt.on("data",Ft),function v(de,ve,rt){if("function"==typeof de.prependListener)return de.prependListener(ve,rt);de._events&&de._events[ve]?Array.isArray(de._events[ve])?de._events[ve].unshift(rt):de._events[ve]=[rt,de._events[ve]]:de.on(ve,rt)}(de,"error",kt),de.once("close",qt),de.once("finish",tn),de.emit("pipe",rt),xe.flowing||(M("pipe resume"),rt.resume()),de},_.prototype.unpipe=function(de){var ve=this._readableState,rt={hasUnpiped:!1};if(0===ve.pipesCount)return this;if(1===ve.pipesCount)return de&&de!==ve.pipes||(de||(de=ve.pipes),ve.pipes=null,ve.pipesCount=0,ve.flowing=!1,de&&de.emit("unpipe",this,rt)),this;if(!de){var xe=ve.pipes,q=ve.pipesCount;ve.pipes=null,ve.pipesCount=0,ve.flowing=!1;for(var D=0;D<q;D++)xe[D].emit("unpipe",this,{hasUnpiped:!1});return this}var K=Ve(ve.pipes,de);return-1===K||(ve.pipes.splice(K,1),ve.pipesCount-=1,1===ve.pipesCount&&(ve.pipes=ve.pipes[0]),de.emit("unpipe",this,rt)),this},_.prototype.addListener=_.prototype.on=function(de,ve){var rt=L.prototype.on.call(this,de,ve),xe=this._readableState;return"data"===de?(xe.readableListening=this.listenerCount("readable")>0,!1!==xe.flowing&&this.resume()):"readable"===de&&!xe.endEmitted&&!xe.readableListening&&(xe.readableListening=xe.needReadable=!0,xe.flowing=!1,xe.emittedReadable=!1,M("on readable",xe.length,xe.reading),xe.length?$e(this):xe.reading||process.nextTick(nt,this)),rt},_.prototype.removeListener=function(de,ve){var rt=L.prototype.removeListener.call(this,de,ve);return"readable"===de&&process.nextTick(mt,this),rt},_.prototype.removeAllListeners=function(de){var ve=L.prototype.removeAllListeners.apply(this,arguments);return("readable"===de||void 0===de)&&process.nextTick(mt,this),ve},_.prototype.resume=function(){var de=this._readableState;return de.flowing||(M("resume"),de.flowing=!de.readableListening,function Ge(de,ve){ve.resumeScheduled||(ve.resumeScheduled=!0,process.nextTick(it,de,ve))}(this,de)),de.paused=!1,this},_.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(de){var ve=this,rt=this._readableState,xe=!1;for(var q in de.on("end",function(){if(M("wrapped end"),rt.decoder&&!rt.ended){var K=rt.decoder.end();K&&K.length&&ve.push(K)}ve.push(null)}),de.on("data",function(K){M("wrapped data"),rt.decoder&&(K=rt.decoder.write(K)),rt.objectMode&&null==K||!(rt.objectMode||K&&K.length)||ve.push(K)||(xe=!0,de.pause())}),de)void 0===this[q]&&"function"==typeof de[q]&&(this[q]=function(ge){return function(){return de[ge].apply(de,arguments)}}(q));for(var D=0;D<me.length;D++)de.on(me[D],this.emit.bind(this,me[D]));return this._read=function(K){M("wrapped _read",K),xe&&(xe=!1,de.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return void 0===ee&&(ee=S(2325)),ee(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ve){this._readableState&&(this._readableState.flowing=ve)}}),_._fromList=te,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(de,ve){return void 0===_e&&(_e=S(6757)),_e(_,de,ve)})},8157:(Ce,O,S)=>{Ce.exports=y;var k=S(7446).q,o=k.ERR_METHOD_NOT_IMPLEMENTED,x=k.ERR_MULTIPLE_CALLBACK,L=k.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=k.ERR_TRANSFORM_WITH_LENGTH_0,d=S(9800);function m(z,Y){var X=this._transformState;X.transforming=!1;var Q=X.writecb;if(null===Q)return this.emit("error",new x);X.writechunk=null,X.writecb=null,null!=Y&&this.push(Y),Q(z);var W=this._readableState;W.reading=!1,(W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}function y(z){if(!(this instanceof y))return new y(z);d.call(this,z),this._transformState={afterTransform:m.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,z&&("function"==typeof z.transform&&(this._transform=z.transform),"function"==typeof z.flush&&(this._flush=z.flush)),this.on("prefinish",R)}function R(){var z=this;"function"!=typeof this._flush||this._readableState.destroyed?M(this,null,null):this._flush(function(Y,X){M(z,Y,X)})}function M(z,Y,X){if(Y)return z.emit("error",Y);if(null!=X&&z.push(X),z._writableState.length)throw new j;if(z._transformState.transforming)throw new L;return z.push(null)}S(5035)(y,d),y.prototype.push=function(z,Y){return this._transformState.needTransform=!1,d.prototype.push.call(this,z,Y)},y.prototype._transform=function(z,Y,X){X(new o("_transform()"))},y.prototype._write=function(z,Y,X){var Q=this._transformState;if(Q.writecb=X,Q.writechunk=z,Q.writeencoding=Y,!Q.transforming){var W=this._readableState;(Q.needTransform||W.needReadable||W.length<W.highWaterMark)&&this._read(W.highWaterMark)}},y.prototype._read=function(z){var Y=this._transformState;null===Y.writechunk||Y.transforming?Y.needTransform=!0:(Y.transforming=!0,this._transform(Y.writechunk,Y.writeencoding,Y.afterTransform))},y.prototype._destroy=function(z,Y){d.prototype._destroy.call(this,z,function(X){Y(X)})}},1120:(Ce,O,S)=>{function o(fe){var te=this;this.next=null,this.entry=null,this.finish=function(){!function it(fe,te,se){var De=fe.entry;for(fe.entry=null;De;){var Ve=De.callback;te.pendingcb--,Ve(se),De=De.next}te.corkedRequestsFree.next=fe}(te,fe)}}var x;Ce.exports=T,T.WritableState=me;var v,L={deprecate:S(8059)},j=S(8431),d=S(3195).Buffer,m=global.Uint8Array||function(){},M=S(5923),Y=S(1561).getHighWaterMark,X=S(7446).q,Q=X.ERR_INVALID_ARG_TYPE,W=X.ERR_METHOD_NOT_IMPLEMENTED,J=X.ERR_MULTIPLE_CALLBACK,le=X.ERR_STREAM_CANNOT_PIPE,U=X.ERR_STREAM_DESTROYED,G=X.ERR_STREAM_NULL_VALUES,$=X.ERR_STREAM_WRITE_AFTER_END,ee=X.ERR_UNKNOWN_ENCODING,_e=M.errorOrDestroy;function be(){}function me(fe,te,se){x=x||S(9800),"boolean"!=typeof se&&(se=te instanceof x),this.objectMode=!!(fe=fe||{}).objectMode,se&&(this.objectMode=this.objectMode||!!fe.writableObjectMode),this.highWaterMark=Y(this,fe,"writableHighWaterMark",se),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===fe.decodeStrings),this.defaultEncoding=fe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ve){!function oe(fe,te){var se=fe._writableState,De=se.sync,Ve=se.writecb;if("function"!=typeof Ve)throw new J;if(function Le(fe){fe.writing=!1,fe.writecb=null,fe.length-=fe.writelen,fe.writelen=0}(se),te)!function pe(fe,te,se,De,Ve){--te.pendingcb,se?(process.nextTick(Ve,De),process.nextTick(nt,fe,te),fe._writableState.errorEmitted=!0,_e(fe,De)):(Ve(De),fe._writableState.errorEmitted=!0,_e(fe,De),nt(fe,te))}(fe,se,De,te,Ve);else{var de=Je(se)||fe.destroyed;!de&&!se.corked&&!se.bufferProcessing&&se.bufferedRequest&&Ne(fe,se),De?process.nextTick($e,fe,se,de,Ve):$e(fe,se,de,Ve)}}(te,Ve)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function T(fe){var te=this instanceof(x=x||S(9800));if(!te&&!v.call(T,this))return new T(fe);this._writableState=new me(fe,this,te),this.writable=!0,fe&&("function"==typeof fe.write&&(this._write=fe.write),"function"==typeof fe.writev&&(this._writev=fe.writev),"function"==typeof fe.destroy&&(this._destroy=fe.destroy),"function"==typeof fe.final&&(this._final=fe.final)),j.call(this)}function ne(fe,te,se,De,Ve,de,ve){te.writelen=De,te.writecb=ve,te.writing=!0,te.sync=!0,te.destroyed?te.onwrite(new U("write")):se?fe._writev(Ve,te.onwrite):fe._write(Ve,de,te.onwrite),te.sync=!1}function $e(fe,te,se,De){se||function ct(fe,te){0===te.length&&te.needDrain&&(te.needDrain=!1,fe.emit("drain"))}(fe,te),te.pendingcb--,De(),nt(fe,te)}function Ne(fe,te){te.bufferProcessing=!0;var se=te.bufferedRequest;if(fe._writev&&se&&se.next){var Ve=new Array(te.bufferedRequestCount),de=te.corkedRequestsFree;de.entry=se;for(var ve=0,rt=!0;se;)Ve[ve]=se,se.isBuf||(rt=!1),se=se.next,ve+=1;Ve.allBuffers=rt,ne(fe,te,!0,te.length,Ve,"",de.finish),te.pendingcb++,te.lastBufferedRequest=null,de.next?(te.corkedRequestsFree=de.next,de.next=null):te.corkedRequestsFree=new o(te),te.bufferedRequestCount=0}else{for(;se;){var xe=se.chunk;if(ne(fe,te,!1,te.objectMode?1:xe.length,xe,se.encoding,se.callback),se=se.next,te.bufferedRequestCount--,te.writing)break}null===se&&(te.lastBufferedRequest=null)}te.bufferedRequest=se,te.bufferProcessing=!1}function Je(fe){return fe.ending&&0===fe.length&&null===fe.bufferedRequest&&!fe.finished&&!fe.writing}function Ze(fe,te){fe._final(function(se){te.pendingcb--,se&&_e(fe,se),te.prefinished=!0,fe.emit("prefinish"),nt(fe,te)})}function nt(fe,te){var se=Je(te);if(se&&(function mt(fe,te){!te.prefinished&&!te.finalCalled&&("function"!=typeof fe._final||te.destroyed?(te.prefinished=!0,fe.emit("prefinish")):(te.pendingcb++,te.finalCalled=!0,process.nextTick(Ze,fe,te)))}(fe,te),0===te.pendingcb&&(te.finished=!0,fe.emit("finish"),te.autoDestroy))){var De=fe._readableState;(!De||De.autoDestroy&&De.endEmitted)&&fe.destroy()}return se}S(5035)(T,j),me.prototype.getBuffer=function(){for(var te=this.bufferedRequest,se=[];te;)se.push(te),te=te.next;return se},function(){try{Object.defineProperty(me.prototype,"buffer",{get:L.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(te){return!!v.call(this,te)||this===T&&te&&te._writableState instanceof me}})):v=function(te){return te instanceof this},T.prototype.pipe=function(){_e(this,new le)},T.prototype.write=function(fe,te,se){var De=this._writableState,Ve=!1,de=!De.objectMode&&function R(fe){return d.isBuffer(fe)||fe instanceof m}(fe);return de&&!d.isBuffer(fe)&&(fe=function y(fe){return d.from(fe)}(fe)),"function"==typeof te&&(se=te,te=null),de?te="buffer":te||(te=De.defaultEncoding),"function"!=typeof se&&(se=be),De.ending?function _(fe,te){var se=new $;_e(fe,se),process.nextTick(te,se)}(this,se):(de||function E(fe,te,se,De){var Ve;return null===se?Ve=new G:"string"!=typeof se&&!te.objectMode&&(Ve=new Q("chunk",["string","Buffer"],se)),!Ve||(_e(fe,Ve),process.nextTick(De,Ve),!1)}(this,De,fe,se))&&(De.pendingcb++,Ve=function A(fe,te,se,De,Ve,de){if(!se){var ve=function N(fe,te,se){return!fe.objectMode&&!1!==fe.decodeStrings&&"string"==typeof te&&(te=d.from(te,se)),te}(te,De,Ve);De!==ve&&(se=!0,Ve="buffer",De=ve)}var rt=te.objectMode?1:De.length;te.length+=rt;var xe=te.length<te.highWaterMark;if(xe||(te.needDrain=!0),te.writing||te.corked){var q=te.lastBufferedRequest;te.lastBufferedRequest={chunk:De,encoding:Ve,isBuf:se,callback:de,next:null},q?q.next=te.lastBufferedRequest:te.bufferedRequest=te.lastBufferedRequest,te.bufferedRequestCount+=1}else ne(fe,te,!1,rt,De,Ve,de);return xe}(this,De,de,fe,te,se)),Ve},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var fe=this._writableState;fe.corked&&(fe.corked--,!fe.writing&&!fe.corked&&!fe.bufferProcessing&&fe.bufferedRequest&&Ne(this,fe))},T.prototype.setDefaultEncoding=function(te){if("string"==typeof te&&(te=te.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((te+"").toLowerCase())>-1))throw new ee(te);return this._writableState.defaultEncoding=te,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(fe,te,se){se(new W("_write()"))},T.prototype._writev=null,T.prototype.end=function(fe,te,se){var De=this._writableState;return"function"==typeof fe?(se=fe,fe=null,te=null):"function"==typeof te&&(se=te,te=null),null!=fe&&this.write(fe,te),De.corked&&(De.corked=1,this.uncork()),De.ending||function Ge(fe,te,se){te.ending=!0,nt(fe,te),se&&(te.finished?process.nextTick(se):fe.once("finish",se)),te.ended=!0,fe.writable=!1}(this,De,se),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(te){!this._writableState||(this._writableState.destroyed=te)}}),T.prototype.destroy=M.destroy,T.prototype._undestroy=M.undestroy,T.prototype._destroy=function(fe,te){te(fe)}},2325:(Ce,O,S)=>{var k;function o(U,G,$){return G in U?Object.defineProperty(U,G,{value:$,enumerable:!0,configurable:!0,writable:!0}):U[G]=$,U}var x=S(7722),L=Symbol("lastResolve"),j=Symbol("lastReject"),d=Symbol("error"),m=Symbol("ended"),y=Symbol("lastPromise"),R=Symbol("handlePromise"),M=Symbol("stream");function z(U,G){return{value:U,done:G}}function Y(U){var G=U[L];if(null!==G){var $=U[M].read();null!==$&&(U[y]=null,U[L]=null,U[j]=null,G(z($,!1)))}}function X(U){process.nextTick(Y,U)}var W=Object.getPrototypeOf(function(){}),J=Object.setPrototypeOf((o(k={get stream(){return this[M]},next:function(){var G=this,$=this[d];if(null!==$)return Promise.reject($);if(this[m])return Promise.resolve(z(void 0,!0));if(this[M].destroyed)return new Promise(function(me,v){process.nextTick(function(){G[d]?v(G[d]):me(z(void 0,!0))})});var _e,ee=this[y];if(ee)_e=new Promise(function Q(U,G){return function($,ee){U.then(function(){G[m]?$(z(void 0,!0)):G[R]($,ee)},ee)}}(ee,this));else{var be=this[M].read();if(null!==be)return Promise.resolve(z(be,!1));_e=new Promise(this[R])}return this[y]=_e,_e}},Symbol.asyncIterator,function(){return this}),o(k,"return",function(){var G=this;return new Promise(function($,ee){G[M].destroy(null,function(_e){_e?ee(_e):$(z(void 0,!0))})})}),k),W);Ce.exports=function(G){var $,ee=Object.create(J,(o($={},M,{value:G,writable:!0}),o($,L,{value:null,writable:!0}),o($,j,{value:null,writable:!0}),o($,d,{value:null,writable:!0}),o($,m,{value:G._readableState.endEmitted,writable:!0}),o($,R,{value:function(be,me){var v=ee[M].read();v?(ee[y]=null,ee[L]=null,ee[j]=null,be(z(v,!1))):(ee[L]=be,ee[j]=me)},writable:!0}),$));return ee[y]=null,x(G,function(_e){if(_e&&"ERR_STREAM_PREMATURE_CLOSE"!==_e.code){var be=ee[j];return null!==be&&(ee[y]=null,ee[L]=null,ee[j]=null,be(_e)),void(ee[d]=_e)}var me=ee[L];null!==me&&(ee[y]=null,ee[L]=null,ee[j]=null,me(z(void 0,!0))),ee[m]=!0}),G.on("readable",X.bind(null,ee)),ee}},350:(Ce,O,S)=>{function k(X,Q){var W=Object.keys(X);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(X);Q&&(J=J.filter(function(le){return Object.getOwnPropertyDescriptor(X,le).enumerable})),W.push.apply(W,J)}return W}function x(X,Q,W){return Q in X?Object.defineProperty(X,Q,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[Q]=W,X}function j(X,Q){for(var W=0;W<Q.length;W++){var J=Q[W];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(X,J.key,J)}}var y=S(3195).Buffer,M=S(2361).inspect,z=M&&M.custom||"inspect";function Y(X,Q,W){y.prototype.copy.call(X,Q,W)}Ce.exports=function(){function X(){(function L(X,Q){if(!(X instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,X),this.head=null,this.tail=null,this.length=0}return function d(X,Q,W){Q&&j(X.prototype,Q),W&&j(X,W)}(X,[{key:"push",value:function(W){var J={data:W,next:null};this.length>0?this.tail.next=J:this.head=J,this.tail=J,++this.length}},{key:"unshift",value:function(W){var J={data:W,next:this.head};0===this.length&&(this.tail=J),this.head=J,++this.length}},{key:"shift",value:function(){if(0!==this.length){var W=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,W}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(W){if(0===this.length)return"";for(var J=this.head,le=""+J.data;J=J.next;)le+=W+J.data;return le}},{key:"concat",value:function(W){if(0===this.length)return y.alloc(0);for(var J=y.allocUnsafe(W>>>0),le=this.head,U=0;le;)Y(le.data,J,U),U+=le.data.length,le=le.next;return J}},{key:"consume",value:function(W,J){var le;return W<this.head.data.length?(le=this.head.data.slice(0,W),this.head.data=this.head.data.slice(W)):le=W===this.head.data.length?this.shift():J?this._getString(W):this._getBuffer(W),le}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(W){var J=this.head,le=1,U=J.data;for(W-=U.length;J=J.next;){var G=J.data,$=W>G.length?G.length:W;if(U+=$===G.length?G:G.slice(0,W),0==(W-=$)){$===G.length?(++le,this.head=J.next?J.next:this.tail=null):(this.head=J,J.data=G.slice($));break}++le}return this.length-=le,U}},{key:"_getBuffer",value:function(W){var J=y.allocUnsafe(W),le=this.head,U=1;for(le.data.copy(J),W-=le.data.length;le=le.next;){var G=le.data,$=W>G.length?G.length:W;if(G.copy(J,J.length-W,0,$),0==(W-=$)){$===G.length?(++U,this.head=le.next?le.next:this.tail=null):(this.head=le,le.data=G.slice($));break}++U}return this.length-=U,J}},{key:z,value:function(W,J){return M(this,function o(X){for(var Q=1;Q<arguments.length;Q++){var W=null!=arguments[Q]?arguments[Q]:{};Q%2?k(Object(W),!0).forEach(function(J){x(X,J,W[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(W)):k(Object(W)).forEach(function(J){Object.defineProperty(X,J,Object.getOwnPropertyDescriptor(W,J))})}return X}({},J,{depth:0,customInspect:!1}))}}]),X}()},5923:Ce=>{function S(j,d){x(j,d),k(j)}function k(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function x(j,d){j.emit("error",d)}Ce.exports={destroy:function O(j,d){var m=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(d?d(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(x,this,j)):process.nextTick(x,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(M){!d&&M?m._writableState?m._writableState.errorEmitted?process.nextTick(k,m):(m._writableState.errorEmitted=!0,process.nextTick(S,m,M)):process.nextTick(S,m,M):d?(process.nextTick(k,m),d(M)):process.nextTick(k,m)}),this)},undestroy:function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function L(j,d){var m=j._readableState,y=j._writableState;m&&m.autoDestroy||y&&y.autoDestroy?j.destroy(d):j.emit("error",d)}}},7722:(Ce,O,S)=>{var k=S(7446).q.ERR_STREAM_PREMATURE_CLOSE;function x(){}Ce.exports=function j(d,m,y){if("function"==typeof m)return j(d,null,m);m||(m={}),y=function o(d){var m=!1;return function(){if(!m){m=!0;for(var y=arguments.length,R=new Array(y),M=0;M<y;M++)R[M]=arguments[M];d.apply(this,R)}}}(y||x);var R=m.readable||!1!==m.readable&&d.readable,M=m.writable||!1!==m.writable&&d.writable,z=function(){d.writable||X()},Y=d._writableState&&d._writableState.finished,X=function(){M=!1,Y=!0,R||y.call(d)},Q=d._readableState&&d._readableState.endEmitted,W=function(){R=!1,Q=!0,M||y.call(d)},J=function($){y.call(d,$)},le=function(){var $;return R&&!Q?((!d._readableState||!d._readableState.ended)&&($=new k),y.call(d,$)):M&&!Y?((!d._writableState||!d._writableState.ended)&&($=new k),y.call(d,$)):void 0},U=function(){d.req.on("finish",X)};return function L(d){return d.setHeader&&"function"==typeof d.abort}(d)?(d.on("complete",X),d.on("abort",le),d.req?U():d.on("request",U)):M&&!d._writableState&&(d.on("end",z),d.on("close",z)),d.on("end",W),d.on("finish",X),!1!==m.error&&d.on("error",J),d.on("close",le),function(){d.removeListener("complete",X),d.removeListener("abort",le),d.removeListener("request",U),d.req&&d.req.removeListener("finish",X),d.removeListener("end",z),d.removeListener("close",z),d.removeListener("finish",X),d.removeListener("end",W),d.removeListener("error",J),d.removeListener("close",le)}}},6757:Ce=>{Ce.exports=function(){throw new Error("Readable.from is not available in the browser")}},8096:(Ce,O,S)=>{var k,x=S(7446).q,L=x.ERR_MISSING_ARGS,j=x.ERR_STREAM_DESTROYED;function d(X){if(X)throw X}function y(X,Q,W,J){J=function o(X){var Q=!1;return function(){Q||(Q=!0,X.apply(void 0,arguments))}}(J);var le=!1;X.on("close",function(){le=!0}),void 0===k&&(k=S(7722)),k(X,{readable:Q,writable:W},function(G){if(G)return J(G);le=!0,J()});var U=!1;return function(G){if(!le&&!U){if(U=!0,function m(X){return X.setHeader&&"function"==typeof X.abort}(X))return X.abort();if("function"==typeof X.destroy)return X.destroy();J(G||new j("pipe"))}}}function R(X){X()}function M(X,Q){return X.pipe(Q)}function z(X){return X.length&&"function"==typeof X[X.length-1]?X.pop():d}Ce.exports=function Y(){for(var X=arguments.length,Q=new Array(X),W=0;W<X;W++)Q[W]=arguments[W];var J=z(Q);if(Array.isArray(Q[0])&&(Q=Q[0]),Q.length<2)throw new L("streams");var le,U=Q.map(function(G,$){var ee=$<Q.length-1;return y(G,ee,$>0,function(be){le||(le=be),be&&U.forEach(R),!ee&&(U.forEach(R),J(le))})});return Q.reduce(M)}},1561:(Ce,O,S)=>{var k=S(7446).q.ERR_INVALID_OPT_VALUE;Ce.exports={getHighWaterMark:function x(L,j,d,m){var y=function o(L,j,d){return null!=L.highWaterMark?L.highWaterMark:j?L[d]:null}(j,m,d);if(null!=y){if(!isFinite(y)||Math.floor(y)!==y||y<0)throw new k(m?d:"highWaterMark",y);return Math.floor(y)}return L.objectMode?16:16384}}},8431:(Ce,O,S)=>{Ce.exports=S(3358).EventEmitter},8055:function(Ce){"undefined"!=typeof self&&self,Ce.exports=function(O){var S={};function k(o){if(S[o])return S[o].exports;var x=S[o]={i:o,l:!1,exports:{}};return O[o].call(x.exports,x,x.exports,k),x.l=!0,x.exports}return k.m=O,k.c=S,k.d=function(o,x,L){k.o(o,x)||Object.defineProperty(o,x,{enumerable:!0,get:L})},k.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},k.t=function(o,x){if(1&x&&(o=k(o)),8&x||4&x&&"object"==typeof o&&o&&o.__esModule)return o;var L=Object.create(null);if(k.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:o}),2&x&&"string"!=typeof o)for(var j in o)k.d(L,j,function(d){return o[d]}.bind(null,j));return L},k.n=function(o){var x=o&&o.__esModule?function(){return o.default}:function(){return o};return k.d(x,"a",x),x},k.o=function(o,x){return Object.prototype.hasOwnProperty.call(o,x)},k.p="",k(k.s=0)}([function(O,S,k){const{types:o,iterableTypes:x,errors:L}=k(1),j=k(2),d={[o.NUMBER]:j.isNumber,[o.BOOLEAN]:j.isBoolean,[o.STRING]:j.isString,[o.DATE]:j.isDate,[o.UNDEFINED]:j.isUndefined,[o.NULL]:j.isNull,[o.ARRAY]:j.isArray,[o.MAP]:j.isMap,[o.SET]:j.isSet,[o.ITERABLE_OBJECT]:j.isIterableObject},m={[o.DATE]:j.areDatesEqual};function y(X){const Q=Object.keys(d);let W=o.DEFAULT;for(let J=0;J<Q.length;J+=1)if(d[Q[J]](X)){W=Q[J];break}return W}function M(X,Q,W,J,le){const U={op:W,path:J};return"add"!==W&&"update"!==W||(U.val=Q),le&&"add"!==W&&(U.oldVal=X),U}function z(X,Q,W,J,le){const U=y(X),G=y(Q),$=J||[],ee=le||[];if((_e=U)===G&&x.indexOf(_e)>=0){const _e=function(v,T,_){if(_===o.ARRAY){const E=new Array(v.length>T.length?v.length:T.length);return E.fill(0),new Set(E.map((N,A)=>A))}return new Set(Object.keys(v).concat(Object.keys(T)))}(X,Q,U).values();let{value:be,done:me}=_e.next();for(;!me;){Object.prototype.hasOwnProperty.call(X,be)?Object.prototype.hasOwnProperty.call(Q,be)?z(X[be],Q[be],W,$.concat(be),ee):ee.push(M(X[be],Q[be],"delete",$.concat(be),W)):ee.push(M(X[be],Q[be],"add",$.concat(be),W));const v=_e.next();be=v.value,me=v.done}}else{const _e=function R(X,Q,W,J){let le;return W===o.UNDEFINED&&J!==o.UNDEFINED?le="add":W!==o.UNDEFINED&&J===o.UNDEFINED?le="delete":(U=X,G=Q,($=W)===J&&(m[$]?m[$](U,G):U===G)?j.noop():le="update"),le;var U,G,$}(X,Q,U,G);null!=_e&&ee.push(M(X,Q,_e,J,W))}var _e;return ee}const Y={add:j.setValueByPath,update:j.setValueByPath,delete:j.deleteValueByPath};O.exports={getDiff:(X,Q,W=!1)=>z(X,Q,W),applyDiff:(X,Q,W)=>function(J,le,U){if(!(le instanceof Array))throw new Error(L.INVALID_DIFF_FORMAT);let G=J;return le.forEach($=>{const{op:ee,val:_e,path:be}=$;if(!Y[ee])throw new Error(L.INVALID_DIFF_OP);G=Y[ee](G,be,_e,U)}),G}(X,Q,W)}},function(O,S){const k={NUMBER:"NUMBER",BOOLEAN:"BOOLEAN",STRING:"STRING",NULL:"NULL",UNDEFINED:"UNDEFINED",DATE:"DATE",ARRAY:"ARRAY",MAP:"MAP",SET:"SET",ITERABLE_OBJECT:"ITERABLE_OBJECT",DEFAULT:"OBJECT"};O.exports={types:k,iterableTypes:[k.ITERABLE_OBJECT,k.MAP,k.ARRAY,k.SET],errors:{EMPTY_DIFF:"No diff object is provided, Nothing to apply",INVALID_DIFF_FORMAT:"Invalid diff format",INVALID_DIFF_OP:"Unsupported operation provided into diff object"}}},function(O,S){const k=m=>y=>y instanceof m,o=k(Date),x=k(Array),L=k(Map),j=k(Set),d=m=>"[object Object]"===Object.prototype.toString.call(m);O.exports={isNumber:m=>"number"==typeof m,isBoolean:m=>"boolean"==typeof m,isString:m=>"string"==typeof m,isDate:o,isUndefined:m=>void 0===m,isNull:m=>null===m,isArray:x,isMap:L,isSet:j,isIterableObject:d,noop:()=>{},areDatesEqual:(m,y)=>m.getTime()===y.getTime(),setValueByPath:function(m,y=[],R,M){if(!x(y))throw new Error(`Diff path: "${y}" is not valid`);const{length:z}=y;if(0===z)return R;let Y=m;for(let X=0;X<z;X+=1){const Q=y[X];if(!Y)throw new Error(`Invalid path: "${y}" for object: ${JSON.stringify(m,null,2)}`);if(null==Q)throw new Error(`Invalid path: "${y}" for object: ${JSON.stringify(m,null,2)}`);X!==z-1?(Y=Y[Q],M&&M(Y)):Y[Q]=R}return m},deleteValueByPath:function(m,y){const R=y||[];if(0===R.length)return;let M=m;const{length:z}=R;for(let Y=0;Y<z;Y+=1)if(Y!==z-1){if(!M[R[Y]])throw new Error(`Invalid path: "${y}" for object: ${JSON.stringify(m,null,2)}`);M=M[R[Y]]}else if(d(M))delete M[R[Y]];else{const X=parseInt(R[Y],10);for(;M.length>X;)M.pop()}return m}}}])},3853:(Ce,O,S)=>{S.d(O,{b:()=>x});var k=S(9525),o=S(2971);function x(L,j){return(0,o.m)(j)?(0,k.z)(L,j,1):(0,k.z)(L,1)}},7580:(Ce,O,S)=>{S.d(O,{V:()=>R});var k=S(6936),o=S(7885),x=S(1944),L=S(4987),j=S(7543),d=S(3945),m=S(1817);const y=(0,j.d)(z=>function(X=null){z(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=X});function R(z,Y){const{first:X,each:Q,with:W=M,scheduler:J=Y??k.z,meta:le=null}=(0,o.q)(z)?{first:z}:"number"==typeof z?{each:z}:z;if(null==X&&null==Q)throw new TypeError("No timeout provided.");return(0,x.e)((U,G)=>{let $,ee,_e=null,be=0;const me=v=>{ee=(0,m.f)(G,J,()=>{try{$.unsubscribe(),(0,L.Xf)(W({meta:le,lastValue:_e,seen:be})).subscribe(G)}catch(T){G.error(T)}},v)};$=U.subscribe((0,d.x)(G,v=>{null==ee||ee.unsubscribe(),be++,G.next(_e=v),Q>0&&me(Q)},void 0,void 0,()=>{(null==ee?void 0:ee.closed)||null==ee||ee.unsubscribe(),_e=null})),!be&&me(null!=X?"number"==typeof X?X:+X-J.now():Q)})}function M(z){throw new y(z)}},538:(Ce,O,S)=>{S.d(O,{M:()=>m});var k=S(1944),o=S(3945),x=S(4987),L=S(9173),j=S(9635),d=S(420);function m(...y){const R=(0,d.jO)(y);return(0,k.e)((M,z)=>{const Y=y.length,X=new Array(Y);let Q=y.map(()=>!1),W=!1;for(let J=0;J<Y;J++)(0,x.Xf)(y[J]).subscribe((0,o.x)(z,le=>{X[J]=le,!W&&!Q[J]&&(Q[J]=!0,(W=Q.every(L.y))&&(Q=null))},j.Z));M.subscribe((0,o.x)(z,J=>{if(W){const le=[J,...X];z.next(R?R(...le):le)}}))})}},4915:(Ce,O,S)=>{S.d(O,{N:()=>j});var k=S(5417),x=S(1010);const j=new class L extends x.v{}(class o extends k.o{constructor(y,R){super(y,R),this.scheduler=y,this.work=R}schedule(y,R=0){return R>0?super.schedule(y,R):(this.delay=R,this.state=y,this.scheduler.flush(this),this)}execute(y,R){return R>0||this.closed?super.execute(y,R):this._execute(y,R)}requestAsyncId(y,R,M=0){return null!=M&&M>0||null==M&&this.delay>0?super.requestAsyncId(y,R,M):y.flush(this)}})},9708:(Ce,O,S)=>{var k=S(3195),o=k.Buffer;function x(j,d){for(var m in j)d[m]=j[m]}function L(j,d,m){return o(j,d,m)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?Ce.exports=k:(x(k,O),O.Buffer=L),L.prototype=Object.create(o.prototype),x(o,L),L.from=function(j,d,m){if("number"==typeof j)throw new TypeError("Argument must not be a number");return o(j,d,m)},L.alloc=function(j,d,m){if("number"!=typeof j)throw new TypeError("Argument must be a number");var y=o(j);return void 0!==d?"string"==typeof m?y.fill(d,m):y.fill(d):y.fill(0),y},L.allocUnsafe=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return o(j)},L.allocUnsafeSlow=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return k.SlowBuffer(j)}},3774:(Ce,O)=>{var S,k,o,x,L;if("undefined"==typeof window||"function"!=typeof MessageChannel){var j=null,d=null,m=function(){if(null!==j)try{var Ze=O.unstable_now();j(!0,Ze),j=null}catch(mt){throw setTimeout(m,0),mt}},y=Date.now();O.unstable_now=function(){return Date.now()-y},S=function(Ze){null!==j?setTimeout(S,0,Ze):(j=Ze,setTimeout(m,0))},k=function(Ze,mt){d=setTimeout(Ze,mt)},o=function(){clearTimeout(d)},x=function(){return!1},L=O.unstable_forceFrameRate=function(){}}else{var R=window.performance,M=window.Date,z=window.setTimeout,Y=window.clearTimeout;if("undefined"!=typeof console){var X=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof X&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof R&&"function"==typeof R.now)O.unstable_now=function(){return R.now()};else{var Q=M.now();O.unstable_now=function(){return M.now()-Q}}var W=!1,J=null,le=-1,U=5,G=0;x=function(){return O.unstable_now()>=G},L=function(){},O.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):U=0<Ze?Math.floor(1e3/Ze):5};var $=new MessageChannel,ee=$.port2;$.port1.onmessage=function(){if(null!==J){var Ze=O.unstable_now();G=Ze+U;try{J(!0,Ze)?ee.postMessage(null):(W=!1,J=null)}catch(mt){throw ee.postMessage(null),mt}}else W=!1},S=function(Ze){J=Ze,W||(W=!0,ee.postMessage(null))},k=function(Ze,mt){le=z(function(){Ze(O.unstable_now())},mt)},o=function(){Y(le),le=-1}}function _e(Ze,mt){var nt=Ze.length;Ze.push(mt);e:for(;;){var Ge=nt-1>>>1,it=Ze[Ge];if(!(void 0!==it&&0<v(it,mt)))break e;Ze[Ge]=mt,Ze[nt]=it,nt=Ge}}function be(Ze){return void 0===(Ze=Ze[0])?null:Ze}function me(Ze){var mt=Ze[0];if(void 0!==mt){var nt=Ze.pop();if(nt!==mt){Ze[0]=nt;e:for(var Ge=0,it=Ze.length;Ge<it;){var fe=2*(Ge+1)-1,te=Ze[fe],se=fe+1,De=Ze[se];if(void 0!==te&&0>v(te,nt))void 0!==De&&0>v(De,te)?(Ze[Ge]=De,Ze[se]=nt,Ge=se):(Ze[Ge]=te,Ze[fe]=nt,Ge=fe);else{if(!(void 0!==De&&0>v(De,nt)))break e;Ze[Ge]=De,Ze[se]=nt,Ge=se}}}return mt}return null}function v(Ze,mt){var nt=Ze.sortIndex-mt.sortIndex;return 0!==nt?nt:Ze.id-mt.id}var T=[],_=[],E=1,N=null,A=3,ne=!1,pe=!1,Le=!1;function oe(Ze){for(var mt=be(_);null!==mt;){if(null===mt.callback)me(_);else{if(!(mt.startTime<=Ze))break;me(_),mt.sortIndex=mt.expirationTime,_e(T,mt)}mt=be(_)}}function $e(Ze){if(Le=!1,oe(Ze),!pe)if(null!==be(T))pe=!0,S(ct);else{var mt=be(_);null!==mt&&k($e,mt.startTime-Ze)}}function ct(Ze,mt){pe=!1,Le&&(Le=!1,o()),ne=!0;var nt=A;try{for(oe(mt),N=be(T);null!==N&&(!(N.expirationTime>mt)||Ze&&!x());){var Ge=N.callback;if(null!==Ge){N.callback=null,A=N.priorityLevel;var it=Ge(N.expirationTime<=mt);mt=O.unstable_now(),"function"==typeof it?N.callback=it:N===be(T)&&me(T),oe(mt)}else me(T);N=be(T)}if(null!==N)var fe=!0;else{var te=be(_);null!==te&&k($e,te.startTime-mt),fe=!1}return fe}finally{N=null,A=nt,ne=!1}}function Ne(Ze){switch(Ze){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Je=L;O.unstable_IdlePriority=5,O.unstable_ImmediatePriority=1,O.unstable_LowPriority=4,O.unstable_NormalPriority=3,O.unstable_Profiling=null,O.unstable_UserBlockingPriority=2,O.unstable_cancelCallback=function(Ze){Ze.callback=null},O.unstable_continueExecution=function(){pe||ne||(pe=!0,S(ct))},O.unstable_getCurrentPriorityLevel=function(){return A},O.unstable_getFirstCallbackNode=function(){return be(T)},O.unstable_next=function(Ze){switch(A){case 1:case 2:case 3:var mt=3;break;default:mt=A}var nt=A;A=mt;try{return Ze()}finally{A=nt}},O.unstable_pauseExecution=function(){},O.unstable_requestPaint=Je,O.unstable_runWithPriority=function(Ze,mt){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var nt=A;A=Ze;try{return mt()}finally{A=nt}},O.unstable_scheduleCallback=function(Ze,mt,nt){var Ge=O.unstable_now();if("object"==typeof nt&&null!==nt){var it=nt.delay;it="number"==typeof it&&0<it?Ge+it:Ge,nt="number"==typeof nt.timeout?nt.timeout:Ne(Ze)}else nt=Ne(Ze),it=Ge;return Ze={id:E++,callback:mt,priorityLevel:Ze,startTime:it,expirationTime:nt=it+nt,sortIndex:-1},it>Ge?(Ze.sortIndex=it,_e(_,Ze),null===be(T)&&Ze===be(_)&&(Le?o():Le=!0,k($e,it-Ge))):(Ze.sortIndex=nt,_e(T,Ze),pe||ne||(pe=!0,S(ct))),Ze},O.unstable_shouldYield=function(){var Ze=O.unstable_now();oe(Ze);var mt=be(T);return mt!==N&&null!==N&&null!==mt&&null!==mt.callback&&mt.startTime<=Ze&&mt.expirationTime<N.expirationTime||x()},O.unstable_wrapCallback=function(Ze){var mt=A;return function(){var nt=A;A=mt;try{return Ze.apply(this,arguments)}finally{A=nt}}}},5381:(Ce,O,S)=>{Ce.exports=S(3774)},7559:(Ce,O,S)=>{var k=S(3974),o=S(5051)("selectn"),x=S(5979),L=S(1934),j=Object.prototype.toString;Ce.exports=k(function d(m,y){o("arguments:",{path:m,object:y});for(var R=-1,M="[object Array]"===j.call(m)?m:L(x(m)),z=M.length,Y=z?y:void 0;++R<z;){if(Object(Y)!==Y)return;Y=Y[M[R]]}return o("ref:",Y),"function"==typeof Y?Y():Y})},5051:(Ce,O,S)=>{function j(){var m;try{m=O.storage.debug}catch{}return!m&&"undefined"!=typeof process&&"env"in process&&(m=process.env.DEBUG),m}(O=Ce.exports=S(2133)).log=function x(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},O.formatArgs=function o(m){var y=this.useColors;if(m[0]=(y?"%c":"")+this.namespace+(y?" %c":" ")+m[0]+(y?"%c ":" ")+"+"+O.humanize(this.diff),y){var R="color: "+this.color;m.splice(1,0,R,"color: inherit");var M=0,z=0;m[0].replace(/%[a-zA-Z%]/g,function(Y){"%%"!==Y&&(M++,"%c"===Y&&(z=M))}),m.splice(z,0,R)}},O.save=function L(m){try{null==m?O.storage.removeItem("debug"):O.storage.debug=m}catch{}},O.load=j,O.useColors=function k(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},O.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function d(){try{return window.localStorage}catch{}}(),O.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],O.formatters.j=function(m){try{return JSON.stringify(m)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}},O.enable(j())},2133:(Ce,O,S)=>{var k;function x(y){function R(){if(R.enabled){var M=R,z=+new Date,Y=z-(k||z);M.diff=Y,M.prev=k,M.curr=z,k=z;for(var X=new Array(arguments.length),Q=0;Q<X.length;Q++)X[Q]=arguments[Q];X[0]=O.coerce(X[0]),"string"!=typeof X[0]&&X.unshift("%O");var W=0;X[0]=X[0].replace(/%([a-zA-Z%])/g,function(le,U){if("%%"===le)return le;W++;var G=O.formatters[U];return"function"==typeof G&&(le=G.call(M,X[W]),X.splice(W,1),W--),le}),O.formatArgs.call(M,X);var J=R.log||O.log||console.log.bind(console);J.apply(M,X)}}return R.namespace=y,R.enabled=O.enabled(y),R.useColors=O.useColors(),R.color=function o(y){var M,R=0;for(M in y)R=(R<<5)-R+y.charCodeAt(M),R|=0;return O.colors[Math.abs(R)%O.colors.length]}(y),"function"==typeof O.init&&O.init(R),R}(O=Ce.exports=x.debug=x.default=x).coerce=function m(y){return y instanceof Error?y.stack||y.message:y},O.disable=function j(){O.enable("")},O.enable=function L(y){O.save(y),O.names=[],O.skips=[];for(var R=("string"==typeof y?y:"").split(/[\s,]+/),M=R.length,z=0;z<M;z++)!R[z]||("-"===(y=R[z].replace(/\*/g,".*?"))[0]?O.skips.push(new RegExp("^"+y.substr(1)+"$")):O.names.push(new RegExp("^"+y+"$")))},O.enabled=function d(y){var R,M;for(R=0,M=O.skips.length;R<M;R++)if(O.skips[R].test(y))return!1;for(R=0,M=O.names.length;R<M;R++)if(O.names[R].test(y))return!0;return!1},O.humanize=S(3007),O.names=[],O.skips=[],O.formatters={}},3007:Ce=>{var O=1e3,S=60*O,k=60*S,o=24*k;function m(y,R,M){if(!(y<R))return y<1.5*R?Math.floor(y/R)+" "+M:Math.ceil(y/R)+" "+M+"s"}Ce.exports=function(y,R){R=R||{};var M=typeof y;if("string"===M&&y.length>0)return function L(y){if(!((y=String(y)).length>100)){var R=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(y);if(R){var M=parseFloat(R[1]);switch((R[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*M;case"days":case"day":case"d":return M*o;case"hours":case"hour":case"hrs":case"hr":case"h":return M*k;case"minutes":case"minute":case"mins":case"min":case"m":return M*S;case"seconds":case"second":case"secs":case"sec":case"s":return M*O;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return M;default:return}}}}(y);if("number"===M&&!1===isNaN(y))return R.long?function d(y){return m(y,o,"day")||m(y,k,"hour")||m(y,S,"minute")||m(y,O,"second")||y+" ms"}(y):function j(y){return y>=o?Math.round(y/o)+"d":y>=k?Math.round(y/k)+"h":y>=S?Math.round(y/S)+"m":y>=O?Math.round(y/O)+"s":y+"ms"}(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))}},9046:(Ce,O,S)=>{const k=Symbol.prototype.valueOf,o=S(8220);Ce.exports=function x(R,M){switch(o(R)){case"array":return R.slice();case"object":return Object.assign({},R);case"date":return new R.constructor(Number(R));case"map":return new Map(R);case"set":return new Set(R);case"buffer":return function m(R){const M=R.length,z=Buffer.allocUnsafe?Buffer.allocUnsafe(M):Buffer.from(M);return R.copy(z),z}(R);case"symbol":return function y(R){return k?Object(k.call(R)):{}}(R);case"arraybuffer":return function j(R){const M=new R.constructor(R.byteLength);return new Uint8Array(M).set(new Uint8Array(R)),M}(R);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function d(R,M){return new R.constructor(R.buffer,R.byteOffset,R.length)}(R);case"regexp":return function L(R){const M=void 0!==R.flags?R.flags:/\w+$/.exec(R)||void 0,z=new R.constructor(R.source,M);return z.lastIndex=R.lastIndex,z}(R);case"error":return Object.create(R);default:return R}}},8432:(Ce,O,S)=>{var k=S(9903),o=S(4263),x=S(8597),L=k("%TypeError%"),j=k("%WeakMap%",!0),d=k("%Map%",!0),m=o("WeakMap.prototype.get",!0),y=o("WeakMap.prototype.set",!0),R=o("WeakMap.prototype.has",!0),M=o("Map.prototype.get",!0),z=o("Map.prototype.set",!0),Y=o("Map.prototype.has",!0),X=function(le,U){for(var $,G=le;null!==($=G.next);G=$)if($.key===U)return G.next=$.next,$.next=le.next,le.next=$,$};Ce.exports=function(){var U,G,$,ee={assert:function(_e){if(!ee.has(_e))throw new L("Side channel does not contain "+x(_e))},get:function(_e){if(j&&_e&&("object"==typeof _e||"function"==typeof _e)){if(U)return m(U,_e)}else if(d){if(G)return M(G,_e)}else if($)return function(le,U){var G=X(le,U);return G&&G.value}($,_e)},has:function(_e){if(j&&_e&&("object"==typeof _e||"function"==typeof _e)){if(U)return R(U,_e)}else if(d){if(G)return Y(G,_e)}else if($)return function(le,U){return!!X(le,U)}($,_e);return!1},set:function(_e,be){j&&_e&&("object"==typeof _e||"function"==typeof _e)?(U||(U=new j),y(U,_e,be)):d?(G||(G=new d),z(G,_e,be)):($||($={key:{},next:null}),function(le,U,G){var $=X(le,U);$?$.value=G:le.next={key:U,next:le.next,value:G}}($,_e,be))}};return ee}},574:(Ce,O,S)=>{Ce.exports=x;var k=S(3358).EventEmitter;function x(){k.call(this)}S(5035)(x,k),x.Readable=S(1396),x.Writable=S(1120),x.Duplex=S(9800),x.Transform=S(8157),x.PassThrough=S(1908),x.finished=S(7722),x.pipeline=S(8096),x.Stream=x,x.prototype.pipe=function(L,j){var d=this;function m(Q){L.writable&&!1===L.write(Q)&&d.pause&&d.pause()}function y(){d.readable&&d.resume&&d.resume()}d.on("data",m),L.on("drain",y),!L._isStdio&&(!j||!1!==j.end)&&(d.on("end",M),d.on("close",z));var R=!1;function M(){R||(R=!0,L.end())}function z(){R||(R=!0,"function"==typeof L.destroy&&L.destroy())}function Y(Q){if(X(),0===k.listenerCount(this,"error"))throw Q}function X(){d.removeListener("data",m),L.removeListener("drain",y),d.removeListener("end",M),d.removeListener("close",z),d.removeListener("error",Y),L.removeListener("error",Y),d.removeListener("end",X),d.removeListener("close",X),L.removeListener("close",X)}return d.on("error",Y),L.on("error",Y),d.on("end",X),d.on("close",X),L.on("close",X),L.emit("pipe",d),L}},4547:(Ce,O,S)=>{var k=S(9708).Buffer,o=k.isEncoding||function(U){switch((U=""+U)&&U.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function j(U){var G;switch(this.encoding=function L(U){var G=function x(U){if(!U)return"utf8";for(var G;;)switch(U){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return U;default:if(G)return;U=(""+U).toLowerCase(),G=!0}}(U);if("string"!=typeof G&&(k.isEncoding===o||!o(U)))throw new Error("Unknown encoding: "+U);return G||U}(U),this.encoding){case"utf16le":this.text=Y,this.end=X,G=4;break;case"utf8":this.fillLast=R,G=4;break;case"base64":this.text=Q,this.end=W,G=3;break;default:return this.write=J,void(this.end=le)}this.lastNeed=0,this.lastTotal=0,this.lastChar=k.allocUnsafe(G)}function d(U){return U<=127?0:U>>5==6?2:U>>4==14?3:U>>3==30?4:U>>6==2?-1:-2}function R(U){var G=this.lastTotal-this.lastNeed,$=function y(U,G,$){if(128!=(192&G[0]))return U.lastNeed=0,"\ufffd";if(U.lastNeed>1&&G.length>1){if(128!=(192&G[1]))return U.lastNeed=1,"\ufffd";if(U.lastNeed>2&&G.length>2&&128!=(192&G[2]))return U.lastNeed=2,"\ufffd"}}(this,U);return void 0!==$?$:this.lastNeed<=U.length?(U.copy(this.lastChar,G,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(U.copy(this.lastChar,G,0,U.length),void(this.lastNeed-=U.length))}function Y(U,G){if((U.length-G)%2==0){var $=U.toString("utf16le",G);if($){var ee=$.charCodeAt($.length-1);if(ee>=55296&&ee<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=U[U.length-2],this.lastChar[1]=U[U.length-1],$.slice(0,-1)}return $}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=U[U.length-1],U.toString("utf16le",G,U.length-1)}function X(U){var G=U&&U.length?this.write(U):"";return this.lastNeed?G+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):G}function Q(U,G){var $=(U.length-G)%3;return 0===$?U.toString("base64",G):(this.lastNeed=3-$,this.lastTotal=3,1===$?this.lastChar[0]=U[U.length-1]:(this.lastChar[0]=U[U.length-2],this.lastChar[1]=U[U.length-1]),U.toString("base64",G,U.length-$))}function W(U){var G=U&&U.length?this.write(U):"";return this.lastNeed?G+this.lastChar.toString("base64",0,3-this.lastNeed):G}function J(U){return U.toString(this.encoding)}function le(U){return U&&U.length?this.write(U):""}O.s=j,j.prototype.write=function(U){if(0===U.length)return"";var G,$;if(this.lastNeed){if(void 0===(G=this.fillLast(U)))return"";$=this.lastNeed,this.lastNeed=0}else $=0;return $<U.length?G?G+this.text(U,$):this.text(U,$):G||""},j.prototype.end=function z(U){var G=U&&U.length?this.write(U):"";return this.lastNeed?G+"\ufffd":G},j.prototype.text=function M(U,G){var $=function m(U,G,$){var ee=G.length-1;if(ee<$)return 0;var _e=d(G[ee]);return _e>=0?(_e>0&&(U.lastNeed=_e-1),_e):--ee<$||-2===_e?0:(_e=d(G[ee]))>=0?(_e>0&&(U.lastNeed=_e-2),_e):--ee<$||-2===_e?0:(_e=d(G[ee]))>=0?(_e>0&&(2===_e?_e=0:U.lastNeed=_e-3),_e):0}(this,U,G);if(!this.lastNeed)return U.toString("utf8",G);this.lastTotal=$;var ee=U.length-($-this.lastNeed);return U.copy(this.lastChar,0,ee),U.toString("utf8",G,ee)},j.prototype.fillLast=function(U){if(this.lastNeed<=U.length)return U.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);U.copy(this.lastChar,this.lastTotal-this.lastNeed,0,U.length),this.lastNeed-=U.length}},8059:Ce=>{function S(k){try{if(!global.localStorage)return!1}catch{return!1}var o=global.localStorage[k];return null!=o&&"true"===String(o).toLowerCase()}Ce.exports=function O(k,o){if(S("noDeprecation"))return k;var x=!1;return function L(){if(!x){if(S("throwDeprecation"))throw new Error(o);S("traceDeprecation")?console.trace(o):console.warn(o),x=!0}return k.apply(this,arguments)}}},480:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},70:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},9055:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},7994:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},8952:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},1707:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},9106:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},5298:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},9904:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},7716:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},6187:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},9622:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},2220:(Ce,O,S)=>{S.r(O),S.d(O,{__extends:()=>o,__assign:()=>x,__rest:()=>L,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>y,__generator:()=>R,__createBinding:()=>M,__exportStar:()=>z,__values:()=>Y,__read:()=>X,__spread:()=>Q,__spreadArrays:()=>W,__await:()=>J,__asyncGenerator:()=>le,__asyncDelegator:()=>U,__asyncValues:()=>G,__makeTemplateObject:()=>$,__importStar:()=>ee,__importDefault:()=>_e,__classPrivateFieldGet:()=>be,__classPrivateFieldSet:()=>me});var k=function(v,T){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var N in E)E.hasOwnProperty(N)&&(_[N]=E[N])})(v,T)};function o(v,T){function _(){this.constructor=v}k(v,T),v.prototype=null===T?Object.create(T):(_.prototype=T.prototype,new _)}var x=function(){return x=Object.assign||function(T){for(var _,E=1,N=arguments.length;E<N;E++)for(var A in _=arguments[E])Object.prototype.hasOwnProperty.call(_,A)&&(T[A]=_[A]);return T},x.apply(this,arguments)};function L(v,T){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&T.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(v);N<E.length;N++)T.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(v,E[N])&&(_[E[N]]=v[E[N]])}return _}function j(v,T,_,E){var ne,N=arguments.length,A=N<3?T:null===E?E=Object.getOwnPropertyDescriptor(T,_):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(v,T,_,E);else for(var pe=v.length-1;pe>=0;pe--)(ne=v[pe])&&(A=(N<3?ne(A):N>3?ne(T,_,A):ne(T,_))||A);return N>3&&A&&Object.defineProperty(T,_,A),A}function d(v,T){return function(_,E){T(_,E,v)}}function m(v,T){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,T)}function y(v,T,_,E){return new(_||(_=Promise))(function(A,ne){function pe($e){try{oe(E.next($e))}catch(ct){ne(ct)}}function Le($e){try{oe(E.throw($e))}catch(ct){ne(ct)}}function oe($e){$e.done?A($e.value):function N(A){return A instanceof _?A:new _(function(ne){ne(A)})}($e.value).then(pe,Le)}oe((E=E.apply(v,T||[])).next())})}function R(v,T){var E,N,A,ne,_={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return ne={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function pe(oe){return function($e){return function Le(oe){if(E)throw new TypeError("Generator is already executing.");for(;_;)try{if(E=1,N&&(A=2&oe[0]?N.return:oe[0]?N.throw||((A=N.return)&&A.call(N),0):N.next)&&!(A=A.call(N,oe[1])).done)return A;switch(N=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return _.label++,{value:oe[1],done:!1};case 5:_.label++,N=oe[1],oe=[0];continue;case 7:oe=_.ops.pop(),_.trys.pop();continue;default:if(!(A=(A=_.trys).length>0&&A[A.length-1])&&(6===oe[0]||2===oe[0])){_=0;continue}if(3===oe[0]&&(!A||oe[1]>A[0]&&oe[1]<A[3])){_.label=oe[1];break}if(6===oe[0]&&_.label<A[1]){_.label=A[1],A=oe;break}if(A&&_.label<A[2]){_.label=A[2],_.ops.push(oe);break}A[2]&&_.ops.pop(),_.trys.pop();continue}oe=T.call(v,_)}catch($e){oe=[6,$e],N=0}finally{E=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,$e])}}}function M(v,T,_,E){void 0===E&&(E=_),v[E]=T[_]}function z(v,T){for(var _ in v)"default"!==_&&!T.hasOwnProperty(_)&&(T[_]=v[_])}function Y(v){var T="function"==typeof Symbol&&Symbol.iterator,_=T&&v[T],E=0;if(_)return _.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&E>=v.length&&(v=void 0),{value:v&&v[E++],done:!v}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(v,T){var _="function"==typeof Symbol&&v[Symbol.iterator];if(!_)return v;var N,ne,E=_.call(v),A=[];try{for(;(void 0===T||T-- >0)&&!(N=E.next()).done;)A.push(N.value)}catch(pe){ne={error:pe}}finally{try{N&&!N.done&&(_=E.return)&&_.call(E)}finally{if(ne)throw ne.error}}return A}function Q(){for(var v=[],T=0;T<arguments.length;T++)v=v.concat(X(arguments[T]));return v}function W(){for(var v=0,T=0,_=arguments.length;T<_;T++)v+=arguments[T].length;var E=Array(v),N=0;for(T=0;T<_;T++)for(var A=arguments[T],ne=0,pe=A.length;ne<pe;ne++,N++)E[N]=A[ne];return E}function J(v){return this instanceof J?(this.v=v,this):new J(v)}function le(v,T,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,E=_.apply(v,T||[]),A=[];return N={},ne("next"),ne("throw"),ne("return"),N[Symbol.asyncIterator]=function(){return this},N;function ne(Ne){E[Ne]&&(N[Ne]=function(Je){return new Promise(function(Ze,mt){A.push([Ne,Je,Ze,mt])>1||pe(Ne,Je)})})}function pe(Ne,Je){try{!function Le(Ne){Ne.value instanceof J?Promise.resolve(Ne.value.v).then(oe,$e):ct(A[0][2],Ne)}(E[Ne](Je))}catch(Ze){ct(A[0][3],Ze)}}function oe(Ne){pe("next",Ne)}function $e(Ne){pe("throw",Ne)}function ct(Ne,Je){Ne(Je),A.shift(),A.length&&pe(A[0][0],A[0][1])}}function U(v){var T,_;return T={},E("next"),E("throw",function(N){throw N}),E("return"),T[Symbol.iterator]=function(){return this},T;function E(N,A){T[N]=v[N]?function(ne){return(_=!_)?{value:J(v[N](ne)),done:"return"===N}:A?A(ne):ne}:A}}function G(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,T=v[Symbol.asyncIterator];return T?T.call(v):(v=Y(v),_={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_);function E(A){_[A]=v[A]&&function(ne){return new Promise(function(pe,Le){!function N(A,ne,pe,Le){Promise.resolve(Le).then(function(oe){A({value:oe,done:pe})},ne)}(pe,Le,(ne=v[A](ne)).done,ne.value)})}}}function $(v,T){return Object.defineProperty?Object.defineProperty(v,"raw",{value:T}):v.raw=T,v}function ee(v){if(v&&v.__esModule)return v;var T={};if(null!=v)for(var _ in v)Object.hasOwnProperty.call(v,_)&&(T[_]=v[_]);return T.default=v,T}function _e(v){return v&&v.__esModule?v:{default:v}}function be(v,T){if(!T.has(v))throw new TypeError("attempted to get private field on non-instance");return T.get(v)}function me(v,T,_){if(!T.has(v))throw new TypeError("attempted to set private field on non-instance");return T.set(v,_),_}},6399:()=>{},3743:()=>{},6989:()=>{},4654:()=>{},2361:()=>{},4616:()=>{},5242:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2207),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9263),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(591),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3336),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(745),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6646),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(4915),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6067),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1203),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(116),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(635),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3853),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7580),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1989),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(3158),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(9295),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(8951),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2673),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7260),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(8728),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(538),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(4503);class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(Ce){const O={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},S="function"==typeof Ce?Ce():Ce,x=Object.assign({},O,{features:S.features||!!S.logOnly&&{pause:!0,export:!0,test:!0}||O.features},S);if(x.maxAge&&x.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${x.maxAge}`);return x}const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(O,S){if(this.action=O,this.timestamp=S,this.type=PERFORM_ACTION,void 0===O.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(O){this.timestamp=O,this.type=RESET}}class Rollback{constructor(O){this.timestamp=O,this.type=ROLLBACK}}class Commit{constructor(O){this.timestamp=O,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(O){this.id=O,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(O,S,k=!0){this.start=O,this.end=S,this.active=k,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(O){this.index=O,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(O){this.actionId=O,this.type=JUMP_TO_ACTION}}class ImportState{constructor(O){this.nextLiftedState=O,this.type=IMPORT_STATE}}class LockChanges{constructor(O){this.status=O,this.type=LOCK_CHANGES}}class PauseRecording{constructor(O){this.status=O,this.type=PAUSE_RECORDING}}function difference(Ce,O){return Ce.filter(S=>O.indexOf(S)<0)}function unliftState(Ce){const{computedStates:O,currentStateIndex:S}=Ce;if(S>=O.length){const{state:o}=O[O.length-1];return o}const{state:k}=O[S];return k}function unliftAction(Ce){return Ce.actionsById[Ce.nextActionId-1]}function liftAction(Ce){return new PerformAction(Ce,+Date.now())}function sanitizeActions(Ce,O){return Object.keys(O).reduce((S,k)=>{const o=Number(k);return S[o]=sanitizeAction(Ce,O[o],o),S},{})}function sanitizeAction(Ce,O,S){return{...O,action:Ce(O.action,S)}}function sanitizeStates(Ce,O){return O.map((S,k)=>({state:sanitizeState(Ce,S.state,k),error:S.error}))}function sanitizeState(Ce,O,S){return Ce(O,S)}function shouldFilterActions(Ce){return Ce.predicate||Ce.actionsSafelist||Ce.actionsBlocklist}function filterLiftedState(Ce,O,S,k){const o=[],x={},L=[];return Ce.stagedActionIds.forEach((j,d)=>{const m=Ce.actionsById[j];!m||d&&isActionFiltered(Ce.computedStates[d],m,O,S,k)||(x[j]=m,o.push(j),L.push(Ce.computedStates[d]))}),{...Ce,stagedActionIds:o,actionsById:x,computedStates:L}}function isActionFiltered(Ce,O,S,k,o){const x=S&&!S(Ce,O.action),L=k&&!O.action.type.match(k.map(d=>escapeRegExp(d)).join("|")),j=o&&O.action.type.match(o.map(d=>escapeRegExp(d)).join("|"));return x||L||j}function escapeRegExp(Ce){return Ce.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(Ce,O,S,k,o){if(k)return{state:S,error:"Interrupted by an error up the chain"};let L,x=S;try{x=Ce(S,O)}catch(j){L=j.toString(),o.handleError(j)}return{state:x,error:L}}function recomputeStates(Ce,O,S,k,o,x,L,j,d){if(O>=Ce.length&&Ce.length===x.length)return Ce;const m=Ce.slice(0,O),y=x.length-(d?1:0);for(let R=O;R<y;R++){const M=x[R],z=o[M].action,Y=m[R-1],X=Y?Y.state:k,Q=Y?Y.error:void 0,J=L.indexOf(M)>-1?Y:computeNextEntry(S,z,X,Q,j);m.push(J)}return d&&m.push(Ce[Ce.length-1]),m}function liftInitialState(Ce,O){return{monitorState:O(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:Ce,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(Ce,O,S,k,o={}){return x=>(L,j)=>{let{monitorState:d,actionsById:m,nextActionId:y,stagedActionIds:R,skippedActionIds:M,committedState:z,currentStateIndex:Y,computedStates:X,isLocked:Q,isPaused:W}=L||O;function J(G){let $=G,ee=R.slice(1,$+1);for(let _e=0;_e<ee.length;_e++){if(X[_e+1].error){$=_e,ee=R.slice(1,$+1);break}delete m[ee[_e]]}M=M.filter(_e=>-1===ee.indexOf(_e)),R=[0,...R.slice($+1)],z=X[$].state,X=X.slice($),Y=Y>$?Y-$:0}function le(){m={0:liftAction(INIT_ACTION)},y=1,R=[0],M=[],z=X[Y].state,Y=0,X=[]}L||(m=Object.create(m));let U=0;switch(j.type){case LOCK_CHANGES:Q=j.status,U=1/0;break;case PAUSE_RECORDING:W=j.status,W?(R=[...R,y],m[y]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),y++,U=R.length-1,X=X.concat(X[X.length-1]),Y===R.length-2&&Y++,U=1/0):le();break;case RESET:m={0:liftAction(INIT_ACTION)},y=1,R=[0],M=[],z=Ce,Y=0,X=[];break;case COMMIT:le();break;case ROLLBACK:m={0:liftAction(INIT_ACTION)},y=1,R=[0],M=[],Y=0,X=[];break;case TOGGLE_ACTION:{const{id:G}=j;M=-1===M.indexOf(G)?[G,...M]:M.filter(ee=>ee!==G),U=R.indexOf(G);break}case SET_ACTIONS_ACTIVE:{const{start:G,end:$,active:ee}=j,_e=[];for(let be=G;be<$;be++)_e.push(be);M=ee?difference(M,_e):[...M,..._e],U=R.indexOf(G);break}case JUMP_TO_STATE:Y=j.index,U=1/0;break;case JUMP_TO_ACTION:{const G=R.indexOf(j.actionId);-1!==G&&(Y=G),U=1/0;break}case SWEEP:R=difference(R,M),M=[],Y=Math.min(Y,R.length-1);break;case PERFORM_ACTION:{if(Q)return L||O;if(W||L&&isActionFiltered(L.computedStates[Y],j,o.predicate,o.actionsSafelist,o.actionsBlocklist)){const $=X[X.length-1];X=[...X.slice(0,-1),computeNextEntry(x,j.action,$.state,$.error,S)],U=1/0;break}o.maxAge&&R.length===o.maxAge&&J(1),Y===R.length-1&&Y++;const G=y++;m[G]=j,R=[...R,G],U=R.length-1;break}case IMPORT_STATE:({monitorState:d,actionsById:m,nextActionId:y,stagedActionIds:R,skippedActionIds:M,committedState:z,currentStateIndex:Y,computedStates:X,isLocked:Q,isPaused:W}=j.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:U=0,o.maxAge&&R.length>o.maxAge&&(X=recomputeStates(X,U,x,z,m,R,M,S,W),J(R.length-o.maxAge),U=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(X.filter($=>$.error).length>0)U=0,o.maxAge&&R.length>o.maxAge&&(X=recomputeStates(X,U,x,z,m,R,M,S,W),J(R.length-o.maxAge),U=1/0);else{if(!W&&!Q){Y===R.length-1&&Y++;const $=y++;m[$]=new PerformAction(j,+Date.now()),R=[...R,$],U=R.length-1,X=recomputeStates(X,U,x,z,m,R,M,S,W)}X=X.map($=>({...$,state:x($.state,RECOMPUTE_ACTION)})),Y=R.length-1,o.maxAge&&R.length>o.maxAge&&J(R.length-o.maxAge),U=1/0}break;default:U=1/0}return X=recomputeStates(X,U,x,z,m,R,M,S,W),d=k(d,j),{monitorState:d,actionsById:m,nextActionId:y,stagedActionIds:R,skippedActionIds:M,committedState:z,currentStateIndex:Y,computedStates:X,isLocked:Q,isPaused:W}}}let DevtoolsDispatcher=(()=>{class Ce extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return Ce.\u0275fac=function(){let O;return function(k){return(O||(O=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(Ce)))(k||Ce)}}(),Ce.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:Ce,factory:Ce.\u0275fac}),Ce})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(Ce,O,S){this.config=O,this.dispatcher=S,this.devtoolsExtension=Ce,this.createActionStreams()}notify(Ce,O){if(this.devtoolsExtension)if(Ce.type===PERFORM_ACTION){if(O.isLocked||O.isPaused)return;const S=unliftState(O);if(shouldFilterActions(this.config)&&isActionFiltered(S,Ce,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const k=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,S,O.currentStateIndex):S,o=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,Ce,O.nextActionId):Ce;this.sendToReduxDevtools(()=>this.extensionConnection.send(o,k))}else{const S={...O,stagedActionIds:O.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,O.actionsById):O.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,O.computedStates):O.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,S,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(Ce=>{const O=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=O,O.init(),O.subscribe(S=>Ce.next(S)),O.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const Ce=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),O=Ce.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(j=>j.type===ExtensionActionTypes.START)),S=Ce.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(j=>j.type===ExtensionActionTypes.STOP)),k=Ce.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(j=>j.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(j=>this.unwrapAction(j.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(j=>j.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(d=>d.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>j),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(j)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(j))),x=Ce.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(j=>j.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(j=>this.unwrapAction(j.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(S)),L=k.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(S));this.start$=O.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(S)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>x)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>L))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(Ce){const O={name:Ce.name,features:Ce.features,serialize:Ce.serialize,autoPause:Ce.autoPause??!1};return!1!==Ce.maxAge&&(O.maxAge=Ce.maxAge),O}sendToReduxDevtools(Ce){try{Ce()}catch(O){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",O)}}}return DevtoolsExtension.\u0275fac=function Ce(O){return new(O||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})(),StoreDevtools=(()=>{class Ce{constructor(S,k,o,x,L,j,d,m){const y=liftInitialState(d,m.monitor),R=liftReducerWith(d,y,j,m.monitor,m),M=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(k.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),x.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),S,x.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),z=o.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(R)),Y=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),X=M.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(z),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:le},[U,G])=>{let $=G(le,U);return U.type!==PERFORM_ACTION&&shouldFilterActions(m)&&($=filterLiftedState($,m.predicate,m.actionsSafelist,m.actionsBlocklist)),x.notify(U,$),{state:$,action:U}},{state:y,action:null})).subscribe(({state:le,action:U})=>{Y.next(le),U.type===PERFORM_ACTION&&L.next(U.action)}),Q=x.start$.subscribe(()=>{this.refresh()}),W=Y.asObservable(),J=W.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=Q,this.stateSubscription=X,this.dispatcher=S,this.liftedState=W,this.state=J}dispatch(S){this.dispatcher.next(S)}next(S){this.dispatcher.next(S)}error(S){}complete(){}performAction(S){this.dispatch(new PerformAction(S,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(S){this.dispatch(new ToggleAction(S))}jumpToAction(S){this.dispatch(new JumpToAction(S))}jumpToState(S){this.dispatch(new JumpToState(S))}importState(S){this.dispatch(new ImportState(S))}lockChanges(S){this.dispatch(new LockChanges(S))}pauseRecording(S){this.dispatch(new PauseRecording(S))}}return Ce.\u0275fac=function(S){return new(S||Ce)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ErrorHandler),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(STORE_DEVTOOLS_CONFIG))},Ce.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:Ce,factory:Ce.\u0275fac}),Ce})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(Ce,O){return Boolean(Ce)||O.monitor!==noMonitor}function createReduxDevtoolsExtension(){const Ce="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[Ce]?window[Ce]:null}function createStateObservable(Ce){return Ce.state}let StoreDevtoolsModule=(()=>{class Ce{static instrument(S={}){return{ngModule:Ce,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:S},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}}return Ce.\u0275fac=function(S){return new(S||Ce)},Ce.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineNgModule({type:Ce}),Ce.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjector({}),Ce})()},9263:(Ce,O,S)=>{S.d(O,{hg:()=>mt,UO:()=>G,qg:()=>U,Y6:()=>be,PB:()=>ve,mK:()=>Ve,n$:()=>De,Y$:()=>xe,FR:()=>D,yh:()=>tt,CK:()=>Za,Aw:()=>hl,cr:()=>zo,wb:()=>de,UY:()=>Ge,qC:()=>fe,PH:()=>Q,ZF:()=>Mr,Lq:()=>F,P1:()=>Wi,rM:()=>Fn,on:()=>b,Ky:()=>W,Ys:()=>Ft});var k=S(2207),o=S(6317),x=S(3336),L=S(253),j=S(4915),d=S(635),y=S(8728),R=S(538),M=S(4503),z=S(8977);const Y={};function Q(P,Z){if(Y[P]=(Y[P]||0)+1,"function"==typeof Z)return le(P,(...ue)=>({...Z(...ue),type:P}));switch(Z?Z._as:"empty"){case"empty":return le(P,()=>({type:P}));case"props":return le(P,ue=>({...ue,type:P}));default:throw new Error("Unexpected config.")}}function W(){return{_as:"props",_p:void 0}}function le(P,Z){return Object.defineProperty(Z,"type",{value:P,writable:!1})}const U="@ngrx/store/init";let G=(()=>{class P extends o.X{constructor(){super({type:U})}next(ae){if("function"==typeof ae)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===ae)throw new TypeError("Actions must be objects");if(void 0===ae.type)throw new TypeError("Actions must have a type property");super.next(ae)}complete(){}ngOnDestroy(){super.complete()}}return P.\u0275fac=function(ae){return new(ae||P)},P.\u0275prov=k.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P})();const $=[G],ee=new k.InjectionToken("@ngrx/store Internal Root Guard"),_e=new k.InjectionToken("@ngrx/store Internal Initial State"),be=new k.InjectionToken("@ngrx/store Initial State"),me=new k.InjectionToken("@ngrx/store Reducer Factory"),v=new k.InjectionToken("@ngrx/store Internal Reducer Factory Provider"),T=new k.InjectionToken("@ngrx/store Initial Reducers"),_=new k.InjectionToken("@ngrx/store Internal Initial Reducers"),E=new k.InjectionToken("@ngrx/store Store Features"),N=new k.InjectionToken("@ngrx/store Internal Store Reducers"),A=new k.InjectionToken("@ngrx/store Internal Feature Reducers"),ne=new k.InjectionToken("@ngrx/store Internal Feature Configs"),pe=new k.InjectionToken("@ngrx/store Internal Store Features"),Le=new k.InjectionToken("@ngrx/store Internal Feature Reducers Token"),oe=new k.InjectionToken("@ngrx/store Feature Reducers"),$e=new k.InjectionToken("@ngrx/store User Provided Meta Reducers"),ct=new k.InjectionToken("@ngrx/store Meta Reducers"),Ne=new k.InjectionToken("@ngrx/store Internal Resolved Meta Reducers"),Je=new k.InjectionToken("@ngrx/store User Runtime Checks Config"),Ze=new k.InjectionToken("@ngrx/store Internal User Runtime Checks Config"),mt=new k.InjectionToken("@ngrx/store Internal Runtime Checks"),nt=new k.InjectionToken("@ngrx/store Check if Action types are unique");function Ge(P,Z={}){const ae=Object.keys(P),ue={};for(let we=0;we<ae.length;we++){const Me=ae[we];"function"==typeof P[Me]&&(ue[Me]=P[Me])}const Te=Object.keys(ue);return function(Me,ze){Me=void 0===Me?Z:Me;let Ue=!1;const qe={};for(let Ye=0;Ye<Te.length;Ye++){const lt=Te[Ye],vt=Me[lt],ke=(0,ue[lt])(vt,ze);qe[lt]=ke,Ue=Ue||ke!==vt}return Ue?qe:Me}}function fe(...P){return function(Z){if(0===P.length)return Z;const ae=P[P.length-1];return P.slice(0,-1).reduceRight((Te,we)=>we(Te),ae(Z))}}function te(P,Z){return Array.isArray(Z)&&Z.length>0&&(P=fe.apply(null,[...Z,P])),(ae,ue)=>{const Te=P(ae);return(we,Me)=>Te(we=void 0===we?ue:we,Me)}}class De extends x.y{}class Ve extends G{}const de="@ngrx/store/update-reducers";let ve=(()=>{class P extends o.X{constructor(ae,ue,Te,we){super(we(Te,ue)),this.dispatcher=ae,this.initialState=ue,this.reducers=Te,this.reducerFactory=we}get currentReducers(){return this.reducers}addFeature(ae){this.addFeatures([ae])}addFeatures(ae){const ue=ae.reduce((Te,{reducers:we,reducerFactory:Me,metaReducers:ze,initialState:Ue,key:qe})=>{const Ye="function"==typeof we?function se(P){const Z=Array.isArray(P)&&P.length>0?fe(...P):ae=>ae;return(ae,ue)=>(ae=Z(ae),(Te,we)=>ae(Te=void 0===Te?ue:Te,we))}(ze)(we,Ue):te(Me,ze)(we,Ue);return Te[qe]=Ye,Te},{});this.addReducers(ue)}removeFeature(ae){this.removeFeatures([ae])}removeFeatures(ae){this.removeReducers(ae.map(ue=>ue.key))}addReducer(ae,ue){this.addReducers({[ae]:ue})}addReducers(ae){this.reducers={...this.reducers,...ae},this.updateReducers(Object.keys(ae))}removeReducer(ae){this.removeReducers([ae])}removeReducers(ae){ae.forEach(ue=>{this.reducers=function it(P,Z){return Object.keys(P).filter(ae=>ae!==Z).reduce((ae,ue)=>Object.assign(ae,{[ue]:P[ue]}),{})}(this.reducers,ue)}),this.updateReducers(ae)}updateReducers(ae){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:de,features:ae})}ngOnDestroy(){this.complete()}}return P.\u0275fac=function(ae){return new(ae||P)(k.\u0275\u0275inject(Ve),k.\u0275\u0275inject(be),k.\u0275\u0275inject(T),k.\u0275\u0275inject(me))},P.\u0275prov=k.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P})();const rt=[ve,{provide:De,useExisting:ve},{provide:Ve,useExisting:G}];let xe=(()=>{class P extends L.x{ngOnDestroy(){this.complete()}}return P.\u0275fac=function(){let Z;return function(ue){return(Z||(Z=k.\u0275\u0275getInheritedFactory(P)))(ue||P)}}(),P.\u0275prov=k.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P})();const q=[xe];class D extends x.y{}let K=(()=>{class P extends o.X{constructor(ae,ue,Te,we){super(we);const qe=ae.pipe((0,y.Q)(j.N)).pipe((0,R.M)(ue)).pipe((0,M.R)(ge,{state:we}));this.stateSubscription=qe.subscribe(({state:Ye,action:lt})=>{this.next(Ye),Te.next(lt)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return P.INIT=U,P.\u0275fac=function(ae){return new(ae||P)(k.\u0275\u0275inject(G),k.\u0275\u0275inject(De),k.\u0275\u0275inject(xe),k.\u0275\u0275inject(be))},P.\u0275prov=k.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P})();function ge(P={state:void 0},[Z,ae]){const{state:ue}=P;return{state:ae(ue,Z),action:Z}}const je=[K,{provide:D,useExisting:K}];let tt=(()=>{class P extends x.y{constructor(ae,ue,Te){super(),this.actionsObserver=ue,this.reducerManager=Te,this.source=ae}select(ae,...ue){return Ft.call(null,ae,...ue)(this)}lift(ae){const ue=new P(this,this.actionsObserver,this.reducerManager);return ue.operator=ae,ue}dispatch(ae){this.actionsObserver.next(ae)}next(ae){this.actionsObserver.next(ae)}error(ae){this.actionsObserver.error(ae)}complete(){this.actionsObserver.complete()}addReducer(ae,ue){this.reducerManager.addReducer(ae,ue)}removeReducer(ae){this.reducerManager.removeReducer(ae)}}return P.\u0275fac=function(ae){return new(ae||P)(k.\u0275\u0275inject(D),k.\u0275\u0275inject(G),k.\u0275\u0275inject(ve))},P.\u0275prov=k.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P})();const ot=[tt];function Ft(P,Z,...ae){return function(Te){let we;if("string"==typeof P){const Me=[Z,...ae].filter(Boolean);we=Te.pipe(function m(...P){const Z=P.length;if(0===Z)throw new Error("list of properties cannot be empty.");return(0,d.U)(ae=>{let ue=ae;for(let Te=0;Te<Z;Te++){const we=null==ue?void 0:ue[P[Te]];if(void 0===we)return;ue=we}return ue})}(P,...Me))}else{if("function"!=typeof P)throw new TypeError(`Unexpected type '${typeof P}' in select operator, expected 'string' or 'function'`);we=Te.pipe((0,d.U)(Me=>P(Me,Z)))}return we.pipe((0,z.x)())}}const qt="https://ngrx.io/guide/store/configuration/runtime-checks";function tn(P){return void 0===P}function Pe(P){return null===P}function ei(P){return Array.isArray(P)}function ht(P){return"object"==typeof P&&null!==P}function En(P){return"function"==typeof P}function Fn(){return false}function ti(P,Z){return P===Z}function Pi(P,Z,ae){for(let ue=0;ue<P.length;ue++)if(!ae(P[ue],Z[ue]))return!0;return!1}function ni(P,Z=ti,ae=ti){let we,ue=null,Te=null;return{memoized:function qe(){if(void 0!==we)return we.result;if(!ue)return Te=P.apply(null,arguments),ue=arguments,Te;if(!Pi(arguments,ue,Z))return Te;const Ye=P.apply(null,arguments);return ue=arguments,ae(Te,Ye)?Te:(Te=Ye,Ye)},reset:function Me(){ue=null,Te=null},setResult:function ze(Ye){we={result:Ye}},clearResult:function Ue(){we=void 0}}}function Wi(...P){return function Ki(P,Z={stateFn:Ti}){return function(...ae){let ue=ae;if(Array.isArray(ue[0])){const[Ye,...lt]=ue;ue=[...Ye,...lt]}const Te=ue.slice(0,ue.length-1),we=ue[ue.length-1],Me=Te.filter(Ye=>Ye.release&&"function"==typeof Ye.release),ze=P(function(...Ye){return we.apply(null,Ye)}),Ue=ni(function(Ye,lt){return Z.stateFn.apply(null,[Ye,Te,lt,ze])});return Object.assign(Ue.memoized,{release:function qe(){Ue.reset(),ze.reset(),Me.forEach(Ye=>Ye.release())},projector:ze.memoized,setResult:Ue.setResult,clearResult:Ue.clearResult})}}(ni)(...P)}function Ti(P,Z,ae,ue){if(void 0===ae){const we=Z.map(Me=>Me(P));return ue.memoized.apply(null,we)}const Te=Z.map(we=>we(P,ae));return ue.memoized.apply(null,[...Te,ae])}function Mr(P){return Wi(Z=>{const ae=Z[P];return(0,k.isDevMode)()&&!(P in Z)&&console.warn(`@ngrx/store: The feature name "${P}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${P}', ...) or StoreModule.forFeature('${P}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),ae},Z=>Z)}function io(P){Object.freeze(P);const Z=En(P);return Object.getOwnPropertyNames(P).forEach(ae=>{if(!ae.startsWith("\u0275")&&function Ht(P,Z){return Object.prototype.hasOwnProperty.call(P,Z)}(P,ae)&&(!Z||"caller"!==ae&&"callee"!==ae&&"arguments"!==ae)){const ue=P[ae];(ht(ue)||En(ue))&&!Object.isFrozen(ue)&&io(ue)}}),P}function dr(P,Z=[]){return(tn(P)||Pe(P))&&0===Z.length?{path:["root"],value:P}:Object.keys(P).reduce((ue,Te)=>{if(ue)return ue;const we=P[Te];return function Kn(P){return En(P)&&P.hasOwnProperty("\u0275cmp")}(we)?ue:!(tn(we)||Pe(we)||function On(P){return"number"==typeof P}(we)||function Nt(P){return"boolean"==typeof P}(we)||function nn(P){return"string"==typeof P}(we)||ei(we))&&(function gn(P){if(!function _t(P){return ht(P)&&!ei(P)}(P))return!1;const Z=Object.getPrototypeOf(P);return Z===Object.prototype||null===Z}(we)?dr(we,[...Z,Te]):{path:[...Z,Te],value:we})},!1)}function Bo(P,Z){if(!1===P)return;const ae=P.path.join("."),ue=new Error(`Detected unserializable ${Z} at "${ae}". ${qt}#strict${Z}serializability`);throw ue.value=P.value,ue.unserializablePath=ae,ue}function _o(P){return(0,k.isDevMode)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...P}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function oi({strictActionSerializability:P,strictStateSerializability:Z}){return ae=>P||Z?function oa(P,Z){return function(ae,ue){Z.action(ue)&&Bo(dr(ue),"action");const Te=P(ae,ue);return Z.state()&&Bo(dr(Te),"state"),Te}}(ae,{action:ue=>P&&!Cr(ue),state:()=>Z}):ae}function jo({strictActionImmutability:P,strictStateImmutability:Z}){return ae=>P||Z?function Lr(P,Z){return function(ae,ue){const Te=Z.action(ue)?io(ue):ue,we=P(ae,Te);return Z.state()?io(we):we}}(ae,{action:ue=>P&&!Cr(ue),state:()=>Z}):ae}function Cr(P){return P.type.startsWith("@ngrx")}function Nr({strictActionWithinNgZone:P}){return Z=>P?function yo(P,Z){return function(ae,ue){if(Z.action(ue)&&!k.NgZone.isInAngularZone())throw new Error(`Action '${ue.type}' running outside NgZone. ${qt}#strictactionwithinngzone`);return P(ae,ue)}}(Z,{action:ae=>P&&!Cr(ae)}):Z}function xo(P){return[{provide:Ze,useValue:P},{provide:Je,useFactory:Ps,deps:[Ze]},{provide:mt,deps:[Je],useFactory:_o},{provide:ct,multi:!0,deps:[mt],useFactory:jo},{provide:ct,multi:!0,deps:[mt],useFactory:oi},{provide:ct,multi:!0,deps:[mt],useFactory:Nr}]}function jn(){return[{provide:nt,multi:!0,deps:[mt],useFactory:Fs}]}function Ps(P){return P}function Fs(P){if(!P.strictActionTypeUniqueness)return;const Z=Object.entries(Y).filter(([,ae])=>ae>1).map(([ae])=>ae);if(Z.length)throw new Error(`Action types are registered more than once, ${Z.map(ae=>`"${ae}"`).join(", ")}. ${qt}#strictactiontypeuniqueness`)}let zo=(()=>{class P{constructor(ae,ue,Te,we,Me,ze){}}return P.\u0275fac=function(ae){return new(ae||P)(k.\u0275\u0275inject(G),k.\u0275\u0275inject(De),k.\u0275\u0275inject(xe),k.\u0275\u0275inject(tt),k.\u0275\u0275inject(ee,8),k.\u0275\u0275inject(nt,8))},P.\u0275mod=k.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=k.\u0275\u0275defineInjector({}),P})(),Za=(()=>{class P{constructor(ae,ue,Te,we,Me){this.features=ae,this.featureReducers=ue,this.reducerManager=Te;const ze=ae.map((Ue,qe)=>{const lt=ue.shift()[qe];return{...Ue,reducers:lt,initialState:es(Ue.initialState)}});Te.addFeatures(ze)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return P.\u0275fac=function(ae){return new(ae||P)(k.\u0275\u0275inject(pe),k.\u0275\u0275inject(oe),k.\u0275\u0275inject(ve),k.\u0275\u0275inject(zo),k.\u0275\u0275inject(nt,8))},P.\u0275mod=k.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=k.\u0275\u0275defineInjector({}),P})(),hl=(()=>{class P{static forRoot(ae,ue={}){return{ngModule:zo,providers:[{provide:ee,useFactory:C,deps:[[tt,new k.Optional,new k.SkipSelf]]},{provide:_e,useValue:ue.initialState},{provide:be,useFactory:es,deps:[_e]},{provide:_,useValue:ae},{provide:N,useExisting:ae instanceof k.InjectionToken?ae:_},{provide:T,deps:[k.Injector,_,[new k.Inject(N)]],useFactory:pl},{provide:$e,useValue:ue.metaReducers?ue.metaReducers:[]},{provide:Ne,deps:[ct,$e],useFactory:ml},{provide:v,useValue:ue.reducerFactory?ue.reducerFactory:Ge},{provide:me,deps:[v,Ne],useFactory:te},$,rt,q,je,ot,xo(ue.runtimeChecks),jn()]}}static forFeature(ae,ue,Te={}){return{ngModule:Za,providers:[{provide:ne,multi:!0,useValue:ae instanceof Object?{}:Te},{provide:E,multi:!0,useValue:{key:ae instanceof Object?ae.name:ae,reducerFactory:Te instanceof k.InjectionToken||!Te.reducerFactory?Ge:Te.reducerFactory,metaReducers:Te instanceof k.InjectionToken||!Te.metaReducers?[]:Te.metaReducers,initialState:Te instanceof k.InjectionToken||!Te.initialState?void 0:Te.initialState}},{provide:pe,deps:[k.Injector,ne,E],useFactory:lc},{provide:A,multi:!0,useValue:ae instanceof Object?ae.reducer:ue},{provide:Le,multi:!0,useExisting:ue instanceof k.InjectionToken?ue:A},{provide:oe,multi:!0,deps:[k.Injector,A,[new k.Inject(Le)]],useFactory:aa},jn()]}}}return P.\u0275fac=function(ae){return new(ae||P)},P.\u0275mod=k.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=k.\u0275\u0275defineInjector({}),P})();function pl(P,Z){return Z instanceof k.InjectionToken?P.get(Z):Z}function lc(P,Z,ae){return ae.map((ue,Te)=>{if(Z[Te]instanceof k.InjectionToken){const we=P.get(Z[Te]);return{key:ue.key,reducerFactory:we.reducerFactory?we.reducerFactory:Ge,metaReducers:we.metaReducers?we.metaReducers:[],initialState:we.initialState}}return ue})}function aa(P,Z){return Z.map(ue=>ue instanceof k.InjectionToken?P.get(ue):ue)}function es(P){return"function"==typeof P?P():P}function ml(P,Z){return P.concat(Z)}function C(P){if(P)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function b(...P){return{reducer:P.pop(),types:P.map(ue=>ue.type)}}function F(P,...Z){const ae=new Map;for(const ue of Z)for(const Te of ue.types){const we=ae.get(Te);ae.set(Te,we?(ze,Ue)=>ue.reducer(we(ze,Ue),Ue):ue.reducer)}return function(ue=P,Te){const we=ae.get(Te.type);return we?we(ue,Te):ue}}},2148:Ce=>{Ce.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},6086:Ce=>{Ce.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\u{1d504}","afr":"\u{1d51e}","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1d538}","aopf":"\u{1d552}","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\u{1d49c}","ascr":"\u{1d4b6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\u{1d505}","bfr":"\u{1d51f}","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\u{1d539}","bopf":"\u{1d553}","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\u{1d4b7}","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\u{1d520}","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\u{1d554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\u{1d49e}","cscr":"\u{1d4b8}","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\u{1d507}","dfr":"\u{1d521}","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\u{1d53b}","dopf":"\u{1d555}","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\u{1d49f}","dscr":"\u{1d4b9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1d508}","efr":"\u{1d522}","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1d53c}","eopf":"\u{1d556}","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\u{1d509}","ffr":"\u{1d523}","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\u{1d53d}","fopf":"\u{1d557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\u{1d4bb}","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\u{1d50a}","gfr":"\u{1d524}","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\u{1d53e}","gopf":"\u{1d558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\u{1d4a2}","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\u{1d525}","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\u{1d559}","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1d4bd}","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\u{1d526}","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\u{1d540}","iopf":"\u{1d55a}","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\u{1d4be}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1d50d}","jfr":"\u{1d527}","jmath":"\u0237","Jopf":"\u{1d541}","jopf":"\u{1d55b}","Jscr":"\u{1d4a5}","jscr":"\u{1d4bf}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\u{1d50e}","kfr":"\u{1d528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\u{1d542}","kopf":"\u{1d55c}","Kscr":"\u{1d4a6}","kscr":"\u{1d4c0}","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\u{1d50f}","lfr":"\u{1d529}","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\u{1d543}","lopf":"\u{1d55d}","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\u{1d4c1}","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\u{1d510}","mfr":"\u{1d52a}","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\u{1d544}","mopf":"\u{1d55e}","mp":"\u2213","mscr":"\u{1d4c2}","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1d511}","nfr":"\u{1d52b}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\u{1d55f}","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\u{1d4a9}","nscr":"\u{1d4c3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\u{1d512}","ofr":"\u{1d52c}","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\u{1d546}","oopf":"\u{1d560}","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\u{1d4aa}","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\u{1d513}","pfr":"\u{1d52d}","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\u{1d561}","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\u{1d4ab}","pscr":"\u{1d4c5}","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\u{1d514}","qfr":"\u{1d52e}","qint":"\u2a0c","qopf":"\u{1d562}","Qopf":"\u211a","qprime":"\u2057","Qscr":"\u{1d4ac}","qscr":"\u{1d4c6}","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\u{1d52f}","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\u{1d563}","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\u{1d4c7}","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1d516}","sfr":"\u{1d530}","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\u{1d54a}","sopf":"\u{1d564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\u{1d4ae}","sscr":"\u{1d4c8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\u{1d517}","tfr":"\u{1d531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\u{1d54b}","topf":"\u{1d565}","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\u{1d4af}","tscr":"\u{1d4c9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\u{1d518}","ufr":"\u{1d532}","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1d54c}","uopf":"\u{1d566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\u{1d4b0}","uscr":"\u{1d4ca}","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\u{1d519}","vfr":"\u{1d533}","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\u{1d54d}","vopf":"\u{1d567}","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\u{1d4b1}","vscr":"\u{1d4cb}","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1d51a}","wfr":"\u{1d534}","Wopf":"\u{1d54e}","wopf":"\u{1d568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1d4b2}","wscr":"\u{1d4cc}","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\u{1d51b}","xfr":"\u{1d535}","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\u{1d54f}","xopf":"\u{1d569}","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\u{1d4b3}","xscr":"\u{1d4cd}","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\u{1d51c}","yfr":"\u{1d536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1d550}","yopf":"\u{1d56a}","Yscr":"\u{1d4b4}","yscr":"\u{1d4ce}","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\u{1d537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\u{1d56b}","Zopf":"\u2124","Zscr":"\u{1d4b5}","zscr":"\u{1d4cf}","zwj":"\u200d","zwnj":"\u200c"}')},2453:Ce=>{Ce.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","AElig":"\xc6","aelig":"\xe6","Agrave":"\xc0","agrave":"\xe0","amp":"&","AMP":"&","Aring":"\xc5","aring":"\xe5","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","brvbar":"\xa6","Ccedil":"\xc7","ccedil":"\xe7","cedil":"\xb8","cent":"\xa2","copy":"\xa9","COPY":"\xa9","curren":"\xa4","deg":"\xb0","divide":"\xf7","Eacute":"\xc9","eacute":"\xe9","Ecirc":"\xca","ecirc":"\xea","Egrave":"\xc8","egrave":"\xe8","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","frac12":"\xbd","frac14":"\xbc","frac34":"\xbe","gt":">","GT":">","Iacute":"\xcd","iacute":"\xed","Icirc":"\xce","icirc":"\xee","iexcl":"\xa1","Igrave":"\xcc","igrave":"\xec","iquest":"\xbf","Iuml":"\xcf","iuml":"\xef","laquo":"\xab","lt":"<","LT":"<","macr":"\xaf","micro":"\xb5","middot":"\xb7","nbsp":"\xa0","not":"\xac","Ntilde":"\xd1","ntilde":"\xf1","Oacute":"\xd3","oacute":"\xf3","Ocirc":"\xd4","ocirc":"\xf4","Ograve":"\xd2","ograve":"\xf2","ordf":"\xaa","ordm":"\xba","Oslash":"\xd8","oslash":"\xf8","Otilde":"\xd5","otilde":"\xf5","Ouml":"\xd6","ouml":"\xf6","para":"\xb6","plusmn":"\xb1","pound":"\xa3","quot":"\\"","QUOT":"\\"","raquo":"\xbb","reg":"\xae","REG":"\xae","sect":"\xa7","shy":"\xad","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","szlig":"\xdf","THORN":"\xde","thorn":"\xfe","times":"\xd7","Uacute":"\xda","uacute":"\xfa","Ucirc":"\xdb","ucirc":"\xfb","Ugrave":"\xd9","ugrave":"\xf9","uml":"\xa8","Uuml":"\xdc","uuml":"\xfc","Yacute":"\xdd","yacute":"\xfd","yen":"\xa5","yuml":"\xff"}')},8161:Ce=>{Ce.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')}}]);
//# sourceMappingURL=279.948ba630c40ea816.js.map